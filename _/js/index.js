"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r,a,s=[],h=!0,u=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;h=!1}else for(;!(h=(i=r.call(n)).done)&&(s.push(i.value),s.length!==e);h=!0);}catch(t){u=!0,o=t}finally{try{if(!h&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _createForOfIteratorHelper(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,e=function(){};return{s:e,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){a=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function asyncGeneratorStep(t,e,n,i,o,r,a){try{var s=t[r](a),h=s.value}catch(t){return void n(t)}s.done?e(h):Promise.resolve(h).then(i,o)}function _asyncToGenerator(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var i=s.apply(t,a);function o(t){asyncGeneratorStep(i,e,n,o,r,"next",t)}function r(t){asyncGeneratorStep(i,e,n,o,r,"throw",t)}o(void 0)})}}function ownKeys(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(t,e,n){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);e=n.call(t,e||"default");if("object"!==_typeof(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function i(o,r,a){function s(e,t){if(!r[e]){if(!o[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(h)return h(e,!0);n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}n=r[e]={exports:{}};o[e][0].call(n.exports,function(t){return s(o[e][1][t]||t)},n,n.exports,i,o,r,a)}return r[e].exports}for(var h="function"==typeof require&&require,t=0;t<a.length;t++)s(a[t]);return s}({1:[function(n,t,e){(function(t){function e(t,e,n){t[e]||Object.defineProperty(t,e,{writable:!0,configurable:!0,value:n})}if(n(327),n(328),n(2),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;e(String.prototype,"padLeft","".padStart),e(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&e(Array,t,Function.call.bind([][t]))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2,327:327,328:328}],2:[function(t,e,n){t(130),e.exports=t(23).RegExp.escape},{130:130,23:23}],3:[function(t,e,n){e.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},{}],4:[function(t,e,n){var i=t(18);e.exports=function(t,e){if("number"!=typeof t&&"Number"!=i(t))throw TypeError(e);return+t}},{18:18}],5:[function(t,e,n){var i=t(128)("unscopables"),o=Array.prototype;null==o[i]&&t(42)(o,i,{}),e.exports=function(t){o[i][t]=!0}},{128:128,42:42}],6:[function(t,e,n){e.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},{}],7:[function(t,e,n){var i=t(51);e.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},{51:51}],8:[function(t,e,n){var u=t(119),l=t(114),d=t(118);e.exports=[].copyWithin||function(t,e,n){var i=u(this),o=d(i.length),r=l(t,o),a=l(e,o),n=2<arguments.length?n:void 0,s=Math.min((void 0===n?o:l(n,o))-a,o-r),h=1;for(a<r&&r<a+s&&(h=-1,a+=s-1,r+=s-1);0<s--;)a in i?i[r]=i[a]:delete i[r],r+=h,a+=h;return i}},{114:114,118:118,119:119}],9:[function(t,e,n){var h=t(119),u=t(114),l=t(118);e.exports=function(t,e,n){for(var i=h(this),o=l(i.length),r=arguments.length,a=u(1<r?e:void 0,o),n=2<r?n:void 0,s=void 0===n?o:u(n,o);a<s;)i[a++]=t;return i}},{114:114,118:118,119:119}],10:[function(t,e,n){var i=t(39);e.exports=function(t,e){var n=[];return i(t,!1,n.push,n,e),n}},{39:39}],11:[function(t,e,n){var h=t(117),u=t(118),l=t(114);e.exports=function(s){return function(t,e,n){var i,o=h(t),r=u(o.length),a=l(n,r);if(s&&e!=e){for(;a<r;)if((i=o[a++])!=i)return!0}else for(;a<r;a++)if((s||a in o)&&o[a]===e)return s||a||0;return!s&&-1}}},{114:114,117:117,118:118}],12:[function(t,e,n){var w=t(25),b=t(47),S=t(119),x=t(118),i=t(15);e.exports=function(d,t){var c=1==d,g=2==d,f=3==d,p=4==d,m=6==d,y=5==d||m,v=t||i;return function(t,e,n){for(var i,o,r=S(t),a=b(r),s=w(e,n,3),h=x(a.length),u=0,l=c?v(t,h):g?v(t,0):void 0;u<h;u++)if((y||u in a)&&(o=s(i=a[u],u,r),d))if(c)l[u]=o;else if(o)switch(d){case 3:return!0;case 5:return i;case 6:return u;case 2:l.push(i)}else if(p)return!1;return m?-1:f||p?p:l}}},{118:118,119:119,15:15,25:25,47:47}],13:[function(t,e,n){var l=t(3),d=t(119),c=t(47),g=t(118);e.exports=function(t,e,n,i,o){l(e);var r=d(t),a=c(r),s=g(r.length),h=o?s-1:0,u=o?-1:1;if(n<2)for(;;){if(h in a){i=a[h],h+=u;break}if(h+=u,o?h<0:s<=h)throw TypeError("Reduce of empty array with no initial value")}for(;o?0<=h:h<s;h+=u)h in a&&(i=e(i,a[h],h,r));return i}},{118:118,119:119,3:3,47:47}],14:[function(t,e,n){var i=t(51),o=t(49),r=t(128)("species");e.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=void 0),i(e)&&null===(e=e[r])&&(e=void 0)),void 0===e?Array:e}},{128:128,49:49,51:51}],15:[function(t,e,n){var i=t(14);e.exports=function(t,e){return new(i(t))(e)}},{14:14}],16:[function(t,e,n){var r=t(3),a=t(51),s=t(46),h=[].slice,u={};e.exports=Function.bind||function(e){function n(){var t=o.concat(h.call(arguments));return this instanceof n?function(t,e,n){if(!(e in u)){for(var i=[],o=0;o<e;o++)i[o]="a["+o+"]";u[e]=Function("F,a","return new F("+i.join(",")+")")}return u[e](t,n)}(i,t.length,t):s(i,t,e)}var i=r(this),o=h.call(arguments,1);return a(i.prototype)&&(n.prototype=i.prototype),n}},{3:3,46:46,51:51}],17:[function(t,e,n){var i=t(18),o=t(128)("toStringTag"),r="Arguments"==i(function(){return arguments}());e.exports=function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?t:r?i(e):"Object"==(t=i(e))&&"function"==typeof e.callee?"Arguments":t}},{128:128,18:18}],18:[function(t,e,n){var i={}.toString;e.exports=function(t){return i.call(t).slice(8,-1)}},{}],19:[function(t,e,n){function a(t,e){var n,i=f(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n}var s=t(72).f,h=t(71),u=t(93),l=t(25),d=t(6),c=t(39),i=t(55),o=t(57),r=t(100),g=t(29),f=t(66).fastKey,p=t(125),m=g?"_s":"size";e.exports={getConstructor:function(t,o,n,i){var r=t(function(t,e){d(t,r,o,"_i"),t._t=o,t._i=h(null),t._f=void 0,t._l=void 0,t[m]=0,null!=e&&c(e,n,t[i],t)});return u(r.prototype,{clear:function(){for(var t=p(this,o),e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var e,n=p(this,o),i=a(n,t);return i&&(e=i.n,t=i.p,delete n._i[i.i],i.r=!0,t&&(t.n=e),e&&(e.p=t),n._f==i&&(n._f=e),n._l==i&&(n._l=t),n[m]--),!!i},forEach:function(t,e){p(this,o);for(var n,i=l(t,1<arguments.length?e:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!a(p(this,o),t)}}),g&&s(r.prototype,"size",{get:function(){return p(this,o)[m]}}),r},def:function(t,e,n){var i,o=a(t,e);return o?o.v=n:(t._l=o={i:i=f(e,!0),k:e,v:n,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[m]++,"F"!==i&&(t._i[i]=o)),t},getEntry:a,setStrong:function(t,n,e){i(t,n,function(t,e){this._t=p(t,n),this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?o(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,o(1))},e?"entries":"values",!e,!0),r(n)}}},{100:100,125:125,25:25,29:29,39:39,55:55,57:57,6:6,66:66,71:71,72:72,93:93}],20:[function(t,e,n){var i=t(17),o=t(10);e.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return o(this)}}},{10:10,17:17}],21:[function(t,e,n){function a(t){return t._l||(t._l=new y)}function i(t,e){return f(t.a,function(t){return t[0]===e})}var s=t(93),h=t(66).getWeak,o=t(7),u=t(51),l=t(6),d=t(39),r=t(12),c=t(41),g=t(125),f=r(5),p=r(6),m=0,y=function(){this.a=[]};y.prototype={get:function(t){t=i(this,t);if(t)return t[1]},has:function(t){return!!i(this,t)},set:function(t,e){var n=i(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(e){var t=p(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(t,n,i,o){var r=t(function(t,e){l(t,r,n,"_i"),t._t=n,t._i=m++,t._l=void 0,null!=e&&d(e,i,t[o],t)});return s(r.prototype,{delete:function(t){if(!u(t))return!1;var e=h(t);return!0===e?a(g(this,n)).delete(t):e&&c(e,this._i)&&delete e[this._i]},has:function(t){if(!u(t))return!1;var e=h(t);return!0===e?a(g(this,n)).has(t):e&&c(e,this._i)}}),r},def:function(t,e,n){var i=h(o(e),!0);return!0===i?a(t).set(e,n):i[t._i]=n,t},ufstore:a}},{12:12,125:125,39:39,41:41,51:51,6:6,66:66,7:7,93:93}],22:[function(t,e,n){var y=t(40),v=t(33),w=t(94),b=t(93),S=t(66),x=t(39),P=t(6),k=t(51),L=t(35),M=t(56),_=t(101),N=t(45);e.exports=function(n,t,e,i,o,r){function a(t){var n=p[t];w(p,t,"delete"==t?function(t){return!(r&&!k(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(r&&!k(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return r&&!k(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,e){return n.call(this,0===t?0:t,e),this})}var s,h,u,l,d,c=y[n],g=c,f=o?"set":"add",p=g&&g.prototype,m={};return"function"==typeof g&&(r||p.forEach&&!L(function(){(new g).entries().next()}))?(h=(s=new g)[f](r?{}:-0,1)!=s,u=L(function(){s.has(1)}),l=M(function(t){new g(t)}),d=!r&&L(function(){for(var t=new g,e=5;e--;)t[f](e,e);return!t.has(-0)}),l||(((g=t(function(t,e){P(t,g,n);t=N(new c,t,g);return null!=e&&x(e,o,t[f],t),t})).prototype=p).constructor=g),(u||d)&&(a("delete"),a("has"),o&&a("get")),(d||h)&&a(f),r&&p.clear&&delete p.clear):(g=i.getConstructor(t,n,o,f),b(g.prototype,e),S.NEED=!0),_(g,n),m[n]=g,v(v.G+v.W+v.F*(g!=c),m),r||i.setStrong(g,n,o),g}},{101:101,33:33,35:35,39:39,40:40,45:45,51:51,56:56,6:6,66:66,93:93,94:94}],23:[function(t,e,n){e=e.exports={version:"2.5.0"};"number"==typeof __e&&(__e=e)},{}],24:[function(t,e,n){var i=t(72),o=t(92);e.exports=function(t,e,n){e in t?i.f(t,e,o(0,n)):t[e]=n}},{72:72,92:92}],25:[function(t,e,n){var r=t(3);e.exports=function(i,o,t){if(r(i),void 0===o)return i;switch(t){case 1:return function(t){return i.call(o,t)};case 2:return function(t,e){return i.call(o,t,e)};case 3:return function(t,e,n){return i.call(o,t,e,n)}}return function(){return i.apply(o,arguments)}}},{3:3}],26:[function(t,e,n){function o(t){return 9<t?t:"0"+t}var t=t(35),r=Date.prototype.getTime,i=Date.prototype.toISOString;e.exports=t(function(){return"0385-07-25T07:06:39.999Z"!=i.call(new Date(-5e13-1))})||!t(function(){i.call(new Date(NaN))})?function(){if(!isFinite(r.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),i=e<0?"-":9999<e?"+":"";return i+("00000"+Math.abs(e)).slice(i?-6:-4)+"-"+o(t.getUTCMonth()+1)+"-"+o(t.getUTCDate())+"T"+o(t.getUTCHours())+":"+o(t.getUTCMinutes())+":"+o(t.getUTCSeconds())+"."+(99<n?n:"0"+o(n))+"Z"}:i},{35:35}],27:[function(t,e,n){var i=t(7),o=t(120);e.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return o(i(this),"number"!=t)}},{120:120,7:7}],28:[function(t,e,n){e.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},{}],29:[function(t,e,n){e.exports=!t(35)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{35:35}],30:[function(t,e,n){var i=t(51),o=t(40).document,r=i(o)&&i(o.createElement);e.exports=function(t){return r?o.createElement(t):{}}},{40:40,51:51}],31:[function(t,e,n){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],32:[function(t,e,n){var s=t(81),h=t(78),u=t(82);e.exports=function(t){var e=s(t),n=h.f;if(n)for(var i,o=n(t),r=u.f,a=0;o.length>a;)r.call(t,i=o[a++])&&e.push(i);return e}},{78:78,81:81,82:82}],33:[function(t,e,n){var f=t(40),p=t(23),m=t(42),y=t(94),v=t(25),t=function t(e,n,i){var o,r,a,s=e&t.F,h=e&t.G,u=e&t.P,l=e&t.B,d=h?f:e&t.S?f[n]||(f[n]={}):(f[n]||{}).prototype,c=h?p:p[n]||(p[n]={}),g=c.prototype||(c.prototype={});for(o in h&&(i=n),i)r=((a=!s&&d&&void 0!==d[o])?d:i)[o],a=l&&a?v(r,f):u&&"function"==typeof r?v(Function.call,r):r,d&&y(d,o,r,e&t.U),c[o]!=r&&m(c,o,a),u&&g[o]!=r&&(g[o]=r)};f.core=p,t.F=1,t.G=2,t.S=4,t.P=8,t.B=16,t.W=32,t.U=64,t.R=128,e.exports=t},{23:23,25:25,40:40,42:42,94:94}],34:[function(t,e,n){var i=t(128)("match");e.exports=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[i]=!1,!"/./"[e](n)}catch(e){}}return!0}},{128:128}],35:[function(t,e,n){e.exports=function(t){try{return!!t()}catch(t){return!0}}},{}],36:[function(t,e,n){var a=t(42),s=t(94),h=t(35),u=t(28),l=t(128);e.exports=function(e,t,n){var i=l(e),o=n(u,i,""[e]),n=o[0],r=o[1];h(function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})&&(s(String.prototype,e,n),a(RegExp.prototype,i,2==t?function(t,e){return r.call(t,this,e)}:function(t){return r.call(t,this)}))}},{128:128,28:28,35:35,42:42,94:94}],37:[function(t,e,n){var i=t(7);e.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},{7:7}],38:[function(t,e,n){var f=t(49),p=t(51),m=t(118),y=t(25),v=t(128)("isConcatSpreadable");e.exports=function t(e,n,i,o,r,a,s,h){for(var u,l,d=r,c=0,g=!!s&&y(s,h,3);c<o;){if(c in i){if(u=g?g(i[c],c,n):i[c],l=!1,p(u)&&(l=void 0!==(l=u[v])?!!l:f(u)),l&&0<a)d=t(e,n,u,m(u.length),d,a-1)-1;else{if(9007199254740991<=d)throw TypeError();e[d]=u}d++}c++}return d}},{118:118,128:128,25:25,49:49,51:51}],39:[function(t,e,n){var d=t(25),c=t(53),g=t(48),f=t(7),p=t(118),m=t(129),y={},v={};(n=e.exports=function(t,e,n,i,o){var r,a,s,h,o=o?function(){return t}:m(t),u=d(n,i,e?2:1),l=0;if("function"!=typeof o)throw TypeError(t+" is not iterable!");if(g(o)){for(r=p(t.length);l<r;l++)if((h=e?u(f(a=t[l])[0],a[1]):u(t[l]))===y||h===v)return h}else for(s=o.call(t);!(a=s.next()).done;)if((h=c(s,u,a.value,e))===y||h===v)return h}).BREAK=y,n.RETURN=v},{118:118,129:129,25:25,48:48,53:53,7:7}],40:[function(t,e,n){e=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},{}],41:[function(t,e,n){var i={}.hasOwnProperty;e.exports=function(t,e){return i.call(t,e)}},{}],42:[function(t,e,n){var i=t(72),o=t(92);e.exports=t(29)?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},{29:29,72:72,92:92}],43:[function(t,e,n){t=t(40).document;e.exports=t&&t.documentElement},{40:40}],44:[function(t,e,n){e.exports=!t(29)&&!t(35)(function(){return 7!=Object.defineProperty(t(30)("div"),"a",{get:function(){return 7}}).a})},{29:29,30:30,35:35}],45:[function(t,e,n){var o=t(51),r=t(99).set;e.exports=function(t,e,n){var i,e=e.constructor;return e!==n&&"function"==typeof e&&(i=e.prototype)!==n.prototype&&o(i)&&r&&r(t,i),t}},{51:51,99:99}],46:[function(t,e,n){e.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},{}],47:[function(t,e,n){var i=t(18);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},{18:18}],48:[function(t,e,n){var i=t(58),o=t(128)("iterator"),r=Array.prototype;e.exports=function(t){return void 0!==t&&(i.Array===t||r[o]===t)}},{128:128,58:58}],49:[function(t,e,n){var i=t(18);e.exports=Array.isArray||function(t){return"Array"==i(t)}},{18:18}],50:[function(t,e,n){var i=t(51),o=Math.floor;e.exports=function(t){return!i(t)&&isFinite(t)&&o(t)===t}},{51:51}],51:[function(t,e,n){e.exports=function(t){return"object"==_typeof(t)?null!==t:"function"==typeof t}},{}],52:[function(t,e,n){var i=t(51),o=t(18),r=t(128)("match");e.exports=function(t){var e;return i(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==o(t))}},{128:128,18:18,51:51}],53:[function(t,e,n){var r=t(7);e.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},{7:7}],54:[function(t,e,n){var i=t(71),o=t(92),r=t(101),a={};t(42)(a,t(128)("iterator"),function(){return this}),e.exports=function(t,e,n){t.prototype=i(a,{next:o(1,n)}),r(t,e+" Iterator")}},{101:101,128:128,42:42,71:71,92:92}],55:[function(t,e,n){function v(){return this}var w=t(60),b=t(33),S=t(94),x=t(42),P=t(41),k=t(58),L=t(54),M=t(101),_=t(79),N=t(128)("iterator"),A=!([].keys&&"next"in[].keys());e.exports=function(t,e,n,i,o,r,a){L(n,e,i);function s(t){if(!A&&t in f)return f[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}}var h,u,l,d=e+" Iterator",c="values"==o,g=!1,f=t.prototype,p=f[N]||f["@@iterator"]||o&&f[o],m=p||s(o),y=o?c?s("entries"):m:void 0,i="Array"==e&&f.entries||p;if(i&&(l=_(i.call(new t)))!==Object.prototype&&l.next&&(M(l,d,!0),w||P(l,N)||x(l,N,v)),c&&p&&"values"!==p.name&&(g=!0,m=function(){return p.call(this)}),w&&!a||!A&&!g&&f[N]||x(f,N,m),k[e]=m,k[d]=v,o)if(h={values:c?m:s("values"),keys:r?m:s("keys"),entries:y},a)for(u in h)u in f||S(f,u,h[u]);else b(b.P+b.F*(A||g),e,h);return h}},{101:101,128:128,33:33,41:41,42:42,54:54,58:58,60:60,79:79,94:94}],56:[function(t,e,n){var r=t(128)("iterator"),a=!1;try{var i=[7][r]();i.return=function(){a=!0},Array.from(i,function(){throw 2})}catch(t){}e.exports=function(t,e){if(!e&&!a)return!1;var n=!1;try{var i=[7],o=i[r]();o.next=function(){return{done:n=!0}},i[r]=function(){return o},t(i)}catch(t){}return n}},{128:128}],57:[function(t,e,n){e.exports=function(t,e){return{value:e,done:!!t}}},{}],58:[function(t,e,n){e.exports={}},{}],59:[function(t,e,n){var s=t(81),h=t(117);e.exports=function(t,e){for(var n,i=h(t),o=s(i),r=o.length,a=0;a<r;)if(i[n=o[a++]]===e)return n}},{117:117,81:81}],60:[function(t,e,n){e.exports=!1},{}],61:[function(t,e,n){var i=Math.expm1;e.exports=!i||22025.465794806718<i(10)||i(10)<22025.465794806718||-2e-17!=i(-2e-17)?function(t){return 0==(t=+t)?t:-1e-6<t&&t<1e-6?t+t*t/2:Math.exp(t)-1}:i},{}],62:[function(t,e,n){var i=t(65),t=Math.pow,o=t(2,-52),r=t(2,-23),a=t(2,127)*(2-r),s=t(2,-126);e.exports=Math.fround||function(t){var e=Math.abs(t),n=i(t);return e<s?n*(e/s/r+1/o-1/o)*s*r:a<(e=(t=(1+r/o)*e)-(t-e))||e!=e?n*(1/0):n*e}},{65:65}],63:[function(t,e,n){e.exports=Math.log1p||function(t){return-1e-8<(t=+t)&&t<1e-8?t-t*t/2:Math.log(1+t)}},{}],64:[function(t,e,n){e.exports=Math.scale||function(t,e,n,i,o){return 0===arguments.length||t!=t||e!=e||n!=n||i!=i||o!=o?NaN:t===1/0||t===-1/0?t:(t-e)*(o-i)/(n-e)+i}},{}],65:[function(t,e,n){e.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},{}],66:[function(t,e,n){function i(t){s(t,o,{value:{i:"O"+ ++h,w:{}}})}var o=t(124)("meta"),r=t(51),a=t(41),s=t(72).f,h=0,u=Object.isExtensible||function(){return!0},l=!t(35)(function(){return u(Object.preventExtensions({}))}),d=e.exports={KEY:o,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==_typeof(t)?t:("string"==typeof t?"S":"P")+t;if(!a(t,o)){if(!u(t))return"F";if(!e)return"E";i(t)}return t[o].i},getWeak:function(t,e){if(!a(t,o)){if(!u(t))return!0;if(!e)return!1;i(t)}return t[o].w},onFreeze:function(t){return l&&d.NEED&&u(t)&&!a(t,o)&&i(t),t}}},{124:124,35:35,41:41,51:51,72:72}],67:[function(t,e,n){function o(t,e,n){var i=s.get(t);if(!i){if(!n)return;s.set(t,i=new r)}if(!(t=i.get(e))){if(!n)return;i.set(e,t=new r)}return t}var r=t(160),i=t(33),a=t(103)("metadata"),s=a.store||(a.store=new(t(266)));e.exports={store:s,map:o,has:function(t,e,n){n=o(e,n,!1);return void 0!==n&&n.has(t)},get:function(t,e,n){n=o(e,n,!1);return void 0===n?void 0:n.get(t)},set:function(t,e,n,i){o(n,i,!0).set(t,e)},keys:function(t,e){var e=o(t,e,!1),n=[];return e&&e.forEach(function(t,e){n.push(e)}),n},key:function(t){return void 0===t||"symbol"==_typeof(t)?t:String(t)},exp:function(t){i(i.S,"Reflect",t)}}},{103:103,160:160,266:266,33:33}],68:[function(t,e,n){var s=t(40),h=t(113).set,u=s.MutationObserver||s.WebKitMutationObserver,l=s.process,d=s.Promise,c="process"==t(18)(l);e.exports=function(){function t(){var t,e;for(c&&(t=l.domain)&&t.exit();n;){e=n.fn,n=n.next;try{e()}catch(t){throw n?a():i=void 0,t}}i=void 0,t&&t.enter()}var n,i,e,o,r,a;return a=c?function(){l.nextTick(t)}:u?(e=!0,o=document.createTextNode(""),new u(t).observe(o,{characterData:!0}),function(){o.data=e=!e}):d&&d.resolve?(r=d.resolve(),function(){r.then(t)}):function(){h.call(s,t)},function(t){t={fn:t,next:void 0};i&&(i.next=t),n||(n=t,a()),i=t}}},{113:113,18:18,40:40}],69:[function(t,e,n){function i(t){var n,i;this.promise=new t(function(t,e){if(void 0!==n||void 0!==i)throw TypeError("Bad Promise constructor");n=t,i=e}),this.resolve=o(n),this.reject=o(i)}var o=t(3);e.exports.f=function(t){return new i(t)}},{3:3}],70:[function(t,e,n){var d=t(81),c=t(78),g=t(82),f=t(119),p=t(47),o=Object.assign;e.exports=!o||t(35)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=o({},t)[n]||Object.keys(o({},e)).join("")!=i})?function(t){for(var e=f(t),n=arguments.length,i=1,o=c.f,r=g.f;i<n;)for(var a,s=p(arguments[i++]),h=o?d(s).concat(o(s)):d(s),u=h.length,l=0;l<u;)r.call(s,a=h[l++])&&(e[a]=s[a]);return e}:o},{119:119,35:35,47:47,78:78,81:81,82:82}],71:[function(n,t,e){function i(){}var o=n(7),r=n(73),a=n(31),s=n(102)("IE_PROTO"),h=function(){var t=n(30)("iframe"),e=a.length;for(t.style.display="none",n(43).appendChild(t),t.src="javascript:",(t=t.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),h=t.F;e--;)delete h.prototype[a[e]];return h()};t.exports=Object.create||function(t,e){var n;return null!==t?(i.prototype=o(t),n=new i,i.prototype=null,n[s]=t):n=h(),void 0===e?n:r(n,e)}},{102:102,30:30,31:31,43:43,7:7,73:73}],72:[function(t,e,n){var i=t(7),o=t(44),r=t(120),a=Object.defineProperty;n.f=t(29)?Object.defineProperty:function(t,e,n){if(i(t),e=r(e,!0),i(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},{120:120,29:29,44:44,7:7}],73:[function(t,e,n){var a=t(72),s=t(7),h=t(81);e.exports=t(29)?Object.defineProperties:function(t,e){s(t);for(var n,i=h(e),o=i.length,r=0;r<o;)a.f(t,n=i[r++],e[n]);return t}},{29:29,7:7,72:72,81:81}],74:[function(e,t,n){t.exports=e(60)||!e(35)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete e(40)[t]})},{35:35,40:40,60:60}],75:[function(t,e,n){var i=t(82),o=t(92),r=t(117),a=t(120),s=t(41),h=t(44),u=Object.getOwnPropertyDescriptor;n.f=t(29)?u:function(t,e){if(t=r(t),e=a(e,!0),h)try{return u(t,e)}catch(t){}if(s(t,e))return o(!i.f.call(t,e),t[e])}},{117:117,120:120,29:29,41:41,44:44,82:82,92:92}],76:[function(t,e,n){var i=t(117),o=t(77).f,r={}.toString,a="object"==("undefined"==typeof window?"undefined":_typeof(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(t){return a&&"[object Window]"==r.call(t)?function(t){try{return o(t)}catch(t){return a.slice()}}(t):o(i(t))}},{117:117,77:77}],77:[function(t,e,n){var i=t(80),o=t(31).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return i(t,o)}},{31:31,80:80}],78:[function(t,e,n){n.f=Object.getOwnPropertySymbols},{}],79:[function(t,e,n){var i=t(41),o=t(119),r=t(102)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(t){return t=o(t),i(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},{102:102,119:119,41:41}],80:[function(t,e,n){var a=t(41),s=t(117),h=t(11)(!1),u=t(102)("IE_PROTO");e.exports=function(t,e){var n,i=s(t),o=0,r=[];for(n in i)n!=u&&a(i,n)&&r.push(n);for(;e.length>o;)a(i,n=e[o++])&&(~h(r,n)||r.push(n));return r}},{102:102,11:11,117:117,41:41}],81:[function(t,e,n){var i=t(80),o=t(31);e.exports=Object.keys||function(t){return i(t,o)}},{31:31,80:80}],82:[function(t,e,n){n.f={}.propertyIsEnumerable},{}],83:[function(t,e,n){var o=t(33),r=t(23),a=t(35);e.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],i={};i[t]=e(n),o(o.S+o.F*a(function(){n(1)}),"Object",i)}},{23:23,33:33,35:35}],84:[function(t,e,n){var h=t(81),u=t(117),l=t(82).f;e.exports=function(s){return function(t){for(var e,n=u(t),i=h(n),o=i.length,r=0,a=[];r<o;)l.call(n,e=i[r++])&&a.push(s?[e,n[e]]:n[e]);return a}}},{117:117,81:81,82:82}],85:[function(t,e,n){var i=t(77),o=t(78),r=t(7),t=t(40).Reflect;e.exports=t&&t.ownKeys||function(t){var e=i.f(r(t)),n=o.f;return n?e.concat(n(t)):e}},{40:40,7:7,77:77,78:78}],86:[function(t,e,n){var i=t(40).parseFloat,o=t(111).trim;e.exports=1/i(t(112)+"-0")!=-1/0?function(t){var e=o(String(t),3),t=i(e);return 0===t&&"-"==e.charAt(0)?-0:t}:i},{111:111,112:112,40:40}],87:[function(t,e,n){var i=t(40).parseInt,o=t(111).trim,t=t(112),r=/^[-+]?0[xX]/;e.exports=8!==i(t+"08")||22!==i(t+"0x16")?function(t,e){t=o(String(t),3);return i(t,e>>>0||(r.test(t)?16:10))}:i},{111:111,112:112,40:40}],88:[function(t,e,n){var i=t(89),u=t(46),l=t(3);e.exports=function(){for(var o=l(this),r=arguments.length,a=Array(r),t=0,s=i._,h=!1;t<r;)(a[t]=arguments[t++])===s&&(h=!0);return function(){var t,e=arguments.length,n=0,i=0;if(!h&&!e)return u(o,a,this);if(t=a.slice(),h)for(;n<r;n++)t[n]===s&&(t[n]=arguments[i++]);for(;i<e;)t.push(arguments[i++]);return u(o,t,this)}}},{3:3,46:46,89:89}],89:[function(t,e,n){e.exports=t(40)},{40:40}],90:[function(t,e,n){e.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},{}],91:[function(t,e,n){var i=t(69);e.exports=function(t,e){t=i.f(t);return(0,t.resolve)(e),t.promise}},{69:69}],92:[function(t,e,n){e.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},{}],93:[function(t,e,n){var o=t(94);e.exports=function(t,e,n){for(var i in e)o(t,i,e[i],n);return t}},{94:94}],94:[function(t,e,n){var r=t(40),a=t(42),s=t(41),h=t(124)("src"),i=Function.toString,u=(""+i).split("toString");t(23).inspectSource=function(t){return i.call(t)},(e.exports=function(t,e,n,i){var o="function"==typeof n;o&&(s(n,"name")||a(n,"name",e)),t[e]!==n&&(o&&(s(n,h)||a(n,h,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:i?t[e]?t[e]=n:a(t,e,n):(delete t[e],a(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[h]||i.call(this)})},{124:124,23:23,40:40,41:41,42:42}],95:[function(t,e,n){e.exports=function(e,n){var i=n===Object(n)?function(t){return n[t]}:n;return function(t){return String(t).replace(e,i)}}},{}],96:[function(t,e,n){e.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},{}],97:[function(t,e,n){var i=t(33),s=t(3),h=t(25),u=t(39);e.exports=function(t){i(i.S,t,{from:function(t,e,n){var i,o,r,a=e;return s(this),(e=void 0!==a)&&s(a),null==t?new this:(i=[],e?(o=0,r=h(a,n,2),u(t,!1,function(t){i.push(r(t,o++))})):u(t,!1,i.push,i),new this(i))}})}},{25:25,3:3,33:33,39:39}],98:[function(t,e,n){var i=t(33);e.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},{33:33}],99:[function(e,t,n){function o(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")}var i=e(51),r=e(7);t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,i){try{(i=e(25)(Function.call,e(75).f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return o(t,e),n?t.__proto__=e:i(t,e),t}}({},!1):void 0),check:o}},{25:25,51:51,7:7,75:75}],100:[function(t,e,n){var i=t(40),o=t(72),r=t(29),a=t(128)("species");e.exports=function(t){t=i[t];r&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},{128:128,29:29,40:40,72:72}],101:[function(t,e,n){var i=t(72).f,o=t(41),r=t(128)("toStringTag");e.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,r)&&i(t,r,{configurable:!0,value:e})}},{128:128,41:41,72:72}],102:[function(t,e,n){var i=t(103)("keys"),o=t(124);e.exports=function(t){return i[t]||(i[t]=o(t))}},{103:103,124:124}],103:[function(t,e,n){var t=t(40),i=t["__core-js_shared__"]||(t["__core-js_shared__"]={});e.exports=function(t){return i[t]||(i[t]={})}},{40:40}],104:[function(t,e,n){var i=t(7),o=t(3),r=t(128)("species");e.exports=function(t,e){var n,t=i(t).constructor;return void 0===t||null==(n=i(t)[r])?e:o(n)}},{128:128,3:3,7:7}],105:[function(t,e,n){var i=t(35);e.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},{35:35}],106:[function(t,e,n){var a=t(116),s=t(28);e.exports=function(r){return function(t,e){var n,i=String(s(t)),o=a(e),t=i.length;return o<0||t<=o?r?"":void 0:(e=i.charCodeAt(o))<55296||56319<e||o+1===t||(n=i.charCodeAt(o+1))<56320||57343<n?r?i.charAt(o):e:r?i.slice(o,o+2):n-56320+(e-55296<<10)+65536}}},{116:116,28:28}],107:[function(t,e,n){var i=t(52),o=t(28);e.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(t))}},{28:28,52:52}],108:[function(t,e,n){function i(t,e,n,i){var t=String(a(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(i).replace(s,"&quot;")+'"'),o+">"+t+"</"+e+">"}var o=t(33),r=t(35),a=t(28),s=/"/g;e.exports=function(e,t){var n={};n[e]=t(i),o(o.P+o.F*r(function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",n)}},{28:28,33:33,35:35}],109:[function(t,e,n){var r=t(118),a=t(110),s=t(28);e.exports=function(t,e,n,i){var o=String(s(t)),t=o.length,n=void 0===n?" ":String(n),e=r(e);if(e<=t||""==n)return o;t=e-t,n=a.call(n,Math.ceil(t/n.length));return n.length>t&&(n=n.slice(0,t)),i?n+o:o+n}},{110:110,118:118,28:28}],110:[function(t,e,n){var o=t(116),r=t(28);e.exports=function(t){var e=String(r(this)),n="",i=o(t);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;0<i;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}},{116:116,28:28}],111:[function(t,e,n){var r=t(33),i=t(28),a=t(35),s=t(112),t="["+s+"]",o=RegExp("^"+t+t+"*"),h=RegExp(t+t+"*$"),t=function(t,e,n){var i={},o=a(function(){return!!s[t]()||"​"!="​"[t]()}),e=i[t]=o?e(u):s[t];n&&(i[n]=e),r(r.P+r.F*o,"String",i)},u=t.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(o,"")),2&e&&(t=t.replace(h,"")),t};e.exports=t},{112:112,28:28,33:33,35:35}],112:[function(t,e,n){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],113:[function(t,e,n){function i(){var t,e=+this;y.hasOwnProperty(e)&&(t=y[e],delete y[e],t())}function o(t){i.call(t.data)}var r,a=t(25),s=t(46),h=t(43),u=t(30),l=t(40),d=l.process,c=l.setImmediate,g=l.clearImmediate,f=l.MessageChannel,p=l.Dispatch,m=0,y={};c&&g||(c=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return y[++m]=function(){s("function"==typeof t?t:Function(t),e)},r(m),m},g=function(t){delete y[t]},"process"==t(18)(d)?r=function(t){d.nextTick(a(i,t,1))}:p&&p.now?r=function(t){p.now(a(i,t,1))}:f?(f=(t=new f).port2,t.port1.onmessage=o,r=a(f.postMessage,f,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",o,!1)):r="onreadystatechange"in u("script")?function(t){h.appendChild(u("script")).onreadystatechange=function(){h.removeChild(this),i.call(t)}}:function(t){setTimeout(a(i,t,1),0)}),e.exports={set:c,clear:g}},{18:18,25:25,30:30,40:40,43:43,46:46}],114:[function(t,e,n){var i=t(116),o=Math.max,r=Math.min;e.exports=function(t,e){return(t=i(t))<0?o(t+e,0):r(t,e)}},{116:116}],115:[function(t,e,n){var i=t(116),o=t(118);e.exports=function(t){if(void 0===t)return 0;var e=i(t),t=o(e);if(e!==t)throw RangeError("Wrong length!");return t}},{116:116,118:118}],116:[function(t,e,n){var i=Math.ceil,o=Math.floor;e.exports=function(t){return isNaN(t=+t)?0:(0<t?o:i)(t)}},{}],117:[function(t,e,n){var i=t(47),o=t(28);e.exports=function(t){return i(o(t))}},{28:28,47:47}],118:[function(t,e,n){var i=t(116),o=Math.min;e.exports=function(t){return 0<t?o(i(t),9007199254740991):0}},{116:116}],119:[function(t,e,n){var i=t(28);e.exports=function(t){return Object(i(t))}},{28:28}],120:[function(t,e,n){var o=t(51);e.exports=function(t,e){if(!o(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!o(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!o(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!o(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},{51:51}],121:[function(t,e,n){var g,f,p,m,y,i,c,v,o,w,r,a,b,S,s,h,u,x,P,k,L,M,_,N,A,l,d,T,C,D,E,F,O,B,G,j,z,R,I,V,U,q,H,Y,K,X,W,$,J,Z,Q,tt,et,nt,it,ot,rt,at,st,ht,ut,lt,dt,ct,gt,ft,pt,mt,yt,vt,wt,bt,St,xt,Pt,kt,Lt,Mt,_t,Nt,At,Tt,Ct,Dt,Et,Ft,Ot,Bt;t(29)?(g=t(60),f=t(40),p=t(35),m=t(33),y=t(123),i=t(122),c=t(25),v=t(6),o=t(92),w=t(42),r=t(93),a=t(116),b=t(118),S=t(115),s=t(114),h=t(120),u=t(41),x=t(17),P=t(51),k=t(119),L=t(48),M=t(71),_=t(79),N=t(77).f,A=t(129),Ft=t(124),kt=t(128),Ot=t(12),l=t(11),d=t(104),T=t(141),C=t(58),D=t(56),E=t(100),F=t(9),O=t(8),B=t(72),G=t(75),j=B.f,z=G.f,R=f.RangeError,I=f.TypeError,V=f.Uint8Array,t=Array.prototype,U=i.ArrayBuffer,q=i.DataView,H=Ot(0),Y=Ot(2),K=Ot(3),X=Ot(4),W=Ot(5),$=Ot(6),J=l(!0),Z=l(!1),Q=T.values,tt=T.keys,et=T.entries,nt=t.lastIndexOf,it=t.reduce,ot=t.reduceRight,rt=t.join,at=t.sort,st=t.slice,ht=t.toString,ut=t.toLocaleString,lt=kt("iterator"),dt=kt("toStringTag"),ct=Ft("typed_constructor"),gt=Ft("def_constructor"),t=y.CONSTR,ft=y.TYPED,pt=y.VIEW,mt=Ot(1,function(t,e){return St(d(t,t[gt]),e)}),yt=p(function(){return 1===new V(new Uint16Array([1]).buffer)[0]}),vt=!!V&&!!V.prototype.set&&p(function(){new V(1).set({})}),wt=function(t,e){t=a(t);if(t<0||t%e)throw R("Wrong offset!");return t},bt=function(t){if(P(t)&&ft in t)return t;throw I(t+" is not a typed array!")},St=function(t,e){if(!(P(t)&&ct in t))throw I("It is not a typed array constructor!");return new t(e)},xt=function(t,e){return Pt(d(t,t[gt]),e)},Pt=function(t,e){for(var n=0,i=e.length,o=St(t,i);n<i;)o[n]=e[n++];return o},kt=function(t,e,n){j(t,e,{get:function(){return this._d[n]}})},Lt=function(t,e,n){var i,o,r,a,s,h,u=k(t),t=arguments.length,l=1<t?e:void 0,d=void 0!==l,e=A(u);if(null!=e&&!L(e)){for(h=e.call(u),r=[],i=0;!(s=h.next()).done;i++)r.push(s.value);u=r}for(d&&2<t&&(l=c(l,n,2)),i=0,o=b(u.length),a=St(this,o);i<o;i++)a[i]=d?l(u[i],i):u[i];return a},Mt=function(){for(var t=0,e=arguments.length,n=St(this,e);t<e;)n[t]=arguments[t++];return n},_t=!!V&&p(function(){ut.call(new V(1))}),Nt=function(){return ut.apply(_t?st.call(bt(this)):bt(this),arguments)},At={copyWithin:function(t,e,n){return O.call(bt(this),t,e,2<arguments.length?n:void 0)},every:function(t,e){return X(bt(this),t,1<arguments.length?e:void 0)},fill:function(){return F.apply(bt(this),arguments)},filter:function(t,e){return xt(this,Y(bt(this),t,1<arguments.length?e:void 0))},find:function(t,e){return W(bt(this),t,1<arguments.length?e:void 0)},findIndex:function(t,e){return $(bt(this),t,1<arguments.length?e:void 0)},forEach:function(t,e){H(bt(this),t,1<arguments.length?e:void 0)},indexOf:function(t,e){return Z(bt(this),t,1<arguments.length?e:void 0)},includes:function(t,e){return J(bt(this),t,1<arguments.length?e:void 0)},join:function(){return rt.apply(bt(this),arguments)},lastIndexOf:function(){return nt.apply(bt(this),arguments)},map:function(t,e){return mt(bt(this),t,1<arguments.length?e:void 0)},reduce:function(){return it.apply(bt(this),arguments)},reduceRight:function(){return ot.apply(bt(this),arguments)},reverse:function(){for(var t,e=this,n=bt(e).length,i=Math.floor(n/2),o=0;o<i;)t=e[o],e[o++]=e[--n],e[n]=t;return e},some:function(t,e){return K(bt(this),t,1<arguments.length?e:void 0)},sort:function(t){return at.call(bt(this),t)},subarray:function(t,e){var n=bt(this),i=n.length,t=s(t,i);return new(d(n,n[gt]))(n.buffer,n.byteOffset+t*n.BYTES_PER_ELEMENT,b((void 0===e?i:s(e,i))-t))}},Tt=function(t,e){return xt(this,st.call(bt(this),t,e))},Ct=function(t,e){bt(this);var n=wt(e,1),e=this.length,i=k(t),o=b(i.length),r=0;if(e<o+n)throw R("Wrong length!");for(;r<o;)this[n+r]=i[r++]},Dt={entries:function(){return et.call(bt(this))},keys:function(){return tt.call(bt(this))},values:function(){return Q.call(bt(this))}},Et=function(t,e){return P(t)&&t[ft]&&"symbol"!=_typeof(e)&&e in t&&String(+e)==String(e)},Ft=function(t,e){return Et(t,e=h(e,!0))?o(2,t[e]):z(t,e)},Ot=function(t,e,n){return!(Et(t,e=h(e,!0))&&P(n)&&u(n,"value"))||u(n,"get")||u(n,"set")||n.configurable||u(n,"writable")&&!n.writable||u(n,"enumerable")&&!n.enumerable?j(t,e,n):(t[e]=n.value,t)},t||(G.f=Ft,B.f=Ot),m(m.S+m.F*!t,"Object",{getOwnPropertyDescriptor:Ft,defineProperty:Ot}),p(function(){ht.call({})})&&(ht=ut=function(){return rt.call(this)}),Bt=r({},At),r(Bt,Dt),w(Bt,lt,Dt.values),r(Bt,{slice:Tt,set:Ct,constructor:function(){},toString:ht,toLocaleString:Nt}),kt(Bt,"buffer","b"),kt(Bt,"byteOffset","o"),kt(Bt,"byteLength","l"),kt(Bt,"length","e"),j(Bt,dt,{get:function(){return this[ft]}}),e.exports=function(t,u,e,i){function l(t,e){j(t,e,{get:function(){return function(t,e){t=t._d;return t.v[n](e*u+t.o,yt)}(this,e)},set:function(t){return function(t,e,n){t=t._d;i&&(n=(n=Math.round(n))<0?0:255<n?255:255&n),t.v[o](e*u+t.o,n,yt)}(this,e,t)},enumerable:!0})}var d=t+((i=!!i)?"Clamped":"")+"Array",n="get"+t,o="set"+t,c=f[d],r=c||{},a=c&&_(c),s=!c||!y.ABV,t={},h=c&&c.prototype;s?(c=e(function(t,e,n,i){v(t,c,d,"_d");var o,r,a,s=0,h=0;if(P(e)){if(!(e instanceof U||"ArrayBuffer"==(a=x(e))||"SharedArrayBuffer"==a))return ft in e?Pt(c,e):Lt.call(c,e);a=e,h=wt(n,u);n=e.byteLength;if(void 0===i){if(n%u)throw R("Wrong length!");if((o=n-h)<0)throw R("Wrong length!")}else if((o=b(i)*u)+h>n)throw R("Wrong length!");r=o/u}else r=S(e),a=new U(o=r*u);for(w(t,"_d",{b:a,o:h,l:o,e:r,v:new q(a)});s<r;)l(t,s++)}),h=c.prototype=M(Bt),w(h,"constructor",c)):p(function(){c(1)})&&p(function(){new c(-1)})&&D(function(t){new c,new c(null),new c(1.5),new c(t)},!0)||(c=e(function(t,e,n,i){var o;return v(t,c,d),P(e)?e instanceof U||"ArrayBuffer"==(o=x(e))||"SharedArrayBuffer"==o?void 0!==i?new r(e,wt(n,u),i):void 0!==n?new r(e,wt(n,u)):new r(e):ft in e?Pt(c,e):Lt.call(c,e):new r(S(e))}),H(a!==Function.prototype?N(r).concat(N(a)):N(r),function(t){t in c||w(c,t,r[t])}),c.prototype=h,g||(h.constructor=c));s=h[lt],e=!!s&&("values"==s.name||null==s.name),a=Dt.values;w(c,ct,!0),w(h,ft,d),w(h,pt,!0),w(h,gt,c),(i?new c(1)[dt]==d:dt in h)||j(h,dt,{get:function(){return d}}),t[d]=c,m(m.G+m.W+m.F*(c!=r),t),m(m.S,d,{BYTES_PER_ELEMENT:u}),m(m.S+m.F*p(function(){r.of.call(c,1)}),d,{from:Lt,of:Mt}),"BYTES_PER_ELEMENT"in h||w(h,"BYTES_PER_ELEMENT",u),m(m.P,d,At),E(d),m(m.P+m.F*vt,d,{set:Ct}),m(m.P+m.F*!e,d,Dt),g||h.toString==ht||(h.toString=ht),m(m.P+m.F*p(function(){new c(1).slice()}),d,{slice:Tt}),m(m.P+m.F*(p(function(){return[1,2].toLocaleString()!=new c([1,2]).toLocaleString()})||!p(function(){h.toLocaleString.call([1,2])})),d,{toLocaleString:Nt}),C[d]=e?s:a,g||e||w(h,lt,a)}):e.exports=function(){}},{100:100,104:104,11:11,114:114,115:115,116:116,118:118,119:119,12:12,120:120,122:122,123:123,124:124,128:128,129:129,141:141,17:17,25:25,29:29,33:33,35:35,40:40,41:41,42:42,48:48,51:51,56:56,58:58,6:6,60:60,71:71,72:72,75:75,77:77,79:79,8:8,9:9,92:92,93:93}],122:[function(t,e,n){function i(t,e,n){var i,o,r=Array(n),a=8*n-e-1,s=(1<<a)-1,h=s>>1,u=23===e?G(2,-24)-G(2,-77):0,l=0,d=t<0||0===t&&1/t<0?1:0;for((t=B(t))!=t||t===F?(o=t!=t?1:0,i=s):(i=j(z(t)/R),t*(n=G(2,-i))<1&&(i--,n*=2),2<=(t+=1<=i+h?u/n:u*G(2,1-h))*n&&(i++,n/=2),s<=i+h?(o=0,i=s):1<=i+h?(o=(t*n-1)*G(2,e),i+=h):(o=t*G(2,h-1)*G(2,e),i=0));8<=e;r[l++]=255&o,o/=256,e-=8);for(i=i<<e|o,a+=e;0<a;r[l++]=255&i,i/=256,a-=8);return r[--l]|=128*d,r}function o(t,e,n){var i,o=8*n-e-1,r=(1<<o)-1,a=r>>1,s=o-7,h=n-1,n=t[h--],u=127&n;for(n>>=7;0<s;u=256*u+t[h],h--,s-=8);for(i=u&(1<<-s)-1,u>>=-s,s+=e;0<s;i=256*i+t[h],h--,s-=8);if(0===u)u=1-a;else{if(u===r)return i?NaN:n?-F:F;i+=G(2,e),u-=a}return(n?-1:1)*i*G(2,u-e)}function r(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function a(t){return[255&t]}function s(t){return[255&t,t>>8&255]}function h(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function u(t){return i(t,52,8)}function l(t){return i(t,23,4)}function d(t,e,n){M(t[A],e,{get:function(){return this[n]}})}function c(t,e,n,i){var o=k(+n);if(o+e>t[V])throw E(T);n=t[I]._b,t=o+t[U],e=n.slice(t,t+e);return i?e:e.reverse()}function g(t,e,n,i,o,r){n=k(+n);if(n+e>t[V])throw E(T);for(var a=t[I]._b,s=n+t[U],h=i(+o),u=0;u<e;u++)a[s+u]=h[r?u:e-u-1]}var f=t(40),p=t(29),m=t(60),y=t(123),v=t(42),w=t(93),b=t(35),S=t(6),x=t(116),P=t(118),k=t(115),L=t(77).f,M=t(72).f,_=t(9),N=t(101),A="prototype",T="Wrong index!",C=f.ArrayBuffer,D=f.DataView,t=f.Math,E=f.RangeError,F=f.Infinity,O=C,B=t.abs,G=t.pow,j=t.floor,z=t.log,R=t.LN2,I=p?"_b":"buffer",V=p?"_l":"byteLength",U=p?"_o":"byteOffset";if(y.ABV){if(!b(function(){C(1)})||!b(function(){new C(-1)})||b(function(){return new C,new C(1.5),new C(NaN),"ArrayBuffer"!=C.name})){for(var q,H=(C=function(t){return S(this,C),new O(k(t))})[A]=O[A],Y=L(O),K=0;Y.length>K;)(q=Y[K++])in C||v(C,q,O[q]);m||(H.constructor=C)}var H=new D(new C(2)),X=D[A].setInt8;H.setInt8(0,2147483648),H.setInt8(1,2147483649),!H.getInt8(0)&&H.getInt8(1)||w(D[A],{setInt8:function(t,e){X.call(this,t,e<<24>>24)},setUint8:function(t,e){X.call(this,t,e<<24>>24)}},!0)}else C=function(t){S(this,C,"ArrayBuffer");t=k(t);this._b=_.call(Array(t),0),this[V]=t},D=function(t,e,n){S(this,D,"DataView"),S(t,C,"DataView");var i=t[V],e=x(e);if(e<0||i<e)throw E("Wrong offset!");if(i<e+(n=void 0===n?i-e:P(n)))throw E("Wrong length!");this[I]=t,this[U]=e,this[V]=n},p&&(d(C,"byteLength","_l"),d(D,"buffer","_b"),d(D,"byteLength","_l"),d(D,"byteOffset","_o")),w(D[A],{getInt8:function(t){return c(this,1,t)[0]<<24>>24},getUint8:function(t){return c(this,1,t)[0]},getInt16:function(t,e){e=c(this,2,t,e);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t,e){e=c(this,2,t,e);return e[1]<<8|e[0]},getInt32:function(t,e){return r(c(this,4,t,e))},getUint32:function(t,e){return r(c(this,4,t,e))>>>0},getFloat32:function(t,e){return o(c(this,4,t,e),23,4)},getFloat64:function(t,e){return o(c(this,8,t,e),52,8)},setInt8:function(t,e){g(this,1,t,a,e)},setUint8:function(t,e){g(this,1,t,a,e)},setInt16:function(t,e,n){g(this,2,t,s,e,n)},setUint16:function(t,e,n){g(this,2,t,s,e,n)},setInt32:function(t,e,n){g(this,4,t,h,e,n)},setUint32:function(t,e,n){g(this,4,t,h,e,n)},setFloat32:function(t,e,n){g(this,4,t,l,e,n)},setFloat64:function(t,e,n){g(this,8,t,u,e,n)}});N(C,"ArrayBuffer"),N(D,"DataView"),v(D[A],y.VIEW,!0),n.ArrayBuffer=C,n.DataView=D},{101:101,115:115,116:116,118:118,123:123,29:29,35:35,40:40,42:42,6:6,60:60,72:72,77:77,9:9,93:93}],123:[function(t,e,n){for(var i,o=t(40),r=t(42),t=t(124),a=t("typed_array"),s=t("view"),t=!(!o.ArrayBuffer||!o.DataView),h=t,u=0,l="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");u<9;)(i=o[l[u++]])?(r(i.prototype,a,!0),r(i.prototype,s,!0)):h=!1;e.exports={ABV:t,CONSTR:h,TYPED:a,VIEW:s}},{124:124,40:40,42:42}],124:[function(t,e,n){var i=0,o=Math.random();e.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+o).toString(36))}},{}],125:[function(t,e,n){var i=t(51);e.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},{51:51}],126:[function(t,e,n){var i=t(40),o=t(23),r=t(60),a=t(127),s=t(72).f;e.exports=function(t){var e=o.Symbol||(o.Symbol=!r&&i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},{127:127,23:23,40:40,60:60,72:72}],127:[function(t,e,n){n.f=t(128)},{128:128}],128:[function(t,e,n){var i=t(103)("wks"),o=t(124),r=t(40).Symbol,a="function"==typeof r;(e.exports=function(t){return i[t]||(i[t]=a&&r[t]||(a?r:o)("Symbol."+t))}).store=i},{103:103,124:124,40:40}],129:[function(t,e,n){var i=t(17),o=t(128)("iterator"),r=t(58);e.exports=t(23).getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||r[i(t)]}},{128:128,17:17,23:23,58:58}],130:[function(t,e,n){var i=t(33),o=t(95)(/[\\^$*+?.()|[\]{}]/g,"\\$&");i(i.S,"RegExp",{escape:function(t){return o(t)}})},{33:33,95:95}],131:[function(t,e,n){var i=t(33);i(i.P,"Array",{copyWithin:t(8)}),t(5)("copyWithin")},{33:33,5:5,8:8}],132:[function(t,e,n){var i=t(33),o=t(12)(4);i(i.P+i.F*!t(105)([].every,!0),"Array",{every:function(t,e){return o(this,t,e)}})},{105:105,12:12,33:33}],133:[function(t,e,n){var i=t(33);i(i.P,"Array",{fill:t(9)}),t(5)("fill")},{33:33,5:5,9:9}],134:[function(t,e,n){var i=t(33),o=t(12)(2);i(i.P+i.F*!t(105)([].filter,!0),"Array",{filter:function(t,e){return o(this,t,e)}})},{105:105,12:12,33:33}],135:[function(t,e,n){var i=t(33),o=t(12)(6),r="findIndex",a=!0;r in[]&&Array(1)[r](function(){a=!1}),i(i.P+i.F*a,"Array",{findIndex:function(t,e){return o(this,t,1<arguments.length?e:void 0)}}),t(5)(r)},{12:12,33:33,5:5}],136:[function(t,e,n){var i=t(33),o=t(12)(5),r=!0;"find"in[]&&Array(1).find(function(){r=!1}),i(i.P+i.F*r,"Array",{find:function(t,e){return o(this,t,1<arguments.length?e:void 0)}}),t(5)("find")},{12:12,33:33,5:5}],137:[function(t,e,n){var i=t(33),o=t(12)(0),t=t(105)([].forEach,!0);i(i.P+i.F*!t,"Array",{forEach:function(t,e){return o(this,t,e)}})},{105:105,12:12,33:33}],138:[function(t,e,n){var c=t(25),i=t(33),g=t(119),f=t(53),p=t(48),m=t(118),y=t(24),v=t(129);i(i.S+i.F*!t(56)(function(t){Array.from(t)}),"Array",{from:function(t,e,n){var i,o,r,a,s=g(t),h="function"==typeof this?this:Array,t=arguments.length,u=1<t?e:void 0,l=void 0!==u,d=0,e=v(s);if(l&&(u=c(u,2<t?n:void 0,2)),null==e||h==Array&&p(e))for(o=new h(i=m(s.length));d<i;d++)y(o,d,l?u(s[d],d):s[d]);else for(a=e.call(s),o=new h;!(r=a.next()).done;d++)y(o,d,l?f(a,u,[r.value,d],!0):r.value);return o.length=d,o}})},{118:118,119:119,129:129,24:24,25:25,33:33,48:48,53:53,56:56}],139:[function(t,e,n){var i=t(33),o=t(11)(!1),r=[].indexOf,a=!!r&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(a||!t(105)(r)),"Array",{indexOf:function(t,e){return a?r.apply(this,arguments)||0:o(this,t,e)}})},{105:105,11:11,33:33}],140:[function(t,e,n){var i=t(33);i(i.S,"Array",{isArray:t(49)})},{33:33,49:49}],141:[function(t,e,n){var i=t(5),o=t(57),r=t(58),a=t(117);e.exports=t(55)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")},{117:117,5:5,55:55,57:57,58:58}],142:[function(t,e,n){var i=t(33),o=t(117),r=[].join;i(i.P+i.F*(t(47)!=Object||!t(105)(r)),"Array",{join:function(t){return r.call(o(this),void 0===t?",":t)}})},{105:105,117:117,33:33,47:47}],143:[function(t,e,n){var i=t(33),r=t(117),a=t(116),s=t(118),h=[].lastIndexOf,u=!!h&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(u||!t(105)(h)),"Array",{lastIndexOf:function(t,e){if(u)return h.apply(this,arguments)||0;var n=r(this),i=s(n.length),o=i-1;for(1<arguments.length&&(o=Math.min(o,a(e))),o<0&&(o=i+o);0<=o;o--)if(o in n&&n[o]===t)return o||0;return-1}})},{105:105,116:116,117:117,118:118,33:33}],144:[function(t,e,n){var i=t(33),o=t(12)(1);i(i.P+i.F*!t(105)([].map,!0),"Array",{map:function(t,e){return o(this,t,e)}})},{105:105,12:12,33:33}],145:[function(t,e,n){var i=t(33),o=t(24);i(i.S+i.F*t(35)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);t<e;)o(n,t,arguments[t++]);return n.length=e,n}})},{24:24,33:33,35:35}],146:[function(t,e,n){var i=t(33),o=t(13);i(i.P+i.F*!t(105)([].reduceRight,!0),"Array",{reduceRight:function(t,e){return o(this,t,arguments.length,e,!0)}})},{105:105,13:13,33:33}],147:[function(t,e,n){var i=t(33),o=t(13);i(i.P+i.F*!t(105)([].reduce,!0),"Array",{reduce:function(t,e){return o(this,t,arguments.length,e,!1)}})},{105:105,13:13,33:33}],148:[function(t,e,n){var i=t(33),o=t(43),h=t(18),u=t(114),l=t(118),d=[].slice;i(i.P+i.F*t(35)(function(){o&&d.call(o)}),"Array",{slice:function(t,e){var n=l(this.length),i=h(this);if(e=void 0===e?n:e,"Array"==i)return d.call(this,t,e);for(var o=u(t,n),n=u(e,n),r=l(n-o),a=Array(r),s=0;s<r;s++)a[s]="String"==i?this.charAt(o+s):this[o+s];return a}})},{114:114,118:118,18:18,33:33,35:35,43:43}],149:[function(t,e,n){var i=t(33),o=t(12)(3);i(i.P+i.F*!t(105)([].some,!0),"Array",{some:function(t,e){return o(this,t,e)}})},{105:105,12:12,33:33}],150:[function(t,e,n){var i=t(33),o=t(3),r=t(119),a=t(35),s=[].sort,h=[1,2,3];i(i.P+i.F*(a(function(){h.sort(void 0)})||!a(function(){h.sort(null)})||!t(105)(s)),"Array",{sort:function(t){return void 0===t?s.call(r(this)):s.call(r(this),o(t))}})},{105:105,119:119,3:3,33:33,35:35}],151:[function(t,e,n){t(100)("Array")},{100:100}],152:[function(t,e,n){t=t(33);t(t.S,"Date",{now:function(){return(new Date).getTime()}})},{33:33}],153:[function(t,e,n){var i=t(33),t=t(26);i(i.P+i.F*(Date.prototype.toISOString!==t),"Date",{toISOString:t})},{26:26,33:33}],154:[function(t,e,n){var i=t(33),o=t(119),r=t(120);i(i.P+i.F*t(35)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(){var t=o(this),e=r(t);return"number"!=typeof e||isFinite(e)?t.toISOString():null}})},{119:119,120:120,33:33,35:35}],155:[function(t,e,n){var i=t(128)("toPrimitive"),o=Date.prototype;i in o||t(42)(o,i,t(27))},{128:128,27:27,42:42}],156:[function(t,e,n){var i=Date.prototype,o=i.toString,r=i.getTime;new Date(NaN)+""!="Invalid Date"&&t(94)(i,"toString",function(){var t=r.call(this);return t==t?o.call(this):"Invalid Date"})},{94:94}],157:[function(t,e,n){var i=t(33);i(i.P,"Function",{bind:t(16)})},{16:16,33:33}],158:[function(t,e,n){var i=t(51),o=t(79),r=t(128)("hasInstance"),a=Function.prototype;r in a||t(72).f(a,r,{value:function(t){if("function"!=typeof this||!i(t))return!1;if(!i(this.prototype))return t instanceof this;for(;t=o(t);)if(this.prototype===t)return!0;return!1}})},{128:128,51:51,72:72,79:79}],159:[function(t,e,n){var i=t(72).f,o=Function.prototype,r=/^\s*function ([^ (]*)/;"name"in o||t(29)&&i(o,"name",{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},{29:29,72:72}],160:[function(t,e,n){var i=t(19),o=t(125);e.exports=t(22)("Map",function(e){return function(t){return e(this,0<arguments.length?t:void 0)}},{get:function(t){t=i.getEntry(o(this,"Map"),t);return t&&t.v},set:function(t,e){return i.def(o(this,"Map"),0===t?0:t,e)}},i,!0)},{125:125,19:19,22:22}],161:[function(t,e,n){var i=t(33),o=t(63),r=Math.sqrt,t=Math.acosh;i(i.S+i.F*!(t&&710==Math.floor(t(Number.MAX_VALUE))&&t(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:94906265.62425156<t?Math.log(t)+Math.LN2:o(t-1+r(t-1)*r(t+1))}})},{33:33,63:63}],162:[function(t,e,n){var i=t(33),t=Math.asinh;i(i.S+i.F*!(t&&0<1/t(0)),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},{33:33}],163:[function(t,e,n){var i=t(33),t=Math.atanh;i(i.S+i.F*!(t&&1/t(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},{33:33}],164:[function(t,e,n){var i=t(33),o=t(65);i(i.S,"Math",{cbrt:function(t){return o(t=+t)*Math.pow(Math.abs(t),1/3)}})},{33:33,65:65}],165:[function(t,e,n){t=t(33);t(t.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},{33:33}],166:[function(t,e,n){var t=t(33),i=Math.exp;t(t.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},{33:33}],167:[function(t,e,n){var i=t(33),t=t(61);i(i.S+i.F*(t!=Math.expm1),"Math",{expm1:t})},{33:33,61:61}],168:[function(t,e,n){var i=t(33);i(i.S,"Math",{fround:t(62)})},{33:33,62:62}],169:[function(t,e,n){var t=t(33),a=Math.abs;t(t.S,"Math",{hypot:function(){for(var t,e,n=0,i=0,o=arguments.length,r=0;i<o;)r<(t=a(arguments[i++]))?(n=n*(e=r/t)*e+1,r=t):0<t?n+=(e=t/r)*e:n+=t;return r===1/0?1/0:r*Math.sqrt(n)}})},{33:33}],170:[function(t,e,n){var i=t(33),o=Math.imul;i(i.S+i.F*t(35)(function(){return-5!=o(4294967295,5)||2!=o.length}),"Math",{imul:function(t,e){var n=+t,i=+e,t=65535&n,e=65535&i;return 0|t*e+((65535&n>>>16)*e+t*(65535&i>>>16)<<16>>>0)}})},{33:33,35:35}],171:[function(t,e,n){t=t(33);t(t.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},{33:33}],172:[function(t,e,n){var i=t(33);i(i.S,"Math",{log1p:t(63)})},{33:33,63:63}],173:[function(t,e,n){t=t(33);t(t.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},{33:33}],174:[function(t,e,n){var i=t(33);i(i.S,"Math",{sign:t(65)})},{33:33,65:65}],175:[function(t,e,n){var i=t(33),o=t(61),r=Math.exp;i(i.S+i.F*t(35)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(o(t)-o(-t))/2:(r(t-1)-r(-t-1))*(Math.E/2)}})},{33:33,35:35,61:61}],176:[function(t,e,n){var i=t(33),o=t(61),r=Math.exp;i(i.S,"Math",{tanh:function(t){var e=o(t=+t),n=o(-t);return e==1/0?1:n==1/0?-1:(e-n)/(r(t)+r(-t))}})},{33:33,61:61}],177:[function(t,e,n){t=t(33);t(t.S,"Math",{trunc:function(t){return(0<t?Math.floor:Math.ceil)(t)}})},{33:33}],178:[function(t,e,n){function i(t){var e=u(t,!1);if("string"==typeof e&&2<e.length){var n,i,o=(e=v?e.trim():g(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(t=e.charCodeAt(2))||120===t)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+e}for(var r,a=e.slice(2),s=0,h=a.length;s<h;s++)if((r=a.charCodeAt(s))<48||i<r)return NaN;return parseInt(a,n)}}return+e}var o=t(40),r=t(41),a=t(18),s=t(45),u=t(120),h=t(35),l=t(77).f,d=t(75).f,c=t(72).f,g=t(111).trim,f=o.Number,p=f,m=f.prototype,y="Number"==a(t(71)(m)),v="trim"in String.prototype;if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var t=arguments.length<1?0:t,e=this;return e instanceof f&&(y?h(function(){m.valueOf.call(e)}):"Number"!=a(e))?s(new p(i(t)),e,f):i(t)};for(var w,b=t(29)?l(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;b.length>S;S++)r(p,w=b[S])&&!r(f,w)&&c(f,w,d(p,w));(f.prototype=m).constructor=f,t(94)(o,"Number",f)}},{111:111,120:120,18:18,29:29,35:35,40:40,41:41,45:45,71:71,72:72,75:75,77:77,94:94}],179:[function(t,e,n){t=t(33);t(t.S,"Number",{EPSILON:Math.pow(2,-52)})},{33:33}],180:[function(t,e,n){var i=t(33),o=t(40).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&o(t)}})},{33:33,40:40}],181:[function(t,e,n){var i=t(33);i(i.S,"Number",{isInteger:t(50)})},{33:33,50:50}],182:[function(t,e,n){t=t(33);t(t.S,"Number",{isNaN:function(t){return t!=t}})},{33:33}],183:[function(t,e,n){var i=t(33),o=t(50),r=Math.abs;i(i.S,"Number",{isSafeInteger:function(t){return o(t)&&r(t)<=9007199254740991}})},{33:33,50:50}],184:[function(t,e,n){t=t(33);t(t.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{33:33}],185:[function(t,e,n){t=t(33);t(t.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{33:33}],186:[function(t,e,n){var i=t(33),t=t(86);i(i.S+i.F*(Number.parseFloat!=t),"Number",{parseFloat:t})},{33:33,86:86}],187:[function(t,e,n){var i=t(33),t=t(87);i(i.S+i.F*(Number.parseInt!=t),"Number",{parseInt:t})},{33:33,87:87}],188:[function(t,e,n){function a(t,e){for(var n=-1,i=e;++n<6;)i+=t*g[n],g[n]=i%1e7,i=r(i/1e7)}function s(t){for(var e=6,n=0;0<=--e;)n+=g[e],g[e]=r(n/t),n=n%t*1e7}function h(){for(var t,e=6,n="";0<=--e;)""===n&&0!==e&&0===g[e]||(t=String(g[e]),n=""===n?t:n+c.call("0",7-t.length)+t);return n}function u(t,e,n){return 0===e?n:e%2==1?u(t,e-1,n*t):u(t*t,e/2,n)}var i=t(33),l=t(116),d=t(4),c=t(110),o=1..toFixed,r=Math.floor,g=[0,0,0,0,0,0],f="Number.toFixed: incorrect invocation!";i(i.P+i.F*(!!o&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0))||!t(35)(function(){o.call({})})),"Number",{toFixed:function(t){var e,n,i=d(this,f),o=l(t),r="",t="0";if(o<0||20<o)throw RangeError(f);if(i!=i)return"NaN";if(i<=-1e21||1e21<=i)return String(i);if(i<0&&(r="-",i=-i),1e-21<i)if(i=(n=function(t){for(var e=0,n=t;4096<=n;)e+=12,n/=4096;for(;2<=n;)e+=1,n/=2;return e}(i*u(2,69,1))-69)<0?i*u(2,-n,1):i/u(2,n,1),i*=4503599627370496,0<(n=52-n)){for(a(0,i),e=o;7<=e;)a(1e7,0),e-=7;for(a(u(10,e,1),0),e=n-1;23<=e;)s(1<<23),e-=23;s(1<<e),a(1,1),s(2),t=h()}else a(0,i),a(1<<-n,0),t=h()+c.call("0",o);return t=0<o?r+((n=t.length)<=o?"0."+c.call("0",o-n)+t:t.slice(0,n-o)+"."+t.slice(n-o)):r+t}})},{110:110,116:116,33:33,35:35,4:4}],189:[function(t,e,n){var i=t(33),o=t(35),r=t(4),a=1..toPrecision;i(i.P+i.F*(o(function(){return"1"!==a.call(1,void 0)})||!o(function(){a.call({})})),"Number",{toPrecision:function(t){var e=r(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},{33:33,35:35,4:4}],190:[function(t,e,n){var i=t(33);i(i.S+i.F,"Object",{assign:t(70)})},{33:33,70:70}],191:[function(t,e,n){var i=t(33);i(i.S,"Object",{create:t(71)})},{33:33,71:71}],192:[function(t,e,n){var i=t(33);i(i.S+i.F*!t(29),"Object",{defineProperties:t(73)})},{29:29,33:33,73:73}],193:[function(t,e,n){var i=t(33);i(i.S+i.F*!t(29),"Object",{defineProperty:t(72).f})},{29:29,33:33,72:72}],194:[function(t,e,n){var i=t(51),o=t(66).onFreeze;t(83)("freeze",function(e){return function(t){return e&&i(t)?e(o(t)):t}})},{51:51,66:66,83:83}],195:[function(t,e,n){var i=t(117),o=t(75).f;t(83)("getOwnPropertyDescriptor",function(){return function(t,e){return o(i(t),e)}})},{117:117,75:75,83:83}],196:[function(t,e,n){t(83)("getOwnPropertyNames",function(){return t(76).f})},{76:76,83:83}],197:[function(t,e,n){var i=t(119),o=t(79);t(83)("getPrototypeOf",function(){return function(t){return o(i(t))}})},{119:119,79:79,83:83}],198:[function(t,e,n){var i=t(51);t(83)("isExtensible",function(e){return function(t){return!!i(t)&&(!e||e(t))}})},{51:51,83:83}],199:[function(t,e,n){var i=t(51);t(83)("isFrozen",function(e){return function(t){return!i(t)||!!e&&e(t)}})},{51:51,83:83}],200:[function(t,e,n){var i=t(51);t(83)("isSealed",function(e){return function(t){return!i(t)||!!e&&e(t)}})},{51:51,83:83}],201:[function(t,e,n){var i=t(33);i(i.S,"Object",{is:t(96)})},{33:33,96:96}],202:[function(t,e,n){var i=t(119),o=t(81);t(83)("keys",function(){return function(t){return o(i(t))}})},{119:119,81:81,83:83}],203:[function(t,e,n){var i=t(51),o=t(66).onFreeze;t(83)("preventExtensions",function(e){return function(t){return e&&i(t)?e(o(t)):t}})},{51:51,66:66,83:83}],204:[function(t,e,n){var i=t(51),o=t(66).onFreeze;t(83)("seal",function(e){return function(t){return e&&i(t)?e(o(t)):t}})},{51:51,66:66,83:83}],205:[function(t,e,n){var i=t(33);i(i.S,"Object",{setPrototypeOf:t(99).set})},{33:33,99:99}],206:[function(t,e,n){var i=t(17),o={};o[t(128)("toStringTag")]="z",o+""!="[object z]"&&t(94)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},{128:128,17:17,94:94}],207:[function(t,e,n){var i=t(33),t=t(86);i(i.G+i.F*(parseFloat!=t),{parseFloat:t})},{33:33,86:86}],208:[function(t,e,n){var i=t(33),t=t(87);i(i.G+i.F*(parseInt!=t),{parseInt:t})},{33:33,87:87}],209:[function(n,t,e){function i(){}function l(t){var e;return!(!y(t)||"function"!=typeof(e=t.then))&&e}function o(u,e){var n;u._n||(u._n=!0,n=u._c,P(function(){for(var s=u._v,h=1==u._s,t=0;n.length>t;)!function(t){var e,n,i=h?t.ok:t.fail,o=t.resolve,r=t.reject,a=t.domain;try{i?(h||(2==u._h&&O(u),u._h=1),!0===i?e=s:(a&&a.enter(),e=i(s),a&&a.exit()),e===t.promise?r(_("Promise-chain cycle")):(n=l(e))?n.call(e,o,r):o(e)):r(s)}catch(t){r(t)}}(n[t++]);u._c=[],u._n=!1,e&&!u._h&&E(u)}))}function r(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),o(e,!0))}function a(t){var n,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw _("Promise can't be resolved itself");(n=l(t))?P(function(){var e={_w:i,_d:!1};try{n.call(t,f(a,e,1),f(r,e,1))}catch(t){r.call(e,t)}}):(i._v=t,i._s=1,o(i,!1))}catch(t){r.call({_w:i,_d:!1},t)}}}var s,h,u,d,c=n(60),g=n(40),f=n(25),p=n(17),m=n(33),y=n(51),v=n(3),w=n(6),b=n(39),S=n(104),x=n(113).set,P=n(68)(),k=n(69),L=n(90),M=n(91),_=g.TypeError,N=g.process,A=g.Promise,T="process"==p(N),C=h=k.f,p=!!function(){try{var t=A.resolve(1),e=(t.constructor={})[n(128)("species")]=function(t){t(i,i)};return(T||"function"==typeof PromiseRejectionEvent)&&t.then(i)instanceof e}catch(t){}}(),D=c?function(t,e){return t===e||t===A&&e===d}:function(t,e){return t===e},E=function(o){x.call(g,function(){var t,e,n=o._v,i=F(o);if(i&&(t=L(function(){T?N.emit("unhandledRejection",n,o):(e=g.onunhandledrejection)?e({promise:o,reason:n}):(e=g.console)&&e.error&&e.error("Unhandled promise rejection",n)}),o._h=T||F(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},F=function t(e){if(1==e._h)return!1;for(var n,i=e._a||e._c,o=0;i.length>o;)if((n=i[o++]).fail||!t(n.promise))return!1;return!0},O=function(e){x.call(g,function(){var t;T?N.emit("rejectionHandled",e):(t=g.onrejectionhandled)&&t({promise:e,reason:e._v})})};p||(A=function(t){w(this,A,"Promise","_h"),v(t),s.call(this);try{t(f(a,this,1),f(r,this,1))}catch(t){r.call(this,t)}},(s=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(93)(A.prototype,{then:function(t,e){var n=C(S(this,A));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=T?N.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&o(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),u=function(){var t=new s;this.promise=t,this.resolve=f(a,t,1),this.reject=f(r,t,1)},k.f=C=function(t){return D(A,t)?new u:h(t)}),m(m.G+m.W+m.F*!p,{Promise:A}),n(101)(A,"Promise"),n(100)("Promise"),d=n(23).Promise,m(m.S+m.F*!p,"Promise",{reject:function(t){var e=C(this);return(0,e.reject)(t),e.promise}}),m(m.S+m.F*(c||!p),"Promise",{resolve:function(t){return t instanceof A&&D(t.constructor,this)?t:M(this,t)}}),m(m.S+m.F*!(p&&n(56)(function(t){A.all(t).catch(i)})),"Promise",{all:function(t){var a=this,e=C(a),s=e.resolve,h=e.reject,n=L(function(){var i=[],o=0,r=1;b(t,!1,function(t){var e=o++,n=!1;i.push(void 0),r++,a.resolve(t).then(function(t){n||(n=!0,i[e]=t,--r||s(i))},h)}),--r||s(i)});return n.e&&h(n.v),e.promise},race:function(t){var e=this,n=C(e),i=n.reject,o=L(function(){b(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return o.e&&i(o.v),n.promise}})},{100:100,101:101,104:104,113:113,128:128,17:17,23:23,25:25,3:3,33:33,39:39,40:40,51:51,56:56,6:6,60:60,68:68,69:69,90:90,91:91,93:93}],210:[function(t,e,n){var i=t(33),o=t(3),r=t(7),a=(t(40).Reflect||{}).apply,s=Function.apply;i(i.S+i.F*!t(35)(function(){a(function(){})}),"Reflect",{apply:function(t,e,n){t=o(t),n=r(n);return a?a(t,e,n):s.call(t,e,n)}})},{3:3,33:33,35:35,40:40,7:7}],211:[function(t,e,n){var i=t(33),o=t(71),r=t(3),a=t(7),s=t(51),h=t(35),u=t(16),l=(t(40).Reflect||{}).construct,d=h(function(){function t(){}return!(l(function(){},[],t)instanceof t)}),c=!h(function(){l(function(){})});i(i.S+i.F*(d||c),"Reflect",{construct:function(t,e,n){r(t),a(e);n=arguments.length<3?t:r(n);if(c&&!d)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(u.apply(t,i))}i=n.prototype,n=o(s(i)?i:Object.prototype),i=Function.apply.call(t,n,e);return s(i)?i:n}})},{16:16,3:3,33:33,35:35,40:40,51:51,7:7,71:71}],212:[function(t,e,n){var i=t(72),o=t(33),r=t(7),a=t(120);o(o.S+o.F*t(35)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){r(t),e=a(e,!0),r(n);try{return i.f(t,e,n),!0}catch(t){return!1}}})},{120:120,33:33,35:35,7:7,72:72}],213:[function(t,e,n){var i=t(33),o=t(75).f,r=t(7);i(i.S,"Reflect",{deleteProperty:function(t,e){var n=o(r(t),e);return!(n&&!n.configurable)&&delete t[e]}})},{33:33,7:7,75:75}],214:[function(t,e,n){function i(t){this._t=r(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)}var o=t(33),r=t(7);t(54)(i,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),o(o.S,"Reflect",{enumerate:function(t){return new i(t)}})},{33:33,54:54,7:7}],215:[function(t,e,n){var i=t(75),o=t(33),r=t(7);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return i.f(r(t),e)}})},{33:33,7:7,75:75}],216:[function(t,e,n){var i=t(33),o=t(79),r=t(7);i(i.S,"Reflect",{getPrototypeOf:function(t){return o(r(t))}})},{33:33,7:7,79:79}],217:[function(t,e,n){var r=t(75),a=t(79),s=t(41),i=t(33),h=t(51),u=t(7);i(i.S,"Reflect",{get:function t(e,n){var i,o=arguments.length<3?e:arguments[2];return u(e)===o?e[n]:(i=r.f(e,n))?s(i,"value")?i.value:void 0!==i.get?i.get.call(o):void 0:h(e=a(e))?t(e,n,o):void 0}})},{33:33,41:41,51:51,7:7,75:75,79:79}],218:[function(t,e,n){t=t(33);t(t.S,"Reflect",{has:function(t,e){return e in t}})},{33:33}],219:[function(t,e,n){var i=t(33),o=t(7),r=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(t){return o(t),!r||r(t)}})},{33:33,7:7}],220:[function(t,e,n){var i=t(33);i(i.S,"Reflect",{ownKeys:t(85)})},{33:33,85:85}],221:[function(t,e,n){var i=t(33),o=t(7),r=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(t){o(t);try{return r&&r(t),!0}catch(t){return!1}}})},{33:33,7:7}],222:[function(t,e,n){var i=t(33),o=t(99);o&&i(i.S,"Reflect",{setPrototypeOf:function(t,e){o.check(t,e);try{return o.set(t,e),!0}catch(t){return!1}}})},{33:33,99:99}],223:[function(t,e,n){var s=t(72),h=t(75),u=t(79),l=t(41),i=t(33),d=t(92),c=t(7),g=t(51);i(i.S,"Reflect",{set:function t(e,n,i){var o,r=arguments.length<4?e:arguments[3],a=h.f(c(e),n);if(!a){if(g(o=u(e)))return t(o,n,i,r);a=d(0)}return l(a,"value")?!(!1===a.writable||!g(r)||((o=h.f(r,n)||d(0)).value=i,s.f(r,n,o),0)):void 0!==a.set&&(a.set.call(r,i),!0)}})},{33:33,41:41,51:51,7:7,72:72,75:75,79:79,92:92}],224:[function(t,e,n){var i=t(40),r=t(45),o=t(72).f,a=t(77).f,s=t(52),h=t(37),u=i.RegExp,l=u,d=u.prototype,c=/a/g,g=/a/g,f=new u(c)!==c;if(t(29)&&(!f||t(35)(function(){return g[t(128)("match")]=!1,u(c)!=c||u(g)==g||"/a/i"!=u(c,"i")}))){u=function(t,e){var n=this instanceof u,i=s(t),o=void 0===e;return!n&&i&&t.constructor===u&&o?t:r(f?new l(i&&!o?t.source:t,e):l((i=t instanceof u)?t.source:t,i&&o?h.call(t):e),n?this:d,u)};for(var p=a(l),m=0;p.length>m;)!function(e){e in u||o(u,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})}(p[m++]);(d.constructor=u).prototype=d,t(94)(i,"RegExp",u)}t(100)("RegExp")},{100:100,128:128,29:29,35:35,37:37,40:40,45:45,52:52,72:72,77:77,94:94}],225:[function(t,e,n){t(29)&&"g"!=/./g.flags&&t(72).f(RegExp.prototype,"flags",{configurable:!0,get:t(37)})},{29:29,37:37,72:72}],226:[function(t,e,n){t(36)("match",1,function(i,o,t){return[function(t){var e=i(this),n=null==t?void 0:t[o];return void 0!==n?n.call(t,e):new RegExp(t)[o](String(e))},t]})},{36:36}],227:[function(t,e,n){t(36)("replace",2,function(o,r,a){return[function(t,e){var n=o(this),i=null==t?void 0:t[r];return void 0!==i?i.call(t,n,e):a.call(String(n),t,e)},a]})},{36:36}],228:[function(t,e,n){t(36)("search",1,function(i,o,t){return[function(t){var e=i(this),n=null==t?void 0:t[o];return void 0!==n?n.call(t,e):new RegExp(t)[o](String(e))},t]})},{36:36}],229:[function(t,e,n){t(36)("split",2,function(o,r,a){var g,f=t(52),p=a,m=[].push,y="length";return"c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[y]||2!="ab".split(/(?:ab)*/)[y]||4!=".".split(/(.?)(.?)/)[y]||1<".".split(/()()/)[y]||"".split(/.?/)[y]?(g=void 0===/()??/.exec("")[1],a=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!f(t))return p.call(n,t,e);var i,o,r,a,s,h=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,d=void 0===e?4294967295:e>>>0,c=new RegExp(t.source,u+"g");for(g||(i=new RegExp("^"+c.source+"$(?!\\s)",u));(o=c.exec(n))&&!((r=o.index+o[0][y])>l&&(h.push(n.slice(l,o.index)),!g&&1<o[y]&&o[0].replace(i,function(){for(s=1;s<arguments[y]-2;s++)void 0===arguments[s]&&(o[s]=void 0)}),1<o[y]&&o.index<n[y]&&m.apply(h,o.slice(1)),a=o[0][y],l=r,h[y]>=d));)c.lastIndex===o.index&&c.lastIndex++;return l===n[y]?!a&&c.test("")||h.push(""):h.push(n.slice(l)),h[y]>d?h.slice(0,d):h}):"0".split(void 0,0)[y]&&(a=function(t,e){return void 0===t&&0===e?[]:p.call(this,t,e)}),[function(t,e){var n=o(this),i=null==t?void 0:t[r];return void 0!==i?i.call(t,n,e):a.call(String(n),t,e)},a]})},{36:36,52:52}],230:[function(e,t,n){e(225);function i(t){e(94)(RegExp.prototype,"toString",t,!0)}var o=e(7),r=e(37),a=e(29),s=/./.toString;e(35)(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?i(function(){var t=o(this);return"/".concat(t.source,"/","flags"in t?t.flags:!a&&t instanceof RegExp?r.call(t):void 0)}):"toString"!=s.name&&i(function(){return s.call(this)})},{225:225,29:29,35:35,37:37,7:7,94:94}],231:[function(t,e,n){var i=t(19),o=t(125);e.exports=t(22)("Set",function(e){return function(t){return e(this,0<arguments.length?t:void 0)}},{add:function(t){return i.def(o(this,"Set"),t=0===t?0:t,t)}},i)},{125:125,19:19,22:22}],232:[function(t,e,n){t(108)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},{108:108}],233:[function(t,e,n){t(108)("big",function(t){return function(){return t(this,"big","","")}})},{108:108}],234:[function(t,e,n){t(108)("blink",function(t){return function(){return t(this,"blink","","")}})},{108:108}],235:[function(t,e,n){t(108)("bold",function(t){return function(){return t(this,"b","","")}})},{108:108}],236:[function(t,e,n){var i=t(33),o=t(106)(!1);i(i.P,"String",{codePointAt:function(t){return o(this,t)}})},{106:106,33:33}],237:[function(t,e,n){var i=t(33),o=t(118),r=t(107),a="".endsWith;i(i.P+i.F*t(34)("endsWith"),"String",{endsWith:function(t,e){var n=r(this,t,"endsWith"),i=1<arguments.length?e:void 0,e=o(n.length),e=void 0===i?e:Math.min(o(i),e),t=String(t);return a?a.call(n,t,e):n.slice(e-t.length,e)===t}})},{107:107,118:118,33:33,34:34}],238:[function(t,e,n){t(108)("fixed",function(t){return function(){return t(this,"tt","","")}})},{108:108}],239:[function(t,e,n){t(108)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},{108:108}],240:[function(t,e,n){t(108)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},{108:108}],241:[function(t,e,n){var i=t(33),o=t(114),r=String.fromCharCode,t=String.fromCodePoint;i(i.S+i.F*(!!t&&1!=t.length),"String",{fromCodePoint:function(){for(var t,e=[],n=arguments.length,i=0;i<n;){if(t=+arguments[i++],o(t,1114111)!==t)throw RangeError(t+" is not a valid code point");e.push(t<65536?r(t):r(55296+((t-=65536)>>10),t%1024+56320))}return e.join("")}})},{114:114,33:33}],242:[function(t,e,n){var i=t(33),o=t(107);i(i.P+i.F*t(34)("includes"),"String",{includes:function(t,e){return!!~o(this,t,"includes").indexOf(t,1<arguments.length?e:void 0)}})},{107:107,33:33,34:34}],243:[function(t,e,n){t(108)("italics",function(t){return function(){return t(this,"i","","")}})},{108:108}],244:[function(t,e,n){var i=t(106)(!0);t(55)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t=this._t,e=this._i;return e>=t.length?{value:void 0,done:!0}:(e=i(t,e),this._i+=e.length,{value:e,done:!1})})},{106:106,55:55}],245:[function(t,e,n){t(108)("link",function(e){return function(t){return e(this,"a","href",t)}})},{108:108}],246:[function(t,e,n){var i=t(33),a=t(117),s=t(118);i(i.S,"String",{raw:function(t){for(var e=a(t.raw),n=s(e.length),i=arguments.length,o=[],r=0;r<n;)o.push(String(e[r++])),r<i&&o.push(String(arguments[r]));return o.join("")}})},{117:117,118:118,33:33}],247:[function(t,e,n){var i=t(33);i(i.P,"String",{repeat:t(110)})},{110:110,33:33}],248:[function(t,e,n){t(108)("small",function(t){return function(){return t(this,"small","","")}})},{108:108}],249:[function(t,e,n){var i=t(33),o=t(118),r=t(107),a="".startsWith;i(i.P+i.F*t(34)("startsWith"),"String",{startsWith:function(t,e){var n=r(this,t,"startsWith"),e=o(Math.min(1<arguments.length?e:void 0,n.length)),t=String(t);return a?a.call(n,t,e):n.slice(e,e+t.length)===t}})},{107:107,118:118,33:33,34:34}],250:[function(t,e,n){t(108)("strike",function(t){return function(){return t(this,"strike","","")}})},{108:108}],251:[function(t,e,n){t(108)("sub",function(t){return function(){return t(this,"sub","","")}})},{108:108}],252:[function(t,e,n){t(108)("sup",function(t){return function(){return t(this,"sup","","")}})},{108:108}],253:[function(t,e,n){t(111)("trim",function(t){return function(){return t(this,3)}})},{111:111}],254:[function(t,e,n){function i(t){var e=V[t]=_(O.prototype);return e._k=t,e}function o(t,e){P(t);for(var n,i=S(e=k(e)),o=0,r=i.length;o<r;)$(t,n=i[o++],e[n]);return t}function r(t){var e=R.call(this,t=L(t,!0));return!(this===q&&h(V,t)&&!h(U,t))&&(!(e||!h(this,t)||!h(V,t)||h(this,j)&&this[j][t])||e)}function a(t,e){if(t=k(t),e=L(e,!0),t!==q||!h(V,e)||h(U,e)){var n=D(t,e);return!n||!h(V,e)||h(t,j)&&t[j][e]||(n.enumerable=!0),n}}var s=t(40),h=t(41),u=t(29),l=t(33),d=t(94),c=t(66).KEY,g=t(35),f=t(103),p=t(101),m=t(124),y=t(128),v=t(127),w=t(126),b=t(59),S=t(32),x=t(49),P=t(7),k=t(117),L=t(120),M=t(92),_=t(71),N=t(76),A=t(75),T=t(72),C=t(81),D=A.f,E=T.f,F=N.f,O=s.Symbol,B=s.JSON,G=B&&B.stringify,j=y("_hidden"),z=y("toPrimitive"),R={}.propertyIsEnumerable,I=f("symbol-registry"),V=f("symbols"),U=f("op-symbols"),q=Object.prototype,H="function"==typeof O,Y=s.QObject,K=!Y||!Y.prototype||!Y.prototype.findChild,X=u&&g(function(){return 7!=_(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=D(q,e);i&&delete q[e],E(t,e,n),i&&t!==q&&E(q,e,i)}:E,W=H&&"symbol"==_typeof(O.iterator)?function(t){return"symbol"==_typeof(t)}:function(t){return t instanceof O},$=function(t,e,n){return t===q&&$(U,e,n),P(t),e=L(e,!0),P(n),h(V,e)?(n.enumerable?(h(t,j)&&t[j][e]&&(t[j][e]=!1),n=_(n,{enumerable:M(0,!1)})):(h(t,j)||E(t,j,M(1,{})),t[j][e]=!0),X(t,e,n)):E(t,e,n)},f=function(t){for(var e,n=F(k(t)),i=[],o=0;n.length>o;)h(V,e=n[o++])||e==j||e==c||i.push(e);return i},Y=function(t){for(var e,n=t===q,i=F(n?U:k(t)),o=[],r=0;i.length>r;)!h(V,e=i[r++])||n&&!h(q,e)||o.push(V[e]);return o};H||(d((O=function(t){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var n=m(0<arguments.length?t:void 0),t=function t(e){this===q&&t.call(U,e),h(this,j)&&h(this[j],n)&&(this[j][n]=!1),X(this,n,M(1,e))};return u&&K&&X(q,n,{configurable:!0,set:t}),i(n)}).prototype,"toString",function(){return this._k}),A.f=a,T.f=$,t(77).f=N.f=f,t(82).f=r,t(78).f=Y,u&&!t(60)&&d(q,"propertyIsEnumerable",r,!0),v.f=function(t){return i(y(t))}),l(l.G+l.W+l.F*!H,{Symbol:O});for(var J="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Z=0;J.length>Z;)y(J[Z++]);for(var Q=C(y.store),tt=0;Q.length>tt;)w(Q[tt++]);l(l.S+l.F*!H,"Symbol",{for:function(t){return h(I,t+="")?I[t]:I[t]=O(t)},keyFor:function(t){if(W(t))return b(I,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){K=!0},useSimple:function(){K=!1}}),l(l.S+l.F*!H,"Object",{create:function(t,e){return void 0===e?_(t):o(_(t),e)},defineProperty:$,defineProperties:o,getOwnPropertyDescriptor:a,getOwnPropertyNames:f,getOwnPropertySymbols:Y}),B&&l(l.S+l.F*(!H||g(function(){var t=O();return"[null]"!=G([t])||"{}"!=G({a:t})||"{}"!=G(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!W(t)){for(var n,e=[t],i=1;i<arguments.length;)e.push(arguments[i++]);return"function"==typeof(t=e[1])&&(n=t),!n&&x(t)||(t=function(t,e){if(n&&(e=n.call(this,t,e)),!W(e))return e}),e[1]=t,G.apply(B,e)}}}),O.prototype[z]||t(42)(O.prototype,z,O.prototype.valueOf),p(O,"Symbol"),p(Math,"Math",!0),p(s.JSON,"JSON",!0)},{101:101,103:103,117:117,120:120,124:124,126:126,127:127,128:128,29:29,32:32,33:33,35:35,40:40,41:41,42:42,49:49,59:59,60:60,66:66,7:7,71:71,72:72,75:75,76:76,77:77,78:78,81:81,82:82,92:92,94:94}],255:[function(t,e,n){var i=t(33),o=t(123),r=t(122),h=t(7),u=t(114),l=t(118),a=t(51),s=t(40).ArrayBuffer,d=t(104),c=r.ArrayBuffer,g=r.DataView,f=o.ABV&&s.isView,p=c.prototype.slice,m=o.VIEW;i(i.G+i.W+i.F*(s!==c),{ArrayBuffer:c}),i(i.S+i.F*!o.CONSTR,"ArrayBuffer",{isView:function(t){return f&&f(t)||a(t)&&m in t}}),i(i.P+i.U+i.F*t(35)(function(){return!new c(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==p&&void 0===e)return p.call(h(this),t);for(var n=h(this).byteLength,i=u(t,n),o=u(void 0===e?n:e,n),n=new(d(this,c))(l(o-i)),r=new g(this),a=new g(n),s=0;i<o;)a.setUint8(s++,r.getUint8(i++));return n}}),t(100)("ArrayBuffer")},{100:100,104:104,114:114,118:118,122:122,123:123,33:33,35:35,40:40,51:51,7:7}],256:[function(t,e,n){var i=t(33);i(i.G+i.W+i.F*!t(123).ABV,{DataView:t(122).DataView})},{122:122,123:123,33:33}],257:[function(t,e,n){t(121)("Float32",4,function(i){return function(t,e,n){return i(this,t,e,n)}})},{121:121}],258:[function(t,e,n){t(121)("Float64",8,function(i){return function(t,e,n){return i(this,t,e,n)}})},{121:121}],259:[function(t,e,n){t(121)("Int16",2,function(i){return function(t,e,n){return i(this,t,e,n)}})},{121:121}],260:[function(t,e,n){t(121)("Int32",4,function(i){return function(t,e,n){return i(this,t,e,n)}})},{121:121}],261:[function(t,e,n){t(121)("Int8",1,function(i){return function(t,e,n){return i(this,t,e,n)}})},{121:121}],262:[function(t,e,n){t(121)("Uint16",2,function(i){return function(t,e,n){return i(this,t,e,n)}})},{121:121}],263:[function(t,e,n){t(121)("Uint32",4,function(i){return function(t,e,n){return i(this,t,e,n)}})},{121:121}],264:[function(t,e,n){t(121)("Uint8",1,function(i){return function(t,e,n){return i(this,t,e,n)}})},{121:121}],265:[function(t,e,n){t(121)("Uint8",1,function(i){return function(t,e,n){return i(this,t,e,n)}},!0)},{121:121}],266:[function(t,e,n){function i(e){return function(t){return e(this,0<arguments.length?t:void 0)}}var o,r=t(12)(0),a=t(94),s=t(66),h=t(70),u=t(21),l=t(51),d=t(35),c=t(125),g=s.getWeak,f=Object.isExtensible,p=u.ufstore,m={},y={get:function(t){if(l(t)){var e=g(t);return!0===e?p(c(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(c(this,"WeakMap"),t,e)}},v=e.exports=t(22)("WeakMap",i,y,u,!0,!0);d(function(){return 7!=(new v).set((Object.freeze||Object)(m),7).get(m)})&&(h((o=u.getConstructor(i,"WeakMap")).prototype,y),s.NEED=!0,r(["delete","has","get","set"],function(n){var t=v.prototype,i=t[n];a(t,n,function(t,e){if(!l(t)||f(t))return i.call(this,t,e);this._f||(this._f=new o);e=this._f[n](t,e);return"set"==n?this:e})}))},{12:12,125:125,21:21,22:22,35:35,51:51,66:66,70:70,94:94}],267:[function(t,e,n){var i=t(21),o=t(125);t(22)("WeakSet",function(e){return function(t){return e(this,0<arguments.length?t:void 0)}},{add:function(t){return i.def(o(this,"WeakSet"),t,!0)}},i,!1,!0)},{125:125,21:21,22:22}],268:[function(t,e,n){var i=t(33),r=t(38),a=t(119),s=t(118),h=t(3),u=t(15);i(i.P,"Array",{flatMap:function(t,e){var n,i,o=a(this);return h(t),n=s(o.length),i=u(o,0),r(i,o,o,n,0,1,t,e),i}}),t(5)("flatMap")},{118:118,119:119,15:15,3:3,33:33,38:38,5:5}],269:[function(t,e,n){var i=t(33),o=t(38),r=t(119),a=t(118),s=t(116),h=t(15);i(i.P,"Array",{flatten:function(t){var e=t,n=r(this),i=a(n.length),t=h(n,0);return o(t,n,n,i,0,void 0===e?1:s(e)),t}}),t(5)("flatten")},{116:116,118:118,119:119,15:15,33:33,38:38,5:5}],270:[function(t,e,n){var i=t(33),o=t(11)(!0);i(i.P,"Array",{includes:function(t,e){return o(this,t,1<arguments.length?e:void 0)}}),t(5)("includes")},{11:11,33:33,5:5}],271:[function(t,e,n){var i=t(33),o=t(68)(),r=t(40).process,a="process"==t(18)(r);i(i.G,{asap:function(t){var e=a&&r.domain;o(e?e.bind(t):t)}})},{18:18,33:33,40:40,68:68}],272:[function(t,e,n){var i=t(33),o=t(18);i(i.S,"Error",{isError:function(t){return"Error"===o(t)}})},{18:18,33:33}],273:[function(t,e,n){var i=t(33);i(i.G,{global:t(40)})},{33:33,40:40}],274:[function(t,e,n){t(97)("Map")},{97:97}],275:[function(t,e,n){t(98)("Map")},{98:98}],276:[function(t,e,n){var i=t(33);i(i.P+i.R,"Map",{toJSON:t(20)("Map")})},{20:20,33:33}],277:[function(t,e,n){t=t(33);t(t.S,"Math",{clamp:function(t,e,n){return Math.min(n,Math.max(e,t))}})},{33:33}],278:[function(t,e,n){t=t(33);t(t.S,"Math",{DEG_PER_RAD:Math.PI/180})},{33:33}],279:[function(t,e,n){var t=t(33),i=180/Math.PI;t(t.S,"Math",{degrees:function(t){return t*i}})},{33:33}],280:[function(t,e,n){var i=t(33),r=t(64),a=t(62);i(i.S,"Math",{fscale:function(t,e,n,i,o){return a(r(t,e,n,i,o))}})},{33:33,62:62,64:64}],281:[function(t,e,n){t=t(33);t(t.S,"Math",{iaddh:function(t,e,n,i){t>>>=0,n>>>=0;return(e>>>0)+(i>>>0)+((t&n|(t|n)&~(t+n>>>0))>>>31)|0}})},{33:33}],282:[function(t,e,n){t=t(33);t(t.S,"Math",{imulh:function(t,e){var n=+t,i=+e,t=65535&n,e=65535&i,n=n>>16,i=i>>16,e=(n*e>>>0)+(t*e>>>16);return n*i+(e>>16)+((t*i>>>0)+(65535&e)>>16)}})},{33:33}],283:[function(t,e,n){t=t(33);t(t.S,"Math",{isubh:function(t,e,n,i){t>>>=0,n>>>=0;return(e>>>0)-(i>>>0)-((~t&n|~(t^n)&t-n>>>0)>>>31)|0}})},{33:33}],284:[function(t,e,n){t=t(33);t(t.S,"Math",{RAD_PER_DEG:180/Math.PI})},{33:33}],285:[function(t,e,n){var t=t(33),i=Math.PI/180;t(t.S,"Math",{radians:function(t){return t*i}})},{33:33}],286:[function(t,e,n){var i=t(33);i(i.S,"Math",{scale:t(64)})},{33:33,64:64}],287:[function(t,e,n){t=t(33);t(t.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:0<t}})},{33:33}],288:[function(t,e,n){t=t(33);t(t.S,"Math",{umulh:function(t,e){var n=+t,i=+e,t=65535&n,e=65535&i,n=n>>>16,i=i>>>16,e=(n*e>>>0)+(t*e>>>16);return n*i+(e>>>16)+((t*i>>>0)+(65535&e)>>>16)}})},{33:33}],289:[function(t,e,n){var i=t(33),o=t(119),r=t(3),a=t(72);t(29)&&i(i.P+t(74),"Object",{__defineGetter__:function(t,e){a.f(o(this),t,{get:r(e),enumerable:!0,configurable:!0})}})},{119:119,29:29,3:3,33:33,72:72,74:74}],290:[function(t,e,n){var i=t(33),o=t(119),r=t(3),a=t(72);t(29)&&i(i.P+t(74),"Object",{__defineSetter__:function(t,e){a.f(o(this),t,{set:r(e),enumerable:!0,configurable:!0})}})},{119:119,29:29,3:3,33:33,72:72,74:74}],291:[function(t,e,n){var i=t(33),o=t(84)(!0);i(i.S,"Object",{entries:function(t){return o(t)}})},{33:33,84:84}],292:[function(t,e,n){var i=t(33),h=t(85),u=t(117),l=t(75),d=t(24);i(i.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,i=u(t),o=l.f,r=h(i),a={},s=0;r.length>s;)void 0!==(n=o(i,e=r[s++]))&&d(a,e,n);return a}})},{117:117,24:24,33:33,75:75,85:85}],293:[function(t,e,n){var i=t(33),o=t(119),r=t(120),a=t(79),s=t(75).f;t(29)&&i(i.P+t(74),"Object",{__lookupGetter__:function(t){var e,n=o(this),i=r(t,!0);do{if(e=s(n,i))return e.get}while(n=a(n))}})},{119:119,120:120,29:29,33:33,74:74,75:75,79:79}],294:[function(t,e,n){var i=t(33),o=t(119),r=t(120),a=t(79),s=t(75).f;t(29)&&i(i.P+t(74),"Object",{__lookupSetter__:function(t){var e,n=o(this),i=r(t,!0);do{if(e=s(n,i))return e.set}while(n=a(n))}})},{119:119,120:120,29:29,33:33,74:74,75:75,79:79}],295:[function(t,e,n){var i=t(33),o=t(84)(!1);i(i.S,"Object",{values:function(t){return o(t)}})},{33:33,84:84}],296:[function(t,e,n){function o(t){return null==t?void 0:g(t)}function r(t){var e=t._c;e&&(t._c=void 0,e())}function a(t){return void 0===t._o}function s(t){a(t)||(t._o=void 0,r(t))}function i(t,e){f(t),this._c=void 0,this._o=t,t=new b(this);try{var n=e(t),i=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){i.unsubscribe()}:g(n),this._c=n)}catch(e){return void t.error(e)}a(this)&&r(this)}var h=t(33),u=t(40),l=t(23),d=t(68)(),c=t(128)("observable"),g=t(3),f=t(7),p=t(6),m=t(93),y=t(42),v=t(39),w=v.RETURN;i.prototype=m({},{unsubscribe:function(){s(this)}});var b=function(t){this._s=t};b.prototype=m({},{next:function(t){var e=this._s;if(!a(e)){var n=e._o;try{var i=o(n.next);if(i)return i.call(n,t)}catch(t){try{s(e)}finally{throw t}}}},error:function(t){var e=this._s;if(a(e))throw t;var n=e._o;e._o=void 0;try{var i=o(n.error);if(!i)throw t;t=i.call(n,t)}catch(t){try{r(e)}finally{throw t}}return r(e),t},complete:function(t){var e=this._s;if(!a(e)){var n=e._o;e._o=void 0;try{var i=o(n.complete);t=i?i.call(n,t):void 0}catch(t){try{r(e)}finally{throw t}}return r(e),t}}});var S=function(t){p(this,S,"Observable","_f")._f=g(t)};m(S.prototype,{subscribe:function(t){return new i(t,this._f)},forEach:function(i){var o=this;return new(l.Promise||u.Promise)(function(t,e){g(i);var n=o.subscribe({next:function(t){try{return i(t)}catch(t){e(t),n.unsubscribe()}},error:e,complete:t})})}}),m(S,{from:function(t){var e="function"==typeof this?this:S,n=o(f(t)[c]);if(n){var i=f(n.call(t));return i.constructor===e?i:new e(function(t){return i.subscribe(t)})}return new e(function(e){var n=!1;return d(function(){if(!n){try{if(v(t,!1,function(t){if(e.next(t),n)return w})===w)return}catch(t){if(n)throw t;return void e.error(t)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,i=Array(e);t<e;)i[t]=arguments[t++];return new("function"==typeof this?this:S)(function(e){var n=!1;return d(function(){if(!n){for(var t=0;t<i.length;++t)if(e.next(i[t]),n)return;e.complete()}}),function(){n=!0}})}}),y(S.prototype,c,function(){return this}),h(h.G,{Observable:S}),t(100)("Observable")},{100:100,128:128,23:23,3:3,33:33,39:39,40:40,42:42,6:6,68:68,7:7,93:93}],297:[function(t,e,n){var i=t(33),o=t(23),r=t(40),a=t(104),s=t(91);i(i.P+i.R,"Promise",{finally:function(e){var n=a(this,o.Promise||r.Promise),t="function"==typeof e;return this.then(t?function(t){return s(n,e()).then(function(){return t})}:e,t?function(t){return s(n,e()).then(function(){throw t})}:e)}})},{104:104,23:23,33:33,40:40,91:91}],298:[function(t,e,n){var i=t(33),o=t(69),r=t(90);i(i.S,"Promise",{try:function(t){var e=o.f(this),t=r(t);return(t.e?e.reject:e.resolve)(t.v),e.promise}})},{33:33,69:69,90:90}],299:[function(t,e,n){var i=t(67),o=t(7),r=i.key,a=i.set;i.exp({defineMetadata:function(t,e,n,i){a(t,e,o(n),r(i))}})},{67:67,7:7}],300:[function(t,e,n){var i=t(67),o=t(7),r=i.key,a=i.map,s=i.store;i.exp({deleteMetadata:function(t,e,n){var i=arguments.length<3?void 0:r(n),n=a(o(e),i,!1);if(void 0===n||!n.delete(t))return!1;if(n.size)return!0;n=s.get(e);return n.delete(i),!!n.size||s.delete(e)}})},{67:67,7:7}],301:[function(t,e,n){function i(t,e){var n=u(t,e);return null!==(t=h(t))&&(e=i(t,e)).length?n.length?r(new o(n.concat(e))):e:n}var o=t(231),r=t(10),a=t(67),s=t(7),h=t(79),u=a.keys,l=a.key;a.exp({getMetadataKeys:function(t,e){return i(s(t),arguments.length<2?void 0:l(e))}})},{10:10,231:231,67:67,7:7,79:79}],302:[function(t,e,n){function i(t,e,n){return s(t,e,n)?h(t,e,n):null!==(e=a(e))?i(t,e,n):void 0}var o=t(67),r=t(7),a=t(79),s=o.has,h=o.get,u=o.key;o.exp({getMetadata:function(t,e,n){return i(t,r(e),arguments.length<3?void 0:u(n))}})},{67:67,7:7,79:79}],303:[function(t,e,n){var i=t(67),o=t(7),r=i.keys,a=i.key;i.exp({getOwnMetadataKeys:function(t,e){return r(o(t),arguments.length<2?void 0:a(e))}})},{67:67,7:7}],304:[function(t,e,n){var i=t(67),o=t(7),r=i.get,a=i.key;i.exp({getOwnMetadata:function(t,e,n){return r(t,o(e),arguments.length<3?void 0:a(n))}})},{67:67,7:7}],305:[function(t,e,n){function i(t,e,n){return!!s(t,e,n)||null!==(e=a(e))&&i(t,e,n)}var o=t(67),r=t(7),a=t(79),s=o.has,h=o.key;o.exp({hasMetadata:function(t,e,n){return i(t,r(e),arguments.length<3?void 0:h(n))}})},{67:67,7:7,79:79}],306:[function(t,e,n){var i=t(67),o=t(7),r=i.has,a=i.key;i.exp({hasOwnMetadata:function(t,e,n){return r(t,o(e),arguments.length<3?void 0:a(n))}})},{67:67,7:7}],307:[function(t,e,n){var i=t(67),o=t(7),r=t(3),a=i.key,s=i.set;i.exp({metadata:function(n,i){return function(t,e){s(n,i,(void 0!==e?o:r)(t),a(e))}}})},{3:3,67:67,7:7}],308:[function(t,e,n){t(97)("Set")},{97:97}],309:[function(t,e,n){t(98)("Set")},{98:98}],310:[function(t,e,n){var i=t(33);i(i.P+i.R,"Set",{toJSON:t(20)("Set")})},{20:20,33:33}],311:[function(t,e,n){var i=t(33),o=t(106)(!0);i(i.P,"String",{at:function(t){return o(this,t)}})},{106:106,33:33}],312:[function(t,e,n){function i(t,e){this._r=t,this._s=e}var o=t(33),r=t(28),a=t(118),s=t(52),h=t(37),u=RegExp.prototype;t(54)(i,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),o(o.P,"String",{matchAll:function(t){if(r(this),!s(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in u?String(t.flags):h.call(t),n=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return n.lastIndex=a(t.lastIndex),new i(n,e)}})},{118:118,28:28,33:33,37:37,52:52,54:54}],313:[function(t,e,n){var i=t(33),o=t(109);i(i.P,"String",{padEnd:function(t,e){return o(this,t,1<arguments.length?e:void 0,!1)}})},{109:109,33:33}],314:[function(t,e,n){var i=t(33),o=t(109);i(i.P,"String",{padStart:function(t,e){return o(this,t,1<arguments.length?e:void 0,!0)}})},{109:109,33:33}],315:[function(t,e,n){t(111)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},{111:111}],316:[function(t,e,n){t(111)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},{111:111}],317:[function(t,e,n){t(126)("asyncIterator")},{126:126}],318:[function(t,e,n){t(126)("observable")},{126:126}],319:[function(t,e,n){var i=t(33);i(i.S,"System",{global:t(40)})},{33:33,40:40}],320:[function(t,e,n){t(97)("WeakMap")},{97:97}],321:[function(t,e,n){t(98)("WeakMap")},{98:98}],322:[function(t,e,n){t(97)("WeakSet")},{97:97}],323:[function(t,e,n){t(98)("WeakSet")},{98:98}],324:[function(t,e,n){for(var i=t(141),o=t(81),r=t(94),a=t(40),s=t(42),h=t(58),t=t(128),u=t("iterator"),l=t("toStringTag"),d=h.Array,c={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=o(c),f=0;f<g.length;f++){var p,m=g[f],y=c[m],v=a[m],w=v&&v.prototype;if(w&&(w[u]||s(w,u,d),w[l]||s(w,l,m),h[m]=d,y))for(p in i)w[p]||r(w,p,i[p],!0)}},{128:128,141:141,40:40,42:42,58:58,81:81,94:94}],325:[function(t,e,n){var i=t(33),t=t(113);i(i.G+i.B,{setImmediate:t.set,clearImmediate:t.clear})},{113:113,33:33}],326:[function(t,e,n){var i=t(40),o=t(33),r=t(46),a=t(88),t=i.navigator,s=!!t&&/MSIE .\./.test(t.userAgent),t=function(n){return s?function(t,e){return n(r(a,[].slice.call(arguments,2),"function"==typeof t?t:Function(t)),e)}:n};o(o.G+o.B+o.F*s,{setTimeout:t(i.setTimeout),setInterval:t(i.setInterval)})},{33:33,40:40,46:46,88:88}],327:[function(t,e,n){t(254),t(191),t(193),t(192),t(195),t(197),t(202),t(196),t(194),t(204),t(203),t(199),t(200),t(198),t(190),t(201),t(205),t(206),t(157),t(159),t(158),t(208),t(207),t(178),t(188),t(189),t(179),t(180),t(181),t(182),t(183),t(184),t(185),t(186),t(187),t(161),t(162),t(163),t(164),t(165),t(166),t(167),t(168),t(169),t(170),t(171),t(172),t(173),t(174),t(175),t(176),t(177),t(241),t(246),t(253),t(244),t(236),t(237),t(242),t(247),t(249),t(232),t(233),t(234),t(235),t(238),t(239),t(240),t(243),t(245),t(248),t(250),t(251),t(252),t(152),t(154),t(153),t(156),t(155),t(140),t(138),t(145),t(142),t(148),t(150),t(137),t(144),t(134),t(149),t(132),t(147),t(146),t(139),t(143),t(131),t(133),t(136),t(135),t(151),t(141),t(224),t(230),t(225),t(226),t(227),t(228),t(229),t(209),t(160),t(231),t(266),t(267),t(255),t(256),t(261),t(264),t(265),t(259),t(262),t(260),t(263),t(257),t(258),t(210),t(211),t(212),t(213),t(214),t(217),t(215),t(216),t(218),t(219),t(220),t(221),t(223),t(222),t(270),t(268),t(269),t(311),t(314),t(313),t(315),t(316),t(312),t(317),t(318),t(292),t(295),t(291),t(289),t(290),t(293),t(294),t(276),t(310),t(275),t(309),t(321),t(323),t(274),t(308),t(320),t(322),t(273),t(319),t(272),t(277),t(278),t(279),t(280),t(281),t(283),t(282),t(284),t(285),t(286),t(288),t(287),t(297),t(298),t(299),t(300),t(302),t(301),t(304),t(303),t(305),t(306),t(307),t(271),t(296),t(326),t(325),t(324),e.exports=t(23)},{131:131,132:132,133:133,134:134,135:135,136:136,137:137,138:138,139:139,140:140,141:141,142:142,143:143,144:144,145:145,146:146,147:147,148:148,149:149,150:150,151:151,152:152,153:153,154:154,155:155,156:156,157:157,158:158,159:159,160:160,161:161,162:162,163:163,164:164,165:165,166:166,167:167,168:168,169:169,170:170,171:171,172:172,173:173,174:174,175:175,176:176,177:177,178:178,179:179,180:180,181:181,182:182,183:183,184:184,185:185,186:186,187:187,188:188,189:189,190:190,191:191,192:192,193:193,194:194,195:195,196:196,197:197,198:198,199:199,200:200,201:201,202:202,203:203,204:204,205:205,206:206,207:207,208:208,209:209,210:210,211:211,212:212,213:213,214:214,215:215,216:216,217:217,218:218,219:219,220:220,221:221,222:222,223:223,224:224,225:225,226:226,227:227,228:228,229:229,23:23,230:230,231:231,232:232,233:233,234:234,235:235,236:236,237:237,238:238,239:239,240:240,241:241,242:242,243:243,244:244,245:245,246:246,247:247,248:248,249:249,250:250,251:251,252:252,253:253,254:254,255:255,256:256,257:257,258:258,259:259,260:260,261:261,262:262,263:263,264:264,265:265,266:266,267:267,268:268,269:269,270:270,271:271,272:272,273:273,274:274,275:275,276:276,277:277,278:278,279:279,280:280,281:281,282:282,283:283,284:284,285:285,286:286,287:287,288:288,289:289,290:290,291:291,292:292,293:293,294:294,295:295,296:296,297:297,298:298,299:299,300:300,301:301,302:302,303:303,304:304,305:305,306:306,307:307,308:308,309:309,310:310,311:311,312:312,313:313,314:314,315:315,316:316,317:317,318:318,319:319,320:320,321:321,322:322,323:323,324:324,325:325,326:326}],328:[function(t,N,e){(function(t){!function(t){function r(t,e,n,i){var o,r,a,s,e=e&&e.prototype instanceof u?e:u,e=Object.create(e.prototype),i=new l(i||[]);return e._invoke=(o=t,r=n,a=i,s=x,function(t,e){if(s===k)throw new Error("Generator is already running");if(s===L){if("throw"===t)throw e;return c()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){var i=function t(e,n){var i=e.iterator[n.method];if(i===g){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=g,t(e,n),"throw"===n.method))return M;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return M}i=h(i,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,M;var i=i.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=g),n.delegate=null,M):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,M)}(n,a);if(i){if(i===M)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===x)throw s=L,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=k;i=h(o,r,a);if("normal"===i.type){if(s=a.done?L:P,i.arg===M)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(s=L,a.method="throw",a.arg=i.arg)}}),e}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function u(){}function e(){}function n(){}function i(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function a(r){function a(t,e,n,i){t=h(r[t],r,e);if("throw"!==t.type){var o=t.arg,e=o.value;return e&&"object"==_typeof(e)&&p.call(e,"__await")?Promise.resolve(e.__await).then(function(t){a("next",t,n,i)},function(t){a("throw",t,n,i)}):Promise.resolve(e).then(function(t){o.value=t,n(o)},i)}i(t.arg)}var e;"object"==_typeof(t.process)&&t.process.domain&&(a=t.process.domain.bind(a)),this._invoke=function(n,i){function t(){return new Promise(function(t,e){a(n,i,t,e)})}return e=e?e.then(t,t):t()}}function o(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function s(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function l(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(o,this),this.reset(!0)}function d(e){if(e){var t=e[y];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,t=function t(){for(;++n<e.length;)if(p.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=g,t.done=!0,t};return t.next=t}}return{next:c}}function c(){return{value:g,done:!0}}var g,f=Object.prototype,p=f.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},y=m.iterator||"@@iterator",v=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag",b="object"==_typeof(N),S=t.regeneratorRuntime;if(S)return b&&(N.exports=S);(S=t.regeneratorRuntime=b?N.exports:{}).wrap=r;var x="suspendedStart",P="suspendedYield",k="executing",L="completed",M={};(m={})[y]=function(){return this},(b=(b=Object.getPrototypeOf)&&b(b(d([]))))&&b!==f&&p.call(b,y)&&(m=b);var _=n.prototype=u.prototype=Object.create(m);(e.prototype=_.constructor=n).constructor=e,n[w]=e.displayName="GeneratorFunction",S.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))},S.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,n):(t.__proto__=n,w in t||(t[w]="GeneratorFunction")),t.prototype=Object.create(_),t},S.awrap=function(t){return{__await:t}},i(a.prototype),a.prototype[v]=function(){return this},S.AsyncIterator=a,S.async=function(t,e,n,i){var o=new a(r(t,e,n,i));return S.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},i(_),_[w]="Generator",_[y]=function(){return this},_.toString=function(){return"[object Generator]"},S.keys=function(n){var t,i=[];for(t in n)i.push(t);return i.reverse(),function t(){for(;i.length;){var e=i.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},S.values=d,l.prototype={constructor:l,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(s),!t)for(var e in this)"t"===e.charAt(0)&&p.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){function t(t,e){return r.type="throw",r.arg=n,i.next=t,e&&(i.method="next",i.arg=g),!!e}if(this.done)throw n;for(var i=this,e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],r=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=p.call(o,"catchLoc"),s=p.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&p.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=t,r.arg=e,o?(this.method="next",this.next=o.finallyLoc,M):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),M},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),s(n),M}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i,o=n.completion;return"throw"===o.type&&(i=o.arg,s(n)),i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:d(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=g),M}}}("object"==_typeof(t)?t:"object"==("undefined"==typeof window?"undefined":_typeof(window))?window:"object"==("undefined"==typeof self?"undefined":_typeof(self))?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]),function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?exports.Sigma=e():t.Sigma=e()}(self,function(){return n={796:function(t){t.exports=function(t,e){var n=e.length;if(0!==n){var i=t.length;t.length+=n;for(var o=0;o<n;o++)t[i+o]=e[o]}}},187:function(t){var e="object"==("undefined"==typeof Reflect?"undefined":_typeof(Reflect))?Reflect:null,h=e&&"function"==typeof e.apply?e.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},n=e&&"function"==typeof e.ownKeys?e.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)},i=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(o,r){return new Promise(function(t,e){function n(t){o.removeListener(r,i),e(t)}function i(){"function"==typeof o.removeListener&&o.removeListener("error",n),t([].slice.call(arguments))}f(o,r,i,{once:!0}),"error"===r||"function"==typeof o.on&&f(o,"error",n,{once:!0})})},(o.EventEmitter=o).prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var r=10;function s(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+_typeof(t))}function a(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function u(t,e,n,i){var o,r;return s(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener||n),o=t._events),r=o[e]),void 0===r?(r=o[e]=n,++t._eventsCount):("function"==typeof r?r=o[e]=i?[n,r]:[r,n]:i?r.unshift(n):r.push(n),0<(n=a(t))&&r.length>n&&!r.warned&&(r.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=t,n.type=e,n.count=r.length,console&&console.warn)),t}function l(t,e,n){t={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},e=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(t);return e.listener=n,t.wrapFn=e}function d(t,e,n){t=t._events;if(void 0===t)return[];e=t[e];return void 0===e?[]:"function"==typeof e?n?[e.listener||e]:[e]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):g(e,e.length)}function c(t){var e=this._events;if(void 0!==e){t=e[t];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function g(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function f(n,i,o,r){if("function"==typeof n.on)r.once?n.once(i,o):n.on(i,o);else{if("function"!=typeof n.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+_typeof(n));n.addEventListener(i,function t(e){r.once&&n.removeEventListener(i,t),o(e)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");r=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return a(this)},o.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i,o="error"===t,r=this._events;if(void 0!==r)o=o&&void 0===r.error;else if(!o)return!1;if(o){if(0<e.length&&(i=e[0]),i instanceof Error)throw i;o=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw o.context=i,o}t=r[t];if(void 0===t)return!1;if("function"==typeof t)h(t,this,e);else for(var a=t.length,s=g(t,a),n=0;n<a;++n)h(s[n],this,e);return!0},o.prototype.addListener=function(t,e){return u(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return u(this,t,e,!0)},o.prototype.once=function(t,e){return s(e),this.on(t,l(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return s(e),this.prependListener(t,l(this,t,e)),this},o.prototype.removeListener=function(t,e){var n,i,o,r,a;if(s(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,r=n.length-1;0<=r;r--)if(n[r]===e||n[r].listener===e){a=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,a||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,n;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){for(var i,o=Object.keys(n),r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;0<=r;r--)this.removeListener(t,e[r]);return this},o.prototype.listeners=function(t){return d(this,t,!0)},o.prototype.rawListeners=function(t){return d(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):c.call(t,e)},o.prototype.listenerCount=c,o.prototype.eventNames=function(){return 0<this._eventsCount?n(this._events):[]}},886:function(t,e,n){var s=n(868);function i(t,e){if(!s(t))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");for(var n,i,o=[].concat(e),r={},a=0;a<o.length;a++)i=o[a],r[i]=[1/0,-1/0];return t.forEachNode(function(t,e){for(a=0;a<o.length;a++)i=o[a],(n=e[i])<r[i][0]&&(r[i][0]=n),n>r[i][1]&&(r[i][1]=n)}),"string"==typeof e?r[e]:r}n=i;n.nodeExtent=i,n.edgeExtent=function(t,e){if(!s(t))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");for(var n,i,o=[].concat(e),r={},a=0;a<o.length;a++)i=o[a],r[i]=[1/0,-1/0];return t.forEachEdge(function(t,e){for(a=0;a<o.length;a++)i=o[a],(n=e[i])<r[i][0]&&(r[i][0]=n),n>r[i][1]&&(r[i][1]=n)}),"string"==typeof e?r[e]:r},t.exports=n},868:function(t){t.exports=function(t){return null!==t&&"object"==_typeof(t)&&"function"==typeof t.addUndirectedEdgeWithKey&&"function"==typeof t.dropNode&&"boolean"==typeof t.multi}},186:function(t){t.exports=function(t){return null!==t&&"object"==_typeof(t)&&"function"==typeof t.addUndirectedEdgeWithKey&&"function"==typeof t.dropNode&&"boolean"==typeof t.multi}},698:function(t){t.exports=function(){function a(t){return(a="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return _typeof(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof(t)})(t)}function n(t,e){t.prototype=Object.create(e.prototype),o(t.prototype.constructor=t,e)}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t,e,n){return(r=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(t){return}}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);i=new(Function.bind.apply(t,i));return n&&o(i,n.prototype),i}).apply(null,arguments)}function e(t){var n="function"==typeof Map?new Map:void 0;return(e=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return r(t,arguments,i(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o(e,t)})(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var m=function(t){for(var e=t,n=1,i=arguments.length;n<i;n++)if(arguments[n])for(var o in arguments[n])e[o]=arguments[n][o];return e};function g(t,e,n,i){t=t._nodes.get(e),e=null;return t?e="mixed"===i?t.out&&t.out[n]||t.undirected&&t.undirected[n]:"directed"===i?t.out&&t.out[n]:t.undirected&&t.undirected[n]:e}function y(t){return"object"===a(t)&&null!==t&&t.constructor===Object}function h(t){for(var e in t)return;return 1}function l(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function u(t,e,n){var i={enumerable:!0,configurable:!0};"function"==typeof n?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function d(t){return y(t)&&(!t.attributes||Array.isArray(t.attributes))}"function"==typeof Object.assign&&(m=Object.assign);var t={exports:{}},c="object"==("undefined"==typeof Reflect?"undefined":_typeof(Reflect))?Reflect:null,f=c&&"function"==typeof c.apply?c.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},p=c&&"function"==typeof c.ownKeys?c.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)},v=Number.isNaN||function(t){return t!=t};function w(){w.init.call(this)}t.exports=w,t.exports.once=function(o,r){return new Promise(function(t,e){function n(t){o.removeListener(r,i),e(t)}function i(){"function"==typeof o.removeListener&&o.removeListener("error",n),t([].slice.call(arguments))}N(o,r,i,{once:!0}),"error"===r||"function"==typeof o.on&&N(o,"error",n,{once:!0})})},(w.EventEmitter=w).prototype._events=void 0,w.prototype._eventsCount=0,w.prototype._maxListeners=void 0;var b=10;function S(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+_typeof(t))}function x(t){return void 0===t._maxListeners?w.defaultMaxListeners:t._maxListeners}function P(t,e,n,i){var o,r;return S(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener||n),o=t._events),r=o[e]),void 0===r?(r=o[e]=n,++t._eventsCount):("function"==typeof r?r=o[e]=i?[n,r]:[r,n]:i?r.unshift(n):r.push(n),0<(n=x(t))&&r.length>n&&!r.warned&&(r.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=t,n.type=e,n.count=r.length,console&&console.warn)),t}function k(t,e,n){t={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},e=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(t);return e.listener=n,t.wrapFn=e}function L(t,e,n){t=t._events;if(void 0===t)return[];e=t[e];return void 0===e?[]:"function"==typeof e?n?[e.listener||e]:[e]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):_(e,e.length)}function M(t){var e=this._events;if(void 0!==e){t=e[t];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function _(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function N(n,i,o,r){if("function"==typeof n.on)r.once?n.once(i,o):n.on(i,o);else{if("function"!=typeof n.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+_typeof(n));n.addEventListener(i,function t(e){r.once&&n.removeEventListener(i,t),o(e)})}}function A(t){if("function"!=typeof t)throw new Error("obliterator/iterator: expecting a function!");this.next=t}Object.defineProperty(w,"defaultMaxListeners",{enumerable:!0,get:function(){return b},set:function(t){if("number"!=typeof t||t<0||v(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");b=t}}),w.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},w.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||v(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},w.prototype.getMaxListeners=function(){return x(this)},w.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i,o="error"===t,r=this._events;if(void 0!==r)o=o&&void 0===r.error;else if(!o)return!1;if(o){if(0<e.length&&(i=e[0]),i instanceof Error)throw i;o=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw o.context=i,o}t=r[t];if(void 0===t)return!1;if("function"==typeof t)f(t,this,e);else for(var a=t.length,s=_(t,a),n=0;n<a;++n)f(s[n],this,e);return!0},w.prototype.addListener=function(t,e){return P(this,t,e,!1)},w.prototype.on=w.prototype.addListener,w.prototype.prependListener=function(t,e){return P(this,t,e,!0)},w.prototype.once=function(t,e){return S(e),this.on(t,k(this,t,e)),this},w.prototype.prependOnceListener=function(t,e){return S(e),this.prependListener(t,k(this,t,e)),this},w.prototype.removeListener=function(t,e){var n,i,o,r,a;if(S(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,r=n.length-1;0<=r;r--)if(n[r]===e||n[r].listener===e){a=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,a||e)}return this},w.prototype.off=w.prototype.removeListener,w.prototype.removeAllListeners=function(t){var e,n;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){for(var i,o=Object.keys(n),r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;0<=r;r--)this.removeListener(t,e[r]);return this},w.prototype.listeners=function(t){return L(this,t,!0)},w.prototype.rawListeners=function(t){return L(this,t,!1)},w.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):M.call(t,e)},w.prototype.listenerCount=M,w.prototype.eventNames=function(){return 0<this._eventsCount?p(this._events):[]},"undefined"!=typeof Symbol&&(A.prototype[Symbol.iterator]=function(){return this}),A.of=function(){var t=arguments,e=t.length,n=0;return new A(function(){return e<=n?{done:!0}:{done:!1,value:t[n++]}})},A.empty=function(){return new A(function(){return{done:!0}})},A.fromSequence=function(t){var e=0,n=t.length;return new A(function(){return n<=e?{done:!0}:{done:!1,value:t[e++]}})},A.is=function(t){return t instanceof A||"object"==_typeof(t)&&null!==t&&"function"==typeof t.next};var T=A,C={};C.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,C.SYMBOL_SUPPORT="undefined"!=typeof Symbol;function D(t,e){for(var n,i=1<arguments.length?e:1/0,o=i!==1/0?new Array(i):[],r=0,a=I(t);;){if(r===i)return o;if((n=a.next()).done)return r!==e&&(o.length=r),o;o[r++]=n.value}}var E,F,O,B,G=T,j=C.ARRAY_BUFFER_SUPPORT,z=C.SYMBOL_SUPPORT,R=function(t){t="string"==typeof(t=t)||Array.isArray(t)||j&&ArrayBuffer.isView(t)?G.fromSequence(t):"object"!=_typeof(t)||null===t?null:z&&"function"==typeof t[Symbol.iterator]?t[Symbol.iterator]():"function"==typeof t.next?t:null;if(!t)throw new Error("obliterator: target is not iterable nor a valid iterator.");return t},I=R,V=(n(W,B=e(Error)),W),U=(n(X,O=V),X),q=(n(K,F=V),K),H=(n(Y,E=V),Y);function Y(t){return(t=E.call(this,t)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(t),Y.prototype.constructor),t}function K(t){return(t=F.call(this,t)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(t),K.prototype.constructor),t}function X(t){return(t=O.call(this,t)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(t),X.prototype.constructor),t}function W(t){var e;return(e=B.call(this)||this).name="GraphError",e.message=t,e}function $(t,e){this.key=t,this.attributes=e,this.clear()}function J(t,e){this.key=t,this.attributes=e,this.clear()}function Z(t,e){this.key=t,this.attributes=e,this.clear()}function Q(t,e,n,i,o){this.key=e,this.attributes=o,this.undirected=t,this.source=n,this.target=i}function tt(t,e,n,i,o,r,a){var s,h="out",u="in";e&&(h=u="undirected"),t.multi?(void 0===(t=(s=r[h])[o])&&(t=new Set,s[o]=t),t.add(n),i===o&&e||void 0===(s=a[u])[i]&&(s[i]=t)):(r[h][o]=n,i===o&&e||(a[u][i]=n))}function et(t,e,n,i,o,r,a){var s,h,u,l;if(i=""+i,0===n){if(!(s=t._nodes.get(i)))throw new q("Graph.".concat(e,': could not find the "').concat(i,'" node in the graph.'));u=o,l=r}else if(3===n){if(o=""+o,!(h=t._edges.get(o)))throw new q("Graph.".concat(e,': could not find the "').concat(o,'" edge in the graph.'));var d=h.source.key,c=h.target.key;if(i===d)s=h.target;else{if(i!==c)throw new q("Graph.".concat(e,': the "').concat(i,'" node is not attached to the "').concat(o,'" edge (').concat(d,", ").concat(c,")."));s=h.source}u=r,l=a}else{if(!(h=t._edges.get(i)))throw new q("Graph.".concat(e,': could not find the "').concat(i,'" edge in the graph.'));s=1===n?h.source:h.target,u=o,l=r}return[s,u,l]}$.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}},J.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}},J.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},Z.prototype.clear=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},Z.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};function nt(){var n,i=arguments,o=-1;return new it(function t(){if(!n){if(++o>=i.length)return{done:!0};n=ot(i[o])}var e=n.next();return e.done?(n=null,t()):e})}var c=[{name:function(t){return"get".concat(t,"Attribute")},attacher:function(t,i,o){t.prototype[i]=function(t,e,n){e=et(this,i,o,t,e,n),n=e[0],e=e[1];return n.attributes[e]}}},{name:function(t){return"get".concat(t,"Attributes")},attacher:function(t,n,i){t.prototype[n]=function(t,e){return et(this,n,i,t,e)[0].attributes}}},{name:function(t){return"has".concat(t,"Attribute")},attacher:function(t,i,o){t.prototype[i]=function(t,e,n){e=et(this,i,o,t,e,n),n=e[0],e=e[1];return n.attributes.hasOwnProperty(e)}}},{name:function(t){return"set".concat(t,"Attribute")},attacher:function(t,o,r){t.prototype[o]=function(t,e,n,i){e=et(this,o,r,t,e,n,i),n=e[0],i=e[1],e=e[2];return n.attributes[i]=e,this.emit("nodeAttributesUpdated",{key:n.key,type:"set",attributes:n.attributes,name:i}),this}}},{name:function(t){return"update".concat(t,"Attribute")},attacher:function(t,o,r){t.prototype[o]=function(t,e,n,i){t=et(this,o,r,t,e,n,i),e=t[0],n=t[1],i=t[2];if("function"!=typeof i)throw new U("Graph.".concat(o,": updater should be a function."));t=e.attributes,i=i(t[n]);return t[n]=i,this.emit("nodeAttributesUpdated",{key:e.key,type:"set",attributes:e.attributes,name:n}),this}}},{name:function(t){return"remove".concat(t,"Attribute")},attacher:function(t,i,o){t.prototype[i]=function(t,e,n){e=et(this,i,o,t,e,n),n=e[0],e=e[1];return delete n.attributes[e],this.emit("nodeAttributesUpdated",{key:n.key,type:"remove",attributes:n.attributes,name:e}),this}}},{name:function(t){return"replace".concat(t,"Attributes")},attacher:function(t,i,o){t.prototype[i]=function(t,e,n){e=et(this,i,o,t,e,n),n=e[0],e=e[1];if(!y(e))throw new U("Graph.".concat(i,": provided attributes are not a plain object."));return n.attributes=e,this.emit("nodeAttributesUpdated",{key:n.key,type:"replace",attributes:n.attributes}),this}}},{name:function(t){return"merge".concat(t,"Attributes")},attacher:function(t,i,o){t.prototype[i]=function(t,e,n){e=et(this,i,o,t,e,n),n=e[0],e=e[1];if(!y(e))throw new U("Graph.".concat(i,": provided attributes are not a plain object."));return m(n.attributes,e),this.emit("nodeAttributesUpdated",{key:n.key,type:"merge",attributes:n.attributes,data:e}),this}}},{name:function(t){return"update".concat(t,"Attributes")},attacher:function(t,i,o){t.prototype[i]=function(t,e,n){e=et(this,i,o,t,e,n),n=e[0],e=e[1];if("function"!=typeof e)throw new U("Graph.".concat(i,": provided updater is not a function."));return n.attributes=e(n.attributes),this.emit("nodeAttributesUpdated",{key:n.key,type:"update",attributes:n.attributes}),this}}}],C=[{name:function(t){return"get".concat(t,"Attribute")},attacher:function(t,r,a){t.prototype[r]=function(t,e){var n;if("mixed"!==this.type&&"mixed"!==a&&a!==this.type)throw new H("Graph.".concat(r,": cannot find this type of edges in your ").concat(this.type," graph."));if(2<arguments.length){if(this.multi)throw new H("Graph.".concat(r,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var i=""+t,o=""+e;if(e=arguments[2],!(n=g(this,i,o,a)))throw new q("Graph.".concat(r,': could not find an edge for the given path ("').concat(i,'" - "').concat(o,'").'))}else if(t=""+t,!(n=this._edges.get(t)))throw new q("Graph.".concat(r,': could not find the "').concat(t,'" edge in the graph.'));if("mixed"!==a&&n.undirected!==("undirected"===a))throw new q("Graph.".concat(r,': could not find the "').concat(t,'" ').concat(a," edge in the graph."));return n.attributes[e]}}},{name:function(t){return"get".concat(t,"Attributes")},attacher:function(t,o,r){t.prototype[o]=function(t){var e;if("mixed"!==this.type&&"mixed"!==r&&r!==this.type)throw new H("Graph.".concat(o,": cannot find this type of edges in your ").concat(this.type," graph."));if(1<arguments.length){if(this.multi)throw new H("Graph.".concat(o,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var n=""+t,i=""+arguments[1];if(!(e=g(this,n,i,r)))throw new q("Graph.".concat(o,': could not find an edge for the given path ("').concat(n,'" - "').concat(i,'").'))}else if(t=""+t,!(e=this._edges.get(t)))throw new q("Graph.".concat(o,': could not find the "').concat(t,'" edge in the graph.'));if("mixed"!==r&&e.undirected!==("undirected"===r))throw new q("Graph.".concat(o,': could not find the "').concat(t,'" ').concat(r," edge in the graph."));return e.attributes}}},{name:function(t){return"has".concat(t,"Attribute")},attacher:function(t,r,a){t.prototype[r]=function(t,e){var n;if("mixed"!==this.type&&"mixed"!==a&&a!==this.type)throw new H("Graph.".concat(r,": cannot find this type of edges in your ").concat(this.type," graph."));if(2<arguments.length){if(this.multi)throw new H("Graph.".concat(r,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var i=""+t,o=""+e;if(e=arguments[2],!(n=g(this,i,o,a)))throw new q("Graph.".concat(r,': could not find an edge for the given path ("').concat(i,'" - "').concat(o,'").'))}else if(t=""+t,!(n=this._edges.get(t)))throw new q("Graph.".concat(r,': could not find the "').concat(t,'" edge in the graph.'));if("mixed"!==a&&n.undirected!==("undirected"===a))throw new q("Graph.".concat(r,': could not find the "').concat(t,'" ').concat(a," edge in the graph."));return n.attributes.hasOwnProperty(e)}}},{name:function(t){return"set".concat(t,"Attribute")},attacher:function(t,a,s){t.prototype[a]=function(t,e,n){var i;if("mixed"!==this.type&&"mixed"!==s&&s!==this.type)throw new H("Graph.".concat(a,": cannot find this type of edges in your ").concat(this.type," graph."));if(3<arguments.length){if(this.multi)throw new H("Graph.".concat(a,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,r=""+e;if(e=arguments[2],n=arguments[3],!(i=g(this,o,r,s)))throw new q("Graph.".concat(a,': could not find an edge for the given path ("').concat(o,'" - "').concat(r,'").'))}else if(t=""+t,!(i=this._edges.get(t)))throw new q("Graph.".concat(a,': could not find the "').concat(t,'" edge in the graph.'));if("mixed"!==s&&i.undirected!==("undirected"===s))throw new q("Graph.".concat(a,': could not find the "').concat(t,'" ').concat(s," edge in the graph."));return i.attributes[e]=n,this.emit("edgeAttributesUpdated",{key:i.key,type:"set",attributes:i.attributes,name:e}),this}}},{name:function(t){return"update".concat(t,"Attribute")},attacher:function(t,a,s){t.prototype[a]=function(t,e,n){var i;if("mixed"!==this.type&&"mixed"!==s&&s!==this.type)throw new H("Graph.".concat(a,": cannot find this type of edges in your ").concat(this.type," graph."));if(3<arguments.length){if(this.multi)throw new H("Graph.".concat(a,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,r=""+e;if(e=arguments[2],n=arguments[3],!(i=g(this,o,r,s)))throw new q("Graph.".concat(a,': could not find an edge for the given path ("').concat(o,'" - "').concat(r,'").'))}else if(t=""+t,!(i=this._edges.get(t)))throw new q("Graph.".concat(a,': could not find the "').concat(t,'" edge in the graph.'));if("function"!=typeof n)throw new U("Graph.".concat(a,": updater should be a function."));if("mixed"!==s&&i.undirected!==("undirected"===s))throw new q("Graph.".concat(a,': could not find the "').concat(t,'" ').concat(s," edge in the graph."));return i.attributes[e]=n(i.attributes[e]),this.emit("edgeAttributesUpdated",{key:i.key,type:"set",attributes:i.attributes,name:e}),this}}},{name:function(t){return"remove".concat(t,"Attribute")},attacher:function(t,r,a){t.prototype[r]=function(t,e){var n;if("mixed"!==this.type&&"mixed"!==a&&a!==this.type)throw new H("Graph.".concat(r,": cannot find this type of edges in your ").concat(this.type," graph."));if(2<arguments.length){if(this.multi)throw new H("Graph.".concat(r,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var i=""+t,o=""+e;if(e=arguments[2],!(n=g(this,i,o,a)))throw new q("Graph.".concat(r,': could not find an edge for the given path ("').concat(i,'" - "').concat(o,'").'))}else if(t=""+t,!(n=this._edges.get(t)))throw new q("Graph.".concat(r,': could not find the "').concat(t,'" edge in the graph.'));if("mixed"!==a&&n.undirected!==("undirected"===a))throw new q("Graph.".concat(r,': could not find the "').concat(t,'" ').concat(a," edge in the graph."));return delete n.attributes[e],this.emit("edgeAttributesUpdated",{key:n.key,type:"remove",attributes:n.attributes,name:e}),this}}},{name:function(t){return"replace".concat(t,"Attributes")},attacher:function(t,r,a){t.prototype[r]=function(t,e){var n;if("mixed"!==this.type&&"mixed"!==a&&a!==this.type)throw new H("Graph.".concat(r,": cannot find this type of edges in your ").concat(this.type," graph."));if(2<arguments.length){if(this.multi)throw new H("Graph.".concat(r,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var i=""+t,o=""+e;if(e=arguments[2],!(n=g(this,i,o,a)))throw new q("Graph.".concat(r,': could not find an edge for the given path ("').concat(i,'" - "').concat(o,'").'))}else if(t=""+t,!(n=this._edges.get(t)))throw new q("Graph.".concat(r,': could not find the "').concat(t,'" edge in the graph.'));if(!y(e))throw new U("Graph.".concat(r,": provided attributes are not a plain object."));if("mixed"!==a&&n.undirected!==("undirected"===a))throw new q("Graph.".concat(r,': could not find the "').concat(t,'" ').concat(a," edge in the graph."));return n.attributes=e,this.emit("edgeAttributesUpdated",{key:n.key,type:"replace",attributes:n.attributes}),this}}},{name:function(t){return"merge".concat(t,"Attributes")},attacher:function(t,r,a){t.prototype[r]=function(t,e){var n;if("mixed"!==this.type&&"mixed"!==a&&a!==this.type)throw new H("Graph.".concat(r,": cannot find this type of edges in your ").concat(this.type," graph."));if(2<arguments.length){if(this.multi)throw new H("Graph.".concat(r,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var i=""+t,o=""+e;if(e=arguments[2],!(n=g(this,i,o,a)))throw new q("Graph.".concat(r,': could not find an edge for the given path ("').concat(i,'" - "').concat(o,'").'))}else if(t=""+t,!(n=this._edges.get(t)))throw new q("Graph.".concat(r,': could not find the "').concat(t,'" edge in the graph.'));if(!y(e))throw new U("Graph.".concat(r,": provided attributes are not a plain object."));if("mixed"!==a&&n.undirected!==("undirected"===a))throw new q("Graph.".concat(r,': could not find the "').concat(t,'" ').concat(a," edge in the graph."));return m(n.attributes,e),this.emit("edgeAttributesUpdated",{key:n.key,type:"merge",attributes:n.attributes,data:e}),this}}},{name:function(t){return"update".concat(t,"Attributes")},attacher:function(t,r,a){t.prototype[r]=function(t,e){var n;if("mixed"!==this.type&&"mixed"!==a&&a!==this.type)throw new H("Graph.".concat(r,": cannot find this type of edges in your ").concat(this.type," graph."));if(2<arguments.length){if(this.multi)throw new H("Graph.".concat(r,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var i=""+t,o=""+e;if(e=arguments[2],!(n=g(this,i,o,a)))throw new q("Graph.".concat(r,': could not find an edge for the given path ("').concat(i,'" - "').concat(o,'").'))}else if(t=""+t,!(n=this._edges.get(t)))throw new q("Graph.".concat(r,': could not find the "').concat(t,'" edge in the graph.'));if("function"!=typeof e)throw new U("Graph.".concat(r,": provided updater is not a function."));if("mixed"!==a&&n.undirected!==("undirected"===a))throw new q("Graph.".concat(r,': could not find the "').concat(t,'" ').concat(a," edge in the graph."));return n.attributes=e(n.attributes),this.emit("edgeAttributesUpdated",{key:n.key,type:"update",attributes:n.attributes}),this}}}],it=T,ot=R,V=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function rt(t,e){for(var n in e)t.push(e[n].key)}function at(e,t){for(var n in t)t[n].forEach(function(t){return e.push(t.key)})}function st(t,e,n){for(var i in t){var o;i!==n&&e((o=t[i]).key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected)}}function ht(t,e,n){for(var i in t)i!==n&&t[i].forEach(function(t){return e(t.key,t.attributes,t.source.key,t.target.key,t.source.attributes,t.target.attributes,t.undirected)})}function ut(t,e,n){for(var i in t)if(i!==n){var o=t[i];if(e(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected))return o.key}}function lt(t,e,n){var i,o,r,a,s;for(s in t)if(s!==n)for(i=t[s].values();!0!==(a=i.next()).done;)if(r=(o=a.value).source,a=o.target,e(o.key,o.attributes,r.key,a.key,r.attributes,a.attributes,o.undirected))return o.key}function dt(i,o){var r=Object.keys(i),a=r.length,s=null,h=0;return new T(function t(){var e;if(s){var n=s.next();if(n.done)return s=null,h++,t();e=n.value}else{if(a<=h)return{done:!0};n=r[h];if(n===o)return h++,t();if((e=i[n])instanceof Set)return s=e.values(),t();h++}return{done:!1,value:{edge:e.key,attributes:e.attributes,source:e.source.key,target:e.target.key,sourceAttributes:e.source.attributes,targetAttributes:e.target.attributes,undirected:e.undirected}}})}function ct(t,e,n){n=e[n];n&&t.push(n.key)}function gt(e,t,n){n=t[n];n&&n.forEach(function(t){return e.push(t.key)})}function ft(t,e,n){var i=t[e];i&&(t=i.source,e=i.target,n(i.key,i.attributes,t.key,e.key,t.attributes,e.attributes,i.undirected))}function pt(t,e,n){e=t[e];e&&e.forEach(function(t){return n(t.key,t.attributes,t.source.key,t.target.key,t.source.attributes,t.target.attributes,t.undirected)})}function mt(t,e,n){var i=t[e];if(i){t=i.source,e=i.target;return n(i.key,i.attributes,t.key,e.key,t.attributes,e.attributes,i.undirected)?i.key:void 0}}function yt(t,e,n){e=t[e];if(e)for(var i,o=e.values();!0!==(i=o.next()).done;)if(n((i=i.value).key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected))return i.key}function vt(t,e){e=t[e];if(e instanceof Set){var n=e.values();return new T(function(){var t=n.next();if(t.done)return t;t=t.value;return{done:!1,value:{edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected}}})}return T.of([e.key,e.attributes,e.source.key,e.target.key,e.source.attributes,e.target.attributes])}R=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function wt(t,e){if(void 0!==e)for(var n in e)t.add(n)}function bt(t,e,n){for(var i in e){var o=e[i];o instanceof Set&&(o=o.values().next().value);var r=o.source,o=o.target,r=r===t?o:r;n(r.key,r.attributes)}}function St(t,e,n,i){for(var o in n){var r=n[o];r instanceof Set&&(r=r.values().next().value);var a=r.source,r=r.target,a=a===e?r:a;t.has(a.key)||(t.add(a.key),i(a.key,a.attributes))}}function xt(t,e,n){for(var i in e){var o=e[i];o instanceof Set&&(o=o.values().next().value);var r=o.source,o=o.target,r=r===t?o:r;if(n(r.key,r.attributes))return r.key}}function Pt(t,e,n,i){for(var o in n){var r=n[o];r instanceof Set&&(r=r.values().next().value);var a=r.source,r=r.target,a=a===e?r:a;if(!t.has(a.key)&&(t.add(a.key),i(a.key,a.attributes)))return a.key}}function kt(n,i){var o=Object.keys(i),r=o.length,a=0;return new T(function(){if(r<=a)return{done:!0};var t=i[o[a++]];t instanceof Set&&(t=t.values().next().value);var e=t.source,t=t.target,e=e===n?t:e;return{done:!1,value:{neighbor:e.key,attributes:e.attributes}}})}function Lt(i,o,r){var a=Object.keys(r),s=a.length,h=0;return new T(function t(){if(s<=h)return{done:!0};var e=r[a[h++]];e instanceof Set&&(e=e.values().next().value);var n=e.source,e=e.target,n=n===o?e:n;return i.has(n.key)?t():(i.add(n.key),{done:!1,value:{neighbor:n.key,attributes:n.attributes}})})}function Mt(t,e,n,i,o){for(var r,a,s,h,u,l,d=i._nodes.values(),c=i.type;!0!==(r=d.next()).done;){var g=!1,f=r.value;if("undirected"!==c)for(a in s=f.out)if(u=(h=s[a]).target,g=!0,l=o(f.key,u.key,f.attributes,u.attributes,h.key,h.attributes,h.undirected),t&&l)return h;if("directed"!==c)for(a in s=f.undirected)if(!(e&&f.key>a)&&((u=(h=s[a]).target).key!==a&&(u=h.source),g=!0,l=o(f.key,u.key,f.attributes,u.attributes,h.key,h.attributes,h.undirected),t&&l))return h;if(n&&!g&&(l=o(f.key,null,f.attributes,null,null,null,null),t&&l))return}}function _t(t,e,n,i,o){for(var r,a,s,h,u,l,d,c,g=i._nodes.values(),f=i.type;!0!==(r=g.next()).done;){var p=!1,m=r.value;if("undirected"!==f)for(a in u=m.out)for(s=u[a].values();!0!==(h=s.next()).done;)if(d=(l=h.value).target,p=!0,c=o(m.key,d.key,m.attributes,d.attributes,l.key,l.attributes,l.undirected),t&&c)return l;if("directed"!==f)for(a in u=m.undirected)if(!(e&&m.key>a))for(s=u[a].values();!0!==(h=s.next()).done;)if((d=(l=h.value).target).key!==a&&(d=l.source),p=!0,c=o(m.key,d.key,m.attributes,d.attributes,l.key,l.attributes,l.undirected),t&&c)return l;if(n&&!p&&(c=o(m.key,null,m.attributes,null,null,null,null),t&&c))return}}function Nt(t,e){t={key:t};return h(e.attributes)||(t.attributes=m({},e.attributes)),t}function At(t,e){t={key:t,source:e.source.key,target:e.target.key};return h(e.attributes)||(t.attributes=m({},e.attributes)),e.undirected&&(t.undirected=!0),t}var Tt,Ct=(Tt=255&Math.floor(256*Math.random()),function(){return Tt++}),Dt=new Set(["directed","undirected","mixed"]),Et=new Set(["domain","_events","_eventsCount","_maxListeners"]),Ft={allowSelfLoops:!0,multi:!1,type:"mixed"};function Ot(t,e,n){var i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function Bt(t,e,n,i,o,r,a,s){if(!i&&"undirected"===t.type)throw new H("Graph.".concat(e,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(i&&"directed"===t.type)throw new H("Graph.".concat(e,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(s&&!y(s))throw new U("Graph.".concat(e,': invalid attributes. Expecting an object but got "').concat(s,'"'));if(r=""+r,a=""+a,s=s||{},!t.allowSelfLoops&&r===a)throw new H("Graph.".concat(e,': source & target are the same ("').concat(r,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var h=t._nodes.get(r),u=t._nodes.get(a);if(!h)throw new q("Graph.".concat(e,': source node "').concat(r,'" not found.'));if(!u)throw new q("Graph.".concat(e,': target node "').concat(a,'" not found.'));var l={key:null,undirected:i,source:r,target:a,attributes:s};if(n)o=t._edgeKeyGenerator();else if(o=""+o,t._edges.has(o))throw new H("Graph.".concat(e,': the "').concat(o,'" edge already exists in the graph.'));if(!t.multi&&(i?void 0!==h.undirected[a]:void 0!==h.out[a]))throw new H("Graph.".concat(e,': an edge linking "').concat(r,'" to "').concat(a,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));s=new Q(i,o,h,u,s);return t._edges.set(o,s),r===a?i?(h.undirectedSelfLoops++,t._undirectedSelfLoopCount++):(h.directedSelfLoops++,t._directedSelfLoopCount++):i?(h.undirectedDegree++,u.undirectedDegree++):(h.outDegree++,u.inDegree++),tt(t,i,s,r,a,h,u),i?t._undirectedSize++:t._directedSize++,l.key=o,t.emit("edgeAdded",l),o}function Gt(t,e,n,i,o,r,a,s,h){if(!i&&"undirected"===t.type)throw new H("Graph.".concat(e,": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead."));if(i&&"directed"===t.type)throw new H("Graph.".concat(e,": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead."));if(s)if(h){if("function"!=typeof s)throw new U("Graph.".concat(e,': invalid updater function. Expecting a function but got "').concat(s,'"'))}else if(!y(s))throw new U("Graph.".concat(e,': invalid attributes. Expecting an object but got "').concat(s,'"'));if(r=""+r,a=""+a,h&&(p=s,s=void 0),!t.allowSelfLoops&&r===a)throw new H("Graph.".concat(e,': source & target are the same ("').concat(r,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var u,l,d=t._nodes.get(r),c=t._nodes.get(a);if(!n&&(u=t._edges.get(o))){if(u.source.key!==r||u.target.key!==a||i&&(u.source.key!==a||u.target.key!==r))throw new H("Graph.".concat(e,': inconsistency detected when attempting to merge the "').concat(o,'" edge with "').concat(r,'" source & "').concat(a,'" target vs. ("').concat(u.source.key,'", "').concat(u.target.key,'").'));l=u}if(l||t.multi||!d||(l=(i?d.undirected:d.out)[a]),l){var g,f=[l.key,!1,!1,!1];return(h?p:s)?(h?(g=l.attributes,l.attributes=p(g),t.emit("edgeAttributesUpdated",{type:"replace",key:l.key,attributes:l.attributes})):(m(l.attributes,s),t.emit("edgeAttributesUpdated",{type:"merge",key:l.key,attributes:l.attributes,data:s})),f):f}s=s||{},h&&p&&(s=p(s));var p={key:null,undirected:i,source:r,target:a,attributes:s};if(n)o=t._edgeKeyGenerator();else if(o=""+o,t._edges.has(o))throw new H("Graph.".concat(e,': the "').concat(o,'" edge already exists in the graph.'));n=!1,e=!1;return d||(d=Ot(t,r,{}),n=!0,r===a&&(c=d,e=!0)),c||(c=Ot(t,a,{}),e=!0),u=new Q(i,o,d,c,s),t._edges.set(o,u),r===a?i?(d.undirectedSelfLoops++,t._undirectedSelfLoopCount++):(d.directedSelfLoops++,t._directedSelfLoopCount++):i?(d.undirectedDegree++,c.undirectedDegree++):(d.outDegree++,c.inDegree++),tt(t,i,u,r,a,d,c),i?t._undirectedSize++:t._directedSize++,p.key=o,t.emit("edgeAdded",p),[o,!0,n,e]}var jt,zt,Rt,It,Vt=function(r){function e(t){var e=r.call(this)||this;if("boolean"!=typeof(t=m({},Ft,t)).multi)throw new U("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(t.multi,'".'));if(!Dt.has(t.type))throw new U('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(t.type,'".'));if("boolean"!=typeof t.allowSelfLoops)throw new U("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(t.allowSelfLoops,'".'));var n="mixed"===t.type?$:"directed"===t.type?J:Z;l(s(e),"NodeDataClass",n);var i=Ct(),o=0;return l(s(e),"_attributes",{}),l(s(e),"_nodes",new Map),l(s(e),"_edges",new Map),l(s(e),"_directedSize",0),l(s(e),"_undirectedSize",0),l(s(e),"_directedSelfLoopCount",0),l(s(e),"_undirectedSelfLoopCount",0),l(s(e),"_edgeKeyGenerator",function(){for(var t;t="geid_"+i+"_"+o++,e._edges.has(t););return t}),l(s(e),"_options",t),Et.forEach(function(t){return l(s(e),t,e[t])}),u(s(e),"order",function(){return e._nodes.size}),u(s(e),"size",function(){return e._edges.size}),u(s(e),"directedSize",function(){return e._directedSize}),u(s(e),"undirectedSize",function(){return e._undirectedSize}),u(s(e),"selfLoopCount",function(){return e._directedSelfLoopCount+e._undirectedSelfLoopCount}),u(s(e),"directedSelfLoopCount",function(){return e._directedSelfLoopCount}),u(s(e),"undirectedSelfLoopCount",function(){return e._undirectedSelfLoopCount}),u(s(e),"multi",e._options.multi),u(s(e),"type",e._options.type),u(s(e),"allowSelfLoops",e._options.allowSelfLoops),u(s(e),"implementation",function(){return"graphology"}),e}n(e,r);var t=e.prototype;return t._resetInstanceCounters=function(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0},t.hasNode=function(t){return this._nodes.has(""+t)},t.hasDirectedEdge=function(t,e){if("undirected"===this.type)return!1;if(1===arguments.length){var n=""+t,n=this._edges.get(n);return!!n&&!n.undirected}if(2!==arguments.length)throw new U("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."));t=""+t,e=""+e;t=this._nodes.get(t);if(!t)return!1;e=t.out[e];return!(!e||this.multi&&!e.size)},t.hasUndirectedEdge=function(t,e){if("directed"===this.type)return!1;if(1===arguments.length){var n=""+t,n=this._edges.get(n);return!!n&&n.undirected}if(2!==arguments.length)throw new U("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."));t=""+t,e=""+e;t=this._nodes.get(t);if(!t)return!1;e=t.undirected[e];return!(!e||this.multi&&!e.size)},t.hasEdge=function(t,e){if(1===arguments.length){var n=""+t;return this._edges.has(n)}if(2!==arguments.length)throw new U("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."));t=""+t,e=""+e;n=this._nodes.get(t);if(!n)return!1;t=void 0!==n.out&&n.out[e];return!(!(t=t||void 0!==n.undirected&&n.undirected[e])||this.multi&&!t.size)},t.directedEdge=function(t,e){if("undirected"!==this.type){if(t=""+t,e=""+e,this.multi)throw new H("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var n=this._nodes.get(t);if(!n)throw new q('Graph.directedEdge: could not find the "'.concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new q('Graph.directedEdge: could not find the "'.concat(e,'" target node in the graph.'));e=n.out&&n.out[e]||void 0;return e?e.key:void 0}},t.undirectedEdge=function(t,e){if("directed"!==this.type){if(t=""+t,e=""+e,this.multi)throw new H("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var n=this._nodes.get(t);if(!n)throw new q('Graph.undirectedEdge: could not find the "'.concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new q('Graph.undirectedEdge: could not find the "'.concat(e,'" target node in the graph.'));e=n.undirected&&n.undirected[e]||void 0;return e?e.key:void 0}},t.edge=function(t,e){if(this.multi)throw new H("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new q('Graph.edge: could not find the "'.concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new q('Graph.edge: could not find the "'.concat(e,'" target node in the graph.'));e=n.out&&n.out[e]||n.undirected&&n.undirected[e]||void 0;if(e)return e.key},t.areDirectedNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new q('Graph.areDirectedNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&(e in n.in||e in n.out)},t.areOutNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new q('Graph.areOutNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&e in n.out},t.areInNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new q('Graph.areInNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&e in n.in},t.areUndirectedNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new q('Graph.areUndirectedNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"directed"!==this.type&&e in n.undirected},t.areNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new q('Graph.areNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&(e in n.in||e in n.out)||"directed"!==this.type&&e in n.undirected},t.areInboundNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new q('Graph.areInboundNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&e in n.in||"directed"!==this.type&&e in n.undirected},t.areOutboundNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new q('Graph.areOutboundNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&e in n.out||"directed"!==this.type&&e in n.undirected},t.inDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new q('Graph.inDegree: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.inDegree+e.directedSelfLoops},t.outDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new q('Graph.outDegree: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.outDegree+e.directedSelfLoops},t.directedDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new q('Graph.directedDegree: could not find the "'.concat(t,'" node in the graph.'));if("undirected"===this.type)return 0;t=e.directedSelfLoops;return e.inDegree+t+(e.outDegree+t)},t.undirectedDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new q('Graph.undirectedDegree: could not find the "'.concat(t,'" node in the graph.'));if("directed"===this.type)return 0;t=e.undirectedSelfLoops;return e.undirectedDegree+2*t},t.degree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new q('Graph.degree: could not find the "'.concat(t,'" node in the graph.'));t=0;return"directed"!==this.type&&(t+=e.undirectedDegree+2*e.undirectedSelfLoops),"undirected"!==this.type&&(t+=e.inDegree+e.outDegree+2*e.directedSelfLoops),t},t.inDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new q('Graph.inDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.inDegree},t.outDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new q('Graph.outDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.outDegree},t.directedDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new q('Graph.directedDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.inDegree+e.outDegree},t.undirectedDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new q('Graph.undirectedDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));return"directed"===this.type?0:e.undirectedDegree},t.degreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new q('Graph.degreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));t=0;return"directed"!==this.type&&(t+=e.undirectedDegree),"undirected"!==this.type&&(t+=e.inDegree+e.outDegree),t},t.source=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new q('Graph.source: could not find the "'.concat(t,'" edge in the graph.'));return e.source.key},t.target=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new q('Graph.target: could not find the "'.concat(t,'" edge in the graph.'));return e.target.key},t.extremities=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new q('Graph.extremities: could not find the "'.concat(t,'" edge in the graph.'));return[e.source.key,e.target.key]},t.opposite=function(t,e){t=""+t,e=""+e;var n=this._edges.get(e);if(!n)throw new q('Graph.opposite: could not find the "'.concat(e,'" edge in the graph.'));var i=n.source.key,n=n.target.key;if(t===i)return n;if(t===n)return i;throw new q('Graph.opposite: the "'.concat(t,'" node is not attached to the "').concat(e,'" edge (').concat(i,", ").concat(n,")."))},t.hasExtremity=function(t,e){t=""+t,e=""+e;var n=this._edges.get(t);if(!n)throw new q('Graph.hasExtremity: could not find the "'.concat(t,'" edge in the graph.'));return n.source.key===e||n.target.key===e},t.isUndirected=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new q('Graph.isUndirected: could not find the "'.concat(t,'" edge in the graph.'));return e.undirected},t.isDirected=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new q('Graph.isDirected: could not find the "'.concat(t,'" edge in the graph.'));return!e.undirected},t.isSelfLoop=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new q('Graph.isSelfLoop: could not find the "'.concat(t,'" edge in the graph.'));return e.source===e.target},t.addNode=function(t,e){return function(t,e,n){if(n&&!y(n))throw new U('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(n,'"'));if(e=""+e,n=n||{},t._nodes.has(e))throw new H('Graph.addNode: the "'.concat(e,'" node already exist in the graph.'));var i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}(this,t,e).key},t.mergeNode=function(t,e){if(e&&!y(e))throw new U('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(e,'"'));t=""+t,e=e||{};var n=this._nodes.get(t);return n?(e&&(m(n.attributes,e),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:n.attributes,data:e})),[t,!1]):(n=new this.NodeDataClass(t,e),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:e}),[t,!0])},t.updateNode=function(t,e){if(e&&"function"!=typeof e)throw new U('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(e,'"'));t=""+t;var n,i=this._nodes.get(t);if(i)return e&&(n=i.attributes,i.attributes=e(n),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:i.attributes})),[t,!1];e=e?e({}):{},i=new this.NodeDataClass(t,e);return this._nodes.set(t,i),this.emit("nodeAdded",{key:t,attributes:e}),[t,!0]},t.dropNode=function(t){var e=this;t=""+t;var n=this._nodes.get(t);if(!n)throw new q('Graph.dropNode: could not find the "'.concat(t,'" node in the graph.'));this.forEachEdge(t,function(t){e.dropEdge(t)}),this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:n.attributes})},t.dropEdge=function(t){if(1<arguments.length){var e=""+arguments[0],n=""+arguments[1];if(!(h=g(this,e,n,this.type)))throw new q('Graph.dropEdge: could not find the "'.concat(e,'" -> "').concat(n,'" edge in the graph.'))}else if(t=""+t,!(h=this._edges.get(t)))throw new q('Graph.dropEdge: could not find the "'.concat(t,'" edge in the graph.'));this._edges.delete(h.key);var i,o,r,a,s,h,u=h.source,l=h.target,d=h.attributes,c=h.undirected;return u===l?c?(u.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(u.directedSelfLoops--,this._directedSelfLoopCount--):c?(u.undirectedDegree--,l.undirectedDegree--):(u.outDegree--,l.inDegree--),o=c,r=h,a=(i=this).multi,s=r.source,e=r.target,n=s.key,h=e.key,i=s[o?"undirected":"out"],s=o?"undirected":"in",h in i&&(a?1===(o=i[h]).size?(delete i[h],delete e[s][n]):o.delete(r):delete i[h]),a||delete e[s][n],c?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:t,attributes:d,source:u.key,target:l.key,undirected:c}),this},t.clear=function(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")},t.clearEdges=function(){!function(t){for(var e,n=t._nodes.values();!0!==(e=n.next()).done;)e.value.clear()}(this),this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")},t.getAttribute=function(t){return this._attributes[t]},t.getAttributes=function(){return this._attributes},t.hasAttribute=function(t){return this._attributes.hasOwnProperty(t)},t.setAttribute=function(t,e){return this._attributes[t]=e,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this},t.updateAttribute=function(t,e){if("function"!=typeof e)throw new U("Graph.updateAttribute: updater should be a function.");var n=this._attributes[t];return this._attributes[t]=e(n),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this},t.removeAttribute=function(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this},t.replaceAttributes=function(t){if(!y(t))throw new U("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},t.mergeAttributes=function(t){if(!y(t))throw new U("Graph.mergeAttributes: provided attributes are not a plain object.");return m(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this},t.updateAttributes=function(t){if("function"!=typeof t)throw new U("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this},t.updateEachNodeAttributes=function(t,e){if("function"!=typeof t)throw new U("Graph.updateEachNodeAttributes: expecting an updater function.");if(e&&!d(e))throw new U("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var n,i=this._nodes.values();!0!==(n=i.next()).done;)(n=n.value).attributes=t(n.key,n.attributes);this.emit("eachNodeAttributesUpdated",{hints:e||null})},t.updateEachEdgeAttributes=function(t,e){if("function"!=typeof t)throw new U("Graph.updateEachEdgeAttributes: expecting an updater function.");if(e&&!d(e))throw new U("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var n,i,o,r=this._edges.values();!0!==(o=r.next()).done;)i=(n=o.value).source,o=n.target,n.attributes=t(n.key,n.attributes,i.key,o.key,i.attributes,o.attributes,n.undirected);this.emit("eachEdgeAttributesUpdated",{hints:e||null})},t.forEachAdjacencyEntry=function(t){if("function"!=typeof t)throw new U("Graph.forEachAdjacencyEntry: expecting a callback.");(this.multi?_t:Mt)(!1,!1,!1,this,t)},t.forEachAdjacencyEntryWithOrphans=function(t){if("function"!=typeof t)throw new U("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");(this.multi?_t:Mt)(!1,!1,!0,this,t)},t.forEachAssymetricAdjacencyEntry=function(t){if("function"!=typeof t)throw new U("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");(this.multi?_t:Mt)(!1,!0,!1,this,t)},t.forEachAssymetricAdjacencyEntryWithOrphans=function(t){if("function"!=typeof t)throw new U("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");(this.multi?_t:Mt)(!1,!0,!0,this,t)},t.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):D(this._nodes.keys(),this._nodes.size)},t.forEachNode=function(t){if("function"!=typeof t)throw new U("Graph.forEachNode: expecting a callback.");for(var e,n=this._nodes.values();!0!==(e=n.next()).done;)t((e=e.value).key,e.attributes)},t.findNode=function(t){if("function"!=typeof t)throw new U("Graph.findNode: expecting a callback.");for(var e,n=this._nodes.values();!0!==(e=n.next()).done;)if(t((e=e.value).key,e.attributes))return e.key},t.mapNodes=function(t){if("function"!=typeof t)throw new U("Graph.mapNode: expecting a callback.");for(var e,n=this._nodes.values(),i=new Array(this.order),o=0;!0!==(e=n.next()).done;)e=e.value,i[o++]=t(e.key,e.attributes);return i},t.someNode=function(t){if("function"!=typeof t)throw new U("Graph.someNode: expecting a callback.");for(var e,n=this._nodes.values();!0!==(e=n.next()).done;)if(t((e=e.value).key,e.attributes))return!0;return!1},t.everyNode=function(t){if("function"!=typeof t)throw new U("Graph.everyNode: expecting a callback.");for(var e,n=this._nodes.values();!0!==(e=n.next()).done;)if(!t((e=e.value).key,e.attributes))return!1;return!0},t.filterNodes=function(t){if("function"!=typeof t)throw new U("Graph.filterNodes: expecting a callback.");for(var e,n=this._nodes.values(),i=[];!0!==(e=n.next()).done;)t((e=e.value).key,e.attributes)&&i.push(e.key);return i},t.reduceNodes=function(t,e){if("function"!=typeof t)throw new U("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new U("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");for(var n,i=e,o=this._nodes.values();!0!==(n=o.next()).done;)i=t(i,(n=n.value).key,n.attributes);return i},t.nodeEntries=function(){var e=this._nodes.values();return new T(function(){var t=e.next();if(t.done)return t;t=t.value;return{value:{node:t.key,attributes:t.attributes},done:!1}})},t.exportNode=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new q('Graph.exportNode: could not find the "'.concat(t,'" node in the graph.'));return Nt(t,e)},t.exportEdge=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new q('Graph.exportEdge: could not find the "'.concat(t,'" edge in the graph.'));return At(t,e)},t.export=function(){var n=new Array(this._nodes.size),i=0;this._nodes.forEach(function(t,e){n[i++]=Nt(e,t)});var o=new Array(this._edges.size),i=0;return this._edges.forEach(function(t,e){o[i++]=At(e,t)}),{attributes:this.getAttributes(),nodes:n,edges:o,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},t.importNode=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=y(n=t)?"key"in n?!("attributes"in n)||y(n.attributes)&&null!==n.attributes?null:"invalid-attributes":"no-key":"not-object";if(n){if("not-object"===n)throw new U('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===n)throw new U("Graph.importNode: no key provided.");if("invalid-attributes"===n)throw new U("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var n=t.key,t=t.attributes,t=void 0===t?{}:t;return e?this.mergeNode(n,t):this.addNode(n,t),this},t.importEdge=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=y(r=t)?"source"in r?"target"in r?!("attributes"in r)||y(r.attributes)&&null!==r.attributes?"undirected"in r&&"boolean"!=typeof r.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object";if(n){if("not-object"===n)throw new U('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===n)throw new U("Graph.importEdge: missing souce.");if("no-target"===n)throw new U("Graph.importEdge: missing target.");if("invalid-attributes"===n)throw new U("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===n)throw new U("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var i=t.source,o=t.target,r=t.attributes,n=void 0===r?{}:r,r=t.undirected,r=void 0!==r&&r;return"key"in t?(e?r?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:r?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,t.key,i,o,n):(e?r?this.mergeUndirectedEdge:this.mergeDirectedEdge:r?this.addUndirectedEdge:this.addDirectedEdge).call(this,i,o,n),this},t.import=function(t){var e,n,i,o,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(null!==(o=t)&&"object"===a(o)&&"function"==typeof o.addUndirectedEdgeWithKey&&"function"==typeof o.dropNode)return this.import(t.export(),r),this;if(!y(t))throw new U("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!y(t.attributes))throw new U("Graph.import: invalid attributes. Expecting a plain object.");r?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}if(t.nodes){if(i=t.nodes,!Array.isArray(i))throw new U("Graph.import: invalid nodes. Expecting an array.");for(e=0,n=i.length;e<n;e++)this.importNode(i[e],r)}if(t.edges){if(i=t.edges,!Array.isArray(i))throw new U("Graph.import: invalid edges. Expecting an array.");for(e=0,n=i.length;e<n;e++)this.importEdge(i[e],r)}return this},t.nullCopy=function(t){t=new e(m({},this._options,t));return t.replaceAttributes(m({},this.getAttributes())),t},t.emptyCopy=function(t){var i=this.nullCopy(t);return this._nodes.forEach(function(t,e){var n=m({},t.attributes);t=new i.NodeDataClass(e,n),i._nodes.set(e,t)}),i},t.copy=function(){for(var t,e=this.emptyCopy(),n=this._edges.values();!0!==(t=n.next()).done;)Bt(e,"copy",!1,(t=t.value).undirected,t.key,t.source.key,t.target.key,m({},t.attributes));return e},t.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(t){return t.upgradeToMixed()}),this._options.type="mixed",u(this,"type",this._options.type),l(this,"NodeDataClass",$)),this},t.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,u(this,"multi",!0),(a=this)._nodes.forEach(function(t,e){if(t.out)for(var n in t.out){var i=new Set;i.add(t.out[n]),t.out[n]=i,a._nodes.get(n).in[e]=i}if(t.undirected)for(var o in t.undirected){var r;e<o||((r=new Set).add(t.undirected[o]),t.undirected[o]=r,a._nodes.get(o).undirected[e]=r)}})),this;var a},t.toJSON=function(){return this.export()},t.toString=function(){return"[object Graph]"},t.inspect=function(){var s=this,n={};this._nodes.forEach(function(t,e){n[e]=t.attributes});var h={},u={};this._edges.forEach(function(t,e){var n,i=t.undirected?"--":"->",o="",r=t.source.key,a=t.target.key;t.undirected&&a<r&&(n=r,r=a,a=n);a="(".concat(r,")").concat(i,"(").concat(a,")");e.startsWith("geid_")?s.multi&&(void 0===u[a]?u[a]=0:u[a]++,o+="".concat(u[a],". ")):o+="[".concat(e,"]: "),h[o+=a]=t.attributes});var t,e={};for(t in this)this.hasOwnProperty(t)&&!Et.has(t)&&"function"!=typeof this[t]&&"symbol"!==a(t)&&(e[t]=this[t]);return e.attributes=this._attributes,e.nodes=n,e.edges=h,l(e,"constructor",this.constructor),e},e}(t.exports.EventEmitter);"undefined"!=typeof Symbol&&(Vt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Vt.prototype.inspect),[{name:function(t){return"".concat(t,"Edge")},generateKey:!0},{name:function(t){return"".concat(t,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(t){return"".concat(t,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(t){return"".concat(t,"EdgeWithKey")}},{name:function(t){return"".concat(t,"DirectedEdgeWithKey")},type:"directed"},{name:function(t){return"".concat(t,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(s){["add","merge","update"].forEach(function(o){var r=s.name(o),a="add"===o?Bt:Gt;s.generateKey?Vt.prototype[r]=function(t,e,n){return a(this,r,!0,"undirected"===(s.type||this.type),null,t,e,n,"update"===o)}:Vt.prototype[r]=function(t,e,n,i){return a(this,r,!1,"undirected"===(s.type||this.type),t,e,n,i,"update"===o)}})}),It=Vt,c.forEach(function(t){var e=t.name,t=t.attacher;t(It,e("Node"),0),t(It,e("Source"),1),t(It,e("Target"),2),t(It,e("Opposite"),3)}),Rt=Vt,C.forEach(function(t){var e=t.name,t=t.attacher;t(Rt,e("Edge"),"mixed"),t(Rt,e("DirectedEdge"),"directed"),t(Rt,e("UndirectedEdge"),"undirected")}),zt=Vt,V.forEach(function(s){var t,e,a,h,u,l,d,c;l=s.name,d=s.type,c=s.direction,zt.prototype[l]=function(t,e){if("mixed"!==d&&"mixed"!==this.type&&d!==this.type)return[];if(!arguments.length)return function(t,e){if(0===t.size)return[];if("mixed"===e||e===t.type)return"function"==typeof Array.from?Array.from(t._edges.keys()):D(t._edges.keys(),t._edges.size);for(var n,i="undirected"===e?t.undirectedSize:t.directedSize,o=new Array(i),r="undirected"===e,a=t._edges.values(),s=0;!0!==(n=a.next()).done;)(n=n.value).undirected===r&&(o[s++]=n.key);return o}(this,d);if(1===arguments.length){t=""+t;var n=this._nodes.get(t);if(void 0===n)throw new q("Graph.".concat(l,': could not find the "').concat(t,'" node in the graph.'));return o=this.multi,a="mixed"===d?this.type:d,i=c,r=n,n=[],o=o?at:rt,"undirected"!==a&&("out"!==i&&o(n,r.in),"in"!==i&&o(n,r.out),!i&&0<r.directedSelfLoops&&n.splice(n.lastIndexOf(r.key),1)),"directed"!==a&&o(n,r.undirected),n}var i,o,r;if(2!==arguments.length)throw new U("Graph.".concat(l,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."));t=""+t,e=""+e;var a=this._nodes.get(t);if(!a)throw new q("Graph.".concat(l,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new q("Graph.".concat(l,':  could not find the "').concat(e,'" target node in the graph.'));return o=d,r=this.multi,n=c,t=a,a=e,e=r?gt:ct,r=[],"undirected"!==o&&(void 0!==t.in&&"out"!==n&&e(r,t.in,a),void 0!==t.out&&"in"!==n&&e(r,t.out,a),!n&&0<t.directedSelfLoops&&r.splice(r.lastIndexOf(t.key),1)),"directed"!==o&&void 0!==t.undirected&&e(r,t.undirected,a),r},function(t){var e=s.name,l=s.type,h=s.direction,d="forEach"+e[0].toUpperCase()+e.slice(1,-1);t.prototype[d]=function(t,e,n){if("mixed"===l||"mixed"===this.type||l===this.type){if(1===arguments.length)return function(t,e,n){if(0!==t.size)for(var i="mixed"!==e&&e!==t.type,o="undirected"===e,r=t._edges.values();!0!==(u=r.next()).done;){var a,s,h,u,l=u.value;i&&l.undirected!==o||(a=l.key,s=l.attributes,h=l.source,u=l.target,n(a,s,h.key,u.key,h.attributes,u.attributes,l.undirected))}}(this,l,n=t);if(2===arguments.length){t=""+t,n=e;var i=this._nodes.get(t);if(void 0===i)throw new q("Graph.".concat(d,': could not find the "').concat(t,'" node in the graph.'));return o=this.multi,r="mixed"===l?this.type:l,a=h,s=i,i=n,o=o?ht:st,"undirected"!==r&&("out"!==a&&o(s.in,i),"in"!==a&&o(s.out,i,a?null:s.key)),void("directed"!==r&&o(s.undirected,i))}if(3!==arguments.length)throw new U("Graph.".concat(d,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."));t=""+t,e=""+e;o=this._nodes.get(t);if(!o)throw new q("Graph.".concat(d,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new q("Graph.".concat(d,':  could not find the "').concat(e,'" target node in the graph.'));return s=l,i=this.multi,t=h,o=o,e=e,n=n,i=i?pt:ft,"undirected"!==s&&(void 0!==o.in&&"out"!==t&&i(o.in,e,n),o.key!==e&&void 0!==o.out&&"in"!==t&&i(o.out,e,n)),void("directed"!==s&&void 0!==o.undirected&&i(o.undirected,e,n))}var o,r,a,s};var n="map"+e[0].toUpperCase()+e.slice(1);t.prototype[n]=function(){var s,t,h,e=Array.prototype.slice.call(arguments),u=e.pop();return 0===e.length?(t=0,"directed"!==l&&(t+=this.undirectedSize),"undirected"!==l&&(t+=this.directedSize),s=new Array(t),h=0,e.push(function(t,e,n,i,o,r,a){s[h++]=u(t,e,n,i,o,r,a)})):(s=[],e.push(function(t,e,n,i,o,r,a){s.push(u(t,e,n,i,o,r,a))})),this[d].apply(this,e),s},n="filter"+e[0].toUpperCase()+e.slice(1),t.prototype[n]=function(){var t=Array.prototype.slice.call(arguments),s=t.pop(),h=[];return t.push(function(t,e,n,i,o,r,a){s(t,e,n,i,o,r,a)&&h.push(t)}),this[d].apply(this,t),h};var i="reduce"+e[0].toUpperCase()+e.slice(1);t.prototype[i]=function(){var s,t,e=Array.prototype.slice.call(arguments);if(e.length<2||4<e.length)throw new U("Graph.".concat(i,": invalid number of arguments (expecting 2, 3 or 4 and got ").concat(e.length,")."));if("function"==typeof e[e.length-1]&&"function"!=typeof e[e.length-2])throw new U("Graph.".concat(i,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));2===e.length?(s=e[0],t=e[1],e=[]):3===e.length?(s=e[1],t=e[2],e=[e[0]]):4===e.length&&(s=e[2],t=e[3],e=[e[0],e[1]]);var h=t;return e.push(function(t,e,n,i,o,r,a){h=s(h,t,e,n,i,o,r,a)}),this[d].apply(this,e),h}}(zt),function(t){var e=s.name,o=s.type,r=s.direction,a="find"+e[0].toUpperCase()+e.slice(1,-1);t.prototype[a]=function(t,e,n){if("mixed"!==o&&"mixed"!==this.type&&o!==this.type)return!1;if(1===arguments.length)return function(t,e,n){if(0!==t.size)for(var i,o="mixed"!==e&&e!==t.type,r="undirected"===e,a=t._edges.values();!0!==(l=a.next()).done;)if(i=l.value,!o||i.undirected===r){var s=i.key,h=i.attributes,u=i.source,l=i.target;if(n(s,h,u.key,l.key,u.attributes,l.attributes,i.undirected))return s}}(this,o,n=t);if(2===arguments.length){t=""+t,n=e;var i=this._nodes.get(t);if(void 0===i)throw new q("Graph.".concat(a,': could not find the "').concat(t,'" node in the graph.'));return function(t,e,n,i,o){var r,t=t?lt:ut;if("undirected"!==e){if("out"!==n&&(r=t(i.in,o)))return r;if("in"!==n&&(r=t(i.out,o,n?null:i.key)))return r}if("directed"!==e&&(r=t(i.undirected,o)))return r}(this.multi,"mixed"===o?this.type:o,r,i,n)}if(3!==arguments.length)throw new U("Graph.".concat(a,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."));t=""+t,e=""+e;i=this._nodes.get(t);if(!i)throw new q("Graph.".concat(a,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new q("Graph.".concat(a,':  could not find the "').concat(e,'" target node in the graph.'));return function(t,e,n,i,o,r){var a,e=e?yt:mt;if("undirected"!==t){if(void 0!==i.in&&"out"!==n&&(a=e(i.in,o,r)))return a;if(i.key!==o&&void 0!==i.out&&"in"!==n&&(a=e(i.out,o,r,n?null:i.key)))return a}if("directed"!==t&&void 0!==i.undirected&&(a=e(i.undirected,o,r)))return a}(o,this.multi,r,i,e,n)};var n="some"+e[0].toUpperCase()+e.slice(1,-1);t.prototype[n]=function(){var t=Array.prototype.slice.call(arguments),s=t.pop();return t.push(function(t,e,n,i,o,r,a){return s(t,e,n,i,o,r,a)}),!!this[a].apply(this,t)},e="every"+e[0].toUpperCase()+e.slice(1,-1),t.prototype[e]=function(){var t=Array.prototype.slice.call(arguments),s=t.pop();return t.push(function(t,e,n,i,o,r,a){return!s(t,e,n,i,o,r,a)}),!this[a].apply(this,t)}}(zt),t=zt,e=s.name,a=s.type,h=s.direction,u=e.slice(0,-1)+"Entries",t.prototype[u]=function(t,e){if("mixed"!==a&&"mixed"!==this.type&&a!==this.type)return T.empty();if(!arguments.length)return function(t,e){if(0===t.size)return T.empty();var n="mixed"!==e&&e!==t.type,i="undirected"===e,o=t._edges.values();return new T(function(){for(var t,e;;){if((t=o.next()).done)return t;if(e=t.value,!n||e.undirected===i)break}return{value:{edge:e.key,attributes:e.attributes,source:e.source.key,target:e.target.key,sourceAttributes:e.source.attributes,targetAttributes:e.target.attributes,undirected:e.undirected},done:!1}})}(this,a);if(1===arguments.length){t=""+t;var n=this._nodes.get(t);if(!n)throw new q("Graph.".concat(u,': could not find the "').concat(t,'" node in the graph.'));return r=a,i=h,o=n,n=T.empty(),"undirected"!==r&&("out"!==i&&void 0!==o.in&&(n=nt(n,dt(o.in))),"in"!==i&&void 0!==o.out&&(n=nt(n,dt(o.out,i?null:o.key)))),"directed"!==r&&void 0!==o.undirected&&(n=nt(n,dt(o.undirected))),n}var i,o;if(2!==arguments.length)throw new U("Graph.".concat(u,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."));t=""+t,e=""+e;var r=this._nodes.get(t);if(!r)throw new q("Graph.".concat(u,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new q("Graph.".concat(u,':  could not find the "').concat(e,'" target node in the graph.'));return o=a,n=h,t=r,r=e,e=T.empty(),"undirected"!==o&&(void 0!==t.in&&"out"!==n&&r in t.in&&(e=nt(e,vt(t.in,r))),void 0!==t.out&&"in"!==n&&r in t.out&&(e=nt(e,vt(t.out,r)))),"directed"!==o&&void 0!==t.undirected&&r in t.undirected&&(e=nt(e,vt(t.undirected,r))),e}}),jt=Vt,R.forEach(function(s){var t,i,o,r,e,n,a,h,u,l,d,c;l=s.name,d=s.type,c=s.direction,jt.prototype[l]=function(t){if("mixed"!==d&&"mixed"!==this.type&&d!==this.type)return[];t=""+t;var e=this._nodes.get(t);if(void 0===e)throw new q("Graph.".concat(l,': could not find the "').concat(t,'" node in the graph.'));return function(t,e,n){if("mixed"!==t){if("undirected"===t)return Object.keys(n.undirected);if("string"==typeof e)return Object.keys(n[e])}var i=new Set;return"undirected"!==t&&("out"!==e&&wt(i,n.in),"in"!==e&&wt(i,n.out)),"directed"!==t&&wt(i,n.undirected),D(i.values(),i.size)}("mixed"===d?this.type:d,c,e)},function(t){var e=s.name,i=s.type,o=s.direction,r="forEach"+e[0].toUpperCase()+e.slice(1,-1);t.prototype[r]=function(t,e){if("mixed"===i||"mixed"===this.type||i===this.type){t=""+t;var n=this._nodes.get(t);if(void 0===n)throw new q("Graph.".concat(r,': could not find the "').concat(t,'" node in the graph.'));!function(t,e,n,i){if("mixed"!==t){if("undirected"===t)return bt(n,n.undirected,i),0;if("string"==typeof e)return bt(n,n[e],i),0}var o=new Set;"undirected"!==t&&("out"!==e&&St(o,n,n.in,i),"in"!==e&&St(o,n,n.out,i)),"directed"!==t&&St(o,n,n.undirected,i)}("mixed"===i?this.type:i,o,n,e)}};var n="map"+e[0].toUpperCase()+e.slice(1);t.prototype[n]=function(t,n){var i=[];return this[r](t,function(t,e){i.push(n(t,e))}),i},n="filter"+e[0].toUpperCase()+e.slice(1),t.prototype[n]=function(t,n){var i=[];return this[r](t,function(t,e){n(t,e)&&i.push(t)}),i};var a="reduce"+e[0].toUpperCase()+e.slice(1);t.prototype[a]=function(t,n,e){if(arguments.length<3)throw new U("Graph.".concat(a,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));var i=e;return this[r](t,function(t,e){i=n(i,t,e)}),i}}(jt),e=jt,t=s.name,i=s.type,o=s.direction,n=t[0].toUpperCase()+t.slice(1,-1),r="find"+n,e.prototype[r]=function(t,e){if("mixed"===i||"mixed"===this.type||i===this.type){t=""+t;var n=this._nodes.get(t);if(void 0===n)throw new q("Graph.".concat(r,': could not find the "').concat(t,'" node in the graph.'));return function(t,e,n,i){if("mixed"!==t){if("undirected"===t)return xt(n,n.undirected,i);if("string"==typeof e)return xt(n,n[e],i)}var o,r=new Set;if("undirected"!==t){if("out"!==e&&(o=Pt(r,n,n.in,i)))return o;if("in"!==e&&(o=Pt(r,n,n.out,i)))return o}if("directed"!==t&&(o=Pt(r,n,n.undirected,i)))return o}("mixed"===i?this.type:i,o,n,e)}},t="some"+n,e.prototype[t]=function(t,e){return!!this[r](t,e)},n="every"+n,e.prototype[n]=function(t,n){return!this[r](t,function(t,e){return!n(t,e)})},e=jt,n=s.name,a=s.type,h=s.direction,u=n.slice(0,-1)+"Entries",e.prototype[u]=function(t){if("mixed"!==a&&"mixed"!==this.type&&a!==this.type)return T.empty();t=""+t;var e=this._nodes.get(t);if(void 0===e)throw new q("Graph.".concat(u,': could not find the "').concat(t,'" node in the graph.'));return function(t,e,n){if("mixed"!==t){if("undirected"===t)return kt(n,n.undirected);if("string"==typeof e)return kt(n,n[e])}var i=T.empty(),o=new Set;return"undirected"!==t&&("out"!==e&&(i=nt(i,Lt(o,n,n.in))),"in"!==e&&(i=nt(i,Lt(o,n,n.out)))),"directed"!==t&&(i=nt(i,Lt(o,n,n.undirected))),i}("mixed"===a?this.type:a,h,e)}});var Ut,qt,Ht,Yt,Kt,t=(n(Zt,Kt=Vt),Zt),c=(n(Jt,Yt=Vt),Jt),C=(n($t,Ht=Vt),$t),V=(n(Wt,qt=Vt),Wt),R=(n(Xt,Ut=Vt),Xt);function Xt(t){t=m({type:"undirected",multi:!0},t);if("multi"in t&&!0!==t.multi)throw new U("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==t.type)throw new U('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');return Ut.call(this,t)||this}function Wt(t){t=m({type:"directed",multi:!0},t);if("multi"in t&&!0!==t.multi)throw new U("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==t.type)throw new U('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');return qt.call(this,t)||this}function $t(t){t=m({multi:!0},t);if("multi"in t&&!0!==t.multi)throw new U("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return Ht.call(this,t)||this}function Jt(t){t=m({type:"undirected"},t);if("multi"in t&&!1!==t.multi)throw new U("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==t.type)throw new U('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');return Yt.call(this,t)||this}function Zt(t){t=m({type:"directed"},t);if("multi"in t&&!1!==t.multi)throw new U("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==t.type)throw new U('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');return Kt.call(this,t)||this}function Qt(n){n.from=function(t,e){e=m({},t.options,e),e=new n(e);return e.import(t),e}}return Qt(Vt),Qt(t),Qt(c),Qt(C),Qt(V),Qt(R),(Vt.Graph=Vt).DirectedGraph=t,Vt.UndirectedGraph=c,Vt.MultiGraph=C,Vt.MultiDirectedGraph=V,Vt.MultiUndirectedGraph=R,Vt.InvalidArgumentsGraphError=U,Vt.NotFoundGraphError=q,Vt.UsageGraphError=H,Vt}()},973:function(t,e,n){n.r(e),n.d(e,{default:function(){return i}});var i="precision mediump float;\r\n\r\nvarying vec4 v_color;\r\n\r\nvoid main(void) {\r\n  gl_FragColor = v_color;\r\n}\r\n"},912:function(t,e,n){n.r(e),n.d(e,{default:function(){return i}});var i="attribute vec2 a_position;\r\nattribute vec2 a_normal;\r\nattribute float a_thickness;\r\nattribute float a_radius;\r\nattribute vec4 a_color;\r\nattribute vec3 a_barycentric;\r\n\r\nuniform mat3 u_matrix;\r\nuniform float u_scale;\r\nuniform float u_cameraRatio;\r\nuniform float u_viewportRatio;\r\nuniform float u_thicknessRatio;\r\n\r\nvarying vec4 v_color;\r\n\r\nconst float arrowHeadLengthThicknessRatio = 2.5;\r\nconst float arrowHeadWidthLengthRatio = 0.66;\r\nconst float minThickness = 0.8;\r\n// const float minThickness = 2.0;\r\nconst float bias = 255.0 / 254.0;\r\n\r\nvoid main() {\r\n  \r\n  // Computing thickness in screen space:\r\n  float thickness = a_thickness * u_thicknessRatio * u_scale * u_viewportRatio / 2.0;\r\n  // float thickness = a_thickness * u_thicknessRatio * u_scale * u_viewportRatio / 2.0;\r\n\r\n  thickness = max(thickness, minThickness * u_viewportRatio);\r\n\r\n  float nodeRadius = a_radius * u_thicknessRatio * u_viewportRatio * u_cameraRatio;\r\n  float arrowHeadLength = thickness * 2.0 * arrowHeadLengthThicknessRatio * u_cameraRatio;\r\n  float arrowHeadHalfWidth = arrowHeadWidthLengthRatio * arrowHeadLength / 2.0;\r\n\r\n  float da = a_barycentric.x;\r\n  float db = a_barycentric.y;\r\n  float dc = a_barycentric.z;\r\n\r\n  vec2 delta = vec2(\r\n      da * ((nodeRadius) * a_normal.y)\r\n    + db * ((nodeRadius + arrowHeadLength) * a_normal.y + arrowHeadHalfWidth * a_normal.x)\r\n    + dc * ((nodeRadius + arrowHeadLength) * a_normal.y - arrowHeadHalfWidth * a_normal.x),\r\n\r\n      da * (-(nodeRadius) * a_normal.x)\r\n    + db * (-(nodeRadius + arrowHeadLength) * a_normal.x + arrowHeadHalfWidth * a_normal.y)\r\n    + dc * (-(nodeRadius + arrowHeadLength) * a_normal.x - arrowHeadHalfWidth * a_normal.y)\r\n  );\r\n\r\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\r\n\r\n  gl_Position = vec4(position, 0, 1);\r\n\r\n  // Extract the color:\r\n  v_color = a_color;\r\n  v_color.a *= bias;\r\n}\r\n"},620:function(t,e,n){n.r(e),n.d(e,{default:function(){return i}});var i="attribute vec2 a_position;\r\nattribute vec2 a_normal;\r\nattribute float a_thickness;\r\nattribute vec4 a_color;\r\nattribute float a_radius;\r\n// attribute vec2 a_width;\r\n\r\nuniform mat3 u_matrix;\r\nuniform float u_scale;\r\nuniform float u_cameraRatio;\r\nuniform float u_viewportRatio;\r\nuniform float u_thicknessRatio;\r\nuniform float u_lineLoop;\r\n\r\nvarying vec4 v_color;\r\nvarying vec2 v_normal;\r\nvarying float v_thickness;\r\nvarying float v_lineLo;\r\n\r\nconst float arrowHeadLengthThicknessRatio = 2.5;\r\nconst float minThickness = 0.8;\r\nconst float bias = 255.0 / 254.0;\r\n\r\nvoid main() {\r\n\r\n  // Computing thickness in screen space:\r\n  float thickness = a_thickness * u_thicknessRatio * u_scale * u_viewportRatio / 2.0;\r\n  thickness = max(thickness, minThickness * u_viewportRatio);\r\n  // vec2 width = a_width * u_thicknessRatio * u_scale * u_viewportRatio / 2.0;\r\n\r\n  float direction = sign(a_radius);\r\n  float nodeRadius = direction * a_radius * u_thicknessRatio * u_viewportRatio;\r\n  float arrowHeadLength = thickness * 2.0 * arrowHeadLengthThicknessRatio;\r\n\r\n  vec2 arrowHeadVector = vec2(-direction * a_normal.y, direction * a_normal.x);\r\n\r\n  // Add normal vector to the position in screen space, but correct thickness first:\r\n  vec2 position = a_position + a_normal * thickness * u_cameraRatio;\r\n  // Add vector that corrects the arrow head length:\r\n  position = position + arrowHeadVector * (arrowHeadLength + nodeRadius) * u_cameraRatio;\r\n  // Apply camera\r\n  position = (u_matrix * vec3(position, 1)).xy;\r\n\r\n  gl_Position = vec4(position, 0, 1);\r\n\r\n  v_normal = a_normal;\r\n  v_thickness = thickness;\r\n  v_lineLo = 1.0;\r\n\r\n  // Extract the color:\r\n  v_color = a_color;\r\n  v_color.a *= bias;\r\n}\r\n"},795:function(t,e,n){n.r(e),n.d(e,{default:function(){return i}});var i="// precision mediump float;\r\n\r\n// varying vec4 v_color;\r\n// varying vec2 v_normal;\r\n// varying float v_thickness;\r\n// varying float v_lineL;\r\n\r\n// const float feather = 0.001;\r\n// const vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\r\n\r\n// void main(void) {\r\n//   float dist = length(v_normal) * v_thickness;\r\n\r\n//   float t = smoothstep(\r\n//     v_thickness - feather,\r\n//     v_thickness,\r\n//     dist\r\n//   );\r\n\r\n//   // float emmmmmmm = v_lineloop;\r\n//   // if(v_lineL == 1.0){\r\n//   //   gl_FragColor = v_color;\r\n    \r\n//   // }else{\r\n//     gl_FragColor = mix(v_color, color0, t);\r\n//   // }\r\n// }\r\n\r\n\r\nprecision mediump float;\r\n\r\nvarying vec4 v_color;\r\nvarying vec2 v_normal;\r\nvarying float v_thickness;\r\n\r\nconst float feather = 0.003;\r\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\r\n\r\n\r\nvoid main(void) {\r\n  float dist = length(v_normal) * v_thickness;\r\n\r\n  float t = smoothstep(\r\n    v_thickness - feather,\r\n    v_thickness,\r\n    dist\r\n  );\r\n\r\n  gl_FragColor = mix(v_color, transparent, t);\r\n}"},56:function(t,e,n){n.r(e),n.d(e,{default:function(){return i}});var i="precision mediump float;\r\n\r\nvarying vec4 v_color;\r\nvarying float v_border;\r\n\r\nconst float radius = 0.5;\r\nconst float halfRadius = 0.45;\r\n\r\nvoid main(void) {\r\n  vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\r\n  vec4 white = vec4(1.0, 1.0, 1.0, 1.0);\r\n  float distToCenter = length(gl_PointCoord - vec2(0.5, 0.5));\r\n\r\n  float t = 0.0;\r\n  if (distToCenter < halfRadius - v_border)\r\n    gl_FragColor = transparent;\r\n    // gl_FragColor = white;\r\n  else if (distToCenter < halfRadius)\r\n    gl_FragColor = mix(v_color, white, (halfRadius - distToCenter) / v_border);\r\n  else if (distToCenter < radius - v_border)\r\n    gl_FragColor = v_color;\r\n  else if (distToCenter < radius)\r\n    gl_FragColor = mix(transparent, v_color, (radius - distToCenter) / v_border);\r\n  else\r\n    gl_FragColor = transparent;\r\n}\r\n"},487:function(t,e,n){n.r(e),n.d(e,{default:function(){return i}});var i="attribute vec2 a_position;\r\nattribute float a_size;\r\nattribute vec4 a_color;\r\n\r\nuniform float u_ratio;\r\nuniform float u_scale;\r\nuniform mat3 u_matrix;\r\n\r\nvarying vec4 v_color;\r\nvarying float v_border;\r\n\r\nconst float bias = 255.0 / 254.0;\r\n\r\nvoid main() {\r\n  gl_Position = vec4(\r\n    (u_matrix * vec3(a_position, 1)).xy,\r\n    0,\r\n    1\r\n  );\r\n\r\n  // Multiply the point size twice:\r\n  //  - x SCALING_RATIO to correct the canvas scaling\r\n  //  - x 2 to correct the formulae\r\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\r\n\r\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\r\n\r\n  // Extract the color:\r\n  v_color = a_color;\r\n  v_color.a *= bias;\r\n}\r\n"},122:function(t,e,n){n.r(e),n.d(e,{default:function(){return i}});var i="precision mediump float;\r\n\r\nvarying vec4 v_color;\r\nvarying float v_border;\r\n\r\nconst float radius = 0.5;\r\n\r\nvoid main(void) {\r\n  vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\r\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\r\n  float dist = radius - length(m);\r\n\r\n  float t = 0.0;\r\n  if (dist > v_border)\r\n    t = 1.0;\r\n  else if (dist > 0.0)\r\n    t = dist / v_border;\r\n\r\n  gl_FragColor = mix(color0, v_color, t);\r\n}\r\n"},853:function(t,e,n){n.r(e),n.d(e,{default:function(){return i}});var i="attribute vec2 a_position;\r\nattribute float a_size;\r\nattribute vec4 a_color;\r\n\r\nuniform float u_ratio;\r\nuniform float u_scale;\r\nuniform mat3 u_matrix;\r\n\r\nvarying vec4 v_color;\r\nvarying float v_border;\r\n\r\nconst float bias = 255.0 / 254.0;\r\n\r\nvoid main() {\r\n\r\n  gl_Position = vec4(\r\n    (u_matrix * vec3(a_position, 1)).xy,\r\n    0,\r\n    1\r\n  );\r\n\r\n  // Multiply the point size twice:\r\n  //  - x SCALING_RATIO to correct the canvas scaling\r\n  //  - x 2 to correct the formulae\r\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\r\n\r\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\r\n\r\n  // Extract the color:\r\n  v_color = a_color;\r\n  v_color.a *= bias;\r\n}\r\n"},764:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(187),u=n(751),l=r(n(358)),d=n(928),o=(a=s.EventEmitter,o(h,a),h.from=function(t){return(new h).setState(t)},h.prototype.enable=function(){return this.enabled=!0,this},h.prototype.disable=function(){return this.enabled=!1,this},h.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},h.prototype.hasState=function(t){return this.x===t.x&&this.y===t.y&&this.ratio===t.ratio&&this.angle===t.angle},h.prototype.getPreviousState=function(){var t=this.previousState;return t?{x:t.x,y:t.y,angle:t.angle,ratio:t.ratio}:null},h.prototype.isAnimated=function(){return!!this.nextFrame},h.prototype.setState=function(t){return this.enabled&&(this.previousState=this.getState(),t.x&&(this.x=t.x),t.y&&(this.y=t.y),t.angle&&(this.angle=t.angle),t.ratio&&(this.ratio=t.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState())),this},h.prototype.animate=function(i,t,e){var o,r,a,s,h=this;this.enabled&&(o=Object.assign({},u.ANIMATE_DEFAULTS,t),r="function"==typeof o.easing?o.easing:l.default[o.easing],a=Date.now(),s=this.getState(),t=function t(){var e=(Date.now()-a)/o.duration;if(1<=e)return h.nextFrame=null,h.setState(i),void(h.animationCallback&&(h.animationCallback.call(null),h.animationCallback=void 0));var n=r(e),e={};i.x&&(e.x=s.x+(i.x-s.x)*n),i.y&&(e.y=s.y+(i.y-s.y)*n),i.angle&&(e.angle=s.angle+(i.angle-s.angle)*n),i.ratio&&(e.ratio=s.ratio+(i.ratio-s.ratio)*n),h.setState(e),h.nextFrame=(0,d.requestFrame)(t)},this.nextFrame?((0,d.cancelFrame)(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=(0,d.requestFrame)(t)):t(),this.animationCallback=e)},h.prototype.animatedZoom=function(t){if(t){if("number"==typeof t)return this.animate({ratio:this.ratio/t});this.animate({ratio:this.ratio/(t.factor||1.5)},t)}else this.animate({ratio:this.ratio/1.5})},h.prototype.animatedUnzoom=function(t){if(t){if("number"==typeof t)return this.animate({ratio:this.ratio*t});this.animate({ratio:this.ratio*(t.factor||1.5)},t)}else this.animate({ratio:1.5*this.ratio})},h.prototype.animatedReset=function(t){this.animate({x:.5,y:.5,ratio:1,angle:0},t)},h.prototype.copy=function(){return h.from(this.getState())},h);function h(){var t=a.call(this)||this;return t.x=.5,t.y=.5,t.angle=0,t.ratio=1,t.nextFrame=null,t.previousState=null,t.enabled=!0,t.previousState=t.getState(),t}e.default=o},291:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.getWheelDelta=e.getTouchCoords=e.getTouchesArray=e.getMouseCoords=e.getPosition=e.getY=e.getX=void 0;n=n(187);function r(t){if(void 0!==t.offsetX)return t.offsetX;if(void 0!==t.clientX)return t.clientX;throw new Error("Captor: could not extract x from event.")}function a(t){if(void 0!==t.offsetY)return t.offsetY;if(void 0!==t.clientY)return t.clientY;throw new Error("Captor: could not extract y from event.")}function s(t){return{x:r(t),y:a(t)}}function h(t){for(var e=[],n=0,i=Math.min(t.length,2);n<i;n++)e.push(t[n]);return e}e.getX=r,e.getY=a,e.getPosition=s,e.getMouseCoords=function(t){return{x:r(t),y:a(t),clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,shiftKey:t.shiftKey,preventDefault:t.preventDefault.bind(t),original:t}},e.getTouchesArray=h,e.getTouchCoords=function(t){return{touches:h(t.touches).map(s),ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,shiftKey:t.shiftKey,preventDefault:t.preventDefault.bind(t),original:t}},e.getWheelDelta=function(t){if(void 0!==t.deltaY)return-3*t.deltaY/360;if(void 0!==t.detail)return t.detail/-9;throw new Error("Captor: could not extract delta from event.")};var u,o=(u=n.EventEmitter,o(l,u),l);function l(t,e){var n=u.call(this)||this;return n.container=t,n.renderer=e,n}e.default=o},269:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var h,u=s(n(291)),o=(h=u.default,o(l,h),l.prototype.kill=function(){var t=this.container;t.removeEventListener("click",this.handleClick),t.removeEventListener("contextmenu",this.handleRightClick),t.removeEventListener("mousedown",this.handleDown),t.removeEventListener("mousemove",this.handleMove),t.removeEventListener("wheel",this.handleWheel),t.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mouseup",this.handleUp)},l.prototype.handleClick=function(t){var e=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,"number"==typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(t);setTimeout(function(){e.clicks=0,e.doubleClickTimeout=null},300),this.draggedEvents<3&&this.emit("click",(0,u.getMouseCoords)(t))}},l.prototype.handleRightClick=function(t){this.enabled&&this.emit("rightClick",(0,u.getMouseCoords)(t))},l.prototype.handleDoubleClick=function(t){if(this.enabled)return this.emit("doubleClick",(0,u.getMouseCoords)(t)),!1},l.prototype.handleDown=function(t){this.enabled&&(this.startCameraState=this.renderer.getCamera().getState(),this.lastMouseX=(0,u.getX)(t),this.lastMouseY=(0,u.getY)(t),this.draggedEvents=0,this.downStartTime=Date.now(),t.which,this.isMouseDown=!0,this.emit("mousedown",(0,u.getMouseCoords)(t)))},l.prototype.handleUp=function(t){var e,n,i,o,r,a=this;this.enabled&&this.isMouseDown&&(e=this.renderer.getCamera(),this.isMouseDown=!1,"number"==typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null),n=(0,u.getX)(t),i=(0,u.getY)(t),o=e.getState(),r=e.getPreviousState()||{x:0,y:0},this.isMoving?e.animate({x:o.x+3*(o.x-r.x),y:o.y+3*(o.y-r.y)},{duration:200,easing:"quadraticOut"}):this.lastMouseX===n&&this.lastMouseY===i||e.setState({x:o.x,y:o.y}),this.isMoving=!1,setTimeout(function(){a.draggedEvents=0,a.renderer.refresh()},0),this.emit("mouseup",(0,u.getMouseCoords)(t)))},l.prototype.handleMove=function(t){var e,n,i,o,r,a,s=this;if(this.enabled)return this.emit("mousemove",(0,u.getMouseCoords)(t)),this.isMouseDown&&(this.isMoving=!0,this.draggedEvents++,"number"==typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){s.movingTimeout=null,s.isMoving=!1},200),e=this.renderer.getCamera(),n=(0,u.getX)(t),i=(0,u.getY)(t),a=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),o=this.renderer.viewportToFramedGraph({x:n,y:i}),r=a.x-o.x,a=a.y-o.y,r=(o=e.getState()).x+r,a=o.y+a,e.setState({x:r,y:a}),this.lastMouseX=n,this.lastMouseY=i),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1},l.prototype.handleWheel=function(t){var e=this;if(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!this.enabled)return!1;if(!this.wheel_enabled)return!1;var n=(0,u.getWheelDelta)(t);if(!n)return!1;var i=0<n?1/1.7:1.7,o=this.renderer.getCamera(),r=o.getState().ratio*i,i=0<n?1:-1,n=Date.now();return this.currentWheelDirection===i&&this.lastWheelTriggerTime&&n-this.lastWheelTriggerTime<50||(o.animate(this.renderer.getViewportZoomedState({x:(0,u.getX)(t),y:(0,u.getY)(t)},r),{easing:"quadraticOut",duration:250},function(){e.currentWheelDirection=0}),this.currentWheelDirection=i,this.lastWheelTriggerTime=n),!1},l.prototype.handleOut=function(){},l);function l(t,e){e=h.call(this,t,e)||this;return e.enabled=!0,e.wheel_enabled=!0,e.draggedEvents=0,e.downStartTime=null,e.lastMouseX=null,e.lastMouseY=null,e.isMouseDown=!1,e.isMoving=!1,e.movingTimeout=null,e.startCameraState=null,e.clicks=0,e.doubleClickTimeout=null,e.currentWheelDirection=0,e.handleClick=e.handleClick.bind(e),e.handleRightClick=e.handleRightClick.bind(e),e.handleDown=e.handleDown.bind(e),e.handleUp=e.handleUp.bind(e),e.handleMove=e.handleMove.bind(e),e.handleWheel=e.handleWheel.bind(e),e.handleOut=e.handleOut.bind(e),t.addEventListener("click",e.handleClick,!1),t.addEventListener("contextmenu",e.handleRightClick,!1),t.addEventListener("mousedown",e.handleDown,!1),t.addEventListener("mousemove",e.handleMove,!1),t.addEventListener("wheel",e.handleWheel,!1),t.addEventListener("mouseout",e.handleOut,!1),document.addEventListener("mouseup",e.handleUp,!1),e}e.default=o},508:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},f=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0});var h,p=s(n(291)),o=(h=p.default,o(u,h),u.prototype.kill=function(){var t=this.container;t.removeEventListener("touchstart",this.handleStart),t.removeEventListener("touchend",this.handleLeave),t.removeEventListener("touchcancel",this.handleLeave),t.removeEventListener("touchmove",this.handleMove)},u.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},u.prototype.dispatchRelatedMouseEvent=function(t,e,n,i){n=n||(0,p.getPosition)(e.touches[0]),e=new MouseEvent(t,{clientX:n.x,clientY:n.y,altKey:e.altKey,ctrlKey:e.ctrlKey});(i||this.container).dispatchEvent(e)},u.prototype.handleStart=function(t){var e,n,i,o;this.enabled&&(t.preventDefault(),1===t.touches.length&&this.dispatchRelatedMouseEvent("mousedown",t),n=(0,p.getTouchesArray)(t.touches),this.isMoving=!0,this.touchMode=n.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=n.map(p.getPosition),this.lastTouchesPositions=this.startTouchesPositions,2===this.touchMode&&(e=(o=(i=f(this.startTouchesPositions,2))[0]).x,n=o.y,i=(o=i[1]).x,o=o.y,this.startTouchesAngle=Math.atan2(o-n,i-e),this.startTouchesDistance=Math.sqrt(Math.pow(i-e,2)+Math.pow(o-n,2))),this.emit("touchdown",(0,p.getTouchCoords)(t)))},u.prototype.handleLeave=function(t){if(this.enabled){switch(t.preventDefault(),0===t.touches.length&&this.lastTouchesPositions&&this.lastTouchesPositions.length&&(this.dispatchRelatedMouseEvent("mouseup",t,this.lastTouchesPositions[0],document),this.dispatchRelatedMouseEvent("click",t,this.lastTouchesPositions[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===t.touches.length){this.handleStart(t),t.preventDefault();break}case 1:var e,n,i;this.isMoving&&(n=(e=this.renderer.getCamera()).getState(),i=e.getPreviousState()||{x:0,y:0},e.animate({x:n.x+3*(n.x-i.x),y:n.y+3*(n.y-i.y)},{duration:200,easing:"quadraticOut"})),this.isMoving=!1,this.touchMode=0}this.emit("touchup",(0,p.getTouchCoords)(t))}},u.prototype.handleMove=function(t){var e=this;if(this.enabled){t.preventDefault(),1===t.touches.length&&this.dispatchRelatedMouseEvent("mousemove",t);var n=this.startCameraState,i=(0,p.getTouchesArray)(t.touches).map(p.getPosition);switch(this.lastTouchesPositions=i,this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){e.isMoving=!1},200),this.touchMode){case 1:var o=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),r=o.x,a=o.y,s=this.renderer.viewportToFramedGraph(i[0]),h=s.x,u=s.y;this.renderer.getCamera().setState({x:n.x+r-h,y:n.y+a-u});break;case 2:var l={},d=i[0],c=d.x,g=d.y,o=i[1],s=o.x,r=o.y,a=Math.atan2(r-g,s-c)-this.startTouchesAngle,d=Math.hypot(r-g,s-c)/this.startTouchesDistance;l.ratio=n.ratio/d,l.angle=n.angle+a;o=this.getDimensions(),r=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:n}),s=Math.min(o.width,o.height),d=s/o.width,a=s/o.height,o=l.ratio/s,u=g-s/2/a,h=(d=f([(h=c-s/2/d)*Math.cos(-l.angle)-u*Math.sin(-l.angle),u*Math.cos(-l.angle)+h*Math.sin(-l.angle)],2))[0];u=d[1],l.x=r.x-h*o,l.y=r.y+u*o,this.renderer.getCamera().setState(l)}this.emit("touchmove",(0,p.getTouchCoords)(t))}},u);function u(t,e){e=h.call(this,t,e)||this;return e.enabled=!0,e.isMoving=!1,e.touchMode=0,e.handleStart=e.handleStart.bind(e),e.handleLeave=e.handleLeave.bind(e),e.handleMove=e.handleMove.bind(e),t.addEventListener("touchstart",e.handleStart,!1),t.addEventListener("touchend",e.handleLeave,!1),t.addEventListener("touchcancel",e.handleLeave,!1),t.addEventListener("touchmove",e.handleMove,!1),e}e.default=o},730:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.edgeLabelsToDisplayFromNodes=e.LabelGrid=void 0;var i=(r.compare=function(t,e){return!(t.size>e.size)&&(t.size<e.size||t.key>e.key)?1:-1},r),n=(o.prototype.resizeAndClear=function(t,e){this.width=t.width,this.height=t.height,this.cellSize=e,this.columns=Math.ceil(t.width/e),this.rows=Math.ceil(t.height/e),this.cells={}},o.prototype.getIndex=function(t){var e=Math.floor(t.x/this.cellSize),t=Math.floor(t.y/this.cellSize);return e*this.columns+t},o.prototype.add=function(t,e,n){t=new i(t,e),e=this.getIndex(n),n=this.cells[e];n||(n=[],this.cells[e]=n),n.push(t)},o.prototype.organize=function(){for(var t in this.cells)this.cells[t].sort(i.compare)},o.prototype.getLabelsToDisplay=function(t,e){var n,i=this.cellSize*this.cellSize,i=i/t/t*e/i,o=Math.ceil(i),r=[];for(n in this.cells)for(var a=this.cells[n],s=0;s<Math.min(o,a.length);s++)r.push(a[s].key);return r},o);function o(){this.width=0,this.height=0,this.cellSize=0,this.columns=0,this.rows=0,this.cells={}}function r(t,e){this.key=t,this.size=e}e.LabelGrid=n,e.edgeLabelsToDisplayFromNodes=function(t){var e=t.graph,o=t.hoveredNode,r=(t.highlightedNodes,t.displayedNodeLabels),a=[];return e.forEachEdge(function(t,e,n,i){(n===o||i===o||r.has(n)&&r.has(i))&&a.push(t)}),a}},134:function(t,e,n){var d=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},c=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||((i=i||Array.prototype.slice.call(e,0,o))[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.rectangleCollidesWithQuad=e.squareCollidesWithQuad=e.getCircumscribedAlignedRectangle=e.isRectangleAligned=void 0;var y=i(n(796)),b=!1;function a(t){return t.x1===t.x2||t.y1===t.y2}function s(t){var e=Math.sqrt(Math.pow(t.x2-t.x1,2)+Math.pow(t.y2-t.y1,2)),n=(t.y1-t.y2)*t.height/e,i=(t.x2-t.x1)*t.height/e,o={x:t.x1,y:t.y1},r={x:t.x2,y:t.y2},a={x:t.x1+n,y:t.y1+i},e={x:t.x2+n,y:t.y2+i},n=Math.min(o.x,r.x,a.x,e.x),t=Math.max(o.x,r.x,a.x,e.x),i=Math.min(o.y,r.y,a.y,e.y);return{x1:n,y1:i,x2:t,y2:i,height:Math.max(o.y,r.y,a.y,e.y)-i}}function S(t,e,n,i,o,r,a){return t<i+r&&i<t+n&&e<o+a&&o<e+n}function v(t,e,n,i,o,r,a,s){return t<o+a&&o<t+n&&e<r+s&&r<e+i}e.isRectangleAligned=a,e.getCircumscribedAlignedRectangle=s,e.squareCollidesWithQuad=S,e.rectangleCollidesWithQuad=v;o.prototype.add=function(t,e,n,i){return function(t,e,n,i,o,r){for(var a=i-r,s=o-r,h=2*r,u=0,l=0;;){if(5<=u)return e[l]=e[l]||[],e[l].push(n);var d=4*l+4,c=4*l+8,g=4*l+12,f=4*l+16,p=S(a,s,h,t[d],t[1+d],t[2+d],t[3+d]),m=S(a,s,h,t[c],t[1+c],t[2+c],t[3+c]),y=S(a,s,h,t[g],t[1+g],t[2+g],t[3+g]),v=S(a,s,h,t[f],t[1+f],t[2+f],t[3+f]),w=[p,m,y,v].reduce(function(t,e){return e?t+1:t},0);if(0===w&&0===u)return e.outside.push(n),!b&&5<=e.outside.length&&(b=!0);if(0===w)throw new Error("sigma/quadtree.insertNode: no collision (level: "+u+", key: "+n+", x: "+i+", y: "+o+", size: "+r+").");if(3===w)throw new Error("sigma/quadtree.insertNode: 3 impossible collisions (level: "+u+", key: "+n+", x: "+i+", y: "+o+", size: "+r+").");if(1<w)return e[l]=e[l]||[],e[l].push(n);u++,p&&(l=d),m&&(l=c),y&&(l=g),v&&(l=f)}}(this.data,this.containers,t,e,n,i),this},o.prototype.resize=function(t){this.clear(),this.data[0]=t.x,this.data[1]=t.y,this.data[2]=t.width,this.data[3]=t.height,function(t){for(var e=[0,0];e.length;){var n=e.pop(),i=e.pop(),o=4*i+4,r=4*i+8,a=4*i+12,s=4*i+16,h=t[i+0],u=t[i+1],l=t[i+2]/2,i=t[i+3]/2;t[o]=h,t[1+o]=u,t[2+o]=l,t[3+o]=i,t[r]=h+l,t[1+r]=u,t[2+r]=l,t[3+r]=i,t[a]=h,t[1+a]=u+i,t[2+a]=l,t[3+a]=i,t[s]=h+l,t[1+s]=u+i,t[2+s]=l,t[3+s]=i,n<4&&(e.push(s,n+1),e.push(a,n+1),e.push(r,n+1),e.push(o,n+1))}}(this.data)},o.prototype.clear=function(){var t;return this.containers=((t={}).outside=[],t),this},o.prototype.point=function(t,e){for(var n,i,o,r,a,s,h=this.containers.outside,u=0,l=0;this.containers[u]&&h.push.apply(h,c([],d(this.containers[u]),!1)),u=4*u+4*(n=t,i=e,o=this.data[u+0],r=this.data[u+1],a=this.data[u+2],s=this.data[u+3],a=n<o+a/2,i<r+s/2?a?1:2:a?3:4),l++,l<=5;);return h},o.prototype.rectangle=function(t,e,n,i,o){var r=this.lastRectangle;return r&&t===r.x1&&n===r.x2&&e===r.y1&&i===r.y2&&o===r.height||(this.lastRectangle={x1:t,y1:e,x2:n,y2:i,height:o},a(this.lastRectangle)||(this.lastRectangle=s(this.lastRectangle)),this.cache=function(t,e,n,i,o,r){for(var a=[0,0],s=[];a.length;){var h,u,l,d,c,g,f,p=a.pop(),m=a.pop();(f=e[m])&&(0,y.default)(s,f),5<=p||(u=4*m+8,l=4*m+12,d=4*m+16,c=v(n,i,o,r,t[h=4*m+4],t[1+h],t[2+h],t[3+h]),g=v(n,i,o,r,t[u],t[1+u],t[2+u],t[3+u]),f=v(n,i,o,r,t[l],t[1+l],t[2+l],t[3+l]),m=v(n,i,o,r,t[d],t[1+d],t[2+d],t[3+d]),c&&a.push(h,p+1),g&&a.push(u,p+1),f&&a.push(l,p+1),m&&a.push(d,p+1))}return s}(this.data,this.containers,t,e,Math.abs(t-n)||Math.abs(e-i),o),(o=this.cache).push.apply(o,c([],d(this.containers.outside),!1))),this.cache},n=o;function o(t){void 0===t&&(t={}),this.containers=((e={}).outside=[],e),this.cache=null,this.lastRectangle=null;var e=Math.pow(4,5);this.data=new Float32Array((4*e-1)/3*4),t.boundaries?this.resize(t.boundaries):this.resize({x:0,y:0,width:1,height:1})}e.default=n},607:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Sigma=e.MouseCaptor=e.QuadTree=e.Camera=e.MultiGraph=e.Graph=void 0;var o=i(n(159));e.Sigma=o.default;var r=i(n(764));e.Camera=r.default;r=i(n(134));e.QuadTree=r.default;r=i(n(269));e.MouseCaptor=r.default;i=i(n(698));e.Graph=i.default;var a=n(698);Object.defineProperty(e,"MultiGraph",{enumerable:!0,get:function(){return a.MultiGraph}}),e.default=o.default},942:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,i,o){var r,a,s,h,u,l,d,c;e.size<2||(r=3*e.size,c=o.edgeLabelFont,d=o.edgeLabelWeight,(a=e.label)&&(t.fillStyle=e.color,t.font=d+" "+r+"px "+c,u=t.measureText(a).width,l=(n.x+i.x)/2,o=(n.y+i.y)/2,d=i.x-n.x,c=i.y-n.y,i=Math.sqrt(d*d+c*c),i=0<d?0<c?Math.acos(d/i):Math.asin(c/i):0<c?Math.acos(d/i)+Math.PI:Math.asin(d/i)+Math.PI/2,t.save(),0==e.index?t.translate(l,o):(o=e.index%2!=0?(h=l-.25*(s=(e.index+1)/2)*Math.sqrt(d*d+c*c)*(n.y-o)/Math.sqrt((n.x-l)*(n.x-l)+(n.y-o)*(n.y-o)),o+.25*s*Math.sqrt(d*d+c*c)*(n.x-l)/Math.sqrt((n.x-l)*(n.x-l)+(n.y-o)*(n.y-o))):(h=l+.25*(s=e.index/2)*Math.sqrt(d*d+c*c)*(n.y-o)/Math.sqrt((n.x-l)*(n.x-l)+(n.y-o)*(n.y-o)),o-.25*s*Math.sqrt(d*d+c*c)*(n.x-l)/Math.sqrt((n.x-l)*(n.x-l)+(n.y-o)*(n.y-o))),t.translate(h,o)),t.rotate(i),t.fillText(a,-u/2,e.size/2-r),t.restore()))}},61:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(622));e.default=function(t,e,n){var i=n.labelSize,o=n.labelFont,r=n.labelWeight;t.font=r+" "+i+"px "+o,t.fillStyle="#FFC106",t.strokeStyle="#FFC106",t.lineWidth=3,t.shadowOffsetX=0,t.shadowOffsetY=0,t.beginPath(),t.arc(e.x,e.y,e.size+4,0,2*Math.PI),t.closePath(),t.stroke(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,"string"==typeof e.label&&!0===e.isRenderBox&&(0,a.default)(t,e,n)}},622:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,c){var n,i,o;1===e.state&&((o=new Image).src="./img/icon/client/lock.svg",t.drawImage(o,e.x-e.size/2,e.y-2*e.size,e.size,e.size)),2===e.state&&((i=new Image).src="./img/icon/client/merge.svg",t.drawImage(i,e.x-e.size/2,e.y-2*e.size,e.size,e.size)),e.label&&(n=c.labelSize,o=c.labelFont,i=c.labelWeight,t.fillStyle="#000",t.font=i+" "+n+"px "+o,t.fillText(e.label,e.x-4*e.label.length,e.y+e.size+16),e.icon&&((o=new Image).src=e.icon,t.drawImage(o,e.x-e.size/2,e.y-e.size/2,e.size,e.size),e.tags&&0<e.tags.length&&function(t,e){var n=c.labelSize,i=c.labelFont,o=c.labelWeight,r=n,a=e.tags[1]?e.tags[1].text:"",s=e.tags[0]?e.tags[0].text:"",h=e.tags[2]?e.tags[2].text:"";t.font=o+" "+n+"px "+i;var u=t.measureText(a).width;t.font=o+" "+r+"px "+i;var l=s?t.measureText(s).width:0;t.font=o+" "+r+"px "+i;var d=h?t.measureText(h).width:0,u=Math.max(u,l,d),l=Math.round(e.x),d=Math.round(e.y),u=Math.round(u+n/2+e.size+3);Math.round(n/2+4),s&&Math.round(r/2+9),h&&Math.round(r/2+9),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.fillStyle=e.color,t.font=o+" "+n+"px "+i,a&&(t.fillStyle=e.tags[1].style.fill,t.fillRect(l+e.size,d-e.size/4,u,16),t.fillStyle=e.tags[1].style.font_color,t.fillText(a,e.x+e.size+3,d-e.size/4+12),t.fillText("x",e.x+e.size+u-10,d-e.size/4+12)),s&&(t.fillStyle=e.tags[0].style.fill,t.fillRect(l+e.size,d-(30+e.size/4),u,16),t.fillStyle=e.tags[0].style.font_color,t.font=o+" "+r+"px "+i,t.fillText(s,e.x+e.size+3,d-(30+e.size/4)+12),t.fillText("x",e.x+e.size+u-10,d-(30+e.size/4)+12)),h&&(t.fillStyle=e.tags[2].style.fill,t.fillRect(l+e.size,d+(30-e.size/4),u,16),t.fillStyle=e.tags[2].style.font_color,t.font=o+" "+r+"px "+i,t.fillText(h,e.x+e.size+3,d+(30-e.size/4)+12),t.fillText("x",e.x+e.size+u-10,d+(30-e.size/4)+12))}(t,e)))}},195:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.createEdgeCompoundProgram=e.AbstractEdgeProgram=void 0;var r,o=(r=n(171).AbstractProgram,o(a,r),a);function a(t,e,n,i,o){return r.call(this,t,e,n,i,o)||this}e.AbstractEdgeProgram=o,e.createEdgeCompoundProgram=function(t){return e.prototype.bufferData=function(){this.programs.forEach(function(t){return t.bufferData()})},e.prototype.allocate=function(e){this.programs.forEach(function(t){return t.allocate(e)})},e.prototype.bind=function(){},e.prototype.computeIndices=function(){this.programs.forEach(function(t){return t.computeIndices()})},e.prototype.render=function(e){this.programs.forEach(function(t){t.bind(),t.bufferData(),t.render(e)})},e.prototype.process=function(e,n,i,o,r){this.programs.forEach(function(t){return t.process(e,n,i,o,r)})},e;function e(e){this.programs=t.map(function(t){return new t(e)})}}},909:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.createNodeCompoundProgram=e.AbstractNodeProgram=void 0;var r,o=(r=n(171).AbstractProgram,o(a,r),a.prototype.bind=function(){var t=this.gl;t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.sizeLocation),t.enableVertexAttribArray(this.colorLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.sizeLocation,1,t.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,this.attributes*Float32Array.BYTES_PER_ELEMENT,12)},a);function a(t,e,n,i,o){i=r.call(this,t,e,n,i,o)||this;i.positionLocation=t.getAttribLocation(i.program,"a_position"),i.sizeLocation=t.getAttribLocation(i.program,"a_size"),i.colorLocation=t.getAttribLocation(i.program,"a_color");o=t.getUniformLocation(i.program,"u_matrix");if(null===o)throw new Error("AbstractNodeProgram: error while getting matrixLocation");i.matrixLocation=o;o=t.getUniformLocation(i.program,"u_ratio");if(null===o)throw new Error("AbstractNodeProgram: error while getting ratioLocation");i.ratioLocation=o;t=t.getUniformLocation(i.program,"u_scale");if(null===t)throw new Error("AbstractNodeProgram: error while getting scaleLocation");return i.scaleLocation=t,i}e.AbstractNodeProgram=o,e.createNodeCompoundProgram=function(t){return e.prototype.bufferData=function(){this.programs.forEach(function(t){return t.bufferData()})},e.prototype.allocate=function(e){this.programs.forEach(function(t){return t.allocate(e)})},e.prototype.bind=function(){},e.prototype.render=function(e){this.programs.forEach(function(t){return t.render(e)})},e.prototype.process=function(e,n,i){this.programs.forEach(function(t){return t.process(e,n,i)})},e;function e(e){this.programs=t.map(function(t){return new t(e)})}}},171:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractProgram=void 0;var r=n(706),n=(i.prototype.bufferData=function(){var t=this.gl;t.bufferData(t.ARRAY_BUFFER,this.array,t.DYNAMIC_DRAW)},i.prototype.allocate=function(t){this.array=new Float32Array(this.points*this.attributes*t)},i);function i(t,e,n,i,o){this.array=new Float32Array,this.points=i,this.attributes=o,this.gl=t,this.vertexShaderSource=e,this.fragmentShaderSource=n;n=t.createBuffer();if(null===n)throw new Error("AbstractProgram: error while creating the buffer");this.buffer=n,t.bindBuffer(t.ARRAY_BUFFER,this.buffer),this.vertexShader=(0,r.loadVertexShader)(t,this.vertexShaderSource),this.fragmentShader=(0,r.loadFragmentShader)(t,this.fragmentShaderSource),this.program=(0,r.loadProgram)(t,[this.vertexShader,this.fragmentShader])}e.AbstractProgram=n},569:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(195),r=i(n(805)),n=i(n(71)),r=(0,o.createEdgeCompoundProgram)([n.default,r.default]);e.default=r},805:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a,b=n(928),s=r(n(912)),h=r(n(973)),n=n(195),o=(a=n.AbstractEdgeProgram,o(u,a),u.prototype.bind=function(){var t=this.gl;t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.normalLocation),t.enableVertexAttribArray(this.thicknessLocation),t.enableVertexAttribArray(this.radiusLocation),t.enableVertexAttribArray(this.colorLocation),t.enableVertexAttribArray(this.barycentricLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,10*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.normalLocation,2,t.FLOAT,!1,10*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.thicknessLocation,1,t.FLOAT,!1,10*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(this.radiusLocation,1,t.FLOAT,!1,10*Float32Array.BYTES_PER_ELEMENT,20),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,10*Float32Array.BYTES_PER_ELEMENT,24),t.vertexAttribPointer(this.barycentricLocation,3,t.FLOAT,!1,10*Float32Array.BYTES_PER_ELEMENT,28)},u.prototype.computeIndices=function(){},u.prototype.process=function(t,e,n,i,o){if(i)for(var r=30*o,a=r+30;r<a;r++)this.array[r]=0;else{var s,h,u=+(n.size||1),l=(e.size||1)/2,d=t.x,c=t.y,g=e.x,f=e.y,p=(0,b.floatColor)(n.color),m=g-d,y=f-c,v=m*m+y*y,w=0,i=0;v&&(w=-y*(v=1/Math.sqrt(v)),i=m*v),0!=n.index&&(t=(d+g)/2,e=(c+f)/2,(v=(y=f-(n.index%2==0?(h=t-.25*(s=n.index/2)*Math.sqrt(m*m+y*y)*(c-e)/Math.sqrt((d-t)*(d-t)+(c-e)*(c-e)),e+.25*s*Math.sqrt(m*m+y*y)*(d-t)/Math.sqrt((d-t)*(d-t)+(c-e)*(c-e))):(h=t+.25*(s=(n.index+1)/2)*Math.sqrt(m*m+y*y)*(c-e)/Math.sqrt((d-t)*(d-t)+(c-e)*(c-e)),e-.25*s*Math.sqrt(m*m+y*y)*(d-t)/Math.sqrt((d-t)*(d-t)+(c-e)*(c-e)))))*y+(m=g-h)*m)&&(w=-y*(v=1/Math.sqrt(v)),i=m*v));v=30*o,o=this.array;o[v++]=g,o[v++]=f,o[v++]=-w,o[v++]=-i,o[v++]=u,o[v++]=l,o[v++]=p,o[v++]=1,o[v++]=0,o[v++]=0,o[v++]=g,o[v++]=f,o[v++]=-w,o[v++]=-i,o[v++]=u,o[v++]=l,o[v++]=p,o[v++]=0,o[v++]=1,o[v++]=0,o[v++]=g,o[v++]=f,o[v++]=-w,o[v++]=-i,o[v++]=u,o[v++]=l,o[v++]=p,o[v++]=0,o[v++]=0,o[v]=1}},u.prototype.render=function(t){var e=this.gl,n=this.program;e.useProgram(n),e.uniform1f(this.scaleLocation,t.scalingRatio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.uniform1f(this.cameraRatioLocation,t.ratio),e.uniform1f(this.viewportRatioLocation,1/Math.min(t.width,t.height)),e.uniform1f(this.thicknessRatioLocation,1/Math.pow(t.ratio,t.edgesPowRatio)),e.drawArrays(e.TRIANGLES,0,this.array.length/10)},u);function u(t){var e=a.call(this,t,s.default,h.default,3,10)||this;e.positionLocation=t.getAttribLocation(e.program,"a_position"),e.colorLocation=t.getAttribLocation(e.program,"a_color"),e.normalLocation=t.getAttribLocation(e.program,"a_normal"),e.thicknessLocation=t.getAttribLocation(e.program,"a_thickness"),e.radiusLocation=t.getAttribLocation(e.program,"a_radius"),e.barycentricLocation=t.getAttribLocation(e.program,"a_barycentric");var n=t.getUniformLocation(e.program,"u_scale");if(null===n)throw new Error("EdgeArrowHeadProgram: error while getting scaleLocation");e.scaleLocation=n;n=t.getUniformLocation(e.program,"u_matrix");if(null===n)throw new Error("EdgeArrowHeadProgram: error while getting matrixLocation");e.matrixLocation=n;n=t.getUniformLocation(e.program,"u_cameraRatio");if(null===n)throw new Error("EdgeArrowHeadProgram: error while getting cameraRatioLocation");e.cameraRatioLocation=n;n=t.getUniformLocation(e.program,"u_viewportRatio");if(null===n)throw new Error("EdgeArrowHeadProgram: error while getting viewportRatioLocation");e.viewportRatioLocation=n;t=t.getUniformLocation(e.program,"u_thicknessRatio");if(null===t)throw new Error("EdgeArrowHeadProgram: error while getting thicknessRatioLocation");return e.thicknessRatioLocation=t,e.bind(),e}e.default=o},71:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(195),P=n(928),h=r(n(620)),u=r(n(795)),o=(a=s.AbstractEdgeProgram,o(l,a),l.prototype.bind=function(){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.normalLocation),t.enableVertexAttribArray(this.thicknessLocation),t.enableVertexAttribArray(this.colorLocation),t.enableVertexAttribArray(this.radiusLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.normalLocation,2,t.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.thicknessLocation,1,t.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,7*Float32Array.BYTES_PER_ELEMENT,20),t.vertexAttribPointer(this.radiusLocation,1,t.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,24)},l.prototype.process=function(t,e,n,i,o){if(i)for(var r=42*o,a=r+42;r<a;r++)this.array[r]=0;else{var s=+(n.size||1),h=t.x,u=t.y,l=e.x,d=e.y,c=(e.size||1)/2,g=(0,P.floatColor)(n.color),f=l-h,p=d-u,m=f*f+p*p,y=0,v=0;m&&(y=-p*(m=1/Math.sqrt(m)),v=f*m);var w,b,S=42*o,x=s,i=s,t=0,e=0,m=0,o=this.array;0==n.index?(o[S++]=h,o[S++]=u,o[S++]=y,o[S++]=v,o[S++]=s,o[S++]=g,o[S++]=0,o[S++]=h,o[S++]=u,o[S++]=y,o[S++]=v,o[S++]=s,o[S++]=g,o[S++]=0,o[S++]=h,o[S++]=u,o[S++]=y,o[S++]=v,o[S++]=s,o[S++]=g,o[S++]=0,e=(d-u)/(l-h),o[S++]=h,o[S++]=u,o[S++]=-y,o[S++]=-v,o[S++]=s,o[S++]=g,o[S++]=0,o[S++]=l,o[S++]=d,o[S++]=y,o[S++]=v,o[S++]=s,o[S++]=g,o[S++]=c,o[S++]=l,o[S++]=d,o[S++]=-y,o[S++]=-v,o[S++]=s):(y=(h+l)/2,v=(u+d)/2,e=((s=n.index%2==0?(w=y-.25*(b=n.index/2)*Math.sqrt(f*f+p*p)*(u-v)/Math.sqrt((h-y)*(h-y)+(u-v)*(u-v)),v+.25*b*Math.sqrt(f*f+p*p)*(h-y)/Math.sqrt((h-y)*(h-y)+(u-v)*(u-v))):(w=y+.25*(b=(n.index+1)/2)*Math.sqrt(f*f+p*p)*(u-v)/Math.sqrt((h-y)*(h-y)+(u-v)*(u-v)),v-.25*b*Math.sqrt(f*f+p*p)*(h-y)/Math.sqrt((h-y)*(h-y)+(u-v)*(u-v))))-u)/(w-h),m=(s-d)/(w-l),b=1/Math.sqrt(1+e*e),s<v&&(x=-x,i=-i,b=-b),(h<w&&l<w||w<h&&w<l)&&(Math.abs(w-h)<Math.abs(w-l)?(x=-x,b=-b):i=-i),o[S++]=h,o[S++]=u,o[S++]=-e*b,o[S++]=b,o[S++]=Math.abs(x),o[S++]=g,o[S++]=0,o[S++]=h,o[S++]=u,o[S++]=e*b,o[S++]=-b,o[S++]=Math.abs(x),o[S++]=g,o[S++]=0,f=h-x*e/Math.sqrt(e*e+1),p=u+x/Math.sqrt(e*e+1),y=l-i*m/Math.sqrt(m*m+1),p=e*((e=(d+i/Math.sqrt(m*m+1)-p+e*f-m*y)/(e-m))-f)+p,t=-(l-h)/(d-u),e=Math.sqrt((s-p)*(s-p)+(w-e)*(w-e)),b=1/Math.sqrt(1+t*t),(d<u&&n.index%2==0||u<d&&n.index%2!=0)&&(b=-b),o[S++]=w,o[S++]=s,o[S++]=b,o[S++]=t*b,o[S++]=e,o[S++]=g,o[S++]=0,o[S++]=w,o[S++]=s,o[S++]=-b,o[S++]=-t*b,o[S++]=e,o[S++]=g,o[S++]=0,b=1/Math.sqrt(1+m*m),n.index%2==0&&(c=-c),s<v&&(b=-b),(h<w&&l<w||w<h&&w<l)&&(Math.abs(w-h)<Math.abs(w-l)||(b=-b)),o[S++]=l,o[S++]=d,o[S++]=-m*b,o[S++]=b,o[S++]=Math.abs(x),o[S++]=g,o[S++]=c,o[S++]=l,o[S++]=d,o[S++]=m*b,o[S++]=-b,o[S++]=Math.abs(x)),o[S++]=g,o[S++]=-c}},l.prototype.computeIndices=function(){for(var t=this.array.length/7,e=2*t,n=new this.IndicesArray(e),i=0,o=0;i<t;i+=6)n[o++]=i,n[o++]=i+1,n[o++]=i+2,n[o++]=i+2,n[o++]=i+1,n[o++]=i+3,n[o++]=i+2,n[o++]=i+3,n[o++]=i+4,n[o++]=i+4,n[o++]=i+3,n[o++]=i+5;this.indicesArray=n},l.prototype.bufferData=function(){a.prototype.bufferData.call(this);var t=this.gl;t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indicesArray,t.STATIC_DRAW)},l.prototype.render=function(t){var e=this.gl,n=this.program;e.useProgram(n),e.uniform1f(this.scaleLocation,t.scalingRatio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.uniform1f(this.cameraRatioLocation,t.ratio),e.uniform1f(this.viewportRatioLocation,1/Math.min(t.width,t.height)),e.uniform1f(this.thicknessRatioLocation,1/Math.pow(t.ratio,t.edgesPowRatio)),e.drawElements(e.TRIANGLES,this.indicesArray.length,this.indicesType,0)},l);function l(t){var e=a.call(this,t,h.default,u.default,6,7)||this,n=t.createBuffer();if(null===n)throw new Error("EdgeClampedProgram: error while getting resolutionLocation");e.indicesBuffer=n,e.positionLocation=t.getAttribLocation(e.program,"a_position"),e.colorLocation=t.getAttribLocation(e.program,"a_color"),e.normalLocation=t.getAttribLocation(e.program,"a_normal"),e.thicknessLocation=t.getAttribLocation(e.program,"a_thickness"),e.radiusLocation=t.getAttribLocation(e.program,"a_radius");n=t.getUniformLocation(e.program,"u_scale");if(null===n)throw new Error("EdgeClampedProgram: error while getting scaleLocation");e.scaleLocation=n;n=t.getUniformLocation(e.program,"u_matrix");if(null===n)throw new Error("EdgeClampedProgram: error while getting matrixLocation");e.matrixLocation=n;n=t.getUniformLocation(e.program,"u_cameraRatio");if(null===n)throw new Error("EdgeClampedProgram: error while getting cameraRatioLocation");e.cameraRatioLocation=n;n=t.getUniformLocation(e.program,"u_viewportRatio");if(null===n)throw new Error("EdgeClampedProgram: error while getting viewportRatioLocation");e.viewportRatioLocation=n;n=t.getUniformLocation(e.program,"u_thicknessRatio");if(null===n)throw new Error("EdgeClampedProgram: error while getting thicknessRatioLocation");return e.thicknessRatioLocation=n,e.canUse32BitsIndices=(0,P.canUse32BitsIndices)(t),e.IndicesArray=e.canUse32BitsIndices?Uint32Array:Uint16Array,e.indicesArray=new e.IndicesArray,e.indicesType=e.canUse32BitsIndices?t.UNSIGNED_INT:t.UNSIGNED_SHORT,e.bind(),e}e.default=o},860:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(928),h=n(909),u=r(n(487)),l=r(n(56)),o=(a=h.AbstractNodeProgram,o(d,a),d.prototype.process=function(t,e,n){var i=this.array,n=4*+n;if(e)return i[n++]=0,i[n++]=0,i[n++]=0,void(i[n++]=0);e=(0,s.floatColor)(t.color);i[n++]=t.x,i[n++]=t.y,i[n++]=t.size,i[n]=e},d.prototype.render=function(t){var e=this.gl,n=this.program;e.useProgram(n),e.uniform1f(this.ratioLocation,1/Math.pow(t.ratio,t.nodesPowRatio)),e.uniform1f(this.scaleLocation,t.scalingRatio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.drawArrays(e.POINTS,0,this.array.length/4)},d);function d(t){t=a.call(this,t,u.default,l.default,1,4)||this;return t.bind(),t}e.default=o},814:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(928),h=r(n(853)),u=r(n(122)),o=(a=n(909).AbstractNodeProgram,o(l,a),l.prototype.process=function(t,e,n){var i=this.array,n=4*+n;if(e)return i[n++]=0,i[n++]=0,i[n++]=0,void(i[n++]=0);e=(0,s.floatColor)(t.color);i[n++]=t.x,i[n++]=t.y,i[n++]=t.size,i[n]=e},l.prototype.render=function(t){var e=this.gl,n=this.program;e.useProgram(n),e.uniform1f(this.ratioLocation,1/Math.pow(t.ratio,t.nodesPowRatio)),e.uniform1f(this.scaleLocation,t.scalingRatio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.drawArrays(e.POINTS,0,this.array.length/4)},l);function l(t){t=a.call(this,t,h.default,u.default,1,4)||this;return t.bind(),t}e.default=o},706:function(t,e){function n(t,e,n){var i="VERTEX"===t?e.VERTEX_SHADER:e.FRAGMENT_SHADER,t=e.createShader(i);if(null===t)throw new Error("loadShader: error while creating the shader");if(e.shaderSource(t,n),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS))return t;i=e.getShaderInfoLog(t);throw e.deleteShader(t),new Error("loadShader: error while compiling the shader:\n"+i+"\n"+n)}Object.defineProperty(e,"__esModule",{value:!0}),e.loadProgram=e.loadFragmentShader=e.loadVertexShader=void 0,e.loadVertexShader=function(t,e){return n("VERTEX",t,e)},e.loadFragmentShader=function(t,e){return n("FRAGMENT",t,e)},e.loadProgram=function(t,e){var n,i,o=t.createProgram();if(null===o)throw new Error("loadProgram: error while creating the program.");for(n=0,i=e.length;n<i;n++)t.attachShader(o,e[n]);if(t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw t.deleteProgram(o),new Error("loadProgram: error while linking the program.");return o}},310:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_SETTINGS=e.validateSettings=void 0;var o=i(n(622)),r=i(n(61)),a=i(n(942)),s=i(n(814)),h=i(n(860)),n=i(n(569));e.validateSettings=function(t){if("number"!=typeof t.labelDensity||t.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.")},e.DEFAULT_SETTINGS={allowInvalidContainer:!1,hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"arrow",labelFont:"Arial",labelSize:14,labelWeight:"normal",edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",stagePadding:30,labelDensity:.07,labelGridCellSize:60,labelRenderedSizeThreshold:20,nodeReducer:null,edgeReducer:null,zIndex:!1,labelRenderer:o.default,hoverRenderer:r.default,edgeLabelRenderer:a.default,nodeProgramClasses:{circle:s.default,border:h.default},edgeProgramClasses:{arrow:n.default}}},159:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(187),h=a(n(886)),_=a(n(764)),u=a(n(269)),l=a(n(134)),N=n(928),c=n(730),d=n(310),g=a(n(508)),f=n(700),p=n(751),A=h.default.nodeExtent,m=(0,N.getPixelRatio)(),y=(0,N.getPixelRatio)();function T(t,e,n){if(!n.hasOwnProperty("x")||!n.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'+e+'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?');return n.color||(n.color=t.defaultNodeColor),n.label||""===n.label||(n.label=null),void 0!==n.label&&null!==n.label?n.label=""+n.label:n.label=null,n.size||(n.size=0),n.hasOwnProperty("hidden")||(n.hidden=!1),n.hasOwnProperty("highlighted")||(n.highlighted=!1),n.type&&""!==n.type||(n.type=t.defaultNodeType),n.zIndex||(n.zIndex=0),n}var v,o=(v=s.EventEmitter,o(w,v),w.prototype.createCanvas=function(t){var e=(0,N.createElement)("canvas",{position:"absolute"},{class:"G-"+t});return this.elements[t]=e,this.container.appendChild(e),e},w.prototype.createCanvasContext=function(t){var e=this.createCanvas(t);return this.canvasContexts[t]=e.getContext("2d",{preserveDrawingBuffer:!1,antialias:!1}),this},w.prototype.createWebGLContext=function(t){var e,n=this.createCanvas(t),i={preserveDrawingBuffer:!1,antialias:!1};return(e=n.getContext("webgl2",i))||(e=n.getContext("webgl",i)),e=e||n.getContext("experimental-webgl",i),this.webGLContexts[t]=e,this},w.prototype.initializeCache=function(){var e=this,t=this.graph,n=0;t.forEachNode(function(t){e.nodeKeyToIndex[t]=n++}),n=0,t.forEachEdge(function(t){e.edgeKeyToIndex[t]=n++})},w.prototype.bindCameraHandlers=function(){var t=this;return this.activeListeners.camera=function(){t._scheduleRefresh()},this.camera.on("updated",this.activeListeners.camera),this},w.prototype.bindEventHandlers=function(){var d=this;this.activeListeners.handleResize=function(){d.needToSoftProcess=!0,d._scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize);function c(t,e,n,i,o){return n-o<t&&t<n+o&&i-o<e&&e<i+o&&Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2))<o}function g(t,e){return e=d.viewportToFramedGraph({x:t,y:e}),d.quadtree.point(e.x,1-e.y)}this.activeListeners.handleMove=function(t){for(var e=g(t.x,t.y),n=1/0,i=null,o=0,r=e.length;o<r;o++){var a,s=e[o],h=d.nodeDataCache[s],u=d.framedGraphToViewport(h),l=d.scaleSize(h.size);!c(t.x,t.y,u.x,u.y,l)||(a=Math.sqrt(Math.pow(t.x-u.x,2)+Math.pow(t.y-u.y,2)))<n&&(n=a,i=s)}return i&&d.hoveredNode!==i&&!d.nodeDataCache[i].hidden?(d.hoveredNode&&d.emit("leaveNode",{node:d.hoveredNode}),d.hoveredNode=i,d.emit("enterNode",{node:i}),void d.scheduleHighlightedNodesRender()):d.hoveredNode&&(h=d.nodeDataCache[d.hoveredNode],u=d.framedGraphToViewport(h),l=d.scaleSize(h.size),!c(t.x,t.y,u.x,u.y,l))?(s=d.hoveredNode,d.hoveredNode=null,d.emit("leaveNode",{node:s}),d.scheduleHighlightedNodesRender()):void 0};function t(s){return function(t){for(var e=g(t.x,t.y),n=0,i=e.length;n<i;n++){var o=e[n],r=d.nodeDataCache[o],a=d.framedGraphToViewport(r),r=d.scaleSize(r.size);if(c(t.x,t.y,a.x,a.y,r))return d.emit(s+"Node",{node:o,captor:t,event:t})}return d.emit(s+"Stage",{event:t})}}return this.activeListeners.handleClick=t("click"),this.activeListeners.handleRightClick=t("rightClick"),this.activeListeners.handleDoubleClick=t("doubleClick"),this.activeListeners.handleDown=t("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},w.prototype.bindGraphHandlers=function(){var e=this,n=this.graph;return this.activeListeners.graphUpdate=function(){e.needToProcess=!0,e._scheduleRefresh()},this.activeListeners.softGraphUpdate=function(){e.needToSoftProcess=!0,e._scheduleRefresh()},this.activeListeners.addNodeGraphUpdate=function(t){e.nodeKeyToIndex[t.key]=n.order-1,e.activeListeners.graphUpdate()},this.activeListeners.addEdgeGraphUpdate=function(t){e.nodeKeyToIndex[t.key]=n.order-1,e.activeListeners.graphUpdate()},n.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),n.on("nodeDropped",this.activeListeners.graphUpdate),n.on("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),n.on("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),n.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),n.on("edgeDropped",this.activeListeners.graphUpdate),n.on("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),n.on("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),n.on("edgesCleared",this.activeListeners.graphUpdate),n.on("cleared",this.activeListeners.graphUpdate),this},w.prototype.process=function(t){var e=this;void 0===t&&(t=!1);var n=this.graph,i=this.settings,o=this.getDimensions(),r=[1/0,-1/0],a=[1/0,-1/0];this.quadtree.clear(),this.labelGrid.resizeAndClear(o,i.labelGridCellSize),this.highlightedNodes=new Set,this.nodeExtent=A(n,["x","y"]);var o=new _.default,s=(0,N.matrixFromCamera)(o.getState(),this.getDimensions(),this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.normalizationFunction=(0,N.createNormalizationFunction)(this.customBBox||this.nodeExtent);for(var h={},u=n.nodes(),l=0,d=u.length;l<d;l++){var c=u[l],g=Object.assign({},n.getNodeAttributes(c));i.nodeReducer&&(g=i.nodeReducer(c,g)),h[(m=T(this.settings,c,g)).type]=(h[m.type]||0)+1,this.nodeDataCache[c]=m,this.normalizationFunction.applyTo(m);var f=this.getGraphDimensions().height,p=this.getGraphDimensions().width,f=Math.max(f,p),p=this.customBBox||this.nodeExtent,p=(p.y[1]+p.y[0])/2;m.maxY1=.5+(m.maxY1-p)/f,m.minY0=.5+(m.minY0-p)/f,this.settings.zIndex&&(m.zIndex<r[0]&&(r[0]=m.zIndex),m.zIndex>r[1]&&(r[1]=m.zIndex))}for(w in h){if(!this.nodePrograms.hasOwnProperty(w))throw new Error('Sigma: could not find a suitable program for node type "'+w+'"!');t||this.nodePrograms[w].allocate(h[w]),h[w]=0}for(this.settings.zIndex&&r[0]!==r[1]&&(u=(0,N.zIndexOrdering)(r,function(t){return e.nodeDataCache[t].zIndex},u)),l=0,d=u.length;l<d;l++){c=u[l];var m=this.nodeDataCache[c];this.quadtree.add(c,m.x,1-m.y,m.size/this.width),m.label&&this.labelGrid.add(c,m.size,this.framedGraphToViewport(m,{matrix:s})),this.nodePrograms[m.type].process(m,m.hidden,h[m.type]++),m.highlighted&&!m.hidden&&this.highlightedNodes.add(c),this.nodeKeyToIndex[c]=l}this.labelGrid.organize();for(var y,v,w,b={},S=n.edges(),l=0,d=S.length;l<d;l++){var x=S[l],g=Object.assign({},n.getEdgeAttributes(x));i.edgeReducer&&(g=i.edgeReducer(x,g)),b[y=this.settings,(v=g).color||(v.color=y.defaultEdgeColor),v.label||(v.label=""),v.size||(v.size=.5),v.hasOwnProperty("hidden")||(v.hidden=!1),v.type&&""!==v.type||(v.type=y.defaultEdgeType),v.zIndex||(v.zIndex=0),(m=v).type]=(b[m.type]||0)+1,this.edgeDataCache[x]=m,this.settings.zIndex&&(m.zIndex<a[0]&&(a[0]=m.zIndex),m.zIndex>a[1]&&(a[1]=m.zIndex))}for(w in b){if(!this.edgePrograms.hasOwnProperty(w))throw new Error('Sigma: could not find a suitable program for edge type "'+w+'"!');t||this.edgePrograms[w].allocate(b[w]),b[w]=0}for(this.settings.zIndex&&a[0]!==a[1]&&(S=(0,N.zIndexOrdering)(a,function(t){return e.edgeDataCache[t].zIndex},S)),l=0,d=S.length;l<d;l++){x=S[l],m=this.edgeDataCache[x];var P=n.extremities(x),k=this.nodeDataCache[P[0]],L=this.nodeDataCache[P[1]];m.nodeExtent=this.width;P=m.hidden||k.hidden||L.hidden;this.edgePrograms[m.type].process(k,L,m,P,b[m.type]++),this.nodeKeyToIndex[x]=l}for(w in this.edgePrograms){var M=this.edgePrograms[w];t||"function"!=typeof M.computeIndices||M.computeIndices()}return this},w.prototype._refresh=function(){return this.needToProcess?this.process():this.needToSoftProcess&&this.process(!0),this.needToProcess=!1,this.needToSoftProcess=!1,this.render(),this},w.prototype._scheduleRefresh=function(){var t=this;return this.renderFrame||(this.renderFrame=(0,N.requestFrame)(function(){t._refresh(),t.renderFrame=null})),this},w.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var t,e,n=this.camera.getState();e=1<=n.ratio?new Set(this.graph.nodes()):(t=this.viewRectangle(),new Set(this.quadtree.rectangle(t.x1,1-t.y1,t.x2,1-t.y2,t.height)));var i=this.labelGrid.getLabelsToDisplay(n.ratio,this.settings.labelDensity);this.displayedLabels=new Set;for(var o=this.canvasContexts.labels,r=0,a=i.length;r<a;r++){var s,h,u,l=i[r],d=this.nodeDataCache[l];d.hidden||(s=(u=this.framedGraphToViewport(d)).x,h=u.y,(u=this.scaleSize(d.size))<this.settings.labelRenderedSizeThreshold||e.has(l)&&(this.displayedLabels.add(l),this.settings.labelRenderer(o,{key:l,label:d.label,color:"#000",size:u,x:s,y:h,icon:d.icon,state:d.state,tags:d.tags},this.settings)))}return this},w.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var t=this.canvasContexts.edgeLabels;t.clearRect(0,0,this.width,this.height);for(var e=(0,c.edgeLabelsToDisplayFromNodes)({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedLabels,highlightedNodes:this.highlightedNodes}),n=0,i=e.length;n<i;n++){var o,r,a,s=e[n],h=this.graph.extremities(s),u=this.nodeDataCache[h[0]],l=this.nodeDataCache[h[1]],d=this.edgeDataCache[e[n]];d.hidden||u.hidden||l.hidden||(o=(a=this.framedGraphToViewport(u)).x,r=a.y,a=(u=this.framedGraphToViewport(l)).x,l=u.y,u=this.scaleSize(d.size),this.settings.edgeLabelRenderer(t,{key:s,label:d.label,color:d.color,size:u,index:d.index},{key:h[0],x:o,y:r},{key:h[1],x:a,y:l},this.settings))}return this},w.prototype.renderHighlightedNodes=function(){var a=this,s=this.canvasContexts.hovers;s.clearRect(0,0,this.width,this.height);var e=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&e.push(this.hoveredNode),this.highlightedNodes.forEach(function(t){t!==a.hoveredNode&&e.push(t)}),e.forEach(function(t){return e=t,n=a.nodeDataCache[e],i=a.framedGraphToViewport(n),o=i.x,r=i.y,t=a.scaleSize(n.size),i=a.highlightedNodes.size,void a.settings.hoverRenderer(s,{key:e,label:n.label,color:n.color,size:t,x:o,y:r,icon:n.icon,isRenderBox:i<30,state:n.state,tags:n.tags},a.settings);var e,n,i,o,r});var t,n={};for(t in e.forEach(function(t){t=a.nodeDataCache[t].type;n[t]=(n[t]||0)+1}),this.hoverNodePrograms)this.hoverNodePrograms[t].allocate(n[t]||0),n[t]=0;e.forEach(function(t){t=a.nodeDataCache[t];a.hoverNodePrograms[t.type].process(t,t.hidden,n[t.type]++)})},w.prototype.scheduleHighlightedNodesRender=function(){var t=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=(0,N.requestFrame)(function(){t.renderHighlightedNodesFrame=null,t.renderHighlightedNodes(),t.renderEdgeLabels()}))},w.prototype.render=function(){if(this.renderFrame&&((0,N.cancelFrame)(this.renderFrame),this.renderFrame=null,this.needToProcess=!1,this.needToSoftProcess=!1),this.resize(),this.clear(),this.updateCachedValues(),!this.graph.order)return this;var t,e=this.mouseCaptor,n=this.camera.isAnimated()||e.isMoving||e.draggedEvents||e.currentWheelDirection,i=this.camera.getState(),o=this.getDimensions(),r=this.getGraphDimensions(),e=this.getSetting("stagePadding")||0;for(a in this.matrix=(0,N.matrixFromCamera)(i,o,r,e),this.invMatrix=(0,N.matrixFromCamera)(i,o,r,e,!0),this.nodePrograms)(t=this.nodePrograms[a]).bind(),t.bufferData(),t.render({matrix:this.matrix,width:this.width,height:this.height,ratio:i.ratio,nodesPowRatio:.5,scalingRatio:y});if(!this.settings.hideEdgesOnMove||!n)for(var a in this.edgePrograms)(t=this.edgePrograms[a]).bind(),t.bufferData(),t.render({matrix:this.matrix,width:this.width,height:this.height,ratio:i.ratio,edgesPowRatio:.5,scalingRatio:y});return this.settings.hideLabelsOnMove&&n||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes(),this.emit("afterRender")),this},w.prototype.updateCachedValues=function(){var t=this.camera.getState().ratio;this.cameraSizeRatio=Math.pow(t,.5)},w.prototype.animateNodes_=function(t,e,n,i){return(0,p.animateNodes)(t,e,n,i)},w.prototype.getCamera=function(){return this.camera},w.prototype.getGraph=function(){return this.graph},w.prototype.getMouseCaptor=function(){return this.mouseCaptor},w.prototype.getTouchCaptor=function(){return this.touchCaptor},w.prototype.getDimensions=function(){return{width:this.width,height:this.height}},w.prototype.getCanvasContexts=function(){return this.canvasContexts},w.prototype.getGraphDimensions=function(){var t=this.customBBox||this.nodeExtent;return{width:t.x[1]-t.x[0]||1,height:t.y[1]-t.y[0]||1}},w.prototype.getNodeDisplayData=function(t){t=this.nodeDataCache[t];return t?Object.assign({},t):void 0},w.prototype.getEdgeDisplayData=function(t){t=this.edgeDataCache[t];return t?Object.assign({},t):void 0},w.prototype.getSettings=function(){return r({},this.settings)},w.prototype.getSetting=function(t){return this.settings[t]},w.prototype.setSetting=function(t,e){return this.settings[t]=e,(0,d.validateSettings)(this.settings),this.needToProcess=!0,this._scheduleRefresh(),this},w.prototype.updateSetting=function(t,e){return this.settings[t]=e(this.settings[t]),(0,d.validateSettings)(this.settings),this.needToProcess=!0,this._scheduleRefresh(),this},w.prototype.resize=function(){var t,e=this.width,n=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,0===this.width){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");this.width=window.screen.width}if(0===this.height){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");this.height=window.screen.height}if(e===this.width&&n===this.height)return this;for(t in this.elements){var i=this.elements[t];i.style.width=this.width+"px",i.style.height=this.height+"px"}for(t in this.canvasContexts)this.elements[t].setAttribute("width",this.width*m+"px"),this.elements[t].setAttribute("height",this.height*m+"px"),1!==m&&this.canvasContexts[t].scale(m,m);for(t in this.webGLContexts)this.elements[t].setAttribute("width",this.width*y+"px"),this.elements[t].setAttribute("height",this.height*y+"px"),this.webGLContexts[t].viewport(0,0,this.width*y,this.height*y);return this},w.prototype.clear=function(){return this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},w.prototype.refresh=function(){return this.needToProcess=!0,this._refresh(),this},w.prototype.scheduleRefresh=function(){return this.needToProcess=!0,this._scheduleRefresh(),this},w.prototype.getViewportZoomedState=function(t,e){var n=this.camera.getState(),i=n.ratio,o=n.angle,r=n.x,a=n.y,n=e/i,i={x:this.width/2,y:this.height/2},t=this.viewportToFramedGraph(t),i=this.viewportToFramedGraph(i);return{angle:o,x:(t.x-i.x)*(1-n)+r,y:(t.y-i.y)*(1-n)+a,ratio:e}},w.prototype.viewRectangle=function(){var t=0*this.width/8,e=0*this.height/8,n=this.viewportToFramedGraph({x:0-t,y:0-e}),t=this.viewportToFramedGraph({x:this.width+t,y:0-e}),e=this.viewportToFramedGraph({x:0,y:this.height+e});return{x1:n.x,y1:n.y,x2:t.x,y2:t.y,height:t.y-e.y}},w.prototype.framedGraphToViewport=function(t,e){void 0===e&&(e={});var n=!!e.cameraState||!!e.viewportDimensions||!e.graphDimensions,e=e.matrix||(n?(0,N.matrixFromCamera)(e.cameraState||this.camera.getState(),e.viewportDimensions||this.getDimensions(),e.graphDimensions||this.getGraphDimensions(),e.padding||this.getSetting("stagePadding")||0):this.matrix),t=[t.x,t.y,1],t=(0,f.multiplyVec)(e,t);return{x:(1+t[0])*this.width/2,y:(1-t[1])*this.height/2}},w.prototype.viewportToFramedGraph=function(t,e){void 0===e&&(e={});var n=!!e.cameraState||!!e.viewportDimensions||!e.graphDimensions,e=e.matrix||(n?(0,N.matrixFromCamera)(e.cameraState||this.camera.getState(),e.viewportDimensions||this.getDimensions(),e.graphDimensions||this.getGraphDimensions(),e.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix),t=[t.x/this.width*2-1,1-t.y/this.height*2,1],t=(0,f.multiplyVec)(e,t);return{x:t[0],y:t[1]}},w.prototype.viewportToGraph=function(t){return this.normalizationFunction.inverse(this.viewportToFramedGraph(t))},w.prototype.graphToViewport=function(t){return this.framedGraphToViewport(this.normalizationFunction(t))},w.prototype.getBBox=function(){return A(this.graph,["x","y"])},w.prototype.getCustomBBox=function(){return this.customBBox},w.prototype.setCustomBBox=function(t){return this.customBBox=t,this._scheduleRefresh(),this},w.prototype.kill=function(){var t=this.graph;this.emit("kill"),this.removeAllListeners(),this.camera.removeListener("updated",this.activeListeners.camera),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),t.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),t.removeListener("nodeDropped",this.activeListeners.graphUpdate),t.removeListener("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),t.removeListener("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),t.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),t.removeListener("edgeDropped",this.activeListeners.graphUpdate),t.removeListener("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),t.removeListener("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),t.removeListener("edgesCleared",this.activeListeners.graphUpdate),t.removeListener("cleared",this.activeListeners.graphUpdate),this.quadtree=new l.default,this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&((0,N.cancelFrame)(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&((0,N.cancelFrame)(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var e=this.container;e.firstChild;)e.removeChild(e.firstChild)},w.prototype.scaleSize=function(t){return t/this.cameraSizeRatio},w.prototype.getCanvases=function(){return r({},this.elements)},w);function w(t,e,n){void 0===n&&(n={});var i=v.call(this)||this;if(i.elements={},i.canvasContexts={},i.webGLContexts={},i.activeListeners={},i.quadtree=new l.default,i.labelGrid=new c.LabelGrid,i.nodeDataCache={},i.edgeDataCache={},i.nodeKeyToIndex={},i.edgeKeyToIndex={},i.nodeExtent={x:[0,1],y:[0,1]},i.matrix=(0,f.identity)(),i.invMatrix=(0,f.identity)(),i.customBBox=null,i.normalizationFunction=(0,N.createNormalizationFunction)({x:[-1/0,1/0],y:[-1/0,1/0]}),i.cameraSizeRatio=1,i.width=0,i.height=0,i.displayedLabels=new Set,i.highlightedNodes=new Set,i.hoveredNode=null,i.renderFrame=null,i.renderHighlightedNodesFrame=null,i.needToProcess=!1,i.needToSoftProcess=!1,i.nodePrograms={},i.hoverNodePrograms={},i.edgePrograms={},i.settings=(0,N.assignDeep)({},d.DEFAULT_SETTINGS,n),(0,d.validateSettings)(i.settings),(0,N.validateGraph)(t),!(e instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");i.graph=t,i.container=e,i.initializeCache(),i.createWebGLContext("edges"),i.createWebGLContext("nodes"),i.createCanvasContext("edgeLabels"),i.createCanvasContext("labels"),i.createCanvasContext("hovers"),i.createWebGLContext("hoverNodes"),i.createCanvasContext("edge"),i.createCanvasContext("mouse");var o,e=i.webGLContexts.nodes;for(o in e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.enable(e.BLEND),(e=i.webGLContexts.edges).blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.enable(e.BLEND),i.settings.nodeProgramClasses){var r=i.settings.nodeProgramClasses[o];i.nodePrograms[o]=new r(i.webGLContexts.nodes),i.hoverNodePrograms[o]=new r(i.webGLContexts.hoverNodes)}for(o in i.settings.edgeProgramClasses){var a=i.settings.edgeProgramClasses[o];i.edgePrograms[o]=new a(i.webGLContexts.edges)}return i.resize(),i.camera=new _.default,i.bindCameraHandlers(),i.mouseCaptor=new u.default(i.elements.mouse,i),i.touchCaptor=new g.default(i.elements.mouse,i),i.bindEventHandlers(),i.bindGraphHandlers(),i.process(),i.render(),i}e.default=o},751:function(t,o,e){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0}),o.animateNodes=o.ANIMATE_DEFAULTS=void 0;var f=e(928),r=n(e(358));o.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150},o.animateNodes=function(a,s,t,h){var e,u=Object.assign({},o.ANIMATE_DEFAULTS,t),l="function"==typeof u.easing?u.easing:r.default[u.easing],d=Date.now(),c={};for(e in s){var n,i=s[e];for(n in c[e]={},i)c[e][n]=a.getNodeAttribute(e,n)}var g=null;return function t(){var e=(Date.now()-d)/u.duration;if(1<=e){for(var n in s){var i=s[n];for(o in i)a.setNodeAttribute(n,o,i[o])}"function"==typeof h&&h()}else{for(var n in e=l(e),s){i=s[n];var o,r=c[n];for(o in i)a.setNodeAttribute(n,o,i[o]*e+r[o]*(1-e))}g=(0,f.requestFrame)(t)}}(),function(){g&&(0,f.cancelFrame)(g)}}},358:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.cubicInOut=e.cubicOut=e.cubicIn=e.quadraticInOut=e.quadraticOut=e.quadraticIn=e.linear=void 0,e.linear=function(t){return t},e.quadraticIn=function(t){return t*t},e.quadraticOut=function(t){return t*(2-t)},e.quadraticInOut=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},e.cubicIn=function(t){return t*t*t},e.cubicOut=function(t){return--t*t*t+1},e.cubicInOut=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)};var n={linear:e.linear,quadraticIn:e.quadraticIn,quadraticOut:e.quadraticOut,quadraticInOut:e.quadraticInOut,cubicIn:e.cubicIn,cubicOut:e.cubicOut,cubicInOut:e.cubicInOut};e.default=n},928:function(t,e,n){var s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.validateGraph=e.canUse32BitsIndices=e.extractPixel=e.matrixFromCamera=e.getCorrectionRatio=e.floatColor=e.zIndexOrdering=e.createNormalizationFunction=e.getPixelRatio=e.createElement=e.cancelFrame=e.requestFrame=e.assignDeep=e.isPlainObject=void 0;var o=i(n(186)),d=n(700);function h(t){return"object"==_typeof(t)&&null!==t&&t.constructor===Object}e.isPlainObject=h,e.assignDeep=function t(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e=e||{};for(var o=0,r=n.length;o<r;o++){var a=n[o];if(a)for(var s in a)h(a[s])?e[s]=t(e[s],a[s]):e[s]=a[s]}return e},e.requestFrame="undefined"!=typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,0)},e.cancelFrame="undefined"!=typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:function(t){return clearTimeout(t)},e.createElement=function(t,e,n){var i=document.createElement(t);if(e)for(var o in e)i.style[o]=e[o];if(n)for(var o in n)i.setAttribute(o,n[o]);return i},e.getPixelRatio=function(){return void 0!==window.devicePixelRatio?window.devicePixelRatio:1},e.createNormalizationFunction=function(t){var e=s(t.x,2),n=e[0],i=e[1],e=s(t.y,2),t=e[0],e=e[1],o=Math.max(i-n,e-t);0===o&&(o=1);var r=(i+n)/2,a=(e+t)/2,t=function(t){return{x:.5+(t.x-r)/o,y:.5+(t.y-a)/o}};return t.applyTo=function(t){t.x=.5+(t.x-r)/o,t.y=.5+(t.y-a)/o},t.inverse=function(t){return{x:r+o*(t.x-.5),y:a+o*(t.y-.5)}},t.ratio=o,t},e.zIndexOrdering=function(t,n,e){return e.sort(function(t,e){t=n(t)||0,e=n(e)||0;return t<e?-1:e<t?1:0})};var a={},n=new Int8Array(4),u=new Int32Array(n.buffer,0,1),l=new Float32Array(n.buffer,0,1),c=/^\s*rgba?\s*\(/,g=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function f(t,e){t=t.height/t.width,e=e.height/e.width;return t<1&&1<e||1<t&&e<1?1:Math.min(Math.max(e,1/e),Math.max(1/t,t))}e.floatColor=function(t){if(void 0!==a[t])return a[t];var e,n=0,i=0,o=0,r=1;"#"===t[0]?o=4===t.length?(n=parseInt(t.charAt(1)+t.charAt(1),16),i=parseInt(t.charAt(2)+t.charAt(2),16),parseInt(t.charAt(3)+t.charAt(3),16)):(n=parseInt(t.charAt(1)+t.charAt(2),16),i=parseInt(t.charAt(3)+t.charAt(4),16),parseInt(t.charAt(5)+t.charAt(6),16)):!c.test(t)||(e=t.match(g))&&(n=+e[1],i=+e[2],o=+e[3],e[4]&&(r=+e[4])),r=255*r|0,u[0]=4278190079&(r<<24|o<<16|i<<8|n);n=l[0];return a[t]=n},e.getCorrectionRatio=f,e.matrixFromCamera=function(t,e,n,i,o){var r=t.angle,a=t.ratio,s=t.x,h=t.y,u=e.width,l=e.height,t=(0,d.identity)(),i=Math.min(u,l)-2*i,n=f(e,n);return o?((0,d.multiply)(t,(0,d.translate)((0,d.identity)(),s,h)),(0,d.multiply)(t,(0,d.scale)((0,d.identity)(),a)),(0,d.multiply)(t,(0,d.rotate)((0,d.identity)(),r)),(0,d.multiply)(t,(0,d.scale)((0,d.identity)(),u/i/2/n,l/i/2/n))):((0,d.multiply)(t,(0,d.scale)((0,d.identity)(),i/u*2*n,i/l*2*n)),(0,d.multiply)(t,(0,d.rotate)((0,d.identity)(),-r)),(0,d.multiply)(t,(0,d.scale)((0,d.identity)(),1/a)),(0,d.multiply)(t,(0,d.translate)((0,d.identity)(),-s,-h))),t},e.extractPixel=function(t,e,n,i){i=i||new Uint8Array(4);return t.readPixels(e,n,1,1,t.RGBA,t.UNSIGNED_BYTE,i),i},e.canUse32BitsIndices=function(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||!!t.getExtension("OES_element_index_uint")},e.validateGraph=function(t){if(!(0,o.default)(t))throw new Error("Sigma: invalid graph instance.");t.forEachNode(function(t,e){if(!Number.isFinite(e.x)||!Number.isFinite(e.y))throw new Error("Sigma: Coordinates of node "+t+" are invalid. A node must have a numeric 'x' and 'y' attribute.")})}},700:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.multiplyVec=e.multiply=e.translate=e.rotate=e.scale=e.identity=void 0,e.identity=function(){return Float32Array.of(1,0,0,0,1,0,0,0,1)},e.scale=function(t,e,n){return t[0]=e,t[4]="number"==typeof n?n:e,t},e.rotate=function(t,e){var n=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=n,t[3]=-n,t[4]=e,t},e.translate=function(t,e,n){return t[6]=e,t[7]=n,t},e.multiply=function(t,e){var n=t[0],i=t[1],o=t[2],r=t[3],a=t[4],s=t[5],h=t[6],u=t[7],l=t[8],d=e[0],c=e[1],g=e[2],f=e[3],p=e[4],m=e[5],y=e[6],v=e[7],e=e[8];return t[0]=d*n+c*r+g*h,t[1]=d*i+c*a+g*u,t[2]=d*o+c*s+g*l,t[3]=f*n+p*r+m*h,t[4]=f*i+p*a+m*u,t[5]=f*o+p*s+m*l,t[6]=y*n+v*r+e*h,t[7]=y*i+v*a+e*u,t[8]=y*o+v*s+e*l,t},e.multiplyVec=function(t,e){var n=t[0],i=t[1],o=t[2],r=t[3],a=t[4],s=t[5],h=t[6],u=t[7],l=t[8],d=e[0],c=e[1],t=e[2],e=Array.isArray(e)?[0,0,0]:Float32Array.of(0,0,0);return e[0]=d*n+c*r+t*h,e[1]=d*i+c*a+t*u,e[2]=d*o+c*s+t*l,e}}},o={},i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(607);function i(t){var e=o[t];if(void 0!==e)return e.exports;e=o[t]={exports:{}};return n[t].call(e.exports,e,e.exports,i),e.exports}var n,o});var highlighedNodes=new Set,highlighedEdges=new Set,selectedNodes=new Set,selectedEdges=new Set,copyNodes=new Set,hideNodes=new Set,hideEdges=new Set,lockNodeIds=new Set,lockNodes=new Map,deleteNodes=new Set,deleteEdges=new Set,undoList=[],redoList=[],mergeNodes=new Map,mergeEdges=new Map,GraphState=!0,FastV={},MultipleSelect=!1,container=document.getElementById("myGraph"),graph=new Sigma.MultiGraph,renderer=new Sigma.Sigma(graph,container,{defaultEdgeType:"arrow",zIndex:!0,allowInvalidContainer:!0,renderEdgeLabels:!0}),groupClusters={};function undo(){var t,e;0!=undoList.length&&(t=undoList[undoList.length-1],(e={x:0,y:0}).x=graph.getNodeAttributes(t.id).x,e.y=graph.getNodeAttributes(t.id).y,renderer.viewportToGraph(e),graph.setNodeAttribute(t.id,"x",t.x),graph.setNodeAttribute(t.id,"y",t.y),undoList=undoList.slice(0,undoList.length-1))}function redo(){var t;0!=redoList.length&&(t=redoList[redoList.length-1],graph.setNodeAttribute(t.id,"x",t.x),graph.setNodeAttribute(t.id,"y",t.y),redoList=redoList.slice(0,redoList.length-1))}function hide(){selectedNodes.forEach(function(t){hideNodes.add(t)}),renderer.refresh()}function show(){hideNodes.clear(),renderer.refresh()}function drag(){GraphState=!1}function select(){GraphState=!0}function setRadio2Maximize(){camera.ratio=.01,renderer.refresh()}document.onkeydown=function(t){17==t.keyCode&&!1===MultipleSelect&&(MultipleSelect=!0)},document.onkeyup=function(t){17==t.keyCode&&(MultipleSelect=!1)},window.oncontextmenu=function(t){t.preventDefault()};var colorToRGB=function(t,e){if("string"==typeof(t=""+t))return"#"==t.charAt(0)&&(t=t.substring(1)),3==t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),/^[0-9a-fA-F]{6}$/.test(t)?"rgb("+parseInt(t.substr(0,2),16)+","+parseInt(t.substr(2,2),16)+","+parseInt(t.substr(4,2),16)+","+e+")":void 0};function getDiagramData_GL(){var n=[],i=[];return graph.forEachNode(function(t,e){e={attributes:e};e.key=t,n.push(toCanvasData(e,0))}),graph.forEachEdge(function(t,e){e={attributes:e};i.push(toCanvasData(0,e))}),{nodes:n,edges:i}}function initGraph(t,e,n){graph.clear(),t.map(function(t){graph.addNode(t.key,toWebglData(t,0))}),sortLinks={},e.map(function(t){sortLinks[t.from+""+t.to]?sortLinks[t.from+""+t.to].push(t):sortLinks[t.to+""+t.from]?sortLinks[t.to+""+t.from].push(t):(t.index=0,sortLinks[t.from+""+t.to]=[t])});var i=[];Object.keys(sortLinks).map(function(t){sortLinks[t].map(function(t,e){t.index=0,i.push(t)})}),i.map(function(t){graph.addEdge(t.from,t.to,toWebglData(0,t))}),graph.forEachNode(function(t){1<graph.neighbors(t).length?graph.setNodeAttribute(t,"isTreeExpanded",!0):graph.setNodeAttribute(t,"isTreeExpanded",!1)}),graph.forEachNode(function(t,e){void 0===e.group||""==e.group||-1===e.group||groupClusters[e.group]||(groupClusters[e.group]={label:e.group,positions:[]})});var o,r,a=["#a3a539","#8455d0","#79bf3b","#52c758","#9e34a6","#cd6ee4","#e057be","#cdbd2c","#a1bd40","#d03b94","#4d6fdd","#418d27","#6f50ad","#3ecb88","#e23c77","#a784e0","#ab306c","#d47aca","#83bf6d","#d8ac43","#94468c","#db3750","#e69334","#e96da2","#428f51","#547327","#6d599c","#ad7820","#d06224","#8b7f2e","#ce402d","#a7b36c","#6dbe93","#a73547","#406ca9","#e5a4e0","#9297dc","#b974a4","#8e4663","#e16a6e","#48c0bc","#307b5b","#60ace1","#6d5e25","#d6a972","#bc6a78","#a67644","#ea95a3","#e28060","#9a4b2e"];for(o in groupClusters)groupClusters[o].color=a.pop();for(r in graph.forEachNode(function(t,e){var n;0==e.visible&&hideNodes.add(t),e.group&&-1!==e.group&&""!=e.group&&1!=e.isGroup?(n=groupClusters[e.group],e.size=Math.sqrt(graph.degree(t)),e.color=n.color,n.positions.push({x:e.x,y:e.y})):1==e.isGroup&&(e.hidden=!0)}),graph.forEachEdge(function(t,e){0==e.visible&&hideEdges.add(t)}),groupClusters)groupClusters[r].x=groupClusters[r].positions.reduce(function(t,e){return t+e.x},0)/groupClusters[r].positions.length,groupClusters[r].y=groupClusters[r].positions.reduce(function(t,e){return t+e.y},0)/groupClusters[r].positions.length;e=document.createElement("div");e.id="clustersLayer";var s,h="";for(s in groupClusters){var u=groupClusters[s],l=renderer.graphToViewport(u);h+="<div id='".concat(u.label,'\' class="clusterLabel" style="top:').concat(l.y,"px;left:").concat(l.x,"px;color:").concat(u.color,'">').concat(u.label,"</div>")}e.innerHTML=h,container.insertBefore(e,document.getElementsByClassName("G-hovers")[0]),setTimeout(function(){graph.on("nodeAdded",function(t){t.key;debounce(modelChange,1e3,0)(getDiagramData_GL().nodes,getDiagramData_GL().edges)}),graph.on("edgeAdded",function(t){t.key,t.source,t.target;debounce(modelChange,1e3,0)(getDiagramData_GL().nodes,getDiagramData_GL().edges)}),graph.on("nodeDropped",function(t){t.key;debounce(modelChange,1e3,0)(getDiagramData_GL().nodes,getDiagramData_GL().edges)}),graph.on("nodeDropped",function(t){t.key;debounce(modelChange,1e3,0)(getDiagramData_GL().nodes,getDiagramData_GL().edges)})},1e3),renderer.on("afterRender",function(){if(JSON.stringify(groupClusters)!==JSON.stringify({})){for(var t in groupClusters){var e=groupClusters[t],n=document.getElementById(e.label);e.positions=[];var i=renderer.graphToViewport(e);e.hidden?n.style.top="-300px":(n.style.top="".concat(i.y,"px"),n.style.left="".concat(i.x,"px"))}var o;0<groups.length&&group_border&&(o=document.querySelector("canvas"),renderer.getCanvasContexts().hovers.clearRect(0,0,o.width,o.height),graph.forEachNode(function(t,e){e.group&&-1!==e.group&&1!=e.isGroup&&groupClusters[e.group].positions.push({x:e.x,y:e.y})}),graph.forEachNode(function(t,e){var n,i,o,r,a;1!=e.isGroup||(n=groupClusters[e.id_])&&!n.hidden&&(o=i=1/0,a=r=-1/0,n.positions.map(function(t){t=renderer.graphToViewport(t);Math.round(t.x)<i&&(i=Math.round(t.x)),Math.round(t.y)<o&&(o=Math.round(t.y)),Math.round(t.x)>r&&(r=Math.round(t.x)),Math.round(t.y)>a&&(a=Math.round(t.y))}),(e=renderer.getCanvasContexts().labels).strokeStyle=n.color,e.fillStyle=colorToRGB(n.color,"0.02"),e.fillRect(i-10,o-10,r-i+30,a-o+30),e.strokeRect(i-10,o-10,r-i+30,a-o+30),n.minx=i-10,n.miny=o-10,n.maxx=r+30,n.maxy=a+30)}))}})}function drawRoundRect(t,e,n,i,o,r,a){t.beginPath(),t.moveTo(e+r,n),t.lineTo(e+i-r,n),t.quadraticCurveTo(e+i,n,e+i,n+r),t.lineTo(e+i,n+o-r),t.quadraticCurveTo(e+i,n+o,e+i-r,n+o),t.lineTo(e+r,n+o),t.quadraticCurveTo(e,n+o,e,n+o-r),t.lineTo(e,n+r),t.quadraticCurveTo(e,n,e+r,n),t.closePath()}function drawHover(t,e,n){var i=n.labelSize,o=n.labelFont,r=n.labelWeight,a=i-2,s=e.tags[0]?e.tags[0].text:"",h=e.tags[1]?e.tags[1].text:"",u=e.tags[2]?e.tags[2].text:"";if(100<selectedNodes.size)return t.beginPath(),t.fillStyle="#fff",t.shadowOffsetX=0,t.shadowOffsetY=2,t.shadowBlur=8,t.shadowColor="#000",t.arc(e.x,e.y,e.size+2,0,2*Math.PI),t.closePath(),void t.fill();t.font="".concat(r," ").concat(i,"px ").concat(o);var l=t.measureText(s).width;t.font="".concat(r," ").concat(a,"px ").concat(o);var d=h?t.measureText(h).width:0;t.font="".concat(r," ").concat(a,"px ").concat(o);n=u?t.measureText(u).width:0,l=Math.max(l,d,n),d=Math.round(e.x),n=Math.round(e.y),l=Math.round(l+i/2+e.size+3),Math.round(i/2+4),h&&Math.round(a/2+9),u&&Math.round(a/2+9);t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.fillStyle=e.color,t.font="".concat(r," ").concat(i,"px ").concat(o),t.fillStyle=e.tags[0].style.fill,t.fillRect(d+e.size,n-e.size/4,l,16),t.fillStyle=e.tags[0].style.font_color,t.fillText(s,e.x+e.size+3,n-e.size/4+12),h&&(t.fillStyle=e.tags[1].style.fill,t.fillRect(d+e.size,n-(30+e.size/4),l,16),t.fillStyle=e.tags[1].style.font_color,t.font="".concat(r," ").concat(a,"px ").concat(o),t.fillText(h,e.x+e.size+3,n-(30+e.size/4)+12)),u&&(t.fillStyle=e.tags[1].style.fill,t.fillRect(d+e.size,n+(30-e.size/4),l,16),t.fillStyle=e.tags[2].style.font_color,t.font="".concat(r," ").concat(a,"px ").concat(o),t.fillText(u,e.x+e.size+3,n+(30-e.size/4)+12))}renderer.setSetting("nodeReducer",function(t,e){e=_objectSpread({},e);return selectedNodes.has(t)&&(e.highlighted=!0),highlighedNodes.has(t)&&(e.color="#f00"),lockNodes.has(t)&&(e.x=lockNodes.get(t).x,e.y=lockNodes.get(t).y),(deleteNodes.has(t)||hideNodes.has(t))&&(e.hidden=!0),e}),renderer.setSetting("edgeReducer",function(t,e,n){e=_objectSpread({},e);return selectedEdges.has(t)&&(e.color="#167cF3",e.size=1.1*e.size),hideEdges.has(t)&&(e.hidden=!0),e});var dragging_timer,camera=renderer.getCamera(),captor=renderer.getMouseCaptor(),draggedNode=null,dragging=!1;renderer.on("downNode",function(t){var e;GraphState&&1!==graph.getNodeAttributes(t.node).isLocking&&(dragging_timer=setTimeout(function(){dragging=!0},500),e=renderer.viewportToGraph(t.event),undoList.push({type:"drag",id:t.node,x:e.x,y:e.y}),draggedNode=t.node,camera.disable(),isFrameSelection=!1)});var down_x,down_y,selection_w,selection_h,timer=null,isFrameSelection=!1,isFrameSelectionTimer=1e3;function draw(t,e,n,i,o){var r=document.querySelector("canvas");t.fillStyle="rgba(22,124,243,0.07)",t.clearRect(0,0,r.width,r.height),t.fillRect(e,n,i,o)}function doEdgeCollideWithPoint(t,e,n,i,o,r,a){return!(t<n-a&&t<o-a)&&(!(e<i-a&&e<r-a)&&(!(n+a<t&&o+a<t)&&(!(i+a<e&&r+a<e)&&Math.abs((o-n)*(i-e)-(n-t)*(r-i))/Math.sqrt(Math.pow(o-n,2)+Math.pow(r-i,2))<a)))}function isClickGroup(t){var n,i,o,r,a,e=t.x,s=t.y,h=!1,u=!1;if(JSON.stringify(groupClusters)!==JSON.stringify({})){for(var l in groupClusters){var d=groupClusters[l];if(e>d.minx&&e<d.maxx&&s>d.miny&&s<d.maxy){if(groupClusters[n=l].hidden){h=!0;break}u=groupClusters[n].hidden=!0;break}}!h&&u&&(i={},o={},r=renderer.viewportToGraph({x:t.x,y:t.y}),a={},graph.forEachNode(function(t,e){e.group==n&&1!=e.isGroup&&(o[t]={x:r.x,y:r.y},i[t]={size:e.size,x:e.x,y:e.y},e.size=0,a=e)}),renderer.animateNodes_(graph,o,{duration:500,easing:"linear"}),setTimeout(function(){var t=toWebglData(toCanvasData({key:1,attributes:a},0),0);t.size=30<Object.keys(o).length?30:Object.keys(o).length,t.isGroupNode="1",t.icon="",t.x=r.x,t.y=r.y,t.positions=i,t.label=n,t.group_id=n,t.zIndex=2,graph.hasNode(n+"___mergeNode")||graph.addNode(n+"___mergeNode",t)},500))}}function DeleteTagsofnode(r){var a,s,t;.3<renderer.cameraSizeRatio||(a=0,s={},graph.nodes().forEach(function(t){var e=graph.getNodeAttributes(t),n=Math.round(renderer.getCanvasContexts().labels.measureText(e.label).width+7+renderer.scaleSize(e.size)+3),i=renderer.graphToViewport({x:e.x,y:e.y}).x+renderer.scaleSize(e.size)+n-10,o=renderer.graphToViewport({x:e.x,y:e.y}).y-renderer.scaleSize(e.size)/4+12,n=renderer.graphToViewport({x:e.x,y:e.y}).y-(30+renderer.scaleSize(e.size)/4)+12,e=renderer.graphToViewport({x:e.x,y:e.y}).y+(10+renderer.scaleSize(e.size)/4)+12;Math.abs(r.x-i)<30&&(Math.abs(r.y-o)<8?(a=2,s=t):Math.abs(r.y-n)<8?(a=1,s=t):Math.abs(r.y-e)<11&&(a=3,s=t))}),0!=a&&((t=toCanvasData({attributes:graph.getNodeAttributes(s)},0)).key=s,postmessageToParent({currnode:t,label:t.tags[a-1],event_name:"删除实体标签",index:a,graph_id:graph_id})))}function Edge_interaction(f,t){var p,n,e,i,o;GraphState&&(i=renderer.viewRectangle(),p=new Set(renderer.quadtree.rectangle(i.x1,1-i.y1,i.x2,1-i.y2,i.height)),selectedNodes.clear(),selectedEdges.clear(),renderer.refresh(),graph.edges().forEach(function(t){var e,n,i,o,r,a,s,h,u,l,d,c=graph.source(t),g=graph.target(t);(p.has(c)||p.has(g))&&(e=renderer.graphToViewport({x:graph.getNodeAttributes(c).x,y:graph.getNodeAttributes(c).y}),n=renderer.graphToViewport({x:graph.getNodeAttributes(g).x,y:graph.getNodeAttributes(g).y}),i=f,0!=(o=graph.getEdgeAttribute(t,"index"))?(r=graph.getNodeAttributes(c).x,a=graph.getNodeAttributes(g).x,s=graph.getNodeAttributes(c).y,h=graph.getNodeAttributes(g).y,u=renderer.viewportToGraph(i),c=(r+a)/2,g=(s+h)/2,g=o%2==0?(d=c-.25*(l=o/2)*Math.sqrt((a-r)*(a-r)+(h-s)*(h-s))*(s-g)/Math.sqrt((r-c)*(r-c)+(s-g)*(s-g)),g+.25*l*Math.sqrt((a-r)*(a-r)+(h-s)*(h-s))*(r-c)/Math.sqrt((r-c)*(r-c)+(s-g)*(s-g))):(d=c+.25*(l=(o+1)/2)*Math.sqrt((a-r)*(a-r)+(h-s)*(h-s))*(s-g)/Math.sqrt((r-c)*(r-c)+(s-g)*(s-g)),g-.25*l*Math.sqrt((a-r)*(a-r)+(h-s)*(h-s))*(r-c)/Math.sqrt((r-c)*(r-c)+(s-g)*(s-g))),(doEdgeCollideWithPoint(u.x,u.y,r,s,d,g,4*graph.getEdgeAttribute(t,"size"))||doEdgeCollideWithPoint(u.x,u.y,d,g,a,h,4*graph.getEdgeAttribute(t,"size")))&&(0==selectedEdges.size&&selectedEdges.add(t),renderer.refresh())):doEdgeCollideWithPoint(i.x,i.y,e.x,e.y,n.x,n.y,4*graph.getEdgeAttribute(t,"size"))&&(0==selectedEdges.size&&selectedEdges.add(t),renderer.refresh()))}),n=[],e=[],selectedNodes.forEach(function(t){var e=graph.getNodeAttributes(t);e.key=t,n.push(toCanvasData(e,0))}),selectedEdges.forEach(function(t){t={attributes:graph.getEdgeAttributes(t)};e.push(toCanvasData(0,t))}),messagefuntion.changeSelection(n,e,n[0],n[1]),i={event:"doubleClickLink",event_name:t,node:{},link:{}},selectedEdges.forEach(function(t){o=graph.getEdgeAttributes(t)}),i.link=o,null!=i.link&&("边双击"==t&&send_newGraph("属性",[],[o]),postmessageToParent(i)))}function toggleFullScreen(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()}captor.on("mousedown",function(t){down_x=t.x,down_y=t.y,timer=setTimeout(function(){Math.abs(down_x-t.x)<5&&Math.abs(down_y-t.y)<5&&(camera.disable(),isFrameSelection=!0)},isFrameSelectionTimer)}),captor.on("mousemove",function(n){dragging&&draggedNode?window.requestAnimationFrame(function(){var t,e;draggedNode&&(t=graph.getNodeAttributes(draggedNode),isFrameSelection=!1,e=renderer.viewportToGraph(n),"1"===t.isGroupNode&&Object.keys(t.positions).map(function(t){graph.setNodeAttribute(t,"x",e.x),graph.setNodeAttribute(t,"y",e.y)}),graph.setNodeAttribute(draggedNode,"x",e.x),graph.setNodeAttribute(draggedNode,"y",e.y))}):isFrameSelection&&(selection_w=n.x-down_x,selection_h=n.y-down_y,draw(renderer.getCanvasContexts().mouse,down_x,down_y,selection_w,selection_h))}),captor.on("mouseup",function(t){var e,n,i,o,r;draggedNode&&(e=renderer.getCanvasContexts().mouse,n=document.querySelector("canvas"),e.clearRect(0,0,n.width,n.height),graph.setNodeAttribute(draggedNode,"hidden",!1),t=renderer.viewportToGraph(t),graph.setNodeAttribute(draggedNode,"x",t.x),graph.setNodeAttribute(draggedNode,"y",t.y)),dragging=!1,draggedNode=null,camera.enable(),clearTimeout(timer),isFrameSelection&&GraphState?((0<Math.abs(selection_w)||0<Math.abs(selection_h))&&(i=selection_w+down_x,o=selection_h+down_y,graph.nodes().forEach(function(t){var e=renderer.graphToViewport({x:graph.getNodeAttributes(t).x,y:graph.getNodeAttributes(t).y});(e.x>down_x&&e.x<i&&e.y>down_y&&e.y<o||e.x>down_x&&e.x<i&&e.y>o&&e.y<down_y||e.x<down_x&&e.x>i&&e.y>down_y&&e.y<o||e.x<down_x&&e.x>i&&e.y>o&&e.y<down_y)&&selectedNodes.add(t)}),renderer.refresh()),graph.toJSON().edges.map(function(t){selectedNodes.has(t.source)&&selectedNodes.has(t.target)&&selectedEdges.add(t.key)}),isFrameSelection=!1,r=document.querySelector("canvas"),renderer.getCanvasContexts().mouse.clearRect(0,0,r.width,r.height)):(isFrameSelection=!1,r=document.querySelector("canvas"),renderer.getCanvasContexts().mouse.clearRect(0,0,r.width,r.height))}),renderer.on("clickNode",function(t){var e=t.node;t.captor,t.event;if(clearTimeout(dragging_timer),GraphState){if("1"===graph.getNodeAttributes(e).isGroupNode){var n=graph.getNodeAttributes(e);return renderer.animateNodes_(graph,n.positions,{duration:500,easing:"linear"}),graph.dropNode(e),void(groupClusters[n.group_id].hidden=!1)}!1===MultipleSelect&&selectedNodes.clear(),selectedNodes.has(e)?selectedNodes.delete(e):selectedNodes.add(e);var i=[],o=[];selectedNodes.forEach(function(t){var e={attributes:graph.getNodeAttributes(t)};e.key=t,i.push(toCanvasData(e,0))}),selectedEdges.forEach(function(t){t={attributes:graph.getEdgeAttributes(t)};o.push(toCanvasData(0,t))}),messagefuntion.changeSelection(i,o,i[0],i[1]);t={event:"clickNode",event_name:"节点点击",node:{},link:{}},n=toCanvasData({attributes:graph.getNodeAttributes(e)},0);n.key=e,t.node=n,postmessageToParent(t),renderer.refresh()}}),renderer.on("doubleClickNode",function(t){var e=t.node,n=(t.captor,t.event,{event:"doubleClickNode",event_name:"节点双击",node:{},link:{}}),t=toCanvasData({attributes:graph.getNodeAttributes(e)},0);t.key=e,send_newGraph("属性",[n.node=t],[]),postmessageToParent(n),renderer.refresh()}),renderer.on("rightClickNode",function(t){t.node,t.captor,t.event}),renderer.on("rightClickNode",function(t,e,n){}),renderer.on("clickStage",function(t){t=t.event;Edge_interaction(t,"边点击"),DeleteTagsofnode(t,"节点标签点击"),0==selectedEdges.size&&0<groups.length&&isClickGroup(t,"组节点点击")}),renderer.on("doubleClickStage",function(t){Edge_interaction(t.event,"边双击")}),FastV.saveAsPNG=function(){var i=_asyncToGenerator(regeneratorRuntime.mark(function t(e,n,o){var i,r,a,s,h,u,l,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:u=e.getDimensions(),i=u.width,r=u.height,a=window.devicePixelRatio||1,(s=document.createElement("DIV")).style.width="".concat(i,"px"),s.style.height="".concat(r,"px"),s.style.position="absolute",s.style.right="101%",s.style.bottom="101%",document.body.appendChild(s),h=new Sigma.Sigma(e.getGraph(),s,e.getSettings()),e.getCamera().setState(e.getCamera().getState()),e.refresh(),(u=document.createElement("CANVAS")).setAttribute("width",i*a+""),u.setAttribute("height",r*a+""),(l=u.getContext("2d")).fillStyle="#fff",l.fillRect(0,0,i*a,r*a),d=e.getCanvases(),(n?n.filter(function(t){return!!d[t]}):Object.keys(d)).forEach(function(t){l.drawImage(d[t],0,0,i*a,r*a,0,0,i*a,r*a)}),u.toBlob(function(t){var n,e,i;t&&("download"!=o?(n=[],e=[],graph.forEachNode(function(t){var e={attributes:graph.getNodeAttributes(t)};e.key=t,n.push(toCanvasData(e,0))}),graph.forEachEdge(function(t){t={attributes:graph.getEdgeAttributes(t)};e.push(toCanvasData(0,t))}),i=t,new Promise(function(e,t){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.readAsDataURL(i),n.onerror=function(){t(new Error("blobToBase64 error"))}}).then(function(t){t={g_pic:t,g_json:JSON.stringify({nodeDataArray:n,linkDataArray:e})};window.parent.postMessage(t,"*")})):saveAs(t,"graph.png")),h.kill(),s.remove()},"image/png");case 22:case"end":return t.stop()}},t)}));return function(t,e,n){return i.apply(this,arguments)}}();var toggle_state=1,GraphStyle={background:"#fff"},GraphStyle_black={background:"#000"};function switchStyle(){toggle_state=1===toggle_state?(document.body.style.background=GraphStyle_black.background,2):(document.body.style.background=GraphStyle.background,1)}function openNodeChild(){1==selectedNodes.size&&graph.neighbors(Array.from(selectedNodes)[0]).map(function(t){graph.setNodeAttribute(t,"hidden",!1)})}function shrinkNodeChild(){1==selectedNodes.size&&graph.neighbors(Array.from(selectedNodes)[0]).map(function(t){graph.setNodeAttribute(t,"hidden",!0)})}function updateGraphData(e,t,n){e&&0<e.length&&e.map(function(t){e.map(function(e){graph.updateNode(e.key,function(t){return toWebglData(e,0)})})}),t&&0<t.length&&t.map(function(t){graph.mergeEdgeAttributes(t,{})})}function toWebglData(t,e){return t?{x:t.loc?+t.loc.split(" ")[0]:100,y:t.loc?+t.loc.split(" ")[1]:100,id_:t.id||"",type_:t.type||"",type_key:t.type_key||"",type_text:t.type_text||"",size:t.width?t.width/20:3,label:t.text||"",text_color:t.text_color||"",color:t.d_stroke||"",stroke:t.stroke||"",icon:t.icon?"./img/icon/"+t.icon+".svg":"",node_icon:t.icon||"",visible:null==t.visible||t.visible,group:t.group||void 0,isGroup:t.isGroup||void 0,tags:t.tags||[],isExpand:t.isExpand||0,isHighlighted:t.isHighlighted||0,isLocking:t.isLocking||0,tag_source:t.tag_source||"",isTreeExpanded:t.isTreeExpanded||!1,fields:t.fields||[]}:e?{from:e.from,to:e.to,index:e.index||0,patt:e.patt||"flow",size:e.stroke_width?e.stroke_width/4:1,color:e.d_stroke||"#333",text:e.text||"",label:e.text||"",font_size:e.font_size||"12",visible:null==e.visible||e.visible,font_color:e.font_color||"#333",type_:e.type||"",type_key:e.type_key||"",type_text:e.type_text||"",direction:e.direction||"1",isloop:!1,id_:e.id||"",fields:e.fields||[],list:e.list||[]}:void 0}function toCanvasData(t,e){return t?(graph.nodes().length<100&&(t.size=t.size/(80/graph.nodes().length)),{key:t.key,stroke:t.attributes.color||"",fill:t.attributes.color||"",d_fill:t.attributes.color||"",d_stroke:t.attributes.color||"",icon:t.attributes.node_icon||"",text:t.attributes.label||"",group:t.attributes.group||void 0,id:t.attributes.id_||"",type:t.attributes.type_||"",type_key:t.attributes.type_key||"",type_text:t.attributes.type_text||"",loc:t.attributes.x+" "+t.attributes.y,visible:null==t.attributes.visible||t.attributes.visible,text_color:t.attributes.text_color||"#333",width:t.attributes.size?20*t.attributes.size:3,height:t.attributes.size?20*t.attributes.size:3,isExpand:t.attributes.isExpand||0,isHighlighted:t.attributes.isHighlighted||0,isLocking:t.attributes.isLocking||0,isTreeExpanded:t.attributes.isTreeExpanded||!1,fields:t.attributes.fields||[],tags:t.attributes.tags||[],isGroup:t.attributes.isGroup||void 0}):e?{key:e.key||"",patt:e.attributes.patt||"flow",from:e.attributes.from+"",to:e.attributes.to+"",text:e.attributes.text||"",font_size:e.attributes.font_size||12,font_color:e.attributes.font_color||"#333",stroke:e.attributes.color||"#333",d_stroke:e.attributes.color||"#333",stroke_width:e.attributes.size?e.attributes.size-3:1,type:e.attributes.type_||"",type_key:e.attributes.type_key||"",type_text:e.attributes.type_text||"",direction:e.attributes.direction||1,id:e.attributes.id_||"",fields:e.attributes.fields||[],visible:null==e.attributes.visible||e.attributes.visible,list:e.attributes.list||[]}:void 0}function ParallelRouteLink(){go.Link.call(this)}function RadialLayout(){go.Layout.call(this),this._root=null,this._layerThickness=100,this._maxLayers=1/0}function RadialVertex(t){go.LayoutVertex.call(this,t),this.distance=1/0,this.laid=!1,this.angle=0,this.sweep=0,this.radius=0}FastV.addGraphData=function(t,e,n){t&&0<t.length&&t.map(function(t){var e=renderer.viewportToGraph({x:t.loc?t.loc.split(" ")[0]:1e3*Math.random(),y:t.loc?t.loc.split(" ")[1]:1e3*Math.random()});t.loc=e.x+" "+e.y,graph.hasNode(t.key)||graph.addNode(t.key,toWebglData(t,0)),selectedNodes.add(t.key)}),e&&0<e.length&&e.map(function(n){var t,i=!0;graph.forEachEdge(function(t,e){e.id==n.id&&(i=!1,selectedEdges.add(t))}),i&&(t=graph.addEdge(n.from,n.to,toWebglData(0,n)),selectedEdges.add(t))});var i=[];selectedNodes.forEach(function(t){var e={attributes:graph.getNodeAttributes(t)};e.key=t,i.push(toCanvasData(e,0))}),messagefuntion.changeSelection(i,[],i[0],i[1])},FastV.getGraphData=function(t){var e=graph.toJSON(),n=[],i=[];e.nodes.map(function(t){n.push(toCanvasData(t,0))}),e.edges.map(function(t){i.push(toCanvasData(0,t))}),RcallBack&&t({data:{nodeArray:n,linkArray:i}})},FastV.getSelectedGraphData=function(t){var e=graph.toJSON(),n=[],i=[];e.nodes.map(function(t){selectedNodes.has(t.key)&&n.push(toCanvasData(t,0))}),e.edges.map(function(t){selectedEdges.has(t.key)&&i.push(toCanvasData(0,t))})},FastV.send_graph_property=function(){postmessageToParent({event:"graph_property",event_name:"图属性参数",nodesCount:graph.order,nodesSelectCount:selectedNodes.size,nodesVisibleCount:hideNodes.size,linksCount:graph.size,linksSelectCount:selectedEdges.size,linksVisibleCount:hideEdges.size})},FastV.selectAll=function(){graph.nodes().map(function(t){selectedNodes.add(t)}),graph.edges().map(function(t){selectedEdges.add(t)}),renderer.refresh(),FastV.send_graph_property()},FastV.reverseSelected=function(){var t=graph.nodes().filter(function(t){return-1===Array.from(selectedNodes).indexOf(t)}),e=graph.edges().filter(function(t){return-1===Array.from(selectedEdges).indexOf(t)});selectedNodes.clear(),selectedEdges.clear(),t.map(function(t){return selectedNodes.add(t)}),e.map(function(t){return selectedEdges.add(t)}),renderer.refresh(),FastV.send_graph_property()},FastV.setLockNodeState=function(t,e,n){if(t){var i=_createForOfIteratorHelper(selectedNodes);try{for(i.s();!(o=i.n()).done;){var o=o.value;lockNodes.set(o,{x:graph.getNodeAttributes(o).x,y:graph.getNodeAttributes(o).y}),graph.setNodeAttribute(o,"isLocking",1),graph.setNodeAttribute(o,"state",1)}}catch(t){i.e(t)}finally{i.f()}}else{var r=_createForOfIteratorHelper(selectedNodes);try{for(r.s();!(a=r.n()).done;){var a=a.value;lockNodes.has(a)&&(lockNodes.delete(a),graph.setNodeAttribute(a,"isLocking",0),graph.setNodeAttribute(a,"state",0))}}catch(t){r.e(t)}finally{r.f()}}var s=[],h=_createForOfIteratorHelper(lockNodes);try{for(h.s();!(d=h.n()).done;){var u=_slicedToArray(d.value,2),l=u[0],d=(u[1],{attributes:graph.getNodeAttributes(l)}),u=toCanvasData(d,0);u.key=l,u.tag_source=d.isLocking?"lock":"",s.push(u)}}catch(t){h.e(t)}finally{h.f()}postmessageToParent({event:"ChangedNodeState",event_name:"实体状态发生改变",nodeArray:s,linkArray:[]})},FastV.undo=function(){if(0!=undoList.length){var t=undoList[undoList.length-1];if("delete"==t.type)return t.nodes.map(function(t){deleteNodes.has(t)&&deleteNodes.delete(t)}),renderer.refresh(),void(undoList=undoList.slice(0,undoList.length-1));var e=undoList[undoList.length-1],t={x:0,y:0};t.x=graph.getNodeAttributes(e.id).x,t.y=graph.getNodeAttributes(e.id).y;renderer.viewportToGraph(t);graph.setNodeAttribute(e.id,"x",e.x),graph.setNodeAttribute(e.id,"y",e.y),postmessageToParent({event:"canUndo",event_name:"是否可以撤回",redo:0,undo:(undoList=undoList.slice(0,undoList.length-1)).length})}},FastV.redo=function(){var t;0!=redoList.length&&(t=redoList[redoList.length-1],graph.setNodeAttribute(t.id,"x",t.x),graph.setNodeAttribute(t.id,"y",t.y),redoList=redoList.slice(0,redoList.length-1))},FastV.selectNodesAndLinks=function(t){var e=t.nodeArray,t=t.linkArray;e.map(function(e){graph.forEachNode(function(t){t==e.key&&selectedNodes.add(t)})}),t.map(function(n){graph.forEachEdge(function(t){var e=graph.getEdgeAttributes(t);n.id==e.id&&selectedEdges.add(t)})}),renderer.refresh();var n=[],i=[];selectedNodes.forEach(function(t){var e={attributes:graph.getNodeAttributes(t)};e.key=t,n.push(toCanvasData(e,0))}),selectedEdges.forEach(function(t){t={attributes:graph.getEdgeAttributes(t)};i.push(toCanvasData(0,t))}),messagefuntion.changeSelection(n,i,n[0],n[1]),FastV.send_graph_property()},FastV.setSelectEntity2hide=function(){selectedNodes.forEach(function(t){hideNodes.add(t)}),graph.forEachEdge(function(t){var e=graph.getEdgeAttributes(t);(hideNodes.has(e.source)||hideNodes.has(e.target))&&hideEdges.add(t)}),renderer.refresh(),FastV.send_graph_property()},FastV.setEntity2hidebyType=function(e,n){graph.forEachNode(function(t){graph.getNodeAttributes(t).type_==e&&(n&&hideNodes.has(t)?hideNodes.delete(t):hideNodes.add(t))}),hideEdges.clear(),graph.forEachEdge(function(t){var e=graph.getEdgeAttributes(t);(hideNodes.has(e.source)||hideNodes.has(e.target))&&hideEdges.add(t)}),renderer.refresh(),FastV.send_graph_property()},FastV.setEntity2hide=function(){graph.nodes().map(function(t){selectedNodes.has(t)?hideNodes.has(t)&&hideNodes.delete(t):hideNodes.add(t)}),graph.forEachEdge(function(t){var e=graph.getEdgeAttributes(t);(hideNodes.has(e.source)||hideNodes.has(e.target))&&hideEdges.add(t)}),renderer.refresh(),FastV.send_graph_property()},FastV.show_allEntity=function(){hideNodes.clear(),hideEdges.clear(),renderer.refresh(),FastV.send_graph_property()},FastV.resetZoom=function(){renderer.getCamera().animatedZoom({duration:200,factor:2.5})},FastV.zoomToFit=function(t){renderer&&renderer.getCamera().animatedReset({duration:200})},FastV.moveToSelectNode=function(){var t;0<selectedNodes.size&&(t=renderer.getNodeDisplayData(Array.from(selectedNodes)[0]),renderer.getCamera().animate(_objectSpread(_objectSpread({},t),{},{ratio:.05}),{duration:600}))},FastV.change_selectordrag=function(t){GraphState=t},FastV.select_Both_ends=function(){var e;1==selectedEdges.size&&(e=Array.from(selectedEdges)[0],graph.nodes().map(function(t){t!=graph.source(e)&&t!=graph.target(e)||selectedNodes.add(t)}),renderer.refresh(),FastV.send_graph_property())},FastV.select_links=function(){var e;1==selectedNodes.size&&(e=Array.from(selectedNodes)[0],graph.edges().map(function(t){graph.source(t)!=e&&graph.target(t)!=e||selectedEdges.add(t)}),renderer.refresh(),FastV.send_graph_property())},FastV.select_Both_ends_links=function(){var e;1==selectedNodes.size&&(e=Array.from(selectedNodes)[0],graph.edges().map(function(t){graph.source(t)!=e&&graph.target(t)!=e||(selectedEdges.add(t),selectedNodes.has(graph.source(t))||selectedNodes.add(graph.source(t)),selectedNodes.has(graph.target(t))||selectedNodes.add(graph.target(t)))}),renderer.refresh(),FastV.send_graph_property())},FastV.merge_vertex=function(t,e,n){var i,r,o,a,s;selectedNodes.size<1||(i=graph.getNodeAttributes(Array.from(selectedNodes)[0]),r=[],(o=JSON.parse(JSON.stringify(i))).tag_source="merge",o.x=o.x+10,o.y=o.y+10,o.label=t||"",o.clusterLabel=e||"",o.tag=n||"",o.label="合并("+selectedNodes.size+"):\n"+i.label,o.state=2,a="",selectedNodes.forEach(function(t){a+=t}),graph.addNode(a,o),selectedNodes.forEach(function(o){mergeNodes.set(o,graph.getNodeAttributes(o)),graph.forEachEdge(o,function(t,e,n,i){r.push(t),mergeEdges.set(t,{source:n,target:i,attr:graph.getEdgeAttributes(t)}),n==o&&graph.addEdge(a,i,graph.getEdgeAttributes(t)),i==o&&graph.addEdge(n,a,graph.getEdgeAttributes(t))}),graph.dropNode(o)}),graph.setNodeAttribute(a,"N_1",Array.from(selectedNodes)),graph.setNodeAttribute(a,"E_1",r),selectedNodes.clear(),selectedEdges.clear(),selectedNodes.add(a),s=[],selectedNodes.forEach(function(t){var e={attributes:graph.getNodeAttributes(t)};e.key=t,s.push(toCanvasData(e,0))}),messagefuntion.changeSelection(s,edges,s[0],s[1]),FastV.send_graph_property())},FastV.cacel_merge_node=function(){var t,n;1==selectedNodes.size&&(selectedNodes.clear(),"merge"==(t=graph.getNodeAttributes(Array.from(selectedNodes)[0])).tag_source&&(t.N_1.map(function(t){graph.addNode(t,mergeNodes.get(t)),selectedNodes.add(t),mergeNodes.delete(t)}),t.E_1.map(function(t){graph.addEdge(mergeEdges.get(t).source,mergeEdges.get(t).target,mergeEdges.get(t).attr),mergeEdges.delete(t)}),graph.forEachEdge(Array.from(selectedNodes)[0],function(t,e,n,i){graph.dropEdge(t)}),graph.dropNode(Array.from(selectedNodes)[0])),n=[],selectedNodes.forEach(function(t){var e={attributes:graph.getNodeAttributes(t)};e.key=t,n.push(toCanvasData(e,0))}),messagefuntion.changeSelection(n,edges,n[0],n[1]),FastV.send_graph_property())},FastV.node_expandorcollapse=function(t){var e,n,i;"expandTree"==t&&1==selectedNodes.size&&(i=graph.neighbors(Array.from(selectedNodes)[0]),graph.setNodeAttribute(Array.from(selectedNodes)[0],"isTreeExpanded",!0),i.map(function(n){graph.setNodeAttribute(n,"hidden",!1),graph.forEachEdge(function(t){var e=graph.getEdgeAttributes(t);e.from!=n&&e.to!=n||selectedEdges.delete(t)})}),e=Array.from(selectedNodes)[0],(n=toCanvasData({attributes:graph.getNodeAttributes(e)},0)).key=e,n.tag_source="",graph.setNodeAttribute(e,"tag_source",""),postmessageToParent({event:"ChangedNodeState",event_name:"实体状态发生改变",nodeArray:[n],linkArray:[]})),"collapseTree"==t&&(1==selectedNodes.size&&(i=graph.neighbors(Array.from(selectedNodes)[0]),graph.setNodeAttribute(Array.from(selectedNodes)[0],"isTreeExpanded",!1),i.map(function(n){graph.setNodeAttribute(n,"hidden",!0),graph.forEachEdge(function(t){var e=graph.getEdgeAttributes(t);e.from!=n&&e.to!=n||selectedEdges.add(t)})})),t=Array.from(selectedNodes)[0],(i=toCanvasData({attributes:graph.getNodeAttributes(t)},0)).key=t,i.tag_source="coll",graph.setNodeAttribute(t,"tag_source","coll"),postmessageToParent({event:"ChangedNodeState",event_name:"实体状态发生改变",nodeArray:[i],linkArray:[]})),FastV.send_graph_property()},FastV.setNodeHighlighted=function(t){var e,n;1==selectedNodes.size&&(e=Array.from(selectedNodes)[0],t&&!highlighedNodes.has(e)?(graph.setNodeAttribute(e,"isHighlighted",1),highlighedNodes.add(e)):(highlighedNodes.delete(e),graph.setNodeAttribute(e,"isHighlighted",0)),n=[],selectedNodes.forEach(function(t){var e=toCanvasData({attributes:graph.getNodeAttributes(t)},0);e.key=t,n.push(e)}),postmessageToParent({event:"ChangedNodeState",event_name:"实体状态发生改变",nodeArray:n,linkArray:[]}),renderer.refresh(),FastV.send_graph_property())},FastV.search_entity=function(e){graph.nodes().map(function(t){graph.getNodeAttribute(t,"label")==e&&(selectedNodes.add(t),t=renderer.getNodeDisplayData(Array.from(selectedNodes)[Array.from(selectedNodes).length-1]),renderer.getCamera().animate(_objectSpread(_objectSpread({},t),{},{ratio:.05}),{duration:600}))}),renderer.refresh()},FastV.copySelection=function(){copyNodes.clear(),selectedNodes.forEach(function(t){copyNodes.add(t)}),0<copyNodes.size&&postmessageToParent({event:"ClipboardChanged",event_name:"剪贴板内容发生变化",copy_subject_size:copyNodes.size})},FastV.pasteSelection=function(){copyNodes.forEach(function(t){var e=graph.getNodeAttributes(t);graph.addNode(t+"_copy",{x:e.x+10*e.size,y:e.y-10*e.size,size:e.size,text:e.text,text_color:e.text_color,color:e.color,stroke:e.stroke,icon:e.icon,node_icon:e.node_icon,visible:e.visible,label:e.label+"_copy",label_color:e.label_color,label_size:e.label_size,clusterLabel:e.clusterLabel,clusterLabel_color:e.clusterLabel_color,clusterLabel_size:e.clusterLabel_size,tag:e.tag,tag_color:e.tag_color,tag_size:e.tag_size,isExpand:e.isExpand,isHighlighted:e.isHighlighted,isLocking:e.isLocking})}),copyNodes.clear();postmessageToParent({event:"ClipboardChanged",event_name:"剪贴板内容发生变化",copy_subject_size:0}),renderer.refresh(),FastV.send_graph_property()},FastV.deleteSelection=function(){var n=[],i=[];selectedNodes.forEach(function(t){n.push(t),deleteNodes.add(t)}),graph.forEachEdge(function(t){var e=graph.getEdgeAttributes(t);-1==n.indexOf(e.source)&&-1==n.indexOf(e.target)||(i.push(t),deleteEdges.add(t))}),undoList.push({type:"delete",nodes:n,edges:i}),renderer.refresh(),postmessageToParent({event:"canUndo",event_name:"是否可以撤回",redo:0,undo:undoList.length}),FastV.send_graph_property()},FastV.increaseZoom=function(){renderer.getCamera().animatedZoom({duration:200,factor:1.5})},FastV.decreaseZoom=function(){renderer.getCamera().animatedUnzoom({duration:200,factor:1.5})},FastV.setDiscreteNode=function(t){t?graph.nodes().map(function(t){0==graph.neighbors(t).length&&(graph.setNodeAttribute(t,"hidden",!1),hideNodes.has(t)&&hideNodes.delete(t),graph.updateNodeAttribute(t,"visible",function(t){return!0}))}):graph.nodes().map(function(t){0==graph.neighbors(t).length&&(graph.setNodeAttribute(t,"hidden",!0),hideNodes.add(t),graph.updateNodeAttribute(t,"visible",function(t){return!1}))}),FastV.send_graph_property()},function(t,e){"object"==("undefined"==typeof module?"undefined":_typeof(module))&&"object"==_typeof(module.exports)?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:void 0,function(P,t){function p(t){return null!=t&&t===t.window}var e=[],k=P.document,n=Object.getPrototypeOf,s=e.slice,m=e.concat,h=e.push,o=e.indexOf,i={},r=i.toString,y=i.hasOwnProperty,a=y.toString,u=a.call(Object),v={},w=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},l={type:!0,src:!0,nonce:!0,noModule:!0};function b(t,e,n){var i,o,r=(n=n||k).createElement("script");if(r.text=t,e)for(i in l)(o=e[i]||e.getAttribute&&e.getAttribute(i))&&r.setAttribute(i,o);n.head.appendChild(r).parentNode.removeChild(r)}function f(t){return null==t?t+"":"object"==_typeof(t)||"function"==typeof t?i[r.call(t)]||"object":_typeof(t)}var L=function t(e,n){return new t.fn.init(e,n)},d=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function c(t){var e=!!t&&"length"in t&&t.length,n=f(t);return!w(t)&&!p(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}L.fn=L.prototype={jquery:"3.4.1",constructor:L,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){t=L.merge(this.constructor(),t);return t.prevObject=this,t},each:function(t){return L.each(this,t)},map:function(n){return this.pushStack(L.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,t=+t+(t<0?e:0);return this.pushStack(0<=t&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:e.sort,splice:e.splice},L.extend=L.fn.extend=function(){var t,e,n,i,o,r=arguments[0]||{},a=1,s=arguments.length,h=!1;for("boolean"==typeof r&&(h=r,r=arguments[a]||{},a++),"object"==_typeof(r)||w(r)||(r={}),a===s&&(r=this,a--);a<s;a++)if(null!=(t=arguments[a]))for(e in t)n=t[e],"__proto__"!==e&&r!==n&&(h&&n&&(L.isPlainObject(n)||(i=Array.isArray(n)))?(o=r[e],o=i&&!Array.isArray(o)?[]:i||L.isPlainObject(o)?o:{},i=!1,r[e]=L.extend(h,o,n)):void 0!==n&&(r[e]=n));return r},L.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){return!(!t||"[object Object]"!==r.call(t)||(t=n(t))&&("function"!=typeof(t=y.call(t,"constructor")&&t.constructor)||a.call(t)!==u))},isEmptyObject:function(t){for(var e in t)return!1;return!0},globalEval:function(t,e){b(t,{nonce:e&&e.nonce})},each:function(t,e){var n,i=0;if(c(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(d,"")},makeArray:function(t,e){e=e||[];return null!=t&&(c(Object(t))?L.merge(e,"string"==typeof t?[t]:t):h.call(e,t)),e},inArray:function(t,e,n){return null==e?-1:o.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;i<n;i++)t[o++]=e[i];return t.length=o,t},grep:function(t,e,n){for(var i=[],o=0,r=t.length,a=!n;o<r;o++)!e(t[o],o)!=a&&i.push(t[o]);return i},map:function(t,e,n){var i,o,r=0,a=[];if(c(t))for(i=t.length;r<i;r++)null!=(o=e(t[r],r,n))&&a.push(o);else for(r in t)null!=(o=e(t[r],r,n))&&a.push(o);return m.apply([],a)},guid:1,support:v}),"function"==typeof Symbol&&(L.fn[Symbol.iterator]=e[Symbol.iterator]),L.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){i["[object "+e+"]"]=e.toLowerCase()});var g=function(n){function d(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(65536+i):String.fromCharCode(i>>10|55296,1023&i|56320)}function i(){x()}var t,g,b,r,o,f,c,p,S,h,u,x,P,a,k,m,s,l,y,L="sizzle"+ +new Date,v=n.document,M=0,w=0,_=ht(),N=ht(),A=ht(),T=ht(),C=function(t,e){return t===e&&(u=!0),0},D={}.hasOwnProperty,e=[],E=e.pop,F=e.push,O=e.push,B=e.slice,G=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",z="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",I="\\["+z+"*("+R+")(?:"+z+"*([*^$|!~]?=)"+z+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+z+"*\\]",V=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|.*)\\)|)",U=new RegExp(z+"+","g"),q=new RegExp("^"+z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+z+"+$","g"),H=new RegExp("^"+z+"*,"+z+"*"),Y=new RegExp("^"+z+"*([>+~]|"+z+")"+z+"*"),K=new RegExp(z+"|>"),X=new RegExp(V),W=new RegExp("^"+R+"$"),$={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+z+"*(even|odd|(([+-]|)(\\d*)n|)"+z+"*(?:([+-]|)"+z+"*(\\d+)|))"+z+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+z+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+z+"*((?:-\\d)?\\d*)"+z+"*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,Z=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,tt=/^[^{]+\{\s*\[native \w/,et=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,nt=/[+~]/,it=new RegExp("\\\\([\\da-f]{1,6}"+z+"?|("+z+")|.)","ig"),ot=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},at=vt(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{O.apply(e=B.call(v.childNodes),v.childNodes),e[v.childNodes.length].nodeType}catch(t){O={apply:e.length?function(t,e){F.apply(t,B.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function st(t,e,n,i){var o,r,a,s,h,u,l,d=e&&e.ownerDocument,c=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==c&&9!==c&&11!==c)return n;if(!i&&((e?e.ownerDocument||e:v)!==P&&x(e),e=e||P,k)){if(11!==c&&(h=et.exec(t)))if(o=h[1]){if(9===c){if(!(a=e.getElementById(o)))return n;if(a.id===o)return n.push(a),n}else if(d&&(a=d.getElementById(o))&&y(e,a)&&a.id===o)return n.push(a),n}else{if(h[2])return O.apply(n,e.getElementsByTagName(t)),n;if((o=h[3])&&g.getElementsByClassName&&e.getElementsByClassName)return O.apply(n,e.getElementsByClassName(o)),n}if(g.qsa&&!T[t+" "]&&(!m||!m.test(t))&&(1!==c||"object"!==e.nodeName.toLowerCase())){if(l=t,d=e,1===c&&K.test(t)){for((s=e.getAttribute("id"))?s=s.replace(ot,rt):e.setAttribute("id",s=L),r=(u=f(t)).length;r--;)u[r]="#"+s+" "+yt(u[r]);l=u.join(","),d=nt.test(t)&&pt(e.parentNode)||e}try{return O.apply(n,d.querySelectorAll(l)),n}catch(e){T(t,!0)}finally{s===L&&e.removeAttribute("id")}}}return p(t.replace(q,"$1"),e,n,i)}function ht(){var i=[];return function t(e,n){return i.push(e+" ")>b.cacheLength&&delete t[i.shift()],t[e+" "]=n}}function ut(t){return t[L]=!0,t}function lt(t){var e=P.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function dt(t,e){for(var n=t.split("|"),i=n.length;i--;)b.attrHandle[n[i]]=e}function ct(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function gt(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&at(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ft(a){return ut(function(r){return r=+r,ut(function(t,e){for(var n,i=a([],t.length,r),o=i.length;o--;)t[n=i[o]]&&(t[n]=!(e[n]=t[n]))})})}function pt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in g=st.support={},o=st.isXML=function(t){var e=t.namespaceURI,t=(t.ownerDocument||t).documentElement;return!J.test(e||t&&t.nodeName||"HTML")},x=st.setDocument=function(t){var e,t=t?t.ownerDocument||t:v;return t!==P&&9===t.nodeType&&t.documentElement&&(a=(P=t).documentElement,k=!o(P),v!==P&&(e=P.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",i,!1):e.attachEvent&&e.attachEvent("onunload",i)),g.attributes=lt(function(t){return t.className="i",!t.getAttribute("className")}),g.getElementsByTagName=lt(function(t){return t.appendChild(P.createComment("")),!t.getElementsByTagName("*").length}),g.getElementsByClassName=tt.test(P.getElementsByClassName),g.getById=lt(function(t){return a.appendChild(t).id=L,!P.getElementsByName||!P.getElementsByName(L).length}),g.getById?(b.filter.ID=function(t){var e=t.replace(it,d);return function(t){return t.getAttribute("id")===e}},b.find.ID=function(t,e){if(void 0!==e.getElementById&&k){t=e.getElementById(t);return t?[t]:[]}}):(b.filter.ID=function(t){var e=t.replace(it,d);return function(t){t=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return t&&t.value===e}},b.find.ID=function(t,e){if(void 0!==e.getElementById&&k){var n,i,o,r=e.getElementById(t);if(r){if((n=r.getAttributeNode("id"))&&n.value===t)return[r];for(o=e.getElementsByName(t),i=0;r=o[i++];)if((n=r.getAttributeNode("id"))&&n.value===t)return[r]}return[]}}),b.find.TAG=g.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):g.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"!==t)return r;for(;n=r[o++];)1===n.nodeType&&i.push(n);return i},b.find.CLASS=g.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&k)return e.getElementsByClassName(t)},s=[],m=[],(g.qsa=tt.test(P.querySelectorAll))&&(lt(function(t){a.appendChild(t).innerHTML="<a id='"+L+"'></a><select id='"+L+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+z+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+z+"*(?:value|"+j+")"),t.querySelectorAll("[id~="+L+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+L+"+*").length||m.push(".#.+[+~]")}),lt(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=P.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+z+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),a.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(g.matchesSelector=tt.test(l=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&lt(function(t){g.disconnectedMatch=l.call(t,"*"),l.call(t,"[s!='']:x"),s.push("!=",V)}),m=m.length&&new RegExp(m.join("|")),s=s.length&&new RegExp(s.join("|")),e=tt.test(a.compareDocumentPosition),y=e||tt.test(a.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,e=e&&e.parentNode;return t===e||!(!e||1!==e.nodeType||!(n.contains?n.contains(e):t.compareDocumentPosition&&16&t.compareDocumentPosition(e)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},C=e?function(t,e){if(t===e)return u=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!g.sortDetached&&e.compareDocumentPosition(t)===n?t===P||t.ownerDocument===v&&y(v,t)?-1:e===P||e.ownerDocument===v&&y(v,e)?1:h?G(h,t)-G(h,e):0:4&n?-1:1)}:function(t,e){if(t===e)return u=!0,0;var n,i=0,o=t.parentNode,r=e.parentNode,a=[t],s=[e];if(!o||!r)return t===P?-1:e===P?1:o?-1:r?1:h?G(h,t)-G(h,e):0;if(o===r)return ct(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?ct(a[i],s[i]):a[i]===v?-1:s[i]===v?1:0}),P},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if((t.ownerDocument||t)!==P&&x(t),g.matchesSelector&&k&&!T[e+" "]&&(!s||!s.test(e))&&(!m||!m.test(e)))try{var n=l.call(t,e);if(n||g.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){T(e,!0)}return 0<st(e,P,null,[t]).length},st.contains=function(t,e){return(t.ownerDocument||t)!==P&&x(t),y(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!==P&&x(t);var n=b.attrHandle[e.toLowerCase()],n=n&&D.call(b.attrHandle,e.toLowerCase())?n(t,e,!k):void 0;return void 0!==n?n:g.attributes||!k?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},st.escape=function(t){return(t+"").replace(ot,rt)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,n=[],i=0,o=0;if(u=!g.detectDuplicates,h=!g.sortStable&&t.slice(0),t.sort(C),u){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return h=null,t},r=st.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=r(e);return n},(b=st.selectors={cacheLength:50,createPseudo:ut,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(it,d),t[3]=(t[3]||t[4]||t[5]||"").replace(it,d),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return $.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&X.test(n)&&(e=f(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(it,d).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=_[t+" "];return e||(e=new RegExp("(^|"+z+")"+t+"("+z+"|$)"))&&_(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(t){t=st.attr(t,e);return null==t?"!="===n:!n||(t+="","="===n?t===i:"!="===n?t!==i:"^="===n?i&&0===t.indexOf(i):"*="===n?i&&-1<t.indexOf(i):"$="===n?i&&t.slice(-i.length)===i:"~="===n?-1<(" "+t.replace(U," ")+" ").indexOf(i):"|="===n&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(f,t,e,p,m){var y="nth"!==f.slice(0,3),v="last"!==f.slice(-4),w="of-type"===t;return 1===p&&0===m?function(t){return!!t.parentNode}:function(t,e,n){var i,o,r,a,s,h,u=y!=v?"nextSibling":"previousSibling",l=t.parentNode,d=w&&t.nodeName.toLowerCase(),c=!n&&!w,g=!1;if(l){if(y){for(;u;){for(a=t;a=a[u];)if(w?a.nodeName.toLowerCase()===d:1===a.nodeType)return!1;h=u="only"===f&&!h&&"nextSibling"}return!0}if(h=[v?l.firstChild:l.lastChild],v&&c){for(g=(s=(i=(o=(r=(a=l)[L]||(a[L]={}))[a.uniqueID]||(r[a.uniqueID]={}))[f]||[])[0]===M&&i[1])&&i[2],a=s&&l.childNodes[s];a=++s&&a&&a[u]||(g=s=0)||h.pop();)if(1===a.nodeType&&++g&&a===t){o[f]=[M,s,g];break}}else if(c&&(g=s=(i=(o=(r=(a=t)[L]||(a[L]={}))[a.uniqueID]||(r[a.uniqueID]={}))[f]||[])[0]===M&&i[1]),!1===g)for(;(a=++s&&a&&a[u]||(g=s=0)||h.pop())&&((w?a.nodeName.toLowerCase()!==d:1!==a.nodeType)||!++g||(c&&((o=(r=a[L]||(a[L]={}))[a.uniqueID]||(r[a.uniqueID]={}))[f]=[M,g]),a!==t)););return(g-=m)===p||g%p==0&&0<=g/p}}},PSEUDO:function(t,r){var e,a=b.pseudos[t]||b.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return a[L]?a(r):1<a.length?(e=[t,t,"",r],b.setFilters.hasOwnProperty(t.toLowerCase())?ut(function(t,e){for(var n,i=a(t,r),o=i.length;o--;)t[n=G(t,i[o])]=!(e[n]=i[o])}):function(t){return a(t,0,e)}):a}},pseudos:{not:ut(function(t){var i=[],o=[],s=c(t.replace(q,"$1"));return s[L]?ut(function(t,e,n,i){for(var o,r=s(t,null,i,[]),a=t.length;a--;)(o=r[a])&&(t[a]=!(e[a]=o))}):function(t,e,n){return i[0]=t,s(i,null,n,o),i[0]=null,!o.pop()}}),has:ut(function(e){return function(t){return 0<st(e,t).length}}),contains:ut(function(e){return e=e.replace(it,d),function(t){return-1<(t.textContent||r(t)).indexOf(e)}}),lang:ut(function(n){return W.test(n||"")||st.error("unsupported lang: "+n),n=n.replace(it,d).toLowerCase(),function(t){var e;do{if(e=k?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===a},focus:function(t){return t===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return Z.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(t=t.getAttribute("type"))||"text"===t.toLowerCase())},first:ft(function(){return[0]}),last:ft(function(t,e){return[e-1]}),eq:ft(function(t,e,n){return[n<0?n+e:n]}),even:ft(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:ft(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:ft(function(t,e,n){for(var i=n<0?n+e:e<n?e:n;0<=--i;)t.push(i);return t}),gt:ft(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[t]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(t);for(t in{submit:!0,reset:!0})b.pseudos[t]=function(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}(t);function mt(){}function yt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function vt(a,t,e){var s=t.dir,h=t.next,u=h||s,l=e&&"parentNode"===u,d=w++;return t.first?function(t,e,n){for(;t=t[s];)if(1===t.nodeType||l)return a(t,e,n);return!1}:function(t,e,n){var i,o,r=[M,d];if(n){for(;t=t[s];)if((1===t.nodeType||l)&&a(t,e,n))return!0}else for(;t=t[s];)if(1===t.nodeType||l)if(i=(o=t[L]||(t[L]={}))[t.uniqueID]||(o[t.uniqueID]={}),h&&h===t.nodeName.toLowerCase())t=t[s]||t;else{if((o=i[u])&&o[0]===M&&o[1]===d)return r[2]=o[2];if((i[u]=r)[2]=a(t,e,n))return!0}return!1}}function wt(o){return 1<o.length?function(t,e,n){for(var i=o.length;i--;)if(!o[i](t,e,n))return!1;return!0}:o[0]}function bt(t,e,n,i,o){for(var r,a=[],s=0,h=t.length,u=null!=e;s<h;s++)(r=t[s])&&(n&&!n(r,i,o)||(a.push(r),u&&e.push(s)));return a}function St(t){for(var i,e,n,o=t.length,r=b.relative[t[0].type],a=r||b.relative[" "],s=r?1:0,h=vt(function(t){return t===i},a,!0),u=vt(function(t){return-1<G(i,t)},a,!0),l=[function(t,e,n){n=!r&&(n||e!==S)||((i=e).nodeType?h:u)(t,e,n);return i=null,n}];s<o;s++)if(e=b.relative[t[s].type])l=[vt(wt(l),e)];else{if((e=b.filter[t[s].type].apply(null,t[s].matches))[L]){for(n=++s;n<o&&!b.relative[t[n].type];n++);return function t(g,f,p,m,y,e){return m&&!m[L]&&(m=t(m)),y&&!y[L]&&(y=t(y,e)),ut(function(t,e,n,i){var o,r,a,s=[],h=[],u=e.length,l=t||function(t,e,n){for(var i=0,o=e.length;i<o;i++)st(t,e[i],n);return n}(f||"*",n.nodeType?[n]:n,[]),d=!g||!t&&f?l:bt(l,s,g,n,i),c=p?y||(t?g:u||m)?[]:e:d;if(p&&p(d,c,n,i),m)for(o=bt(c,h),m(o,[],n,i),r=o.length;r--;)(a=o[r])&&(c[h[r]]=!(d[h[r]]=a));if(t){if(y||g){if(y){for(o=[],r=c.length;r--;)(a=c[r])&&o.push(d[r]=a);y(null,c=[],o,i)}for(r=c.length;r--;)(a=c[r])&&-1<(o=y?G(t,a):s[r])&&(t[o]=!(e[o]=a))}}else c=bt(c===e?c.splice(u,c.length):c),y?y(null,e,c,i):O.apply(e,c)})}(1<s&&wt(l),1<s&&yt(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(q,"$1"),e,s<n&&St(t.slice(s,n)),n<o&&St(t=t.slice(n)),n<o&&yt(t))}l.push(e)}return wt(l)}return mt.prototype=b.filters=b.pseudos,b.setFilters=new mt,f=st.tokenize=function(t,e){var n,i,o,r,a,s,h,u=N[t+" "];if(u)return e?0:u.slice(0);for(a=t,s=[],h=b.preFilter;a;){for(r in n&&!(i=H.exec(a))||(i&&(a=a.slice(i[0].length)||a),s.push(o=[])),n=!1,(i=Y.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(q," ")}),a=a.slice(n.length)),b.filter)!(i=$[r].exec(a))||h[r]&&!(i=h[r](i))||(n=i.shift(),o.push({value:n,type:r,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?st.error(t):N(t,s).slice(0)},c=st.compile=function(t,e){var n,m,y,v,w,i,o=[],r=[],a=A[t+" "];if(!a){for(n=(e=e||f(t)).length;n--;)((a=St(e[n]))[L]?o:r).push(a);(a=A(t,(m=r,v=0<(y=o).length,w=0<m.length,i=function(t,e,n,i,o){var r,a,s,h=0,u="0",l=t&&[],d=[],c=S,g=t||w&&b.find.TAG("*",o),f=M+=null==c?1:Math.random()||.1,p=g.length;for(o&&(S=e===P||e||o);u!==p&&null!=(r=g[u]);u++){if(w&&r){for(a=0,e||r.ownerDocument===P||(x(r),n=!k);s=m[a++];)if(s(r,e||P,n)){i.push(r);break}o&&(M=f)}v&&((r=!s&&r)&&h--,t&&l.push(r))}if(h+=u,v&&u!==h){for(a=0;s=y[a++];)s(l,d,e,n);if(t){if(0<h)for(;u--;)l[u]||d[u]||(d[u]=E.call(i));d=bt(d)}O.apply(i,d),o&&!t&&0<d.length&&1<h+y.length&&st.uniqueSort(i)}return o&&(M=f,S=c),l},v?ut(i):i))).selector=t}return a},p=st.select=function(t,e,n,i){var o,r,a,s,h,u="function"==typeof t&&t,l=!i&&f(t=u.selector||t);if(n=n||[],1===l.length){if(2<(r=l[0]=l[0].slice(0)).length&&"ID"===(a=r[0]).type&&9===e.nodeType&&k&&b.relative[r[1].type]){if(!(e=(b.find.ID(a.matches[0].replace(it,d),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(r.shift().value.length)}for(o=$.needsContext.test(t)?0:r.length;o--&&(a=r[o],!b.relative[s=a.type]);)if((h=b.find[s])&&(i=h(a.matches[0].replace(it,d),nt.test(r[0].type)&&pt(e.parentNode)||e))){if(r.splice(o,1),!(t=i.length&&yt(r)))return O.apply(n,i),n;break}}return(u||c(t,l))(i,e,!k,n,!e||nt.test(t)&&pt(e.parentNode)||e),n},g.sortStable=L.split("").sort(C).join("")===L,g.detectDuplicates=!!u,x(),g.sortDetached=lt(function(t){return 1&t.compareDocumentPosition(P.createElement("fieldset"))}),lt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||dt("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),g.attributes&&lt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||dt("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),lt(function(t){return null==t.getAttribute("disabled")})||dt(j,function(t,e,n){if(!n)return!0===t[e]?e.toLowerCase():(e=t.getAttributeNode(e))&&e.specified?e.value:null}),st}(P);L.find=g,L.expr=g.selectors,L.expr[":"]=L.expr.pseudos,L.uniqueSort=L.unique=g.uniqueSort,L.text=g.getText,L.isXMLDoc=g.isXML,L.contains=g.contains,L.escapeSelector=g.escape;function S(t,e,n){for(var i=[],o=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&L(t).is(n))break;i.push(t)}return i}function x(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}var M=L.expr.match.needsContext;function _(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function A(t,n,i){return w(n)?L.grep(t,function(t,e){return!!n.call(t,e,t)!==i}):n.nodeType?L.grep(t,function(t){return t===n!==i}):"string"!=typeof n?L.grep(t,function(t){return-1<o.call(n,t)!==i}):L.filter(n,t,i)}L.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?L.find.matchesSelector(i,t)?[i]:[]:L.find.matches(t,L.grep(e,function(t){return 1===t.nodeType}))},L.fn.extend({find:function(t){var e,n,i=this.length,o=this;if("string"!=typeof t)return this.pushStack(L(t).filter(function(){for(e=0;e<i;e++)if(L.contains(o[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)L.find(t,o[e],n);return 1<i?L.uniqueSort(n):n},filter:function(t){return this.pushStack(A(this,t||[],!1))},not:function(t){return this.pushStack(A(this,t||[],!0))},is:function(t){return!!A(this,"string"==typeof t&&M.test(t)?L(t):t||[],!1).length}});var T,C=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(L.fn.init=function(t,e,n){if(!t)return this;if(n=n||T,"string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this):w(t)?void 0!==n.ready?n.ready(t):t(L):L.makeArray(t,this);if(!(i="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:C.exec(t))||!i[1]&&e)return(!e||e.jquery?e||n:this.constructor(e)).find(t);if(i[1]){if(e=e instanceof L?e[0]:e,L.merge(this,L.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:k,!0)),N.test(i[1])&&L.isPlainObject(e))for(var i in e)w(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(t=k.getElementById(i[2]))&&(this[0]=t,this.length=1),this}).prototype=L.fn,T=L(k);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};function F(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}L.fn.extend({has:function(t){var e=L(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(L.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,o=this.length,r=[],a="string"!=typeof t&&L(t);if(!M.test(t))for(;i<o;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&L.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(1<r.length?L.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?o.call(L(t),this[0]):o.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(L.uniqueSort(L.merge(this.get(),L(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),L.each({parent:function(t){t=t.parentNode;return t&&11!==t.nodeType?t:null},parents:function(t){return S(t,"parentNode")},parentsUntil:function(t,e,n){return S(t,"parentNode",n)},next:function(t){return F(t,"nextSibling")},prev:function(t){return F(t,"previousSibling")},nextAll:function(t){return S(t,"nextSibling")},prevAll:function(t){return S(t,"previousSibling")},nextUntil:function(t,e,n){return S(t,"nextSibling",n)},prevUntil:function(t,e,n){return S(t,"previousSibling",n)},siblings:function(t){return x((t.parentNode||{}).firstChild,t)},children:function(t){return x(t.firstChild)},contents:function(t){return void 0!==t.contentDocument?t.contentDocument:(_(t,"template")&&(t=t.content||t),L.merge([],t.childNodes))}},function(i,o){L.fn[i]=function(t,e){var n=L.map(this,o,t);return"Until"!==i.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=L.filter(e,n)),1<this.length&&(E[i]||L.uniqueSort(n),D.test(i)&&n.reverse()),this.pushStack(n)}});var O=/[^\x20\t\r\n\f]+/g;function B(t){return t}function G(t){throw t}function j(t,e,n,i){var o;try{t&&w(o=t.promise)?o.call(t).done(e).fail(n):t&&w(o=t.then)?o.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}L.Callbacks=function(i){var n;i="string"==typeof i?(n={},L.each(i.match(O)||[],function(t,e){n[e]=!0}),n):L.extend({},i);function o(){for(a=a||i.once,e=r=!0;h.length;u=-1)for(t=h.shift();++u<s.length;)!1===s[u].apply(t[0],t[1])&&i.stopOnFalse&&(u=s.length,t=!1);i.memory||(t=!1),r=!1,a&&(s=t?[]:"")}var r,t,e,a,s=[],h=[],u=-1,l={add:function(){return s&&(t&&!r&&(u=s.length-1,h.push(t)),function n(t){L.each(t,function(t,e){w(e)?i.unique&&l.has(e)||s.push(e):e&&e.length&&"string"!==f(e)&&n(e)})}(arguments),t&&!r&&o()),this},remove:function(){return L.each(arguments,function(t,e){for(var n;-1<(n=L.inArray(e,s,n));)s.splice(n,1),n<=u&&u--}),this},has:function(t){return t?-1<L.inArray(t,s):0<s.length},empty:function(){return s=s&&[],this},disable:function(){return a=h=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=h=[],t||r||(s=t=""),this},locked:function(){return!!a},fireWith:function(t,e){return a||(e=[t,(e=e||[]).slice?e.slice():e],h.push(e),r||o()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!e}};return l},L.extend({Deferred:function(t){var r=[["notify","progress",L.Callbacks("memory"),L.Callbacks("memory"),2],["resolve","done",L.Callbacks("once memory"),L.Callbacks("once memory"),0,"resolved"],["reject","fail",L.Callbacks("once memory"),L.Callbacks("once memory"),1,"rejected"]],o="pending",a={state:function(){return o},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return a.then(null,t)},pipe:function(){var o=arguments;return L.Deferred(function(i){L.each(r,function(t,e){var n=w(o[e[4]])&&o[e[4]];s[e[1]](function(){var t=n&&n.apply(this,arguments);t&&w(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[e[0]+"With"](this,n?[t]:arguments)})}),o=null}).promise()},then:function(e,n,i){var h=0;function u(o,r,a,s){return function(){function t(){var t,e;if(!(o<h)){if((t=a.apply(n,i))===r.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==_typeof(t)||"function"==typeof t)&&t.then,w(e)?s?e.call(t,u(h,r,B,s),u(h,r,G,s)):(h++,e.call(t,u(h,r,B,s),u(h,r,G,s),u(h,r,B,r.notifyWith))):(a!==B&&(n=void 0,i=[t]),(s||r.resolveWith)(n,i))}}var n=this,i=arguments,e=s?t:function(){try{t()}catch(t){L.Deferred.exceptionHook&&L.Deferred.exceptionHook(t,e.stackTrace),h<=o+1&&(a!==G&&(n=void 0,i=[t]),r.rejectWith(n,i))}};o?e():(L.Deferred.getStackHook&&(e.stackTrace=L.Deferred.getStackHook()),P.setTimeout(e))}}return L.Deferred(function(t){r[0][3].add(u(0,t,w(i)?i:B,t.notifyWith)),r[1][3].add(u(0,t,w(e)?e:B)),r[2][3].add(u(0,t,w(n)?n:G))}).promise()},promise:function(t){return null!=t?L.extend(t,a):a}},s={};return L.each(r,function(t,e){var n=e[2],i=e[5];a[e[1]]=n.add,i&&n.add(function(){o=i},r[3-t][2].disable,r[3-t][3].disable,r[0][2].lock,r[0][3].lock),n.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?void 0:this,arguments),this},s[e[0]+"With"]=n.fireWith}),a.promise(s),t&&t.call(s,s),s},when:function(t){function e(e){return function(t){o[e]=this,r[e]=1<arguments.length?s.call(arguments):t,--n||a.resolveWith(o,r)}}var n=arguments.length,i=n,o=Array(i),r=s.call(arguments),a=L.Deferred();if(n<=1&&(j(t,a.done(e(i)).resolve,a.reject,!n),"pending"===a.state()||w(r[i]&&r[i].then)))return a.then();for(;i--;)j(r[i],e(i),a.reject);return a.promise()}});var z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;L.Deferred.exceptionHook=function(t,e){P.console&&P.console.warn&&t&&z.test(t.name)&&P.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},L.readyException=function(t){P.setTimeout(function(){throw t})};var R=L.Deferred();function I(){k.removeEventListener("DOMContentLoaded",I),P.removeEventListener("load",I),L.ready()}L.fn.ready=function(t){return R.then(t).catch(function(t){L.readyException(t)}),this},L.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--L.readyWait:L.isReady)||(L.isReady=!0)!==t&&0<--L.readyWait||R.resolveWith(k,[L])}}),L.ready.then=R.then,"complete"===k.readyState||"loading"!==k.readyState&&!k.documentElement.doScroll?P.setTimeout(L.ready):(k.addEventListener("DOMContentLoaded",I),P.addEventListener("load",I));function V(t,e,n,i,o,r,a){var s=0,h=t.length,u=null==n;if("object"===f(n))for(s in o=!0,n)V(t,e,s,n[s],!0,r,a);else if(void 0!==i&&(o=!0,w(i)||(a=!0),u&&(e=a?(e.call(t,i),null):(u=e,function(t,e,n){return u.call(L(t),n)})),e))for(;s<h;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return o?t:u?e.call(t):h?e(t[0],n):r}var U=/^-ms-/,q=/-([a-z])/g;function H(t,e){return e.toUpperCase()}function Y(t){return t.replace(U,"ms-").replace(q,H)}function K(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType}function X(){this.expando=L.expando+X.uid++}X.uid=1,X.prototype={cache:function(t){var e=t[this.expando];return e||(e={},K(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,o=this.cache(t);if("string"==typeof e)o[Y(e)]=n;else for(i in e)o[Y(i)]=e[i];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][Y(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(Y):(e=Y(e))in i?[e]:e.match(O)||[]).length;for(;n--;)delete i[e[n]]}void 0!==e&&!L.isEmptyObject(i)||(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){t=t[this.expando];return void 0!==t&&!L.isEmptyObject(t)}};var W=new X,$=new X,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function Q(t,e,n){var i,o;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(Z,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n="true"===(o=n)||"false"!==o&&("null"===o?null:o===+o+""?+o:J.test(o)?JSON.parse(o):o)}catch(t){}$.set(t,e,n)}else n=void 0;return n}L.extend({hasData:function(t){return $.hasData(t)||W.hasData(t)},data:function(t,e,n){return $.access(t,e,n)},removeData:function(t,e){$.remove(t,e)},_data:function(t,e,n){return W.access(t,e,n)},_removeData:function(t,e){W.remove(t,e)}}),L.fn.extend({data:function(n,t){var e,i,o,r=this[0],a=r&&r.attributes;if(void 0!==n)return"object"==_typeof(n)?this.each(function(){$.set(this,n)}):V(this,function(t){var e;return r&&void 0===t?void 0!==(e=$.get(r,n))||void 0!==(e=Q(r,n))?e:void 0:void this.each(function(){$.set(this,n,t)})},null,t,1<arguments.length,null,!0);if(this.length&&(o=$.get(r),1===r.nodeType&&!W.get(r,"hasDataAttrs"))){for(e=a.length;e--;)a[e]&&0===(i=a[e].name).indexOf("data-")&&(i=Y(i.slice(5)),Q(r,i,o[i]));W.set(r,"hasDataAttrs",!0)}return o},removeData:function(t){return this.each(function(){$.remove(this,t)})}}),L.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=W.get(t,e),n&&(!i||Array.isArray(n)?i=W.access(t,e,L.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=L.queue(t,e),i=n.length,o=n.shift(),r=L._queueHooks(t,e);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,function(){L.dequeue(t,e)},r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return W.get(t,n)||W.access(t,n,{empty:L.Callbacks("once memory").add(function(){W.remove(t,[e+"queue",n])})})}}),L.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?L.queue(this[0],e):void 0===n?this:this.each(function(){var t=L.queue(this,e,n);L._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&L.dequeue(this,e)})},dequeue:function(t){return this.each(function(){L.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){function n(){--o||r.resolveWith(a,[a])}var i,o=1,r=L.Deferred(),a=this,s=this.length;for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(i=W.get(a[s],t+"queueHooks"))&&i.empty&&(o++,i.empty.add(n));return n(),r.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],it=k.documentElement,ot=function(t){return L.contains(t.ownerDocument,t)},rt={composed:!0};it.getRootNode&&(ot=function(t){return L.contains(t.ownerDocument,t)||t.getRootNode(rt)===t.ownerDocument});function at(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&ot(t)&&"none"===L.css(t,"display")}function st(t,e,n,i){var o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,i||[]),e)t.style[o]=r[o];return i}function ht(t,e,n,i){var o,r,a=20,s=i?function(){return i.cur()}:function(){return L.css(t,e,"")},h=s(),u=n&&n[3]||(L.cssNumber[e]?"":"px"),l=t.nodeType&&(L.cssNumber[e]||"px"!==u&&+h)&&et.exec(L.css(t,e));if(l&&l[3]!==u){for(h/=2,u=u||l[3],l=+h||1;a--;)L.style(t,e,l+u),(1-r)*(1-(r=s()/h||.5))<=0&&(a=0),l/=r;l*=2,L.style(t,e,l+u),n=n||[]}return n&&(l=+l||+h||0,o=n[1]?l+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=l,i.end=o)),o}var ut={};function lt(t,e){for(var n,i,o,r,a,s,h=[],u=0,l=t.length;u<l;u++)(i=t[u]).style&&(n=i.style.display,e?("none"===n&&(h[u]=W.get(i,"display")||null,h[u]||(i.style.display="")),""===i.style.display&&at(i)&&(h[u]=(s=r=o=void 0,r=i.ownerDocument,a=i.nodeName,(s=ut[a])||(o=r.body.appendChild(r.createElement(a)),s=L.css(o,"display"),o.parentNode.removeChild(o),"none"===s&&(s="block"),ut[a]=s)))):"none"!==n&&(h[u]="none",W.set(i,"display",n)));for(u=0;u<l;u++)null!=h[u]&&(t[u].style.display=h[u]);return t}L.fn.extend({show:function(){return lt(this,!0)},hide:function(){return lt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){at(this)?L(this).show():L(this).hide()})}});var dt=/^(?:checkbox|radio)$/i,ct=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,gt=/^$|^module$|\/(?:java|ecma)script/i,ft={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function pt(t,e){var n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&_(t,e)?L.merge([t],n):n}function mt(t,e){for(var n=0,i=t.length;n<i;n++)W.set(t[n],"globalEval",!e||W.get(e[n],"globalEval"))}ft.optgroup=ft.option,ft.tbody=ft.tfoot=ft.colgroup=ft.caption=ft.thead,ft.th=ft.td;var yt=/<|&#?\w+;/;function vt(t,e,n,i,o){for(var r,a,s,h,u,l=e.createDocumentFragment(),d=[],c=0,g=t.length;c<g;c++)if((r=t[c])||0===r)if("object"===f(r))L.merge(d,r.nodeType?[r]:r);else if(yt.test(r)){for(a=a||l.appendChild(e.createElement("div")),s=(ct.exec(r)||["",""])[1].toLowerCase(),s=ft[s]||ft._default,a.innerHTML=s[1]+L.htmlPrefilter(r)+s[2],u=s[0];u--;)a=a.lastChild;L.merge(d,a.childNodes),(a=l.firstChild).textContent=""}else d.push(e.createTextNode(r));for(l.textContent="",c=0;r=d[c++];)if(i&&-1<L.inArray(r,i))o&&o.push(r);else if(h=ot(r),a=pt(l.appendChild(r),"script"),h&&mt(a),n)for(u=0;r=a[u++];)gt.test(r.type||"")&&n.push(r);return l}e=k.createDocumentFragment().appendChild(k.createElement("div")),(g=k.createElement("input")).setAttribute("type","radio"),g.setAttribute("checked","checked"),g.setAttribute("name","t"),e.appendChild(g),v.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue;var wt=/^key/,bt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,St=/^([^.]*)(?:\.(.+)|)/;function xt(){return!0}function Pt(){return!1}function kt(t,e){return t===function(){try{return k.activeElement}catch(t){}}()==("focus"===e)}function Lt(t,e,n,i,o,r){var a,s;if("object"==_typeof(e)){for(s in"string"!=typeof n&&(i=i||n,n=void 0),e)Lt(t,s,n,i,e[s],r);return t}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=Pt;else if(!o)return t;return 1===r&&(a=o,(o=function(t){return L().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=L.guid++)),t.each(function(){L.event.add(this,e,o,i,n)})}function Mt(t,o,r){r?(W.set(t,o,!1),L.event.add(t,o,{namespace:!1,handler:function(t){var e,n,i=W.get(this,o);if(1&t.isTrigger&&this[o]){if(i.length)(L.event.special[o]||{}).delegateType&&t.stopPropagation();else if(i=s.call(arguments),W.set(this,o,i),e=r(this,o),this[o](),i!==(n=W.get(this,o))||e?W.set(this,o,!1):n={},i!==n)return t.stopImmediatePropagation(),t.preventDefault(),n.value}else i.length&&(W.set(this,o,{value:L.event.trigger(L.extend(i[0],L.Event.prototype),i.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===W.get(t,o)&&L.event.add(t,o,xt)}L.event={global:{},add:function(e,t,n,i,o){var r,a,s,h,u,l,d,c,g,f=W.get(e);if(f)for(n.handler&&(n=(r=n).handler,o=r.selector),o&&L.find.matchesSelector(it,o),n.guid||(n.guid=L.guid++),(s=f.events)||(s=f.events={}),(a=f.handle)||(a=f.handle=function(t){return void 0!==L&&L.event.triggered!==t.type?L.event.dispatch.apply(e,arguments):void 0}),h=(t=(t||"").match(O)||[""]).length;h--;)d=g=(u=St.exec(t[h])||[])[1],c=(u[2]||"").split(".").sort(),d&&(l=L.event.special[d]||{},d=(o?l.delegateType:l.bindType)||d,l=L.event.special[d]||{},u=L.extend({type:d,origType:g,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&L.expr.match.needsContext.test(o),namespace:c.join(".")},r),(g=s[d])||((g=s[d]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(e,i,c,a)||e.addEventListener&&e.addEventListener(d,a)),l.add&&(l.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),o?g.splice(g.delegateCount++,0,u):g.push(u),L.event.global[d]=!0)},remove:function(t,e,n,i,o){var r,a,s,h,u,l,d,c,g,f,p,m=W.hasData(t)&&W.get(t);if(m&&(h=m.events)){for(u=(e=(e||"").match(O)||[""]).length;u--;)if(g=p=(s=St.exec(e[u])||[])[1],f=(s[2]||"").split(".").sort(),g){for(d=L.event.special[g]||{},c=h[g=(i?d.delegateType:d.bindType)||g]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=r=c.length;r--;)l=c[r],!o&&p!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||i&&i!==l.selector&&("**"!==i||!l.selector)||(c.splice(r,1),l.selector&&c.delegateCount--,d.remove&&d.remove.call(t,l));a&&!c.length&&(d.teardown&&!1!==d.teardown.call(t,f,m.handle)||L.removeEvent(t,g,m.handle),delete h[g])}else for(g in h)L.event.remove(t,g+e[u],n,i,!0);L.isEmptyObject(h)&&W.remove(t,"handle events")}},dispatch:function(t){var e,n,i,o,r,a=L.event.fix(t),s=new Array(arguments.length),h=(W.get(this,"events")||{})[a.type]||[],t=L.event.special[a.type]||{};for(s[0]=a,e=1;e<arguments.length;e++)s[e]=arguments[e];if(a.delegateTarget=this,!t.preDispatch||!1!==t.preDispatch.call(this,a)){for(r=L.event.handlers.call(this,a,h),e=0;(i=r[e++])&&!a.isPropagationStopped();)for(a.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==o.namespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(o=((L.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(a.result=o)&&(a.preventDefault(),a.stopPropagation()));return t.postDispatch&&t.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,i,o,r,a,s=[],h=e.delegateCount,u=t.target;if(h&&u.nodeType&&!("click"===t.type&&1<=t.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||!0!==u.disabled)){for(r=[],a={},n=0;n<h;n++)void 0===a[o=(i=e[n]).selector+" "]&&(a[o]=i.needsContext?-1<L(o,this).index(u):L.find(o,this,null,[u]).length),a[o]&&r.push(i);r.length&&s.push({elem:u,handlers:r})}return u=this,h<e.length&&s.push({elem:u,handlers:e.slice(h)}),s},addProp:function(e,t){Object.defineProperty(L.Event.prototype,e,{enumerable:!0,configurable:!0,get:w(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[L.expando]?t:new L.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){t=this||t;return dt.test(t.type)&&t.click&&_(t,"input")&&Mt(t,"click",xt),!1},trigger:function(t){t=this||t;return dt.test(t.type)&&t.click&&_(t,"input")&&Mt(t,"click"),!0},_default:function(t){t=t.target;return dt.test(t.type)&&t.click&&_(t,"input")&&W.get(t,"click")||_(t,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},L.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},L.Event=function(t,e){if(!(this instanceof L.Event))return new L.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?xt:Pt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&L.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[L.expando]=!0},L.Event.prototype={constructor:L.Event,isDefaultPrevented:Pt,isPropagationStopped:Pt,isImmediatePropagationStopped:Pt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=xt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=xt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=xt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},L.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&wt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&bt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},L.event.addProp),L.each({focus:"focusin",blur:"focusout"},function(t,e){L.event.special[t]={setup:function(){return Mt(this,t,kt),!1},trigger:function(){return Mt(this,t),!0},delegateType:e}}),L.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,o){L.event.special[t]={delegateType:o,bindType:o,handle:function(t){var e,n=t.relatedTarget,i=t.handleObj;return n&&(n===this||L.contains(this,n))||(t.type=i.origType,e=i.handler.apply(this,arguments),t.type=o),e}}}),L.fn.extend({on:function(t,e,n,i){return Lt(this,t,e,n,i)},one:function(t,e,n,i){return Lt(this,t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,L(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!=_typeof(t))return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Pt),this.each(function(){L.event.remove(this,t,n,e)});for(o in t)this.off(o,e,t[o]);return this}});var _t=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Nt=/<script|<style|<link/i,At=/checked\s*(?:[^=]|=\s*.checked.)/i,Tt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ct(t,e){return _(t,"table")&&_(11!==e.nodeType?e:e.firstChild,"tr")&&L(t).children("tbody")[0]||t}function Dt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Et(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ft(t,e){var n,i,o,r,a,s;if(1===e.nodeType){if(W.hasData(t)&&(r=W.access(t),a=W.set(e,r),s=r.events))for(o in delete a.handle,a.events={},s)for(n=0,i=s[o].length;n<i;n++)L.event.add(e,o,s[o][n]);$.hasData(t)&&(t=$.access(t),t=L.extend({},t),$.set(e,t))}}function Ot(n,i,o,r){i=m.apply([],i);var t,e,a,s,h,u,l=0,d=n.length,c=d-1,g=i[0],f=w(g);if(f||1<d&&"string"==typeof g&&!v.checkClone&&At.test(g))return n.each(function(t){var e=n.eq(t);f&&(i[0]=g.call(this,t,e.html())),Ot(e,i,o,r)});if(d&&(e=(t=vt(i,n[0].ownerDocument,!1,n,r)).firstChild,1===t.childNodes.length&&(t=e),e||r)){for(s=(a=L.map(pt(t,"script"),Dt)).length;l<d;l++)h=t,l!==c&&(h=L.clone(h,!0,!0),s&&L.merge(a,pt(h,"script"))),o.call(n[l],h,l);if(s)for(u=a[a.length-1].ownerDocument,L.map(a,Et),l=0;l<s;l++)h=a[l],gt.test(h.type||"")&&!W.access(h,"globalEval")&&L.contains(u,h)&&(h.src&&"module"!==(h.type||"").toLowerCase()?L._evalUrl&&!h.noModule&&L._evalUrl(h.src,{nonce:h.nonce||h.getAttribute("nonce")}):b(h.textContent.replace(Tt,""),h,u))}return n}function Bt(t,e,n){for(var i,o=e?L.filter(e,t):t,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||L.cleanData(pt(i)),i.parentNode&&(n&&ot(i)&&mt(pt(i,"script")),i.parentNode.removeChild(i));return t}L.extend({htmlPrefilter:function(t){return t.replace(_t,"<$1></$2>")},clone:function(t,e,n){var i,o,r,a,s,h,u,l=t.cloneNode(!0),d=ot(t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||L.isXMLDoc(t)))for(a=pt(l),i=0,o=(r=pt(t)).length;i<o;i++)s=r[i],"input"===(u=(h=a[i]).nodeName.toLowerCase())&&dt.test(s.type)?h.checked=s.checked:"input"!==u&&"textarea"!==u||(h.defaultValue=s.defaultValue);if(e)if(n)for(r=r||pt(t),a=a||pt(l),i=0,o=r.length;i<o;i++)Ft(r[i],a[i]);else Ft(t,l);return 0<(a=pt(l,"script")).length&&mt(a,!d&&pt(t,"script")),l},cleanData:function(t){for(var e,n,i,o=L.event.special,r=0;void 0!==(n=t[r]);r++)if(K(n)){if(e=n[W.expando]){if(e.events)for(i in e.events)o[i]?L.event.remove(n,i):L.removeEvent(n,i,e.handle);n[W.expando]=void 0}n[$.expando]&&(n[$.expando]=void 0)}}}),L.fn.extend({detach:function(t){return Bt(this,t,!0)},remove:function(t){return Bt(this,t)},text:function(t){return V(this,function(t){return void 0===t?L.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Ot(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ct(this,t).appendChild(t)})},prepend:function(){return Ot(this,arguments,function(t){var e;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(e=Ct(this,t)).insertBefore(t,e.firstChild)})},before:function(){return Ot(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Ot(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(L.cleanData(pt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return L.clone(this,t,e)})},html:function(t){return V(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Nt.test(t)&&!ft[(ct.exec(t)||["",""])[1].toLowerCase()]){t=L.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(L.cleanData(pt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return Ot(this,arguments,function(t){var e=this.parentNode;L.inArray(this,n)<0&&(L.cleanData(pt(this)),e&&e.replaceChild(t,this))},n)}}),L.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,a){L.fn[t]=function(t){for(var e,n=[],i=L(t),o=i.length-1,r=0;r<=o;r++)e=r===o?this:this.clone(!0),L(i[r])[a](e),h.apply(n,e.get());return this.pushStack(n)}});var Gt,jt,zt,Rt,It,Vt,Ut,qt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),Ht=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=P),e.getComputedStyle(t)},Yt=new RegExp(nt.join("|"),"i");function Kt(t,e,n){var i,o,r=t.style;return(n=n||Ht(t))&&(""!==(o=n.getPropertyValue(e)||n[e])||ot(t)||(o=L.style(t,e)),!v.pixelBoxStyles()&&qt.test(o)&&Yt.test(e)&&(i=r.width,t=r.minWidth,e=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=n.width,r.width=i,r.minWidth=t,r.maxWidth=e)),void 0!==o?o+"":o}function Xt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}function Wt(){var t;Ut&&(Vt.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ut.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",it.appendChild(Vt).appendChild(Ut),t=P.getComputedStyle(Ut),Gt="1%"!==t.top,It=12===$t(t.marginLeft),Ut.style.right="60%",Rt=36===$t(t.right),jt=36===$t(t.width),Ut.style.position="absolute",zt=12===$t(Ut.offsetWidth/3),it.removeChild(Vt),Ut=null)}function $t(t){return Math.round(parseFloat(t))}Vt=k.createElement("div"),(Ut=k.createElement("div")).style&&(Ut.style.backgroundClip="content-box",Ut.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===Ut.style.backgroundClip,L.extend(v,{boxSizingReliable:function(){return Wt(),jt},pixelBoxStyles:function(){return Wt(),Rt},pixelPosition:function(){return Wt(),Gt},reliableMarginLeft:function(){return Wt(),It},scrollboxSize:function(){return Wt(),zt}}));var Jt=["Webkit","Moz","ms"],Zt=k.createElement("div").style,Qt={};function te(t){return L.cssProps[t]||Qt[t]||(t in Zt?t:Qt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Jt.length;n--;)if((t=Jt[n]+e)in Zt)return t}(t)||t)}var ee=/^(none|table(?!-c[ea]).+)/,ne=/^--/,ie={position:"absolute",visibility:"hidden",display:"block"},oe={letterSpacing:"0",fontWeight:"400"};function re(t,e,n){var i=et.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function ae(t,e,n,i,o,r){var a="width"===e?1:0,s=0,h=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(h+=L.css(t,n+nt[a],!0,o)),i?("content"===n&&(h-=L.css(t,"padding"+nt[a],!0,o)),"margin"!==n&&(h-=L.css(t,"border"+nt[a]+"Width",!0,o))):(h+=L.css(t,"padding"+nt[a],!0,o),"padding"!==n?h+=L.css(t,"border"+nt[a]+"Width",!0,o):s+=L.css(t,"border"+nt[a]+"Width",!0,o));return!i&&0<=r&&(h+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-h-s-.5))||0),h}function se(t,e,n){var i=Ht(t),o=(!v.boxSizingReliable()||n)&&"border-box"===L.css(t,"boxSizing",!1,i),r=o,a=Kt(t,e,i),s="offset"+e[0].toUpperCase()+e.slice(1);if(qt.test(a)){if(!n)return a;a="auto"}return(!v.boxSizingReliable()&&o||"auto"===a||!parseFloat(a)&&"inline"===L.css(t,"display",!1,i))&&t.getClientRects().length&&(o="border-box"===L.css(t,"boxSizing",!1,i),(r=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+ae(t,e,n||(o?"border":"content"),r,i,a)+"px"}function he(t,e,n,i,o){return new he.prototype.init(t,e,n,i,o)}L.extend({cssHooks:{opacity:{get:function(t,e){if(e){t=Kt(t,"opacity");return""===t?"1":t}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,a,s=Y(e),h=ne.test(e),u=t.style;if(h||(e=te(s)),a=L.cssHooks[e]||L.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(o=a.get(t,!1,i))?o:u[e];"string"===(r=_typeof(n))&&(o=et.exec(n))&&o[1]&&(n=ht(t,e,o),r="number"),null!=n&&n==n&&("number"!==r||h||(n+=o&&o[3]||(L.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(h?u.setProperty(e,n):u[e]=n))}},css:function(t,e,n,i){var o,r=Y(e);return ne.test(e)||(e=te(r)),(r=L.cssHooks[e]||L.cssHooks[r])&&"get"in r&&(o=r.get(t,!0,n)),void 0===o&&(o=Kt(t,e,i)),"normal"===o&&e in oe&&(o=oe[e]),""===n||n?(e=parseFloat(o),!0===n||isFinite(e)?e||0:o):o}}),L.each(["height","width"],function(t,s){L.cssHooks[s]={get:function(t,e,n){if(e)return!ee.test(L.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?se(t,s,n):st(t,ie,function(){return se(t,s,n)})},set:function(t,e,n){var i,o=Ht(t),r=!v.scrollboxSize()&&"absolute"===o.position,a=(r||n)&&"border-box"===L.css(t,"boxSizing",!1,o),n=n?ae(t,s,n,a,o):0;return a&&r&&(n-=Math.ceil(t["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(o[s])-ae(t,s,"border",!1,o)-.5)),n&&(i=et.exec(e))&&"px"!==(i[3]||"px")&&(t.style[s]=e,e=L.css(t,s)),re(0,e,n)}}}),L.cssHooks.marginLeft=Xt(v.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Kt(t,"marginLeft"))||t.getBoundingClientRect().left-st(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),L.each({margin:"",padding:"",border:"Width"},function(o,r){L.cssHooks[o+r]={expand:function(t){for(var e=0,n={},i="string"==typeof t?t.split(" "):[t];e<4;e++)n[o+nt[e]+r]=i[e]||i[e-2]||i[0];return n}},"margin"!==o&&(L.cssHooks[o+r].set=re)}),L.fn.extend({css:function(t,e){return V(this,function(t,e,n){var i,o,r={},a=0;if(Array.isArray(e)){for(i=Ht(t),o=e.length;a<o;a++)r[e[a]]=L.css(t,e[a],!1,i);return r}return void 0!==n?L.style(t,e,n):L.css(t,e)},t,e,1<arguments.length)}}),((L.Tween=he).prototype={constructor:he,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||L.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(L.cssNumber[n]?"":"px")},cur:function(){var t=he.propHooks[this.prop];return(t&&t.get?t:he.propHooks._default).get(this)},run:function(t){var e,n=he.propHooks[this.prop];return this.options.duration?this.pos=e=L.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(n&&n.set?n:he.propHooks._default).set(this),this}}).init.prototype=he.prototype,(he.propHooks={_default:{get:function(t){return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(t=L.css(t.elem,t.prop,""))&&"auto"!==t?t:0},set:function(t){L.fx.step[t.prop]?L.fx.step[t.prop](t):1!==t.elem.nodeType||!L.cssHooks[t.prop]&&null==t.elem.style[te(t.prop)]?t.elem[t.prop]=t.now:L.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=he.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},L.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},L.fx=he.prototype.init,L.fx.step={};var ue,le,de=/^(?:toggle|show|hide)$/,ce=/queueHooks$/;function ge(){le&&(!1===k.hidden&&P.requestAnimationFrame?P.requestAnimationFrame(ge):P.setTimeout(ge,L.fx.interval),L.fx.tick())}function fe(){return P.setTimeout(function(){ue=void 0}),ue=Date.now()}function pe(t,e){var n,i=0,o={height:t};for(e=e?1:0;i<4;i+=2-e)o["margin"+(n=nt[i])]=o["padding"+n]=t;return e&&(o.opacity=o.width=t),o}function me(t,e,n){for(var i,o=(ye.tweeners[e]||[]).concat(ye.tweeners["*"]),r=0,a=o.length;r<a;r++)if(i=o[r].call(n,e,t))return i}function ye(o,t,e){var n,r,i=0,a=ye.prefilters.length,s=L.Deferred().always(function(){delete h.elem}),h=function(){if(r)return!1;for(var t=ue||fe(),t=Math.max(0,u.startTime+u.duration-t),e=1-(t/u.duration||0),n=0,i=u.tweens.length;n<i;n++)u.tweens[n].run(e);return s.notifyWith(o,[u,e,t]),e<1&&i?t:(i||s.notifyWith(o,[u,1,0]),s.resolveWith(o,[u]),!1)},u=s.promise({elem:o,props:L.extend({},t),opts:L.extend(!0,{specialEasing:{},easing:L.easing._default},e),originalProperties:t,originalOptions:e,startTime:ue||fe(),duration:e.duration,tweens:[],createTween:function(t,e){t=L.Tween(o,u.opts,t,e,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(t),t},stop:function(t){var e=0,n=t?u.tweens.length:0;if(r)return this;for(r=!0;e<n;e++)u.tweens[e].run(1);return t?(s.notifyWith(o,[u,1,0]),s.resolveWith(o,[u,t])):s.rejectWith(o,[u,t]),this}}),l=u.props;for(function(t,e){var n,i,o,r,a;for(n in t)if(o=e[i=Y(n)],r=t[n],Array.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),(a=L.cssHooks[i])&&"expand"in a)for(n in r=a.expand(r),delete t[i],r)n in t||(t[n]=r[n],e[n]=o);else e[i]=o}(l,u.opts.specialEasing);i<a;i++)if(n=ye.prefilters[i].call(u,o,l,u.opts))return w(n.stop)&&(L._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return L.map(l,me,u),w(u.opts.start)&&u.opts.start.call(o,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),L.fx.timer(L.extend(h,{elem:o,anim:u,queue:u.opts.queue})),u}L.Animation=L.extend(ye,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ht(n.elem,t,et.exec(e),n),n}]},tweener:function(t,e){for(var n,i=0,o=(t=w(t)?(e=t,["*"]):t.match(O)).length;i<o;i++)n=t[i],ye.tweeners[n]=ye.tweeners[n]||[],ye.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,o,r,a,s,h,u,l="width"in e||"height"in e,d=this,c={},g=t.style,f=t.nodeType&&at(t),p=W.get(t,"fxshow");for(i in n.queue||(null==(a=L._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,L.queue(t,"fx").length||a.empty.fire()})})),e)if(o=e[i],de.test(o)){if(delete e[i],r=r||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!p||void 0===p[i])continue;f=!0}c[i]=p&&p[i]||L.style(t,i)}if((h=!L.isEmptyObject(e))||!L.isEmptyObject(c))for(i in l&&1===t.nodeType&&(n.overflow=[g.overflow,g.overflowX,g.overflowY],null==(u=p&&p.display)&&(u=W.get(t,"display")),"none"===(l=L.css(t,"display"))&&(u?l=u:(lt([t],!0),u=t.style.display||u,l=L.css(t,"display"),lt([t]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===L.css(t,"float")&&(h||(d.done(function(){g.display=u}),null==u&&(l=g.display,u="none"===l?"":l)),g.display="inline-block")),n.overflow&&(g.overflow="hidden",d.always(function(){g.overflow=n.overflow[0],g.overflowX=n.overflow[1],g.overflowY=n.overflow[2]})),h=!1,c)h||(p?"hidden"in p&&(f=p.hidden):p=W.access(t,"fxshow",{display:u}),r&&(p.hidden=!f),f&&lt([t],!0),d.done(function(){for(i in f||lt([t]),W.remove(t,"fxshow"),c)L.style(t,i,c[i])})),h=me(f?p[i]:0,i,d),i in p||(p[i]=h.start,f&&(h.end=h.start,h.start=0))}],prefilter:function(t,e){e?ye.prefilters.unshift(t):ye.prefilters.push(t)}}),L.speed=function(t,e,n){var i=t&&"object"==_typeof(t)?L.extend({},t):{complete:n||!n&&e||w(t)&&t,duration:t,easing:n&&e||e&&!w(e)&&e};return L.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in L.fx.speeds?i.duration=L.fx.speeds[i.duration]:i.duration=L.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){w(i.old)&&i.old.call(this),i.queue&&L.dequeue(this,i.queue)},i},L.fn.extend({fadeTo:function(t,e,n,i){return this.filter(at).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){var o=L.isEmptyObject(e),r=L.speed(t,n,i),i=function(){var t=ye(this,L.extend({},e),r);(o||W.get(this,"finish"))&&t.stop(!0)};return i.finish=i,o||!1===r.queue?this.each(i):this.queue(r.queue,i)},stop:function(o,t,r){function a(t){var e=t.stop;delete t.stop,e(r)}return"string"!=typeof o&&(r=t,t=o,o=void 0),t&&!1!==o&&this.queue(o||"fx",[]),this.each(function(){var t=!0,e=null!=o&&o+"queueHooks",n=L.timers,i=W.get(this);if(e)i[e]&&i[e].stop&&a(i[e]);else for(e in i)i[e]&&i[e].stop&&ce.test(e)&&a(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=o&&n[e].queue!==o||(n[e].anim.stop(r),t=!1,n.splice(e,1));!t&&r||L.dequeue(this,o)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var t,e=W.get(this),n=e[a+"queue"],i=e[a+"queueHooks"],o=L.timers,r=n?n.length:0;for(e.finish=!0,L.queue(this,a,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===a&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<r;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),L.each(["toggle","show","hide"],function(t,i){var o=L.fn[i];L.fn[i]=function(t,e,n){return null==t||"boolean"==typeof t?o.apply(this,arguments):this.animate(pe(i,!0),t,e,n)}}),L.each({slideDown:pe("show"),slideUp:pe("hide"),slideToggle:pe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){L.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),L.timers=[],L.fx.tick=function(){var t,e=0,n=L.timers;for(ue=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||L.fx.stop(),ue=void 0},L.fx.timer=function(t){L.timers.push(t),L.fx.start()},L.fx.interval=13,L.fx.start=function(){le||(le=!0,ge())},L.fx.stop=function(){le=null},L.fx.speeds={slow:600,fast:200,_default:400},L.fn.delay=function(i,t){return i=L.fx&&L.fx.speeds[i]||i,t=t||"fx",this.queue(t,function(t,e){var n=P.setTimeout(t,i);e.stop=function(){P.clearTimeout(n)}})},e=k.createElement("input"),tt=k.createElement("select").appendChild(k.createElement("option")),e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=tt.selected,(e=k.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value;var ve,we=L.expr.attrHandle;L.fn.extend({attr:function(t,e){return V(this,L.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){L.removeAttr(this,t)})}}),L.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?L.prop(t,e,n):(1===r&&L.isXMLDoc(t)||(o=L.attrHooks[e.toLowerCase()]||(L.expr.match.bool.test(e)?ve:void 0)),void 0!==n?null===n?void L.removeAttr(t,e):o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:(t.setAttribute(e,n+""),n):!(o&&"get"in o&&null!==(i=o.get(t,e)))&&null==(i=L.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&_(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,o=e&&e.match(O);if(o&&1===t.nodeType)for(;n=o[i++];)t.removeAttribute(n)}}),ve={set:function(t,e,n){return!1===e?L.removeAttr(t,n):t.setAttribute(n,n),n}},L.each(L.expr.match.bool.source.match(/\w+/g),function(t,e){var a=we[e]||L.find.attr;we[e]=function(t,e,n){var i,o,r=e.toLowerCase();return n||(o=we[r],we[r]=i,i=null!=a(t,e,n)?r:null,we[r]=o),i}});var be=/^(?:input|select|textarea|button)$/i,Se=/^(?:a|area)$/i;function xe(t){return(t.match(O)||[]).join(" ")}function Pe(t){return t.getAttribute&&t.getAttribute("class")||""}function ke(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(O)||[]}L.fn.extend({prop:function(t,e){return V(this,L.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[L.propFix[t]||t]})}}),L.extend({prop:function(t,e,n){var i,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&L.isXMLDoc(t)||(e=L.propFix[e]||e,o=L.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=L.find.attr(t,"tabindex");return e?parseInt(e,10):be.test(t.nodeName)||Se.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(L.propHooks.selected={get:function(t){t=t.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(t){t=t.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),L.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){L.propFix[this.toLowerCase()]=this}),L.fn.extend({addClass:function(e){var t,n,i,o,r,a,s=0;if(w(e))return this.each(function(t){L(this).addClass(e.call(this,t,Pe(this)))});if((t=ke(e)).length)for(;n=this[s++];)if(a=Pe(n),i=1===n.nodeType&&" "+xe(a)+" "){for(r=0;o=t[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");a!==(a=xe(i))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,i,o,r,a,s=0;if(w(e))return this.each(function(t){L(this).removeClass(e.call(this,t,Pe(this)))});if(!arguments.length)return this.attr("class","");if((t=ke(e)).length)for(;n=this[s++];)if(a=Pe(n),i=1===n.nodeType&&" "+xe(a)+" "){for(r=0;o=t[r++];)for(;-1<i.indexOf(" "+o+" ");)i=i.replace(" "+o+" "," ");a!==(a=xe(i))&&n.setAttribute("class",a)}return this},toggleClass:function(o,e){var r=_typeof(o),a="string"===r||Array.isArray(o);return"boolean"==typeof e&&a?e?this.addClass(o):this.removeClass(o):w(o)?this.each(function(t){L(this).toggleClass(o.call(this,t,Pe(this),e),e)}):this.each(function(){var t,e,n,i;if(a)for(e=0,n=L(this),i=ke(o);t=i[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==o&&"boolean"!==r||((t=Pe(this))&&W.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",!t&&!1!==o&&W.get(this,"__className__")||""))})},hasClass:function(t){for(var e,n=0,i=" "+t+" ";e=this[n++];)if(1===e.nodeType&&-1<(" "+xe(Pe(e))+" ").indexOf(i))return!0;return!1}});var Le=/\r/g;L.fn.extend({val:function(e){var n,t,i,o=this[0];return arguments.length?(i=w(e),this.each(function(t){1===this.nodeType&&(null==(t=i?e.call(this,t,L(this).val()):e)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=L.map(t,function(t){return null==t?"":t+""})),(n=L.valHooks[this.type]||L.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,t,"value")||(this.value=t))})):o?(n=L.valHooks[o.type]||L.valHooks[o.nodeName.toLowerCase()])&&"get"in n&&void 0!==(t=n.get(o,"value"))?t:"string"==typeof(t=o.value)?t.replace(Le,""):null==t?"":t:void 0}}),L.extend({valHooks:{option:{get:function(t){var e=L.find.attr(t,"value");return null!=e?e:xe(L.text(t))}},select:{get:function(t){for(var e,n=t.options,i=t.selectedIndex,o="select-one"===t.type,r=o?null:[],a=o?i+1:n.length,s=i<0?a:o?i:0;s<a;s++)if(((e=n[s]).selected||s===i)&&!e.disabled&&(!e.parentNode.disabled||!_(e.parentNode,"optgroup"))){if(e=L(e).val(),o)return e;r.push(e)}return r},set:function(t,e){for(var n,i,o=t.options,r=L.makeArray(e),a=o.length;a--;)((i=o[a]).selected=-1<L.inArray(L.valHooks.option.get(i),r))&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),L.each(["radio","checkbox"],function(){L.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<L.inArray(L(t).val(),e)}},v.checkOn||(L.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),v.focusin="onfocusin"in P;function Me(t){t.stopPropagation()}var _e=/^(?:focusinfocus|focusoutblur)$/;L.extend(L.event,{trigger:function(t,e,n,i){var o,r,a,s,h,u,l,d=[n||k],c=y.call(t,"type")?t.type:t,g=y.call(t,"namespace")?t.namespace.split("."):[],f=l=r=n=n||k;if(3!==n.nodeType&&8!==n.nodeType&&!_e.test(c+L.event.triggered)&&(-1<c.indexOf(".")&&(c=(g=c.split(".")).shift(),g.sort()),s=c.indexOf(":")<0&&"on"+c,(t=t[L.expando]?t:new L.Event(c,"object"==_typeof(t)&&t)).isTrigger=i?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:L.makeArray(e,[t]),u=L.event.special[c]||{},i||!u.trigger||!1!==u.trigger.apply(n,e))){if(!i&&!u.noBubble&&!p(n)){for(a=u.delegateType||c,_e.test(a+c)||(f=f.parentNode);f;f=f.parentNode)d.push(f),r=f;r===(n.ownerDocument||k)&&d.push(r.defaultView||r.parentWindow||P)}for(o=0;(f=d[o++])&&!t.isPropagationStopped();)l=f,t.type=1<o?a:u.bindType||c,(h=(W.get(f,"events")||{})[t.type]&&W.get(f,"handle"))&&h.apply(f,e),(h=s&&f[s])&&h.apply&&K(f)&&(t.result=h.apply(f,e),!1===t.result&&t.preventDefault());return t.type=c,i||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(d.pop(),e)||!K(n)||s&&w(n[c])&&!p(n)&&((r=n[s])&&(n[s]=null),L.event.triggered=c,t.isPropagationStopped()&&l.addEventListener(c,Me),n[c](),t.isPropagationStopped()&&l.removeEventListener(c,Me),L.event.triggered=void 0,r&&(n[s]=r)),t.result}},simulate:function(t,e,n){t=L.extend(new L.Event,n,{type:t,isSimulated:!0});L.event.trigger(t,null,e)}}),L.fn.extend({trigger:function(t,e){return this.each(function(){L.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return L.event.trigger(t,e,n,!0)}}),v.focusin||L.each({focus:"focusin",blur:"focusout"},function(n,i){function o(t){L.event.simulate(i,t.target,L.event.fix(t))}L.event.special[i]={setup:function(){var t=this.ownerDocument||this,e=W.access(t,i);e||t.addEventListener(n,o,!0),W.access(t,i,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=W.access(t,i)-1;e?W.access(t,i,e):(t.removeEventListener(n,o,!0),W.remove(t,i))}}});var Ne=P.location,Ae=Date.now(),Te=/\?/;L.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new P.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||L.error("Invalid XML: "+t),e};var Ce=/\[\]$/,De=/\r?\n/g,Ee=/^(?:submit|button|image|reset|file)$/i,Fe=/^(?:input|select|textarea|keygen)/i;L.param=function(t,e){function n(t,e){e=w(e)?e():e,o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==e?"":e)}var i,o=[];if(null==t)return"";if(Array.isArray(t)||t.jquery&&!L.isPlainObject(t))L.each(t,function(){n(this.name,this.value)});else for(i in t)!function n(i,t,o,r){if(Array.isArray(t))L.each(t,function(t,e){o||Ce.test(i)?r(i,e):n(i+"["+("object"==_typeof(e)&&null!=e?t:"")+"]",e,o,r)});else if(o||"object"!==f(t))r(i,t);else for(var e in t)n(i+"["+e+"]",t[e],o,r)}(i,t[i],e,n);return o.join("&")},L.fn.extend({serialize:function(){return L.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=L.prop(this,"elements");return t?L.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!L(this).is(":disabled")&&Fe.test(this.nodeName)&&!Ee.test(t)&&(this.checked||!dt.test(t))}).map(function(t,e){var n=L(this).val();return null==n?null:Array.isArray(n)?L.map(n,function(t){return{name:e.name,value:t.replace(De,"\r\n")}}):{name:e.name,value:n.replace(De,"\r\n")}}).get()}});var Oe=/%20/g,Be=/#.*$/,Ge=/([?&])_=[^&]*/,je=/^(.*?):[ \t]*([^\r\n]*)$/gm,ze=/^(?:GET|HEAD)$/,Re=/^\/\//,Ie={},Ve={},Ue="*/".concat("*"),qe=k.createElement("a");function He(r){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,i=0,o=t.toLowerCase().match(O)||[];if(w(e))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(r[n]=r[n]||[]).unshift(e)):(r[n]=r[n]||[]).push(e)}}function Ye(e,i,o,r){var a={},s=e===Ve;function h(t){var n;return a[t]=!0,L.each(e[t]||[],function(t,e){e=e(i,o,r);return"string"!=typeof e||s||a[e]?s?!(n=e):void 0:(i.dataTypes.unshift(e),h(e),!1)}),n}return h(i.dataTypes[0])||!a["*"]&&h("*")}function Ke(t,e){var n,i,o=L.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:i=i||{})[n]=e[n]);return i&&L.extend(!0,t,i),t}qe.href=Ne.href,L.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ne.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ne.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ue,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":L.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ke(Ke(t,L.ajaxSettings),e):Ke(L.ajaxSettings,t)},ajaxPrefilter:He(Ie),ajaxTransport:He(Ve),ajax:function(t,e){"object"==_typeof(t)&&(e=t,t=void 0),e=e||{};var h,u,l,n,d,i,c,g,o,r,f=L.ajaxSetup({},e),p=f.context||f,m=f.context&&(p.nodeType||p.jquery)?L(p):L.event,y=L.Deferred(),v=L.Callbacks("once memory"),w=f.statusCode||{},a={},s={},b="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(c){if(!n)for(n={};e=je.exec(l);)n[e[1].toLowerCase()+" "]=(n[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=n[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?l:null},setRequestHeader:function(t,e){return null==c&&(t=s[t.toLowerCase()]=s[t.toLowerCase()]||t,a[t]=e),this},overrideMimeType:function(t){return null==c&&(f.mimeType=t),this},statusCode:function(t){if(t)if(c)S.always(t[S.status]);else for(var e in t)w[e]=[w[e],t[e]];return this},abort:function(t){t=t||b;return h&&h.abort(t),x(0,t),this}};if(y.promise(S),f.url=((t||f.url||Ne.href)+"").replace(Re,Ne.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(O)||[""],null==f.crossDomain){i=k.createElement("a");try{i.href=f.url,i.href=i.href,f.crossDomain=qe.protocol+"//"+qe.host!=i.protocol+"//"+i.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=L.param(f.data,f.traditional)),Ye(Ie,f,e,S),c)return S;for(o in(g=L.event&&f.global)&&0==L.active++&&L.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!ze.test(f.type),u=f.url.replace(Be,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Oe,"+")):(r=f.url.slice(u.length),f.data&&(f.processData||"string"==typeof f.data)&&(u+=(Te.test(u)?"&":"?")+f.data,delete f.data),!1===f.cache&&(u=u.replace(Ge,"$1"),r=(Te.test(u)?"&":"?")+"_="+Ae+++r),f.url=u+r),f.ifModified&&(L.lastModified[u]&&S.setRequestHeader("If-Modified-Since",L.lastModified[u]),L.etag[u]&&S.setRequestHeader("If-None-Match",L.etag[u])),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&S.setRequestHeader("Content-Type",f.contentType),S.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ue+"; q=0.01":""):f.accepts["*"]),f.headers)S.setRequestHeader(o,f.headers[o]);if(f.beforeSend&&(!1===f.beforeSend.call(p,S,f)||c))return S.abort();if(b="abort",v.add(f.complete),S.done(f.success),S.fail(f.error),h=Ye(Ve,f,e,S)){if(S.readyState=1,g&&m.trigger("ajaxSend",[S,f]),c)return S;f.async&&0<f.timeout&&(d=P.setTimeout(function(){S.abort("timeout")},f.timeout));try{c=!1,h.send(a,x)}catch(t){if(c)throw t;x(-1,t)}}else x(-1,"No Transport");function x(t,e,n,i){var o,r,a,s=e;c||(c=!0,d&&P.clearTimeout(d),h=void 0,l=i||"",S.readyState=0<t?4:0,i=200<=t&&t<300||304===t,n&&(a=function(t,e,n){for(var i,o,r,a,s=t.contents,h=t.dataTypes;"*"===h[0];)h.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(o in s)if(s[o]&&s[o].test(i)){h.unshift(o);break}if(h[0]in n)r=h[0];else{for(o in n){if(!h[0]||t.converters[o+" "+h[0]]){r=o;break}a=a||o}r=r||a}if(r)return r!==h[0]&&h.unshift(r),n[r]}(f,S,n)),a=function(t,e,n,i){var o,r,a,s,h,u={},l=t.dataTypes.slice();if(l[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(r=l.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!h&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),h=r,r=l.shift())if("*"===r)r=h;else if("*"!==h&&h!==r){if(!(a=u[h+" "+r]||u["* "+r]))for(o in u)if((s=o.split(" "))[1]===r&&(a=u[h+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[o]:!0!==u[o]&&(r=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+h+" to "+r}}}return{state:"success",data:e}}(f,a,S,i),i?(f.ifModified&&((n=S.getResponseHeader("Last-Modified"))&&(L.lastModified[u]=n),(n=S.getResponseHeader("etag"))&&(L.etag[u]=n)),204===t||"HEAD"===f.type?s="nocontent":304===t?s="notmodified":(s=a.state,o=a.data,i=!(r=a.error))):(r=s,!t&&s||(s="error",t<0&&(t=0))),S.status=t,S.statusText=(e||s)+"",i?y.resolveWith(p,[o,s,S]):y.rejectWith(p,[S,s,r]),S.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[S,f,i?o:r]),v.fireWith(p,[S,s]),g&&(m.trigger("ajaxComplete",[S,f]),--L.active||L.event.trigger("ajaxStop")))}return S},getJSON:function(t,e,n){return L.get(t,e,n,"json")},getScript:function(t,e){return L.get(t,void 0,e,"script")}}),L.each(["get","post"],function(t,o){L[o]=function(t,e,n,i){return w(e)&&(i=i||n,n=e,e=void 0),L.ajax(L.extend({url:t,type:o,dataType:i,data:e,success:n},L.isPlainObject(t)&&t))}}),L._evalUrl=function(t,e){return L.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){L.globalEval(t,e)}})},L.fn.extend({wrapAll:function(t){return this[0]&&(w(t)&&(t=t.call(this[0])),t=L(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return w(n)?this.each(function(t){L(this).wrapInner(n.call(this,t))}):this.each(function(){var t=L(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=w(e);return this.each(function(t){L(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){L(this).replaceWith(this.childNodes)}),this}}),L.expr.pseudos.hidden=function(t){return!L.expr.pseudos.visible(t)},L.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},L.ajaxSettings.xhr=function(){try{return new P.XMLHttpRequest}catch(t){}};var Xe={0:200,1223:204},We=L.ajaxSettings.xhr();v.cors=!!We&&"withCredentials"in We,v.ajax=We=!!We,L.ajaxTransport(function(o){var r,a;if(v.cors||We&&!o.crossDomain)return{send:function(t,e){var n,i=o.xhr();if(i.open(o.type,o.url,o.async,o.username,o.password),o.xhrFields)for(n in o.xhrFields)i[n]=o.xhrFields[n];for(n in o.mimeType&&i.overrideMimeType&&i.overrideMimeType(o.mimeType),o.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)i.setRequestHeader(n,t[n]);r=function(t){return function(){r&&(r=a=i.onload=i.onerror=i.onabort=i.ontimeout=i.onreadystatechange=null,"abort"===t?i.abort():"error"===t?"number"!=typeof i.status?e(0,"error"):e(i.status,i.statusText):e(Xe[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=r(),a=i.onerror=i.ontimeout=r("error"),void 0!==i.onabort?i.onabort=a:i.onreadystatechange=function(){4===i.readyState&&P.setTimeout(function(){r&&a()})},r=r("abort");try{i.send(o.hasContent&&o.data||null)}catch(t){if(r)throw t}},abort:function(){r&&r()}}}),L.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),L.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return L.globalEval(t),t}}}),L.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),L.ajaxTransport("script",function(n){var i,o;if(n.crossDomain||n.scriptAttrs)return{send:function(t,e){i=L("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",o=function(t){i.remove(),o=null,t&&e("error"===t.type?404:200,t.type)}),k.head.appendChild(i[0])},abort:function(){o&&o()}}});var $e=[],Je=/(=)\?(?=&|$)|\?\?/;L.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=$e.pop()||L.expando+"_"+Ae++;return this[t]=!0,t}}),L.ajaxPrefilter("json jsonp",function(t,e,n){var i,o,r,a=!1!==t.jsonp&&(Je.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Je.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=w(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Je,"$1"+i):!1!==t.jsonp&&(t.url+=(Te.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return r||L.error(i+" was not called"),r[0]},t.dataTypes[0]="json",o=P[i],P[i]=function(){r=arguments},n.always(function(){void 0===o?L(P).removeProp(i):P[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,$e.push(i)),r&&w(o)&&o(r[0]),r=o=void 0}),"script"}),v.createHTMLDocument=((e=k.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===e.childNodes.length),L.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?((i=(e=k.implementation.createHTMLDocument("")).createElement("base")).href=k.location.href,e.head.appendChild(i)):e=k),i=!n&&[],(n=N.exec(t))?[e.createElement(n[1])]:(n=vt([t],e,i),i&&i.length&&L(i).remove(),L.merge([],n.childNodes)));var i},L.fn.load=function(t,e,n){var i,o,r,a=this,s=t.indexOf(" ");return-1<s&&(i=xe(t.slice(s)),t=t.slice(0,s)),w(e)?(n=e,e=void 0):e&&"object"==_typeof(e)&&(o="POST"),0<a.length&&L.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done(function(t){r=arguments,a.html(i?L("<div>").append(L.parseHTML(t)).find(i):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,r||[t.responseText,e,t])})}),this},L.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){L.fn[e]=function(t){return this.on(e,t)}}),L.expr.pseudos.animated=function(e){return L.grep(L.timers,function(t){return e===t.elem}).length},L.offset={setOffset:function(t,e,n){var i,o,r,a,s=L.css(t,"position"),h=L(t),u={};"static"===s&&(t.style.position="relative"),r=h.offset(),i=L.css(t,"top"),a=L.css(t,"left"),a=("absolute"===s||"fixed"===s)&&-1<(i+a).indexOf("auto")?(o=(s=h.position()).top,s.left):(o=parseFloat(i)||0,parseFloat(a)||0),w(e)&&(e=e.call(t,n,L.extend({},r))),null!=e.top&&(u.top=e.top-r.top+o),null!=e.left&&(u.left=e.left-r.left+a),"using"in e?e.using.call(t,u):h.css(u)}},L.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){L.offset.setOffset(this,e,t)});var t,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),n=n.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],o={top:0,left:0};if("fixed"===L.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===L.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((o=L(t).offset()).top+=L.css(t,"borderTopWidth",!0),o.left+=L.css(t,"borderLeftWidth",!0))}return{top:e.top-o.top-L.css(i,"marginTop",!0),left:e.left-o.left-L.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===L.css(t,"position");)t=t.offsetParent;return t||it})}}),L.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,o){var r="pageYOffset"===o;L.fn[e]=function(t){return V(this,function(t,e,n){var i;return p(t)?i=t:9===t.nodeType&&(i=t.defaultView),void 0===n?i?i[o]:t[e]:void(i?i.scrollTo(r?i.pageXOffset:n,r?n:i.pageYOffset):t[e]=n)},e,t,arguments.length)}}),L.each(["top","left"],function(t,n){L.cssHooks[n]=Xt(v.pixelPosition,function(t,e){if(e)return e=Kt(t,n),qt.test(e)?L(t).position()[n]+"px":e})}),L.each({Height:"height",Width:"width"},function(a,s){L.each({padding:"inner"+a,content:s,"":"outer"+a},function(i,r){L.fn[r]=function(t,e){var n=arguments.length&&(i||"boolean"!=typeof t),o=i||(!0===t||!0===e?"margin":"border");return V(this,function(t,e,n){var i;return p(t)?0===r.indexOf("outer")?t["inner"+a]:t.document.documentElement["client"+a]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+a],i["scroll"+a],t.body["offset"+a],i["offset"+a],i["client"+a])):void 0===n?L.css(t,e,o):L.style(t,e,n,o)},s,n?t:void 0,n)}})}),L.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){L.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),L.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),L.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),L.proxy=function(t,e){var n,i;if("string"==typeof e&&(i=t[e],e=t,t=i),w(t))return n=s.call(arguments,2),(i=function(){return t.apply(e||this,n.concat(s.call(arguments)))}).guid=t.guid=t.guid||L.guid++,i},L.holdReady=function(t){t?L.readyWait++:L.ready(!0)},L.isArray=Array.isArray,L.parseJSON=JSON.parse,L.nodeName=_,L.isFunction=w,L.isWindow=p,L.camelCase=Y,L.type=f,L.now=Date.now,L.isNumeric=function(t){var e=L.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return L});var Ze=P.jQuery,Qe=P.$;return L.noConflict=function(t){return P.$===L&&(P.$=Qe),t&&P.jQuery===L&&(P.jQuery=Ze),L},t||(P.jQuery=P.$=L),L}),function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?exports.Sigma=e():t.Sigma=e()}(self,function(){return n={796:function(t){t.exports=function(t,e){var n=e.length;if(0!==n){var i=t.length;t.length+=n;for(var o=0;o<n;o++)t[i+o]=e[o]}}},187:function(t){var e="object"==("undefined"==typeof Reflect?"undefined":_typeof(Reflect))?Reflect:null,h=e&&"function"==typeof e.apply?e.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},n=e&&"function"==typeof e.ownKeys?e.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)},i=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(o,r){return new Promise(function(t,e){function n(t){o.removeListener(r,i),e(t)}function i(){"function"==typeof o.removeListener&&o.removeListener("error",n),t([].slice.call(arguments))}f(o,r,i,{once:!0}),"error"===r||"function"==typeof o.on&&f(o,"error",n,{once:!0})})},(o.EventEmitter=o).prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var r=10;function s(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+_typeof(t))}function a(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function u(t,e,n,i){var o,r;return s(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener||n),o=t._events),r=o[e]),void 0===r?(r=o[e]=n,++t._eventsCount):("function"==typeof r?r=o[e]=i?[n,r]:[r,n]:i?r.unshift(n):r.push(n),0<(n=a(t))&&r.length>n&&!r.warned&&(r.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=t,n.type=e,n.count=r.length,console&&console.warn)),t}function l(t,e,n){t={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},e=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(t);return e.listener=n,t.wrapFn=e}function d(t,e,n){t=t._events;if(void 0===t)return[];e=t[e];return void 0===e?[]:"function"==typeof e?n?[e.listener||e]:[e]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):g(e,e.length)}function c(t){var e=this._events;if(void 0!==e){t=e[t];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function g(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function f(n,i,o,r){if("function"==typeof n.on)r.once?n.once(i,o):n.on(i,o);else{if("function"!=typeof n.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+_typeof(n));n.addEventListener(i,function t(e){r.once&&n.removeEventListener(i,t),o(e)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");r=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return a(this)},o.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i,o="error"===t,r=this._events;if(void 0!==r)o=o&&void 0===r.error;else if(!o)return!1;if(o){if(0<e.length&&(i=e[0]),i instanceof Error)throw i;o=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw o.context=i,o}t=r[t];if(void 0===t)return!1;if("function"==typeof t)h(t,this,e);else for(var a=t.length,s=g(t,a),n=0;n<a;++n)h(s[n],this,e);return!0},o.prototype.addListener=function(t,e){return u(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return u(this,t,e,!0)},o.prototype.once=function(t,e){return s(e),this.on(t,l(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return s(e),this.prependListener(t,l(this,t,e)),this},o.prototype.removeListener=function(t,e){var n,i,o,r,a;if(s(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,r=n.length-1;0<=r;r--)if(n[r]===e||n[r].listener===e){a=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,a||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,n;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){for(var i,o=Object.keys(n),r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;0<=r;r--)this.removeListener(t,e[r]);return this},o.prototype.listeners=function(t){return d(this,t,!0)},o.prototype.rawListeners=function(t){return d(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):c.call(t,e)},o.prototype.listenerCount=c,o.prototype.eventNames=function(){return 0<this._eventsCount?n(this._events):[]}},886:function(t,e,n){var s=n(868);function i(t,e){if(!s(t))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");for(var n,i,o=[].concat(e),r={},a=0;a<o.length;a++)i=o[a],r[i]=[1/0,-1/0];return t.forEachNode(function(t,e){for(a=0;a<o.length;a++)i=o[a],(n=e[i])<r[i][0]&&(r[i][0]=n),n>r[i][1]&&(r[i][1]=n)}),"string"==typeof e?r[e]:r}n=i;n.nodeExtent=i,n.edgeExtent=function(t,e){if(!s(t))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");for(var n,i,o=[].concat(e),r={},a=0;a<o.length;a++)i=o[a],r[i]=[1/0,-1/0];return t.forEachEdge(function(t,e){for(a=0;a<o.length;a++)i=o[a],(n=e[i])<r[i][0]&&(r[i][0]=n),n>r[i][1]&&(r[i][1]=n)}),"string"==typeof e?r[e]:r},t.exports=n},868:function(t){t.exports=function(t){return null!==t&&"object"==_typeof(t)&&"function"==typeof t.addUndirectedEdgeWithKey&&"function"==typeof t.dropNode&&"boolean"==typeof t.multi}},186:function(t){t.exports=function(t){return null!==t&&"object"==_typeof(t)&&"function"==typeof t.addUndirectedEdgeWithKey&&"function"==typeof t.dropNode&&"boolean"==typeof t.multi}},698:function(t){t.exports=function(){function a(t){return(a="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(t){return _typeof(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof(t)})(t)}function n(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t,e,n){return(r=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(t){return}}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);i=new(Function.bind.apply(t,i));return n&&o(i,n.prototype),i}).apply(null,arguments)}function e(t){var n="function"==typeof Map?new Map:void 0;return(e=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return r(t,arguments,i(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o(e,t)})(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var p=function(t){for(var e=t,n=1,i=arguments.length;n<i;n++)if(arguments[n])for(var o in arguments[n])e[o]=arguments[n][o];return e};function g(t,e,n,i){t=t._nodes.get(e),e=null;return t?e="mixed"===i?t.out&&t.out[n]||t.undirected&&t.undirected[n]:"directed"===i?t.out&&t.out[n]:t.undirected&&t.undirected[n]:e}function m(t){return"object"===a(t)&&null!==t&&t.constructor===Object}function h(t){for(var e in t)return;return 1}function u(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function l(t,e,n){var i={enumerable:!0,configurable:!0};"function"==typeof n?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function d(t){return m(t)&&(!t.attributes||Array.isArray(t.attributes))}"function"==typeof Object.assign&&(p=Object.assign);var t="object"==("undefined"==typeof Reflect?"undefined":_typeof(Reflect))?Reflect:null,c=t&&"function"==typeof t.apply?t.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},f=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)},y=Number.isNaN||function(t){return t!=t};function v(){v.init.call(this)}var w=v;(v.EventEmitter=v).prototype._events=void 0,v.prototype._eventsCount=0,v.prototype._maxListeners=void 0;var b=10;function S(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+_typeof(t))}function x(t){return void 0===t._maxListeners?v.defaultMaxListeners:t._maxListeners}function P(t,e,n,i){var o,r;return S(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener||n),o=t._events),r=o[e]),void 0===r?(r=o[e]=n,++t._eventsCount):("function"==typeof r?r=o[e]=i?[n,r]:[r,n]:i?r.unshift(n):r.push(n),0<(n=x(t))&&r.length>n&&!r.warned&&(r.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=t,n.type=e,n.count=r.length,console&&console.warn)),t}function k(t,e,n){t={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},e=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(t);return e.listener=n,t.wrapFn=e}function L(t,e,n){t=t._events;if(void 0===t)return[];e=t[e];return void 0===e?[]:"function"==typeof e?n?[e.listener||e]:[e]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):_(e,e.length)}function M(t){var e=this._events;if(void 0!==e){t=e[t];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function _(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function N(t){Object.defineProperty(this,"_next",{writable:!1,enumerable:!1,value:t}),this.done=!1}Object.defineProperty(v,"defaultMaxListeners",{enumerable:!0,get:function(){return b},set:function(t){if("number"!=typeof t||t<0||y(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");b=t}}),v.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},v.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||y(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},v.prototype.getMaxListeners=function(){return x(this)},v.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i,o="error"===t,r=this._events;if(void 0!==r)o=o&&void 0===r.error;else if(!o)return!1;if(o){if(0<e.length&&(i=e[0]),i instanceof Error)throw i;o=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw o.context=i,o}t=r[t];if(void 0===t)return!1;if("function"==typeof t)c(t,this,e);else for(var a=t.length,s=_(t,a),n=0;n<a;++n)c(s[n],this,e);return!0},v.prototype.addListener=function(t,e){return P(this,t,e,!1)},v.prototype.on=v.prototype.addListener,v.prototype.prependListener=function(t,e){return P(this,t,e,!0)},v.prototype.once=function(t,e){return S(e),this.on(t,k(this,t,e)),this},v.prototype.prependOnceListener=function(t,e){return S(e),this.prependListener(t,k(this,t,e)),this},v.prototype.removeListener=function(t,e){var n,i,o,r,a;if(S(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,r=n.length-1;0<=r;r--)if(n[r]===e||n[r].listener===e){a=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,a||e)}return this},v.prototype.off=v.prototype.removeListener,v.prototype.removeAllListeners=function(t){var e,n;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){for(var i,o=Object.keys(n),r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;0<=r;r--)this.removeListener(t,e[r]);return this},v.prototype.listeners=function(t){return L(this,t,!0)},v.prototype.rawListeners=function(t){return L(this,t,!1)},v.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):M.call(t,e)},v.prototype.listenerCount=M,v.prototype.eventNames=function(){return 0<this._eventsCount?f(this._events):[]},w.once=function(o,r){return new Promise(function(t,e){function n(){void 0!==i&&o.removeListener("error",i),t([].slice.call(arguments))}var i;"error"!==r&&(i=function(t){o.removeListener(r,n),e(t)},o.once("error",i)),o.once(r,n)})},N.prototype.next=function(){if(this.done)return{done:!0};var t=this._next();return t.done&&(this.done=!0),t},"undefined"!=typeof Symbol&&(N.prototype[Symbol.iterator]=function(){return this}),N.of=function(){var t=arguments,e=t.length,n=0;return new N(function(){return e<=n?{done:!0}:{done:!1,value:t[n++]}})},N.empty=function(){var t=new N(null);return t.done=!0,t},N.is=function(t){return t instanceof N||"object"==_typeof(t)&&null!==t&&"function"==typeof t.next};function A(t,e){for(var n,i=1<arguments.length?e:1/0,o=i!==1/0?new Array(i):[],r=0;;){if(r===i)return o;if((n=t.next()).done)return r!==e?o.slice(0,r):o;o[r++]=n.value}}var T,C,D,E,F=N,O=(n(V,E=e(Error)),V),B=(n(I,D=O),I),G=(n(R,C=O),R),j=(n(z,T=O),z);function z(t,e){return(e=T.call(this,t,e)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(e),z.prototype.constructor),e}function R(t,e){return(e=C.call(this,t,e)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(e),R.prototype.constructor),e}function I(t,e){return(e=D.call(this,t,e)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(e),I.prototype.constructor),e}function V(t,e){var n;return(n=E.call(this)||this).name="GraphError",n.message=t||"",n.data=e||{},n}function U(t,e){this.key=t,this.attributes=e,this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}}function q(t,e){this.key=t,this.attributes=e,this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}}function H(t,e){this.key=t,this.attributes=e,this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}}function Y(t,e,n,i,o,r){this.key=e,this.attributes=r,this.undirected=t,this.source=i,this.target=o,this.generatedKey=n}function K(t,e,n,i,o,r,a){var s,h="out",u="in";e&&(h=u="undirected"),t.multi?(void 0===(t=(s=r[h])[o])&&(t=new Set,s[o]=t),t.add(n),i===o&&e||void 0===(s=a[u])[i]&&(s[i]=t)):(r[h][o]=n,i===o&&e||(a[u][i]=n))}q.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}},H.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};function X(){var n,i=arguments,o=-1;return new F(function t(){if(!n){if(++o>=i.length)return{done:!0};n=i[o]}var e=n.next();return e.done?(n=null,t()):e})}var W=[{name:function(t){return"get".concat(t,"Attribute")},attacher:function(t,r,a){t.prototype[r]=function(t,e){var n;if("mixed"!==this.type&&"mixed"!==a&&a!==this.type)throw new j("Graph.".concat(r,": cannot find this type of edges in your ").concat(this.type," graph."));if(2<arguments.length){if(this.multi)throw new j("Graph.".concat(r,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var i=""+t,o=""+e;if(e=arguments[2],!(n=g(this,i,o,a)))throw new G("Graph.".concat(r,': could not find an edge for the given path ("').concat(i,'" - "').concat(o,'").'))}else if(t=""+t,!(n=this._edges.get(t)))throw new G("Graph.".concat(r,': could not find the "').concat(t,'" edge in the graph.'));if("mixed"!==a&&n.undirected!==("undirected"===a))throw new G("Graph.".concat(r,': could not find the "').concat(t,'" ').concat(a," edge in the graph."));return n.attributes[e]}}},{name:function(t){return"get".concat(t,"Attributes")},attacher:function(t,o,r){t.prototype[o]=function(t){var e;if("mixed"!==this.type&&"mixed"!==r&&r!==this.type)throw new j("Graph.".concat(o,": cannot find this type of edges in your ").concat(this.type," graph."));if(1<arguments.length){if(this.multi)throw new j("Graph.".concat(o,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var n=""+t,i=""+arguments[1];if(!(e=g(this,n,i,r)))throw new G("Graph.".concat(o,': could not find an edge for the given path ("').concat(n,'" - "').concat(i,'").'))}else if(t=""+t,!(e=this._edges.get(t)))throw new G("Graph.".concat(o,': could not find the "').concat(t,'" edge in the graph.'));if("mixed"!==r&&e.undirected!==("undirected"===r))throw new G("Graph.".concat(o,': could not find the "').concat(t,'" ').concat(r," edge in the graph."));return e.attributes}}},{name:function(t){return"has".concat(t,"Attribute")},attacher:function(t,r,a){t.prototype[r]=function(t,e){var n;if("mixed"!==this.type&&"mixed"!==a&&a!==this.type)throw new j("Graph.".concat(r,": cannot find this type of edges in your ").concat(this.type," graph."));if(2<arguments.length){if(this.multi)throw new j("Graph.".concat(r,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var i=""+t,o=""+e;if(e=arguments[2],!(n=g(this,i,o,a)))throw new G("Graph.".concat(r,': could not find an edge for the given path ("').concat(i,'" - "').concat(o,'").'))}else if(t=""+t,!(n=this._edges.get(t)))throw new G("Graph.".concat(r,': could not find the "').concat(t,'" edge in the graph.'));if("mixed"!==a&&n.undirected!==("undirected"===a))throw new G("Graph.".concat(r,': could not find the "').concat(t,'" ').concat(a," edge in the graph."));return n.attributes.hasOwnProperty(e)}}},{name:function(t){return"set".concat(t,"Attribute")},attacher:function(t,a,s){t.prototype[a]=function(t,e,n){var i;if("mixed"!==this.type&&"mixed"!==s&&s!==this.type)throw new j("Graph.".concat(a,": cannot find this type of edges in your ").concat(this.type," graph."));if(3<arguments.length){if(this.multi)throw new j("Graph.".concat(a,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,r=""+e;if(e=arguments[2],n=arguments[3],!(i=g(this,o,r,s)))throw new G("Graph.".concat(a,': could not find an edge for the given path ("').concat(o,'" - "').concat(r,'").'))}else if(t=""+t,!(i=this._edges.get(t)))throw new G("Graph.".concat(a,': could not find the "').concat(t,'" edge in the graph.'));if("mixed"!==s&&i.undirected!==("undirected"===s))throw new G("Graph.".concat(a,': could not find the "').concat(t,'" ').concat(s," edge in the graph."));return i.attributes[e]=n,this.emit("edgeAttributesUpdated",{key:i.key,type:"set",attributes:i.attributes,name:e}),this}}},{name:function(t){return"update".concat(t,"Attribute")},attacher:function(t,a,s){t.prototype[a]=function(t,e,n){var i;if("mixed"!==this.type&&"mixed"!==s&&s!==this.type)throw new j("Graph.".concat(a,": cannot find this type of edges in your ").concat(this.type," graph."));if(3<arguments.length){if(this.multi)throw new j("Graph.".concat(a,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,r=""+e;if(e=arguments[2],n=arguments[3],!(i=g(this,o,r,s)))throw new G("Graph.".concat(a,': could not find an edge for the given path ("').concat(o,'" - "').concat(r,'").'))}else if(t=""+t,!(i=this._edges.get(t)))throw new G("Graph.".concat(a,': could not find the "').concat(t,'" edge in the graph.'));if("function"!=typeof n)throw new B("Graph.".concat(a,": updater should be a function."));if("mixed"!==s&&i.undirected!==("undirected"===s))throw new G("Graph.".concat(a,': could not find the "').concat(t,'" ').concat(s," edge in the graph."));return i.attributes[e]=n(i.attributes[e]),this.emit("edgeAttributesUpdated",{key:i.key,type:"set",attributes:i.attributes,name:e}),this}}},{name:function(t){return"remove".concat(t,"Attribute")},attacher:function(t,r,a){t.prototype[r]=function(t,e){var n;if("mixed"!==this.type&&"mixed"!==a&&a!==this.type)throw new j("Graph.".concat(r,": cannot find this type of edges in your ").concat(this.type," graph."));if(2<arguments.length){if(this.multi)throw new j("Graph.".concat(r,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var i=""+t,o=""+e;if(e=arguments[2],!(n=g(this,i,o,a)))throw new G("Graph.".concat(r,': could not find an edge for the given path ("').concat(i,'" - "').concat(o,'").'))}else if(t=""+t,!(n=this._edges.get(t)))throw new G("Graph.".concat(r,': could not find the "').concat(t,'" edge in the graph.'));if("mixed"!==a&&n.undirected!==("undirected"===a))throw new G("Graph.".concat(r,': could not find the "').concat(t,'" ').concat(a," edge in the graph."));return delete n.attributes[e],this.emit("edgeAttributesUpdated",{key:n.key,type:"remove",attributes:n.attributes,name:e}),this}}},{name:function(t){return"replace".concat(t,"Attributes")},attacher:function(t,r,a){t.prototype[r]=function(t,e){var n;if("mixed"!==this.type&&"mixed"!==a&&a!==this.type)throw new j("Graph.".concat(r,": cannot find this type of edges in your ").concat(this.type," graph."));if(2<arguments.length){if(this.multi)throw new j("Graph.".concat(r,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var i=""+t,o=""+e;if(e=arguments[2],!(n=g(this,i,o,a)))throw new G("Graph.".concat(r,': could not find an edge for the given path ("').concat(i,'" - "').concat(o,'").'))}else if(t=""+t,!(n=this._edges.get(t)))throw new G("Graph.".concat(r,': could not find the "').concat(t,'" edge in the graph.'));if(!m(e))throw new B("Graph.".concat(r,": provided attributes are not a plain object."));if("mixed"!==a&&n.undirected!==("undirected"===a))throw new G("Graph.".concat(r,': could not find the "').concat(t,'" ').concat(a," edge in the graph."));return n.attributes=e,this.emit("edgeAttributesUpdated",{key:n.key,type:"replace",attributes:n.attributes}),this}}},{name:function(t){return"merge".concat(t,"Attributes")},attacher:function(t,r,a){t.prototype[r]=function(t,e){var n;if("mixed"!==this.type&&"mixed"!==a&&a!==this.type)throw new j("Graph.".concat(r,": cannot find this type of edges in your ").concat(this.type," graph."));if(2<arguments.length){if(this.multi)throw new j("Graph.".concat(r,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var i=""+t,o=""+e;if(e=arguments[2],!(n=g(this,i,o,a)))throw new G("Graph.".concat(r,': could not find an edge for the given path ("').concat(i,'" - "').concat(o,'").'))}else if(t=""+t,!(n=this._edges.get(t)))throw new G("Graph.".concat(r,': could not find the "').concat(t,'" edge in the graph.'));if(!m(e))throw new B("Graph.".concat(r,": provided attributes are not a plain object."));if("mixed"!==a&&n.undirected!==("undirected"===a))throw new G("Graph.".concat(r,': could not find the "').concat(t,'" ').concat(a," edge in the graph."));return p(n.attributes,e),this.emit("edgeAttributesUpdated",{key:n.key,type:"merge",attributes:n.attributes,data:e}),this}}}],$=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function J(t,e){for(var n in e)t.push(e[n].key)}function Z(e,t){for(var n in t)t[n].forEach(function(t){return e.push(t.key)})}function Q(t,e,n){for(var i in t){var o;i!==n&&e((o=t[i]).key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected,o.generatedKey)}}function tt(t,e,n){for(var i in t)i!==n&&t[i].forEach(function(t){return e(t.key,t.attributes,t.source.key,t.target.key,t.source.attributes,t.target.attributes,t.undirected,t.generatedKey)})}function et(t,e,n){for(var i in t)if(i!==n){var o=t[i];if(e(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected,o.generatedKey))return!0}return!1}function nt(t,e,n){var i,o,r,a,s;for(s in t)if(s!==n)for(i=t[s].values();!0!==(a=i.next()).done;)if(r=(o=a.value).source,a=o.target,e(o.key,o.attributes,r.key,a.key,r.attributes,a.attributes,o.undirected,o.generatedKey))return!0;return!1}function it(i,o){var r=Object.keys(i),a=r.length,s=null,h=0;return new F(function t(){var e;if(s){var n=s.next();if(n.done)return s=null,h++,t();e=n.value}else{if(a<=h)return{done:!0};n=r[h];if(n===o)return h++,t();if((e=i[n])instanceof Set)return s=e.values(),t();h++}return{done:!1,value:[e.key,e.attributes,e.source.key,e.target.key,e.source.attributes,e.target.attributes]}})}function ot(t,e,n){n=e[n];n&&t.push(n.key)}function rt(e,t,n){n=t[n];n&&n.forEach(function(t){return e.push(t.key)})}function at(t,e,n){var i=t[e];i&&(t=i.source,e=i.target,n(i.key,i.attributes,t.key,e.key,t.attributes,e.attributes,i.undirected,i.generatedKey))}function st(t,e,n){e=t[e];e&&e.forEach(function(t){return n(t.key,t.attributes,t.source.key,t.target.key,t.source.attributes,t.target.attributes,t.undirected,t.generatedKey)})}function ht(t,e,n){var i=t[e];if(i){t=i.source,e=i.target;return n(i.key,i.attributes,t.key,e.key,t.attributes,e.attributes,i.undirected,i.generatedKey)}}function ut(t,e,n){e=t[e];if(e){for(var i,o=e.values();!0!==(i=o.next()).done;)if(n((i=i.value).key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected,i.generatedKey))return!0;return!1}}function lt(t,e){e=t[e];if(e instanceof Set){var n=e.values();return new F(function(){var t=n.next();if(t.done)return t;t=t.value;return{done:!1,value:[t.key,t.attributes,t.source.key,t.target.key,t.source.attributes,t.target.attributes]}})}return F.of([e.key,e.attributes,e.source.key,e.target.key,e.source.attributes,e.target.attributes])}t=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function dt(t,e){if(void 0!==e)for(var n in e)t.add(n)}function ct(t,e,n){for(var i in e){var o=e[i];o instanceof Set&&(o=o.values().next().value);var r=o.source,o=o.target,r=r===t?o:r;n(r.key,r.attributes)}}function gt(t,e,n,i){for(var o in n){var r=n[o];r instanceof Set&&(r=r.values().next().value);var a=r.source,r=r.target,a=a===e?r:a;t.has(a.key)||(t.add(a.key),i(a.key,a.attributes))}}function ft(t,e,n){for(var i in e){var o=e[i];o instanceof Set&&(o=o.values().next().value);var r=o.source,o=o.target,r=r===t?o:r;if(n(r.key,r.attributes))return 1}}function pt(t,e,n,i){for(var o in n){var r=n[o];r instanceof Set&&(r=r.values().next().value);var a=r.source,r=r.target,a=a===e?r:a;if(!t.has(a.key)&&(t.add(a.key),i(a.key,a.attributes)))return 1}}function mt(n,i){var o=Object.keys(i),r=o.length,a=0;return new F(function(){if(r<=a)return{done:!0};var t=i[o[a++]];t instanceof Set&&(t=t.values().next().value);var e=t.source,t=t.target,e=e===n?t:e;return{done:!1,value:[e.key,e.attributes]}})}function yt(i,o,r){var a=Object.keys(r),s=a.length,h=0;return new F(function t(){if(s<=h)return{done:!0};var e=r[a[h++]];e instanceof Set&&(e=e.values().next().value);var n=e.source,e=e.target,n=n===o?e:n;return i.has(n.key)?t():(i.add(n.key),{done:!1,value:[n.key,n.attributes]})})}function vt(t,e,n){for(var i,o,r,a,s,h,u,l=e._nodes.values(),d=e.type;!0!==(i=l.next()).done;){if(o=i.value,"undirected"!==d)for(r in a=o.out)if(h=(s=a[r]).target,u=n(o.key,h.key,o.attributes,h.attributes,s.key,s.attributes,s.undirected,s.generatedKey),t&&u)return;if("directed"!==d)for(r in a=o.undirected)if((h=(s=a[r]).target).key!==r&&(h=s.source),u=n(o.key,h.key,o.attributes,h.attributes,s.key,s.attributes,s.undirected,s.generatedKey),t&&u)return}}function wt(t,e,n){for(var i,o,r,a,s,h,u,l,d,c=e._nodes.values(),g=e.type;!0!==(i=c.next()).done;){if(o=i.value,"undirected"!==g)for(r in h=o.out)for(a=h[r].values();!0!==(s=a.next()).done;)if(l=(u=s.value).target,d=n(o.key,l.key,o.attributes,l.attributes,u.key,u.attributes,u.undirected,u.generatedKey),t&&d)return;if("directed"!==g)for(r in h=o.undirected)for(a=h[r].values();!0!==(s=a.next()).done;)if((l=(u=s.value).target).key!==r&&(l=u.source),d=n(o.key,l.key,o.attributes,l.attributes,u.key,u.attributes,u.undirected,u.generatedKey),t&&d)return}}function bt(t,e){t={key:t};return h(e.attributes)||(t.attributes=p({},e.attributes)),t}function St(t,e){var n={source:e.source.key,target:e.target.key};return e.generatedKey||(n.key=t),h(e.attributes)||(n.attributes=p({},e.attributes)),e.undirected&&(n.undirected=!0),n}var xt=new Set(["directed","undirected","mixed"]),Pt=new Set(["domain","_events","_eventsCount","_maxListeners"]),kt={allowSelfLoops:!0,edgeKeyGenerator:null,multi:!1,type:"mixed"};function Lt(t,e,n){var i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function Mt(t,e,n,i,o,r,a,s){if(!i&&"undirected"===t.type)throw new j("Graph.".concat(e,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(i&&"directed"===t.type)throw new j("Graph.".concat(e,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(s&&!m(s))throw new B("Graph.".concat(e,': invalid attributes. Expecting an object but got "').concat(s,'"'));if(r=""+r,a=""+a,s=s||{},!t.allowSelfLoops&&r===a)throw new j("Graph.".concat(e,': source & target are the same ("').concat(r,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var h=t._nodes.get(r),u=t._nodes.get(a);if(!h)throw new G("Graph.".concat(e,': source node "').concat(r,'" not found.'));if(!u)throw new G("Graph.".concat(e,': target node "').concat(a,'" not found.'));var l={key:null,undirected:i,source:r,target:a,attributes:s};if(n&&(o=t._edgeKeyGenerator(l)),o=""+o,t._edges.has(o))throw new j("Graph.".concat(e,': the "').concat(o,'" edge already exists in the graph.'));if(!t.multi&&(i?void 0!==h.undirected[a]:void 0!==h.out[a]))throw new j("Graph.".concat(e,': an edge linking "').concat(r,'" to "').concat(a,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));s=new Y(i,o,n,h,u,s);return t._edges.set(o,s),r===a?i?(h.undirectedSelfLoops++,t._undirectedSelfLoopCount++):(h.directedSelfLoops++,t._directedSelfLoopCount++):i?(h.undirectedDegree++,u.undirectedDegree++):(h.outDegree++,u.inDegree++),K(t,i,s,r,a,h,u),i?t._undirectedSize++:t._directedSize++,l.key=o,t.emit("edgeAdded",l),o}function _t(t,e,n,i,o,r,a,s,h){if(!i&&"undirected"===t.type)throw new j("Graph.".concat(e,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(i&&"directed"===t.type)throw new j("Graph.".concat(e,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(s)if(h){if("function"!=typeof s)throw new B("Graph.".concat(e,': invalid updater function. Expecting a function but got "').concat(s,'"'))}else if(!m(s))throw new B("Graph.".concat(e,': invalid attributes. Expecting an object but got "').concat(s,'"'));if(r=""+r,a=""+a,h&&(f=s,s=void 0),!t.allowSelfLoops&&r===a)throw new j("Graph.".concat(e,': source & target are the same ("').concat(r,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var u,l,d,c=t._nodes.get(r),g=t._nodes.get(a);if(!n&&(u=t._edges.get(o))){if(u.source.key!==r||u.target.key!==a||i&&(u.source.key!==a||u.target.key!==r))throw new j("Graph.".concat(e,': inconsistency detected when attempting to merge the "').concat(o,'" edge with "').concat(r,'" source & "').concat(a,'" target vs. ("').concat(u.source.key,'", "').concat(u.target.key,'").'));l=u}if(l||t.multi||!c||(l=(i?c.undirected:c.out)[a]),l)return(h?f:s)&&(h?(d=l.attributes,l.attributes=f(d),t.emit("edgeAttributesUpdated",{type:"replace",key:l.key,attributes:l.attributes})):(p(l.attributes,s),t.emit("edgeAttributesUpdated",{type:"merge",key:l.key,attributes:l.attributes,data:s}))),l.key;s=s||{},h&&f&&(s=f(s));var f={key:null,undirected:i,source:r,target:a,attributes:s};if(n&&(o=t._edgeKeyGenerator(f)),o=""+o,t._edges.has(o))throw new j("Graph.".concat(e,': the "').concat(o,'" edge already exists in the graph.'));return c||(c=Lt(t,r,{}),r===a&&(g=c)),u=new Y(i,o,n,c,g=g||Lt(t,a,{}),s),t._edges.set(o,u),r===a?i?(c.undirectedSelfLoops++,t._undirectedSelfLoopCount++):(c.directedSelfLoops++,t._directedSelfLoopCount++):i?(c.undirectedDegree++,g.undirectedDegree++):(c.outDegree++,g.inDegree++),K(t,i,u,r,a,c,g),i?t._undirectedSize++:t._directedSize++,f.key=o,t.emit("edgeAdded",f),o}var Nt,At,Tt,Ct=function(o){function e(t){var e=o.call(this)||this;if((t=p({},kt,t)).edgeKeyGenerator&&"function"!=typeof t.edgeKeyGenerator)throw new B("Graph.constructor: invalid 'edgeKeyGenerator' option. Expecting a function but got \"".concat(t.edgeKeyGenerator,'".'));if("boolean"!=typeof t.multi)throw new B("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(t.multi,'".'));if(!xt.has(t.type))throw new B('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(t.type,'".'));if("boolean"!=typeof t.allowSelfLoops)throw new B("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(t.allowSelfLoops,'".'));var n,i="mixed"===t.type?U:"directed"===t.type?q:H;return u(s(e),"NodeDataClass",i),u(s(e),"_attributes",{}),u(s(e),"_nodes",new Map),u(s(e),"_edges",new Map),u(s(e),"_directedSize",0),u(s(e),"_undirectedSize",0),u(s(e),"_directedSelfLoopCount",0),u(s(e),"_undirectedSelfLoopCount",0),u(s(e),"_edgeKeyGenerator",t.edgeKeyGenerator||(n=0,function(){return"_geid".concat(n++,"_")})),u(s(e),"_options",t),Pt.forEach(function(t){return u(s(e),t,e[t])}),l(s(e),"order",function(){return e._nodes.size}),l(s(e),"size",function(){return e._edges.size}),l(s(e),"directedSize",function(){return e._directedSize}),l(s(e),"undirectedSize",function(){return e._undirectedSize}),l(s(e),"selfLoopCount",function(){return e._directedSelfLoopCount+e._undirectedSelfLoopCount}),l(s(e),"directedSelfLoopCount",function(){return e._directedSelfLoopCount}),l(s(e),"undirectedSelfLoopCount",function(){return e._undirectedSelfLoopCount}),l(s(e),"multi",e._options.multi),l(s(e),"type",e._options.type),l(s(e),"allowSelfLoops",e._options.allowSelfLoops),l(s(e),"implementation",function(){return"graphology"}),e}n(e,o);var t=e.prototype;return t.hasNode=function(t){return this._nodes.has(""+t)},t.hasDirectedEdge=function(t,e){if("undirected"===this.type)return!1;if(1===arguments.length){var n=""+t,n=this._edges.get(n);return!!n&&!n.undirected}if(2!==arguments.length)throw new B("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."));t=""+t,e=""+e;t=this._nodes.get(t);if(!t)return!1;e=t.out[e];return!(!e||this.multi&&!e.size)},t.hasUndirectedEdge=function(t,e){if("directed"===this.type)return!1;if(1===arguments.length){var n=""+t,n=this._edges.get(n);return!!n&&n.undirected}if(2!==arguments.length)throw new B("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."));t=""+t,e=""+e;t=this._nodes.get(t);if(!t)return!1;e=t.undirected[e];return!(!e||this.multi&&!e.size)},t.hasEdge=function(t,e){if(1===arguments.length){var n=""+t;return this._edges.has(n)}if(2!==arguments.length)throw new B("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."));t=""+t,e=""+e;n=this._nodes.get(t);if(!n)return!1;t=void 0!==n.out&&n.out[e];return!(!(t=t||void 0!==n.undirected&&n.undirected[e])||this.multi&&!t.size)},t.directedEdge=function(t,e){if("undirected"!==this.type){if(t=""+t,e=""+e,this.multi)throw new j("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var n=this._nodes.get(t);if(!n)throw new G('Graph.directedEdge: could not find the "'.concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new G('Graph.directedEdge: could not find the "'.concat(e,'" target node in the graph.'));e=n.out&&n.out[e]||void 0;return e?e.key:void 0}},t.undirectedEdge=function(t,e){if("directed"!==this.type){if(t=""+t,e=""+e,this.multi)throw new j("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var n=this._nodes.get(t);if(!n)throw new G('Graph.undirectedEdge: could not find the "'.concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new G('Graph.undirectedEdge: could not find the "'.concat(e,'" target node in the graph.'));e=n.undirected&&n.undirected[e]||void 0;return e?e.key:void 0}},t.edge=function(t,e){if(this.multi)throw new j("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new G('Graph.edge: could not find the "'.concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new G('Graph.edge: could not find the "'.concat(e,'" target node in the graph.'));e=n.out&&n.out[e]||n.undirected&&n.undirected[e]||void 0;if(e)return e.key},t.inDegree=function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof e)throw new B('Graph.inDegree: Expecting a boolean but got "'.concat(e,'" for the second parameter (allowing self-loops to be counted).'));t=""+t;var n=this._nodes.get(t);if(!n)throw new G('Graph.inDegree: could not find the "'.concat(t,'" node in the graph.'));if("undirected"===this.type)return 0;e=e?n.directedSelfLoops:0;return n.inDegree+e},t.outDegree=function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof e)throw new B('Graph.outDegree: Expecting a boolean but got "'.concat(e,'" for the second parameter (allowing self-loops to be counted).'));t=""+t;var n=this._nodes.get(t);if(!n)throw new G('Graph.outDegree: could not find the "'.concat(t,'" node in the graph.'));if("undirected"===this.type)return 0;e=e?n.directedSelfLoops:0;return n.outDegree+e},t.directedDegree=function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof e)throw new B('Graph.directedDegree: Expecting a boolean but got "'.concat(e,'" for the second parameter (allowing self-loops to be counted).'));t=""+t;var n=this._nodes.get(t);if(!n)throw new G('Graph.directedDegree: could not find the "'.concat(t,'" node in the graph.'));if("undirected"===this.type)return 0;e=e?n.directedSelfLoops:0;return n.inDegree+e+(n.outDegree+e)},t.undirectedDegree=function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof e)throw new B('Graph.undirectedDegree: Expecting a boolean but got "'.concat(e,'" for the second parameter (allowing self-loops to be counted).'));t=""+t;var n=this._nodes.get(t);if(!n)throw new G('Graph.undirectedDegree: could not find the "'.concat(t,'" node in the graph.'));if("directed"===this.type)return 0;e=e?n.undirectedSelfLoops:0;return n.undirectedDegree+2*e},t.degree=function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if("boolean"!=typeof e)throw new B('Graph.degree: Expecting a boolean but got "'.concat(e,'" for the second parameter (allowing self-loops to be counted).'));t=""+t;var n=this._nodes.get(t);if(!n)throw new G('Graph.degree: could not find the "'.concat(t,'" node in the graph.'));var i=0,t=0;return"directed"!==this.type&&(e&&(t=n.undirectedSelfLoops),i+=n.undirectedDegree+2*t),"undirected"!==this.type&&(e&&(t=n.directedSelfLoops),i+=n.inDegree+n.outDegree+2*t),i},t.source=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new G('Graph.source: could not find the "'.concat(t,'" edge in the graph.'));return e.source.key},t.target=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new G('Graph.target: could not find the "'.concat(t,'" edge in the graph.'));return e.target.key},t.extremities=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new G('Graph.extremities: could not find the "'.concat(t,'" edge in the graph.'));return[e.source.key,e.target.key]},t.opposite=function(t,e){t=""+t,e=""+e;var n=this._edges.get(e);if(!n)throw new G('Graph.opposite: could not find the "'.concat(e,'" edge in the graph.'));var i=n.source.key,n=n.target.key;if(t!==i&&t!==n)throw new G('Graph.opposite: the "'.concat(t,'" node is not attached to the "').concat(e,'" edge (').concat(i,", ").concat(n,")."));return t===i?n:i},t.hasExtremity=function(t,e){t=""+t,e=""+e;var n=this._edges.get(t);if(!n)throw new G('Graph.hasExtremity: could not find the "'.concat(t,'" edge in the graph.'));return n.source.key===e||n.target.key===e},t.isUndirected=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new G('Graph.isUndirected: could not find the "'.concat(t,'" edge in the graph.'));return e.undirected},t.isDirected=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new G('Graph.isDirected: could not find the "'.concat(t,'" edge in the graph.'));return!e.undirected},t.isSelfLoop=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new G('Graph.isSelfLoop: could not find the "'.concat(t,'" edge in the graph.'));return e.source===e.target},t.hasGeneratedKey=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new G('Graph.hasGeneratedKey: could not find the "'.concat(t,'" edge in the graph.'));return e.generatedKey},t.addNode=function(t,e){return function(t,e,n){if(n&&!m(n))throw new B('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(n,'"'));if(e=""+e,n=n||{},t._nodes.has(e))throw new j('Graph.addNode: the "'.concat(e,'" node already exist in the graph.'));var i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}(this,t,e).key},t.mergeNode=function(t,e){if(e&&!m(e))throw new B('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(e,'"'));t=""+t,e=e||{};var n=this._nodes.get(t);return n?e&&(p(n.attributes,e),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:n.attributes,data:e})):(n=new this.NodeDataClass(t,e),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:e})),t},t.updateNode=function(t,e){if(e&&"function"!=typeof e)throw new B('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(e,'"'));t=""+t;var n,i=this._nodes.get(t);if(i)return e&&(n=i.attributes,i.attributes=e(n),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:i.attributes})),t;e=e?e({}):{},i=new this.NodeDataClass(t,e);return this._nodes.set(t,i),this.emit("nodeAdded",{key:t,attributes:e}),t},t.dropNode=function(t){var e=this;t=""+t;var n=this._nodes.get(t);if(!n)throw new G('Graph.dropNode: could not find the "'.concat(t,'" node in the graph.'));this.forEachEdge(t,function(t){e.dropEdge(t)}),this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:n.attributes})},t.dropEdge=function(t){if(1<arguments.length){var e=""+arguments[0],n=""+arguments[1];if(!(h=g(this,e,n,this.type)))throw new G('Graph.dropEdge: could not find the "'.concat(e,'" -> "').concat(n,'" edge in the graph.'))}else if(t=""+t,!(h=this._edges.get(t)))throw new G('Graph.dropEdge: could not find the "'.concat(t,'" edge in the graph.'));this._edges.delete(h.key);var i,o,r,a,s,h,u=h.source,l=h.target,d=h.attributes,c=h.undirected;return u===l?c?(u.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(u.directedSelfLoops--,this._directedSelfLoopCount--):c?(u.undirectedDegree--,l.undirectedDegree--):(u.outDegree--,l.inDegree--),o=c,r=h,a=(i=this).multi,s=r.source,e=r.target,n=s.key,h=e.key,i=s[o?"undirected":"out"],s=o?"undirected":"in",h in i&&(a?1===(o=i[h]).size?(delete i[h],delete e[s][n]):o.delete(r):delete i[h]),a||delete e[s][n],c?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:t,attributes:d,source:u.key,target:l.key,undirected:c}),this},t.clear=function(){this._edges.clear(),this._nodes.clear(),this.emit("cleared")},t.clearEdges=function(){this._edges.clear(),this.clearIndex(),this.emit("edgesCleared")},t.getAttribute=function(t){return this._attributes[t]},t.getAttributes=function(){return this._attributes},t.hasAttribute=function(t){return this._attributes.hasOwnProperty(t)},t.setAttribute=function(t,e){return this._attributes[t]=e,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this},t.updateAttribute=function(t,e){if("function"!=typeof e)throw new B("Graph.updateAttribute: updater should be a function.");var n=this._attributes[t];return this._attributes[t]=e(n),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this},t.removeAttribute=function(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this},t.replaceAttributes=function(t){if(!m(t))throw new B("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},t.mergeAttributes=function(t){if(!m(t))throw new B("Graph.mergeAttributes: provided attributes are not a plain object.");return p(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this},t.getNodeAttribute=function(t,e){t=""+t;var n=this._nodes.get(t);if(!n)throw new G('Graph.getNodeAttribute: could not find the "'.concat(t,'" node in the graph.'));return n.attributes[e]},t.getNodeAttributes=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new G('Graph.getNodeAttributes: could not find the "'.concat(t,'" node in the graph.'));return e.attributes},t.hasNodeAttribute=function(t,e){t=""+t;var n=this._nodes.get(t);if(!n)throw new G('Graph.hasNodeAttribute: could not find the "'.concat(t,'" node in the graph.'));return n.attributes.hasOwnProperty(e)},t.setNodeAttribute=function(t,e,n){t=""+t;var i=this._nodes.get(t);if(!i)throw new G('Graph.setNodeAttribute: could not find the "'.concat(t,'" node in the graph.'));if(arguments.length<3)throw new B("Graph.setNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or value, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");return i.attributes[e]=n,this.emit("nodeAttributesUpdated",{key:t,type:"set",attributes:i.attributes,name:e}),this},t.updateNodeAttribute=function(t,e,n){t=""+t;var i=this._nodes.get(t);if(!i)throw new G('Graph.updateNodeAttribute: could not find the "'.concat(t,'" node in the graph.'));if(arguments.length<3)throw new B("Graph.updateNodeAttribute: not enough arguments. Either you forgot to pass the attribute's name or updater, or you meant to use #.replaceNodeAttributes / #.mergeNodeAttributes instead.");if("function"!=typeof n)throw new B("Graph.updateAttribute: updater should be a function.");var o=i.attributes,n=n(o[e]);return o[e]=n,this.emit("nodeAttributesUpdated",{key:t,type:"set",attributes:i.attributes,name:e}),this},t.removeNodeAttribute=function(t,e){t=""+t;var n=this._nodes.get(t);if(!n)throw new G('Graph.hasNodeAttribute: could not find the "'.concat(t,'" node in the graph.'));return delete n.attributes[e],this.emit("nodeAttributesUpdated",{key:t,type:"remove",attributes:n.attributes,name:e}),this},t.replaceNodeAttributes=function(t,e){t=""+t;var n=this._nodes.get(t);if(!n)throw new G('Graph.replaceNodeAttributes: could not find the "'.concat(t,'" node in the graph.'));if(!m(e))throw new B("Graph.replaceNodeAttributes: provided attributes are not a plain object.");return n.attributes=e,this.emit("nodeAttributesUpdated",{key:t,type:"replace",attributes:n.attributes}),this},t.mergeNodeAttributes=function(t,e){t=""+t;var n=this._nodes.get(t);if(!n)throw new G('Graph.mergeNodeAttributes: could not find the "'.concat(t,'" node in the graph.'));if(!m(e))throw new B("Graph.mergeNodeAttributes: provided attributes are not a plain object.");return p(n.attributes,e),this.emit("nodeAttributesUpdated",{key:t,type:"merge",attributes:n.attributes,data:e}),this},t.updateEachNodeAttributes=function(t,e){if("function"!=typeof t)throw new B("Graph.updateEachNodeAttributes: expecting an updater function.");if(e&&!d(e))throw new B("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var n,i=this._nodes.values();!0!==(n=i.next()).done;)(n=n.value).attributes=t(n.key,n.attributes);this.emit("eachNodeAttributesUpdated",{hints:e||null})},t.updateEachEdgeAttributes=function(t,e){if("function"!=typeof t)throw new B("Graph.updateEachEdgeAttributes: expecting an updater function.");if(e&&!d(e))throw new B("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var n,i=this._edges.values();!0!==(n=i.next()).done;)(n=n.value).attributes=t(n.key,n.attributes);this.emit("eachEdgeAttributesUpdated",{hints:e||null})},t.forEach=function(t){if("function"!=typeof t)throw new B("Graph.forEach: expecting a callback.");(this.multi?wt:vt)(!1,this,t)},t.forEachUntil=function(t){if("function"!=typeof t)throw new B("Graph.forEach: expecting a callback.");(this.multi?wt:vt)(!0,this,t)},t.adjacency=function(){return this.multi?(f=(t=this)._nodes.values(),p=t.type,m="outer",y=null,new F(function t(){if("outer"===m)return!0===(n=f.next()).done?n:(l=n.value,m="directed",t());if("directed"===m)return m="undirected"===p?"undirected":(c=l.out,d=Object.keys(l.out),g=0,"inner-directed"),t();if("undirected"===m){if("directed"===p)return m="outer",t();c=l.undirected,d=Object.keys(l.undirected),g=0,m="inner-undirected"}if(!y&&g>=d.length)return m="inner-undirected"===m?"outer":"undirected",t();if(!y){var e=d[g++];return y=c[e].values(),t()}if((n=y.next()).done)return y=null,t();var e=n.value,n=e.target;return"inner-undirected"===m&&n.key===l.key&&(n=e.source),{done:!1,value:[l.key,n.key,l.attributes,n.attributes,e.key,e.attributes]}})):(s=(t=this)._nodes.values(),h=t.type,u="outer",new F(function t(){if("outer"===u)return!0===(n=s.next()).done?n:(i=n.value,u="directed",t());if("directed"===u)return u="undirected"===h?"undirected":(r=i.out,o=Object.keys(i.out),a=0,"inner-directed"),t();if("undirected"===u){if("directed"===h)return u="outer",t();r=i.undirected,o=Object.keys(i.undirected),a=0,u="inner-undirected"}if(a>=o.length)return u="inner-undirected"===u?"outer":"undirected",t();var e=o[a++],n=r[e],e=n.target;return"inner-undirected"===u&&e.key===i.key&&(e=n.source),{done:!1,value:[i.key,e.key,i.attributes,e.attributes,n.key,n.attributes]}}));var i,o,r,a,s,h,u,t,l,d,c,g,f,p,m,y},t.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):A(this._nodes.keys(),this._nodes.size)},t.forEachNode=function(n){if("function"!=typeof n)throw new B("Graph.forEachNode: expecting a callback.");this._nodes.forEach(function(t,e){n(e,t.attributes)})},t.forEachNodeUntil=function(t){if("function"!=typeof t)throw new B("Graph.forEachNode: expecting a callback.");for(var e,n=this._nodes.values();!0!==(e=n.next())&&!t((e=e.value).key,e.attributes););},t.nodeEntries=function(){var e=this._nodes.values();return new F(function(){var t=e.next();if(t.done)return t;t=t.value;return{value:[t.key,t.attributes],done:!1}})},t.exportNode=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new G('Graph.exportNode: could not find the "'.concat(t,'" node in the graph.'));return bt(t,e)},t.exportEdge=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new G('Graph.exportEdge: could not find the "'.concat(t,'" edge in the graph.'));return St(t,e)},t.export=function(){var n=new Array(this._nodes.size),i=0;this._nodes.forEach(function(t,e){n[i++]=bt(e,t)});var o=new Array(this._edges.size),i=0;return this._edges.forEach(function(t,e){o[i++]=St(e,t)}),{attributes:this.getAttributes(),nodes:n,edges:o,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}},t.importNode=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=m(n=t)?"key"in n?!("attributes"in n)||m(n.attributes)&&null!==n.attributes?null:"invalid-attributes":"no-key":"not-object";if(n){if("not-object"===n)throw new B('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if("no-key"===n)throw new B("Graph.importNode: no key provided.");if("invalid-attributes"===n)throw new B("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}var n=t.key,t=t.attributes,t=void 0===t?{}:t;return e?this.mergeNode(n,t):this.addNode(n,t),this},t.importEdge=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=m(r=t)?"source"in r?"target"in r?!("attributes"in r)||m(r.attributes)&&null!==r.attributes?"undirected"in r&&"boolean"!=typeof r.undirected?"invalid-undirected":null:"invalid-attributes":"no-target":"no-source":"not-object";if(n){if("not-object"===n)throw new B('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if("no-source"===n)throw new B("Graph.importEdge: missing souce.");if("no-target"===n)throw new B("Graph.importEdge: missing target.");if("invalid-attributes"===n)throw new B("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if("invalid-undirected"===n)throw new B("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}var i=t.source,o=t.target,r=t.attributes,n=void 0===r?{}:r,r=t.undirected,r=void 0!==r&&r;return"key"in t?(e?r?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:r?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,t.key,i,o,n):(e?r?this.mergeUndirectedEdge:this.mergeDirectedEdge:r?this.addUndirectedEdge:this.addDirectedEdge).call(this,i,o,n),this},t.import=function(t){var e,n,i,o,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(null!==(o=t)&&"object"===a(o)&&"function"==typeof o.addUndirectedEdgeWithKey&&"function"==typeof o.dropNode)return this.import(t.export(),r),this;if(!m(t))throw new B("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!m(t.attributes))throw new B("Graph.import: invalid attributes. Expecting a plain object.");r?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}if(t.nodes){if(i=t.nodes,!Array.isArray(i))throw new B("Graph.import: invalid nodes. Expecting an array.");for(e=0,n=i.length;e<n;e++)this.importNode(i[e],r)}if(t.edges){if(i=t.edges,!Array.isArray(i))throw new B("Graph.import: invalid edges. Expecting an array.");for(e=0,n=i.length;e<n;e++)this.importEdge(i[e],r)}return this},t.nullCopy=function(t){return new e(p({},this._options,t))},t.emptyCopy=function(t){var i=this.nullCopy(t);return this._nodes.forEach(function(t,e){var n=p({},t.attributes);t=new i.NodeDataClass(e,n),i._nodes.set(e,t)}),i},t.copy=function(){var t=new e(this._options);return t.import(this),t},t.upgradeToMixed=function(){return"mixed"===this.type||(this._nodes.forEach(function(t){return t.upgradeToMixed()}),this._options.type="mixed",l(this,"type",this._options.type),u(this,"NodeDataClass",U)),this},t.upgradeToMulti=function(){return this.multi||(this._options.multi=!0,l(this,"multi",!0),(a=this)._nodes.forEach(function(t,e){if(t.out)for(var n in t.out){var i=new Set;i.add(t.out[n]),t.out[n]=i,a._nodes.get(n).in[e]=i}if(t.undirected)for(var o in t.undirected){var r;e<o||((r=new Set).add(t.undirected[o]),t.undirected[o]=r,a._nodes.get(o).undirected[e]=r)}})),this;var a},t.clearIndex=function(){return this._nodes.forEach(function(t){void 0!==t.in&&(t.in={},t.out={}),void 0!==t.undirected&&(t.undirected={})}),this},t.toJSON=function(){return this.export()},t.toString=function(){return"[object Graph]"},t.inspect=function(){var o=this,n={};this._nodes.forEach(function(t,e){n[e]=t.attributes});var r={},a={};this._edges.forEach(function(t,e){var n=t.undirected?"--":"->",i="",n="(".concat(t.source.key,")").concat(n,"(").concat(t.target.key,")");t.generatedKey?o.multi&&(void 0===a[n]?a[n]=0:a[n]++,i+="".concat(a[n],". ")):i+="[".concat(e,"]: "),r[i+=n]=t.attributes});var t,e={};for(t in this)this.hasOwnProperty(t)&&!Pt.has(t)&&"function"!=typeof this[t]&&(e[t]=this[t]);return e.attributes=this._attributes,e.nodes=n,e.edges=r,u(e,"constructor",this.constructor),e},e}(w.EventEmitter);"undefined"!=typeof Symbol&&(Ct.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ct.prototype.inspect),[{name:function(t){return"".concat(t,"Edge")},generateKey:!0},{name:function(t){return"".concat(t,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(t){return"".concat(t,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(t){return"".concat(t,"EdgeWithKey")}},{name:function(t){return"".concat(t,"DirectedEdgeWithKey")},type:"directed"},{name:function(t){return"".concat(t,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(s){["add","merge","update"].forEach(function(o){var r=s.name(o),a="add"===o?Mt:_t;s.generateKey?Ct.prototype[r]=function(t,e,n){return a(this,r,!0,"undirected"===(s.type||this.type),null,t,e,n,"update"===o)}:Ct.prototype[r]=function(t,e,n,i){return a(this,r,!1,"undirected"===(s.type||this.type),t,e,n,i,"update"===o)}})}),"undefined"!=typeof Symbol&&(Ct.prototype[Symbol.iterator]=Ct.prototype.adjacency),Tt=Ct,W.forEach(function(t){var e=t.name,t=t.attacher;t(Tt,e("Edge"),"mixed"),t(Tt,e("DirectedEdge"),"directed"),t(Tt,e("UndirectedEdge"),"undirected")}),At=Ct,$.forEach(function(t){var a,s,h,o,r,u,e,n,l,d,c,g,f,p;g=t.name,f=t.type,p=t.direction,At.prototype[g]=function(t,e){if("mixed"!==f&&"mixed"!==this.type&&f!==this.type)return[];if(!arguments.length)return function(t,e){if(0===t.size)return[];if("mixed"===e||e===t.type)return"function"==typeof Array.from?Array.from(t._edges.keys()):A(t._edges.keys(),t._edges.size);for(var n,i="undirected"===e?t.undirectedSize:t.directedSize,o=new Array(i),r="undirected"===e,a=t._edges.values(),s=0;!0!==(n=a.next()).done;)(n=n.value).undirected===r&&(o[s++]=n.key);return o}(this,f);if(1===arguments.length){t=""+t;var n=this._nodes.get(t);if(void 0===n)throw new G("Graph.".concat(g,': could not find the "').concat(t,'" node in the graph.'));return o=this.multi,a="mixed"===f?this.type:f,i=p,r=n,n=[],o=o?Z:J,"undirected"!==a&&("out"!==i&&o(n,r.in),"in"!==i&&o(n,r.out),!i&&0<r.directedSelfLoops&&n.splice(n.lastIndexOf(r.key),1)),"directed"!==a&&o(n,r.undirected),n}var i,o,r;if(2!==arguments.length)throw new B("Graph.".concat(g,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."));t=""+t,e=""+e;var a=this._nodes.get(t);if(!a)throw new G("Graph.".concat(g,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new G("Graph.".concat(g,':  could not find the "').concat(e,'" target node in the graph.'));return o=f,r=this.multi,n=p,t=a,a=e,e=r?rt:ot,r=[],"undirected"!==o&&(void 0!==t.in&&"out"!==n&&e(r,t.in,a),void 0!==t.out&&"in"!==n&&e(r,t.out,a),!n&&0<t.directedSelfLoops&&r.splice(r.lastIndexOf(t.key),1)),"directed"!==o&&void 0!==t.undirected&&e(r,t.undirected,a),r},e=At,n=t.name,l=t.type,d=t.direction,c="forEach"+n[0].toUpperCase()+n.slice(1,-1),e.prototype[c]=function(t,e,n){if("mixed"===l||"mixed"===this.type||l===this.type){if(1===arguments.length)return function(t,e,n){if(0!==t.size)for(var i="mixed"!==e&&e!==t.type,o="undirected"===e,r=t._edges.values();!0!==(u=r.next()).done;){var a,s,h,u,l=u.value;i&&l.undirected!==o||(a=l.key,s=l.attributes,h=l.source,u=l.target,n(a,s,h.key,u.key,h.attributes,u.attributes,l.undirected,l.generatedKey))}}(this,l,n=t);if(2===arguments.length){t=""+t,n=e;var i=this._nodes.get(t);if(void 0===i)throw new G("Graph.".concat(c,': could not find the "').concat(t,'" node in the graph.'));return o=this.multi,r="mixed"===l?this.type:l,a=d,s=i,i=n,o=o?tt:Q,"undirected"!==r&&("out"!==a&&o(s.in,i),"in"!==a&&o(s.out,i,a?null:s.key)),void("directed"!==r&&o(s.undirected,i))}if(3!==arguments.length)throw new B("Graph.".concat(c,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."));t=""+t,e=""+e;o=this._nodes.get(t);if(!o)throw new G("Graph.".concat(c,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new G("Graph.".concat(c,':  could not find the "').concat(e,'" target node in the graph.'));return s=l,i=this.multi,t=d,o=o,e=e,n=n,i=i?st:at,"undirected"!==s&&(void 0!==o.in&&"out"!==t&&i(o.in,e,n),o.key!==e&&void 0!==o.out&&"in"!==t&&i(o.out,e,n)),void("directed"!==s&&void 0!==o.undirected&&i(o.undirected,e,n))}var o,r,a,s},n=At,e=t.name,o=t.type,r=t.direction,u="forEach"+e[0].toUpperCase()+e.slice(1,-1)+"Until",n.prototype[u]=function(t,e,n){if("mixed"===o||"mixed"===this.type||o===this.type){if(1===arguments.length)return function(t,e,n){if(0!==t.size)for(var i,o="mixed"!==e&&e!==t.type,r="undirected"===e,a=t._edges.values();!0!==(l=a.next()).done;)if(i=l.value,!o||i.undirected===r){var s=i.key,h=i.attributes,u=i.source,l=i.target;if(n(s,h,u.key,l.key,u.attributes,l.attributes,i.undirected,i.generatedKey))break}}(this,o,n=t);if(2===arguments.length){t=""+t,n=e;var i=this._nodes.get(t);if(void 0===i)throw new G("Graph.".concat(u,': could not find the "').concat(t,'" node in the graph.'));return function(t,e,n,i,o){if(t=t?nt:et,"undirected"!==e){if("out"!==n&&t(i.in,o))return;if("in"!==n&&t(i.out,o,n?null:i.key))return}"directed"===e||t(i.undirected,o)}(this.multi,"mixed"===o?this.type:o,r,i,n)}if(3!==arguments.length)throw new B("Graph.".concat(u,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."));t=""+t,e=""+e;i=this._nodes.get(t);if(!i)throw new G("Graph.".concat(u,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new G("Graph.".concat(u,':  could not find the "').concat(e,'" target node in the graph.'));return function(t,e,n,i,o,r){if(e=e?ut:ht,"undirected"!==t){if(void 0!==i.in&&"out"!==n&&e(i.in,o,r))return;if(i.key!==o&&void 0!==i.out&&"in"!==n&&e(i.out,o,r,n?null:i.key))return}"directed"===t||void 0===i.undirected||e(i.undirected,o,r)}(o,this.multi,r,i,e,n)}},e=At,n=t.name,a=t.type,s=t.direction,h=n.slice(0,-1)+"Entries",e.prototype[h]=function(t,e){if("mixed"!==a&&"mixed"!==this.type&&a!==this.type)return F.empty();if(!arguments.length)return function(t,e){if(0===t.size)return F.empty();var n="mixed"!==e&&e!==t.type,i="undirected"===e,o=t._edges.values();return new F(function(){for(var t,e;;){if((t=o.next()).done)return t;if(e=t.value,!n||e.undirected===i)break}return{value:[e.key,e.attributes,e.source.key,e.target.key,e.source.attributes,e.target.attributes],done:!1}})}(this,a);if(1===arguments.length){t=""+t;var n=this._nodes.get(t);if(!n)throw new G("Graph.".concat(h,': could not find the "').concat(t,'" node in the graph.'));return r=a,i=s,o=n,n=F.empty(),"undirected"!==r&&("out"!==i&&void 0!==o.in&&(n=X(n,it(o.in))),"in"!==i&&void 0!==o.out&&(n=X(n,it(o.out,i?null:o.key)))),"directed"!==r&&void 0!==o.undirected&&(n=X(n,it(o.undirected))),n}var i,o;if(2!==arguments.length)throw new B("Graph.".concat(h,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."));t=""+t,e=""+e;var r=this._nodes.get(t);if(!r)throw new G("Graph.".concat(h,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new G("Graph.".concat(h,':  could not find the "').concat(e,'" target node in the graph.'));return o=a,n=s,t=r,r=e,e=F.empty(),"undirected"!==o&&(void 0!==t.in&&"out"!==n&&r in t.in&&(e=X(e,lt(t.in,r))),void 0!==t.out&&"in"!==n&&r in t.out&&(e=X(e,lt(t.out,r)))),"directed"!==o&&void 0!==t.undirected&&r in t.undirected&&(e=X(e,lt(t.undirected,r))),e}}),Nt=Ct,t.forEach(function(t){var n,i,o,r,a,s,e,h,u,l,d,c,g,f;c=t.name,g=t.type,f=t.direction,Nt.prototype[c]=function(t){if("mixed"!==g&&"mixed"!==this.type&&g!==this.type)return[];if(2===arguments.length){var e=""+arguments[0],n=""+arguments[1];if(!this._nodes.has(e))throw new G("Graph.".concat(c,': could not find the "').concat(e,'" node in the graph.'));if(!this._nodes.has(n))throw new G("Graph.".concat(c,': could not find the "').concat(n,'" node in the graph.'));return function(t,e,n,i,o){if(i=t._nodes.get(i),"undirected"!==e){if("out"!==n&&void 0!==i.in)for(var r in i.in)if(r===o)return!0;if("in"!==n&&void 0!==i.out)for(var a in i.out)if(a===o)return!0}if("directed"!==e&&void 0!==i.undirected)for(var s in i.undirected)if(s===o)return!0;return!1}(this,g,f,e,n)}if(1!==arguments.length)throw new B("Graph.".concat(c,": invalid number of arguments (expecting 1 or 2 and got ").concat(arguments.length,")."));t=""+t;n=this._nodes.get(t);if(void 0===n)throw new G("Graph.".concat(c,': could not find the "').concat(t,'" node in the graph.'));return function(t,e,n){if("mixed"!==t){if("undirected"===t)return Object.keys(n.undirected);if("string"==typeof e)return Object.keys(n[e])}var i=new Set;return"undirected"!==t&&("out"!==e&&dt(i,n.in),"in"!==e&&dt(i,n.out)),"directed"!==t&&dt(i,n.undirected),A(i.values(),i.size)}("mixed"===g?this.type:g,f,n)},e=Nt,h=t.name,u=t.type,l=t.direction,d="forEach"+h[0].toUpperCase()+h.slice(1,-1),e.prototype[d]=function(t,e){if("mixed"===u||"mixed"===this.type||u===this.type){t=""+t;var n=this._nodes.get(t);if(void 0===n)throw new G("Graph.".concat(d,': could not find the "').concat(t,'" node in the graph.'));!function(t,e,n,i){if("mixed"!==t){if("undirected"===t)return ct(n,n.undirected,i),0;if("string"==typeof e)return ct(n,n[e],i),0}var o=new Set;"undirected"!==t&&("out"!==e&&gt(o,n,n.in,i),"in"!==e&&gt(o,n,n.out,i)),"directed"!==t&&gt(o,n,n.undirected,i)}("mixed"===u?this.type:u,l,n,e)}},h=Nt,e=t.name,r=t.type,a=t.direction,s="forEach"+e[0].toUpperCase()+e.slice(1,-1)+"Until",h.prototype[s]=function(t,e){if("mixed"===r||"mixed"===this.type||r===this.type){t=""+t;var n=this._nodes.get(t);if(void 0===n)throw new G("Graph.".concat(s,': could not find the "').concat(t,'" node in the graph.'));!function(t,e,n,i){if("mixed"!==t){if("undirected"===t)return ft(n,n.undirected,i);if("string"==typeof e)return ft(n,n[e],i)}var o=new Set;if("undirected"!==t){if("out"!==e&&pt(o,n,n.in,i))return;if("in"!==e&&pt(o,n,n.out,i))return}"directed"===t||pt(o,n,n.undirected,i)}("mixed"===r?this.type:r,a,n,e)}},e=Nt,h=t.name,n=t.type,i=t.direction,o=h.slice(0,-1)+"Entries",e.prototype[o]=function(t){if("mixed"!==n&&"mixed"!==this.type&&n!==this.type)return F.empty();t=""+t;var e=this._nodes.get(t);if(void 0===e)throw new G("Graph.".concat(o,': could not find the "').concat(t,'" node in the graph.'));return function(t,e,n){if("mixed"!==t){if("undirected"===t)return mt(n,n.undirected);if("string"==typeof e)return mt(n,n[e])}var i=F.empty(),o=new Set;return"undirected"!==t&&("out"!==e&&(i=X(i,yt(o,n,n.in))),"in"!==e&&(i=X(i,yt(o,n,n.out)))),"directed"!==t&&(i=X(i,yt(o,n,n.undirected))),i}("mixed"===n?this.type:n,i,e)}});var Dt,Et,Ft,Ot,Bt,O=(n(It,Bt=Ct),It),w=(n(Rt,Ot=Ct),Rt),W=(n(zt,Ft=Ct),zt),$=(n(jt,Et=Ct),jt),t=(n(Gt,Dt=Ct),Gt);function Gt(t){t=p({type:"undirected",multi:!0},t);if("multi"in t&&!0!==t.multi)throw new B("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==t.type)throw new B('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');return Dt.call(this,t)||this}function jt(t){t=p({type:"directed",multi:!0},t);if("multi"in t&&!0!==t.multi)throw new B("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==t.type)throw new B('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');return Et.call(this,t)||this}function zt(t){t=p({multi:!0},t);if("multi"in t&&!0!==t.multi)throw new B("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return Ft.call(this,t)||this}function Rt(t){t=p({type:"undirected"},t);if("multi"in t&&!1!==t.multi)throw new B("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==t.type)throw new B('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');return Ot.call(this,t)||this}function It(t){t=p({type:"directed"},t);if("multi"in t&&!1!==t.multi)throw new B("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==t.type)throw new B('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');return Bt.call(this,t)||this}function Vt(n){n.from=function(t,e){e=p({},t.options,e),e=new n(e);return e.import(t),e}}return Vt(Ct),Vt(O),Vt(w),Vt(W),Vt($),Vt(t),(Ct.Graph=Ct).DirectedGraph=O,Ct.UndirectedGraph=w,Ct.MultiGraph=W,Ct.MultiDirectedGraph=$,Ct.MultiUndirectedGraph=t,Ct.InvalidArgumentsGraphError=B,Ct.NotFoundGraphError=G,Ct.UsageGraphError=j,Ct}()},973:function(t,e,n){n.r(e),n.d(e,{default:function(){return i}});var i="precision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n"},912:function(t,e,n){n.r(e),n.d(e,{default:function(){return i}});var i="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_thickness;\nattribute float a_radius;\nattribute vec4 a_color;\nattribute vec3 a_barycentric;\n\nuniform mat3 u_matrix;\nuniform float u_scale;\nuniform float u_cameraRatio;\nuniform float u_viewportRatio;\nuniform float u_thicknessRatio;\n\nvarying vec4 v_color;\n\nconst float arrowHeadLengthThicknessRatio = 2.5;\nconst float arrowHeadWidthLengthRatio = 0.66;\nconst float minThickness = 0.8;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n\n  // Computing thickness in screen space:\n  float thickness = a_thickness * u_thicknessRatio * u_scale * u_viewportRatio / 2.0;\n  thickness = max(thickness, minThickness * u_viewportRatio);\n\n  float nodeRadius = a_radius * u_thicknessRatio * u_viewportRatio * u_cameraRatio;\n  float arrowHeadLength = thickness * 2.0 * arrowHeadLengthThicknessRatio * u_cameraRatio;\n  float arrowHeadHalfWidth = arrowHeadWidthLengthRatio * arrowHeadLength / 2.0;\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  vec2 delta = vec2(\n      da * ((nodeRadius) * a_normal.y)\n    + db * ((nodeRadius + arrowHeadLength) * a_normal.y + arrowHeadHalfWidth * a_normal.x)\n    + dc * ((nodeRadius + arrowHeadLength) * a_normal.y - arrowHeadHalfWidth * a_normal.x),\n\n      da * (-(nodeRadius) * a_normal.x)\n    + db * (-(nodeRadius + arrowHeadLength) * a_normal.x + arrowHeadHalfWidth * a_normal.y)\n    + dc * (-(nodeRadius + arrowHeadLength) * a_normal.x - arrowHeadHalfWidth * a_normal.y)\n  );\n\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n"},620:function(t,e,n){n.r(e),n.d(e,{default:function(){return i}});var i="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_thickness;\nattribute vec4 a_color;\nattribute float a_radius;\n\nuniform mat3 u_matrix;\nuniform float u_scale;\nuniform float u_cameraRatio;\nuniform float u_viewportRatio;\nuniform float u_thicknessRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float arrowHeadLengthThicknessRatio = 2.5;\nconst float minThickness = 0.8;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n\n  // Computing thickness in screen space:\n  float thickness = a_thickness * u_thicknessRatio * u_scale * u_viewportRatio / 2.0;\n  thickness = max(thickness, minThickness * u_viewportRatio);\n\n  float direction = sign(a_radius);\n  float nodeRadius = direction * a_radius * u_thicknessRatio * u_viewportRatio;\n  float arrowHeadLength = thickness * 2.0 * arrowHeadLengthThicknessRatio;\n\n  vec2 arrowHeadVector = vec2(-direction * a_normal.y, direction * a_normal.x);\n\n  // Add normal vector to the position in screen space, but correct thickness first:\n  vec2 position = a_position + a_normal * thickness * u_cameraRatio;\n  // Add vector that corrects the arrow head length:\n  position = position + arrowHeadVector * (arrowHeadLength + nodeRadius) * u_cameraRatio;\n  // Apply camera\n  position = (u_matrix * vec3(position, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  v_normal = a_normal;\n  v_thickness = thickness;\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n"},498:function(t,e,n){n.r(e),n.d(e,{default:function(){return i}});var i="precision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float feather = 0.001;\nconst vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, color0, t);\n}\n"},223:function(t,e,n){n.r(e),n.d(e,{default:function(){return i}});var i="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_thickness;\nattribute vec4 a_color;\n\nuniform mat3 u_matrix;\nuniform float u_scale;\nuniform float u_cameraRatio;\nuniform float u_viewportRatio;\nuniform float u_thicknessRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 0.8;\nconst float bias = 255.0 / 254.0; \n\nvoid main() {\n\n  // Computing thickness in screen space:\n  float thickness = a_thickness * u_thicknessRatio * u_scale * u_viewportRatio / 2.0;\n  thickness = max(thickness, minThickness * u_viewportRatio);\n\n  // Add normal vector to the position in screen space, but correct thickness first:\n  vec2 position = (u_matrix * vec3(a_position + a_normal * thickness * u_cameraRatio, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  v_normal = a_normal;\n  v_thickness = thickness;\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n"},262:function(t,e,n){n.r(e),n.d(e,{default:function(){return i}});var i="precision mediump float;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float radius = 0.5;\n\nvoid main(void) {\n  vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\n  float dist = radius - length(m);\n\n  float t = 0.0;\n  if (dist > v_border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / v_border;\n\n  gl_FragColor = mix(color0, v_color, t);\n}\n "},106:function(t,e,n){n.r(e),n.d(e,{default:function(){return i}});var i="attribute vec2 a_position;\nattribute float a_size;\nattribute vec4 a_color;\n\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n\n  gl_Position = vec4(\n    (u_matrix * vec3(a_position, 1)).xy,\n    0,\n    1\n  );\n\n  // Multiply the point size twice:\n  //  - x SCALING_RATIO to correct the canvas scaling\n  //  - x 2 to correct the formulae \n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\n\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n"},764:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var h,u=n(187),l=n(751),d=s(n(358)),c=n(928),o=(h=u.EventEmitter,o(g,h),g.from=function(t){return(new g).setState(t)},g.prototype.enable=function(){return this.enabled=!0,this},g.prototype.disable=function(){return this.enabled=!1,this},g.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},g.prototype.getPreviousState=function(){var t=this.previousState;return{x:t.x,y:t.y,angle:t.angle,ratio:t.ratio}},g.prototype.isAnimated=function(){return!!this.nextFrame},g.prototype.framedGraphToViewport=function(t,e){var n=Math.min(t.width,t.height),i=n/t.width,o=n/t.height,r=this.ratio/n,t=(e.x-this.x)/r,r=(this.y-e.y)/r;return{x:t*Math.cos(this.angle)-r*Math.sin(this.angle)+n/2/i,y:r*Math.cos(this.angle)+t*Math.sin(this.angle)+n/2/o}},g.prototype.viewportToFramedGraph=function(t,e){var n=Math.min(t.width,t.height),i=n/t.width,o=n/t.height,t=this.ratio/n,i=e.x-n/2/i,n=e.y-n/2/o,i=(o=a([i*Math.cos(-this.angle)-n*Math.sin(-this.angle),n*Math.cos(-this.angle)+i*Math.sin(-this.angle)],2))[0],n=o[1];return{x:i*t+this.x,y:-n*t+this.y}},g.prototype.viewRectangle=function(t){var e=0*t.width/8,n=0*t.height/8,i=this.viewportToFramedGraph(t,{x:0-e,y:0-n}),e=this.viewportToFramedGraph(t,{x:t.width+e,y:0-n}),n=this.viewportToFramedGraph(t,{x:0,y:t.height+n});return{x1:i.x,y1:i.y,x2:e.x,y2:e.y,height:e.y-n.y}},g.prototype.setState=function(t){return this.enabled&&(this.previousState=this.getState(),t.x&&(this.x=t.x),t.y&&(this.y=t.y),t.angle&&(this.angle=t.angle),t.ratio&&(this.ratio=t.ratio),this.emit("updated",this.getState())),this},g.prototype.getViewportZoomedState=function(t,e,n){var i=n/this.ratio,o={x:e.width/2,y:e.height/2},t=this.viewportToFramedGraph(e,t),o=this.viewportToFramedGraph(e,o);return r(r({},this.getState()),{x:(t.x-o.x)*(1-i)+this.x,y:(t.y-o.y)*(1-i)+this.y,ratio:n})},g.prototype.animate=function(i,t,e){var o,r,a,s,h=this;this.enabled&&(o=Object.assign({},l.ANIMATE_DEFAULTS,t),r="function"==typeof o.easing?o.easing:d.default[o.easing],a=Date.now(),s=this.getState(),t=function t(){var e=(Date.now()-a)/o.duration;if(1<=e)return h.nextFrame=null,h.setState(i),void(h.animationCallback&&(h.animationCallback.call(null),h.animationCallback=void 0));var n=r(e),e={};i.x&&(e.x=s.x+(i.x-s.x)*n),i.y&&(e.y=s.y+(i.y-s.y)*n),i.angle&&(e.angle=s.angle+(i.angle-s.angle)*n),i.ratio&&(e.ratio=s.ratio+(i.ratio-s.ratio)*n),h.setState(e),h.nextFrame=c.requestFrame(t)},this.nextFrame?(c.cancelFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=c.requestFrame(t)):t(),this.animationCallback=e)},g.prototype.animatedZoom=function(t){if(t){if("number"==typeof t)return this.animate({ratio:this.ratio/t});this.animate({ratio:this.ratio/(t.factor||1.5)},t)}else this.animate({ratio:this.ratio/1.5})},g.prototype.animatedUnzoom=function(t){if(t){if("number"==typeof t)return this.animate({ratio:this.ratio*t});this.animate({ratio:this.ratio*(t.factor||1.5)},t)}else this.animate({ratio:1.5*this.ratio})},g.prototype.animatedReset=function(t){this.animate({x:.5,y:.5,ratio:1,angle:0},t)},g.prototype.copy=function(){return g.from(this.getState())},g);function g(){var t=h.call(this)||this;return t.x=.5,t.y=.5,t.angle=0,t.ratio=1,t.nextFrame=null,t.enabled=!0,t.previousState=t.getState(),t}e.default=o},291:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.getWheelDelta=e.getTouchCoords=e.getTouchesArray=e.getMouseCoords=e.getPosition=e.getY=e.getX=void 0;n=n(187);function r(t){if(void 0!==t.offsetX)return t.offsetX;if(void 0!==t.clientX)return t.clientX;throw new Error("Captor: could not extract x from event.")}function a(t){if(void 0!==t.offsetY)return t.offsetY;if(void 0!==t.clientY)return t.clientY;throw new Error("Captor: could not extract y from event.")}function s(t){return{x:r(t),y:a(t)}}function h(t){for(var e=[],n=0,i=Math.min(t.length,2);n<i;n++)e.push(t[n]);return e}e.getX=r,e.getY=a,e.getPosition=s,e.getMouseCoords=function(t){return{x:r(t),y:a(t),clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,shiftKey:t.shiftKey,preventDefault:t.preventDefault.bind(t),original:t}},e.getTouchesArray=h,e.getTouchCoords=function(t){return{touches:h(t.touches).map(s),ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,shiftKey:t.shiftKey,preventDefault:t.preventDefault.bind(t),original:t}},e.getWheelDelta=function(t){if(void 0!==t.deltaY)return-3*t.deltaY/360;if(void 0!==t.detail)return t.detail/-9;throw new Error("Captor: could not extract delta from event.")};var u,o=(u=n.EventEmitter,o(l,u),l);function l(t,e){var n=u.call(this)||this;return n.container=t,n.camera=e,n}e.default=o},269:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var h,u=s(n(291)),o=(h=u.default,o(l,h),l.prototype.kill=function(){var t=this.container;t.removeEventListener("click",this.handleClick),t.removeEventListener("contextmenu",this.handleRightClick),t.removeEventListener("mousedown",this.handleDown),t.removeEventListener("mousemove",this.handleMove),t.removeEventListener("wheel",this.handleWheel),t.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mouseup",this.handleUp)},l.prototype.handleClick=function(t){var e=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,"number"==typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(t);setTimeout(function(){e.clicks=0,e.doubleClickTimeout=null},300),this.draggedEvents<3&&this.emit("click",u.getMouseCoords(t))}},l.prototype.handleRightClick=function(t){this.enabled&&this.emit("rightClick",u.getMouseCoords(t))},l.prototype.handleDoubleClick=function(t){if(this.enabled){var e=this.camera.getState().ratio/2.2;return this.camera.animate(this.camera.getViewportZoomedState({x:u.getX(t),y:u.getY(t)},{width:this.container.offsetWidth,height:this.container.offsetHeight},e),{easing:"quadraticInOut",duration:200}),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1}},l.prototype.handleDown=function(t){this.enabled&&(this.startCameraState=this.camera.getState(),this.lastMouseX=u.getX(t),this.lastMouseY=u.getY(t),this.draggedEvents=0,this.downStartTime=Date.now(),t.which,this.isMouseDown=!0,this.emit("mousedown",u.getMouseCoords(t)))},l.prototype.handleUp=function(t){var e,n,i,o,r=this;this.enabled&&this.isMouseDown&&(this.isMouseDown=!1,"number"==typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null),e=u.getX(t),n=u.getY(t),i=this.camera.getState(),o=this.camera.getPreviousState(),this.isMoving?this.camera.animate({x:i.x+3*(i.x-o.x),y:i.y+3*(i.y-o.y)},{duration:200,easing:"quadraticOut"}):this.lastMouseX===e&&this.lastMouseY===n||this.camera.setState({x:i.x,y:i.y}),this.isMoving=!1,setTimeout(function(){return r.draggedEvents=0},0),this.emit("mouseup",u.getMouseCoords(t)))},l.prototype.handleMove=function(t){var e,n,i,o,r,a=this;if(this.enabled)return this.emit("mousemove",u.getMouseCoords(t)),this.isMouseDown&&(this.isMoving=!0,this.draggedEvents++,"number"==typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){a.movingTimeout=null,a.isMoving=!1},200),o={width:this.container.offsetWidth,height:this.container.offsetHeight},e=u.getX(t),n=u.getY(t),r=this.camera.viewportToFramedGraph(o,{x:this.lastMouseX,y:this.lastMouseY}),i=this.camera.viewportToFramedGraph(o,{x:e,y:n}),o=r.x-i.x,r=r.y-i.y,o=(i=this.camera.getState()).x+o,r=i.y+r,this.camera.setState({x:o,y:r}),this.lastMouseX=e,this.lastMouseY=n),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1},l.prototype.handleWheel=function(t){var e=this;if(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!this.enabled)return!1;var n=u.getWheelDelta(t);if(!n)return!1;var i=0<n?1/1.7:1.7,o=this.camera.getState().ratio*i,i=0<n?1:-1,n=Date.now();return this.currentWheelDirection===i&&this.lastWheelTriggerTime&&n-this.lastWheelTriggerTime<50||(this.camera.animate(this.camera.getViewportZoomedState({x:u.getX(t),y:u.getY(t)},{width:this.container.offsetWidth,height:this.container.offsetHeight},o),{easing:"quadraticOut",duration:250},function(){e.currentWheelDirection=0}),this.currentWheelDirection=i,this.lastWheelTriggerTime=n),!1},l.prototype.handleOut=function(){},l);function l(t,e){e=h.call(this,t,e)||this;return e.enabled=!0,e.draggedEvents=0,e.downStartTime=null,e.lastMouseX=null,e.lastMouseY=null,e.isMouseDown=!1,e.isMoving=!1,e.movingTimeout=null,e.startCameraState=null,e.clicks=0,e.doubleClickTimeout=null,e.currentWheelDirection=0,e.handleClick=e.handleClick.bind(e),e.handleRightClick=e.handleRightClick.bind(e),e.handleDown=e.handleDown.bind(e),e.handleUp=e.handleUp.bind(e),e.handleMove=e.handleMove.bind(e),e.handleWheel=e.handleWheel.bind(e),e.handleOut=e.handleOut.bind(e),t.addEventListener("click",e.handleClick,!1),t.addEventListener("contextmenu",e.handleRightClick,!1),t.addEventListener("mousedown",e.handleDown,!1),t.addEventListener("mousemove",e.handleMove,!1),t.addEventListener("wheel",e.handleWheel,!1),t.addEventListener("mouseout",e.handleOut,!1),document.addEventListener("mouseup",e.handleUp,!1),e}e.default=o},508:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},f=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u,p=s(n(291)),m=h(n(764)),o=(u=p.default,o(l,u),l.prototype.kill=function(){var t=this.container;t.removeEventListener("touchstart",this.handleStart),t.removeEventListener("touchend",this.handleLeave),t.removeEventListener("touchcancel",this.handleLeave),t.removeEventListener("touchmove",this.handleMove)},l.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},l.prototype.dispatchRelatedMouseEvent=function(t,e,n,i){n=n||p.getPosition(e.touches[0]),e=new MouseEvent(t,{clientX:n.x,clientY:n.y,altKey:e.altKey,ctrlKey:e.ctrlKey});(i||this.container).dispatchEvent(e)},l.prototype.handleStart=function(t){var e,n,i,o;this.enabled&&(t.preventDefault(),1===t.touches.length&&this.dispatchRelatedMouseEvent("mousedown",t),n=p.getTouchesArray(t.touches),this.isMoving=!0,this.touchMode=n.length,this.startCameraState=this.camera.getState(),this.startTouchesPositions=n.map(p.getPosition),this.lastTouchesPositions=this.startTouchesPositions,2===this.touchMode&&(e=(o=(i=f(this.startTouchesPositions,2))[0]).x,n=o.y,i=(o=i[1]).x,o=o.y,this.startTouchesAngle=Math.atan2(o-n,i-e),this.startTouchesDistance=Math.sqrt(Math.pow(i-e,2)+Math.pow(o-n,2))),this.emit("touchdown",p.getTouchCoords(t)))},l.prototype.handleLeave=function(t){if(this.enabled){switch(t.preventDefault(),0===t.touches.length&&this.lastTouchesPositions&&this.lastTouchesPositions.length&&(this.dispatchRelatedMouseEvent("mouseup",t,this.lastTouchesPositions[0],document),this.dispatchRelatedMouseEvent("click",t,this.lastTouchesPositions[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===t.touches.length){this.handleStart(t),t.preventDefault();break}case 1:var e,n;this.isMoving&&(e=this.camera.getState(),n=this.camera.getPreviousState(),this.camera.animate({x:e.x+3*(e.x-n.x),y:e.y+3*(e.y-n.y)},{duration:200,easing:"quadraticOut"})),this.isMoving=!1,this.touchMode=0}this.emit("touchup",p.getTouchCoords(t))}},l.prototype.handleMove=function(t){var e=this;if(this.enabled){t.preventDefault(),1===t.touches.length&&this.dispatchRelatedMouseEvent("mousemove",t);var n=this.startCameraState,i=p.getTouchesArray(t.touches).map(p.getPosition);switch(this.lastTouchesPositions=i,this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){e.isMoving=!1},200),this.touchMode){case 1:var o=this.camera.viewportToFramedGraph(this.getDimensions(),(this.startTouchesPositions||[])[0]),r=o.x,a=o.y,s=this.camera.viewportToFramedGraph(this.getDimensions(),i[0]),h=s.x,u=s.y;this.camera.setState({x:n.x+r-h,y:n.y+a-u});break;case 2:var l={},d=i[0],c=d.x,g=d.y,o=i[1],s=o.x,r=o.y,a=Math.atan2(r-g,s-c)-this.startTouchesAngle,d=Math.hypot(r-g,s-c)/this.startTouchesDistance;l.ratio=n.ratio/d,l.angle=n.angle+a;o=this.getDimensions(),r=m.default.from(n).viewportToFramedGraph(o,(this.startTouchesPositions||[])[0]),s=Math.min(o.width,o.height),d=s/o.width,a=s/o.height,o=l.ratio/s,u=g-s/2/a,h=(d=f([(h=c-s/2/d)*Math.cos(-l.angle)-u*Math.sin(-l.angle),u*Math.cos(-l.angle)+h*Math.sin(-l.angle)],2))[0];u=d[1],l.x=r.x-h*o,l.y=r.y+u*o,this.camera.setState(l)}this.emit("touchmove",p.getTouchCoords(t))}},l);function l(t,e){e=u.call(this,t,e)||this;return e.enabled=!0,e.isMoving=!1,e.touchMode=0,e.handleStart=e.handleStart.bind(e),e.handleLeave=e.handleLeave.bind(e),e.handleMove=e.handleMove.bind(e),t.addEventListener("touchstart",e.handleStart,!1),t.addEventListener("touchend",e.handleLeave,!1),t.addEventListener("touchcancel",e.handleLeave,!1),t.addEventListener("touchmove",e.handleMove,!1),e}e.default=o},730:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.edgeLabelsToDisplayFromNodes=e.labelsToDisplayFromGrid=void 0;var Z=i(n(764)),Q={width:250,height:175},tt={width:400,height:300};e.labelsToDisplayFromGrid=function(t){var e=t.cache,n=t.camera,i=t.cell,o=t.dimensions,r=t.displayedLabels,a=t.fontSize,s=void 0===a?14:a,h=t.graph,u=t.renderedSizeThreshold,l=void 0===u?-1/0:u,d=t.visibleNodes,c=n.getState(),a=n.getPreviousState(),g=new Z.default;g.setState(a);var f=Math.pow(c.ratio,.5),p=c.ratio<a.ratio,u=c.x!==a.x||c.y!==a.y,t=c.ratio>a.ratio,a=u&&!p&&!t&&1<=c.ratio,m=u&&r.size&&!p&&!t;if(t&&Math.trunc(100*c.ratio)%5!=0)return Array.from(r);if(a&&0!==r.size)return Array.from(r);if(p&&1<=c.ratio)return Array.from(r);i=i||Q;1.3<=c.ratio&&(i=tt);for(var c=o.width%i.width,y=i.width+c/Math.floor(o.width/i.width),c=o.height%i.height,v=i.height+c/Math.floor(o.height/i.height),w=o.width+y,b=o.height+v,S=-y,x=-v,P=o.width+y/2,k=o.height+v/2,L=-y/2,M=-v/2,_=[],N={},A=-1/0,T=null,C=0,D=d.length;C<D;C++){var E=e[R=d[C]];if(!(E.hidden||E.size/f<l)){var F=n.framedGraphToViewport(o,E);if(!(F.x<S||F.x>w||F.y<x||F.y>b)){if(E.size>A&&(A=E.size,T=R),m){var O=g.framedGraphToViewport(o,E);if(O.x>=L&&O.x<=P&&O.y>=M&&O.y<=k&&!r.has(R))continue}if(void 0===N[z=Math.floor(F.x/y)+"��"+Math.floor(F.y/v)])N[z]=R;else{var B=N[z],O=e[B];if(0<r.size){var G=r.has(R),j=r.has(B);if(!G&&j)continue;if(G&&!j){N[z]=R;continue}if((m||p)&&G&&j){_.push(R);continue}}F=!1;E.size>O.size?F=!0:E.size===O.size&&(E=h.degree(R),((O=h.degree(B))<E||E===O&&B<R)&&(F=!0)),F&&(N[z]=R)}}}}var z,R,I=_.some(function(t){return t===T});for(z in N)(R=N[z])===T&&(I=!0),_.push(R);!I&&T&&_.push(T);for(var V=new Set,C=0,D=_.length;C<D;C++){var U=e[G=_[C]],q=n.framedGraphToViewport(o,U);if(!V.has(G))for(var H=C+1;H<D;H++){var Y=e[j=_[H]],K=n.framedGraphToViewport(o,Y),X=q.x,W=q.y,$=8*U.label.length,J=K.x,K=K.y;X<J+8*Y.label.length&&J<X+$&&W<K+s&&K<W+s&&(U.size<Y.size?V.add(G):V.add(j))}}return _.filter(function(t){return!V.has(t)})},e.edgeLabelsToDisplayFromNodes=function(t){var e=t.nodeDataCache,n=t.edgeDataCache,i=t.graph,o=t.hoveredNode,r=t.highlightedNodes,a=t.displayedNodeLabels,s=new Set,h=Array.from(a),u=Array.from(r);o&&!r.has(o)&&u.push(o);for(var l=0;l<u.length;l++)for(var d=u[l],c=i.edges(d),g=0;g<c.length;g++){var f=c[g],p=i.extremities(f),m=e[p[0]],p=e[p[1]];n[f].hidden&&m.hidden&&p.hidden&&s.add(f)}for(l=0;l<h.length;l++)for(d=h[l],c=i.outboundEdges(d),g=0;g<c.length;g++)!n[c[g]].hidden&&a.has(i.opposite(d,c[g]))&&s.add(c[g]);return Array.from(s)}},134:function(t,e,n){var d=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},c=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,o=t.length;n<i;n++,o++)t[o]=e[n];return t},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.rectangleCollidesWithQuad=e.squareCollidesWithQuad=e.getCircumscribedAlignedRectangle=e.isRectangleAligned=void 0;var y=i(n(796));function a(t){return t.x1===t.x2||t.y1===t.y2}function s(t){var e=Math.sqrt(Math.pow(t.x2-t.x1,2)+Math.pow(t.y2-t.y1,2)),n=(t.y1-t.y2)*t.height/e,i=(t.x2-t.x1)*t.height/e,o={x:t.x1,y:t.y1},r={x:t.x2,y:t.y2},a={x:t.x1+n,y:t.y1+i},e={x:t.x2+n,y:t.y2+i},n=Math.min(o.x,r.x,a.x,e.x),t=Math.max(o.x,r.x,a.x,e.x),i=Math.min(o.y,r.y,a.y,e.y);return{x1:n,y1:i,x2:t,y2:i,height:Math.max(o.y,r.y,a.y,e.y)-i}}function b(t,e,n,i,o,r,a){return t<i+r&&i<t+n&&e<o+a&&o<e+n}function v(t,e,n,i,o,r,a,s){return t<o+a&&o<t+n&&e<r+s&&r<e+i}e.isRectangleAligned=a,e.getCircumscribedAlignedRectangle=s,e.squareCollidesWithQuad=b,e.rectangleCollidesWithQuad=v;o.prototype.add=function(t,e,n,i){return function(t,e,n,i,o,r){for(var a=i-r,s=o-r,h=2*r,u=0,l=0;;){if(5<=u)return e[l]=e[l]||[],e[l].push(n);var d=4*l+4,c=4*l+8,g=4*l+12,f=4*l+16,p=b(a,s,h,t[d],t[1+d],t[2+d],t[3+d]),m=b(a,s,h,t[c],t[1+c],t[2+c],t[3+c]),y=b(a,s,h,t[g],t[1+g],t[2+g],t[3+g]),v=b(a,s,h,t[f],t[1+f],t[2+f],t[3+f]),w=[p,m,y,v].reduce(function(t,e){return e?t+1:t},0);if(0===w)throw new Error("sigma/quadtree.insertNode: no collision (level: "+u+", key: "+n+", x: "+i+", y: "+o+", size: "+r+").");if(3===w)throw new Error("sigma/quadtree.insertNode: 3 impossible collisions (level: "+u+", key: "+n+", x: "+i+", y: "+o+", size: "+r+").");if(1<w)return e[l]=e[l]||[],e[l].push(n);u++,p&&(l=d),m&&(l=c),y&&(l=g),v&&(l=f)}}(this.data,this.containers,t,e,n,i),this},o.prototype.resize=function(t){this.clear(),this.data[0]=t.x,this.data[1]=t.y,this.data[2]=t.width,this.data[3]=t.height,function(t){for(var e=[0,0];e.length;){var n=e.pop(),i=e.pop(),o=4*i+4,r=4*i+8,a=4*i+12,s=4*i+16,h=t[i+0],u=t[i+1],l=t[i+2]/2,i=t[i+3]/2;t[o]=h,t[1+o]=u,t[2+o]=l,t[3+o]=i,t[r]=h+l,t[1+r]=u,t[2+r]=l,t[3+r]=i,t[a]=h,t[1+a]=u+i,t[2+a]=l,t[3+a]=i,t[s]=h+l,t[1+s]=u+i,t[2+s]=l,t[3+s]=i,n<4&&(e.push(s,n+1),e.push(a,n+1),e.push(r,n+1),e.push(o,n+1))}}(this.data)},o.prototype.clear=function(){return this.containers={},this},o.prototype.point=function(t,e){for(var n,i,o,r,a,s,h=[],u=0,l=0;this.containers[u]&&h.push.apply(h,c([],d(this.containers[u]))),u=4*u+4*(n=t,i=e,o=this.data[u+0],r=this.data[u+1],a=this.data[u+2],s=this.data[u+3],a=n<o+a/2,i<r+s/2?a?1:2:a?3:4),l++,l<=5;);return h},o.prototype.rectangle=function(t,e,n,i,o){var r=this.lastRectangle;return r&&t===r.x1&&n===r.x2&&e===r.y1&&i===r.y2&&o===r.height||(this.lastRectangle={x1:t,y1:e,x2:n,y2:i,height:o},a(this.lastRectangle)||(this.lastRectangle=s(this.lastRectangle)),this.cache=function(t,e,n,i,o,r){for(var a=[0,0],s=[];a.length;){var h,u,l,d,c,g,f,p=a.pop(),m=a.pop();(f=e[m])&&y.default(s,f),5<=p||(u=4*m+8,l=4*m+12,d=4*m+16,c=v(n,i,o,r,t[h=4*m+4],t[1+h],t[2+h],t[3+h]),g=v(n,i,o,r,t[u],t[1+u],t[2+u],t[3+u]),f=v(n,i,o,r,t[l],t[1+l],t[2+l],t[3+l]),m=v(n,i,o,r,t[d],t[1+d],t[2+d],t[3+d]),c&&a.push(h,p+1),g&&a.push(u,p+1),f&&a.push(l,p+1),m&&a.push(d,p+1))}return s}(this.data,this.containers,t,e,Math.abs(t-n)||Math.abs(e-i),o)),this.cache},n=o;function o(t){void 0===t&&(t={}),this.containers={},this.cache=null,this.lastRectangle=null;var e=Math.pow(4,5);this.data=new Float32Array((4*e-1)/3*4),t.boundaries?this.resize(t.boundaries):this.resize({x:0,y:0,width:1,height:1})}e.default=n},607:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MultiGraph=e.Sigma=e.MouseCaptor=e.QuadTree=e.Camera=void 0;var o=i(n(764));e.Camera=o.default;o=i(n(134));e.QuadTree=o.default;o=i(n(269));e.MouseCaptor=o.default;i=i(n(159));e.Sigma=i.default;var r=n(698);Object.defineProperty(e,"MultiGraph",{enumerable:!0,get:function(){return r.MultiGraph}})},942:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,i,o){var r=o.edgeLabelSize,a=o.edgeLabelFont,s=o.edgeLabelWeight,h=e.label;t.fillStyle=e.color,t.font=s+" "+r+"px "+a;var u=t.measureText(h).width,o=(n.x+i.x)/2,s=(n.y+i.y)/2,a=i.x-n.x,i=i.y-n.y,n=Math.sqrt(a*a+i*i),n=0<a?0<i?Math.acos(a/n):Math.asin(i/n):0<i?Math.acos(a/n)+Math.PI:Math.asin(a/n)+Math.PI/2;t.save(),t.translate(o,s),t.rotate(n),t.fillText(h,-u/2,e.size/2+r),t.restore()}},61:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var h=i(n(52)),u=i(n(622));e.default=function(t,e,n){var i,o,r=n.labelSize,a=n.labelFont,s=n.labelWeight;t.font=s+" "+r+"px "+a,""!=e.label&&(t.beginPath(),t.fillStyle="#fff",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor="#000",o=t.measureText(e.label).width,i=Math.round(e.x-r/2-2),s=Math.round(e.y-r/2-2),a=Math.round(o+r/2+e.size+9),o=Math.round(r+4),r=Math.round(r/2+2),t.moveTo(i,s+r),t.moveTo(i,s+r),t.arcTo(i,s,i+r,s,r),t.lineTo(i+a,s),t.lineTo(i+a,s+o),t.lineTo(i+r,s+o),t.arcTo(i,s+o,i,s+o-r,r),t.lineTo(i,s+r),t.closePath(),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,h.default(t,e),u.default(t,e,n))}},622:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var i=n.labelSize,o=n.labelFont,n=n.labelWeight;t.fillStyle="#000",t.font=n+" "+i+"px "+o,t.fillText(e.label,e.x+e.size+3,e.y+i/3),e.sizeRatio<.3&&((i=new Image).src="./img/icon/"+e.icon+".svg",t.drawImage(i,e.x-e.size/2,e.y-e.size/2,e.size,e.size))}},52:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=2*Math.PI;e.default=function(t,e){t.fillStyle=e.color,t.beginPath(),t.arc(e.x,e.y,e.size,0,i,!0),t.closePath(),t.fill();var n=new Image;n.src="./img/icon/"+e.icon+".svg",t.drawImage(n,e.x-e.size/2,e.y-e.size/2,e.size,e.size)}},195:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.createEdgeCompoundProgram=e.AbstractEdgeProgram=void 0;var r,o=(r=n(171).AbstractProgram,o(a,r),a);function a(t,e,n,i,o){return r.call(this,t,e,n,i,o)||this}e.AbstractEdgeProgram=o,e.createEdgeCompoundProgram=function(t){return e.prototype.bufferData=function(){this.programs.forEach(function(t){return t.bufferData()})},e.prototype.allocate=function(e){this.programs.forEach(function(t){return t.allocate(e)})},e.prototype.bind=function(){},e.prototype.computeIndices=function(){this.programs.forEach(function(t){return t.computeIndices()})},e.prototype.render=function(e){this.programs.forEach(function(t){t.bind(),t.bufferData(),t.render(e)})},e.prototype.process=function(e,n,i,o,r){this.programs.forEach(function(t){return t.process(e,n,i,o,r)})},e;function e(e){this.programs=t.map(function(t){return new t(e)})}}},909:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.createNodeCompoundProgram=e.AbstractNodeProgram=void 0;var r,o=(r=n(171).AbstractProgram,o(a,r),a.prototype.bind=function(){var t=this.gl;t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.sizeLocation),t.enableVertexAttribArray(this.colorLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.sizeLocation,1,t.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,this.attributes*Float32Array.BYTES_PER_ELEMENT,12)},a);function a(t,e,n,i,o){i=r.call(this,t,e,n,i,o)||this;i.positionLocation=t.getAttribLocation(i.program,"a_position"),i.sizeLocation=t.getAttribLocation(i.program,"a_size"),i.colorLocation=t.getAttribLocation(i.program,"a_color");o=t.getUniformLocation(i.program,"u_matrix");if(null===o)throw new Error("AbstractNodeProgram: error while getting matrixLocation");i.matrixLocation=o;o=t.getUniformLocation(i.program,"u_ratio");if(null===o)throw new Error("AbstractNodeProgram: error while getting ratioLocation");i.ratioLocation=o;t=t.getUniformLocation(i.program,"u_scale");if(null===t)throw new Error("AbstractNodeProgram: error while getting scaleLocation");return i.scaleLocation=t,i}e.AbstractNodeProgram=o,e.createNodeCompoundProgram=function(t){return e.prototype.bufferData=function(){this.programs.forEach(function(t){return t.bufferData()})},e.prototype.allocate=function(e){this.programs.forEach(function(t){return t.allocate(e)})},e.prototype.bind=function(){},e.prototype.render=function(e){this.programs.forEach(function(t){return t.render(e)})},e.prototype.process=function(e,n,i){this.programs.forEach(function(t){return t.process(e,n,i)})},e;function e(e){this.programs=t.map(function(t){return new t(e)})}}},171:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractProgram=void 0;var r=n(706),n=(i.prototype.bufferData=function(){var t=this.gl;t.bufferData(t.ARRAY_BUFFER,this.array,t.DYNAMIC_DRAW)},i.prototype.allocate=function(t){this.array=new Float32Array(this.points*this.attributes*t)},i);function i(t,e,n,i,o){this.array=new Float32Array,this.points=i,this.attributes=o,this.gl=t,this.vertexShaderSource=e,this.fragmentShaderSource=n;n=t.createBuffer();if(null===n)throw new Error("AbstractProgram: error while creating the buffer");this.buffer=n,t.bindBuffer(t.ARRAY_BUFFER,this.buffer),this.vertexShader=r.loadVertexShader(t,this.vertexShaderSource),this.fragmentShader=r.loadFragmentShader(t,this.fragmentShaderSource),this.program=r.loadProgram(t,[this.vertexShader,this.fragmentShader])}e.AbstractProgram=n},569:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(195),r=i(n(805)),n=i(n(483)),r=o.createEdgeCompoundProgram([n.default,r.default]);e.default=r},805:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a,g=n(928),s=r(n(912)),h=r(n(973)),n=n(195),o=(a=n.AbstractEdgeProgram,o(u,a),u.prototype.bind=function(){var t=this.gl;t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.normalLocation),t.enableVertexAttribArray(this.thicknessLocation),t.enableVertexAttribArray(this.radiusLocation),t.enableVertexAttribArray(this.colorLocation),t.enableVertexAttribArray(this.barycentricLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,10*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.normalLocation,2,t.FLOAT,!1,10*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.thicknessLocation,1,t.FLOAT,!1,10*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(this.radiusLocation,1,t.FLOAT,!1,10*Float32Array.BYTES_PER_ELEMENT,20),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,10*Float32Array.BYTES_PER_ELEMENT,24),t.vertexAttribPointer(this.barycentricLocation,3,t.FLOAT,!1,10*Float32Array.BYTES_PER_ELEMENT,28)},u.prototype.computeIndices=function(){},u.prototype.process=function(t,e,n,i,o){if(i)for(var r=30*o,a=r+30;r<a;r++)this.array[r]=0;else{var s=n.size||1,h=e.size||1,u=t.x,l=t.y,d=e.x,c=e.y,i=g.floatColor(n.color),t=d-u,e=c-l,n=t*t+e*e,u=0,l=0;n&&(u=-e*(n=1/Math.sqrt(n)),l=t*n);n=30*o,o=this.array;o[n++]=d,o[n++]=c,o[n++]=-u,o[n++]=-l,o[n++]=s,o[n++]=h,o[n++]=i,o[n++]=1,o[n++]=0,o[n++]=0,o[n++]=d,o[n++]=c,o[n++]=-u,o[n++]=-l,o[n++]=s,o[n++]=h,o[n++]=i,o[n++]=0,o[n++]=1,o[n++]=0,o[n++]=d,o[n++]=c,o[n++]=-u,o[n++]=-l,o[n++]=s,o[n++]=h,o[n++]=i,o[n++]=0,o[n++]=0,o[n]=1}},u.prototype.render=function(t){var e=this.gl,n=this.program;e.useProgram(n),e.uniform1f(this.scaleLocation,t.scalingRatio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.uniform1f(this.cameraRatioLocation,t.ratio),e.uniform1f(this.viewportRatioLocation,1/Math.min(t.width,t.height)),e.uniform1f(this.thicknessRatioLocation,1/Math.pow(t.ratio,t.edgesPowRatio)),e.drawArrays(e.TRIANGLES,0,this.array.length/10)},u);function u(t){var e=a.call(this,t,s.default,h.default,3,10)||this;e.positionLocation=t.getAttribLocation(e.program,"a_position"),e.colorLocation=t.getAttribLocation(e.program,"a_color"),e.normalLocation=t.getAttribLocation(e.program,"a_normal"),e.thicknessLocation=t.getAttribLocation(e.program,"a_thickness"),e.radiusLocation=t.getAttribLocation(e.program,"a_radius"),e.barycentricLocation=t.getAttribLocation(e.program,"a_barycentric");var n=t.getUniformLocation(e.program,"u_scale");if(null===n)throw new Error("EdgeArrowHeadProgram: error while getting scaleLocation");e.scaleLocation=n;n=t.getUniformLocation(e.program,"u_matrix");if(null===n)throw new Error("EdgeArrowHeadProgram: error while getting matrixLocation");e.matrixLocation=n;n=t.getUniformLocation(e.program,"u_cameraRatio");if(null===n)throw new Error("EdgeArrowHeadProgram: error while getting cameraRatioLocation");e.cameraRatioLocation=n;n=t.getUniformLocation(e.program,"u_viewportRatio");if(null===n)throw new Error("EdgeArrowHeadProgram: error while getting viewportRatioLocation");e.viewportRatioLocation=n;t=t.getUniformLocation(e.program,"u_thicknessRatio");if(null===t)throw new Error("EdgeArrowHeadProgram: error while getting thicknessRatioLocation");return e.thicknessRatioLocation=t,e.bind(),e}e.default=o},483:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(195),p=n(928),h=r(n(620)),u=r(n(498)),o=(a=s.AbstractEdgeProgram,o(l,a),l.prototype.bind=function(){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.normalLocation),t.enableVertexAttribArray(this.thicknessLocation),t.enableVertexAttribArray(this.colorLocation),t.enableVertexAttribArray(this.radiusLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.normalLocation,2,t.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.thicknessLocation,1,t.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,7*Float32Array.BYTES_PER_ELEMENT,20),t.vertexAttribPointer(this.radiusLocation,1,t.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,24)},l.prototype.process=function(t,e,n,i,o){if(i)for(var r=28*o,a=r+28;r<a;r++)this.array[r]=0;else{var s=n.size||1,h=t.x,u=t.y,l=e.x,d=e.y,c=e.size||1,g=p.floatColor(n.color),f=l-h,i=d-u,t=f*f+i*i,e=0,n=0;t&&(e=-i*(t=1/Math.sqrt(t)),n=f*t);t=28*o,o=this.array;o[t++]=h,o[t++]=u,o[t++]=e,o[t++]=n,o[t++]=s,o[t++]=g,o[t++]=0,o[t++]=h,o[t++]=u,o[t++]=-e,o[t++]=-n,o[t++]=s,o[t++]=g,o[t++]=0,o[t++]=l,o[t++]=d,o[t++]=e,o[t++]=n,o[t++]=s,o[t++]=g,o[t++]=c,o[t++]=l,o[t++]=d,o[t++]=-e,o[t++]=-n,o[t++]=s,o[t++]=g,o[t]=-c}},l.prototype.computeIndices=function(){for(var t=this.array.length/7,e=t+t/2,n=new this.IndicesArray(e),i=0,o=0;i<t;i+=4)n[o++]=i,n[o++]=i+1,n[o++]=i+2,n[o++]=i+2,n[o++]=i+1,n[o++]=i+3;this.indicesArray=n},l.prototype.bufferData=function(){a.prototype.bufferData.call(this);var t=this.gl;t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indicesArray,t.STATIC_DRAW)},l.prototype.render=function(t){var e=this.gl,n=this.program;e.useProgram(n),e.uniform1f(this.scaleLocation,t.scalingRatio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.uniform1f(this.cameraRatioLocation,t.ratio),e.uniform1f(this.viewportRatioLocation,1/Math.min(t.width,t.height)),e.uniform1f(this.thicknessRatioLocation,1/Math.pow(t.ratio,t.edgesPowRatio)),e.drawElements(e.TRIANGLES,this.indicesArray.length,this.indicesType,0)},l);function l(t){var e=a.call(this,t,h.default,u.default,4,7)||this,n=t.createBuffer();if(null===n)throw new Error("EdgeClampedProgram: error while getting resolutionLocation");e.indicesBuffer=n,e.positionLocation=t.getAttribLocation(e.program,"a_position"),e.colorLocation=t.getAttribLocation(e.program,"a_color"),e.normalLocation=t.getAttribLocation(e.program,"a_normal"),e.thicknessLocation=t.getAttribLocation(e.program,"a_thickness"),e.radiusLocation=t.getAttribLocation(e.program,"a_radius");n=t.getUniformLocation(e.program,"u_scale");if(null===n)throw new Error("EdgeClampedProgram: error while getting scaleLocation");e.scaleLocation=n;n=t.getUniformLocation(e.program,"u_matrix");if(null===n)throw new Error("EdgeClampedProgram: error while getting matrixLocation");e.matrixLocation=n;n=t.getUniformLocation(e.program,"u_cameraRatio");if(null===n)throw new Error("EdgeClampedProgram: error while getting cameraRatioLocation");e.cameraRatioLocation=n;n=t.getUniformLocation(e.program,"u_viewportRatio");if(null===n)throw new Error("EdgeClampedProgram: error while getting viewportRatioLocation");e.viewportRatioLocation=n;n=t.getUniformLocation(e.program,"u_thicknessRatio");if(null===n)throw new Error("EdgeClampedProgram: error while getting thicknessRatioLocation");return e.thicknessRatioLocation=n,e.canUse32BitsIndices=p.canUse32BitsIndices(t),e.IndicesArray=e.canUse32BitsIndices?Uint32Array:Uint16Array,e.indicesArray=new e.IndicesArray,e.indicesType=e.canUse32BitsIndices?t.UNSIGNED_INT:t.UNSIGNED_SHORT,e.bind(),e}e.default=o},753:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a,f=n(928),s=r(n(223)),h=r(n(498)),o=(a=n(195).AbstractEdgeProgram,o(u,a),u.prototype.bind=function(){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.normalLocation),t.enableVertexAttribArray(this.thicknessLocation),t.enableVertexAttribArray(this.colorLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.normalLocation,2,t.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.thicknessLocation,1,t.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,6*Float32Array.BYTES_PER_ELEMENT,20)},u.prototype.computeIndices=function(){for(var t=this.array.length/6,e=t+t/2,n=new this.IndicesArray(e),i=0,o=0;i<t;i+=4)n[o++]=i,n[o++]=i+1,n[o++]=i+2,n[o++]=i+2,n[o++]=i+1,n[o++]=i+3;this.indicesArray=n},u.prototype.bufferData=function(){a.prototype.bufferData.call(this);var t=this.gl;t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indicesArray,t.STATIC_DRAW)},u.prototype.process=function(t,e,n,i,o){if(i)for(var r=24*o,a=r+24;r<a;r++)this.array[r]=0;else{var s=n.size||1,h=t.x,u=t.y,l=e.x,d=e.y,c=f.floatColor(n.color),g=l-h,i=d-u,t=g*g+i*i,e=0,n=0;t&&(e=-i*(t=1/Math.sqrt(t)),n=g*t);t=24*o,o=this.array;o[t++]=h,o[t++]=u,o[t++]=e,o[t++]=n,o[t++]=s,o[t++]=c,o[t++]=h,o[t++]=u,o[t++]=-e,o[t++]=-n,o[t++]=s,o[t++]=c,o[t++]=l,o[t++]=d,o[t++]=e,o[t++]=n,o[t++]=s,o[t++]=c,o[t++]=l,o[t++]=d,o[t++]=-e,o[t++]=-n,o[t++]=s,o[t]=c}},u.prototype.render=function(t){var e=this.gl,n=this.program;e.useProgram(n),e.uniform1f(this.scaleLocation,t.scalingRatio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.uniform1f(this.cameraRatioLocation,t.ratio),e.uniform1f(this.viewportRatioLocation,1/Math.min(t.width,t.height)),e.uniform1f(this.thicknessRatioLocation,1/Math.pow(t.ratio,t.edgesPowRatio)),e.drawElements(e.TRIANGLES,this.indicesArray.length,this.indicesType,0)},u);function u(t){var e=a.call(this,t,s.default,h.default,4,6)||this,n=t.createBuffer();if(null===n)throw new Error("EdgeProgram: error while getting resolutionLocation");e.indicesBuffer=n,e.positionLocation=t.getAttribLocation(e.program,"a_position"),e.colorLocation=t.getAttribLocation(e.program,"a_color"),e.normalLocation=t.getAttribLocation(e.program,"a_normal"),e.thicknessLocation=t.getAttribLocation(e.program,"a_thickness");n=t.getUniformLocation(e.program,"u_scale");if(null===n)throw new Error("EdgeProgram: error while getting scaleLocation");e.scaleLocation=n;n=t.getUniformLocation(e.program,"u_matrix");if(null===n)throw new Error("EdgeProgram: error while getting matrixLocation");e.matrixLocation=n;n=t.getUniformLocation(e.program,"u_cameraRatio");if(null===n)throw new Error("EdgeProgram: error while getting cameraRatioLocation");e.cameraRatioLocation=n;n=t.getUniformLocation(e.program,"u_viewportRatio");if(null===n)throw new Error("EdgeProgram: error while getting viewportRatioLocation");e.viewportRatioLocation=n;n=t.getUniformLocation(e.program,"u_thicknessRatio");if(null===n)throw new Error("EdgeProgram: error while getting thicknessRatioLocation");return e.thicknessRatioLocation=n,e.canUse32BitsIndices=f.canUse32BitsIndices(t),e.IndicesArray=e.canUse32BitsIndices?Uint32Array:Uint16Array,e.indicesArray=new e.IndicesArray,e.indicesType=e.canUse32BitsIndices?t.UNSIGNED_INT:t.UNSIGNED_SHORT,e.bind(),e}e.default=o},582:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(928),h=r(n(106)),u=r(n(262)),o=(a=n(909).AbstractNodeProgram,o(l,a),l.prototype.process=function(t,e,n){var i=this.array,n=4*+n;if(e)return i[n++]=0,i[n++]=0,i[n++]=0,void(i[n++]=0);e=s.floatColor(t.color);i[n++]=t.x,i[n++]=t.y,i[n++]=t.size,i[n]=e},l.prototype.render=function(t){var e=this.gl,n=this.program;e.useProgram(n),e.uniform1f(this.ratioLocation,1/Math.pow(t.ratio,t.nodesPowRatio)),e.uniform1f(this.scaleLocation,t.scalingRatio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.drawArrays(e.POINTS,0,this.array.length/4)},l);function l(t){t=a.call(this,t,h.default,u.default,1,4)||this;return t.bind(),t}e.default=o},706:function(t,e){function n(t,e,n){var i="VERTEX"===t?e.VERTEX_SHADER:e.FRAGMENT_SHADER,t=e.createShader(i);if(null===t)throw new Error("loadShader: error while creating the shader");if(e.shaderSource(t,n),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS))return t;i=e.getShaderInfoLog(t);throw e.deleteShader(t),new Error("loadShader: error while compiling the shader:\n"+i+"\n"+n)}Object.defineProperty(e,"__esModule",{value:!0}),e.loadProgram=e.loadFragmentShader=e.loadVertexShader=void 0,e.loadVertexShader=function(t,e){return n("VERTEX",t,e)},e.loadFragmentShader=function(t,e){return n("FRAGMENT",t,e)},e.loadProgram=function(t,e){var n,i,o=t.createProgram();if(null===o)throw new Error("loadProgram: error while creating the program.");for(n=0,i=e.length;n<i;n++)t.attachShader(o,e[n]);if(t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw t.deleteProgram(o),new Error("loadProgram: error while linking the program.");return o}},310:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_SETTINGS=e.validateSettings=void 0;var o=i(n(622)),r=i(n(61)),a=i(n(942)),s=i(n(582)),h=i(n(753)),n=i(n(569));e.validateSettings=function(t){if(t.labelGrid&&t.labelGrid.cell&&"object"==_typeof(t.labelGrid.cell)&&(!t.labelGrid.cell.width||!t.labelGrid.cell.height))throw new Error("Settings: invalid `labelGrid.cell`. Expecting {width, height}.")},e.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",labelGrid:{cell:null,renderedSizeThreshold:-1/0},nodeReducer:null,edgeReducer:null,zIndex:!1,labelRenderer:o.default,hoverRenderer:r.default,edgeLabelRenderer:a.default,nodeProgramClasses:{circle:s.default},edgeProgramClasses:{arrow:n.default,line:h.default}}},159:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(187),s=r(n(886)),h=r(n(764)),u=r(n(269)),l=r(n(134)),m=n(928),p=n(730),d=n(310),c=r(n(508)),y=s.default.nodeExtent,v=s.default.edgeExtent,g=m.getPixelRatio(),f=m.getPixelRatio();var w,b=(w=a.EventEmitter,o(S,w),S.prototype.createCanvas=function(t){var e=m.createElement("canvas",{position:"absolute"},{class:"sigma-"+t});return this.elements[t]=e,this.container.appendChild(e),e},S.prototype.createCanvasContext=function(t){var e=this.createCanvas(t);return this.canvasContexts[t]=e.getContext("2d",{preserveDrawingBuffer:!1,antialias:!1}),this},S.prototype.createWebGLContext=function(t){var e,n=this.createCanvas(t),i={preserveDrawingBuffer:!1,antialias:!1};return(e=n.getContext("webgl2",i))||(e=n.getContext("webgl",i)),e=e||n.getContext("experimental-webgl",i),this.webGLContexts[t]=e,this},S.prototype.initializeCache=function(){var e=this,t=this.graph,n=0;t.forEachNode(function(t){e.nodeKeyToIndex[t]=n++,e.nodeDataCache[t]={}}),n=0,t.forEachEdge(function(t){e.edgeKeyToIndex[t]=n++,e.edgeDataCache[t]={}})},S.prototype.bindCameraHandlers=function(){var t=this;return this.activeListeners.camera=function(){t._scheduleRefresh()},this.camera.on("updated",this.activeListeners.camera),this},S.prototype.bindEventHandlers=function(){var g=this;this.activeListeners.handleResize=function(){g.needToSoftProcess=!0,g._scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize);function f(t,e,n,i,o){return n-o<t&&t<n+o&&i-o<e&&e<i+o&&Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2))<o}function p(t,e){return e=g.camera.viewportToFramedGraph({width:g.width,height:g.height},{x:t,y:e}),g.quadtree.point(e.x,1-e.y)}this.activeListeners.handleMove=function(t){for(var e=Math.pow(g.camera.getState().ratio,.5),n=p(t.x,t.y),i={width:g.width,height:g.height},o=1/0,r=null,a=0,s=n.length;a<s;a++){var h,u=n[a],l=g.nodeDataCache[u],d=g.camera.framedGraphToViewport(i,l),c=l.size/e;!f(t.x,t.y,d.x,d.y,c)||(h=Math.sqrt(Math.pow(t.x-d.x,2)+Math.pow(t.y-d.y,2)))<o&&(o=h,r=u)}return r&&g.hoveredNode!==r&&!g.nodeDataCache[r].hidden?(g.hoveredNode&&g.emit("leaveNode",{node:g.hoveredNode}),g.hoveredNode=r,g.emit("enterNode",{node:r}),void g.scheduleHighlightedNodesRender()):g.hoveredNode&&(l=g.nodeDataCache[g.hoveredNode],d=g.camera.framedGraphToViewport(i,l),c=l.size/e,!f(t.x,t.y,d.x,d.y,c))?(u=g.hoveredNode,g.hoveredNode=null,g.emit("leaveNode",{node:u}),g.scheduleHighlightedNodesRender()):void 0};function t(u){return function(t){for(var e=Math.pow(g.camera.getState().ratio,.5),n=p(t.x,t.y),i={width:g.width,height:g.height},o=0,r=n.length;o<r;o++){var a=n[o],s=g.nodeDataCache[a],h=g.camera.framedGraphToViewport(i,s),s=s.size/e;if(f(t.x,t.y,h.x,h.y,s))return g.emit(u+"Node",{node:a,captor:t,event:t})}return g.emit(u+"Stage",{event:t})}}return this.activeListeners.handleClick=t("click"),this.activeListeners.handleRightClick=t("rightClick"),this.activeListeners.handleDown=t("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},S.prototype.bindGraphHandlers=function(){var e=this,n=this.graph;return this.activeListeners.graphUpdate=function(){e.needToProcess=!0,e._scheduleRefresh()},this.activeListeners.softGraphUpdate=function(){e.needToSoftProcess=!0,e._scheduleRefresh()},this.activeListeners.addNodeGraphUpdate=function(t){e.nodeKeyToIndex[t.key]=n.order-1,e.nodeDataCache[t.key]={},e.activeListeners.graphUpdate()},this.activeListeners.addEdgeGraphUpdate=function(t){e.nodeKeyToIndex[t.key]=n.order-1,e.edgeDataCache[t.key]={},e.activeListeners.graphUpdate()},n.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),n.on("nodeDropped",this.activeListeners.graphUpdate),n.on("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),n.on("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),n.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),n.on("edgeDropped",this.activeListeners.graphUpdate),n.on("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),n.on("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),n.on("edgesCleared",this.activeListeners.graphUpdate),n.on("cleared",this.activeListeners.graphUpdate),this},S.prototype.process=function(t){void 0===t&&(t=!1);var e=this.graph,n=this.settings;this.quadtree.clear(),this.highlightedNodes=new Set;var i=["x","y","z"];this.settings.zIndex&&(i.push("z"),this.edgeExtent=v(e,["z"])),this.nodeExtent=y(e,i),this.normalizationFunction=m.createNormalizationFunction(this.nodeExtent);var o=this.nodePrograms[this.settings.defaultNodeType];t||o.allocate(e.order);var r=e.nodes();this.settings.zIndex&&(r=m.zIndexOrdering(this.nodeExtent.z,function(t){return e.getNodeAttribute(t,"z")},r));for(var a=0,s=r.length;a<s;a++){var h=r[a],u=e.getNodeAttributes(h);n.nodeReducer&&(u=n.nodeReducer(h,u)),u=Object.assign(this.nodeDataCache[h],u),function(t,e,n){if(!n.hasOwnProperty("x")||!n.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'+e+'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?');n.color||(n.color=t.defaultNodeColor),n.label||(n.label=""),n.size||(n.size=2),n.hasOwnProperty("hidden")||(n.hidden=!1),n.hasOwnProperty("highlighted")||(n.highlighted=!1)}(this.settings,h,u),this.normalizationFunction.applyTo(u),this.quadtree.add(h,u.x,1-u.y,u.size/this.width),o.process(u,u.hidden,a),u.highlighted&&!u.hidden&&this.highlightedNodes.add(h),this.nodeKeyToIndex[h]=a}o.bind(),o.bufferData();var l=this.edgePrograms[this.settings.defaultEdgeType];t||l.allocate(e.size);var d=e.edges();for(this.settings.zIndex&&this.edgeExtent&&(d=m.zIndexOrdering(this.edgeExtent.z,function(t){return e.getEdgeAttribute(t,"z")},d)),a=0,s=d.length;a<s;a++){var c=d[a],u=e.getEdgeAttributes(c);n.edgeReducer&&(u=n.edgeReducer(c,u)),u=Object.assign(this.edgeDataCache[c],u),f=this.settings,(p=u).color||(p.color=f.defaultEdgeColor),p.label||(p.label=""),p.size||(p.size=.5),p.hasOwnProperty("hidden")||(p.hidden=!1);var g=e.extremities(c),f=this.nodeDataCache[g[0]],p=this.nodeDataCache[g[1]],g=u.hidden||f.hidden||p.hidden;l.process(f,p,u,g,a),this.nodeKeyToIndex[c]=a}return t||"function"!=typeof l.computeIndices||l.computeIndices(),l.bind(),l.bufferData(),this},S.prototype._refresh=function(){return this.needToProcess?this.process():this.needToSoftProcess&&this.process(!0),this.needToProcess=!1,this.needToSoftProcess=!1,this.render(),this},S.prototype._scheduleRefresh=function(){var t=this;return this.renderFrame||(this.renderFrame=m.requestFrame(function(){t._refresh(),t.renderFrame=null})),this},S.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var t,e=this.camera.getState(),n={width:this.width,height:this.height};t=1<=e.ratio?this.graph.nodes():(i=this.camera.viewRectangle(n),this.quadtree.rectangle(i.x1,1-i.y1,i.x2,1-i.y2,i.height));for(var i=this.settings.labelGrid,o=p.labelsToDisplayFromGrid({cache:this.nodeDataCache,camera:this.camera,cell:i.cell,dimensions:n,displayedLabels:this.displayedLabels,fontSize:this.settings.labelSize,graph:this.graph,renderedSizeThreshold:i.renderedSizeThreshold,visibleNodes:t}),r=this.canvasContexts.labels,a=Math.pow(e.ratio,.5),s=0,h=o.length;s<h;s++){var u=this.nodeDataCache[o[s]],l=this.camera.framedGraphToViewport(n,u),d=l.x,c=l.y,l=u.size/a;this.settings.labelRenderer(r,{key:o[s],label:u.label,color:"#000",size:l,sizeRatio:a,x:d,y:c,icon:u.icon},this.settings)}return this.displayedLabels=new Set(o),this},S.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var t=this.camera.getState(),e=Math.pow(t.ratio,.5),n=this.canvasContexts.edgeLabels,i={width:this.width,height:this.height};n.clearRect(0,0,this.width,this.height);for(var o=p.edgeLabelsToDisplayFromNodes({nodeDataCache:this.nodeDataCache,edgeDataCache:this.edgeDataCache,graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedLabels,highlightedNodes:this.highlightedNodes}),r=0,a=o.length;r<a;r++){var s=o[r],h=this.graph.extremities(s),u=this.nodeDataCache[h[0]],l=this.nodeDataCache[h[1]],d=this.edgeDataCache[o[r]],c=this.camera.framedGraphToViewport(i,u),g=c.x,f=c.y,u=this.camera.framedGraphToViewport(i,l),c=u.x,l=u.y,u=d.size/e;this.settings.edgeLabelRenderer(n,{key:s,label:d.label,color:d.color,size:u},{key:h[0],x:g,y:f},{key:h[1],x:c,y:l},this.settings)}return this},S.prototype.renderHighlightedNodes=function(){var r=this,a=this.camera,s=Math.pow(a.getState().ratio,.5),h=this.canvasContexts.hovers;h.clearRect(0,0,this.width,this.height);function t(t){var e=r.nodeDataCache[t],n=(o=a.framedGraphToViewport({width:r.width,height:r.height},e)).x,i=o.y,o=e.size/s;r.settings.hoverRenderer(h,{key:t,label:e.label,color:e.color,size:o,x:n,y:i,icon:e.icon},r.settings)}this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&t(this.hoveredNode),this.highlightedNodes.forEach(t)},S.prototype.scheduleHighlightedNodesRender=function(){var t=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=m.requestFrame(function(){t.renderHighlightedNodesFrame=null,t.renderHighlightedNodes(),t.renderEdgeLabels()}))},S.prototype.render=function(){if(this.renderFrame&&(m.cancelFrame(this.renderFrame),this.renderFrame=null,this.needToProcess=!1,this.needToSoftProcess=!1),this.resize(),this.clear(),!this.graph.order)return this;var t=this.mouseCaptor,e=this.camera.isAnimated()||t.isMoving||t.draggedEvents||t.currentWheelDirection,n=this.camera.getState(),t=m.matrixFromCamera(n,{width:this.width,height:this.height});return this.nodePrograms[this.settings.defaultNodeType].render({matrix:t,width:this.width,height:this.height,ratio:n.ratio,nodesPowRatio:.5,scalingRatio:f}),this.settings.hideEdgesOnMove&&e||this.edgePrograms[this.settings.defaultEdgeType].render({matrix:t,width:this.width,height:this.height,ratio:n.ratio,edgesPowRatio:.5,scalingRatio:f}),this.settings.hideLabelsOnMove&&e||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),this},S.prototype.getCamera=function(){return this.camera},S.prototype.getCanvasContexts=function(){return this.canvasContexts},S.prototype.getGraph=function(){return this.graph},S.prototype.getMouseCaptor=function(){return this.mouseCaptor},S.prototype.getTouchCaptor=function(){return this.touchCaptor},S.prototype.getDimensions=function(){return{width:this.width,height:this.height}},S.prototype.getNodeAttributes=function(t){t=this.nodeDataCache[t];return t?Object.assign({},t):void 0},S.prototype.getEdgeAttributes=function(t){t=this.edgeDataCache[t];return t?Object.assign({},t):void 0},S.prototype.getSetting=function(t){return this.settings[t]},S.prototype.setSetting=function(t,e){return this.settings[t]=e,d.validateSettings(this.settings),this.needToProcess=!0,this._scheduleRefresh(),this},S.prototype.updateSetting=function(t,e){return this.settings[t]=e(this.settings[t]),d.validateSettings(this.settings),this.needToProcess=!0,this._scheduleRefresh(),this},S.prototype.resize=function(){var t,e=this.width,n=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,0===this.width)throw new Error("Sigma: container has no width.");if(0===this.height)throw new Error("Sigma: container has no height.");if(e===this.width&&n===this.height)return this;for(t in this.elements){var i=this.elements[t];i.style.width=this.width+"px",i.style.height=this.height+"px"}for(t in this.canvasContexts)this.elements[t].setAttribute("width",this.width*g+"px"),this.elements[t].setAttribute("height",this.height*g+"px"),1!==g&&this.canvasContexts[t].scale(g,g);for(t in this.webGLContexts)this.elements[t].setAttribute("width",this.width*f+"px"),this.elements[t].setAttribute("height",this.height*f+"px"),this.webGLContexts[t].viewport(0,0,this.width*f,this.height*f);return this},S.prototype.clear=function(){return this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},S.prototype.refresh=function(){return this.needToProcess=!0,this._refresh(),this},S.prototype.scheduleRefresh=function(){return this.needToProcess=!0,this._scheduleRefresh(),this},S.prototype.viewportToGraph=function(t){return this.normalizationFunction.inverse(this.camera.viewportToFramedGraph(this.getDimensions(),t))},S.prototype.graphToViewport=function(t){return this.camera.framedGraphToViewport(this.getDimensions(),this.normalizationFunction(t))},S.prototype.kill=function(){var t=this.graph;this.emit("kill"),this.removeAllListeners(),this.camera.removeListener("updated",this.activeListeners.camera),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),t.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),t.removeListener("nodeDropped",this.activeListeners.graphUpdate),t.removeListener("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),t.removeListener("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),t.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),t.removeListener("edgeDropped",this.activeListeners.graphUpdate),t.removeListener("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),t.removeListener("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),t.removeListener("edgesCleared",this.activeListeners.graphUpdate),t.removeListener("cleared",this.activeListeners.graphUpdate),this.quadtree=new l.default,this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes=new Set,this.displayedLabels=new Set,this.renderFrame&&(m.cancelFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(m.cancelFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var e=this.container;e.firstChild;)e.removeChild(e.firstChild)},S);function S(t,e,n){void 0===n&&(n={});var i=w.call(this)||this;if(i.elements={},i.canvasContexts={},i.webGLContexts={},i.activeListeners={},i.quadtree=new l.default,i.nodeDataCache={},i.edgeDataCache={},i.nodeKeyToIndex={},i.edgeKeyToIndex={},i.nodeExtent=null,i.edgeExtent=null,i.normalizationFunction=m.createNormalizationFunction({x:[-1/0,1/0],y:[-1/0,1/0]}),i.width=0,i.height=0,i.highlightedNodes=new Set,i.displayedLabels=new Set,i.hoveredNode=null,i.renderFrame=null,i.renderHighlightedNodesFrame=null,i.needToProcess=!1,i.needToSoftProcess=!1,i.nodePrograms={},i.edgePrograms={},i.settings=m.assignDeep({},d.DEFAULT_SETTINGS,n),d.validateSettings(i.settings),m.validateGraph(t),!(e instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");i.graph=t,i.container=e,i.initializeCache(),i.createWebGLContext("edges"),i.createWebGLContext("nodes"),i.createCanvasContext("edgeLabels"),i.createCanvasContext("labels"),i.createCanvasContext("hovers"),i.createCanvasContext("mouse");var o,e=i.webGLContexts.nodes;for(o in e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.enable(e.BLEND),(e=i.webGLContexts.edges).blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.enable(e.BLEND),i.settings.nodeProgramClasses){var r=i.settings.nodeProgramClasses[o];i.nodePrograms[o]=new r(i.webGLContexts.nodes)}for(o in i.settings.edgeProgramClasses){var a=i.settings.edgeProgramClasses[o];i.edgePrograms[o]=new a(i.webGLContexts.edges)}return i.resize(),i.camera=new h.default,i.bindCameraHandlers(),i.mouseCaptor=new u.default(i.elements.mouse,i.camera),i.touchCaptor=new c.default(i.elements.mouse,i.camera),i.bindEventHandlers(),i.bindGraphHandlers(),i.process(),i.render(),i}e.default=b},751:function(t,o,e){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(o,"__esModule",{value:!0}),o.animateNodes=o.ANIMATE_DEFAULTS=void 0;var f=e(928),r=n(e(358));o.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150},o.animateNodes=function(a,s,t,h){var e,u=Object.assign({},o.ANIMATE_DEFAULTS,t),l="function"==typeof u.easing?u.easing:r.default[u.easing],d=Date.now(),c={};for(e in s){var n,i=s[e];for(n in c[e]={},i)c[e][n]=a.getNodeAttribute(e,n)}var g=null;return function t(){var e=(Date.now()-d)/u.duration;if(1<=e){for(var n in s){var i=s[n];for(o in i)a.setNodeAttribute(n,o,i[o])}"function"==typeof h&&h()}else{for(var n in e=l(e),s){i=s[n];var o,r=c[n];for(o in i)a.setNodeAttribute(n,o,i[o]*e+r[o]*(1-e))}g=f.requestFrame(t)}}(),function(){g&&f.cancelFrame(g)}}},358:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.cubicInOut=e.cubicOut=e.cubicIn=e.quadraticInOut=e.quadraticOut=e.quadraticIn=e.linear=void 0,e.linear=function(t){return t},e.quadraticIn=function(t){return t*t},e.quadraticOut=function(t){return t*(2-t)},e.quadraticInOut=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},e.cubicIn=function(t){return t*t*t},e.cubicOut=function(t){return--t*t*t+1},e.cubicInOut=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)};var n={linear:e.linear,quadraticIn:e.quadraticIn,quadraticOut:e.quadraticOut,quadraticInOut:e.quadraticInOut,cubicIn:e.cubicIn,cubicOut:e.cubicOut,cubicInOut:e.cubicInOut};e.default=n},928:function(t,e,n){var s=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(i=r.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.validateGraph=e.canUse32BitsIndices=e.extractPixel=e.matrixFromCamera=e.floatColor=e.zIndexOrdering=e.createNormalizationFunction=e.getPixelRatio=e.createElement=e.cancelFrame=e.requestFrame=e.assignDeep=e.isPlainObject=void 0;var o=i(n(186)),h=n(700);function u(t){return"object"==_typeof(t)&&null!==t&&t.constructor===Object}e.isPlainObject=u,e.assignDeep=function t(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e=e||{};for(var o=0,r=n.length;o<r;o++){var a=n[o];if(a)for(var s in a)u(a[s])?e[s]=t(e[s],a[s]):e[s]=a[s]}return e},e.requestFrame="undefined"!=typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,0)},e.cancelFrame="undefined"!=typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:function(t){return clearTimeout(t)},e.createElement=function(t,e,n){var i=document.createElement(t);if(e)for(var o in e)i.style[o]=e[o];if(n)for(var o in n)i.setAttribute(o,n[o]);return i},e.getPixelRatio=function(){return void 0!==window.devicePixelRatio?window.devicePixelRatio:1},e.createNormalizationFunction=function(t){var e=s(t.x,2),n=e[0],i=e[1],e=s(t.y,2),t=e[0],e=e[1],o=Math.max(i-n,e-t);0===o&&(o=1);var r=(i+n)/2,a=(e+t)/2,t=function(t){return{x:.5+(t.x-r)/o,y:.5+(t.y-a)/o}};return t.applyTo=function(t){t.x=.5+(t.x-r)/o,t.y=.5+(t.y-a)/o},t.inverse=function(t){return{x:r+o*(t.x-.5),y:a+o*(t.y-.5)}},t.ratio=o,t},e.zIndexOrdering=function(t,n,e){return e.sort(function(t,e){t=n(t)||0,e=n(e)||0;return t<e?-1:e<t?1:0})};var a={},n=new Int8Array(4),l=new Int32Array(n.buffer,0,1),d=new Float32Array(n.buffer,0,1),c=/^\s*rgba?\s*\(/,g=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;e.floatColor=function(t){if(void 0!==a[t])return a[t];var e,n=0,i=0,o=0,r=1;"#"===t[0]?o=4===t.length?(n=parseInt(t.charAt(1)+t.charAt(1),16),i=parseInt(t.charAt(2)+t.charAt(2),16),parseInt(t.charAt(3)+t.charAt(3),16)):(n=parseInt(t.charAt(1)+t.charAt(2),16),i=parseInt(t.charAt(3)+t.charAt(4),16),parseInt(t.charAt(5)+t.charAt(6),16)):!c.test(t)||(e=t.match(g))&&(n=+e[1],i=+e[2],o=+e[3],e[4]&&(r=+e[4])),r=255*r|0,l[0]=4278190079&(r<<24|o<<16|i<<8|n);n=d[0];return a[t]=n},e.matrixFromCamera=function(t,e){var n=t.angle,i=t.ratio,o=t.x,r=t.y,a=e.width,s=e.height,t=h.identity(),e=Math.min(a,s),r=h.translate(h.identity(),-o,-r),i=h.scale(h.identity(),1/i),n=h.rotate(h.identity(),-n),s=h.scale(h.identity(),e/a*2,e/s*2);return h.multiply(t,s),h.multiply(t,n),h.multiply(t,i),h.multiply(t,r),t},e.extractPixel=function(t,e,n,i){i=i||new Uint8Array(4);return t.readPixels(e,n,1,1,t.RGBA,t.UNSIGNED_BYTE,i),i},e.canUse32BitsIndices=function(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||!!t.getExtension("OES_element_index_uint")},e.validateGraph=function(t){if(!o.default(t))throw new Error("Sigma: invalid graph instance.");t.forEachNode(function(t,e){if(!Number.isFinite(e.x)||!Number.isFinite(e.y))throw new Error("Sigma: Coordinates of node "+t+" are invalid. A node must have a numeric 'x' and 'y' attribute.")})}},700:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.multiply=e.translate=e.rotate=e.scale=e.identity=void 0,e.identity=function(){return Float32Array.of(1,0,0,0,1,0,0,0,1)},e.scale=function(t,e,n){return t[0]=e,t[4]="number"==typeof n?n:e,t},e.rotate=function(t,e){var n=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=n,t[3]=-n,t[4]=e,t},e.translate=function(t,e,n){return t[6]=e,t[7]=n,t},e.multiply=function(t,e){var n=t[0],i=t[1],o=t[2],r=t[3],a=t[4],s=t[5],h=t[6],u=t[7],l=t[8],d=e[0],c=e[1],g=e[2],f=e[3],p=e[4],m=e[5],y=e[6],v=e[7],e=e[8];return t[0]=d*n+c*r+g*h,t[1]=d*i+c*a+g*u,t[2]=d*o+c*s+g*l,t[3]=f*n+p*r+m*h,t[4]=f*i+p*a+m*u,t[5]=f*o+p*s+m*l,t[6]=y*n+v*r+e*h,t[7]=y*i+v*a+e*u,t[8]=y*o+v*s+e*l,t}}},o={},i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(607);function i(t){var e=o[t];if(void 0!==e)return e.exports;e=o[t]={exports:{}};return n[t].call(e.exports,e,e.exports,i),e.exports}var n,o}),function(){function i(t){var e,n,i="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return i?i.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}function o(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}var t,r="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)ji=Object.setPrototypeOf;else{t:{var e={};try{e.__proto__={a:!0},t=e.a;break t}catch(t){}t=!1}ji=t?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var a=ji;function n(t,e){if(t.prototype=r(e.prototype),t.prototype.constructor=t,a)a(t,e);else for(var n in e){var i;"prototype"!=n&&(Object.defineProperties?(i=Object.getOwnPropertyDescriptor(e,n))&&Object.defineProperty(t,n,i):t[n]=e[n])}t.vB=e.prototype}var s=("undefined"==typeof window||window!==self)&&"undefined"!=typeof global&&null!=global?global:self,h="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};!function(t){if(t){for(var e=s,n=["Array","prototype","fill"],i=0;i<n.length-1;i++){var o=n[i];o in e||(e[o]={}),e=e[o]}(t=t(i=e[n=n[n.length-1]]))!=i&&null!=t&&h(e,n,{writable:!0,value:t})}}(function(t){return t||function(t,e,n){var i=this.length||0;for(e<0&&(e=Math.max(0,i+e)),(null==n||i<n)&&(n=i),(n=Number(n))<0&&(n=Math.max(0,i+n)),e=Number(e||0);e<n;e++)this[e]=t;return this}});var d="object"===("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"===("undefined"==typeof global?"undefined":_typeof(global))&&global.global===global&&global||"object"===("undefined"==typeof window?"undefined":_typeof(window))&&window.window===window&&window||{};function u(){}function l(n,i){var o=-1;return function(){var t=this,e=arguments;-1!==o&&d.clearTimeout(o),o=v(function(){o=-1,n.apply(t,e)},i)}}function v(t,e){return d.setTimeout(t,e)}function c(t){return d.document.createElement(t)}function O(t){throw Error(t)}function g(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),void 0!==e&&(t+="  to value: "+e),O(t)}function f(t,e,n,i){n=null===n?"*":"string"==typeof n?n:"function"==typeof n&&"string"==typeof n.className?n.className:"",void 0!==i&&(n+="."+i),O(n+" is not in the range "+e+": "+t)}function p(t){d.console&&d.console.log(t)}function m(){d.console&&d.console.log("Warning: List/Map/Set constructors no longer take an argument that enforces type.Instead they take an optional collection of Values to add to the collection. See 2.0 changelog for details.")}function y(t){return"object"===_typeof(t)&&null!==t}function w(t){return Array.isArray(t)||d.NodeList&&t instanceof d.NodeList||d.HTMLCollection&&t instanceof d.HTMLCollection}function b(t){return Array.prototype.slice.call(t)}function S(t,e,n){Array.isArray(t)?e>=t.length?t.push(n):t.splice(e,0,n):O("Cannot insert an object into an HTMLCollection or NodeList: "+n+" at "+e)}function x(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):O("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function be(){var t=B.pop();return void 0===t?[]:t}function Se(t){t.length=0,B.push(t)}function P(t){if("function"==typeof t){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(""!==(e=e.substring(9,e.indexOf("(")).trim()))return t._className=e}else if(y(t)&&t.constructor)return P(t.constructor);return _typeof(t)}function k(t){var e=t;return y(t)&&(t.text?e=t.text:t.name?e=t.name:void 0!==t.key?e=t.key:void 0!==t.id?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:void 0!==t.Key?e=t.Key:void 0!==t.Id?e=t.Id:void 0!==t.ID&&(e=t.ID))),void 0===e?"undefined":null===e?"null":e.toString()}function L(t,e){if(t.hasOwnProperty(e))return 1;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return 1;var n=t.gB;if(n&&n[e])return 1;t=Object.getPrototypeOf(t)}}function M(t,e,n){Object.defineProperty(_n.prototype,t,{get:e,set:n})}function _(){var t=G;if(void 0===d.document)return t;if(0===t.length)for(var e=d.document.getElementsByTagName("canvas"),n=e.length,i=0;i<n;i++){var o=e[i];o.parentElement&&o.parentElement.B&&t.push(o.parentElement.B)}return t}function N(t){for(var e=[],n=0;n<256;n++)e["0123456789abcdef".charAt(n>>4)+"0123456789abcdef".charAt(15&n)]=String.fromCharCode(n);t.length%2&&(t="0"+t),n=[];for(var i=0,o=0;o<t.length;o+=2)n[i++]=e[t.substr(o,2)];for(t=""===(t=n.join(""))?"0":t,e=[],n=0;n<256;n++)e[n]=n;for(n=i=0;n<256;n++)i=(i+e[n]+119)%256,o=e[n],e[n]=e[i],e[i]=o;for(var r="",a=i=n=0;a<t.length;a++)i=(i+e[n=(n+1)%256])%256,o=e[n],e[n]=e[i],e[i]=o,r+=String.fromCharCode(t.charCodeAt(a)^e[(e[n]+e[i])%256]);return r}void 0===d.requestAnimationFrame&&(void 0===d.setImmediate?d.requestAnimationFrame=function(t){d.setTimeout(t,0)}:d.requestAnimationFrame=d.setImmediate);var A=void 0!==d.navigator&&0<d.navigator.userAgent.indexOf("MSIE 9.0"),T=void 0!==d.navigator&&0<d.navigator.userAgent.indexOf("MSIE 10.0"),C=void 0!==d.navigator&&0<d.navigator.userAgent.indexOf("Trident/7"),D=void 0!==d.navigator&&0<d.navigator.userAgent.indexOf("Edge/"),E=void 0!==d.navigator&&void 0!==d.navigator.platform&&0<=d.navigator.platform.toUpperCase().indexOf("MAC"),F=void 0!==d.navigator&&void 0!==d.navigator.platform&&null!==d.navigator.platform.match(/(iPhone|iPod|iPad)/i),B=[];Object.freeze([]);var G=[];function j(t,e,n){J(this),this.l=t,this.Qa=e,this.v=n}function z(t,e){return null==e||""===e?null:t[e]}function R(){this.ox=[]}function I(){}u.className="Util",u.Dx="32ab5ff3b26f42dc0ed90f21442913b5",u.adym="gojs.net",u.vfo="28e647fdb062",u.className="Util",j.prototype.toString=function(){return"EnumValue."+this.Qa},s.Object.defineProperties(j.prototype,{classType:{get:function(){return this.l}},name:{get:function(){return this.Qa}},value:{get:function(){return this.v}}}),j.className="EnumValue",R.prototype.toString=function(){return this.ox.join("")},R.prototype.add=function(t){""!==t&&this.ox.push(t)},R.className="StringBuilder";var V,U={iB:!(I.className="PropertyCollection"),nB:!1,kB:!1,mB:!1,sB:!1,qB:!1,jy:!1,jB:null,trace:function(t){d.console&&d.console.log(t)},lB:function(t,e,n,i){t.strokeStyle="red",t.fillStyle="red",t.font="8px sans-serif",t.beginPath(),t.moveTo(-10,0),t.lineTo(10,0),t.moveTo(0,-10),t.lineTo(0,10),t.stroke(),t.setTransform(1,0,0,1,0,0),t.scale(n,n),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.lineWidth=2,t.beginPath(),t.moveTo(i.left,i.top+20),t.lineTo(i.left,i.top),t.lineTo(i.left+20,i.top),t.moveTo(i.right,i.bottom-20),t.lineTo(i.right,i.bottom),t.lineTo(i.right-20,i.bottom),t.stroke(),t.fillText("DB: "+Math.round(i.x)+", "+Math.round(i.y)+", "+Math.round(i.width)+", "+Math.round(i.height),i.left,i.top-5)},hB:function(t){var e,n={};for(e in t){if(n.x=e,"licenseKey"!==n.x){var i=t[n.x];if(void 0!==i.prototype){n.Im=Object.getOwnPropertyNames(i.prototype);for(var o={wk:0};o.wk<n.Im.length;(o={wk:o.wk}).wk++){var r=Object.getOwnPropertyDescriptor(i.prototype,n.Im[o.wk]);void 0!==r.get&&void 0===r.set&&Object.defineProperty(i.prototype,n.Im[o.wk],{set:function(t,e){return function(){throw Error("Property "+t.Im[e.wk]+" of "+t.x+" is read-only.")}}(n,o)})}}}n={Im:n.Im,x:n.x}}}};function q(){}function H(t){this.key=-1,this.value=t}function Y(t){this.rb=t,this.ef=null,t.Ha=null,this.ia=t.Aa,this.Pa=-1}function K(t){(this.rb=t).fh=null,this.ia=t.Aa,this.Pa=t.j.length}function X(t){J(this),this.s=!1,this.j=[],this.Aa=0,this.fh=this.Ha=null,void 0!==t&&("function"==typeof t||"string"==typeof t?m():this.addAll(t))}function W(t){(this.tg=t).Ha=null,this.ia=t.Aa,this.ka=null}function $(t){J(this),this.s=!1,this.Hb={},this.Fb=0,this.Ha=null,this.Aa=0,this.Ze=this.ba=null,void 0!==t&&("function"==typeof t||"string"==typeof t?m():this.addAll(t))}function J(t){t.__gohashid=tt++}function Z(t){var e=t.__gohashid;return void 0===e&&(e=tt++,t.__gohashid=e),e}function Q(t){return t.__gohashid}q.prototype.reset=function(){},q.prototype.next=function(){return!1},q.prototype.ld=function(){return!1},q.prototype.first=function(){return null},q.prototype.any=function(){return!1},q.prototype.all=function(){return!0},q.prototype.each=function(){return this},q.prototype.map=function(){return this},q.prototype.filter=function(){return this},q.prototype.Kd=function(){},q.prototype.toString=function(){return"EmptyIterator"},s.Object.defineProperties(q.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),q.prototype.hasNext=q.prototype.ld,q.className="EmptyIterator",V=new q,H.prototype.reset=function(){this.key=-1},H.prototype.next=function(){return-1===this.key&&!(this.key=0)},H.prototype.ld=function(){return this.next()},H.prototype.first=function(){return this.key=0,this.value},H.prototype.any=function(t){return this.key=-1,t(this.value)},H.prototype.all=function(t){return this.key=-1,t(this.value)},H.prototype.each=function(t){return this.key=-1,t(this.value),this},H.prototype.map=function(t){return new H(t(this.value))},H.prototype.filter=function(t){return t(this.value)?new H(this.value):V},H.prototype.Kd=function(){this.value=null},H.prototype.toString=function(){return"SingletonIterator("+this.value+")"},s.Object.defineProperties(H.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),H.prototype.hasNext=H.prototype.ld,H.className="SingletonIterator",Y.prototype.reset=function(){var t=this.rb;t.Ha=null,this.ia=t.Aa,this.Pa=-1},Y.prototype.next=function(){var t=this.rb;if(t.Aa!==this.ia&&this.key<0)return!1;var e=(t=t.j).length,n=++this.Pa,i=this.ef;if(null!==i)for(;n<e;){var o=t[n];if(i(o))return this.key=this.Pa=n,this.value=o,!0;n++}else{if(n<e)return this.key=n,this.value=t[n],!0;this.Kd()}return!1},Y.prototype.ld=function(){return this.next()},Y.prototype.first=function(){var t=this.rb;this.ia=t.Aa,this.Pa=0;var e=(t=t.j).length,n=this.ef;if(null===n)return 0<e?(t=t[0],this.key=0,this.value=t):null;for(var i=0;i<e;){var o=t[i];if(n(o))return this.key=this.Pa=i,this.value=o;i++}return null},Y.prototype.any=function(t){var e=this.rb;e.Ha=null,this.Pa=-1;for(var n=(e=e.j).length,i=this.ef,o=0;o<n;o++){var r=e[o];if((null===i||i(r))&&t(r))return!0}return!1},Y.prototype.all=function(t){var e=this.rb;e.Ha=null,this.Pa=-1;for(var n=(e=e.j).length,i=this.ef,o=0;o<n;o++){var r=e[o];if((null===i||i(r))&&!t(r))return!1}return!0},Y.prototype.each=function(t){var e=this.rb;e.Ha=null,this.Pa=-1;for(var n=(e=e.j).length,i=this.ef,o=0;o<n;o++){var r=e[o];null!==i&&!i(r)||t(r)}return this},Y.prototype.map=function(t){var e=this.rb;e.Ha=null,this.Pa=-1;for(var n=[],i=(e=e.j).length,o=this.ef,r=0;r<i;r++){var a=e[r];null!==o&&!o(a)||n.push(t(a))}return(t=new X).j=n,t.mb(),t.iterator},Y.prototype.filter=function(t){var e=this.rb;e.Ha=null,this.Pa=-1;for(var n=[],i=(e=e.j).length,o=this.ef,r=0;r<i;r++){var a=e[r];(null===o||o(a))&&t(a)&&n.push(a)}return(t=new X).j=n,t.mb(),t.iterator},Y.prototype.Kd=function(){this.key=-1,this.value=null,this.ia=-1,this.ef=null,this.rb.Ha=this},Y.prototype.toString=function(){return"ListIterator@"+this.Pa+"/"+this.rb.count},s.Object.defineProperties(Y.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.ef},set:function(t){this.ef=t}},count:{get:function(){var t=this.ef;if(null===t)return this.rb.j.length;for(var e=0,n=this.rb.j,i=n.length,o=0;o<i;o++)t(n[o])&&e++;return e}}}),Y.prototype.hasNext=Y.prototype.ld,Y.className="ListIterator",K.prototype.reset=function(){var t=this.rb;t.fh=null,this.ia=t.Aa,this.Pa=t.j.length},K.prototype.next=function(){var t=this.rb;if(t.Aa!==this.ia&&this.key<0)return!1;var e=--this.Pa;return 0<=e?(this.key=e,this.value=t.j[e],!0):(this.Kd(),!1)},K.prototype.ld=function(){return this.next()},K.prototype.first=function(){var t=this.rb;this.ia=t.Aa;var e=t.j;return this.Pa=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},K.prototype.any=function(t){var e=this.rb;e.fh=null;var n=(e=e.j).length;for(this.Pa=n,--n;0<=n;n--)if(t(e[n]))return!0;return!1},K.prototype.all=function(t){var e=this.rb;e.fh=null;var n=(e=e.j).length;for(this.Pa=n,--n;0<=n;n--)if(!t(e[n]))return!1;return!0},K.prototype.each=function(t){var e=this.rb;e.fh=null;var n=(e=e.j).length;for(this.Pa=n,--n;0<=n;n--)t(e[n]);return this},K.prototype.map=function(t){var e=this.rb;e.fh=null;var n=[],i=(e=e.j).length;for(this.Pa=i,--i;0<=i;i--)n.push(t(e[i]));return(t=new X).j=n,t.mb(),t.iterator},K.prototype.filter=function(t){var e=this.rb;e.fh=null;var n=[],i=(e=e.j).length;for(this.Pa=i,--i;0<=i;i--){var o=e[i];t(o)&&n.push(o)}return(t=new X).j=n,t.mb(),t.iterator},K.prototype.Kd=function(){this.key=-1,this.value=null,this.ia=-1,this.rb.fh=this},K.prototype.toString=function(){return"ListIteratorBackwards("+this.Pa+"/"+this.rb.count+")"},s.Object.defineProperties(K.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.rb.j.length}}}),K.prototype.hasNext=K.prototype.ld,K.className="ListIteratorBackwards",(Bp=X.prototype).mb=function(){var t=this.Aa;999999999<++t&&(t=0),this.Aa=t},Bp.freeze=function(){return this.s=!0,this},Bp.ea=function(){return this.s=!1,this},Bp.toString=function(){return"List()#"+Q(this)},Bp.add=function(t){return null===t||(this.s&&g(this,t),this.j.push(t),this.mb()),this},Bp.push=function(t){this.add(t)},Bp.addAll=function(t){if(null===t)return this;this.s&&g(this);var e=this.j;if(w(t))for(var n=t.length,i=0;i<n;i++)e.push(t[i]);else for(t=t.iterator;t.next();)e.push(t.value);return this.mb(),this},Bp.clear=function(){this.s&&g(this),this.j.length=0,this.mb()},Bp.contains=function(t){return null!==t&&-1!==this.j.indexOf(t)},Bp.has=function(t){return this.contains(t)},Bp.indexOf=function(t){return null===t?-1:this.j.indexOf(t)},Bp.L=function(t){var e=this.j;return(t<0||t>=e.length)&&f(t,"0 <= i < length",X,"elt:i"),e[t]},Bp.get=function(t){return this.L(t)},Bp.nd=function(t,e){var n=this.j;(t<0||t>=n.length)&&f(t,"0 <= i < length",X,"setElt:i"),this.s&&g(this,t),n[t]=e},Bp.set=function(t,e){this.nd(t,e)},Bp.first=function(){var t=this.j;return 0===t.length?null:t[0]},Bp.Xb=function(){var t=this.j,e=t.length;return 0<e?t[e-1]:null},Bp.pop=function(){this.s&&g(this);var t=this.j;return 0<t.length?t.pop():null},X.prototype.any=function(t){for(var e=this.j,n=e.length,i=0;i<n;i++)if(t(e[i]))return!0;return!1},X.prototype.all=function(t){for(var e=this.j,n=e.length,i=0;i<n;i++)if(!t(e[i]))return!1;return!0},X.prototype.each=function(t){for(var e=this.j,n=e.length,i=0;i<n;i++)t(e[i]);return this},X.prototype.map=function(t){for(var e=new X,n=[],i=this.j,o=i.length,r=0;r<o;r++)n.push(t(i[r]));return e.j=n,e.mb(),e},X.prototype.filter=function(t){for(var e=new X,n=[],i=this.j,o=i.length,r=0;r<o;r++){var a=i[r];t(a)&&n.push(a)}return e.j=n,e.mb(),e},(Bp=X.prototype).vb=function(t,e){t<0&&f(t,">= 0",X,"insertAt:i"),this.s&&g(this,t);var n=this.j;t>=n.length?n.push(e):n.splice(t,0,e),this.mb()},Bp.remove=function(t){if(null===t)return!1;this.s&&g(this,t);var e=this.j;return-1!==(t=e.indexOf(t))&&(t===e.length-1?e.pop():e.splice(t,1),this.mb(),!0)},Bp.delete=function(t){return this.remove(t)},Bp.bb=function(t){var e=this.j;(t<0||t>=e.length)&&f(t,"0 <= i < length",X,"removeAt:i"),this.s&&g(this,t),t===e.length-1?e.pop():e.splice(t,1),this.mb()},Bp.removeRange=function(t,e){var n=this.j,i=n.length;if(t<0)t=0;else if(i<=t)return this;if(e<0)return this;if(i<=e&&(e=i-1),e<t)return this;this.s&&g(this);for(var o=t,r=e+1;r<i;)n[o++]=n[r++];return n.length=i-(e-t+1),this.mb(),this},X.prototype.copy=function(){var t=new X,e=this.j;return 0<e.length&&(t.j=Array.prototype.slice.call(e)),t},(Bp=X.prototype).ma=function(){for(var t=this.j,e=this.count,n=Array(e),i=0;i<e;i++)n[i]=t[i];return n},Bp.Kw=function(){for(var t=new $,e=this.j,n=this.count,i=0;i<n;i++)t.add(e[i]);return t},Bp.sort=function(t){return this.s&&g(this),this.j.sort(t),this.mb(),this},Bp.tj=function(t,e,n){var i=this.j,o=i.length;void 0===e&&(e=0),void 0===n&&(n=o),this.s&&g(this);var r=n-e;if(r<=1)return this;if((e<0||o-1<=e)&&f(e,"0 <= from < length",X,"sortRange:from"),2==r)return 0<t(n=i[e],o=i[e+1])&&(i[e]=o,i[e+1]=n,this.mb()),this;if(0===e)if(o<=n)i.sort(t);else for((e=i.slice(0,n)).sort(t),t=0;t<n;t++)i[t]=e[t];else if(o<=n)for((n=i.slice(e)).sort(t),t=e;t<o;t++)i[t]=n[t-e];else for((o=i.slice(e,n)).sort(t),t=e;t<n;t++)i[t]=o[t-e];return this.mb(),this},Bp.reverse=function(){return this.s&&g(this),this.j.reverse(),this.mb(),this},s.Object.defineProperties(X.prototype,{_dataArray:{get:function(){return this.j}},count:{get:function(){return this.j.length}},size:{get:function(){return this.j.length}},length:{get:function(){return this.j.length}},iterator:{get:function(){if(this.j.length<=0)return V;var t=this.Ha;return null!==t?(t.reset(),t):new Y(this)}},iteratorBackwards:{get:function(){if(this.j.length<=0)return V;var t=this.fh;return null!==t?(t.reset(),t):new K(this)}}}),X.prototype.sortRange=X.prototype.tj,X.prototype.toSet=X.prototype.Kw,X.prototype.toArray=X.prototype.ma,X.prototype.removeAt=X.prototype.bb,X.prototype.insertAt=X.prototype.vb,X.prototype.last=X.prototype.Xb,X.prototype.setElt=X.prototype.nd,X.prototype.elt=X.prototype.L,X.prototype.thaw=X.prototype.ea,X.className="List",W.prototype.reset=function(){var t=this.tg;t.Ha=null,this.ia=t.Aa,this.ka=null},W.prototype.next=function(){var t=this.tg;if(t.Aa!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.value=e.value,this.key=e.key,!0):(this.Kd(),!1)},W.prototype.ld=function(){return this.next()},W.prototype.first=function(){var t=this.tg;if(this.ia=t.Aa,null===(t=t.ba))return null;var e=(this.ka=t).value;return this.key=t.key,this.value=e},W.prototype.any=function(t){var e=this.tg;for(this.ka=e.Ha=null,e=e.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},W.prototype.all=function(t){var e=this.tg;for(this.ka=e.Ha=null,e=e.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},W.prototype.each=function(t){var e=this.tg;for(this.ka=e.Ha=null,e=e.ba;null!==e;)t(e.value),e=e.oa;return this},W.prototype.map=function(t){(n=this.tg).Ha=null;for(var e=new X,n=n.ba;null!==n;)e.add(t(n.value)),n=n.oa;return e.iterator},W.prototype.filter=function(t){(n=this.tg).Ha=null;for(var e=new X,n=n.ba;null!==n;){var i=n.value;t(i)&&e.add(i),n=n.oa}return e.iterator},W.prototype.Kd=function(){this.value=this.key=null,this.ia=-1,this.tg.Ha=this},W.prototype.toString=function(){return null!==this.ka?"SetIterator@"+this.ka.value:"SetIterator"},s.Object.defineProperties(W.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.tg.Fb}}}),W.prototype.hasNext=W.prototype.ld,W.className="SetIterator",(Bp=$.prototype).mb=function(){var t=this.Aa;999999999<++t&&(t=0),this.Aa=t},Bp.freeze=function(){return this.s=!0,this},Bp.ea=function(){return this.s=!1,this},Bp.toString=function(){return"Set()#"+Q(this)},Bp.add=function(t){if(null===t)return this;this.s&&g(this,t);var e=t;return y(t)&&(e=Z(t)),void 0===this.Hb[e]&&(this.Fb++,t=new ot(t,t),this.Hb[e]=t,null===(e=this.Ze)?this.ba=t:(t.Ql=e).oa=t,this.Ze=t,this.mb()),this},Bp.addAll=function(t){if(null===t)return this;if(this.s&&g(this),w(t))for(var e=t.length,n=0;n<e;n++)this.add(t[n]);else for(t=t.iterator;t.next();)this.add(t.value);return this},Bp.contains=function(t){if(null===t)return!1;var e=t;return(!y(t)||void 0!==(e=Q(t)))&&void 0!==this.Hb[e]},Bp.has=function(t){return this.contains(t)},Bp.zz=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},Bp.Az=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},Bp.first=function(){var t=this.ba;return null===t?null:t.value},$.prototype.any=function(t){for(var e=this.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},$.prototype.all=function(t){for(var e=this.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},$.prototype.each=function(t){for(var e=this.ba;null!==e;)t(e.value),e=e.oa;return this},$.prototype.map=function(t){for(var e=new $,n=this.ba;null!==n;)e.add(t(n.value)),n=n.oa;return e},$.prototype.filter=function(t){for(var e=new $,n=this.ba;null!==n;){var i=n.value;t(i)&&e.add(i),n=n.oa}return e},(Bp=$.prototype).remove=function(t){if(null===t)return!1;this.s&&g(this,t);var e=t;if(y(t)&&void 0===(e=Q(t)))return!1;if(void 0===(t=this.Hb[e]))return!1;var n=t.oa,i=t.Ql;return null!==n&&(n.Ql=i),null!==i&&(i.oa=n),this.ba===t&&(this.ba=n),this.Ze===t&&(this.Ze=i),delete this.Hb[e],this.Fb--,this.mb(),!0},Bp.delete=function(t){return this.remove(t)},Bp.$q=function(t){if(null===t)return this;if(this.s&&g(this),w(t))for(var e=t.length,n=0;n<e;n++)this.remove(t[n]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},Bp.RA=function(t){if(null===t||0===this.count)return this;this.s&&g(this);var e=new $;e.addAll(t),t=[];for(var n=this.iterator;n.next();){var i=n.value;e.contains(i)||t.push(i)}return this.$q(t),this},Bp.clear=function(){this.s&&g(this),this.Hb={},this.Fb=0,null!==this.Ha&&this.Ha.reset(),this.Ze=this.ba=null,this.mb()},$.prototype.copy=function(){var t,e=new $,n=this.Hb;for(t in n)e.add(n[t].value);return e},$.prototype.ma=function(){var t,e=Array(this.Fb),n=this.Hb,i=0;for(t in n)e[i]=n[t].value,i++;return e},$.prototype.Jw=function(){var t,e=new X,n=this.Hb;for(t in n)e.add(n[t].value);return e},s.Object.defineProperties($.prototype,{count:{get:function(){return this.Fb}},size:{get:function(){return this.Fb}},iterator:{get:function(){if(this.Fb<=0)return V;var t=this.Ha;return null!==t?(t.reset(),t):new W(this)}}}),$.prototype.toList=$.prototype.Jw,$.prototype.toArray=$.prototype.ma,$.prototype.retainAll=$.prototype.RA,$.prototype.removeAll=$.prototype.$q,$.prototype.containsAny=$.prototype.Az,$.prototype.containsAll=$.prototype.zz,$.prototype.thaw=$.prototype.ea;var tt=1;function et(t){this.fa=t,this.ia=t.Aa,this.ka=null}function nt(t){$.call(this),J(this),this.s=!0,this.fa=t}function it(t){(this.fa=t).Ye=null,this.ia=t.Aa,this.ka=null}function ot(t,e){this.key=t,this.value=e,this.Ql=this.oa=null}function rt(t){(this.fa=t).Ha=null,this.ia=t.Aa,this.ka=null}function at(t){J(this),this.s=!1,this.Hb={},this.Fb=0,this.Ye=this.Ha=null,this.Aa=0,this.Ze=this.ba=null,void 0!==t&&("function"==typeof t||"string"==typeof t?m():this.addAll(t))}function ee(t,e){void 0===t?this.y=this.x=0:"number"==typeof t&&"number"==typeof e?(this.x=t,this.y=e):O("Invalid arguments to Point constructor: "+t+", "+e),this.s=!1}function st(t){if("string"!=typeof t)return new ee;t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];i&&(n=parseFloat(i));for(var o=0;""===t[e];)e++;return(i=t[e++])&&(o=parseFloat(i)),new ee(n,o)}function ht(t){return t.x.toString()+" "+t.y.toString()}function ut(t,e){if(0===t)return 0<e?90:e<0?270:0;if(0===e)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var n=180*Math.atan(Math.abs(e/t))/Math.PI;return t<0?n=e<0?n+180:180-n:e<0&&(n=360-n),n}function lt(t,e){return e.Zd(t),t}function dt(t,e,n,i,o,r){var a=o-n,s=r-i,h=a*a+s*s,u=-(n-=t)*a-(i-=e)*s;return u<=0||h<=u?(a=o-t,s=r-e,Math.min(n*n+i*i,a*a+s*s)):(t=a*i-s*n)*t/h}function ct(t,e,n,i){return(t=n-t)*t+(e=i-e)*e}function gt(t,e,n,i){return e=i-e,0===(t=n-t)?0<e?90:e<0?270:0:0===e?0<t?0:180:isNaN(t)||isNaN(e)?0:(i=180*Math.atan(Math.abs(e/t))/Math.PI,t<0?i=e<0?i+180:180-i:e<0&&(i=360-i),i)}$.className="Set",$.uniqueHash=J,$.hashIdUnique=Z,$.hashId=Q,et.prototype.reset=function(){this.ia=this.fa.Aa,this.ka=null},et.prototype.next=function(){var t=this.fa;if(t.Aa!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.value=this.key=t=e.key,!0):(this.Kd(),!1)},et.prototype.ld=function(){return this.next()},et.prototype.first=function(){var t=this.fa;return this.ia=t.Aa,null!==(t=t.ba)?(this.ka=t,this.value=this.key=t.key):null},et.prototype.any=function(t){var e=this.fa;for(this.ka=null,e=e.ba;null!==e;){if(t(e.key))return!0;e=e.oa}return!1},et.prototype.all=function(t){var e=this.fa;for(this.ka=null,e=e.ba;null!==e;){if(!t(e.key))return!1;e=e.oa}return!0},et.prototype.each=function(t){var e=this.fa;for(this.ka=null,e=e.ba;null!==e;)t(e.key),e=e.oa;return this},et.prototype.map=function(t){var e=this.fa;this.ka=null;for(var n=new X,e=e.ba;null!==e;)n.add(t(e.key)),e=e.oa;return n.iterator},et.prototype.filter=function(t){var e=this.fa;this.ka=null;for(var n=new X,e=e.ba;null!==e;){var i=e.key;t(i)&&n.add(i),e=e.oa}return n.iterator},et.prototype.Kd=function(){this.value=this.key=null,this.ia=-1},et.prototype.toString=function(){return null!==this.ka?"MapKeySetIterator@"+this.ka.value:"MapKeySetIterator"},s.Object.defineProperties(et.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.fa.Fb}}}),et.prototype.hasNext=et.prototype.ld,et.className="MapKeySetIterator",n(nt,$),(Bp=nt.prototype).freeze=function(){return this},Bp.ea=function(){return this},Bp.toString=function(){return"MapKeySet("+this.fa.toString()+")"},Bp.add=function(){return O("This Set is read-only: "+this.toString()),this},Bp.contains=function(t){return this.fa.contains(t)},Bp.has=function(t){return this.contains(t)},Bp.remove=function(){return O("This Set is read-only: "+this.toString()),!1},Bp.delete=function(t){return this.remove(t)},Bp.clear=function(){O("This Set is read-only: "+this.toString())},Bp.first=function(){var t=this.fa.ba;return null!==t?t.key:null},nt.prototype.any=function(t){for(var e=this.fa.ba;null!==e;){if(t(e.key))return!0;e=e.oa}return!1},nt.prototype.all=function(t){for(var e=this.fa.ba;null!==e;){if(!t(e.key))return!1;e=e.oa}return!0},nt.prototype.each=function(t){for(var e=this.fa.ba;null!==e;)t(e.key),e=e.oa;return this},nt.prototype.map=function(t){for(var e=new $,n=this.fa.ba;null!==n;)e.add(t(n.key)),n=n.oa;return e},nt.prototype.filter=function(t){for(var e=new $,n=this.fa.ba;null!==n;){var i=n.key;t(i)&&e.add(i),n=n.oa}return e},nt.prototype.copy=function(){return new nt(this.fa)},nt.prototype.Kw=function(){var t,e=new $,n=this.fa.Hb;for(t in n)e.add(n[t].key);return e},nt.prototype.ma=function(){var t,e=this.fa.Hb,n=Array(this.fa.Fb),i=0;for(t in e)n[i]=e[t].key,i++;return n},nt.prototype.Jw=function(){var t,e=new X,n=this.fa.Hb;for(t in n)e.add(n[t].key);return e},s.Object.defineProperties(nt.prototype,{count:{get:function(){return this.fa.Fb}},size:{get:function(){return this.fa.Fb}},iterator:{get:function(){return this.fa.Fb<=0?V:new et(this.fa)}}}),nt.prototype.toList=nt.prototype.Jw,nt.prototype.toArray=nt.prototype.ma,nt.prototype.toSet=nt.prototype.Kw,nt.prototype.thaw=nt.prototype.ea,nt.className="MapKeySet",it.prototype.reset=function(){var t=this.fa;t.Ye=null,this.ia=t.Aa,this.ka=null},it.prototype.next=function(){var t=this.fa;if(t.Aa!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.value=e.value,this.key=e.key,!0):(this.Kd(),!1)},it.prototype.ld=function(){return this.next()},it.prototype.first=function(){var t=this.fa;if(this.ia=t.Aa,null===(t=t.ba))return null;var e=(this.ka=t).value;return this.key=t.key,this.value=e},it.prototype.any=function(t){var e=this.fa;for(this.ka=e.Ye=null,e=e.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},it.prototype.all=function(t){var e=this.fa;for(this.ka=e.Ye=null,e=e.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},it.prototype.each=function(t){var e=this.fa;for(this.ka=e.Ye=null,e=e.ba;null!==e;)t(e.value),e=e.oa;return this},it.prototype.map=function(t){var e=this.fa;this.ka=e.Ye=null;for(var n=new X,e=e.ba;null!==e;)n.add(t(e.value)),e=e.oa;return n.iterator},it.prototype.filter=function(t){var e=this.fa;this.ka=e.Ye=null;for(var n=new X,e=e.ba;null!==e;){var i=e.value;t(i)&&n.add(i),e=e.oa}return n.iterator},it.prototype.Kd=function(){this.value=this.key=null,this.ia=-1,this.fa.Ye=this},it.prototype.toString=function(){return null!==this.ka?"MapValueSetIterator@"+this.ka.value:"MapValueSetIterator"},s.Object.defineProperties(it.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.fa.Fb}}}),it.prototype.hasNext=it.prototype.ld,it.className="MapValueSetIterator",ot.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},ot.className="KeyValuePair",rt.prototype.reset=function(){var t=this.fa;t.Ha=null,this.ia=t.Aa,this.ka=null},rt.prototype.next=function(){var t=this.fa;if(t.Aa!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.key=e.key,this.value=e.value,!0):(this.Kd(),!1)},rt.prototype.ld=function(){return this.next()},rt.prototype.first=function(){var t=this.fa;return this.ia=t.Aa,null!==(t=t.ba)?(this.ka=t,this.key=t.key,this.value=t.value,t):null},rt.prototype.any=function(t){var e=this.fa;for(this.ka=e.Ha=null,e=e.ba;null!==e;){if(t(e))return!0;e=e.oa}return!1},rt.prototype.all=function(t){var e=this.fa;for(this.ka=e.Ha=null,e=e.ba;null!==e;){if(!t(e))return!1;e=e.oa}return!0},rt.prototype.each=function(t){var e=this.fa;for(this.ka=e.Ha=null,e=e.ba;null!==e;)t(e),e=e.oa;return this},rt.prototype.map=function(t){var e=this.fa;this.ka=e.Ha=null;for(var n=new X,e=e.ba;null!==e;)n.add(t(e)),e=e.oa;return n.iterator},rt.prototype.filter=function(t){var e=this.fa;this.ka=e.Ha=null;for(var n=new X,e=e.ba;null!==e;)t(e)&&n.add(e),e=e.oa;return n.iterator},rt.prototype.Kd=function(){this.value=this.key=null,this.ia=-1,this.fa.Ha=this},rt.prototype.toString=function(){return null!==this.ka?"MapIterator@"+this.ka:"MapIterator"},s.Object.defineProperties(rt.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.fa.Fb}}}),rt.prototype.hasNext=rt.prototype.ld,rt.className="MapIterator",(Bp=at.prototype).mb=function(){var t=this.Aa;999999999<++t&&(t=0),this.Aa=t},Bp.freeze=function(){return this.s=!0,this},Bp.ea=function(){return this.s=!1,this},Bp.toString=function(){return"Map()#"+Q(this)},Bp.add=function(t,e){this.s&&g(this,t);var n=t;y(t)&&(n=Z(t));var i=this.Hb[n];return void 0===i?(this.Fb++,t=new ot(t,e),this.Hb[n]=t,null===(n=this.Ze)?this.ba=t:(t.Ql=n).oa=t,this.Ze=t,this.mb()):i.value=e,this},Bp.set=function(t,e){return this.add(t,e)},Bp.addAll=function(t){if(null===t)return this;if(w(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];this.add(i.key,i.value)}else if(t instanceof at)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)e=t.value,this.add(e.key,e.value);return this},Bp.first=function(){return this.ba},at.prototype.any=function(t){for(var e=this.ba;null!==e;){if(t(e))return!0;e=e.oa}return!1},at.prototype.all=function(t){for(var e=this.ba;null!==e;){if(!t(e))return!1;e=e.oa}return!0},at.prototype.each=function(t){for(var e=this.ba;null!==e;)t(e),e=e.oa;return this},at.prototype.map=function(t){for(var e=new at,n=this.ba;null!==n;)e.add(n.key,t(n)),n=n.oa;return e},at.prototype.filter=function(t){for(var e=new at,n=this.ba;null!==n;)t(n)&&e.add(n.key,n.value),n=n.oa;return e},(Bp=at.prototype).contains=function(t){var e=t;return(!y(t)||void 0!==(e=Q(t)))&&void 0!==this.Hb[e]},Bp.has=function(t){return this.contains(t)},Bp.H=function(t){var e=t;return y(t)&&void 0===(e=Q(t))||void 0===(t=this.Hb[e])?null:t.value},Bp.get=function(t){return this.H(t)},Bp.remove=function(t){if(null===t)return!1;this.s&&g(this,t);var e=t;if(y(t)&&void 0===(e=Q(t)))return!1;if(void 0===(t=this.Hb[e]))return!1;var n=t.oa,i=t.Ql;return null!==n&&(n.Ql=i),null!==i&&(i.oa=n),this.ba===t&&(this.ba=n),this.Ze===t&&(this.Ze=i),delete this.Hb[e],this.Fb--,this.mb(),!0},Bp.delete=function(t){return this.remove(t)},Bp.clear=function(){this.s&&g(this),this.Hb={},this.Fb=0,null!==this.Ha&&this.Ha.reset(),null!==this.Ye&&this.Ye.reset(),this.Ze=this.ba=null,this.mb()},at.prototype.copy=function(){var t,e=new at,n=this.Hb;for(t in n){var i=n[t];e.add(i.key,i.value)}return e},at.prototype.ma=function(){var t,e=this.Hb,n=Array(this.Fb),i=0;for(t in e){var o=e[t];n[i]=new ot(o.key,o.value),i++}return n},at.prototype.Jf=function(){return new nt(this)},s.Object.defineProperties(at.prototype,{count:{get:function(){return this.Fb}},size:{get:function(){return this.Fb}},iterator:{get:function(){if(this.count<=0)return V;var t=this.Ha;return null!==t?(t.reset(),t):new rt(this)}},iteratorKeys:{get:function(){return this.count<=0?V:new et(this)}},iteratorValues:{get:function(){if(this.count<=0)return V;var t=this.Ye;return null!==t?(t.reset(),t):new it(this)}}}),at.prototype.toKeySet=at.prototype.Jf,at.prototype.toArray=at.prototype.ma,at.prototype.getValue=at.prototype.H,at.prototype.thaw=at.prototype.ea,at.className="Map",ee.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},ee.prototype.h=function(t,e){return this.x=t,this.y=e,this},ee.prototype.Ig=function(t,e){return this.x=t,this.y=e,this},ee.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},ee.prototype.copy=function(){var t=new ee;return t.x=this.x,t.y=this.y,t},(Bp=ee.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},Bp.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},Bp.freeze=function(){return this.s=!0,this},Bp.ea=function(){return Object.isFrozen(this)&&O("cannot thaw constant: "+this),this.s=!1,this},Bp.toString=function(){return"Point("+this.x+","+this.y+")"},Bp.w=function(t){return t instanceof ee&&(this.x===t.x&&this.y===t.y)},Bp.fj=function(t,e){return this.x===t&&this.y===e},Bp.Na=function(t){return Ue.A(this.x,t.x)&&Ue.A(this.y,t.y)},Bp.add=function(t){return this.x+=t.x,this.y+=t.y,this},Bp.ce=function(t){return this.x-=t.x,this.y-=t.y,this},Bp.offset=function(t,e){return this.x+=t,this.y+=e,this},ee.prototype.rotate=function(t){if(0===t)return this;var e,n=this.x,i=this.y;return 0===n&&0===i||(360<=t?t-=360:t<0&&(t+=360),e=90===t?(t=0,1):180===t?(t=-1,0):270===t?(t=0,-1):(e=t*Math.PI/180,t=Math.cos(e),Math.sin(e)),this.x=t*n-e*i,this.y=e*n+t*i),this},(Bp=ee.prototype).scale=function(t,e){return this.x*=t,this.y*=e,this},Bp.Fe=function(t){var e=t.x-this.x;return e*e+(t=t.y-this.y)*t},Bp.kd=function(t,e){return(t-=this.x)*t+(e-=this.y)*e},Bp.normalize=function(){var t=this.x,e=this.y,n=Math.sqrt(t*t+e*e);return 0<n&&(this.x=t/n,this.y=e/n),this},Bp.Sa=function(t){return ut(t.x-this.x,t.y-this.y)},Bp.direction=function(t,e){return ut(t-this.x,e-this.y)},Bp.KA=function(t,e,n,i){return Ue.Qh(t,e,n,i,this.x,this.y,this),this},Bp.LA=function(t,e){return Ue.Qh(t.x,t.y,e.x,e.y,this.x,this.y,this),this},Bp.WA=function(t,e,n,i){return Ue.Eq(this.x,this.y,t,e,n,i,this),this},Bp.XA=function(t,e){return Ue.Eq(this.x,this.y,t.x,t.y,e.width,e.height,this),this},Bp.sj=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},Bp.Lk=function(t,e,n,i,o){return this.x=t+o.x*n+o.offsetX,this.y=e+o.y*i+o.offsetY,this},Bp.transform=function(t){return t.sa(this),this},Bp.u=function(){return isFinite(this.x)&&isFinite(this.y)},ee.alloc=function(){var t=Mt.pop();return void 0===t?new ee:t},ee.allocAt=function(t,e){var n=Mt.pop();return void 0===n?new ee(t,e):(n.x=t,n.y=e,n)},ee.free=function(t){Mt.push(t)},ee.prototype.isReal=ee.prototype.u,ee.prototype.setSpot=ee.prototype.Lk,ee.prototype.setRectSpot=ee.prototype.sj,ee.prototype.snapToGridPoint=ee.prototype.XA,ee.prototype.snapToGrid=ee.prototype.WA,ee.prototype.projectOntoLineSegmentPoint=ee.prototype.LA,ee.prototype.projectOntoLineSegment=ee.prototype.KA,ee.intersectingLineSegments=function(t,e,n,i,o,r,a,s){return Ue.Mq(t,e,n,i,o,r,a,s)},ee.prototype.directionPoint=ee.prototype.Sa,ee.prototype.distanceSquared=ee.prototype.kd,ee.prototype.distanceSquaredPoint=ee.prototype.Fe,ee.prototype.subtract=ee.prototype.ce,ee.prototype.equalsApprox=ee.prototype.Na,ee.prototype.equalTo=ee.prototype.fj,ee.prototype.equals=ee.prototype.w,ee.prototype.setTo=ee.prototype.Ig;var ft,pt,mt,yt,vt,wt,bt,St=null,xt=null,Pt=null,kt=null,Lt=null,Mt=[];function xe(t,e){void 0===t?this.height=this.width=0:"number"==typeof t&&(0<=t||isNaN(t))&&"number"==typeof e&&(0<=e||isNaN(e))?(this.width=t,this.height=e):O("Invalid arguments to Size constructor: "+t+", "+e),this.s=!1}function _t(t){if("string"!=typeof t)return new xe;t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];i&&(n=parseFloat(i));for(var o=0;""===t[e];)e++;return(i=t[e++])&&(o=parseFloat(i)),new xe(n,o)}function Nt(t){return t.width.toString()+" "+t.height.toString()}ee.className="Point",ee.parse=st,ee.stringify=ht,ee.distanceLineSegmentSquared=dt,ee.distanceSquared=ct,ee.direction=gt,ee.Origin=St=new ee(0,0).ca(),ee.InfiniteTopLeft=xt=new ee(-1/0,-1/0).ca(),ee.InfiniteBottomRight=Pt=new ee(1/0,1/0).ca(),ee.SixPoint=kt=new ee(6,6).ca(),ee.NoPoint=Lt=new ee(NaN,NaN).ca(),ee.parse=st,ee.stringify=ht,ee.distanceLineSegmentSquared=dt,ee.distanceSquared=ct,ee.direction=gt,xe.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},xe.prototype.h=function(t,e){return this.width=t,this.height=e,this},xe.prototype.Ig=function(t,e){return this.width=t,this.height=e,this},xe.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},xe.prototype.copy=function(){var t=new xe;return t.width=this.width,t.height=this.height,t},(Bp=xe.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},Bp.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},Bp.freeze=function(){return this.s=!0,this},Bp.ea=function(){return Object.isFrozen(this)&&O("cannot thaw constant: "+this),this.s=!1,this},Bp.toString=function(){return"Size("+this.width+","+this.height+")"},Bp.w=function(t){return t instanceof xe&&(this.width===t.width&&this.height===t.height)},Bp.fj=function(t,e){return this.width===t&&this.height===e},Bp.Na=function(t){return Ue.A(this.width,t.width)&&Ue.A(this.height,t.height)},Bp.u=function(){return isFinite(this.width)&&isFinite(this.height)},xe.alloc=function(){var t=At.pop();return void 0===t?new xe:t},xe.free=function(t){At.push(t)},xe.prototype.isReal=xe.prototype.u,xe.prototype.equalsApprox=xe.prototype.Na,xe.prototype.equalTo=xe.prototype.fj,xe.prototype.equals=xe.prototype.w,xe.prototype.setTo=xe.prototype.Ig;var At=[];function ne(t,e,n,i){void 0===t?this.height=this.width=this.y=this.x=0:t instanceof ee?(n=t.x,t=t.y,e instanceof ee?(i=e.x,e=e.y,this.x=Math.min(n,i),this.y=Math.min(t,e),this.width=Math.abs(n-i),this.height=Math.abs(t-e)):e instanceof xe?(this.x=n,this.y=t,this.width=e.width,this.height=e.height):O("Incorrect arguments supplied to Rect constructor")):"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&(0<=n||isNaN(n))&&"number"==typeof i&&(0<=i||isNaN(i))?(this.x=t,this.y=e,this.width=n,this.height=i):O("Invalid arguments to Rect constructor: "+t+", "+e+", "+n+", "+i),this.s=!1}function Tt(t,e,n){t.width=e,t.height=n}function Ct(t){if("string"!=typeof t)return new ne;t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];i&&(n=parseFloat(i));for(var o=0;""===t[e];)e++;(i=t[e++])&&(o=parseFloat(i));for(var r=0;""===t[e];)e++;(i=t[e++])&&(r=parseFloat(i));for(var a=0;""===t[e];)e++;return(i=t[e++])&&(a=parseFloat(i)),new ne(n,o,r,a)}function Dt(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}function Et(t,e){return Ue.$(t.x,e.x)&&Ue.$(t.y,e.y)&&Ue.$(t.width,e.width)&&Ue.$(t.height,e.height)}function Ft(t,e,n,i,o){var r=t.width;return n+o<=-r?(t.x+=r/2,t.width=0):(t.x-=o,t.width+=n+o),e+i<=-(n=t.height)?(t.y+=n/2,t.height=0):(t.y-=e,t.height+=e+i),t}function Ot(t,e,n,i,o){var r=Math.max(t.x,e),a=Math.max(t.y,n);return e=Math.min(t.x+t.width,e+i),n=Math.min(t.y+t.height,n+o),t.x=r,t.y=a,t.width=Math.max(0,e-r),t.height=Math.max(0,n-a),t}function Bt(t,e){var n=t.width,i=t.x,o=e.x-10;return!(i>e.width+10+10+o||n+i<o)&&(n=t.height,t=t.y,i=e.y-10,!(t>e.height+10+10+i||n+t<i))}function ie(t,e,n,i,o){var r=Math.min(t.x,e),a=Math.min(t.y,n);return e=Math.max(t.x+t.width,e+i),n=Math.max(t.y+t.height,n+o),t.x=r,t.y=a,t.width=e-r,t.height=n-a,t}function Gt(t,e,n,i,o,r,a,s){return void 0===a&&(a=0),void 0===s&&(s=0),t<=o&&o+a<=t+n&&e<=r&&r+s<=e+i}function jt(t,e,n,i,o,r,a,s){return!(a+o<t||n+t<o)&&!(s+r<e||i+e<r)}xe.className="Size",xe.parse=_t,xe.stringify=Nt,xe.ZeroSize=ft=new xe(0,0).ca(),xe.OneSize=pt=new xe(1,1).ca(),xe.SixSize=mt=new xe(6,6).ca(),xe.EightSize=yt=new xe(8,8).ca(),xe.TenSize=vt=new xe(10,10).ca(),xe.InfiniteSize=wt=new xe(1/0,1/0).ca(),xe.NoSize=bt=new xe(NaN,NaN).ca(),xe.parse=_t,xe.stringify=Nt,(Bp=ne.prototype).assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},Bp.h=function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},Bp.Ig=function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},Bp.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},Bp.od=function(t){return this.x=t.x,this.y=t.y,this},Bp.VA=function(t){return this.width=t.width,this.height=t.height,this},ne.prototype.copy=function(){var t=new ne;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},(Bp=ne.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},Bp.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},Bp.freeze=function(){return this.s=!0,this},Bp.ea=function(){return Object.isFrozen(this)&&O("cannot thaw constant: "+this),this.s=!1,this},Bp.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},Bp.w=function(t){return t instanceof ne&&(this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height)},Bp.fj=function(t,e,n,i){return this.x===t&&this.y===e&&this.width===n&&this.height===i},Bp.Na=function(t){return Ue.A(this.x,t.x)&&Ue.A(this.y,t.y)&&Ue.A(this.width,t.width)&&Ue.A(this.height,t.height)},Bp.aa=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},Bp.De=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},Bp.contains=function(t,e,n,i){return void 0===n&&(n=0),void 0===i&&(i=0),this.x<=t&&t+n<=this.x+this.width&&this.y<=e&&e+i<=this.y+this.height},Bp.offset=function(t,e){return this.x+=t,this.y+=e,this},Bp.Ic=function(t,e){return Ft(this,e,t,e,t)},Bp.sq=function(t){return Ft(this,t.top,t.right,t.bottom,t.left)},Bp.Iw=function(t){return Ft(this,-t.top,-t.right,-t.bottom,-t.left)},Bp.nA=function(t,e,n,i){return Ft(this,t,e,n,i)},Bp.sA=function(t){return Ot(this,t.x,t.y,t.width,t.height)},Bp.aw=function(t,e,n,i){return Ot(this,t,e,n,i)},Bp.Lc=function(t){return this.bw(t.x,t.y,t.width,t.height)},Bp.bw=function(t,e,n,i){var o=this.width,r=this.x;return!(1/0!==o&&1/0!==n&&(o+=r,n+=t,isNaN(n)||isNaN(o)||n<r||o<t))&&(t=this.height,n=this.y,!(1/0!==t&&1/0!==i&&(t+=n,i+=e,isNaN(i)||isNaN(t)||i<n||t<e)))},Bp.Me=function(t){return ie(this,t.x,t.y,0,0)},Bp.Oc=function(t){return ie(this,t.x,t.y,t.width,t.height)},Bp.Pw=function(t,e,n,i){return void 0===n&&(n=0),void 0===i&&(i=0),ie(this,t,e,n,i)},Bp.Lk=function(t,e,n){return this.x=t-n.offsetX-n.x*this.width,this.y=e-n.offsetY-n.y*this.height,this},Bp.u=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},Bp.uA=function(){return 0===this.width&&0===this.height},ne.alloc=function(){var t=It.pop();return void 0===t?new ne:t},ne.allocAt=function(t,e,n,i){var o=It.pop();return void 0===o?new ne(t,e,n,i):o.h(t,e,n,i)},ne.free=function(t){It.push(t)},s.Object.defineProperties(ne.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new ee(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new xe(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new ee(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),ne.prototype.isEmpty=ne.prototype.uA,ne.prototype.isReal=ne.prototype.u,ne.intersectsLineSegment=function(t,e,n,i,o,r,a,s){return Ue.Ay(t,e,n,i,o,r,a,s)},ne.prototype.setSpot=ne.prototype.Lk,ne.prototype.union=ne.prototype.Pw,ne.prototype.unionRect=ne.prototype.Oc,ne.prototype.unionPoint=ne.prototype.Me,ne.prototype.intersects=ne.prototype.bw,ne.prototype.intersectsRect=ne.prototype.Lc,ne.prototype.intersect=ne.prototype.aw,ne.prototype.intersectRect=ne.prototype.sA,ne.prototype.grow=ne.prototype.nA,ne.prototype.subtractMargin=ne.prototype.Iw,ne.prototype.addMargin=ne.prototype.sq,ne.prototype.inflate=ne.prototype.Ic,ne.prototype.containsRect=ne.prototype.De,ne.prototype.containsPoint=ne.prototype.aa,ne.prototype.equalsApprox=ne.prototype.Na,ne.prototype.equalTo=ne.prototype.fj,ne.prototype.equals=ne.prototype.w,ne.prototype.setSize=ne.prototype.VA,ne.prototype.setPoint=ne.prototype.od,ne.prototype.setTo=ne.prototype.Ig;var zt,Rt=null,It=[];function Vt(t,e,n,i){void 0===t?this.left=this.bottom=this.right=this.top=0:void 0===e?this.left=this.bottom=this.right=this.top=t:void 0===n?(this.top=t,this.right=e,this.bottom=t,this.left=e):void 0!==i?(this.top=t,this.right=e,this.bottom=n,this.left=i):O("Invalid arguments to Margin constructor: "+t+", "+e+", "+n+", "+i),this.s=!1}function Ut(t){if("string"!=typeof t)return new Vt;t=t.split(" ");for(var e=0,n=NaN;""===t[e];)e++;var i=t[e++];if(i&&(n=parseFloat(i)),isNaN(n))return new Vt;for(var o=NaN;""===t[e];)e++;if((i=t[e++])&&(o=parseFloat(i)),isNaN(o))return new Vt(n);for(var r=NaN;""===t[e];)e++;if((i=t[e++])&&(r=parseFloat(i)),isNaN(r))return new Vt(n,o);for(var a=NaN;""===t[e];)e++;return(i=t[e++])&&(a=parseFloat(i)),isNaN(a)?new Vt(n,o):new Vt(n,o,r,a)}function qt(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}ne.className="Rect",ne.parse=Ct,ne.stringify=Dt,ne.contains=Gt,ne.intersects=jt,ne.ZeroRect=zt=new ne(0,0,0,0).ca(),ne.NoRect=Rt=new ne(NaN,NaN,NaN,NaN).ca(),ne.parse=Ct,ne.stringify=Dt,ne.contains=Gt,ne.intersects=jt,Vt.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Vt.prototype.Ig=function(t,e,n,i){return this.top=t,this.right=e,this.bottom=n,this.left=i,this},Vt.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Vt.prototype.copy=function(){var t=new Vt;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},(Bp=Vt.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},Bp.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},Bp.freeze=function(){return this.s=!0,this},Bp.ea=function(){return Object.isFrozen(this)&&O("cannot thaw constant: "+this),this.s=!1,this},Bp.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},Bp.w=function(t){return t instanceof Vt&&(this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left)},Bp.fj=function(t,e,n,i){return this.top===t&&this.right===e&&this.bottom===n&&this.left===i},Bp.Na=function(t){return Ue.A(this.top,t.top)&&Ue.A(this.right,t.right)&&Ue.A(this.bottom,t.bottom)&&Ue.A(this.left,t.left)},Bp.u=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Vt.alloc=function(){var t=Oe.pop();return void 0===t?new Vt:t},Vt.free=function(t){Oe.push(t)},Vt.prototype.isReal=Vt.prototype.u,Vt.prototype.equalsApprox=Vt.prototype.Na,Vt.prototype.equalTo=Vt.prototype.fj,Vt.prototype.equals=Vt.prototype.w,Vt.prototype.setTo=Vt.prototype.Ig;var Ht,Yt,oe,Kt,Xt,Wt,$t,Jt,Zt,Qt,te,re,ae,se,he,ue,le,de,ce,ge,fe,pe,me,ye,ve,we,Pe,ke,Le,Me,_e,Ne,Ae,Te,Ce,De,Ee=null,Fe=null,Oe=[];function Be(t,e,n,i){void 0===t?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=e,this.offsetX=n,this.offsetY=i),this.s=!1}function Ge(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function je(t){if("string"!=typeof t)return new Be;if("None"===(t=t.trim()))return Ht;if("TopLeft"===t)return Yt;if("Top"===t||"TopCenter"===t||"MiddleTop"===t)return oe;if("TopRight"===t)return Kt;if("Left"===t||"LeftCenter"===t||"MiddleLeft"===t)return Xt;if("Center"===t)return Wt;if("Right"===t||"RightCenter"===t||"MiddleRight"===t)return $t;if("BottomLeft"===t)return Jt;if("Bottom"===t||"BottomCenter"===t||"MiddleBottom"===t)return Zt;if("BottomRight"===t)return Qt;if("TopSide"===t)return te;if("LeftSide"===t)return re;if("RightSide"===t)return ae;if("BottomSide"===t)return se;if("TopBottomSides"===t)return he;if("LeftRightSides"===t)return ue;if("TopLeftSides"===t)return le;if("TopRightSides"===t)return de;if("BottomLeftSides"===t)return ce;if("BottomRightSides"===t)return ge;if("NotTopSide"===t)return fe;if("NotLeftSide"===t)return pe;if("NotRightSide"===t)return me;if("NotBottomSide"===t)return ye;if("AllSides"===t)return ve;if("Default"===t)return we;t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var i=t[e++];void 0!==i&&0<i.length&&(n=parseFloat(i));for(var o=0;""===t[e];)e++;void 0!==(i=t[e++])&&0<i.length&&(o=parseFloat(i));for(var r=0;""===t[e];)e++;void 0!==(i=t[e++])&&0<i.length&&(r=parseFloat(i));for(var a=0;""===t[e];)e++;return void 0!==(i=t[e++])&&0<i.length&&(a=parseFloat(i)),new Be(n,o,r,a)}function ze(t){return t.ib()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}Vt.className="Margin",Vt.parse=Ut,Vt.stringify=qt,Vt.ZeroMargin=Ee=new Vt(0,0,0,0).ca(),Vt.TwoMargin=Fe=new Vt(2,2,2,2).ca(),Vt.parse=Ut,Vt.stringify=qt,Be.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},Be.prototype.Ig=function(t,e,n,i){return this.x=t,this.y=e,this.offsetX=n,this.offsetY=i,this},Be.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},Be.prototype.copy=function(){var t=new Be;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},(Bp=Be.prototype).ca=function(){return this.s=!0,Object.freeze(this),this},Bp.G=function(){return this.s||Object.isFrozen(this)?this:this.copy().freeze()},Bp.freeze=function(){return this.s=!0,this},Bp.ea=function(){return Object.isFrozen(this)&&O("cannot thaw constant: "+this),this.s=!1,this},Bp.toString=function(){return this.ib()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.w(Ht)?"None":this.w(Yt)?"TopLeft":this.w(oe)?"Top":this.w(Kt)?"TopRight":this.w(Xt)?"Left":this.w(Wt)?"Center":this.w($t)?"Right":this.w(Jt)?"BottomLeft":this.w(Zt)?"Bottom":this.w(Qt)?"BottomRight":this.w(te)?"TopSide":this.w(re)?"LeftSide":this.w(ae)?"RightSide":this.w(se)?"BottomSide":this.w(he)?"TopBottomSides":this.w(ue)?"LeftRightSides":this.w(le)?"TopLeftSides":this.w(de)?"TopRightSides":this.w(ce)?"BottomLeftSides":this.w(ge)?"BottomRightSides":this.w(fe)?"NotTopSide":this.w(pe)?"NotLeftSide":this.w(me)?"NotRightSide":this.w(ye)?"NotBottomSide":this.w(ve)?"AllSides":this.w(we)?"Default":"None"},Bp.w=function(t){return t instanceof Be&&((this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY)},Bp.kw=function(){return new Be(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},Bp.Df=function(t){if(!this.Mc())return!1;if(!t.Mc())if(t.w(Pe))t=re;else if(t.w(ke))t=ae;else if(t.w(Le))t=te;else{if(!t.w(Me))return!1;t=se}return t=t.offsetY,(this.offsetY&t)===t},Bp.ib=function(){return!isNaN(this.x)&&!isNaN(this.y)},Bp.mc=function(){return isNaN(this.x)||isNaN(this.y)},Bp.Mc=function(){return isNaN(this.x)&&isNaN(this.y)&&1===this.offsetX&&0!==this.offsetY},Bp.Vt=function(){return isNaN(this.x)&&isNaN(this.y)&&0===this.offsetX&&0===this.offsetY},Bp.Mb=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY},Be.alloc=function(){var t=Re.pop();return void 0===t?new Be:t},Be.free=function(t){Re.push(t)},Be.prototype.isDefault=Be.prototype.Mb,Be.prototype.isNone=Be.prototype.Vt,Be.prototype.isSide=Be.prototype.Mc,Be.prototype.isNoSpot=Be.prototype.mc,Be.prototype.isSpot=Be.prototype.ib,Be.prototype.includesSide=Be.prototype.Df,Be.prototype.opposite=Be.prototype.kw,Be.prototype.equals=Be.prototype.w,Be.prototype.setTo=Be.prototype.Ig;var Re=[];function Ie(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}Be.className="Spot",Be.parse=je,Be.stringify=ze,Be.None=Ht=Ge(new Be(0,0,0,0),0).ca(),Be.Default=we=Ge(new Be(0,0,-1,0),-1).ca(),Be.TopLeft=Yt=new Be(0,0,0,0).ca(),Be.TopCenter=oe=new Be(.5,0,0,0).ca(),Be.TopRight=Kt=new Be(1,0,0,0).ca(),Be.LeftCenter=Xt=new Be(0,.5,0,0).ca(),Be.Center=Wt=new Be(.5,.5,0,0).ca(),Be.RightCenter=$t=new Be(1,.5,0,0).ca(),Be.BottomLeft=Jt=new Be(0,1,0,0).ca(),Be.BottomCenter=Zt=new Be(.5,1,0,0).ca(),Be.BottomRight=Qt=new Be(1,1,0,0).ca(),Be.MiddleTop=_e=oe,Be.MiddleLeft=Ne=Xt,Be.MiddleRight=Ae=$t,Be.MiddleBottom=Te=Zt,Be.Top=Le=oe,Be.Left=Pe=Xt,Be.Right=ke=$t,Be.Bottom=Me=Zt,Be.TopSide=te=Ge(new Be(0,0,1,1),1).ca(),Be.LeftSide=re=Ge(new Be(0,0,1,2),1).ca(),Be.RightSide=ae=Ge(new Be(0,0,1,4),1).ca(),Be.BottomSide=se=Ge(new Be(0,0,1,8),1).ca(),Be.TopBottomSides=he=Ge(new Be(0,0,1,9),1).ca(),Be.LeftRightSides=ue=Ge(new Be(0,0,1,6),1).ca(),Be.TopLeftSides=le=Ge(new Be(0,0,1,3),1).ca(),Be.TopRightSides=de=Ge(new Be(0,0,1,5),1).ca(),Be.BottomLeftSides=ce=Ge(new Be(0,0,1,10),1).ca(),Be.BottomRightSides=ge=Ge(new Be(0,0,1,12),1).ca(),Be.NotTopSide=fe=Ge(new Be(0,0,1,14),1).ca(),Be.NotLeftSide=pe=Ge(new Be(0,0,1,13),1).ca(),Be.NotRightSide=me=Ge(new Be(0,0,1,11),1).ca(),Be.NotBottomSide=ye=Ge(new Be(0,0,1,7),1).ca(),Be.AllSides=ve=Ge(new Be(0,0,1,15),1).ca(),Ce=new Be(.156,.156).ca(),De=new Be(.844,.844).ca(),Be.parse=je,Be.stringify=ze,Ie.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},Ie.prototype.copy=function(){var t=new Ie;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},(Bp=Ie.prototype).toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},Bp.w=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},Bp.Tt=function(){return 0===this.dx&&0===this.dy&&1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22},Bp.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},Bp.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,n=this.m12*t.m11+this.m22*t.m12,i=this.m11*t.m21+this.m21*t.m22,o=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=n,this.m21=i,this.m22=o,this},Bp.iw=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),n=t.m22*e,i=-t.m12*e,o=-t.m21*e,r=t.m11*e,a=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*n+this.m21*i,n=this.m12*n+this.m22*i,i=this.m11*o+this.m21*r,o=this.m12*o+this.m22*r,this.dx=this.m11*a+this.m21*t+this.dx,this.dy=this.m12*a+this.m22*t+this.dy,this.m11=e,this.m12=n,this.m21=i,this.m22=o,this},Bp.St=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,n=-this.m21*t,i=this.m11*t,o=t*(this.m21*this.dy-this.m22*this.dx),r=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=n,this.m22=i,this.dx=o,this.dy=r,this},Ie.prototype.rotate=function(t,e,n){if(360<=t?t-=360:t<0&&(t+=360),0===t)return this;var i;this.translate(e,n),i=90===t?(t=0,1):180===t?(t=-1,0):270===t?(t=0,-1):(i=t*Math.PI/180,t=Math.cos(i),Math.sin(i));var o=this.m12*t+this.m22*i,r=this.m11*-i+this.m21*t,a=this.m12*-i+this.m22*t;return this.m11=this.m11*t+this.m21*i,this.m12=o,this.m21=r,this.m22=a,this.translate(-e,-n),this},(Bp=Ie.prototype).translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},Bp.scale=function(t,e){return void 0===e&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},Bp.sa=function(t){var e=t.x,n=t.y;return t.h(e*this.m11+n*this.m21+this.dx,e*this.m12+n*this.m22+this.dy)},Bp.Zd=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=t.x,i=t.y;return t.h(n*this.m22*e+i*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+i*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},Bp.Ow=function(t){var e=t.x,n=t.y,i=e+t.width,o=n+t.height,r=this.m11,a=this.m12,s=this.m21,h=this.m22,u=this.dx,l=this.dy,d=e*r+n*s+u,c=e*a+n*h+l,g=i*r+n*s+u,f=i*a+n*h+l,n=e*r+o*s+u,e=e*a+o*h+l,r=i*r+o*s+u,i=i*a+o*h+l,o=Math.min(d,g),d=Math.max(d,g),g=Math.min(c,f),c=Math.max(c,f);return o=Math.min(o,n),d=Math.max(d,n),g=Math.min(g,e),c=Math.max(c,e),o=Math.min(o,r),d=Math.max(d,r),g=Math.min(g,i),c=Math.max(c,i),t.h(o,g,d-o,c-g),t},Ie.alloc=function(){var t=Ve.pop();return void 0===t?new Ie:t},Ie.free=function(t){Ve.push(t)},Ie.prototype.transformRect=Ie.prototype.Ow,Ie.prototype.invertedTransformPoint=Ie.prototype.Zd,Ie.prototype.transformPoint=Ie.prototype.sa,Ie.prototype.invert=Ie.prototype.St,Ie.prototype.multiplyInverted=Ie.prototype.iw,Ie.prototype.isIdentity=Ie.prototype.Tt,Ie.prototype.equals=Ie.prototype.w;var Ve=[];Ie.className="Transform",Ie.xF="54a702f3e53909c447824c6706603faf4c";var Ue={eB:"7da71ca0ad381e90",Kg:(Math.sqrt(2)-1)/3*4,hx:null,sqrt:function(t){if(t<=0)return 0;var e=Ue.hx;if(null===e){e=[];for(var n=0;n<=2e3;n++)e[n]=Math.sqrt(n);Ue.hx=e}return t<1?(n=1/t)<=2e3?1/e[0|n]:Math.sqrt(t):t<=2e3?e[0|t]:Math.sqrt(t)},A:function(t,e){return(t-=e)<.5&&-.5<t},$:function(t,e){return(t-=e)<5e-8&&-5e-8<t},Nb:function(t,e,n,i,o,r,a){var s,h,u,l;if(o<=0&&(o=1e-6),h=t<n?(s=t,n):(s=n,t),l=e<i?(u=e,i):(u=i,e),t===n)return u<=a&&a<=l&&t-o<=r&&r<=t+o;if(e===i)return s<=r&&r<=h&&e-o<=a&&a<=e+o;if(h+=o,(s-=o)<=r&&r<=h&&(l+=o,(u-=o)<=a&&a<=l))if(l-u<h-s){if(!(o<t-n||o<n-t))return!0;if((r=(i-e)/(n-t)*(r-t)+e)-o<=a&&a<=r+o)return!0}else{if(!(o<e-i||o<i-e))return!0;if((a=(n-t)/(i-e)*(a-e)+t)-o<=r&&r<=a+o)return!0}return!1},yt:function(t,e,n,i,o,r,a,s,h,u,l,d){if(Ue.Nb(t,e,a,s,d,n,i)&&Ue.Nb(t,e,a,s,d,o,r))return Ue.Nb(t,e,a,s,d,u,l);var c=(t+n)/2,g=(e+i)/2,f=(n+o)/2,p=(i+r)/2,m=((i=(c+f)/2)+(f=(f+(o=(o+a)/2))/2))/2,y=((n=(g+p)/2)+(p=(p+(r=(r+s)/2))/2))/2;return Ue.yt(t,e,c,g,i,n,m,y,h,u,l,d)||Ue.yt(m,y,f,p,o,r,a,s,h,u,l,d)},sz:function(t,e,n,i,o,r,a,s,h){var u=(n+o)/2,l=(i+r)/2;return h.h((((t+n)/2+u)/2+(u+(o+a)/2)/2)/2,(((e+i)/2+l)/2+(l+(r+s)/2)/2)/2),h},rz:function(t,e,n,i,o,r,a,s){var h=(n+o)/2,u=(i+r)/2;return gt(((t+n)/2+h)/2,((e+i)/2+u)/2,(h+(o+a)/2)/2,(u+(r+s)/2)/2)},pm:function(t,e,n,i,o,r,a,s,h,u){var l,d,c,g,f,p;return Ue.Nb(t,e,a,s,h,n,i)&&Ue.Nb(t,e,a,s,h,o,r)?(ie(u,t,e,0,0),ie(u,a,s,0,0)):(d=(e+i)/2,g=(i+r)/2,f=((i=((l=(t+n)/2)+(c=(n+o)/2))/2)+(c=(c+(o=(o+a)/2))/2))/2,p=((n=(d+g)/2)+(g=(g+(r=(r+s)/2))/2))/2,Ue.pm(t,e,l,d,i,n,f,p,h,u),Ue.pm(f,p,c,g,o,r,a,s,h,u)),u},Ce:function(t,e,n,i,o,r,a,s,h,u){var l,d,c,g,f,p;return Ue.Nb(t,e,a,s,h,n,i)&&Ue.Nb(t,e,a,s,h,o,r)?(0===u.length&&(u.push(t),u.push(e)),u.push(a),u.push(s)):(d=(e+i)/2,g=(i+r)/2,f=((i=((l=(t+n)/2)+(c=(n+o)/2))/2)+(c=(c+(o=(o+a)/2))/2))/2,p=((n=(d+g)/2)+(g=(g+(r=(r+s)/2))/2))/2,Ue.Ce(t,e,l,d,i,n,f,p,h,u),Ue.Ce(f,p,c,g,o,r,a,s,h,u)),u},nw:function(t,e,n,i,o,r,a,s,h,u){if(Ue.Nb(t,e,o,r,u,n,i))return Ue.Nb(t,e,o,r,u,s,h);var l=(t+n)/2,d=(e+i)/2,c=(l+(n=(n+o)/2))/2,g=(d+(i=(i+r)/2))/2;return Ue.nw(t,e,l,d,c,g,a,s,h,u)||Ue.nw(c,g,n,i,o,r,a,s,h,u)},tB:function(t,e,n,i,o,r,a){return a.h(((t+n)/2+(n+o)/2)/2,((e+i)/2+(i+r)/2)/2),a},mw:function(t,e,n,i,o,r,a,s){var h,u,l,d;return Ue.Nb(t,e,o,r,a,n,i)?(ie(s,t,e,0,0),ie(s,o,r,0,0)):(l=((h=(t+n)/2)+(n=(n+o)/2))/2,d=((u=(e+i)/2)+(i=(i+r)/2))/2,Ue.mw(t,e,h,u,l,d,a,s),Ue.mw(l,d,n,i,o,r,a,s)),s},Wq:function(t,e,n,i,o,r,a,s){var h,u,l,d;return Ue.Nb(t,e,o,r,a,n,i)?(0===s.length&&(s.push(t),s.push(e)),s.push(o),s.push(r)):(l=((h=(t+n)/2)+(n=(n+o)/2))/2,d=((u=(e+i)/2)+(i=(i+r)/2))/2,Ue.Wq(t,e,h,u,l,d,a,s),Ue.Wq(l,d,n,i,o,r,a,s)),s},uq:function(t,e,n,i,o,r,a,s,h,u,l,d,c,g){if(Ue.Nb(t,e,a,s,c,n,i)&&Ue.Nb(t,e,a,s,c,o,r)){if(t<h&&a<h&&t<l&&a<l||h<t&&h<a&&l<t&&l<a||e<u&&s<u&&e<d&&s<d||u<e&&u<s&&d<e&&d<s)return!1;var f=(t-a)*(u-d)-(e-s)*(h-l);if(0===f)return!1;if(c=((t*s-e*a)*(h-l)-(t-a)*(h*d-u*l))/f,f=((t*s-e*a)*(u-d)-(e-s)*(h*d-u*l))/f,(l<h?h-l:l-h)<(d<u?u-d:d-u)){if(e<s?a=e:(a=s,s=e),1e-5+f<a||s+1e-5<f)return!1}else if(t<a?s=t:(s=a,a=t),1e-5+c<s||a+1e-5<c)return!1;return g.h(c,f),!0}var p=(e+i)/2,m=(n+o)/2,y=(i+r)/2,v=((i=((f=(t+n)/2)+m)/2)+(m=(m+(o=(o+a)/2))/2))/2,w=((n=(p+y)/2)+(y=(y+(r=(r+s)/2))/2))/2,b=(l-h)*(l-h)+(d-u)*(d-u),S=!1,x=0,P=0;return Ue.uq(t,e,f,p,i,n,v,w,h,u,l,d,c,g)&&((t=(g.x-h)*(g.x-h)+(g.y-u)*(g.y-u))<b&&(b=t,S=!0,x=g.x,P=g.y)),Ue.uq(v,w,m,y,o,r,a,s,h,u,l,d,c,g)&&(g.x-h)*(g.x-h)+(g.y-u)*(g.y-u)<b&&(S=!0,x=g.x,P=g.y),S&&(g.x=x,g.y=P),S},vq:function(t,e,n,i,o,r,a,s,h,u,l,d,c){var g=0;if(Ue.Nb(t,e,a,s,c,n,i)&&Ue.Nb(t,e,a,s,c,o,r)){if(0===(c=(t-a)*(u-d)-(e-s)*(h-l)))return g;var f=((t*s-e*a)*(h-l)-(t-a)*(h*d-u*l))/c,p=((t*s-e*a)*(u-d)-(e-s)*(h*d-u*l))/c;if(l<=f)return g;if((l<h?h-l:l-h)<(d<u?u-d:d-u)){if(e<s?(t=e,e=s):t=s,p<t||e<p)return g}else if(t<a?(e=t,t=a):e=a,f<e||t<f)return g;0<c?g++:c<0&&g--}else{p=(e+i)/2;var m=(n+o)/2,y=(i+r)/2,v=((i=((f=(t+n)/2)+m)/2)+(m=(m+(o=(o+a)/2))/2))/2,w=((n=(p+y)/2)+(y=(y+(r=(r+s)/2))/2))/2;g+=Ue.vq(t,e,f,p,i,n,v,w,h,u,l,d,c),g+=Ue.vq(v,w,m,y,o,r,a,s,h,u,l,d,c)}return g},Qh:function(t,e,n,i,o,r,a){return Ue.$(t,n)?(e<i?(n=e,e=i):n=i,r<n?(a.h(t,n),!1):e<r?(a.h(t,e),!1):(a.h(t,r),!0)):Ue.$(e,i)?(t<n?(i=t,t=n):i=n,o<i?(a.h(i,e),!1):t<o?(a.h(t,e),!1):(a.h(o,e),!0)):(o=((t-o)*(t-n)+(e-r)*(e-i))/((n-t)*(n-t)+(i-e)*(i-e)))<-5e-6?(a.h(t,e),!1):1.000005<o?(a.h(n,i),!1):(a.h(t+o*(n-t),e+o*(i-e)),!0)},Ie:function(t,e,n,i,o,r,a,s,h){return Ue.A(t,n)&&Ue.A(e,i)?(h.h(t,e),!1):Ue.$(o,a)?Ue.$(t,n)?(Ue.Qh(t,e,n,i,o,r,h),!1):Ue.Qh(t,e,n,i,o,(i-e)/(n-t)*(o-t)+e,h):(s=(s-r)/(a-o),Ue.$(t,n)?(n=s*(t-o)+r,e<i?(o=e,e=i):o=i,n<o?(h.h(t,o),!1):e<n?(h.h(t,e),!1):(h.h(t,n),!0)):(a=(i-e)/(n-t),Ue.$(s,a)?(Ue.Qh(t,e,n,i,o,r,h),!1):(o=(a*t-s*o+r-e)/(a-s),Ue.$(a,0)?(t<n?(i=t,t=n):i=n,o<i?(h.h(i,e),!1):t<o?(h.h(t,e),!1):(h.h(o,e),!0)):Ue.Qh(t,e,n,i,o,a*(o-t)+e,h))))},rB:function(t,e,n,i,o){return Ue.Ie(n.x,n.y,i.x,i.y,t.x,t.y,e.x,e.y,o)},pB:function(i,o,t,e,n,r,a,s,h,u){function l(t,e){var n=(t-i)*(t-i)+(e-o)*(e-o);n<d&&(d=n,h.h(t,e))}var d=1/0;l(h.x,h.y);var c=0,g=0,c=((n<a?(c=n,a):(c=a,n))-c)/2+u;if(u=((r<s?(g=n,a):(g=a,n))-g)/2+u,n=(n+a)/2,r=(r+s)/2,0===c||0===u)return h;if((i<t?t-i:i-t)<.5){if((c=1-(t-n)*(t-n)/(c*c))<0)return h;e=-u*(c=Math.sqrt(c))+r,l(t,u*c+r),l(t,e)}else{if((c=(s=2*(t=(e-o)/(t-i))*(o-t*i)/(u*u)-2*t*r/(u*u)-2*n/(c*c))*s-4*(e=1/(c*c)+t*t/(u*u))*(2*t*i*r/(u*u)-2*o*r/(u*u)+r*r/(u*u)+n*n/(c*c)-1+(o-t*i)*(o-t*i)/(u*u)))<0)return h;l(u=(-s+(c=Math.sqrt(c)))/(2*e),t*u-t*i+o),l(c=(-s-c)/(2*e),t*c-t*i+o)}return h},bd:function(t,e,n,i,o,r,a,s,h){var u,l=1e21,d=t,c=e;return!Ue.Ie(t,e,t,i,o,r,a,s,h)||(u=(h.x-o)*(h.x-o)+(h.y-r)*(h.y-r))<l&&(l=u,d=h.x,c=h.y),Ue.Ie(n,e,n,i,o,r,a,s,h)&&((u=(h.x-o)*(h.x-o)+(h.y-r)*(h.y-r))<l&&(l=u,d=h.x,c=h.y)),Ue.Ie(t,e,n,e,o,r,a,s,h)&&((e=(h.x-o)*(h.x-o)+(h.y-r)*(h.y-r))<l&&(l=e,d=h.x,c=h.y)),Ue.Ie(t,i,n,i,o,r,a,s,h)&&((t=(h.x-o)*(h.x-o)+(h.y-r)*(h.y-r))<l&&(l=t,d=h.x,c=h.y)),h.h(d,c),l<1e21},oB:function(t,e,n,i,o,r,a,s,h){return a=o-a,o=0===(n=t-n)||0===a?0===n?(e=(r-s)/a)*(s=t)+(r-e*o):(r=(e-i)/n)*(s=o)+(e-r*t):(i=(e-i)/n)*(s=(r-(s=(r-s)/a)*o-(t=e-i*t))/(i-s))+t,h.h(s,o),h},Qt:function(t,e,n){return Ue.Ay(t.x,t.y,t.width,t.height,e.x,e.y,n.x,n.y)},Ay:function(t,e,n,i,o,r,a,s){var h=t+n,u=e+i;return o===a?(r<s?(a=r,r=s):a=s,t<=o&&o<=h&&a<=u&&e<=r):r===s?(o<a?(s=o,o=a):s=a,e<=r&&r<=u&&s<=h&&t<=o):!!(Gt(t,e,n,i,o,r)||Gt(t,e,n,i,a,s)||Ue.Mq(t,e,h,e,o,r,a,s)||Ue.Mq(h,e,h,u,o,r,a,s)||Ue.Mq(h,u,t,u,o,r,a,s)||Ue.Mq(t,u,t,e,o,r,a,s))},Mq:function(t,e,n,i,o,r,a,s){return Ue.Bt(t,e,n,i,o,r)*Ue.Bt(t,e,n,i,a,s)<=0&&Ue.Bt(o,r,a,s,t,e)*Ue.Bt(o,r,a,s,n,i)<=0},Bt:function(t,e,n,i,o,r){return n-=t,0===(r=(t=o-t)*(i-=e)-(e=r-e)*n)&&(0<(r=t*n+e*i)&&((r=(t-n)*n+(e-i)*i)<0&&(r=0))),r<0?-1:0<r?1:0},Tq:function(t){return t<0&&(t+=360),360<=t&&(t-=360),t},by:function(t,e,n,i,o,r){var a=Math.PI;r||(i*=a/180,o*=a/180);var s=o<i?-1:1;r=[];var h=a/2,u=i;if((i=Math.min(2*a,Math.abs(o-i)))<1e-5)return h=u+s*Math.min(i,h),s=t+n*Math.cos(u),u=e+n*Math.sin(u),t+=n*Math.cos(h),e+=n*Math.sin(h),n=(s+t)/2,h=(u+e)/2,r.push([s,u,n,h,n,h,t,e]),r;for(;1e-5<i;)o=u+s*Math.min(i,h),r.push(Ue.Cz(n,u,o,t,e)),i-=Math.abs(o-u),u=o;return r},Cz:function(t,e,n,i,o){var r=(n-e)/2,a=t*Math.cos(r),s=a*a+(l=-(u=t*Math.sin(r)))*l,h=s+a*a+l*u,u=a-(s=4/3*(Math.sqrt(2*s*h)-h)/(a*u-l*a))*l,l=-(a=l+s*a);return s=r+e,r=Math.cos(s),s=Math.sin(s),[i+t*Math.cos(e),o+t*Math.sin(e),i+u*r-a*s,o+u*s+a*r,i+u*r-l*s,o+u*s+l*r,i+t*Math.cos(n),o+t*Math.sin(n)]},Eq:function(t,e,n,i,o,r,a){n=(n=Math.floor((t-n)/o)*o+n)+o-t<o/2?n+o:n;return t=(i=Math.floor((e-i)/r)*r+i)+r-e<r/2?i+r:i,a.h(n,t),a},qy:function(t,e){var n,i=Math.max(t,e);for(t=Math.min(t,e);e=i%t,i=n=t,t=e,0<e;);return n},Hz:function(t,e,n,i){var o,r=n<0,a=i<0,s=t<e?(o=1,0):(o=0,1),h=0===o?t:e,u=0===o?n:i;return(0===o?r:a)&&(u=-u),n=0===(o=s)?n:i,(0===o?r:a)&&(n=-n),Ue.Iz(h,0===o?t:e,u,n,0,0)},Iz:function(t,e,n,i,o,r){if(0<i)if(0<n){o=t*t,t*=n;var a=e*i,s=a-(r=e*e),h=-r+Math.sqrt(t*t+a*a);e=s;for(var u=0;u<9999999999&&((e=.5*(s+h))!==s&&e!==h);++u){var l=t/(e+o),d=a/(e+r);if(0<(l=l*l+d*d-1))s=e;else{if(!(l<0))break;h=e}}n=o*n/(e+o)-n,i=r*i/(e+r)-i,n=Math.sqrt(n*n+i*i)}else n=Math.abs(i-e);else n=(r=t*n)<(i=t*t-e*e)?(i=r/i,r=e*Math.sqrt(Math.abs(1-i*i)),n=t*i-n,Math.sqrt(n*n+r*r)):Math.abs(n-t);return n},Oe:new I,bn:new I,Uh:new I,Vh:0};function qe(t){J(this),this.s=!1,void 0===t&&(t=rn),this.pa=t,this.nc=this.gc=this.$c=this.Zc=0,this.Gj=new X,this.Zr=this.Gj.Aa,this.Hr=(new ne).freeze(),this.qa=!0,this.jn=this.Uk=null,this.kn=NaN,this.nf=Yt,this.pf=Qt,this.wl=this.xl=NaN,this.Rf=Fr}function He(t,e){return t.type===en&&e.type===rn&&!!(1===e.figures.count&&(1===(e=e.figures.L(0)).segments.count&&Ue.A(t.startX,e.startX)&&Ue.A(t.startY,e.startY)&&((e=e.segments.L(0)).type===dn&&Ue.A(t.endX,e.endX)&&Ue.A(t.endY,e.endY))))}function Ye(t){return t.toString()}function Ke(t,e){function n(){return L-1<=b||null!==h[b+1].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)}function i(){return h[++b]}function o(){var t=new ee(parseFloat(i()),parseFloat(i()));return S===S.toLowerCase()&&(t.x=k.x+t.x,t.y=k.y+t.y),t}function r(){return k=o()}function a(){return P=o()}function s(){var t=x.toLowerCase();return"c"!==t&&"s"!==t&&"q"!==t&&"t"!==t?k:new ee(2*k.x-P.x,2*k.y-P.y)}void 0===e&&(e=!1);var h=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/,/gm," ")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^\s])/gm,"$1 $2")).replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2")).replace(/[\s\r\t\n]+/gm," ")).replace(/^\s+|\s+$/g,"")).split(" ");for(t=0;t<h.length;t++){var u=h[t];if(null!==u.match(/(\.[0-9]*)(\.)/gm)){for(var l=be(),d="",c=!1,g=0;g<u.length;g++){var f=u[g];"."!==f||c?"."===f?(l.push(d),d="."):d+=f:(c=!0,d+=f)}for(l.push(d),h.splice(t,1),u=0;u<l.length;u++)h.splice(t+u,0,l[u]);t+=l.length-1,Se(l)}}var p,m,y,v,w,b=-1,S="",x="",l=new ee(0,0),P=new ee(0,0),k=new ee(0,0),L=h.length;for(t=Du(null),c=!(d=u=!1),g=null;!(L-1<=b);)if(x=S,""!==(S=i()))switch(S.toUpperCase()){case"X":d=u=!(c=!0);break;case"M":for(g=r(),null===t.hc||!0===c?(Au(t,g.x,g.y,u,!d),c=!1):t.moveTo(g.x,g.y),l=k;!n();)g=r(),t.lineTo(g.x,g.y);break;case"L":for(;!n();)g=r(),t.lineTo(g.x,g.y);break;case"H":for(;!n();)k=new ee((S===S.toLowerCase()?k.x:0)+parseFloat(i()),k.y),t.lineTo(k.x,k.y);break;case"V":for(;!n();)k=new ee(k.x,(S===S.toLowerCase()?k.y:0)+parseFloat(i())),t.lineTo(k.x,k.y);break;case"C":for(;!n();){g=o(),f=a();var M=r();Tu(t,g.x,g.y,f.x,f.y,M.x,M.y)}break;case"S":for(;!n();)g=s(),f=a(),M=r(),Tu(t,g.x,g.y,f.x,f.y,M.x,M.y);break;case"Q":for(;!n();)g=a(),f=r(),Cu(t,g.x,g.y,f.x,f.y);break;case"T":for(;!n();)P=g=s(),f=r(),Cu(t,g.x,g.y,f.x,f.y);break;case"B":for(;!n();){g=parseFloat(i()),f=parseFloat(i()),M=parseFloat(i());var _=parseFloat(i()),N=parseFloat(i()),A=N,T=!1;n()||(A=parseFloat(i()),n()||(T=0!==parseFloat(i()))),S===S.toLowerCase()&&(M+=k.x,_+=k.y),t.arcTo(g,f,M,_,N,A,T)}break;case"A":for(;!n();)g=Math.abs(parseFloat(i())),f=Math.abs(parseFloat(i())),M=parseFloat(i()),N=_=!1,T=A=0,A=1===(A=i()).length?(_=!!parseFloat(A),N=!!parseFloat(i()),parseFloat(i())):2===A.length?(_=!!parseFloat(A[0]),N=!!parseFloat(A[1]),parseFloat(i())):(_=!!parseFloat(A[0]),N=!!parseFloat(A[1]),parseFloat(A.slice(2))),T=parseFloat(i()),S===S.toLowerCase()&&(A=k.x+A,T=k.y+T),k.h(A,T),y=t,(w=void 0)===w&&(w=!1),v=new sn(pn,A,T,v=g,f,M,_,N),w&&v.close(),y.hc.segments.add(v);break;case"Z":m=void 0,0<(m=(p=t).hc.segments.length)&&p.hc.segments.L(m-1).close(),k=l;break;case"F":for(g="",f=1;h[b+f];)if(null!==h[b+f].match(/[Uu]/))f++;else{if(null!==h[b+f].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)){g=h[b+f];break}f++}g.match(/[Mm]/)?u=!0:0<t.hc.segments.length&&(t.hc.isFilled=!0);break;case"U":for(g="",f=1;h[b+f];)if(null!==h[b+f].match(/[Ff]/))f++;else{if(null!==h[b+f].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)){g=h[b+f];break}f++}g.match(/[Mm]/)?d=!0:t.gr(!1)}if(l=t.Lt,Eu=t,e)for(e=l.figures.iterator;e.next();)e.value.isFilled=!0;return l}function Xe(t,e){for(var n=t.length,i=ee.alloc(),o=0;o<n;o++){var r=t[o];i.x=r[0],i.y=r[1],e.sa(i),r[0]=i.x,r[1]=i.y,i.x=r[2],i.y=r[3],e.sa(i),r[2]=i.x,r[3]=i.y,i.x=r[4],i.y=r[5],e.sa(i),r[4]=i.x,r[5]=i.y,i.x=r[6],i.y=r[7],e.sa(i),r[6]=i.x,r[7]=i.y}ee.free(i)}function We(t,e,n){switch(t.type){case en:case nn:case on:n?e.h(t.Zc,t.$c,0,0):ie(e,t.Zc,t.$c,0,0),ie(e,t.gc,t.nc,0,0);break;case rn:var i=t.figures;t=i.j,i=i.length;for(var o=0;o<i;o++){var r=t[o];n&&0===o?e.h(r.startX,r.startY,0,0):ie(e,r.startX,r.startY,0,0);for(var a=r.segments.j,s=a.length,h=r.startX,u=r.startY,l=0;l<s;l++){var d=a[l];switch(d.type){case dn:case ln:ie(e,h=d.endX,u=d.endY,0,0);break;case cn:Ue.pm(h,u,d.point1X,d.point1Y,d.point2X,d.point2Y,d.endX,d.endY,.5,e),h=d.endX,u=d.endY;break;case gn:Ue.mw(h,u,d.point1X,d.point1Y,d.endX,d.endY,.5,e),h=d.endX,u=d.endY;break;case fn:case pn:var c=d.type===fn?hn(d,r):un(d,r,h,u),g=c.length;if(0===g){ie(e,h=d.centerX,u=d.centerY,0,0);break}d=null;for(var f=0;f<g;f++)d=c[f],Ue.pm(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.5,e);null!==d&&(h=d[6],u=d[7]);break;default:O("Unknown Segment type: "+d.type)}}}break;default:O("Unknown Geometry type: "+t.type)}}function $e(t,e,n,i,o){var r=e.x;e=e.y;for(var a,s=t.bounds.x-20,h=0,u=t.figures.j,l=u.length,d=0;d<l;d++){var c=u[d];if(c.isFilled){if(i&&c.aa(r,e,n))return!0;for(var g,f,p=c.segments,m=g=c.startX,y=f=c.startY,v=p.j,w=0;w<=p.length;w++){var b,S=void 0,x=w!==p.length?(b=(S=v[w]).type,t=S.endX,S.endY):(b=dn,t=m,y);switch(b){case ln:if(m=Je(r,e,s,e,g,f,m,y),isNaN(m))return!0;h+=m,m=t,y=x;break;case dn:if(g=Je(r,e,s,e,g,f,t,x),isNaN(g))return!0;h+=g;break;case cn:h+=a=Ue.vq(g,f,S.point1X,S.point1Y,S.point2X,S.point2Y,t,x,s,e,r,e,.5);break;case gn:h+=a=Ue.vq(g,f,(g+2*S.point1X)/3,(f+2*S.point1Y)/3,(2*S.point1X+t)/3,(2*S.point1Y+x)/3,t,x,s,e,r,e,.5);break;case fn:case pn:var P=(b=S.type===fn?hn(S,c):un(S,c,g,f)).length;if(0===P){if(g=Je(r,e,s,e,g,f,S.centerX,S.centerY),isNaN(g))return!0;h+=g;break}S=null;for(var k=0;k<P;k++){if(S=b[k],0===k){if(a=Je(r,e,s,e,g,f,S[0],S[1]),isNaN(a))return!0;h+=a}h+=a=Ue.vq(S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7],s,e,r,e,.5)}null!==S&&(t=S[6],x=S[7]);break;default:O("Unknown Segment type: "+S.type)}g=t,f=x}if(0!==h)return!0;h=0}else if(c.aa(r,e,o?n:n+2))return!0}return 0!==h}function Je(t,e,n,i,o,r,a,s){if(Ue.Nb(o,r,a,s,.05,t,e))return NaN;var h=(t-n)*(r-s);if(0==h)return 0;var u=((t*i-e*n)*(o-a)-(t-n)*(o*s-r*a))/h;if(e=(t*i-e*n)*(r-s)/h,t<=u)return 0;if((a<o?o-a:a-o)<(s<r?r-s:s-r)){if(r<s){if(e<r||s<e)return 0}else if(e<s||r<e)return 0}else if(o<a){if(u<o||a<u)return 0}else if(u<a||o<u)return 0;return 0<h?1:-1}function Ze(t,e,n,i){for(var o=(t=t.figures.j).length,r=0;r<o;r++)if(t[r].aa(e,n,i))return!0;return!1}function Qe(t){if(null===t.Uk){var e=t.Uk=[],n=t.jn=[],i=[],o=[];if(t.type===en)i.push(t.startX),i.push(t.startY),i.push(t.endX),i.push(t.endY),e.push(i),o.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),n.push(o);else if(t.type===nn)i.push(t.startX),i.push(t.startY),i.push(t.endX),i.push(t.startY),i.push(t.endX),i.push(t.endY),i.push(t.startX),i.push(t.endY),i.push(t.startX),i.push(t.startY),e.push(i),o.push(Math.abs(t.startX-t.endX)),o.push(Math.abs(t.startY-t.endY)),o.push(Math.abs(t.startX-t.endX)),o.push(Math.abs(t.startY-t.endY)),n.push(o);else if(t.type===on){var r=new an;r.startX=t.endX,r.startY=(t.startY+t.endY)/2;var a=new sn(fn);if(a.startAngle=0,a.sweepAngle=360,a.centerX=(t.startX+t.endX)/2,a.centerY=(t.startY+t.endY)/2,a.radiusX=Math.abs(t.startX-t.endX)/2,a.radiusY=Math.abs(t.startY-t.endY)/2,r.add(a),0===(o=(t=hn(a,r)).length))i.push(a.centerX),i.push(a.centerY);else{a=r.startX,r=r.startY;for(var s=0;s<o;s++){var h=t[s];Ue.Ce(a,r,h[2],h[3],h[4],h[5],h[6],h[7],.5,i),a=h[6],r=h[7]}}e.push(i),n.push(tn(i))}else for(t=t.figures.iterator;t.next();){o=t.value,(i=[]).push(o.startX),i.push(o.startY),s=a=o.startX,h=r=o.startY;for(var u=o.segments.j,l=u.length,d=0;d<l;d++){var c=u[d];switch(c.type){case ln:4<=i.length&&(e.push(i),n.push(tn(i))),(i=[]).push(c.endX),i.push(c.endY),s=a=c.endX,h=r=c.endY;break;case dn:i.push(c.endX),i.push(c.endY),a=c.endX,r=c.endY;break;case cn:Ue.Ce(a,r,c.point1X,c.point1Y,c.point2X,c.point2Y,c.endX,c.endY,.5,i),a=c.endX,r=c.endY;break;case gn:Ue.Wq(a,r,c.point1X,c.point1Y,c.endX,c.endY,.5,i),a=c.endX,r=c.endY;break;case fn:var g=hn(c,o),f=g.length;if(0===f){i.push(c.centerX),i.push(c.centerY),a=c.centerX,r=c.centerY;break}for(var p=0;p<f;p++){var m=g[p];Ue.Ce(a,r,m[2],m[3],m[4],m[5],m[6],m[7],.5,i),a=m[6],r=m[7]}break;case pn:if(0===(f=(g=un(c,o,a,r)).length)){i.push(c.centerX),i.push(c.centerY),a=c.centerX,r=c.centerY;break}for(p=0;p<f;p++)m=g[p],Ue.Ce(a,r,m[2],m[3],m[4],m[5],m[6],m[7],.5,i),a=m[6],r=m[7];break;default:O("Segment not of valid type: "+c.type)}c.isClosed&&(i.push(s),i.push(h))}4<=i.length&&(e.push(i),n.push(tn(i)))}}}function tn(t){for(var e=[],n=0,i=0,o=t.length,r=0;r<o;r+=2){var a=t[r],s=t[r+1];0!==r&&e.push(Math.sqrt(ct(n,i,a,s))),n=a,i=s}return e}Ue.za=Ue.eB,qe.prototype.copy=function(){var t=new qe;t.pa=this.pa,t.Zc=this.Zc,t.$c=this.$c,t.gc=this.gc,t.nc=this.nc;for(var e=this.Gj.j,n=e.length,i=t.Gj,o=0;o<n;o++){var r=e[o].copy();i.add(r)}return t.Zr=this.Zr,t.Hr.assign(this.Hr),t.qa=this.qa,t.Uk=this.Uk,t.jn=this.jn,t.kn=this.kn,t.nf=this.nf.G(),t.pf=this.pf.G(),t.xl=this.xl,t.wl=this.wl,t.Rf=this.Rf,t},(Bp=qe.prototype).ca=function(){return this.freeze(),Object.freeze(this),this},Bp.freeze=function(){this.s=!0;var t=this.figures;t.freeze();for(var e=(t=t.j).length,n=0;n<e;n++)t[n].freeze();return this},Bp.ea=function(){Object.isFrozen(this)&&O("cannot thaw constant: "+this),this.s=!1;var t=this.figures;t.ea();for(var e=(t=t.j).length,n=0;n<e;n++)t[n].ea();return this},Bp.Na=function(t){if(!(t instanceof qe))return!1;if(this.type!==t.type)return this.type===en&&t.type===rn?He(this,t):t.type===en&&this.type===rn&&He(t,this);if(this.type!==rn)return Ue.A(this.startX,t.startX)&&Ue.A(this.startY,t.startY)&&Ue.A(this.endX,t.endX)&&Ue.A(this.endY,t.endY);var e=this.figures.j;t=t.figures.j;var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n;i++)if(!e[i].Na(t[i]))return!1;return!0},Bp.hb=function(t){t.classType===qe&&(this.type=t)},Bp.toString=function(t){switch(void 0===t&&(t=-1),this.type){case en:return t<0?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case nn:var e=new ne(this.startX,this.startY,0,0);return e.Pw(this.endX,this.endY,0,0),t<0?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case on:if((e=new ne(this.startX,this.startY,0,0)).Pw(this.endX,this.endY,0,0),t<0)return"M"+(t=e.left.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+e.right.toString()+" "+(e.y+e.height/2).toString()+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var n=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+n+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t)+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+n;case rn:e="";for(var i=(n=this.figures.j).length,o=0;o<i;o++){var r=n[o];0<o&&(e+=" x "),r.isFilled&&(e+="F "),e+=r.toString(t)}return e;default:return this.type.toString()}},Bp.fw=function(){if(this.qa||this.Zr!==this.figures.Aa)return!0;for(var t=this.figures.j,e=t.length,n=0;n<e;n++)if(t[n].fw())return!0;return!1},qe.prototype.computeBounds=function(){this.qa=!1,this.jn=this.Uk=null,this.kn=NaN,this.Zr=this.figures.Aa;for(var t=this.figures.j,e=t.length,n=0;n<e;n++){var i=t[n];i.qa=!1;var o=i.segments;i.dt=o.Aa,o=(i=o.j).length;for(var r=0;r<o;r++){var a=i[r];a.qa=!1,a.Qe=null}}(t=this.Hr).ea(),isNaN(this.xl)||isNaN(this.wl)?t.h(0,0,0,0):t.h(0,0,this.xl,this.wl),We(this,t,!1),ie(t,0,0,0,0),t.freeze()},qe.prototype.ay=function(){var t=new ne;return We(this,t,!0),t},qe.prototype.normalize=function(){this.s&&g(this);var t=this.ay();return this.offset(-t.x,-t.y),new ee(-t.x,-t.y)},qe.prototype.offset=function(t,e){return this.s&&g(this),this.transform(1,0,0,1,t,e),this},qe.prototype.scale=function(t,e){return this.s&&g(this),this.transform(t,0,0,e,0,0),this},qe.prototype.rotate=function(t,e,n){this.s&&g(this),void 0===e&&(e=0),void 0===n&&(n=0);var i=Ie.alloc();return i.reset(),i.rotate(t,e,n),this.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),Ie.free(i),this},(Bp=qe.prototype).transform=function(t,e,n,i,o,r){switch(this.type){case en:case nn:case on:var a=this.Zc,s=this.$c;this.Zc=a*t+s*n+o,this.$c=a*e+s*i+r,a=this.gc,s=this.nc,this.gc=a*t+s*n+o,this.nc=a*e+s*i+r;break;case rn:for(var h=this.figures.j,u=h.length,l=0;l<u;l++){var d=h[l],a=d.startX,s=d.startY;d.startX=a*t+s*n+o,d.startY=a*e+s*i+r;for(var c=(d=d.segments.j).length,g=0;g<c;g++){var f=d[g];switch(f.type){case dn:case ln:a=f.endX,s=f.endY,f.endX=a*t+s*n+o,f.endY=a*e+s*i+r;break;case cn:a=f.point1X,s=f.point1Y,f.point1X=a*t+s*n+o,f.point1Y=a*e+s*i+r,a=f.point2X,s=f.point2Y,f.point2X=a*t+s*n+o,f.point2Y=a*e+s*i+r,a=f.endX,s=f.endY,f.endX=a*t+s*n+o,f.endY=a*e+s*i+r;break;case gn:a=f.point1X,s=f.point1Y,f.point1X=a*t+s*n+o,f.point1Y=a*e+s*i+r,a=f.endX,s=f.endY,f.endX=a*t+s*n+o,f.endY=a*e+s*i+r;break;case fn:a=f.centerX,s=f.centerY,f.centerX=a*t+s*n+o,f.centerY=a*e+s*i+r,0!==e&&((a=180*Math.atan2(e,t)/Math.PI)<0&&(a+=360),f.startAngle+=a),t<0&&(f.startAngle=180-f.startAngle,f.sweepAngle=-f.sweepAngle),i<0&&(f.startAngle=-f.startAngle,f.sweepAngle=-f.sweepAngle),f.radiusX*=Math.sqrt(t*t+n*n),void 0!==f.radiusY&&(f.radiusY*=Math.sqrt(e*e+i*i));break;case pn:a=f.endX,s=f.endY,f.endX=a*t+s*n+o,f.endY=a*e+s*i+r,0!==e&&((a=180*Math.atan2(e,t)/Math.PI)<0&&(a+=360),f.xAxisRotation+=a),t<0&&(f.xAxisRotation=180-f.xAxisRotation,f.isClockwiseArc=!f.isClockwiseArc),i<0&&(f.xAxisRotation=-f.xAxisRotation,f.isClockwiseArc=!f.isClockwiseArc),f.radiusX*=Math.sqrt(t*t+n*n),f.radiusY*=Math.sqrt(e*e+i*i);break;default:O("Unknown Segment type: "+f.type)}}}}return this.qa=!0,this},Bp.aa=function(t,e){void 0===e&&(e=0);var n=this.Zc,i=this.$c,o=this.gc,r=this.nc;switch(this.type){case en:return Ue.Nb(n,i,o,r,e,t.x,t.y);case nn:var a=ne.allocAt(Math.min(n,o)-e,Math.min(i,r)-e,Math.abs(o-n)+2*e,Math.abs(r-i)+2*e);return t=a.aa(t),ne.free(a),t;case on:a=Math.min(n,o)-e;var s=Math.min(i,r)-e,n=(Math.abs(o-n)+2*e)/2;return(e=(Math.abs(r-i)+2*e)/2,n<=0||e<=0)?!1:(a=t.x-(a+n))*a/(n*n)+(s=t.y-(s+e))*s/(e*e)<=1;case rn:return $e(this,t,e,!0,!1);default:return!1}},Bp.Wv=function(t,e){if(t<0?t=0:1<t&&(t=1),void 0===e&&(e=new ee),this.type===en)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var n=this.flattenedSegments,i=this.flattenedLengths,o=n.length,r=this.flattenedTotalLength*t,a=0,s=0;s<o;s++){var h=i[s],u=h.length;for(t=0;t<u;t++){var l=h[t];if(r<=a+l)return i=r-a,i=0===l?0:i/l,s=(n=n[s])[2*t],o=n[2*t+1],e.h(s+(n[2*t+2]-s)*i,o+(n[2*t+3]-o)*i),e;a+=l}}return e},Bp.sy=function(t){if(t<0?t=0:1<t&&(t=1),this.type===en)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,n=this.flattenedLengths,i=e.length,o=this.flattenedTotalLength*t,r=0,a=0;a<i;a++){var s=n[a],h=s.length;for(t=0;t<h;t++){var u=s[t];if(o<=r+u)return e=(o=e[a])[2*t],n=o[2*t+1],i=o[2*t+2],t=o[2*t+3],Math.abs(i-e)<1&&Math.abs(t-n)<1?0:Math.abs(i-e)<1?0<=t-n?90:270:Math.abs(t-n)<1?0<=i-e?0:180:180*Math.atan2(t-n,i-e)/Math.PI;r+=u}}return NaN},Bp.Xv=function(t,e){if(t<0?t=0:1<t&&(t=1),void 0===e&&(e=[]),e.length=3,this.type===en)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var n=this.flattenedSegments,i=this.flattenedLengths,o=n.length,r=this.flattenedTotalLength*t,a=0,s=0;s<o;s++){var h=i[s],u=h.length;for(t=0;t<u;t++){var l=h[t];if(r<=a+l)return i=r-a,i=0===l?0:i/l,n=(l=n[s])[2*t],s=l[2*t+1],o=l[2*t+2],t=l[2*t+3],e[0]=n+(o-n)*i,e[1]=s+(t-s)*i,e[2]=Math.abs(o-n)<1&&Math.abs(t-s)<1?0:Math.abs(o-n)<1?0<=t-s?90:270:Math.abs(t-s)<1?0<=o-n?0:180:180*Math.atan2(t-s,o-n)/Math.PI,e;a+=l}}return e},Bp.ty=function(t){if(this.type===en){var e=this.startX,n=this.startY,i=this.endX,o=this.endY;if(e!==i||n!==o){var r,a=t.x;if(t=t.y,e===i)return i=n<o?(r=n,o):(r=o,n),t<=r?r===n?0:1:i<=t?i===n?0:1:Math.abs(t-n)/(i-r);if(n===o)return e<i?r=e:(r=i,i=e),a<=r?r===e?0:1:i<=a?i===e?0:1:Math.abs(a-e)/(i-r);r=(i-e)*(i-e)+(o-n)*(o-n);var s=ee.alloc();return Ue.Qh(e,n,i,o,a,t,s),t=s.x,a=s.y,ee.free(s),Math.sqrt(((t-e)*(t-e)+(a-n)*(a-n))/r)}}else{if(this.type!==nn){e=this.flattenedSegments,n=this.flattenedLengths,a=this.flattenedTotalLength,i=ee.alloc(),o=1/0,s=r=0,y=e.length;for(var h=v=0,u=0;u<y;u++)for(var l=e[u],d=n[u],c=l.length,g=0;g<c;g+=2){var f,p=l[g],m=l[g+1];0!==g&&(Ue.Qh(v,h,p,m,t.x,t.y,i),(f=(i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y))<o&&(o=f,r=s,r+=Math.sqrt((i.x-v)*(i.x-v)+(i.y-h)*(i.y-h))),s+=d[(g-2)/2]),v=p,h=m}return ee.free(i),(t=r/a)<0?0:1<t?1:t}r=this.startX,s=this.startY;var y=this.endX,o=this.endY;if(r!==y||s!==o){a=2*(e=y-r)+2*(n=o-s),i=t.x,t=t.y,i=Math.min(Math.max(i,r),y),t=Math.min(Math.max(t,s),o),r=Math.abs(i-r),y=Math.abs(i-y),s=Math.abs(t-s),o=Math.abs(t-o);var v=Math.min(r,y,s,o);if(v===s)return i/a;if(v===y)return(e+t)/a;if(v===o)return(2*e+n-i)/a;if(v===r)return(2*e+2*n-t)/a}}return 0},Bp.add=function(t){return this.Gj.add(t),this},Bp.Xm=function(t,e,n,i,o,r,a,s){return this.s&&g(this),this.nf=new Be(t,e,o,r).freeze(),this.pf=new Be(n,i,a,s).freeze(),this},s.Object.defineProperties(qe.prototype,{flattenedSegments:{get:function(){return Qe(this),this.Uk}},flattenedLengths:{get:function(){return Qe(this),this.jn}},flattenedTotalLength:{get:function(){var t=this.kn;if(isNaN(t)){if(this.type===en){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY),t=Math.sqrt(t*t+e*e)}else if(this.type===nn)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else for(var n=(e=this.flattenedLengths).length,i=t=0;i<n;i++)for(var o=e[i],r=o.length,a=0;a<r;a++)t+=o[a];this.kn=t}return t}},type:{get:function(){return this.pa},set:function(t){this.pa!==t&&(this.s&&g(this,t),this.pa=t,this.qa=!0)}},startX:{get:function(){return this.Zc},set:function(t){this.Zc!==t&&(this.s&&g(this,t),this.Zc=t,this.qa=!0)}},startY:{get:function(){return this.$c},set:function(t){this.$c!==t&&(this.s&&g(this,t),this.$c=t,this.qa=!0)}},endX:{get:function(){return this.gc},set:function(t){this.gc!==t&&(this.s&&g(this,t),this.gc=t,this.qa=!0)}},endY:{get:function(){return this.nc},set:function(t){this.nc!==t&&(this.s&&g(this,t),this.nc=t,this.qa=!0)}},figures:{get:function(){return this.Gj},set:function(t){this.Gj!==t&&(this.s&&g(this,t),this.Gj=t,this.qa=!0)}},spot1:{get:function(){return this.nf},set:function(t){this.s&&g(this,t),this.nf=t.G()}},spot2:{get:function(){return this.pf},set:function(t){this.s&&g(this,t),this.pf=t.G()}},defaultStretch:{get:function(){return this.Rf},set:function(t){this.s&&g(this,t),this.Rf=t}},bounds:{get:function(){return this.fw()&&this.computeBounds(),this.Hr}}}),qe.prototype.setSpots=qe.prototype.Xm,qe.prototype.getFractionForPoint=qe.prototype.ty,qe.prototype.getPointAndAngleAlongPath=qe.prototype.Xv,qe.prototype.getAngleAlongPath=qe.prototype.sy,qe.prototype.getPointAlongPath=qe.prototype.Wv,qe.prototype.containsPoint=qe.prototype.aa,qe.prototype.computeBoundsWithoutOrigin=qe.prototype.ay,qe.prototype.equalsApprox=qe.prototype.Na;var en=new j(qe,"Line",0),nn=new j(qe,"Rectangle",1),on=new j(qe,"Ellipse",2),rn=new j(qe,"Path",3);function an(t,e,n,i){J(this),this.s=!1,void 0===n&&(n=!0),this.ls=n,void 0===i&&(i=!0),this.qs=i,this.Zc=void 0!==t?t:0,this.$c=void 0!==e?e:0,this.Yl=new X,this.dt=this.Yl.Aa,this.qa=!0}function sn(t,e,n,i,o,r,a,s){J(this),this.s=!1,void 0===t&&(t=dn),this.pa=t,this.gc=void 0!==e?e:0,this.nc=void 0!==n?n:0,void 0===i&&(i=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===a&&(a=0),t===pn?((t=r%360)<0&&(t+=360),this.ye=t,this.Qi=0,this.Ri=Math.max(i,0),this.ph=Math.max(o,0),this.Fl="boolean"==typeof a?a:"number"==typeof a&&!!a,this.Yk=!!s):(this.ye=i,this.Qi=o,t===fn&&(r=Math.max(r,0)),this.Ri=r,"number"==typeof a?(t===fn&&(a=Math.max(a,0)),this.ph=a):this.ph=0,this.Yk=this.Fl=!1),this.Lj=!1,this.qa=!0,this.Qe=null}function hn(t,e){if(null!==t.Qe&&!1===e.qa)return t.Qe;var n=t.radiusX,i=t.radiusY;if(void 0===i&&(i=n),0===n||0===i)return t.Qe=[],t.Qe;e=t.ye;var o,r=t.Qi,a=Ue.by(0,0,n<i?n:i,t.startAngle,t.startAngle+t.sweepAngle,!1);for(n!==i&&((o=Ie.alloc()).reset(),n<i?o.scale(1,i/n):o.scale(n/i,1),Xe(a,o),Ie.free(o)),n=a.length,i=0;i<n;i++)(o=a[i])[0]+=e,o[1]+=r,o[2]+=e,o[3]+=r,o[4]+=e,o[5]+=r,o[6]+=e,o[7]+=r;return t.Qe=a,t.Qe}function un(t,e,n,i){function o(t,e,n,i){return(t*i<e*n?-1:1)*Math.acos((t*n+e*i)/(Math.sqrt(t*t+e*e)*Math.sqrt(n*n+i*i)))}if(null!==t.Qe&&!1===e.qa)return t.Qe;e=t.Ri;var r=t.ph;0===e&&(e=1e-4),0===r&&(r=1e-4);var a=Math.PI/180*t.ye,s=t.Fl,h=t.Yk,u=t.gc,l=t.nc,d=Math.cos(a),c=Math.sin(a),g=d*(n-u)/2+c*(i-l)/2,f=g*g/(e*e)+(a=-c*(n-u)/2+d*(i-l)/2)*a/(r*r);return 1<f&&(e*=Math.sqrt(f),r*=Math.sqrt(f)),f=(s===h?-1:1)*Math.sqrt((e*e*r*r-e*e*a*a-r*r*g*g)/(e*e*a*a+r*r*g*g)),isNaN(f)&&(f=0),s=f*e*a/r,f=f*-r*g/e,isNaN(s)&&(s=0),isNaN(f)&&(f=0),n=(n+u)/2+d*s-c*f,i=(i+l)/2+c*s+d*f,l=o(1,0,(g-s)/e,(a-f)/r),a=o(d=(g-s)/e,u=(a-f)/r,g=(-g-s)/e,s=(-a-f)/r),(g=(d*g+u*s)/(Math.sqrt(d*d+u*u)*Math.sqrt(g*g+s*s)))<=-1?a=Math.PI:1<=g&&(a=0),!h&&0<a&&(a-=2*Math.PI),h&&a<0&&(a+=2*Math.PI),h=r<e?1:e/r,g=r<e?r/e:1,e=Ue.by(0,0,r<e?e:r,l,l+a,!0),(r=Ie.alloc()).reset(),r.translate(n,i),r.rotate(t.ye,0,0),r.scale(h,g),Xe(e,r),Ie.free(r),t.Qe=e,t.Qe}qe.className="Geometry",qe.stringify=Ye,qe.fillPath=function(t){for(var e=(t=t.split(/[Xx]/)).length,n="",i=0;i<e;i++)var o=t[i],n=null!==o.match(/[Ff]/)?0===i?n+o:n+("X"+(" "===o[0]?"":" "))+o:n+((0===i?"":"X ")+"F"+(" "===o[0]?"":" "))+o;return n},qe.parse=Ke,qe.Line=en,qe.Rectangle=nn,qe.Ellipse=on,qe.Path=rn,an.prototype.copy=function(){var t=new an;t.ls=this.ls,t.qs=this.qs,t.Zc=this.Zc,t.$c=this.$c;for(var e=this.Yl.j,n=e.length,i=t.Yl,o=0;o<n;o++){var r=e[o].copy();i.add(r)}return t.dt=this.dt,t.qa=this.qa,t},(Bp=an.prototype).Na=function(t){if(!(t instanceof an&&Ue.A(this.startX,t.startX)&&Ue.A(this.startY,t.startY)))return!1;var e=this.segments.j;t=t.segments.j;var n=e.length;if(n!==t.length)return!1;for(var i=0;i<n;i++)if(!e[i].Na(t[i]))return!1;return!0},Bp.toString=function(t){void 0===t&&(t=-1);for(var e=t<0?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),n=this.segments.j,i=n.length,o=0;o<i;o++)e+=" "+n[o].toString(t);return e},Bp.freeze=function(){this.s=!0,(e=this.segments).freeze();for(var t=e.j,e=e.length,n=0;n<e;n++)t[n].freeze();return this},Bp.ea=function(){this.s=!1;var t=this.segments;t.ea();for(var e=(t=t.j).length,n=0;n<e;n++)t[n].ea();return this},Bp.fw=function(){if(this.qa)return!0;var t=this.segments;if(this.dt!==t.Aa)return!0;for(var e=(t=t.j).length,n=0;n<e;n++)if(t[n].qa)return!0;return!1},Bp.add=function(t){return this.Yl.add(t),this},Bp.aa=function(t,e,n){for(var i=this.startX,o=this.startY,r=i,a=o,s=this.segments.j,h=s.length,u=0;u<h;u++){var l=s[u];switch(l.type){case ln:r=l.endX,a=l.endY,i=l.endX,o=l.endY;break;case dn:if(Ue.Nb(i,o,l.endX,l.endY,n,t,e))return!0;i=l.endX,o=l.endY;break;case cn:if(Ue.yt(i,o,l.point1X,l.point1Y,l.point2X,l.point2Y,l.endX,l.endY,.5,t,e,n))return!0;i=l.endX,o=l.endY;break;case gn:if(Ue.nw(i,o,l.point1X,l.point1Y,l.endX,l.endY,.5,t,e,n))return!0;i=l.endX,o=l.endY;break;case fn:case pn:var d=l.type===fn?hn(l,this):un(l,this,i,o),c=d.length;if(0===c){if(Ue.Nb(i,o,l.centerX,l.centerY,n,t,e))return!0;i=l.centerX,o=l.centerY;break}for(var g=null,f=0;f<c;f++)if(g=d[f],0===f&&Ue.Nb(i,o,g[0],g[1],n,t,e)||Ue.yt(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],.5,t,e,n))return!0;null!==g&&(i=g[6],o=g[7]);break;default:O("Unknown Segment type: "+l.type)}if(l.isClosed&&(i!==r||o!==a)&&Ue.Nb(i,o,r,a,n,t,e))return!0}return!1},s.Object.defineProperties(an.prototype,{isFilled:{get:function(){return this.ls},set:function(t){this.s&&g(this,t),this.ls=t}},isShadowed:{get:function(){return this.qs},set:function(t){this.s&&g(this,t),this.qs=t}},startX:{get:function(){return this.Zc},set:function(t){this.s&&g(this,t),this.Zc=t,this.qa=!0}},startY:{get:function(){return this.$c},set:function(t){this.s&&g(this,t),this.$c=t,this.qa=!0}},segments:{get:function(){return this.Yl},set:function(t){this.s&&g(this,t),this.Yl=t,this.qa=!0}}}),an.prototype.equalsApprox=an.prototype.Na,an.className="PathFigure",sn.prototype.copy=function(){var t=new sn;return t.pa=this.pa,t.gc=this.gc,t.nc=this.nc,t.ye=this.ye,t.Qi=this.Qi,t.Ri=this.Ri,t.ph=this.ph,t.Fl=this.Fl,t.Yk=this.Yk,t.Lj=this.Lj,t.qa=this.qa,t},(Bp=sn.prototype).Na=function(t){if(!(t instanceof sn)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case ln:case dn:return Ue.A(this.endX,t.endX)&&Ue.A(this.endY,t.endY);case cn:return Ue.A(this.endX,t.endX)&&Ue.A(this.endY,t.endY)&&Ue.A(this.point1X,t.point1X)&&Ue.A(this.point1Y,t.point1Y)&&Ue.A(this.point2X,t.point2X)&&Ue.A(this.point2Y,t.point2Y);case gn:return Ue.A(this.endX,t.endX)&&Ue.A(this.endY,t.endY)&&Ue.A(this.point1X,t.point1X)&&Ue.A(this.point1Y,t.point1Y);case fn:return Ue.A(this.startAngle,t.startAngle)&&Ue.A(this.sweepAngle,t.sweepAngle)&&Ue.A(this.centerX,t.centerX)&&Ue.A(this.centerY,t.centerY)&&Ue.A(this.radiusX,t.radiusX)&&Ue.A(this.radiusY,t.radiusY);case pn:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&Ue.A(this.xAxisRotation,t.xAxisRotation)&&Ue.A(this.endX,t.endX)&&Ue.A(this.endY,t.endY)&&Ue.A(this.radiusX,t.radiusX)&&Ue.A(this.radiusY,t.radiusY);default:return!1}},Bp.hb=function(t){t.classType===sn&&(this.type=t)},Bp.toString=function(t){switch(void 0===t&&(t=-1),this.type){case ln:t=t<0?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case dn:t=t<0?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case cn:t=t<0?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case gn:t=t<0?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case fn:t=t<0?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case pn:t=t<0?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.Lj?"z":"")},Bp.freeze=function(){return this.s=!0,this},Bp.ea=function(){return this.s=!1,this},Bp.close=function(){return this.Lj=!0,this},s.Object.defineProperties(sn.prototype,{isClosed:{get:function(){return this.Lj},set:function(t){this.Lj!==t&&(this.Lj=t,this.qa=!0)}},type:{get:function(){return this.pa},set:function(t){this.s&&g(this,t),this.pa=t,this.qa=!0}},endX:{get:function(){return this.gc},set:function(t){this.s&&g(this,t),this.gc=t,this.qa=!0}},endY:{get:function(){return this.nc},set:function(t){this.s&&g(this,t),this.nc=t,this.qa=!0}},point1X:{get:function(){return this.ye},set:function(t){this.s&&g(this,t),this.ye=t,this.qa=!0}},point1Y:{get:function(){return this.Qi},set:function(t){this.s&&g(this,t),this.Qi=t,this.qa=!0}},point2X:{get:function(){return this.Ri},set:function(t){this.s&&g(this,t),this.Ri=t,this.qa=!0}},point2Y:{get:function(){return this.ph},set:function(t){this.s&&g(this,t),this.ph=t,this.qa=!0}},centerX:{get:function(){return this.ye},set:function(t){this.s&&g(this,t),this.ye=t,this.qa=!0}},centerY:{get:function(){return this.Qi},set:function(t){this.s&&g(this,t),this.Qi=t,this.qa=!0}},radiusX:{get:function(){return this.Ri},set:function(t){t<0&&f(t,">= zero",sn,"radiusX"),this.s&&g(this,t),this.Ri=t,this.qa=!0}},radiusY:{get:function(){return this.ph},set:function(t){t<0&&f(t,">= zero",sn,"radiusY"),this.s&&g(this,t),this.ph=t,this.qa=!0}},startAngle:{get:function(){return this.gc},set:function(t){this.gc!==t&&(this.s&&g(this,t),(t%=360)<0&&(t+=360),this.gc=t,this.qa=!0)}},sweepAngle:{get:function(){return this.nc},set:function(t){this.s&&g(this,t),360<t&&(t=360),t<-360&&(t=-360),this.nc=t,this.qa=!0}},isClockwiseArc:{get:function(){return this.Yk},set:function(t){this.s&&g(this,t),this.Yk=t,this.qa=!0}},isLargeArc:{get:function(){return this.Fl},set:function(t){this.s&&g(this,t),this.Fl=t,this.qa=!0}},xAxisRotation:{get:function(){return this.ye},set:function(t){(t%=360)<0&&(t+=360),this.s&&g(this,t),this.ye=t,this.qa=!0}}}),sn.prototype.equalsApprox=sn.prototype.Na;var ln=new j(sn,"Move",0),dn=new j(sn,"Line",1),cn=new j(sn,"Bezier",2),gn=new j(sn,"QuadraticBezier",3),fn=new j(sn,"Arc",4),pn=new j(sn,"SvgArc",4);function mn(){this.B=null,this.yv=new ee(0,0).freeze(),this.Hu=new ee(0,0).freeze(),this.zr=this.Bs=0,this.Ar=1,this.Ci="",this.st=this.Tr=!1,this.Qr=this.Cr=0,this.Pg=this.ds=this.os=!1,this.Yr=null,this.nt=0,this.jd=this.mt=null}function yn(){this.B=null,this.Qa="",this.Ls=this.kt=null}function vn(){this.vn=bn,this.ff=this.As="",this.cp=this.ep=this.kp=this.lp=this.jp=this.B=this.ac=null}sn.className="PathSegment",sn.Move=ln,sn.Line=dn,sn.Bezier=cn,sn.QuadraticBezier=gn,sn.Arc=fn,sn.SvgArc=pn,mn.prototype.copy=function(){var t=new mn;return this.clone(t)},mn.prototype.clone=function(t){return t.B=this.B,t.yv.assign(this.viewPoint),t.Hu.assign(this.documentPoint),t.Bs=this.Bs,t.zr=this.zr,t.Ar=this.Ar,t.Ci=this.Ci,t.Tr=this.Tr,t.st=this.st,t.Cr=this.Cr,t.Qr=this.Qr,t.os=this.os,t.ds=this.ds,t.Pg=this.Pg,t.Yr=this.Yr,t.nt=this.nt,t.mt=this.mt,t.jd=this.jd,t},mn.prototype.toString=function(){var t="^";return 0!==this.modifiers&&(t+="M:"+this.modifiers),0!==this.button&&(t+="B:"+this.button),""!==this.key&&(t+="K:"+this.key),0!==this.clickCount&&(t+="C:"+this.clickCount),0!==this.delta&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),null!==this.documentPoint&&(t+="@"+this.documentPoint.toString()),t},mn.prototype.Hq=function(t,e){var n=this.diagram;return null===n||Wo(n,this.event,t,e),e},mn.prototype.hA=function(t,e){var n=this.diagram;return null===n||(Wo(n,this.event,t,e),e.assign(n.nu(e))),e},s.Object.defineProperties(mn.prototype,{diagram:{get:function(){return this.B},set:function(t){this.B=t}},viewPoint:{get:function(){return this.yv},set:function(t){this.yv.assign(t)}},documentPoint:{get:function(){return this.Hu},set:function(t){this.Hu.assign(t)}},modifiers:{get:function(){return this.Bs},set:function(t){this.Bs=t}},button:{get:function(){return this.zr},set:function(t){if(this.zr=t,null===this.event)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.Ar},set:function(t){this.Ar=t}},key:{get:function(){return this.Ci},set:function(t){this.Ci=t}},down:{get:function(){return this.Tr},set:function(t){this.Tr=t}},up:{get:function(){return this.st},set:function(t){this.st=t}},clickCount:{get:function(){return this.Cr},set:function(t){this.Cr=t}},delta:{get:function(){return this.Qr},set:function(t){this.Qr=t}},isMultiTouch:{get:function(){return this.os},set:function(t){this.os=t}},handled:{get:function(){return this.ds},set:function(t){this.ds=t}},bubbles:{get:function(){return this.Pg},set:function(t){this.Pg=t}},event:{get:function(){return this.Yr},set:function(t){this.Yr=t}},isTouchEvent:{get:function(){var t=d.TouchEvent,e=this.event;return!!(t&&e instanceof t)||(t=d.PointerEvent)&&e instanceof t&&("touch"===e.pointerType||"pen"===e.pointerType)}},timestamp:{get:function(){return this.nt},set:function(t){this.nt=t}},targetDiagram:{get:function(){return this.mt},set:function(t){this.mt=t}},targetObject:{get:function(){return this.jd},set:function(t){this.jd=t}},control:{get:function(){return 0!=(1&this.modifiers)},set:function(t){this.modifiers=t?1|this.modifiers:-2&this.modifiers}},shift:{get:function(){return 0!=(4&this.modifiers)},set:function(t){this.modifiers=t?4|this.modifiers:-5&this.modifiers}},alt:{get:function(){return 0!=(2&this.modifiers)},set:function(t){this.modifiers=t?2|this.modifiers:-3&this.modifiers}},meta:{get:function(){return 0!=(8&this.modifiers)},set:function(t){this.modifiers=t?8|this.modifiers:-9&this.modifiers}},left:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(1&this.buttons):0===this.button},set:function(t){this.buttons=t?1|this.buttons:-2&this.buttons}},right:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(2&this.buttons):2===this.button},set:function(t){this.buttons=t?2|this.buttons:-3&this.buttons}},middle:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(4&this.buttons):1===this.button},set:function(t){this.buttons=t?4|this.buttons:-5&this.buttons}}}),mn.prototype.getMultiTouchDocumentPoint=mn.prototype.hA,mn.prototype.getMultiTouchViewPoint=mn.prototype.Hq,mn.className="InputEvent",yn.prototype.copy=function(){var t=new yn;return t.B=this.B,t.Qa=this.Qa,t.kt=this.kt,t.Ls=this.Ls,t},yn.prototype.toString=function(){var t="*"+this.name;return null!==this.subject&&(t+=":"+this.subject.toString()),null!==this.parameter&&(t+="("+this.parameter.toString()+")"),t},s.Object.defineProperties(yn.prototype,{diagram:{get:function(){return this.B},set:function(t){this.B=t}},name:{get:function(){return this.Qa},set:function(t){this.Qa=t}},subject:{get:function(){return this.kt},set:function(t){this.kt=t}},parameter:{get:function(){return this.Ls},set:function(t){this.Ls=t}}}),yn.className="DiagramEvent",vn.prototype.clear=function(){this.cp=this.ep=this.kp=this.lp=this.jp=this.B=this.ac=null},vn.prototype.copy=function(){var t=new vn;t.vn=this.vn,t.As=this.As,t.ff=this.ff,t.ac=this.ac,t.B=this.B,t.jp=this.jp;var e=this.lp;return t.lp=y(e)&&"function"==typeof e.G?e.G():e,e=this.kp,t.kp=y(e)&&"function"==typeof e.G?e.G():e,e=this.ep,t.ep=y(e)&&"function"==typeof e.G?e.G():e,e=this.cp,t.cp=y(e)&&"function"==typeof e.G?e.G():e,t},vn.prototype.hb=function(t){t.classType===vn&&(this.change=t)},vn.prototype.toString=function(){var t="",t=this.change===wn?t+"* ":this.change===bn?t+(null!==this.model?"!m":"!d"):t+((null!==this.model?"!m":"!d")+this.change);return this.propertyName&&"string"==typeof this.propertyName&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===wn?null!==this.oldValue&&(t+=" "+this.oldValue):(null!==this.object&&(t+=k(this.object)),null!==this.oldValue&&(t+="  old: "+k(this.oldValue)),null!==this.oldParam&&(t+=" "+this.oldParam),null!==this.newValue&&(t+="  new: "+k(this.newValue)),null!==this.newParam&&(t+=" "+this.newParam)),t},vn.prototype.H=function(t){return t?this.oldValue:this.newValue},vn.prototype.jA=function(t){return t?this.oldParam:this.newParam},vn.prototype.canUndo=function(){return null!==this.model||null!==this.diagram},vn.prototype.undo=function(){this.canUndo()&&(null!==this.model?this.model.changeState(this,!0):null!==this.diagram&&this.diagram.changeState(this,!0))},vn.prototype.canRedo=function(){return null!==this.model||null!==this.diagram},vn.prototype.redo=function(){this.canRedo()&&(null!==this.model?this.model.changeState(this,!1):null!==this.diagram&&this.diagram.changeState(this,!1))},s.Object.defineProperties(vn.prototype,{model:{get:function(){return this.ac},set:function(t){this.ac=t}},diagram:{get:function(){return this.B},set:function(t){this.B=t}},change:{get:function(){return this.vn},set:function(t){this.vn=t}},modelChange:{get:function(){return this.As},set:function(t){this.As=t}},propertyName:{get:function(){return this.ff},set:function(t){this.ff=t}},isTransactionFinished:{get:function(){return this.vn===wn&&("CommittedTransaction"===this.ff||"FinishedUndo"===this.ff||"FinishedRedo"===this.ff)}},object:{get:function(){return this.jp},set:function(t){this.jp=t}},oldValue:{get:function(){return this.lp},set:function(t){this.lp=t}},oldParam:{get:function(){return this.kp},set:function(t){this.kp=t}},newValue:{get:function(){return this.ep},set:function(t){this.ep=t}},newParam:{get:function(){return this.cp},set:function(t){this.cp=t}}}),vn.prototype.getParam=vn.prototype.jA,vn.prototype.getValue=vn.prototype.H;var wn=new j(vn,"Transaction",-1),bn=new j(vn,"Property",0),Sn=new j(vn,"Insert",1),xn=new j(vn,"Remove",2);function Pn(){this.v=(new X).freeze(),this.Qa="",this.l=!1}function kn(){this.fv=new $,this.gd=!1,this.I=(new X).freeze(),this.Pd=-1,this.v=999,this.oe=!1,this.Nr=null,this.Yi=0,this.l=!1,this.ue=(new X).freeze(),this.Nl=new X,this.Ou=!0,this.Vu=this.ms=this.Zu=this.Yu=!1}function Ln(t,e,n){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&t.transactionLevel<1&&p("Ending transaction without having started a transaction: "+n);var i=1===t.transactionLevel,o=t.currentTransaction;i&&e&&(t.isInternalTransaction||t.Bb("CommittingTransaction",n,o));var r,a=0;if(0<t.transactionLevel&&(t.Yi--,t.isEnabled)&&(0<(r=t.ue.count)&&(""===n&&(n=t.ue.L(0)),t.ue.ea(),t.ue.bb(r-1),t.ue.freeze()),0<(r=t.Nl.count)&&(a=t.Nl.L(r-1),t.Nl.bb(r-1))),i){if(e){if(t.ms=!1,null===o&&""!==n&&(o=t.currentTransaction),t.isEnabled&&null!==o){for(o.isComplete||(o.isComplete=!0,o.name=n),(e=t.history).ea(),i=e.count-1;i>t.historyIndex;i--)null!==(a=e.L(i))&&a.clear(),e.bb(i),t.ms=!0;0<=(i=t.maxHistoryLength)&&(0===i?e.clear():e.count>=i&&(null!==(a=e.L(0))&&a.clear(),e.bb(0),t.Pd--)),0===i||0!==e.count&&e.get(e.count-1)===o||(e.add(o),t.Pd++),e.freeze()}t.isInternalTransaction||t.Bb("CommittedTransaction",n,o)}else{t.oe=!0;try{t.isEnabled&&null!==o&&(o.isComplete=!0,o.undo())}finally{t.isInternalTransaction||t.Bb("RolledBackTransaction",n,o),t.oe=!1}null!==o&&o.clear()}return t.Nr=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,!(t.isPendingUnmodified=!1)}if(t.isEnabled&&!e&&null!==o){for(t=a,o=(n=o.changes).count-1;t<=o;o--)null!==(e=n.L(o))&&e.undo(),n.ea(),n.bb(o);n.freeze()}return!1}function Mn(){J(this),this.B=qr,this.Qa="",this.gd=!0,this.Pc=!1,this.gx=null,this.hz=new mn,this.vt=-1}function _n(){Mn.call(this),this.name="ToolManager",this.Bc=new X,this.Qc=new X,this.Gd=new X,this.T=this.Ja=850,this.v=new xe(2,2).ca(),this.cb=5e3,this.Ka=An,this.I=Dn,this.Mr=this.l=null,this.fk=-1}function Nn(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}vn.className="ChangedEvent",vn.Transaction=wn,vn.Property=bn,vn.Insert=Sn,vn.Remove=xn,Pn.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(void 0!==t&&0<t){t=this.changes.count;for(var n=0;n<t;n++){var i=this.changes.L(n);null!==i&&(e+="\n  "+i.toString())}}return e},Pn.prototype.clear=function(){var t=this.changes;t.ea();for(var e=t.count-1;0<=e;e--){var n=t.L(e);null!==n&&n.clear()}t.clear(),t.freeze()},Pn.prototype.canUndo=function(){return this.isComplete},Pn.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.L(t);null!==e&&e.undo()}},Pn.prototype.canRedo=function(){return this.isComplete},Pn.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var n=this.changes.L(e);null!==n&&n.redo()}},s.Object.defineProperties(Pn.prototype,{changes:{get:function(){return this.v}},name:{get:function(){return this.Qa},set:function(t){this.Qa=t}},isComplete:{get:function(){return this.l},set:function(t){this.l=t}}}),Pn.className="Transaction",kn.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var n=this.nestedTransactionNames.count,i=0;i<n;i++)0<i&&(e+=" "),e+=this.nestedTransactionNames.L(i);if(e+="]",void 0!==t&&0<t)for(n=this.history.count,i=0;i<n;i++)e+="\n "+this.history.L(i).toString(t-1);return e},kn.prototype.clear=function(){var t=this.history;t.ea();for(var e=t.count-1;0<=e;e--){var n=t.L(e);null!==n&&n.clear()}t.clear(),this.Pd=-1,t.freeze(),this.oe=!1,this.Nr=null,this.Yi=0,this.ue.ea(),this.ue.clear(),this.ue.freeze(),this.Nl.clear(),this.Vu=this.ms=this.Zu=this.Yu=!1},kn.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},(Bp=kn.prototype).Ux=function(t){this.fv.add(t)},Bp.My=function(t){this.fv.remove(t)},Bp.va=function(t){if(void 0===t&&(t=""),null===t&&(t=""),this.isUndoingRedoing)return!1;!0===this.Ou&&(this.Ou=!1,this.Yi++,this.isInternalTransaction||this.Bb("StartingFirstTransaction",t,this.currentTransaction),0<this.Yi&&this.Yi--),this.isEnabled&&(this.ue.ea(),this.ue.add(t),this.ue.freeze(),null===this.currentTransaction?this.Nl.add(0):this.Nl.add(this.currentTransaction.changes.count)),this.Yi++;var e=1===this.transactionLevel;return e&&(this.isInternalTransaction||this.Bb("StartedTransaction",t,this.currentTransaction)),e},Bp.Wa=function(t){return void 0===t&&(t=""),Ln(this,!0,t)},Bp.Hf=function(){return Ln(this,!1,"")},kn.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!(null===t||!t.canUndo())},kn.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.oe=!0,this.Bb("StartingUndo","Undo",t),this.Pd--,t.undo()}catch(t){p("undo error: "+t.toString())}finally{this.Bb("FinishedUndo","Undo",t),this.oe=!1}}},kn.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!(null===t||!t.canRedo())},kn.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.oe=!0,this.Bb("StartingRedo","Redo",t),this.Pd++,t.redo()}catch(t){p("redo error: "+t.toString())}finally{this.Bb("FinishedRedo","Redo",t),this.oe=!1}}},kn.prototype.Bb=function(t,e,n){void 0===n&&(n=null);var i=new vn;for(i.change=wn,i.propertyName=t,i.object=n,i.oldValue=e,t=this.models;t.next();)e=t.value,(i.model=e).zt(i)},kn.prototype.$v=function(t){var e,n;!this.isEnabled||this.isUndoingRedoing||this.skipsEvent(t)||(null===(n=this.currentTransaction)&&(this.Nr=n=new Pn),e=t.copy(),(n=n.changes).ea(),n.add(e),n.freeze(),this.checksTransactionLevel&&this.transactionLevel<=0&&!this.Ou&&(null!==(t=t.diagram)&&!1===t.oj||p("Change not within a transaction: "+e.toString())))},kn.prototype.skipsEvent=function(t){if(null===t||t.change.value<0)return!0;if(null===(t=t.object))return!1;if(void 0!==t.layer){if(null!==(t=t.layer)&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},s.Object.defineProperties(kn.prototype,{models:{get:function(){return this.fv.iterator}},isEnabled:{get:function(){return this.gd},set:function(t){this.gd=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.L(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.L(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.oe}},history:{get:function(){return this.I}},maxHistoryLength:{get:function(){return this.v},set:function(t){this.v=t}},historyIndex:{get:function(){return this.Pd}},currentTransaction:{get:function(){return this.Nr}},transactionLevel:{get:function(){return this.Yi}},isInTransaction:{get:function(){return 0<this.Yi}},checksTransactionLevel:{get:function(){return this.l},set:function(t){this.l=t}},nestedTransactionNames:{get:function(){return this.ue}},isPendingClear:{get:function(){return this.Yu},set:function(t){this.Yu=t}},isPendingUnmodified:{get:function(){return this.Zu},set:function(t){this.Zu=t}},isInternalTransaction:{get:function(){return this.Vu},set:function(t){this.Vu=t}},isJustDiscarded:{get:function(){return this.ms}}}),kn.prototype.handleChanged=kn.prototype.$v,kn.prototype.rollbackTransaction=kn.prototype.Hf,kn.prototype.commitTransaction=kn.prototype.Wa,kn.prototype.startTransaction=kn.prototype.va,kn.prototype.removeModel=kn.prototype.My,kn.prototype.addModel=kn.prototype.Ux,kn.className="UndoManager",Mn.prototype.toString=function(){return""!==this.name?this.name+" Tool":P(this.constructor)},Mn.prototype.updateAdornments=function(){},Mn.prototype.canStart=function(){return this.isEnabled},Mn.prototype.doStart=function(){},Mn.prototype.doActivate=function(){this.isActive=!0},Mn.prototype.doDeactivate=function(){this.isActive=!1},Mn.prototype.doStop=function(){},Mn.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},Mn.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},Mn.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},Mn.prototype.doMouseMove=function(){},Mn.prototype.doMouseUp=function(){this.stopTool()},Mn.prototype.doMouseWheel=function(){},Mn.prototype.canStartMultiTouch=function(){return!0},Mn.prototype.standardPinchZoomStart=function(){var t,e,n=this.diagram,i=n.lastInput,o=i.Hq(0,ee.allocAt(NaN,NaN)),r=i.Hq(1,ee.allocAt(NaN,NaN));o.u()&&r.u()&&(this.doCancel(),n.xm("hasGestureZoom"))&&(n.Pl=n.scale,t=r.x-o.x,e=r.y-o.y,n.sv=Math.sqrt(t*t+e*e),i.bubbles=!1),ee.free(o),ee.free(r)},Mn.prototype.standardPinchZoomMove=function(){var t,e,n,i,o=this.diagram,r=o.lastInput,a=r.Hq(0,ee.allocAt(NaN,NaN)),s=r.Hq(1,ee.allocAt(NaN,NaN));a.u()&&s.u()&&(this.doCancel(),o.xm("hasGestureZoom"))&&(e=s.x-a.x,t=s.y-a.y,t=Math.sqrt(e*e+t*t)/o.sv,e=new ee((Math.min(s.x,a.x)+Math.max(s.x,a.x))/2,(Math.min(s.y,a.y)+Math.max(s.y,a.y))/2),t*=o.Pl,n=o.commandHandler,t!==o.scale&&n.canResetZoom(t)&&(i=o.zoomPoint,o.zoomPoint=e,n.resetZoom(t),o.zoomPoint=i),r.bubbles=!1),ee.free(a),ee.free(s)},Mn.prototype.doKeyDown=function(){"Esc"===this.diagram.lastInput.key&&this.doCancel()},Mn.prototype.doKeyUp=function(){},Mn.prototype.va=function(t){return void 0===t&&(t=this.name),this.transactionResult=null,this.diagram.va(t)},Mn.prototype.Jg=function(){var t=this.diagram;return null===this.transactionResult?t.Hf():t.Wa(this.transactionResult)},Mn.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,n=t.um(e.documentPoint,!1);if(null!==n){if(E?e.meta:e.control){for(t.R("ChangingSelection",t.selection),e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!e.isSelected),t.R("ChangedSelection",t.selection)}else if(e.shift){if(!n.isSelected){for(t.R("ChangingSelection",t.selection),e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!0),t.R("ChangedSelection",t.selection)}}else if(!n.isSelected){for(e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&t.select(e)}}else!e.left||(E?e.meta:e.control)||e.shift||t.clearSelection()}},Mn.prototype.standardMouseClick=function(t,e){void 0===t&&(t=null),void 0===e&&(e=function(t){return!t.layer.isTemporary});var n=this.diagram,i=n.lastInput;return t=n.Ub(i.documentPoint,t,e),function(t,e,n){if(e.handled=!1,null===t||t.Hg()){var i=0;e.left?i=1!==e.clickCount&&2===e.clickCount?2:1:e.right&&1===e.clickCount&&(i=3);var o="ObjectSingleClicked";if(null!==t){switch(i){case 1:o="ObjectSingleClicked";break;case 2:o="ObjectDoubleClicked";break;case 3:o="ObjectContextClicked"}0!==i&&n.R(o,t)}else{switch(i){case 1:o="BackgroundSingleClicked";break;case 2:o="BackgroundDoubleClicked";break;case 3:o="BackgroundContextClicked"}0!==i&&n.R(o)}if(null!==t)for(;null!==t;){switch(n=null,i){case 1:n=t.click;break;case 2:n=t.doubleClick||t.click;break;case 3:n=t.contextClick}if(null!==n&&(n(e,t),e.handled))break;t=t.panel}else{switch(t=null,i){case 1:t=n.click;break;case 2:t=n.doubleClick||n.click;break;case 3:t=n.contextClick}null!==t&&t(e)}}}(i.targetObject=t,i,n),i.handled},Mn.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(!0!==t.animationManager.rc){var n=t.skipsUndoManager;t.skipsUndoManager=!0;var i=t.viewportBounds.aa(e.documentPoint)?t.Ub(e.documentPoint,null,null):null,o=!1;if((e.targetObject=i)!==t.Bj){var r=t.Bj,a=r;for(t.Bj=i,this.doCurrentObjectChanged(r,i),e.handled=!1;null!==r;){var s=r.mouseLeave;if(null!==s){if(i===r)break;if(null!==i&&i.Gg(r))break;if(s(e,r,i),o=!0,e.handled)break}r=r.panel}for(r=a,e.handled=!1;null!==i;){if(null!==(a=i.mouseEnter)){if(r===i)break;if(null!==r&&r.Gg(i))break;if(a(e,i,r),o=!0,e.handled)break}i=i.panel}i=t.Bj}if(null!==i){for(r=i,a="";null!==r&&""===(a=r.cursor);)r=r.panel;for(t.currentCursor=a,e.handled=!1,r=i;null!==r&&(null===(i=r.mouseOver)||(i(e,r),o=!0,!e.handled));)r=r.panel}else t.currentCursor="",null!==(i=t.mouseOver)&&(i(e),o=!0);o&&t.Db(),t.skipsUndoManager=n}},Mn.prototype.doCurrentObjectChanged=function(){},Mn.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,n=e.delta;if(0!==n&&t.documentBounds.u()){var i=t.commandHandler,o=t.toolManager.mouseWheelBehavior;if(null!==i&&(o===Tn&&!e.shift||o===An&&e.control))(0<n?i.canIncreaseZoom():i.canDecreaseZoom())&&(o=t.zoomPoint,t.zoomPoint=e.viewPoint,0<n?i.increaseZoom():i.decreaseZoom(),t.zoomPoint=o),e.bubbles=!1;else if(o===Tn&&e.shift||o===An&&!e.control){i=t.position.copy();var r=0<n?n:-n,a=(s=e.event).deltaMode,o=s.deltaX,s=s.deltaY;if((T||C||D)&&(a=1,0<o&&(o=3),o<0&&(o=-3),0<s&&(s=3),s<0&&(s=-3)),void 0===a||void 0===o||void 0===s||0===o&&0===s||e.shift)!e.shift&&t.allowVerticalScroll?(r=3*r*t.scrollVerticalLineChange,0<n?t.scroll("pixel","up",r):t.scroll("pixel","down",r)):e.shift&&t.allowHorizontalScroll&&(r=3*r*t.scrollHorizontalLineChange,0<n?t.scroll("pixel","left",r):t.scroll("pixel","right",r));else{switch(a){case 0:n="pixel";break;case 1:n="line";break;case 2:n="page";break;default:n="pixel"}0!==o&&t.allowHorizontalScroll&&(0<(o*=t.scrollHorizontalLineChange/16)?t.scroll(n,"left",-o):t.scroll(n,"right",o)),0!==s&&t.allowVerticalScroll&&(0<(s*=t.scrollVerticalLineChange/16)?t.scroll(n,"up",-s):t.scroll(n,"down",s))}t.position.w(i)||(e.bubbles=!1)}}},Mn.prototype.standardWaitAfter=function(t,e){void 0===e&&(e=this.diagram.lastInput),this.cancelWaitAfter();var n=this,i=e.clone(this.hz);this.vt=v(function(){n.doWaitAfter(i)},t)},Mn.prototype.cancelWaitAfter=function(){-1!==this.vt&&d.clearTimeout(this.vt),this.vt=-1},Mn.prototype.doWaitAfter=function(){},Mn.prototype.findToolHandleAt=function(t,e){return null!==(t=this.diagram.Ub(t,function(t){for(;null!==t&&!(t.panel instanceof tl);)t=t.panel;return t}))&&t.part.category===e?t:null},Mn.prototype.isBeyondDragSize=function(t,e){var n=this.diagram;void 0===t&&(t=n.firstInput.viewPoint),void 0===e&&(e=n.lastInput.viewPoint);var i=(o=n.toolManager.dragSize).width,o=o.height;return n.firstInput.isTouchEvent&&(i+=6,o+=6),Math.abs(e.x-t.x)>i||Math.abs(e.y-t.y)>o},s.Object.defineProperties(Mn.prototype,{diagram:{get:function(){return this.B},set:function(t){t instanceof Mo&&(this.B=t)}},name:{get:function(){return this.Qa},set:function(t){this.Qa=t}},isEnabled:{get:function(){return this.gd},set:function(t){this.gd=t}},isActive:{get:function(){return this.Pc},set:function(t){this.Pc=t}},transactionResult:{get:function(){return this.gx},set:function(t){this.gx=t}}}),Mn.prototype.stopTransaction=Mn.prototype.Jg,Mn.prototype.startTransaction=Mn.prototype.va,Mn.className="Tool",n(_n,Mn),_n.prototype.initializeStandardTools=function(){},_n.prototype.updateAdornments=function(t){var e,n=this.currentToolTip;n instanceof tl&&this.Mr===t&&(e=n.adornedObject,(null!==t?e.part===t:null===e)?this.showToolTip(n,e):this.hideToolTip())},_n.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===En&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===Fn)return void(e.bubbles=!0);if(this.gestureBehavior===En)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomStart()}for(var n=this.mouseDownTools.length,i=0;i<n;i++){var o=this.mouseDownTools.L(i);if(o.diagram=this.diagram,o.canStart())return t.doFocus(),t.currentTool=o,void(t.currentTool===o&&(o.isActive||o.doActivate(),o.doMouseDown()))}1===t.lastInput.button&&(this.mouseWheelBehavior===An?this.mouseWheelBehavior=Tn:this.mouseWheelBehavior===Tn&&(this.mouseWheelBehavior=An)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},_n.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===Fn)return void(e.bubbles=!0);if(this.gestureBehavior===En)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomMove()}if(this.isActive)for(var n=this.mouseMoveTools.length,i=0;i<n;i++){var o=this.mouseMoveTools.L(i);if(o.diagram=this.diagram,o.canStart())return t.doFocus(),t.currentTool=o,void(t.currentTool===o&&(o.isActive||o.doActivate(),o.doMouseMove()))}Nn(this,t),null===(t=e.event)||"mousemove"!==t.type&&"pointermove"!==t.type&&t.cancelable||(e.bubbles=!0)},_n.prototype.doCurrentObjectChanged=function(t,e){null===(t=this.currentToolTip)||null!==e&&t instanceof tl&&(e===t||e.Gg(t))||this.hideToolTip()},_n.prototype.doWaitAfter=function(t){var e=this.diagram;e.ta&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&((t=t.copy()).button=2,t.buttons=2,e.lastInput=t,e.ek=!0,e.doMouseUp()))},_n.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;null===e.targetObject&&(e.targetObject=t.Ub(e.documentPoint,null,null));var n=e.targetObject;if(null!==n)for(e.handled=!1;null!==n&&(null===(t=this.isActive?n.mouseHold:n.mouseHover)||(t(e,n),!e.handled));)n=n.panel;else null!==(n=this.isActive?t.mouseHold:t.mouseHover)&&n(e)},_n.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(null===e.targetObject&&(e.targetObject=t.Ub(e.documentPoint,null,null)),null!==(e=e.targetObject)){if(!((t=this.currentToolTip)instanceof tl)||e!==t&&!e.Gg(t)){for(;null!==e;){if(null!==(t=e.toolTip))return void this.showToolTip(t,e);e=e.panel}this.hideToolTip()}}else null!==(e=t.toolTip)?this.showToolTip(e,null):this.hideToolTip()},_n.prototype.showToolTip=function(t,e){var n,i,o=this.diagram;t!==this.currentToolTip&&this.hideToolTip(),t instanceof tl?(t.layerName="Tool",t.selectable=!1,t.scale=1/o.scale,t.category="ToolTip",null!==t.placeholder&&(t.placeholder.scale=o.scale),null!==(n=t.diagram)&&n!==o&&n.remove(t),o.add(t),null!==e?t.adornedObject=e:t.data=o.model,t.Ta(),this.positionToolTip(t,e)):t instanceof xi&&t!==this.currentToolTip&&t.show(e,o,this),this.currentToolTip=t,-1!==this.fk&&(d.clearTimeout(this.fk),this.fk=-1),0<(t=this.toolTipDuration)&&1/0!==t&&((i=this).fk=v(function(){i.hideToolTip()},t))},_n.prototype.positionToolTip=function(t){var e,n,i,o;null===t.placeholder&&(n=(e=this.diagram).lastInput.documentPoint.copy(),i=t.measuredBounds,o=e.viewportBounds,e.lastInput.isTouchEvent&&(n.x-=i.width),n.x+i.width>o.right&&(n.x-=i.width+5/e.scale),n.x<o.x&&(n.x=o.x),n.y=n.y+20/e.scale+i.height>o.bottom?n.y-(i.height+5/e.scale):n.y+20/e.scale,n.y<o.y&&(n.y=o.y),t.position=n)},_n.prototype.hideToolTip=function(){-1!==this.fk&&(d.clearTimeout(this.fk),this.fk=-1);var t=this.diagram,e=this.currentToolTip;null!==e&&(e instanceof tl?(t.remove(e),null!==this.Mr&&this.Mr.Gf(e.category),e.data=null,e.adornedObject=null):e instanceof xi&&null!==e.hide&&e.hide(t,this),this.currentToolTip=null)},_n.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,n=0;n<e;n++){var i=this.mouseUpTools.L(n);if(i.diagram=this.diagram,i.canStart())return t.doFocus(),t.currentTool=i,void(t.currentTool===i&&(i.isActive||i.doActivate(),i.doMouseUp()))}t.doFocus(),this.doDeactivate()},_n.prototype.doMouseWheel=function(){this.standardMouseWheel()},_n.prototype.doKeyDown=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyDown()},_n.prototype.doKeyUp=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyUp()},_n.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,n=0;n<e;n++){var i=this.mouseDownTools.L(n);if(i.name===t)return i}for(e=this.mouseMoveTools.length,n=0;n<e;n++)if((i=this.mouseMoveTools.L(n)).name===t)return i;for(e=this.mouseUpTools.length,n=0;n<e;n++)if((i=this.mouseUpTools.L(n)).name===t)return i;return null},_n.prototype.replaceTool=function(t,e){null!==e&&(e.diagram=this.diagram);for(var n=this.mouseDownTools.length,i=0;i<n;i++){var o=this.mouseDownTools.L(i);if(o.name===t)return null!==e?this.mouseDownTools.nd(i,e):this.mouseDownTools.bb(i),o}for(n=this.mouseMoveTools.length,i=0;i<n;i++)if((o=this.mouseMoveTools.L(i)).name===t)return null!==e?this.mouseMoveTools.nd(i,e):this.mouseMoveTools.bb(i),o;for(n=this.mouseUpTools.length,i=0;i<n;i++)if((o=this.mouseUpTools.L(i)).name===t)return null!==e?this.mouseUpTools.nd(i,e):this.mouseUpTools.bb(i),o;return null},_n.prototype.Xa=function(t,e,n){null!==e&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):null!==e&&n.add(e)},s.Object.defineProperties(_n.prototype,{mouseWheelBehavior:{get:function(){return this.Ka},set:function(t){this.Ka=t}},gestureBehavior:{get:function(){return this.I},set:function(t){this.I=t}},currentToolTip:{get:function(){return this.l},set:function(t){this.l=t,this.Mr=null!==t&&t instanceof tl?t.adornedPart:null}},mouseDownTools:{get:function(){return this.Bc}},mouseMoveTools:{get:function(){return this.Qc}},mouseUpTools:{get:function(){return this.Gd}},hoverDelay:{get:function(){return this.Ja},set:function(t){this.Ja=t}},holdDelay:{get:function(){return this.T},set:function(t){this.T=t}},dragSize:{get:function(){return this.v},set:function(t){this.v=t.G()}},toolTipDuration:{get:function(){return this.cb},set:function(t){this.cb=t}}}),_n.prototype.replaceStandardTool=_n.prototype.Xa;var An=new j(_n,"WheelScroll",0),Tn=new j(_n,"WheelZoom",1),Cn=new j(_n,"WheelNone",2),Dn=new j(_n,"GestureZoom",3),En=new j(_n,"GestureCancel",4),Fn=new j(_n,"GestureNone",5);function On(){Mn.call(this),this.name="Dragging",this.I=this.Qc=!0,this.v=this.cb=this.Ja=this.pg=null,this.Sn=this.Gd=!1,this.dm=new ee(NaN,NaN),this.it=new ee,this.Bc=!0,this.il=100,this.Wg=[],this.nr=(new $).freeze(),this.Ka=new wa,this.Bo=null,this.T="copy",this.Wh="",this.Xh="no-drop"}function Bn(t,e){var n;!t.dragsLink||(n=t.diagram).allowRelink&&(n.model.xk()&&1===e.count&&e.first()instanceof wl?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.kk(),t.pg=n.toolManager.findTool("Relinking"),null===t.pg&&(t.pg=new si,t.pg.diagram=n)):(t.draggedLink=null,t.pg=null))}function Gn(t){var e=t.diagram,n=e.skipsUndoManager;e.skipsUndoManager=!0,Yn(t,e.lastInput,null),e.skipsUndoManager=n,t.Wg.length=0}function jn(){var t=Qn;In(t),qn(t);var e=t.diagram;t.dm.u()&&(e.position=t.dm),e.If()}function zn(t,e){var n=1/0,i=1/0,o=-1/0,r=-1/0;for(t=t.iterator;t.next();){var a,s=t.value;s.Wb()&&s.isVisible()&&(s=(a=s.location).x,a=a.y,isNaN(s)||isNaN(a)||(s<n&&(n=s),a<i&&(i=a),o<s&&(o=s),r<a&&(r=a)))}1/0===n?e.h(0,0,0,0):e.h(n,i,o-n,r-i)}function Rn(t,e){if(null===t.copiedParts){var n=t.diagram;if((!e||!n.isReadOnly&&!n.isModelReadOnly)&&null!==t.draggedParts){var i=n.undoManager;for(i.isEnabled&&i.isInTransaction?null!==i.currentTransaction&&0<i.currentTransaction.changes.count&&(n.undoManager.Hf(),n.va("Drag")):qn(t),n.skipsUndoManager=!e,n.partManager.addsToTemporaryLayer=!e,t.startPoint=n.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.Jf():n.selection,e=(n=n.qk(e,n,!0)).iterator;e.next();)e.value.location=e.key.location;for(zn(n,e=ne.alloc()),ne.free(e),e=new at,i=t.draggedParts.iterator;i.next();){var o=i.key;o.Wb()&&o.canCopy()&&(null!==(o=n.H(o))&&(o.Ta(),e.add(o,t.xd(o.location))))}for(n=n.iterator;n.next();)(i=n.value)instanceof wl&&i.canCopy()&&e.add(i,t.xd());t.copiedParts=e,Bn(t,e.Jf()),null!==t.draggedLink&&(e=(n=t.draggedLink).routeBounds,xl(n,t.startPoint.x-(e.x+e.width/2),t.startPoint.y-(e.y+e.height/2)))}}}function In(t){var e=t.diagram;if(null!==t.copiedParts&&(e.gu(t.copiedParts.Jf(),!1),(t.copiedParts=null)!==t.draggedParts))for(var n=t.draggedParts.iterator;n.next();)n.key instanceof wl&&(n.value.point=new ee(0,0));e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function Vn(t){var e;null!==t.draggedLink&&(t.dragsLink&&null!==t.pg&&((e=t.pg).diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode)),t.draggedLink=null,t.pg=null)}function Un(t,e,n){var i=t.diagram,o=t.startPoint,r=ee.alloc();r.assign(i.lastInput.documentPoint),t.moveParts(e,r.ce(o),n),ee.free(r),!0===i.Ge("temporaryPixelRatio")&&null===i.yh&&30<i.Xx&&(To(i),i.Zq())}function qn(t){if(null!==t.draggedParts){for(var e,n=t.diagram,i=t.draggedParts.iterator;i.next();){var o=i.key;o.Wb()&&(o.location=i.value.point)}for(i=t.draggedParts.iterator;i.next();)(o=i.key)instanceof wl&&o.suspendsRouting&&(e=i.value.point,t.draggedParts.add(o,t.xd()),xl(o,-e.x,-e.y));n.cd()}}function Hn(t,e){var n=t.diagram;t.dragsLink&&(null!==t.draggedLink&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),Wn(t,!1));var i=t.findDragOverObject(e),o=n.lastInput;o.targetObject=i,t.doUpdateCursor(i);var r=n.skipsUndoManager,a=!1;try{if(n.skipsUndoManager=!0,a=Yn(t,o,i),!t.isActive&&null===Qn)return;var s=null!==i?i.part:null;if(null!==s&&(!n.handlesDragDropForTopLevelParts||!s.isTopLevel||s instanceof pl)||null!==(s=n.mouseDragOver)&&(s(o),a=!0),!t.isActive&&null===Qn)return;if(t.doDragOver(e,i),!t.isActive&&null===Qn)return}finally{n.skipsUndoManager=r,a&&n.cd()}t.Bo=i,n.isReadOnly||!n.allowMove&&!n.allowCopy||!n.allowHorizontalScroll&&!n.allowVerticalScroll||n.Ft(o.viewPoint)}function Yn(t,e,n){var i=!1,o=t.Wg.length,r=0<o?t.Wg[0]:null;if(n===r)return!1;e.handled=!1;for(var a=0;a<o;a++){var s=t.Wg[a],h=s.mouseDragLeave;if(null!==h&&(h(e,s,n),i=!0,e.handled))break}if(t.Wg.length=0,!t.isActive&&null===Qn||null===n)return i;for(e.handled=!1,o=n;null!==o;)t.Wg.push(o),o=Kn(o);for(o=t.Wg.length,n=0;n<o&&(null===(s=(a=t.Wg[n]).mouseDragEnter)||(s(e,a,r),i=!0,!e.handled));n++);return i}function Kn(t){var e=t.panel;return null!==e?e:t instanceof Ou&&!(t instanceof pl)&&(null!==(t=t.containingGroup)&&t.handlesDragDropForMembers)?t:null}function Xn(t,e,n){var i=t.pg;if(null===i)return null;var o=t.diagram.Eg(e,i.portGravity,function(t){return i.findValidLinkablePort(t,n)});t=ee.alloc();for(var r=1/0,a=null,o=o.iterator;o.next();){var s,h=o.value;null!==h.part&&(s=h.ga(Wt,t),(s=e.Fe(s))<r&&(a=h,r=s))}return ee.free(t),a}function Wn(t,e){var n,i,o,r,a,s,h=t.draggedLink;null===h||h.pointsCount<2||((n=t.diagram).isReadOnly||null!==(i=t.pg)&&((r=o=null)!==h.fromNode||null!==(o=Xn(t,h.i(0),!1))&&(r=o.part),(s=a=null)!==h.toNode||null!==(a=Xn(t,h.i(h.pointsCount-1),!0))&&(s=a.part),i.isValidLink(r,o,s,a)?e?(h.defaultFromPoint=h.i(0),h.defaultToPoint=h.i(h.pointsCount-1),h.suspendsRouting=!1,h.fromNode=r,null!==o&&(h.fromPortId=o.portId),h.toNode=s,null!==a&&(h.toPortId=a.portId),h.fromPort!==n.Hy&&n.R("LinkRelinked",h,n.Hy),h.toPort!==n.Iy&&n.R("LinkRelinked",h,n.Iy)):hi(i,r,o,s,a):hi(i,null,null,null,null)))}function $n(t,e){var n=t.diagram;t.dragsLink&&Wn(t,!0),Gn(t);var i,o,r=t.findDragOverObject(e),a=n.lastInput;if(null!==(a.targetObject=r)){a.handled=!1;for(var s=r;null!==s;){var h=s.mouseDrop;if(null!==h&&(h(a,s),a.handled))break;i=a,o=s,h=(h=t).diagram,o=o.part,!h.handlesDragDropForTopLevelParts||!o.isTopLevel||o instanceof pl||null!==(o=h.mouseDrop)&&o(i),s=Kn(s)}}else null!==(s=n.mouseDrop)&&s(a);if(t.isActive||null!==Qn){for(a=(t.copiedParts||t.draggedParts).iterator;a.next();)(s=a.key)instanceof el&&s.linksConnected.each(function(t){t.suspendsRouting=!1});if(t.doDropOnto(e,r),t.isActive||null!==Qn){for(t=ne.alloc(),e=n.selection.iterator;e.next();)(r=e.value)instanceof el&&function(t,e,n){var i=!1;if(e.getAvoidableRect(n),t.viewportBounds.De(n)&&(i=!0),0!==(t=t.Uv(n,function(t){return t.part},function(t){return t instanceof wl},!0,function(t){return t instanceof wl},i)).count)for(t=t.iterator;t.next();)!(n=t.value).Cd(e)&&n.isAvoiding&&n.Ua()}(n,r,t);ne.free(t)}}}function Jn(t,e,n,i){if(null===t.copiedParts){var o=t.diagram;if(!o.isReadOnly&&!o.isModelReadOnly){o.skipsUndoManager=!n,o.partManager.addsToTemporaryLayer=!n,t.startPoint=i.documentPoint,n=o.qk(e,o,!0);var r=ne.alloc();zn(e,r),i=r.x+r.width/2,o=r.y+r.height/2,ne.free(r),r=t.it;var a=new at,s=ee.alloc();for(e=e.iterator;e.next();){var h=e.value,u=n.H(h);h.Wb()&&h.canCopy()?(h=h.location,s.h(r.x-(i-h.x),r.y-(o-h.y)),u.location=s,u.Ta(),a.add(u,t.xd(s))):u instanceof wl&&h.canCopy()&&(xl(u,r.x-i,r.y-o),a.add(u,t.xd()))}ee.free(s),t.copiedParts=a,Bn(t,a.Jf()),null!==t.draggedLink&&(i=(n=t.draggedLink).routeBounds,xl(n,t.startPoint.x-(i.x+i.width/2),t.startPoint.y-(i.y+i.height/2)))}}}_n.className="ToolManager",_n.WheelScroll=An,_n.WheelZoom=Tn,_n.WheelNone=Cn,_n.GestureZoom=Dn,_n.GestureCancel=En,_n.GestureNone=Fn,n(On,Mn),On.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.il))&&null!==this.findDraggablePart()},On.prototype.findDraggablePart=function(){var t=this.diagram;if(null===(t=t.um(t.firstInput.documentPoint,!1)))return null;for(;null!==t&&!t.canSelect();)t=t.containingGroup;return null!==t&&(t.canMove()||t.canCopy())?t:null},On.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.um(t.firstInput.documentPoint,!1);if(null!==e){for(;null!==e&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,null===this.currentPart||this.currentPart.isSelected||(t.R("ChangingSelection",t.selection),e=t.lastInput,(E?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.R("ChangedSelection",t.selection))}}},On.prototype.doActivate=function(){var t=this.diagram;(this.Bo=null)===this.currentPart&&this.standardMouseSelect();var e=this.currentPart;null!==e&&(e.canMove()||e.canCopy())&&(Qn=null,this.isActive=!0,this.dm.set(t.position),Bn(this,t.selection),this.Wg.length=0,t.animationManager.Nc(),this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),(t.mu=!0)===t.Ge("temporaryPixelRatio")&&30<t.Xx&&To(t),gr(t,this.draggedParts),this.va("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.Sn=!1,ti=(Qn=this).diagram,this.doSimulatedDragOut()))},On.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},On.prototype.xd=function(t){return void 0===t?new ya(St):this.isGridSnapEnabled?new ya(new ee(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3)):new ya(t.copy())},On.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(t.If(),Gn(this),fr(t,this.draggedParts),this.draggedParts=this.currentPart=this.Bo=null,this.Sn=this.isDragOutStarted=!1,0<Zn.count){for(var e=Zn,n=e.length,i=0;i<n;i++){var o=e.L(i);Vn(o),In(o),Gn(o),o.diagram.If()}e.clear()}Vn(this),this.dm.h(NaN,NaN),Qn=ti=null,In(this),t.isMouseCaptured=!1,t.currentCursor="",t.mu=!1,this.Jg(),Co(t,!0)},On.prototype.doCancel=function(){In(this),qn(this);var t=this.diagram;this.dm.u()&&(t.position=this.dm),this.stopTool()},On.prototype.doKeyDown=function(){this.isActive&&("Esc"===this.diagram.lastInput.key?this.doCancel():this.doMouseMove())},On.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()},On.prototype.moveParts=function(t,e,n){var i=this.diagram;null!==i&&lr(i,t,e,this.dragOptions,n)},On.prototype.findDragOverObject=function(t){var e=this;return Io(this.diagram,t,null,function(t){return!(t=null===t||!!(null===(t=t.part)||t instanceof tl||t.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(t)||e.copiedParts&&e.copiedParts.contains(t)))})},On.prototype.doUpdateCursor=function(t){var e=this.diagram;this.Bo!==t&&(!this.diagram.currentTool.isActive||this.mayCopy()?e.currentCursor=this.copyCursor:this.mayMove()?e.currentCursor=this.moveCursor:this.mayDragOut()&&(e.currentCursor=this.nodropCursor))},On.prototype.doDragOver=function(){},On.prototype.doDropOnto=function(){},On.prototype.doMouseMove=function(){var t,e;this.isActive&&(e=(t=this.diagram).lastInput,this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||null===this.currentPart||null===this.draggedParts||(this.mayCopy()?(Rn(this,!1),gr(t,this.copiedParts),Un(this,this.copiedParts,!1),fr(t,this.copiedParts)):this.mayMove()?(In(this),Un(this,this.draggedParts,!0)):this.mayDragOut()?(Rn(this,!1),Un(this,this.copiedParts,!1)):In(this),Hn(this,t.lastInput.documentPoint)))},On.prototype.doMouseUp=function(){var t,e,n,i;this.isActive&&(e=(t=this.diagram).lastInput,this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)||(e=!1,(n=this.mayCopy())&&null!==this.copiedParts?(In(this),Rn(this,!0),gr(t,this.copiedParts),Un(this,this.copiedParts,!1),fr(t,this.copiedParts),null!==this.copiedParts&&(t.R("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(t){t.isSelected=!0}))):(e=!0,In(this),this.mayMove()&&(Un(this,this.draggedParts,!0),Hn(this,t.lastInput.documentPoint))),this.Sn=!0,$n(this,t.lastInput.documentPoint),this.isActive&&(i=(n?this.copiedParts:this.draggedParts).Jf(),this.copiedParts=null,e&&function(t){if(null!==t.draggedParts)for(var e=t.draggedParts.iterator;e.next();){var n=e.key;n instanceof el&&(null===(n=n.containingGroup)||null===n.placeholder||t.draggedParts.contains(n)||n.placeholder.o())}}(this),t.Oa(),fr(t,this.draggedParts),this.transactionResult=n?"Copy":"Move",t.R(n?"SelectionCopied":"SelectionMoved",i)),this.stopTool(),n&&t.R("ChangedSelection",t.selection)))},On.prototype.simulatedMouseMove=function(t,e,n){if(null===Qn)return!1;var i=Qn.diagram;n instanceof Mo||(n=null);var o=ti;return n!==o&&(null!==o&&o!==i&&(o.If(),Qn.isDragOutStarted=!1,null!==(o=o.toolManager.findTool("Dragging"))&&o.doSimulatedDragLeave()),null!==(ti=n)&&n!==i&&(jn(),null!==(o=n.toolManager.findTool("Dragging"))&&(Zn.contains(o)||Zn.add(o),o.doSimulatedDragEnter()))),!(null===n||n===i||!n.allowDrop||n.isReadOnly||!n.allowInsert)&&(null!==(i=n.toolManager.findTool("Dragging"))&&(null!==t&&(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.ir(e),n.lastInput.down=!1,n.lastInput.up=!1,i.doSimulatedDragOver()),!0)},On.prototype.simulatedMouseUp=function(t,e,n){if(null===Qn)return!1;var i=ti,o=Qn.diagram;if(null===n)return Qn.doCancel(),!0;if(n!==i){var r=i.toolManager.findTool("Dragging");if(null!==i&&i!==o&&null!==r)return i.If(),Qn.isDragOutStarted=!1,r.doSimulatedDragLeave(),!1;null!==(i=(ti=n).toolManager.findTool("Dragging"))&&(jn(),Zn.contains(i)||Zn.add(i),i.doSimulatedDragEnter())}return n!==this.diagram&&(null!==t?(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)):null===e&&(e=new ee),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.ir(e),n.lastInput.down=!1,n.lastInput.up=!0,null!==(t=n.toolManager.findTool("Dragging"))&&t.doSimulatedDrop(),null!==(t=Qn)&&(n=t.mayCopy(),t.transactionResult=n?"Copy":"Move",t.stopTool()),!0)},On.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(E?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Wb()&&e.canCopy())return!0}return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},On.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Wb()&&e.canCopy())return!0}return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},On.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Wb()&&e.canMove())return!0}return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canMove())},On.prototype.computeBorder=function(t,e,n){return this.Sn||null===this.draggedParts||this.draggedParts.contains(t)?null:n.assign(e)},On.prototype.gA=function(){return Qn},On.prototype.mayDragIn=function(){var t=this.diagram;if(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)return!1;return null!==Qn&&Qn.diagram.model.dataFormat===t.model.dataFormat},On.prototype.doSimulatedDragEnter=function(){var t;this.mayDragIn()&&((t=this.diagram).animationManager.Nc(),Jo(t),t.animationManager.Nc(),null!==Qn&&(Qn.diagram.mu=!1),this.doUpdateCursor(t.grid))},On.prototype.doSimulatedDragLeave=function(){null!==Qn&&Qn.doSimulatedDragOut(),this.doCancel()},On.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.sn=!0;var e=Qn;if(null!==e&&null!==e.draggedParts){if(!this.mayDragIn())return;Jn(this,e.draggedParts.Jf(),!1,t.firstInput),Un(this,this.copiedParts,!1),Hn(this,t.lastInput.documentPoint)}t.animationManager.sn=!1},On.prototype.doSimulatedDrop=function(){var t=this.diagram,e=Qn;if(null!==e){var n=e.diagram;if(e.Sn=!0,In(this),!this.mayDragIn())return;t.animationManager.sn=!0,t.R("ChangingSelection",t.selection),this.va("Drop"),Jn(this,e.draggedParts.Jf(),!0,t.lastInput),Un(this,this.copiedParts,!1),null!==this.copiedParts&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(t){t.isSelected=!0})),$n(this,t.lastInput.documentPoint),t.Oa(),e=t.selection,null!==this.copiedParts?this.transactionResult="ExternalCopy":e=new $,this.copiedParts=null,t.doFocus(),t.R("ExternalObjectsDropped",e,n),this.Jg(),t.R("ChangedSelection",t.selection)}t.animationManager.sn=!1},On.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.mu=!1,this.mayCopy()||this.mayMove()?t.currentCursor="":t.currentCursor=this.nodropCursor,this.Bo=null},On.prototype.computeMove=function(t,e,n,i){return null!==(n=this.diagram)?n.computeMove(t,e,this.dragOptions,i):new ee},s.Object.defineProperties(On.prototype,{isCopyEnabled:{get:function(){return this.Qc},set:function(t){this.Qc=t}},copiesEffectiveCollection:{get:function(){return this.I},set:function(t){this.I=t}},dragOptions:{get:function(){return this.Ka},set:function(t){this.Ka=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.Bc},set:function(t){this.Bc=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.w(t)||(t=t.G(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.w(t)||(t=t.G(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.w(t)||(t=t.G(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.T},set:function(t){this.T=t}},moveCursor:{get:function(){return this.Wh},set:function(t){this.Wh=t}},nodropCursor:{get:function(){return this.Xh},set:function(t){this.Xh=t}},currentPart:{get:function(){return this.Ja},set:function(t){this.Ja=t}},copiedParts:{get:function(){return this.v},set:function(t){this.v=t}},draggedParts:{get:function(){return this.cb},set:function(t){this.cb=t}},draggingParts:{get:function(){return null!==this.copiedParts?this.copiedParts.Jf():null!==this.draggedParts?this.draggedParts.Jf():this.nr}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.Gd},set:function(t){this.Gd=t}},startPoint:{get:function(){return this.it},set:function(t){this.it.w(t)||this.it.assign(t)}},delay:{get:function(){return this.il},set:function(t){this.il=t}}}),On.prototype.getDraggingSource=On.prototype.gA;var Zn=null,Qn=null,ti=null;function ei(){Mn.call(this),this.Xh=100,this.Ka=!1,this.oi="pointer";var t=new wl,e=new Oh;e.isPanelMain=!0,e.stroke="blue",t.add(e),(e=new Oh).toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.bx=t,t=new el,(e=new Oh).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=pt,t.add(e),t.selectable=!1,t.layerName="Tool",this.ax=t,this.l=e,t=new el,(e=new Oh).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=pt,t.add(e),t.selectable=!1,t.layerName="Tool",this.ex=t,this.v=e,this.Wh=this.Gd=this.Bc=this.cb=this.Qc=null,this.Ja=!0,this.$y=new at,this.nr=this.Hi=this.$w=null}function ni(t,e,n,i,o){if(e===n)return 1;if(null!==e&&null!==n)for(var r=e.linksConnected;r.next();){var a=r.value;if(a!==i&&(!o||a.isTreeLink)&&a.toNode===e&&((a=a.fromNode)!==e&&ni(t,a,n,i,o)))return 1}}function ii(){ei.call(this),this.name="Linking",this.T={},this.I=null,this.J=oi,this.cn=null}On.className="DraggingTool",Zn=new X,M("draggingTool",function(){return this.findTool("Dragging")},function(t){this.Xa("Dragging",t,this.mouseMoveTools)}),_n.prototype.doCancel=function(){null!==Qn&&Qn.doCancel(),Mn.prototype.doCancel.call(this)},n(ei,Mn),ei.prototype.doStop=function(){this.diagram.If(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},ei.prototype.copyPortProperties=function(t,e,n,i,o){var r,a;null!==t&&null!==e&&null!==n&&null!==i&&(r=e.Af(),(a=xe.alloc()).width=e.naturalBounds.width*r,a.height=e.naturalBounds.height*r,i.desiredSize=a,xe.free(a),o?(i.toSpot=e.toSpot,i.toEndSegmentLength=e.toEndSegmentLength):(i.fromSpot=e.fromSpot,i.fromEndSegmentLength=e.fromEndSegmentLength),n.locationSpot=Wt,r=ee.alloc(),n.location=e.ga(Wt,r),ee.free(r),i.angle=e.lj(),null!==this.portTargeted&&this.portTargeted(t,e,n,i,o))},ei.prototype.setNoTargetPortProperties=function(t,e,n){null!==e&&(e.desiredSize=pt,e.fromSpot=Ht,e.toSpot=Ht),null!==t&&(t.location=this.diagram.lastInput.documentPoint),null!==this.portTargeted&&this.portTargeted(null,null,t,e,n)},ei.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},ei.prototype.doMouseMove=function(){var t,e;this.isActive&&(t=this.diagram,this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort&&this.targetPort.part instanceof el?(e=this.targetPort.part,this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)):this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.Ft(t.lastInput.viewPoint))},ei.prototype.findValidLinkablePort=function(t,e){if(null===t)return null;var n=t.part;if(!(n instanceof el))return null;for(;null!==t;){var i=e?t.toLinkable:t.fromLinkable;if(!0===i&&(null!==t.portId||t instanceof el)&&(e?this.isValidTo(n,t):this.isValidFrom(n,t)))return t;if(!1===i)break;t=t.panel}return null},ei.prototype.findTargetPort=function(e){var t=(r=this.diagram).lastInput.documentPoint;(o=this.portGravity)<=0&&(o=.1);for(var n=this,i=r.Eg(t,o,function(t){return n.findValidLinkablePort(t,e)},null,!0),o=1/0,r=null,i=i.iterator;i.next();){var a,s,h,u=i.value,l=u.part;l instanceof el&&(a=u.ga(Wt,ee.alloc()),s=t.x-a.x,h=t.y-a.y,ee.free(a),(a=s*s+h*h)<o&&(null!==(s=this.validPortsCache.H(u))?s&&(r=u,o=a):e&&this.isValidLink(this.originalFromNode,this.originalFromPort,l,u)||!e&&this.isValidLink(l,u,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(u,!0),r=u,o=a):this.validPortsCache.add(u,!1)))}return null!==r&&((t=r.part)instanceof el&&(null===t.layer||t.layer.allowLink))?r:null},ei.prototype.isValidFrom=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.fromLinkable))return!1;var n=e.fromMaxLinks;if(n<1/0){if(null!==this.originalLink&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(null===(e=e.portId)&&(e=""),t.Dq(e).count>=n)return!1}return!0},ei.prototype.isValidTo=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.toLinkable))return!1;var n=e.toMaxLinks;if(n<1/0){if(null!==this.originalLink&&t===this.originalToNode&&e===this.originalToPort)return!0;if(null===(e=e.portId)&&(e=""),t.Bd(e).count>=n)return!1}return!0},ei.prototype.isInSameNode=function(t,e){return null!==t&&null!==e&&(t===e||(t=t.part,e=e.part,null!==t&&t===e))},ei.prototype.isLinked=function(t,e){if(null===t||null===e)return!1;var n=t.part;if(!(n instanceof el))return!1;null===(t=t.portId)&&(t="");var i=e.part;if(!(i instanceof el))return!1;for(null===(e=e.portId)&&(e=""),e=i.Bd(e);e.next();)if((i=e.value).fromNode===n&&i.fromPortId===t)return!0;return!1},ei.prototype.isValidLink=function(t,e,n,i){if(!this.isValidFrom(t,e)||!this.isValidTo(n,i)||!(null===e||null===i||(e.fromLinkableSelfNode&&i.toLinkableSelfNode||!this.isInSameNode(e,i))&&(e.fromLinkableDuplicates&&i.toLinkableDuplicates||!this.isLinked(e,i)))||null!==this.originalLink&&(null!==t&&this.isLabelDependentOnLink(t,this.originalLink)||null!==n&&this.isLabelDependentOnLink(n,this.originalLink))||null!==t&&null!==n&&(null===t.data&&null!==n.data||null!==t.data&&null===n.data)||!this.isValidCycle(t,n,this.originalLink))return!1;if(null!==t){var o=t.linkValidation;if(null!==o&&!o(t,e,n,i,this.originalLink))return!1}return!(null!==n&&null!==(o=n.linkValidation)&&!o(t,e,n,i,this.originalLink))&&(null===(o=this.linkValidation)||o(t,e,n,i,this.originalLink))},ei.prototype.isLabelDependentOnLink=function(t,e){if(null===t)return!1;var n=t.labeledLink;if(null===n)return!1;if(n===e)return!0;var i=new $;return i.add(t),function t(e,n,i,o){if(n===i)return!0;var r=n.fromNode;if(null!==r&&r.isLinkLabel&&(o.add(r),t(e,r.labeledLink,i,o)))return!0;n=n.toNode;return!(null===n||!n.isLinkLabel||(o.add(n),!t(e,n.labeledLink,i,o)))}(this,n,e,i)},ei.prototype.isValidCycle=function(t,e,n){if(void 0===n&&(n=null),null===t||null===e)return this.isUnconnectedLinkValid;var i=this.diagram.validCycle;if(i!==ta){if(i===oa){if(null!==(i=n||this.temporaryLink)&&!i.isTreeLink)return!0;for(i=e.linksConnected;i.next();){var o=i.value;if(o!==n&&o.isTreeLink&&o.toNode===e)return!1}return!ni(this,t,e,n,!0)}if(i===ra){if(null!==(i=n||this.temporaryLink)&&!i.isTreeLink)return!0;for(i=t.linksConnected;i.next();)if((o=i.value)!==n&&o.isTreeLink&&o.fromNode===t)return!1;return!ni(this,t,e,n,!0)}if(i===ea)return!(t=t===e||((i=new $).add(e),function t(e,n,i,o,r){if(i===o)return!0;if(null===i||null===o||n.contains(i))return!1;n.add(i);for(var a=i.linksConnected;a.next();){var s=a.value;if(s!==r&&s.toNode===i&&((s=s.fromNode)!==i&&t(e,n,s,o,r)))return!0}return!1}(this,i,t,e,n)));if(i===na)return!ni(this,t,e,n,!1);if(i===ia)return!(t=t===e||((i=new $).add(e),function t(e,n,i,o,r){if(i===o)return!0;if(null===i||null===o||n.contains(i))return!1;n.add(i);for(var a=i.linksConnected;a.next();){var s=a.value;if(s!==r){var h=s.fromNode;if(s=s.toNode,(h=h===i?s:h)!==i&&t(e,n,h,o,r))return!0}}return!1}(this,i,t,e,n)))}return!0},s.Object.defineProperties(ei.prototype,{portGravity:{get:function(){return this.Xh},set:function(t){0<=t&&(this.Xh=t)}},isUnconnectedLinkValid:{get:function(){return this.Ka},set:function(t){this.Ka=t}},linkingCursor:{get:function(){return this.oi},set:function(t){this.oi=t}},temporaryLink:{get:function(){return this.bx},set:function(t){this.bx=t}},temporaryFromNode:{get:function(){return this.ax},set:function(t){(this.ax=t)&&(this.l=t.port)}},temporaryFromPort:{get:function(){return this.l},set:function(t){var e,n;null===this.l||null!==(e=this.l.panel)&&(n=e.W.indexOf(this.l),e.bb(n),e.vb(n,t)),this.l=t}},temporaryToNode:{get:function(){return this.ex},set:function(t){(this.ex=t)&&(this.v=t.port)}},temporaryToPort:{get:function(){return this.v},set:function(t){var e,n;null===this.v||null!==(e=this.v.panel)&&(n=e.W.indexOf(this.v),e.bb(n),e.vb(n,t)),this.v=t}},originalLink:{get:function(){return this.Qc},set:function(t){this.Qc=t}},originalFromNode:{get:function(){return this.cb},set:function(t){this.cb=t}},originalFromPort:{get:function(){return this.Bc},set:function(t){this.Bc=t}},originalToNode:{get:function(){return this.Gd},set:function(t){this.Gd=t}},originalToPort:{get:function(){return this.Wh},set:function(t){this.Wh=t}},isForwards:{get:function(){return this.Ja},set:function(t){this.Ja=t}},validPortsCache:{get:function(){return this.$y}},targetPort:{get:function(){return this.$w},set:function(t){this.$w=t}},linkValidation:{get:function(){return this.Hi},set:function(t){this.Hi=t}},portTargeted:{get:function(){return this.nr},set:function(t){this.nr=t}}}),ei.className="LinkingBaseTool",n(ii,ei),ii.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.Ut()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())&&null!==this.findLinkablePort()},ii.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(null===e&&(e=t.Ub(t.firstInput.documentPoint,null,null)),null===e||!(e.part instanceof el))return null;if((t=this.direction)===oi||t===ri){var n=this.findValidLinkablePort(e,!1);if(null!==n)return this.isForwards=!0,n}return t!==oi&&t!==ai||null===(e=this.findValidLinkablePort(e,!0))?null:(this.isForwards=!1,e)},ii.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();null!==e&&(this.va(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(null===this.temporaryToNode||this.temporaryToNode.location.u()||(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,(e=this.originalFromPort.part)instanceof el&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(null===this.temporaryFromNode||this.temporaryFromNode.location.u()||(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,(e=this.originalToPort.part)instanceof el&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.Ua(),t.add(this.temporaryLink)),this.isActive=!0)},ii.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.Jg()},ii.prototype.doStop=function(){ei.prototype.doStop.call(this),this.startObject=null},ii.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.transactionResult=null,n=null,i=null,o=null,r=null;try{var a,s=this.targetPort=this.findTargetPort(this.isForwards);null!==s?(a=s.part)instanceof el&&(this.isForwards?(null!==this.originalFromNode&&(e=this.originalFromNode,n=this.originalFromPort),i=a,o=s):(e=a,n=s,null!==this.originalToNode&&(i=this.originalToNode,o=this.originalToPort))):this.isForwards?null!==this.originalFromNode&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,n=this.originalFromPort):null!==this.originalToNode&&this.isUnconnectedLinkValid&&(i=this.originalToNode,o=this.originalToPort),null!==e||null!==i?null!==(r=this.insertLink(e,n,i,o))?(null===s&&(this.isForwards?r.defaultToPoint=t.lastInput.documentPoint:r.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.R("ChangingSelection",t.selection),t.clearSelection(!0),r.isSelected=!0),this.transactionResult=this.name,t.R("LinkDrawn",r)):this.doNoLink(e,n,i,o):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),r&&t.allowSelect&&t.R("ChangedSelection",t.selection)}}},ii.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(null===t)return!0;if(t instanceof wl)return t.isTreeLink;var e=this.diagram;return null===e||(t=e.partManager.getLinkCategoryForData(t),null===(e=e.partManager.findLinkTemplateForCategory(t))||e.isTreeLink)},ii.prototype.insertLink=function(t,e,n,i){return this.diagram.partManager.insertLink(t,e,n,i)},ii.prototype.doNoLink=function(){},s.Object.defineProperties(ii.prototype,{archetypeLinkData:{get:function(){return this.T},set:function(t){this.T=t}},archetypeLabelNodeData:{get:function(){return this.I},set:function(t){this.I=t}},direction:{get:function(){return this.J},set:function(t){this.J=t}},startObject:{get:function(){return this.cn},set:function(t){this.cn=t}}});var oi=new j(ii,"Either",0),ri=new j(ii,"ForwardsOnly",0),ai=new j(ii,"BackwardsOnly",0);function si(){ei.call(this),this.name="Relinking";var t=new Oh;t.figure="Diamond",t.desiredSize=yt,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=0,this.T=t,(t=new Oh).figure="Diamond",t.desiredSize=yt,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.cn=t,this.I=null,this.Fx=new ne}function hi(t,e,n,i,o){null!==e?(t.copyPortProperties(e,n,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),null!==i?(t.copyPortProperties(i,o,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}function ui(){Mn.call(this),this.name="LinkReshaping";var t=new Oh;t.figure="Rectangle",t.desiredSize=mt,t.fill="lightblue",t.stroke="dodgerblue",this.v=t,(t=new Oh).figure="Diamond",t.desiredSize=yt,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.I=t,this.T=3,this.vu=this.l=null,this.Gx=new ee,this.Ks=new X}function li(t,e,n,i,o,r){return r?Math.abs(e.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-i.y)<t.resegmentingDistance&&Math.abs(i.y-o.y)<t.resegmentingDistance:Math.abs(e.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-i.x)<t.resegmentingDistance&&Math.abs(i.x-o.x)<t.resegmentingDistance}ii.className="LinkingTool",ii.Either=oi,ii.ForwardsOnly=ri,ii.BackwardsOnly=ai,n(si,ei),si.prototype.updateAdornments=function(t){var e,n,i;null!==t&&t instanceof wl&&(e="RelinkFrom",n=null,!t.isSelected||this.diagram.isReadOnly||null!==(i=t.selectionObject)&&t.canRelinkFrom()&&t.actualBounds.u()&&t.isVisible()&&i.actualBounds.u()&&i.Ff()&&(null===(n=t.tk(e))&&(n=this.makeAdornment(i,!1),t.Gh(e,n))),null===n&&t.Gf(e),e="RelinkTo",n=null,!t.isSelected||this.diagram.isReadOnly||null!==(i=t.selectionObject)&&t.canRelinkTo()&&t.actualBounds.u()&&t.isVisible()&&i.actualBounds.u()&&i.Ff()&&(null===(n=t.tk(e))?(n=this.makeAdornment(i,!0),t.Gh(e,n)):n.o()),null===n&&t.Gf(e))},si.prototype.makeAdornment=function(t,e){var n=new tl;return n.type=hh.Link,null!==(e=e?this.toHandleArchetype:this.fromHandleArchetype)&&n.add(e.copy()),n.adornedObject=t,n},si.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.Ut()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return null===e&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null!==e},si.prototype.doActivate=function(){var t=this.diagram;if(null===this.originalLink){var e=this.handle;if(null===e&&(null===(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"))&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo"))),null===e)return;var n=e.part;if(!(n instanceof tl&&n.adornedPart instanceof wl))return;this.handle=e,this.isForwards=null===n||"RelinkTo"===n.category,this.originalLink=n.adornedPart}this.va(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.Fx.set(this.originalLink.actualBounds),null!==this.originalLink&&0<this.originalLink.pointsCount&&(null===this.originalLink.fromNode&&(null!==this.temporaryFromPort&&(this.temporaryFromPort.desiredSize=ft),null!==this.temporaryFromNode&&(this.temporaryFromNode.location=this.originalLink.i(0))),null===this.originalLink.toNode&&(null!==this.temporaryToPort&&(this.temporaryToPort.desiredSize=ft),null!==this.temporaryToNode&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.Ua(),t.add(this.temporaryLink)),this.isActive=!0},si.prototype.copyLinkProperties=function(t,e){var n;null!==t&&null!==e&&(e.adjusting=t.adjusting,e.corner=t.corner,(n=t.curve)!==Vl&&n!==Il||(n=zl),e.curve=n,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength)},si.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.Jg()},si.prototype.doStop=function(){ei.prototype.doStop.call(this),this.handle=null},si.prototype.doMouseUp=function(){var t,e,n,i,o,r,a;this.isActive&&(t=this.diagram,this.transactionResult=null,e=this.originalFromNode,n=this.originalFromPort,i=this.originalToNode,o=this.originalToPort,r=this.originalLink,this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort?(a=this.targetPort.part)instanceof el&&(this.isForwards?(i=a,o=this.targetPort):(e=a,n=this.targetPort)):this.isUnconnectedLinkValid?this.isForwards?o=i=null:n=e=null:r=null,null!==r?(this.reconnectLink(r,this.isForwards?i:e,this.isForwards?o:n,this.isForwards),null===this.targetPort&&(this.isForwards?r.defaultToPoint=t.lastInput.documentPoint:r.defaultFromPoint=t.lastInput.documentPoint,r.Ua()),t.allowSelect&&(r.isSelected=!0),this.transactionResult=this.name,t.R("LinkRelinked",r,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.Nq(this.Fx)),this.stopTool()},si.prototype.reconnectLink=function(t,e,n,i){return n=null!==n&&null!==n.portId?n.portId:"",i?(t.toNode=e,t.toPortId=n):(t.fromNode=e,t.fromPortId=n),!0},si.prototype.doNoRelink=function(){},s.Object.defineProperties(si.prototype,{fromHandleArchetype:{get:function(){return this.T},set:function(t){this.T=t}},toHandleArchetype:{get:function(){return this.cn},set:function(t){this.cn=t}},handle:{get:function(){return this.I},set:function(t){if(null!==t&&!(t.part instanceof tl))throw Error("new handle is not in an Adornment: "+t);this.I=t}}}),si.className="RelinkingTool",M("linkingTool",function(){return this.findTool("Linking")},function(t){this.Xa("Linking",t,this.mouseMoveTools)}),M("relinkingTool",function(){return this.findTool("Relinking")},function(t){this.Xa("Relinking",t,this.mouseDownTools)}),n(ui,Mn),ui.prototype.Yv=function(t){return t&&t.Rs&&0!==t.Rs.value?t.Rs:di},ui.prototype.Wm=function(t,e){t.Rs=e},ui.prototype.updateAdornments=function(t){var e,n;null!==t&&t instanceof wl&&(e=null,t.isSelected&&!this.diagram.isReadOnly&&(!(null!==(n=t.path)&&t.canReshape()&&t.actualBounds.u()&&t.isVisible()&&n.actualBounds.u()&&n.Ff())||null!==(e=t.tk(this.name))&&e.Bx===t.pointsCount&&e.Qx===t.resegmentable||null!==(e=this.makeAdornment(n))&&(e.Bx=t.pointsCount,e.Qx=t.resegmentable,t.Gh(this.name,e))),null===e&&t.Gf(this.name))},ui.prototype.makeAdornment=function(t){var e=t.part,n=e.pointsCount,i=e.isOrthogonal,o=null;if(null!==e.points&&1<n){(o=new tl).type=hh.Link,n=e.firstPickIndex;var r,a=e.lastPickIndex,s=i?1:0;if(e.resegmentable&&e.computeCurve()!==Rl)for(var h=n+s;h<a-s;h++){var u=this.makeResegmentHandle(t,h);null!==u&&(u.segmentIndex=h,u.segmentFraction=.5,u.fromMaxLinks=999,o.add(u))}for(s=n+1;s<a;s++)null!==(h=this.makeHandle(t,s))&&((h.segmentIndex=s)!==n&&(s===n+1&&i?(u=e.i(n),r=e.i(n+1),Ue.A(u.x,r.x)&&Ue.A(u.y,r.y)&&(r=e.i(n-1)),Ue.A(u.x,r.x)?(this.Wm(h,gi),h.cursor="n-resize"):Ue.A(u.y,r.y)&&(this.Wm(h,ci),h.cursor="w-resize")):s===a-1&&i?(u=e.i(a-1),r=e.i(a),Ue.A(u.x,r.x)&&Ue.A(u.y,r.y)&&(u=e.i(a+1)),Ue.A(u.x,r.x)?(this.Wm(h,gi),h.cursor="n-resize"):Ue.A(u.y,r.y)&&(this.Wm(h,ci),h.cursor="w-resize")):s!==a&&(this.Wm(h,fi),h.cursor="move")),o.add(h));o.adornedObject=t}return o},ui.prototype.makeHandle=function(){var t=this.handleArchetype;return null===t?null:t.copy()},ui.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return null===t?null:t.copy()},ui.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowReshape||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},ui.prototype.doActivate=function(){var t=this.diagram;if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle){var e=this.handle.part.adornedPart;if(e instanceof wl){if(this.vu=e,t.isMouseCaptured=!0,this.va(this.name),e.resegmentable&&999===this.handle.fromMaxLinks){var n=e.points.copy(),i=this.getResegmentingPoint();if(n.vb(this.handle.segmentIndex+1,i),e.isOrthogonal&&n.vb(this.handle.segmentIndex+1,i),e.points=n,e.Lb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),null===this.handle)return void this.doDeactivate()}this.Gx=e.i(this.handle.segmentIndex),this.Ks=e.points.copy(),this.isActive=!0}}},ui.prototype.doDeactivate=function(){this.Jg(),this.vu=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},ui.prototype.doCancel=function(){var t=this.adornedLink;null!==t&&(t.points=this.Ks),this.stopTool()},ui.prototype.getResegmentingPoint=function(){return this.handle.ga(Wt)},ui.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},ui.prototype.doMouseUp=function(){var t,e,n,i,o,r,a,s=this.diagram;this.isActive&&(t=this.computeReshape(s.lastInput.documentPoint),this.reshape(t),null!==(t=this.adornedLink)&&t.resegmentable&&(e=this.handle.segmentIndex,n=t.i(e-1),i=t.i(e),o=t.i(e+1),t.isOrthogonal?e>t.firstPickIndex+1&&e<t.lastPickIndex-1&&(r=t.i(e-2),Math.abs(n.x-i.x)<this.resegmentingDistance&&Math.abs(n.y-i.y)<this.resegmentingDistance&&(li(this,r,n,i,o,!0)||li(this,r,n,i,o,!1))?(a=t.points.copy(),li(this,r,n,i,o,!0)?(a.nd(e-2,new ee(r.x,(o.y+r.y)/2)),a.nd(e+1,new ee(o.x,(o.y+r.y)/2))):(a.nd(e-2,new ee((o.x+r.x)/2,r.y)),a.nd(e+1,new ee((o.x+r.x)/2,o.y))),a.bb(e),a.bb(e-1),t.points=a,t.Lb()):(r=t.i(e+2),Math.abs(i.x-o.x)<this.resegmentingDistance&&Math.abs(i.y-o.y)<this.resegmentingDistance&&(li(this,n,i,o,r,!0)||li(this,n,i,o,r,!1))&&(a=t.points.copy(),li(this,n,i,o,r,!0)?(a.nd(e-1,new ee(n.x,(n.y+r.y)/2)),a.nd(e+2,new ee(r.x,(n.y+r.y)/2))):(a.nd(e-1,new ee((n.x+r.x)/2,n.y)),a.nd(e+2,new ee((n.x+r.x)/2,r.y))),a.bb(e+1),a.bb(e),t.points=a,t.Lb()))):(r=ee.alloc(),Ue.Qh(n.x,n.y,o.x,o.y,i.x,i.y,r)&&r.Fe(i)<this.resegmentingDistance*this.resegmentingDistance&&((n=t.points.copy()).bb(e),t.points=n,t.Lb()),ee.free(r))),s.Oa(),this.transactionResult=this.name,s.R("LinkReshaped",this.adornedLink,this.Ks)),this.stopTool()},ui.prototype.reshape=function(t){var e=this.adornedLink;e.Th();var n,i,o,r=this.handle.segmentIndex,a=this.Yv(this.handle);e.isOrthogonal?r===e.firstPickIndex+1?(r=e.firstPickIndex+1,a===gi?(e.K(r,e.i(r-1).x,t.y),e.K(r+1,e.i(r+2).x,t.y)):a===ci&&(e.K(r,t.x,e.i(r-1).y),e.K(r+1,t.x,e.i(r+2).y))):r===e.lastPickIndex-1?(r=e.lastPickIndex-1,a===gi?(e.K(r-1,e.i(r-2).x,t.y),e.K(r,e.i(r+1).x,t.y)):a===ci&&(e.K(r-1,t.x,e.i(r-2).y),e.K(r,t.x,e.i(r+1).y))):(a=r,n=e.i(a),i=e.i(a-1),o=e.i(a+1),Ue.A(i.x,n.x)&&Ue.A(n.y,o.y)?(Ue.A(i.x,e.i(a-2).x)&&!Ue.A(i.y,e.i(a-2).y)?(e.m(a,t.x,i.y),r++,a++):e.K(a-1,t.x,i.y),Ue.A(o.y,e.i(a+2).y)&&!Ue.A(o.x,e.i(a+2).x)?e.m(a+1,o.x,t.y):e.K(a+1,o.x,t.y)):Ue.A(i.y,n.y)&&Ue.A(n.x,o.x)?(Ue.A(i.y,e.i(a-2).y)&&!Ue.A(i.x,e.i(a-2).x)?(e.m(a,i.x,t.y),r++,a++):e.K(a-1,i.x,t.y),Ue.A(o.x,e.i(a+2).x)&&!Ue.A(o.y,e.i(a+2).y)?e.m(a+1,t.x,o.y):e.K(a+1,t.x,o.y)):Ue.A(i.x,n.x)&&Ue.A(n.x,o.x)?(Ue.A(i.x,e.i(a-2).x)&&!Ue.A(i.y,e.i(a-2).y)?(e.m(a,t.x,i.y),r++,a++):e.K(a-1,t.x,i.y),Ue.A(o.x,e.i(a+2).x)&&!Ue.A(o.y,e.i(a+2).y)?e.m(a+1,t.x,o.y):e.K(a+1,t.x,o.y)):Ue.A(i.y,n.y)&&Ue.A(n.y,o.y)&&(Ue.A(i.y,e.i(a-2).y)&&!Ue.A(i.x,e.i(a-2).x)?(e.m(a,i.x,t.y),r++,a++):e.K(a-1,i.x,t.y),Ue.A(o.y,e.i(a+2).y)&&!Ue.A(o.x,e.i(a+2).x)?e.m(a+1,o.x,t.y):e.K(a+1,o.x,t.y)),e.K(r,t.x,t.y)):(e.K(r,t.x,t.y),a=e.fromNode,n=e.fromPort,null===a||null!==(i=a.findVisibleNode())&&i!==a&&(n=(a=i).port),1===r&&e.computeSpot(!0,n).mc()&&(i=n.ga(Wt,ee.alloc()),a=e.getLinkPointFromPoint(a,n,i,t,!0,ee.alloc()),e.K(0,a.x,a.y),ee.free(i),ee.free(a)),a=e.toNode,n=e.toPort,null===a||null!==(i=a.findVisibleNode())&&i!==a&&(n=(a=i).port),r===e.pointsCount-2&&e.computeSpot(!1,n).mc()&&(r=n.ga(Wt,ee.alloc()),t=e.getLinkPointFromPoint(a,n,r,t,!1,ee.alloc()),e.K(e.pointsCount-1,t.x,t.y),ee.free(r),ee.free(t))),e.xf()},ui.prototype.computeReshape=function(t){var e=this.adornedLink,n=this.handle.segmentIndex;switch(this.Yv(this.handle)){case fi:return t;case gi:return new ee(e.i(n).x,t.y);case ci:return new ee(t.x,e.i(n).y);default:return e.i(n)}},s.Object.defineProperties(ui.prototype,{handleArchetype:{get:function(){return this.v},set:function(t){this.v=t}},midHandleArchetype:{get:function(){return this.I},set:function(t){this.I=t}},handle:{get:function(){return this.l},set:function(t){if(null!==t&&!(t.part instanceof tl))throw Error("new handle is not in an Adornment: "+t);this.l=t}},adornedLink:{get:function(){return this.vu}},resegmentingDistance:{get:function(){return this.T},set:function(t){this.T=t}},originalPoint:{get:function(){return this.Gx}},originalPoints:{get:function(){return this.Ks}}}),ui.prototype.setReshapingBehavior=ui.prototype.Wm,ui.prototype.getReshapingBehavior=ui.prototype.Yv;var di=new j(ui,"None",0),ci=new j(ui,"Horizontal",1),gi=new j(ui,"Vertical",2),fi=new j(ui,"All",3);function pi(){Mn.call(this),this.name="Resizing",this.fg=new xe(1,1).freeze(),this.eg=new xe(9999,9999).freeze(),this.Qg=new xe(NaN,NaN).freeze(),this.I=!1,this.T=!0,this.ee=null;var t=new Oh;t.alignmentFocus=Wt,t.figure="Rectangle",t.desiredSize=mt,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.v=t,this.l=null,this.Js=new ee,this.Ex=new xe,this.mp=new ee,this.Mu=new xe(0,0),this.Lu=new xe(1/0,1/0),this.Ku=new xe(1,1),this.Ax=!0}function mi(){Mn.call(this),this.name="Rotating",this.Ka=45,this.Ja=2,this.mp=new ee,this.ee=null;var t=new Oh;t.figure="Ellipse",t.desiredSize=yt,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.v=t,this.l=null,this.Cx=0,this.mv=new ee(NaN,NaN),this.I=0,this.T=50}function yi(){Mn.call(this),this.name="ClickSelecting"}function vi(){Mn.call(this),this.name="Action",this.Pk=null}function wi(){Mn.call(this),this.name="ClickCreating",this.xj=null,this.v=!0,this.l=!1,this.ux=new ee(0,0)}function bi(){Mn.call(this),this.name="DragSelecting",this.il=175,this.v=!1;var t=new Ou;t.layerName="Tool",t.selectable=!1;var e=new Oh;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.l=t}function Si(){Mn.call(this),this.name="Panning",this.jv=new ee,this.gz=new ee,this.Pg=!1;var e=this;this.Jx=function(){var t=e.diagram;null!==t&&t.removeEventListener(d.document,"scroll",e.Jx,!1),e.stopTool()}}function xi(){this.T=this.I=this.l=this.v=null}function Pi(t,e,n){this.text=t,this.$x=e,this.visible=n}function ki(){Mn.call(this),this.name="ContextMenu",this.v=this.Bu=this.l=null,this.zx=new ee,this.Cu=null,this.Xu=!1;var t=this;this.wv=function(){t.stopTool()}}function Li(t){return t.preventDefault(),!1}function Mi(t){var e,n,i=t.diagram;t.isActive?null!==(e=t.currentContextMenu)&&(e instanceof xi||null!==(n=i.Ub(i.lastInput.documentPoint,null,null))&&n.Gg(e)&&t.standardMouseClick(null,null),t.stopTool(),t.canStart()&&(i.currentTool=t).doMouseUp()):t.canStart()&&(_i(t,!0),t.isActive||t.stopTool())}function _i(t,e,n){var i;void 0===n&&(n=null),t.Xu||(t.Xu=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.Xu=!1,e)||(t.isActive=!0,e=Ni,null===n&&(n=t.findObjectWithContextMenu()),null!==n?null!==(i=n.contextMenu)?(t.currentObject=n instanceof Na?n:null,t.showContextMenu(i,t.currentObject)):null!==e&&t.showContextMenu(e,t.currentObject):null!==e&&t.showContextMenu(e,null),t.currentContextMenu instanceof tl&&!t.currentContextMenu.visible&&t.stopTool())}ui.className="LinkReshapingTool",ui.None=di,ui.Horizontal=ci,ui.Vertical=gi,ui.All=fi,M("linkReshapingTool",function(){return this.findTool("LinkReshaping")},function(t){this.Xa("LinkReshaping",t,this.mouseDownTools)}),n(pi,Mn),pi.prototype.updateAdornments=function(t){if(!(null===t||t instanceof wl)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,n=t.tk(this.name);if(null!==e&&t.canResize()&&t.actualBounds.u()&&t.isVisible()&&e.actualBounds.u()&&e.Ff()&&(null!==n&&n.adornedObject===e||(n=this.makeAdornment(e)),null!==n))return e=e.lj(),Wu(t)&&this.updateResizeHandles(n,e),void t.Gh(this.name,n)}t.Gf(this.name)}},pi.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(null===e){(e=new tl).type=hh.Spot,e.locationSpot=Wt;var n=new vl;n.isPanelMain=!0,e.add(n),e.add(this.makeHandle(t,Yt)),e.add(this.makeHandle(t,Kt)),e.add(this.makeHandle(t,Qt)),e.add(this.makeHandle(t,Jt)),e.add(this.makeHandle(t,_e)),e.add(this.makeHandle(t,Ae)),e.add(this.makeHandle(t,Te)),e.add(this.makeHandle(t,Ne))}else if(Sh(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},pi.prototype.makeHandle=function(t,e){return null===(t=this.handleArchetype)?null:((t=t.copy()).alignment=e,t)},pi.prototype.updateResizeHandles=function(t,e){if(null!==t)if(!t.alignment.Mb()&&("pointer"===t.cursor||0<t.cursor.indexOf("resize")))t:{var n=t.alignment;if(n.mc()&&(n=Wt),n.x<=0)e=n.y<=0?e+225:1<=n.y?e+135:e+180;else if(1<=n.x)n.y<=0?e+=315:1<=n.y&&(e+=45);else if(n.y<=0)e+=270;else{if(!(1<=n.y))break t;e+=90}e<0?e+=360:360<=e&&(e-=360),t.cursor=e<22.5?"e-resize":e<67.5?"se-resize":e<112.5?"s-resize":e<157.5?"sw-resize":e<202.5?"w-resize":e<247.5?"nw-resize":e<292.5?"n-resize":e<337.5?"ne-resize":"e-resize"}else if(t instanceof hh)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)},pi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowResize||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},pi.prototype.doActivate=function(){var t=this.diagram;null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle&&(this.adornedObject=this.handle.part.adornedObject,null!==this.adornedObject&&(t.isMouseCaptured=!0,this.Ax=t.animationManager.isEnabled,t.animationManager.isEnabled=!1,this.va(this.name),this.Js.set(this.adornedObject.ga(this.handle.alignment.kw())),this.mp.set(this.adornedObject.part.location),this.Ex.set(this.adornedObject.desiredSize),this.Ku=this.computeCellSize(),this.Mu=this.computeMinSize(),this.Lu=this.computeMaxSize(),this.isActive=!0))},pi.prototype.doDeactivate=function(){var t=this.diagram;this.Jg(),this.ee=this.handle=null,this.isActive=t.isMouseCaptured=!1,t.animationManager.isEnabled=this.Ax},pi.prototype.doCancel=function(){null!==this.adornedObject&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},pi.prototype.doMouseMove=function(){var t,e,n,i,o,r=this.diagram;this.isActive&&(o=this.Mu,t=this.Lu,e=this.Ku,n=this.adornedObject.Nt(r.lastInput.documentPoint,ee.alloc()),i=this.computeReshape(),o=this.computeResize(n,this.handle.alignment,o,t,e,i),this.resize(o),r.cd(),ee.free(n))},pi.prototype.doMouseUp=function(){var t,e,n,i,o,r=this.diagram;this.isActive&&(o=this.Mu,t=this.Lu,e=this.Ku,n=this.adornedObject.Nt(r.lastInput.documentPoint,ee.alloc()),i=this.computeReshape(),o=this.computeResize(n,this.handle.alignment,o,t,e,i),this.resize(o),ee.free(n),r.Oa(),this.transactionResult=this.name,r.R("PartResized",this.adornedObject,this.originalDesiredSize)),this.stopTool()},pi.prototype.resize=function(t){var e,n,i=this.diagram,o=this.adornedObject;null!==o&&(o.desiredSize=t.size,(t=o.part).Ta(),o=o.ga(this.handle.alignment.kw()),t instanceof pl?((e=new X).add(t),this.dragsMembers||null!==t.placeholder||((n=new wa).dragsMembers=!1),i.moveParts(e,this.oppositePoint.copy().ce(o),!0,n)):t.location=t.location.copy().ce(o).add(this.oppositePoint),i.cd())},pi.prototype.computeResize=function(t,e,n,i,o,r){e.mc()&&(e=Wt);var a,s=this.adornedObject.naturalBounds,h=s.x,u=s.y,l=s.x+s.width,d=s.y+s.height,c=1;return r||((c=s.width)<=0&&(c=1),(a=s.height)<=0&&(a=1),c=a/c),a=ee.alloc(),Ue.Eq(t.x,t.y,h,u,o.width,o.height,a),t=s.copy(),e.x<=0?e.y<=0?(t.x=Math.max(a.x,l-i.width),t.x=Math.min(t.x,l-n.width),t.width=Math.max(l-t.x,n.width),t.y=Math.max(a.y,d-i.height),t.y=Math.min(t.y,d-n.height),t.height=Math.max(d-t.y,n.height),r||(1<=t.height/t.width?(t.height=Math.max(Math.min(c*t.width,i.height),n.height),t.width=t.height/c):(t.width=Math.max(Math.min(t.height/c,i.width),n.width),t.height=c*t.width),t.x=l-t.width,t.y=d-t.height)):1<=e.y?(t.x=Math.max(a.x,l-i.width),t.x=Math.min(t.x,l-n.width),t.width=Math.max(l-t.x,n.width),t.height=Math.max(Math.min(a.y-u,i.height),n.height),r||(1<=t.height/t.width?(t.height=Math.max(Math.min(c*t.width,i.height),n.height),t.width=t.height/c):(t.width=Math.max(Math.min(t.height/c,i.width),n.width),t.height=c*t.width),t.x=l-t.width)):(t.x=Math.max(a.x,l-i.width),t.x=Math.min(t.x,l-n.width),t.width=l-t.x,r||(t.height=Math.max(Math.min(c*t.width,i.height),n.height),t.width=t.height/c,t.y=u+.5*(d-u-t.height))):1<=e.x?e.y<=0?(t.width=Math.max(Math.min(a.x-h,i.width),n.width),t.y=Math.max(a.y,d-i.height),t.y=Math.min(t.y,d-n.height),t.height=Math.max(d-t.y,n.height),r||(1<=t.height/t.width?(t.height=Math.max(Math.min(c*t.width,i.height),n.height),t.width=t.height/c):(t.width=Math.max(Math.min(t.height/c,i.width),n.width),t.height=c*t.width),t.y=d-t.height)):1<=e.y?(t.width=Math.max(Math.min(a.x-h,i.width),n.width),t.height=Math.max(Math.min(a.y-u,i.height),n.height),r||(1<=t.height/t.width?(t.height=Math.max(Math.min(c*t.width,i.height),n.height),t.width=t.height/c):(t.width=Math.max(Math.min(t.height/c,i.width),n.width),t.height=c*t.width))):(t.width=Math.max(Math.min(a.x-h,i.width),n.width),r||(t.height=Math.max(Math.min(c*t.width,i.height),n.height),t.width=t.height/c,t.y=u+.5*(d-u-t.height))):e.y<=0?(t.y=Math.max(a.y,d-i.height),t.y=Math.min(t.y,d-n.height),t.height=d-t.y,r||(t.width=Math.max(Math.min(t.height/c,i.width),n.width),t.height=c*t.width,t.x=h+.5*(l-h-t.width))):1<=e.y&&(t.height=Math.max(Math.min(a.y-u,i.height),n.height),r||(t.width=Math.max(Math.min(t.height/c,i.width),n.width),t.height=c*t.width,t.x=h+.5*(l-h-t.width))),ee.free(a),t},pi.prototype.computeReshape=function(){var t=Or;return this.adornedObject instanceof Oh&&(t=Gh(this.adornedObject)),!(t===Br||this.diagram.lastInput.shift)},pi.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},pi.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},pi.prototype.computeCellSize=function(){var t=new xe(NaN,NaN),e=this.adornedObject.part;return null!==e&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&(null!==(e=e.grid)&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height))),!isNaN(t.width)&&0!==t.width&&1/0!==t.width||(t.width=1),!isNaN(t.height)&&0!==t.height&&1/0!==t.height||(t.height=1),t},s.Object.defineProperties(pi.prototype,{handleArchetype:{get:function(){return this.v},set:function(t){this.v=t}},handle:{get:function(){return this.l},set:function(t){if(null!==t&&!(t.part instanceof tl))throw Error("new handle is not in an Adornment: "+t);this.l=t}},adornedObject:{get:function(){return this.ee},set:function(t){if(null!==t&&t.part instanceof tl)throw Error("new handle must not be in an Adornment: "+t);this.ee=t}},minSize:{get:function(){return this.fg},set:function(t){var e;this.fg.w(t)||(e=t.width,isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.fg.h(e,t))}},maxSize:{get:function(){return this.eg},set:function(t){var e;this.eg.w(t)||(e=t.width,isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.eg.h(e,t))}},cellSize:{get:function(){return this.Qg},set:function(t){this.Qg.w(t)||this.Qg.assign(t)}},isGridSnapEnabled:{get:function(){return this.I},set:function(t){this.I=t}},dragsMembers:{get:function(){return this.T},set:function(t){this.T=t}},oppositePoint:{get:function(){return this.Js},set:function(t){this.Js.w(t)||this.Js.assign(t)}},originalDesiredSize:{get:function(){return this.Ex}},originalLocation:{get:function(){return this.mp}}}),pi.className="ResizingTool",M("resizingTool",function(){return this.findTool("Resizing")},function(t){this.Xa("Resizing",t,this.mouseDownTools)}),n(mi,Mn),mi.prototype.updateAdornments=function(t){if(null!==t){if(t.Ph()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&(null!==(e=t.rotateObject)&&t.canRotate()&&t.actualBounds.u()&&t.isVisible()&&e.actualBounds.u()&&e.Ff())){var n=t.tk(this.name);if(null!==n&&n.adornedObject===e||(n=this.makeAdornment(e)),null!==n)return n.angle=e.lj(),null===n.placeholder&&(n.location=this.computeAdornmentLocation(e)),void t.Gh(this.name,n)}t.Gf(this.name)}},mi.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(null===e){(e=new tl).type=hh.Position,e.locationSpot=Wt;var n=this.handleArchetype;null!==n&&e.add(n.copy())}else if(Sh(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},mi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowRotate||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},mi.prototype.doActivate=function(){var t=this.diagram;if(null===this.adornedObject){if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null===this.handle)return;this.adornedObject=this.handle.part.adornedObject}null!==this.adornedObject&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.va(this.name),this.Cx=this.adornedObject.angle,this.mv=this.computeRotationPoint(this.adornedObject),this.mp=this.adornedObject.part.location.copy(),this.isActive=!0)},mi.prototype.computeRotationPoint=function(t){var e=t.part,n=e.locationObject;return e.rotationSpot.ib()?t.ga(e.rotationSpot):t===e||t===n?n.ga(e.locationSpot):t.ga(Wt)},mi.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.u()||(e=this.computeRotationPoint(t)),e=t.Nt(e);var n=this.handleAngle;n<0?n+=360:360<=n&&(n-=360),n=Math.round(45*Math.round(n/45));var i=this.handleDistance;return 0===n?e.x=t.naturalBounds.width+i:45===n?(e.x=t.naturalBounds.width+i,e.y=t.naturalBounds.height+i):90===n?e.y=t.naturalBounds.height+i:135===n?(e.x=-i,e.y=t.naturalBounds.height+i):180===n?e.x=-i:225===n?(e.x=-i,e.y=-i):270===n?e.y=-i:315===n&&(e.x=t.naturalBounds.width+i,e.y=-i),t.ga(e)},mi.prototype.doDeactivate=function(){var t=this.diagram;this.Jg(),this.ee=this.handle=null,this.mv=new ee(NaN,NaN),this.isActive=t.isMouseCaptured=!1},mi.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},mi.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},mi.prototype.doMouseUp=function(){var t,e=this.diagram;this.isActive&&(e.delaysLayout=!1,t=this.computeRotate(e.lastInput.documentPoint),this.rotate(t),e.Oa(),this.transactionResult=this.name,e.R("PartRotated",this.adornedObject,this.originalAngle)),this.stopTool()},mi.prototype.rotate=function(t){var e,n,i=this.adornedObject;null!==i&&(i.angle=t,(i=i.part).Ta(),(e=i.locationObject)!==(n=i.rotateObject)&&!e.Gg(n)||(e=this.mp.copy(),i.location=e.ce(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.cd())},mi.prototype.computeRotate=function(t){t=this.rotationPoint.Sa(t)-this.handleAngle;var e=this.adornedObject.panel;null!==e&&(t-=e.lj()),360<=t?t-=360:t<0&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var n=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<n&&(t%e<n?t=Math.floor(t/e)*e:e-n<t%e&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:t<0&&(t+=360),t},s.Object.defineProperties(mi.prototype,{handleArchetype:{get:function(){return this.v},set:function(t){this.v=t}},handle:{get:function(){return this.l},set:function(t){if(null!==t&&!(t.part instanceof tl))throw Error("new handle is not in an Adornment: "+t);this.l=t}},adornedObject:{get:function(){return this.ee},set:function(t){if(null!==t&&t.part instanceof tl)throw Error("new handle must not be in an Adornment: "+t);this.ee=t}},snapAngleMultiple:{get:function(){return this.Ka},set:function(t){this.Ka=t}},snapAngleEpsilon:{get:function(){return this.Ja},set:function(t){this.Ja=t}},originalAngle:{get:function(){return this.Cx}},rotationPoint:{get:function(){return this.mv}},handleAngle:{get:function(){return this.I},set:function(t){this.I=t}},handleDistance:{get:function(){return this.T},set:function(t){this.T=t}}}),mi.className="RotatingTool",M("rotatingTool",function(){return this.findTool("Rotating")},function(t){this.Xa("Rotating",t,this.mouseDownTools)}),n(yi,Mn),yi.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},yi.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},yi.className="ClickSelectingTool",n(vi,Mn),vi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,n=t.Ub(e.documentPoint,function(t){for(;null!==t.panel&&!t.isActionable;)t=t.panel;return t});return null!==n&&(!!n.isActionable&&(this.Pk=n,t.Bj=t.Ub(e.documentPoint,null,null),!0))},vi.prototype.doMouseDown=function(){var t,e;this.isActive?(t=this.diagram.lastInput,null===(e=this.Pk)||null!==(t.targetObject=e).actionDown&&e.actionDown(t,e)):this.canStart()&&this.doActivate()},vi.prototype.doMouseMove=function(){var t,e;this.isActive&&(t=this.diagram.lastInput,null===(e=this.Pk)||null!==(t.targetObject=e).actionMove&&e.actionMove(t,e))},vi.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.Pk;if(null===e)return;null!==(t.targetObject=e).actionUp&&e.actionUp(t,e),this.standardMouseClick(function(t){for(;null!==t.panel&&(!t.isActionable||t!==e);)t=t.panel;return t},function(t){return t===e})}this.stopTool()},vi.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.Pk;null!==e&&(null!==(t.targetObject=e).actionCancel&&e.actionCancel(t,e),this.stopTool())},vi.prototype.doStop=function(){this.Pk=null},vi.className="ActionTool",n(wi,Mn),wi.prototype.canStart=function(){if(!this.isEnabled||null===this.archetypeNodeData)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(1===t.lastInput.clickCount&&(this.ux=t.lastInput.viewPoint.copy()),2!==t.lastInput.clickCount||this.isBeyondDragSize(this.ux))return!1}else if(1!==t.lastInput.clickCount)return!1;return t.currentTool===this||null===t.um(t.lastInput.documentPoint,!0)},wi.prototype.doMouseUp=function(){var t=this.diagram;this.isActive&&this.insertPart(t.lastInput.documentPoint),this.stopTool()},wi.prototype.insertPart=function(t){var e=this.diagram,n=this.archetypeNodeData;if(null===n)return null;var i,o=null;try{e.R("ChangingSelection",e.selection),this.va(this.name),n instanceof Ou?n.Wb()&&(Sh(n),null!==(o=n.copy())&&e.add(o)):null===n||y(i=e.model.copyNodeData(n))&&(e.model.uf(i),o=e.yc(i)),null!==o&&(i=ee.allocAt(t.x,t.y),this.isGridSnapEnabled&&cr(this.diagram,o,t,i),o.location=i,e.allowSelect&&(e.clearSelection(!0),o.isSelected=!0),ee.free(i)),e.Oa(),this.transactionResult=this.name,e.R("PartCreated",o)}finally{this.Jg(),e.R("ChangedSelection",e.selection)}return o},s.Object.defineProperties(wi.prototype,{archetypeNodeData:{get:function(){return this.xj},set:function(t){this.xj=t}},isDoubleClick:{get:function(){return this.v},set:function(t){this.v=t}},isGridSnapEnabled:{get:function(){return this.l},set:function(t){this.l=t}}}),wi.className="ClickCreatingTool",n(bi,Mn),bi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||null!==t.um(e.documentPoint,!0)))},bi.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},bi.prototype.doDeactivate=function(){var t=this.diagram;t.If(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},bi.prototype.doMouseMove=function(){var t,e,n,i=this.diagram;this.isActive&&null!==this.box&&(n=this.computeBoxBounds(),null===(t=this.box.$a("SHAPE"))&&(t=this.box.pb()),e=xe.alloc().h(n.width,n.height),n=ee.allocAt(n.x,n.y),t.desiredSize=e,this.box.position=n,xe.free(e),ee.free(n),(i.allowHorizontalScroll||i.allowVerticalScroll)&&i.Ft(i.lastInput.viewPoint))},bi.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.R("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},bi.prototype.computeBoxBounds=function(){var t=this.diagram;return new ne(t.firstInput.documentPoint,t.lastInput.documentPoint)},bi.prototype.selectInRect=function(t){var e=this.diagram,n=e.lastInput;if(t=e.py(t,this.isPartialInclusion),E?n.meta:n.control)if(n.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)(e=t.value).isSelected=!e.isSelected;else if(n.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0);else{for(n=new X,e=e.selection.iterator;e.next();){var i=e.value;t.contains(i)||n.add(i)}for(e=n.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0)}},s.Object.defineProperties(bi.prototype,{delay:{get:function(){return this.il},set:function(t){this.il=t}},isPartialInclusion:{get:function(){return this.v},set:function(t){this.v=t}},box:{get:function(){return this.l},set:function(t){this.l=t}}}),bi.className="DragSelectingTool",n(Si,Mn),Si.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},Si.prototype.doActivate=function(){var t=this.diagram;this.Pg?(t.lastInput.bubbles=!0,t.addEventListener(d.document,"scroll",this.Jx,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.jv.assign(t.position)),this.isActive=!0},Si.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},Si.prototype.doCancel=function(){var t=this.diagram;t.position=this.jv,t.isMouseCaptured=!1,this.stopTool()},Si.prototype.doMouseMove=function(){this.move()},Si.prototype.doMouseUp=function(){this.move(),this.stopTool()},Si.prototype.move=function(){var t,e,n,i,o=this.diagram;this.isActive&&o&&(this.Pg?o.lastInput.bubbles=!0:(t=o.position,i=o.firstInput.documentPoint,e=o.lastInput.documentPoint,n=t.x+i.x-e.x,i=t.y+i.y-e.y,o.allowHorizontalScroll||(n=t.x),o.allowVerticalScroll||(i=t.y),o.position=this.gz.h(n,i)))},s.Object.defineProperties(Si.prototype,{bubbles:{get:function(){return this.Pg},set:function(t){this.Pg=t}},originalPosition:{get:function(){return this.jv}}}),Si.className="PanningTool",M("clickCreatingTool",function(){return this.findTool("ClickCreating")},function(t){this.Xa("ClickCreating",t,this.mouseUpTools)}),M("clickSelectingTool",function(){return this.findTool("ClickSelecting")},function(t){this.Xa("ClickSelecting",t,this.mouseUpTools)}),M("panningTool",function(){return this.findTool("Panning")},function(t){this.Xa("Panning",t,this.mouseMoveTools)}),M("dragSelectingTool",function(){return this.findTool("DragSelecting")},function(t){this.Xa("DragSelecting",t,this.mouseMoveTools)}),M("actionTool",function(){return this.findTool("Action")},function(t){this.Xa("Action",t,this.mouseDownTools)}),s.Object.defineProperties(xi.prototype,{mainElement:{get:function(){return this.I},set:function(t){this.I=t}},show:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t)}},hide:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t)}},valueFunction:{get:function(){return this.T},set:function(t){this.T=t}}}),xi.className="HTMLInfo",Pi.className="ContextMenuButtonInfo",n(ki,Mn),ki.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(this.isBeyondDragSize()||!t.lastInput.right||1<t.lastInput.clickCount)&&!!(t.lastInput.isTouchEvent&&null!==this.defaultTouchContextMenu||null!==this.findObjectWithContextMenu())},ki.prototype.doStart=function(){this.zx.set(this.diagram.firstInput.documentPoint)},ki.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},ki.prototype.findObjectWithContextMenu=function(t){void 0===t&&(t=null);var e=this.diagram,n=e.lastInput,i=null;if(t instanceof Mo||(i=t instanceof Na?t:e.Ub(n.documentPoint,null,function(t){return!t.layer.isTemporary})),null!==i){for(t=i;null!==t;){if(null!==t.contextMenu)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return i.part}else if(null!==e.contextMenu)return e;return null},ki.prototype.doActivate=function(){},ki.prototype.doMouseDown=function(){var t;Mn.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof tl&&(null!==(t=this.diagram.toolManager.findTool("Action"))&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())),this.diagram.toolManager.mouseDownTools.contains(this)&&Mi(this)},ki.prototype.doMouseUp=function(){var t;this.isActive&&this.currentContextMenu instanceof tl&&(null!==(t=this.diagram.toolManager.findTool("Action"))&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())),Mi(this)},ki.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},ki.prototype.showContextMenu=function(t,e){var n,i=this.diagram;t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof tl?(t.layerName="Tool",t.selectable=!1,t.scale=1/i.scale,t.category=this.name,null!==t.placeholder&&(t.placeholder.scale=i.scale),null!==(n=t.diagram)&&n!==i&&n.remove(t),i.add(t),null!==e?t.adornedObject=e:t.data=i.model,t.Ta(),this.positionContextMenu(t,e)):t instanceof xi&&t.show(e,i,this),this.currentContextMenu=t},ki.prototype.positionContextMenu=function(t){var e,n,i,o;null===t.placeholder&&(n=(e=this.diagram).lastInput.documentPoint.copy(),i=t.measuredBounds,o=e.viewportBounds,e.lastInput.isTouchEvent&&(n.x-=i.width),n.x+i.width>o.right&&(n.x-=i.width+5/e.scale),n.x<o.x&&(n.x=o.x),n.y+i.height>o.bottom&&(n.y-=i.height+5/e.scale),n.y<o.y&&(n.y=o.y),t.position=n)},ki.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;null!==e&&(e instanceof tl?(t.remove(e),null!==this.Bu&&this.Bu.Gf(e.category),e.data=null,e.adornedObject=null):e instanceof xi&&(null!==e.hide?e.hide(t,this):null!==e.mainElement&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())},ki.prototype.showDefaultContextMenu=function(){var e,t,n=this.diagram;null===this.Cu&&(this.Cu=(e=this,(t=new X).add(new Pi("Copy",function(t){t.commandHandler.copySelection()},function(t){return t.commandHandler.canCopySelection()})),t.add(new Pi("Cut",function(t){t.commandHandler.cutSelection()},function(t){return t.commandHandler.canCutSelection()})),t.add(new Pi("Delete",function(t){t.commandHandler.deleteSelection()},function(t){return t.commandHandler.canDeleteSelection()})),t.add(new Pi("Paste",function(t){t.commandHandler.pasteSelection(e.mouseDownPoint)},function(t){return t.commandHandler.canPasteSelection(e.mouseDownPoint)})),t.add(new Pi("Select All",function(t){t.commandHandler.selectAll()},function(t){return t.commandHandler.canSelectAll()})),t.add(new Pi("Undo",function(t){t.commandHandler.undo()},function(t){return t.commandHandler.canUndo()})),t.add(new Pi("Redo",function(t){t.commandHandler.redo()},function(t){return t.commandHandler.canRedo()})),t.add(new Pi("Scroll To Part",function(t){t.commandHandler.scrollToPart()},function(t){return t.commandHandler.canScrollToPart()})),t.add(new Pi("Zoom To Fit",function(t){t.commandHandler.zoomToFit()},function(t){return t.commandHandler.canZoomToFit()})),t.add(new Pi("Reset Zoom",function(t){t.commandHandler.resetZoom()},function(t){return t.commandHandler.canResetZoom()})),t.add(new Pi("Group Selection",function(t){t.commandHandler.groupSelection()},function(t){return t.commandHandler.canGroupSelection()})),t.add(new Pi("Ungroup Selection",function(t){t.commandHandler.ungroupSelection()},function(t){return t.commandHandler.canUngroupSelection()})),t.add(new Pi("Edit Text",function(t){t.commandHandler.editTextBlock()},function(t){return t.commandHandler.canEditTextBlock()})),t)),Ci.innerHTML="",Ti.addEventListener("click",this.wv,!1);var i=this,o=c("ul");o.className="goCXul",Ci.appendChild(o),o.innerHTML="";for(var r=this.Cu.iterator;r.next();){var a,s=r.value,h=s.visible;"function"!=typeof s.$x||"function"==typeof h&&!h(n)||((h=c("li")).className="goCXli",(a=c("a")).className="goCXa",a.href="#",a.az=s.$x,a.addEventListener("click",function(t){return this.az(n),i.stopTool(),t.preventDefault(),!1},!1),a.textContent=s.text,h.appendChild(a),o.appendChild(h))}Ci.style.display="block",Ti.style.display="block"},ki.prototype.hideDefaultContextMenu=function(){var t;null!==this.currentContextMenu&&this.currentContextMenu===Ni&&(Ci.style.display="none",Ti.style.display="none",null!==(t=this.diagram)&&t.removeEventListener(Ti,"click",this.wv,!1),this.currentContextMenu=null)},s.Object.defineProperties(ki.prototype,{currentContextMenu:{get:function(){return this.l},set:function(t){this.l=t,this.Bu=t instanceof tl?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return!1===Ai&&null===Ni&&Xr&&function(t){var e=new xi;e.show=function(t,e,n){n.showDefaultContextMenu()},e.hide=function(t,e){e.hideDefaultContextMenu()},Ni=e,t.wv=function(){t.stopTool()},e=c("div");var n=c("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",n.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var i=c("style");d.document.getElementsByTagName("head")[0].appendChild(i),i.sheet.insertRule(".goCXul { list-style: none; }",0),i.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),i.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),null!==(i=t.diagram)&&(i.addEventListener(e,"contextmenu",Li,!1),i.addEventListener(e,"selectstart",Li,!1),i.addEventListener(n,"contextmenu",Li,!1)),e.className="goCXforeground",n.className="goCXbackground",d.document.body&&(d.document.body.appendChild(e),d.document.body.appendChild(n)),Ci=e,Ti=n,Ai=!0}(this),Ni},set:function(t){null===t&&(Ai=!0),Ni=t}},currentObject:{get:function(){return this.v},set:function(t){this.v=t}},mouseDownPoint:{get:function(){return this.zx}}});var Ni=null,Ai=!1,Ti=null,Ci=null;function Di(){var n,t,l;Mn.call(this),this.name="TextEditing",this.zh=new Hh,this.Ka=null,this.Ja=zi,this.Wi=null,this.ia=Ii,this.I=1,this.T=!0,this.v=null,this.l=new xi,this.Gu=null,t=(n=this).l,Xr&&(l=c("textarea"),(n.Gu=l).addEventListener("input",function(){var t;null!==n.textBlock&&(t=n.Gy(this.value),this.style.width=20+t.measuredBounds.width*this.YA+"px",this.rows=t.lineCount)},!1),l.addEventListener("keydown",function(t){var e;null!==n.textBlock&&(13===(e=t.which)?(!1===n.textBlock.isMultiline&&t.preventDefault(),n.acceptText(Gi)):9===e?(n.acceptText(Bi),t.preventDefault()):27===e&&(n.doCancel(),null!==n.diagram&&n.diagram.doFocus()))},!1),l.addEventListener("focus",function(){var t;null!==n.currentTextEditor&&n.state!==Ii&&(t=n.Gu,n.ia===Vi&&(n.ia=Ui),"function"==typeof t.select&&n.selectsTextOnActivate&&(t.select(),t.setSelectionRange(0,9999)))},!1),l.addEventListener("blur",function(){var t;null!==n.currentTextEditor&&n.state!==Ii&&("function"==typeof(t=n.Gu).focus&&t.focus(),"function"==typeof t.select&&n.selectsTextOnActivate&&(t.select(),t.setSelectionRange(0,9999)))},!1),t.valueFunction=function(){return l.value},t.mainElement=l,t.show=function(t,e,n){var i,o,r,a,s,h,u;t instanceof Hh&&n instanceof Di&&(n.state===Hi?(l.style.border="3px solid red",l.focus()):(u=t.ga(Wt),i=e.position,o=e.scale,(r=t.Af()*o)<n.minimumEditorScale&&(r=n.minimumEditorScale),a=t.naturalBounds.width*r+6,s=t.naturalBounds.height*r+2,h=(u.x-i.x)*o,u=(u.y-i.y)*o,l.value=t.text,e.div.style.font=t.font,l.style.position="absolute",l.style.zIndex="100",l.style.font="inherit",l.style.fontSize=100*r+"%",l.style.lineHeight="normal",l.style.width=a+"px",l.style.left=(h-a/2|0)-1+"px",l.style.top=(u-s/2|0)-1+"px",l.style.textAlign=t.textAlign,l.style.margin="0",l.style.padding="1px",l.style.border="0",l.style.outline="none",l.style.whiteSpace="pre-wrap",l.style.overflow="hidden",l.rows=t.lineCount,l.YA=r,l.className="goTXarea",e.div.appendChild(l),l.focus(),n.selectsTextOnActivate&&(l.select(),l.setSelectionRange(0,9999))))},t.hide=function(t){t.div.removeChild(l)})}function Ei(t){var e,n,i,o=t.textBlock,r=t.diagram,a=t.currentTextEditor;null!==o&&null!==a&&(e=o.text,n="",null!==a.valueFunction&&(n=a.valueFunction()),t.isValidText(o,e,n)?(t.va(t.name),t.ia=Yi,t.transactionResult=t.name,o.text=n,null!==(a=t.textBlock).textEdited&&a.textEdited(a,e,n),null!==r&&r.R("TextEdited",o,e),t.Jg(),t.stopTool(),null!==r&&r.doFocus()):(t.ia=Hi,null!==(i=t.textBlock).errorFunction&&i.errorFunction(t,e,n),a.show(o,r,t)))}ki.className="ContextMenuTool",M("contextMenuTool",function(){return this.findTool("ContextMenu")},function(t){this.Xa("ContextMenu",t,this.mouseUpTools)}),n(Di,Mn),Di.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||t.isReadOnly||Ki&&Ki!==this&&(Ki.acceptText(Oi),Ki&&Ki!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.Ub(t.lastInput.documentPoint);return!!(null!==e&&e instanceof Hh&&e.editable&&e.part.canEdit())&&!(null===(e=e.part)||this.starting===zi&&!e.isSelected||this.starting===Ri&&t.lastInput.clickCount<2)},Di.prototype.doStart=function(){null!==(Ki=this).textBlock&&this.doActivate()},Di.prototype.doActivate=function(){var t,e,n,i;this.isActive||null!==(t=this.diagram)&&(null===(e=this.textBlock)&&(e=t.Ub(t.lastInput.documentPoint)),null!==e&&e instanceof Hh&&null!==(this.textBlock=e).part&&(this.isActive=!0,this.ia=Vi,n=this.defaultTextEditor,null!==e.textEditor&&(n=e.textEditor),this.zh=this.textBlock.copy(),i=new ne(this.textBlock.ga(Yt),this.textBlock.ga(Qt)),t.zw(i),n.show(e,t,this),this.currentTextEditor=n))},Di.prototype.doCancel=function(){this.stopTool()},Di.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},Di.prototype.doMouseDown=function(){this.isActive&&this.acceptText(Oi)},Di.prototype.acceptText=function(t){switch(t){case Oi:this.ia===Yi?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():this.ia!==Vi&&this.ia!==Hi&&this.ia!==Ui||(this.ia=qi,Ei(this));break;case Fi:case Gi:case Bi:Gi===t&&!0===this.textBlock.isMultiline||this.ia!==Vi&&this.ia!==Hi&&this.ia!==Ui||(this.ia=qi,Ei(this))}},Di.prototype.doDeactivate=function(){var t=this.diagram;null!==t&&(this.ia=Ii,(this.textBlock=null)!==this.currentTextEditor&&this.currentTextEditor.hide(t,this),this.isActive=!1)},Di.prototype.doStop=function(){Ki=null},Di.prototype.isValidText=function(t,e,n){var i=this.textValidation;return!(null!==i&&!i(t,e,n))&&!(null!==(i=t.textValidation)&&!i(t,e,n))},Di.prototype.Gy=function(t){var e=this.zh;return e.text=t,e.measure(this.textBlock.Di,1/0),e},s.Object.defineProperties(Di.prototype,{textBlock:{get:function(){return this.Ka},set:function(t){this.Ka=t}},currentTextEditor:{get:function(){return this.v},set:function(t){this.v=t}},defaultTextEditor:{get:function(){return this.l},set:function(t){this.l=t}},starting:{get:function(){return this.Ja},set:function(t){this.Ja=t}},textValidation:{get:function(){return this.Wi},set:function(t){this.Wi=t}},minimumEditorScale:{get:function(){return this.I},set:function(t){this.I=t}},selectsTextOnActivate:{get:function(){return this.T},set:function(t){this.T=t}},state:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}}}),Di.prototype.measureTemporaryTextBlock=Di.prototype.Gy;var Fi=new j(Di,"LostFocus",0),Oi=new j(Di,"MouseDown",1),Bi=new j(Di,"Tab",2),Gi=new j(Di,"Enter",3),ji=new j(Di,"SingleClick",0),zi=new j(Di,"SingleClickSelected",1),Ri=new j(Di,"DoubleClick",2),Ii=new j(Di,"StateNone",0),Vi=new j(Di,"StateActive",1),Ui=new j(Di,"StateEditing",2),qi=new j(Di,"StateValidating",3),Hi=new j(Di,"StateInvalid",4),Yi=new j(Di,"StateValidated",5),Ki=null;function Xi(){ro||(io(),ro=!0),this.B=qr,this.tl=this.df=this.rc=this.rs=this.ic=!1,this.Ox=!0,this.ul=ao,this.sn=!1,this.yi=this.gd=!0,this.Xg=600,this.mx=this.Nx=!1,this.Pe=new $,this.Jd=new uo,(this.Jd.Rc=this).Qk=new $,this.tv=new $,this.ot=new $}function Wi(t,e){$i(t,e)&&(t.df=!0)}function $i(t,e){return t.gd&&t.canStart(e)&&(t.Pe.add(e),t.defaultAnimation.isAnimating&&t.Nc(),t.rc=!0)}function Ji(t){var e,n,i;t.gd&&t.rc&&(e=t.Jd,n=t.B,(i=t.Pe.contains("Model"))&&(t.tl=!0,t.ul===ao?(e.isViewportUnconstrained=!0,e.lc.clear(),e.add(n,"position",n.position.copy().offset(0,-200),n.position),e.add(n,"opacity",0,1)):t.ul===ho&&e.lc.clear(),t.Ox=!(t.ul!==so||!n.Vs.w(n.la)),n.R("InitialAnimationStarting",t)),i&&!t.yi||0===e.lc.count?(t.Pe.clear(),t.rc=!1,t.df=!1,e.lc.clear(),lo(e,n),t.tl=!1,n.M()):(t.Pe.clear(),n.Ae=!1,i=e.lc.get(n),n.autoScale!==Jr&&null!==i&&(delete i.start.scale,delete i.end.scale),d.requestAnimationFrame(function(){!1===t.rc||e.ic||(n.Ge("temporaryPixelRatio")&&To(n),Do(n),t.rc=!1,t.df=!1,e.start(),Qi(t),n.Oa(),po(e,0),Jo(n,!0),to(t),n.R("AnimationStarting",t))})))}function Zi(t,e,n,i){e instanceof wl&&(null!==e.fromNode||null!==e.toNode)||t.Jd.add(e,"position",n,i,!1)}function Qi(t){var e;t.rs||(e=t.B,t.Nx=e.skipsUndoManager,t.mx=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.rs=!0)}function to(t){var e=t.B;e.skipsUndoManager=t.Nx,e.skipsModelSourceBindings=t.mx,t.rs=!1}function eo(t,e,n){t.df&&!e.w(n)&&(t.B.oj||(e=n.copy()),co(t.Jd,t.B,"position",e,n))}function no(t,e,n,i,o){null===t&&(t="rgba(0,0,0,0)"),null===e&&(e="rgba(0,0,0,0)"),ks(t),Ls();var r=Us.l,a=Us.I,s=Us.v;t=Us.T,ks(e),Ls();var h=Us.I,u=Us.v;return e=Us.T,"hsla("+o(n,r,Us.l-r,i)+", "+o(n,a,h-a,i)+"%, "+o(n,s,u-s,i)+"%, "+(n=o(n,t,e-t,i))+")"}function io(){var t=new at;t.add("position:diagram",function(t,e,n,i,o,r){t.position=new ee(i(o,e.x,n.x-e.x,r),i(o,e.y,n.y-e.y,r))}),t.add("position",function(t,e,n,i,o,r){o<r?t.fr(i(o,e.x,n.x-e.x,r),i(o,e.y,n.y-e.y,r),!1):t.position=new ee(i(o,e.x,n.x-e.x,r),i(o,e.y,n.y-e.y,r))}),t.add("location",function(t,e,n,i,o,r){o<r?t.fr(i(o,e.x,n.x-e.x,r),i(o,e.y,n.y-e.y,r),!0):t.location=new ee(i(o,e.x,n.x-e.x,r),i(o,e.y,n.y-e.y,r))}),t.add("position:placeholder",function(t,e,n,i,o,r){o<r?t.fr(i(o,e.x,n.x-e.x,r),i(o,e.y,n.y-e.y,r),!1):t.position=new ee(i(o,e.x,n.x-e.x,r),i(o,e.y,n.y-e.y,r))}),t.add("position:node",function(t,e,n,i,o,r){var a=t.actualBounds,s=n.actualBounds;n=s.x+s.width/2-a.width/2,a=s.y+s.height/2-a.height/2,o<r?t.fr(i(o,e.x,n-e.x,r),i(o,e.y,a-e.y,r),!1):t.position=new ee(i(o,e.x,n-e.x,r),i(o,e.y,a-e.y,r))}),t.add("desiredSize",function(t,e,n,i,o,r){t.desiredSize=new ne(i(o,e.width,n.width-e.width,r),i(o,e.height,n.height-e.height,r))}),t.add("width",function(t,e,n,i,o,r){t.width=i(o,e,n-e,r)}),t.add("height",function(t,e,n,i,o,r){t.height=i(o,e,n-e,r)}),t.add("fill",function(t,e,n,i,o,r){t.fill=no(e,n,o,r,i)}),t.add("stroke",function(t,e,n,i,o,r){t.stroke=no(e,n,o,r,i)}),t.add("strokeWidth",function(t,e,n,i,o,r){t.strokeWidth=i(o,e,n-e,r)}),t.add("strokeDashOffset",function(t,e,n,i,o,r){t.strokeDashOffset=i(o,e,n-e,r)}),t.add("background",function(t,e,n,i,o,r){t.background=no(e,n,o,r,i)}),t.add("areaBackground",function(t,e,n,i,o,r){t.areaBackground=no(e,n,o,r,i)}),t.add("opacity",function(t,e,n,i,o,r){t.opacity=i(o,e,n-e,r)}),t.add("scale",function(t,e,n,i,o,r){t.scale=i(o,e,n-e,r)}),t.add("angle",function(t,e,n,i,o,r){t.angle=i(o,e,n-e,r)}),oo=t}Di.className="TextEditingTool",Di.LostFocus=Fi,Di.MouseDown=Oi,Di.Tab=Bi,Di.Enter=Gi,Di.SingleClick=ji,Di.SingleClickSelected=zi,Di.DoubleClick=Ri,Di.StateNone=Ii,Di.StateActive=Vi,Di.StateEditing=Ui,Di.StateValidating=qi,Di.StateInvalid=Hi,Di.StateValidated=Yi,M("textEditingTool",function(){return this.findTool("TextEditing")},function(t){this.Xa("TextEditing",t,this.mouseUpTools)}),Xi.prototype.ae=function(t){this.B=t},Xi.prototype.canStart=function(){return!0},(Bp=Xi.prototype).bu=function(t){return this.Jd.bu(t)},Bp.dw=function(t){return this.Jd.dw(t)},Bp.Nc=function(t){var e=this.Jd;if(!0===this.rc&&(this.tl=this.df=this.rc=!1,this.Pe.clear(),0<e.lc.count&&this.B.Db()),this.ic){if(e.rm(!0),e.lc.clear(),lo(e,null),!0===t)for(t=this.Qk.ma(),e=0;e<t.length;e++)t[e].rm(!0)}else e.lc.clear(),lo(e,this.B)},Bp.rm=function(t){t===this.defaultAnimation&&this.defaultAnimation.lc.clear(),this.Qk.remove(t),0===this.Qk.count&&(this.ic=!1,this.B.Db()),t===this.defaultAnimation&&(this.defaultAnimation.lc.clear(),this.B.R("AnimationFinished",this))},Bp.ik=function(t,e){this.df&&(this.Pe.contains("Expand Tree")||this.Pe.contains("Expand SubGraph"))&&this.Jd.ik(t,e)},Bp.gk=function(t,e){this.df&&(this.Pe.contains("Collapse Tree")||this.Pe.contains("Collapse SubGraph"))&&(this.Jd.gk(t,e),co(this.Jd,e,"position",e.position,e.position))},s.Object.defineProperties(Xi.prototype,{animationReasons:{get:function(){return this.Pe}},isEnabled:{get:function(){return this.gd},set:function(t){this.gd=t}},duration:{get:function(){return this.Xg},set:function(t){t<1&&f(t,">= 1",Xi,"duration"),this.Xg=t}},isAnimating:{get:function(){return this.ic}},isTicking:{get:function(){return this.rs}},isInitial:{get:function(){return this.yi},set:function(t){this.yi=t}},defaultAnimation:{get:function(){return this.Jd}},activeAnimations:{get:function(){return this.Qk}},initialAnimationStyle:{get:function(){return this.ul},set:function(t){this.ul=t}}}),Xi.prototype.stopAnimation=Xi.prototype.Nc;var oo=null,ro=!1,ao=new j(Xi,"Default",1),so=new j(Xi,"AnimateLocations",2),ho=new j(Xi,"None",3);function uo(){this.xv=this.Mx=this.Rc=this.B=null,this.Cl=this.ic=this.l=!1,this.Yn=this.yd=0,this.Kr=this.Ju=mo,this.Bl=this.Bp=!1,this.nv=1,this.lv=0,this.qd=this.Xg=NaN,this.px=0,this.Zn=null,this.v=St,this.lc=new at,this.hv=new at,this.km=new $,this.iv=new $,this.nx=aa}function lo(t,e){if(t.hv.clear(),t.Bl=!1,t.lv=0,t.qd=NaN,0<t.km.count&&t.km.clear(),0<t.iv.count&&t.iv.clear(),null!==e)for(t=e.links;t.next();)t.value.qg=null}function co(t,e,n,i,o,r){var a,s,h,u=t.lc;e instanceof Mo&&"position"===n&&(n="position:diagram"),u.contains(e)?(s=(a=u.H(e)).start,h=a.end,void 0===s[n]&&(s[n]=go(i)),h[n]=go(o)):(h={},(s={})[n]=go(i),h[n]=go(o),a=s.position,e instanceof Na&&a instanceof ee&&!a.u()&&e.diagram.animationManager.Pe.contains("Expand SubGraph")&&a.assign(h.position),a=new vo(s,h,r),u.add(e,a)),(u=s[n])instanceof ee&&!u.u()&&u.assign(t.v),r&&0===n.indexOf("position:")&&e instanceof Ou?a.Pv.location=go(e.location):r&&(a.Pv[n]=go(i))}function go(t){return t instanceof ee||t instanceof xe?t.copy():t}function fo(t,e){var n,i,o;t.Cl&&!e||(n=t.Rc,!1!==t.ic&&(o=(i=+new Date)>t.Yn?t.qd:i-t.yd,e&&((o=t.px)<t.qd?(t.yd=+new Date-o,t.Yn=t.yd+t.qd):o=t.qd),Qi(n),po(t,o),Jo(t.B,!0),to(n),i>t.Yn&&(t.Bp&&!t.Bl?(t.yd=+new Date,t.Yn=t.yd+t.qd,t.Bl=!0):t.rm(!1))))}function po(t,e){for(var n=t.qd,i=t.lc.iterator,o=t.Bl;i.next();){var r=i.key;if(!(r instanceof Na&&null===r.diagram)){var a,s=i.value,h=o?s.end:s.start,s=o?s.start:s.end,u=oo;for(a in s)"position"===a&&(s["position:placeholder"]||s["position:node"])||null===u.get(a)||u.get(a)(r,h[a],s[a],t.Kr,e,n,t)}}}function mo(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function yo(t,e,n,i){return t===i?e+n:n*(1-Math.pow(2,-10*t/i))+e}function vo(t,e,n){this.start=t,this.end=e,this.Pv={},this.Jv=n,this.pw=!1}function wo(t,e,n){this.jd=null,this.ff=t,this.aq=n||bo,this.Vk=null,void 0!==e&&(this.Vk=e,void 0===n&&(this.aq=So))}Xi.className="AnimationManager",Xi.defineAnimationEffect=function(t,e){ro||(io(),ro=!0),oo.add(t,e)},Xi.Default=ao,Xi.AnimateLocations=so,Xi.None=ho,uo.prototype.suspend=function(){this.Cl=!0},uo.prototype.advanceTo=function(t,e){e&&(this.Cl=!1),this.Bp&&t>=this.qd&&(this.Bl=!0,t-=this.qd),this.px=t,fo(this,!0),Qi(this.Rc),Jo(this.B),to(this.Rc),this.B.Je()},(Bp=uo.prototype).start=function(){if(0!==this.lc.count&&!this.ic){for(var e=this.B,t=this.lc.iterator;t.next();){var n,i,o=t.value.end,r=t.key;!o["position:placeholder"]||(n=r.findVisibleNode())instanceof pl&&null!==n.placeholder&&(n=(i=n.placeholder).ga(Yt),i=i.padding,n.x+=i.left,n.y+=i.top,o["position:placeholder"]=n),null===e&&(r instanceof Mo?e=r:r instanceof Na&&(e=r.diagram))}null!==e&&(this.B=e,!1!==(t=this.Rc=e.animationManager).isEnabled&&(this.qd=isNaN(this.Xg)?t.duration:this.Xg,this.Kr=this.Ju,t.tl&&t.ul===ao&&this===t.defaultAnimation&&(this.Kr=yo,this.qd=isNaN(this.Xg)?600===t.duration?900:t.duration:this.Xg),this.nx=e.scrollMode,this.isViewportUnconstrained&&(e.Ti=sa),Qi(t),this.km.each(function(t){t.data=null,e.add(t)}),to(t),this.ic=!0,this.yd=+new Date,this.Yn=this.yd+this.qd,h=this,u=(s=t).Qk,(l=s).ic?s.ot.add(h):(s.ic=!0,u.add(h),d.requestAnimationFrame(function(){a()}))))}function a(){if(0<l.ot.count&&(u.addAll(l.ot),l.ot.clear(),l.ic=!0),!1!==l.ic&&0!==u.count){l.tv.addAll(u);for(var t=l.tv.iterator;t.next();){var e=t.value;if(!1!==e.ic){t:if(0<e.km.count)var n=!0;else{for(n=e.lc.iterator;n.next();){var i=n.key;if(i instanceof Na&&null!==i.diagram||i instanceof Mo){n=!0;break t}}n=!1}n?fo(e,!1):e.Cl=!0}}l.tv.clear(),Qi(l),Jo(l.B),to(l),d.requestAnimationFrame(a)}}var s,h,u,l},Bp.nz=function(t,e){t.Wb()&&(this.km.add(t),this.B=e)},Bp.add=function(t,e,n,i,o){"position"===e&&n.w(i)||(null===this.B&&(t instanceof Mo?this.B=t:t instanceof Na&&null!==t.diagram&&(this.B=t.diagram)),t instanceof Ou&&!t.isAnimated||co(this,t,e,n,i,o))},Bp.bu=function(t){return!!this.ic&&(null!==(t=this.lc.H(t))&&t.pw)},Bp.dw=function(t){return!!this.ic&&(null!==(t=this.lc.H(t))&&(t.start.position||t.start.location))},Bp.stop=function(){this.ic&&this.rm(!0)},Bp.rm=function(t){if(null!==this.xv&&this.xv.Ip.remove(this.Mx),this.ic){var e=this.B,n=this.Rc;this.Cl=this.ic=n.tl=!1,Qi(n);for(var i=this.lc,o=this.km.iterator;o.next();)e.remove(o.value);for(o=this.iv.iterator;o.next();)o.value.o();o=this.Bp,i=i.iterator;for(var r=oo;i.next();){var a,s,h=i.key,u=i.value,l=o?u.end:u.start,d=o?u.start:u.end,c=u.Pv;for(a in d)null!==r.get(a)&&(s=a,!u.Jv||"position:node"!==s&&"position:placeholder"!==s||(s="position"),r.get(s)(h,l[a],(void 0!==c[a]?c:u.Jv?l:d)[a],this.Kr,this.qd,this.qd,this));u.Jv&&void 0!==c.location&&h instanceof Ou&&(h.location=c.location),u.pw&&h instanceof Ou&&h.Ob(!1)}if(n.defaultAnimation===this)for(a=this.B.links;a.next();)null===(o=a.value).qg?null!==(i=o.path)&&(o.dd=!1,o.o(),i.o()):(o.points=o.qg,o.qg=null);e.Xt.clear(),Co(e,!1),e.Oa(),e.M(),Jo(e,!0),this.isViewportUnconstrained&&(e.scrollMode=this.nx),to(n),this.lv++,!t&&this.nv>this.lv?(this.Bl=!1,this.start()):(this.Zn&&this.Zn(this),lo(this,null),n.rm(this),e.Db())}},Bp.ik=function(t,e){var n=e.actualBounds,i=null;if(e instanceof pl&&(i=e.placeholder),null!==i?(n=i.ga(Yt),i=i.padding,n.x+=i.left,n.y+=i.top,this.add(t,"position",n,t.position,!1)):this.add(t,"position",new ee(n.x+n.width/2,n.y+n.height/2),t.position,!1),this.add(t,"scale",.01,t.scale,!1),t instanceof pl)for(t=t.memberParts;t.next();)(i=t.value)instanceof el&&this.ik(i,e)},Bp.gk=function(t,e){if(t.isVisible()){var n=null;if(e instanceof pl&&(n=e.placeholder),null!==n?this.add(t,"position:placeholder",t.position,n,!0):this.add(t,"position:node",t.position,e,!0),this.add(t,"scale",t.scale,.01,!0),(n=this.lc).contains(t)&&(n.H(t).pw=!0),t instanceof pl)for(t=t.memberParts;t.next();)(n=t.value)instanceof el&&this.gk(n,e)}},Bp.kA=function(t){var e=this.hv.get(t);return null===e&&(e={},this.hv.add(t,e)),e},s.Object.defineProperties(uo.prototype,{duration:{get:function(){return this.Xg},set:function(t){t<1&&f(t,">= 1",uo,"duration"),this.Xg=t}},reversible:{get:function(){return this.Bp},set:function(t){this.Bp=t}},runCount:{get:function(){return this.nv},set:function(t){0<t?this.nv=t:O("Animation.runCount value must be a positive integer.")}},finished:{get:function(){return this.Zn},set:function(t){this.Zn!==t&&(this.Zn=t)}},easing:{get:function(){return this.Ju},set:function(t){this.Ju=t}},isViewportUnconstrained:{get:function(){return this.l},set:function(t){this.l=t}},isAnimating:{get:function(){return this.ic}}}),uo.prototype.getTemporaryState=uo.prototype.kA,uo.prototype.addTemporaryPart=uo.prototype.nz,uo.className="Animation",uo.EaseLinear=function(t,e,n,i){return n*t/i+e},uo.EaseInOutQuad=mo,uo.EaseInQuad=function(t,e,n,i){return n*(t/=i)*t+e},uo.EaseOutQuad=function(t,e,n,i){return-n*(t/=i)*(t-2)+e},uo.EaseInExpo=function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e},uo.EaseOutExpo=yo,vo.className="AnimationState",wo.prototype.copy=function(){var t=new wo(this.ff);t.aq=this.aq;var e,n=this.Vk;return null!==n&&(e={},void 0!==n.duration&&(e.ky=n.duration),void 0!==n.finished&&(e.ky=n.finished),void 0!==n.easing&&(e.ky=n.easing),t.Vk=e),t},s.Object.defineProperties(wo.prototype,{propertyName:{get:function(){return this.ff},set:function(t){this.ff=t}},animationSettings:{get:function(){return this.Vk},set:function(t){this.Vk=t}},startCondition:{get:function(){return this.aq},set:function(t){this.aq=t}}});var bo=new j(wo,"Default",1),So=new j(wo,"Immediate",2),xo=new j(wo,"Bundled",3);function Po(){J(this),this.B=null,this.Da=new X,this.Qa="",this.tb=1,this.v=!1,this.Oi=this.I=this.ii=this.hi=this.gi=this.fi=this.di=this.ei=this.ci=this.ki=this.bi=this.ji=this.ai=this.$h=!0,this.l=!1,this.np=[]}function ko(t,e){var n=1;return 1!==t.tb&&(n=e.globalAlpha,e.globalAlpha=n*t.tb),n}function Lo(t,e,n){if(e=function(t,e,n){var i=n.zOrder;if(isNaN(i))return e;var o=(t=t.Da).count;if(o<=1)return e;if(e<0&&(e=t.indexOf(n)),e<0)return-1;for(var r=e-1,a=NaN;0<=r&&(a=t.L(r).zOrder,isNaN(a));)r--;for(var s=e+1,h=NaN;s<o&&(h=t.L(s).zOrder,isNaN(h));)s++;if(!isNaN(a)&&i<a)for(;;){if(-1===r||a<=i){if(++r===e)break;return t.bb(e),t.vb(r,n),r}for(a=NaN;0<=--r&&(a=t.L(r).zOrder,isNaN(a)););}else if(!isNaN(h)&&h<i)for(;;){if(s===o||i<=h){if(--s===e)break;return t.bb(e),t.vb(s,n),s}for(h=NaN;++s<o&&(h=t.L(s).zOrder,isNaN(h)););}return e}(t,e,n),n instanceof pl&&null!==n&&isNaN(n.zOrder)){if(0!==n.memberParts.count){for(var i=-1,o=t.Da.j,r=o.length,a=0;a<r;a++){var s=o[a];if(s===n&&(e=a,0<=i))break;if(i<0&&s.containingGroup===n&&(i=a,0<=e))break}!(i<0)&&i<e&&((o=t.Da).bb(e),o.vb(i,n))}null!==(n=n.containingGroup)&&Lo(t,-1,n)}}function Mo(t){var e,n;1<arguments.length&&O("Diagram constructor can only take one optional argument, the DIV HTML element or its id."),ga||(function(){if(Xr){var t=d.document.createElement("canvas"),e=t.getContext("2d"),n=N("7ca11abfd022028846");e[n]=N("398c3597c01238");for(var i=["5da73c80a36455d5038e4972187c3cae51fd22",u.Dx+"4ae6247590da4bb21c324ba3a84e385776",Ie.xF+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",Ue.za],o=1;o<5;o++)e[N("7ca11abfd7330390")](N(i[o-1]),10,15*o);for(e[n]=N("39f046ebb36e4b"),n=1;n<5;n++)e[N("7ca11abfd7330390")](N(i[n-1]),10,15*n);0}}(),ga=!0),J(this),G=[],(qr=this).Rb=!0,this.Rc=new Xi,this.Rc.ae(this),this.nb=17,this.Al=this.pv=!1,this.Us="default",this.Ea=null,Xr&&(e=this,n=function t(){e.removeEventListener(d.document,"DOMContentLoaded",t,!1),e.setRTL()},null!==d.document.body?this.setRTL():e.addEventListener(d.document,"DOMContentLoaded",n,!1)),this.La=new X,this.wa=this.xa=0,this.Sl=this.ta=null,this.Ix=new at,this.gf=this.Gb=null,this.ww(),this.Kj=null,this.vw(),this.tb=1,this.la=new ee(NaN,NaN).freeze(),this.Vs=new ee(NaN,NaN),this.Pn=this.ya=1,this.gs=new ee(NaN,NaN).freeze(),this.hs=NaN,this.zs=1e-4,this.xs=100,this.ob=new Ie,this.xt=new ee(NaN,NaN).freeze(),this.bs=new ne(NaN,NaN,NaN,NaN).freeze(),this.Si=new Vt(0,0,0,0).freeze(),this.Ti=aa,this.ct=!1,this.Ws=this.Qs=null,this.Og=Jr,this.Aj=we,this.Yf=Jr,this.qo=we,this.js=this.fs=Yt,this.Dc=!0,this.yl=!1,this.rd=new $,this.Vg=new at,this.kl=!0,this.pn=250,this.yj=-1,this.rn=new Vt(16,16,16,16).freeze(),this.Ej=this.Ae=!1,this.Hj=!0,this.Vf=new mn,(this.Vf.diagram=this).Ud=new mn,(this.Ud.diagram=this).gh=new mn,(this.gh.diagram=this).se=this.Nf=null,this.ek=!1,this.Rr=this.Sr=null,this.ln=d.PointerEvent&&(T||C||D)&&d.navigator&&!1!==d.navigator.msPointerEnabled,Lr(this),this.Dh=new $,this.ss=!0,this.rt=ha,this.Tu=!1,this.tt=ta,this.Ka=null,Hr.add("Model",Zd),this.Lr=this.Or=this.pt=null,this.On=this.Jr="auto",this.gg=this.Cs=this.ig=this.jg=this.lg=this.Pf=this.Tf=this.Of=null,this.es=!1,this.Qf=this.wg=this.kg=this.hg=null,this.Ds=!1,this.Os={},this.Zj=[null,null],this.Dr=null,this.Pr=this.gt=this.rv=this.ug=!1,this.$u=!0,this.xi=this.jc=!1,this.ac=null;var i=this;this.Bc=function(t){var e=i.partManager;if(t.model===e.diagram.model&&e.diagram.Z){e.diagram.Z=!1;try{var n=t.change;""===t.modelChange&&n===bn&&e.updateDataBindings(t.object,t.propertyName)}finally{e.diagram.Z=!0}}},this.Qc=function(t){i.partManager.doModelChanged(t)},this.zv=!0,this.Pd=-2,this.Pi=new at,this.Ns=new X,this.$f=!1,this.ai=this.$h=this.qr=this.gd=!0,this.rr=!1,this.xr=this.vr=this.ii=this.hi=this.gi=this.fi=this.di=this.ei=this.ci=this.ur=this.ki=this.bi=this.ji=this.sr=!0,this.Zf=this.Wu=!1,this.wr=this.tr=this.ql=this.pl=!0,this.bt=this.Ys=16,this.Xs=this.Kp=!1,this.Lp=this.$s=null,this.Zs=this.at=0,this.gb=new Vt(5).freeze(),this.qv=(new $).freeze(),this.ys=999999999,this.Qu=(new $).freeze(),this.wi=this.vi=this.ui=!0,this.Xe=this.le=!1,this.kc=null,this.Ng=!0,this.me=!1,this.yx=new $,this.Ru=new $,this.Gc=null,this.Pl=1,this.sv=0,this.Vd={scale:1,position:new ee,bounds:new ne,gw:!1},this.Px=new ne(NaN,NaN,NaN,NaN).freeze(),this.mm=new xe(NaN,NaN).freeze(),this.Qn=new ne(NaN,NaN,NaN,NaN).freeze(),this.ts=!1,this.Ho=this.oo=this.gp=this.Eu=this.Du=this.Fu=this.bg=this.eh=this.cf=this.Vr=null,Ao(this),this.Ib=null,this.no=!1,this.Bj=null,this.partManager=new Zd,this.toolManager=new _n,this.toolManager.initializeStandardTools(),this.currentTool=this.defaultTool=this.toolManager,this.Ur=null,this.dl=new wa,this.Is=this.Hs=null,this.cq=!1,this.commandHandler=No(),this.model=Bc(),this.ug=!0,Eo(this),this.layout=new Sd,this.ug=!1,this.qx=this.Iu=null,this.Sb=1,this.yh=null,this.To=1,this.Zo=0,this.gv=[0,0,0,0,0],this.$o=0,this.sd=1,this.Pj=0,this.Co=new ee,this.qt=500,this.qn=new ee,this.ne=!1,this.Gm=this.Hm=this.Fm=this.Em=this.Ek=this.Gk=this.Fk=this.Ck=this.Dk=this.Uw=this.Lw=this.Mw=this.Nw=this.sh=this.Ul=this.rh=this.Tl=null,this.Zq=function(){},this.preventDefault=null,this.so=!1,this.ti=new fa,this.eq=!1,void 0!==t&&ma(this,t),this.$n=null,this.ao=Lt,this.Rb=!1}function _o(t,e){t.animationManager.Nc(!0),t.qv=(new $).freeze(),t.Qu=(new $).freeze();var n=t.skipsUndoManager;null!==t.model&&(t.skipsUndoManager=!0);var i=null;null===t.Ib||null!==(i=t.Ib.part)&&t.remove(i);var o=[],r=t.La.length;if(e){for(e=0;e<r;e++)for(var a=t.La.j[e].parts;a.next();){var s=a.value;s!==i&&null===s.data&&o.push(s)}for(e=0;e<o.length;e++)t.remove(o[e])}for(e=0;e<r;e++)t.La.j[e].clear();return t.partManager.clear(),t.rd.clear(),t.Vg.clear(),t.Dh.clear(),t.Bj=null,B=[],null!==i&&(t.add(i),t.partManager.parts.remove(i)),null!==t.model&&(t.skipsUndoManager=n),o}function No(){return null}function Ao(t){t.cf=new at;var e=new el,n=new Hh;n.bind(new Uc("text","",k)),e.add(n),t.Fu=e,t.cf.add("",e),e=new el,(n=new Hh).stroke="brown",n.bind(new Uc("text","",k)),e.add(n),t.cf.add("Comment",e),(e=new el).selectable=!1,e.avoidable=!1,(n=new Oh).figure="Ellipse",n.fill="black",n.stroke=null,n.desiredSize=new xe(3,3).ca(),e.add(n),t.cf.add("LinkLabel",e),t.eh=new at,(e=new pl).selectionObjectName="GROUPPANEL",e.type=hh.Vertical,(n=new Hh).font="bold 12pt sans-serif",n.bind(new Uc("text","",k)),e.add(n),(n=new hh(hh.Auto)).name="GROUPPANEL";var i=new Oh;i.figure="Rectangle",i.fill="rgba(128,128,128,0.2)",i.stroke="black",n.add(i),(i=new vl).padding=new Vt(5,5,5,5).ca(),n.add(i),e.add(n),t.Du=e,t.eh.add("",e),t.bg=new at,e=new wl,(n=new Oh).isPanelMain=!0,e.add(n),(n=new Oh).toArrow="Standard",n.fill="black",n.stroke=null,n.strokeWidth=0,e.add(n),t.Eu=e,t.bg.add("",e),e=new wl,(n=new Oh).isPanelMain=!0,n.stroke="brown",e.add(n),t.bg.add("Comment",e),(e=new tl).type=hh.Auto,(n=new Oh).fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),(n=new vl).margin=new Vt(1.5,1.5,1.5,1.5).ca(),e.add(n),t.gp=e,t.oo=e,(e=new tl).type=hh.Link,(n=new Oh).isPanelMain=!0,n.fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),t.Ho=e}function To(t){30<t.Zo&&(t.yh=1)}function Co(t,e){null!==t.yh&&(t.yh=null,e&&t.Zq(),U.jy||(t.Zo=0,t.gv=[0,0,0,0,0],t.$o=0))}function Do(t){var e,n,i,o;null===t.ta||0!==(e=t.Ea).clientWidth&&0!==e.clientHeight&&(t.pv||t.setScrollWidth(),n=t.Xe?t.nb:0,i=t.le?t.nb:0,o=t.Sb,t.Sb=t.computePixelRatio(),t.Sb!==o&&(t.yl=!0,t.Db()),e.clientWidth===t.xa+n&&e.clientHeight===t.wa+i||(t.vi=!0,t.Dc=!0,null!==(e=t.layout)&&e.isViewportSized&&t.autoScale===Jr&&(t.Ej=!0,e.C()),t.jc||t.Db()))}function Eo(t){var e=new Po;e.name="Background",t.om(e),(e=new Po).name="",t.om(e),(e=new Po).name="Foreground",t.om(e),(e=new Po).name="Adornment",e.isTemporary=!0,t.om(e),(e=new Po).name="Tool",e.isTemporary=!0,e.isBoundsIncluded=!0,t.om(e),(e=new Po).name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,t.Sx(e,t.tm("Background"))}function Fo(t){t.Ib=new hh(hh.Grid),t.Ib.name="GRID";var e=new Oh;e.figure="LineH",e.stroke="lightgray",e.strokeWidth=.5,e.interval=1,t.Ib.add(e),(e=new Oh).figure="LineH",e.stroke="gray",e.strokeWidth=.5,e.interval=5,t.Ib.add(e),(e=new Oh).figure="LineH",e.stroke="gray",e.strokeWidth=1,e.interval=10,t.Ib.add(e),(e=new Oh).figure="LineV",e.stroke="lightgray",e.strokeWidth=.5,e.interval=1,t.Ib.add(e),(e=new Oh).figure="LineV",e.stroke="gray",e.strokeWidth=.5,e.interval=5,t.Ib.add(e),(e=new Oh).figure="LineV",e.stroke="gray",e.strokeWidth=1,e.interval=10,t.Ib.add(e),(e=new Ou).add(t.Ib),e.layerName="Grid",e.zOrder=0,e.isInDocumentBounds=!1,e.isAnimated=!1,e.pickable=!1,e.locationObjectName="GRID",t.add(e),t.partManager.parts.remove(e),t.Ib.visible=!1}function Oo(){this.B.Xs?this.B.Xs=!1:this.B.isEnabled?this.B.ey(this):sr(this.B)}function Bo(t){this.B.isEnabled?(this.B.at=t.target.scrollTop,this.B.Zs=t.target.scrollLeft):sr(this.B)}function Go(t){if(t.fixedBounds.u()){var e=t.fixedBounds.copy();return e.sq(t.gb),e}for(var n=!0,i=t.La.j,o=i.length,r=0;r<o;r++){var a=i[r];if(a.visible&&(!a.isTemporary||a.isBoundsIncluded))for(var s=(a=a.Da.j).length,h=0;h<s;h++){var u=a[h];u.isInDocumentBounds&&u.isVisible()&&((u=u.actualBounds).u()&&(n?(n=!1,e=u.copy()):e.Oc(u)))}}return n&&(e=new ne(0,0,0,0)),e.sq(t.gb),e}function jo(t,e){if((e||t.me)&&!t.Rb&&null!==t.ta&&t.documentBounds.u()){if(e){var n=t.initialPosition;if(n.u())return void(t.position=n);(n=ee.alloc()).sj(t.documentBounds,t.initialDocumentSpot);var i=t.viewportBounds,i=ne.allocAt(0,0,i.width,i.height),o=ee.alloc();o.sj(i,t.initialViewportSpot),o.h(n.x-o.x,n.y-o.y),t.position=o,ne.free(i),ee.free(o),ee.free(n)}t.Rb=!0,n=t.Og,e&&t.Yf!==Jr&&(n=t.Yf),i=n!==Jr?zo(t,n):t.scale,n=t.viewportBounds.copy(),o=t.xa/i;var r=t.wa/i,a=t.Aj,s=t.qo;e&&!a.ib()&&(s.ib()||s.Mb())&&(a=s.Mb()?Wt:s),Ro(t,t.documentBounds,o,r,a,e),e=t.scale,t.scale=i,t.Rb=!1,(i=t.viewportBounds).Na(n)||t.Vq(n,i,e,!1),ir(t),$o(t,!0,!1)}}function zo(t,e){var n=t.Pn;if(null===t.ta)return n;if(t.Ta(),!(o=t.documentBounds).u())return n;var i=o.width,o=o.height,r=t.xa+(t.Xe?t.nb:0),a=t.wa+(t.le?t.nb:0),s=r/i,h=a/o;return e===Zr?(n<(e=Math.min(h,s))&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===Qr?(n<(e=s<h?(a-t.nb)/o:(r-t.nb)/i)&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}function Ro(t,e,n,i,o,r){var a,s=ee.allocAt(t.la.x,t.la.y),h=s.x,u=s.y;null!==t.$n&&(a=ee.alloc(),h=(a=t.$n.ga(Yt,a)).x-t.ao.x/t.scale,u=a.y-t.ao.y/t.scale,o=Ht,ee.free(a)),!r&&t.scrollMode!==aa||(o.ib()&&(n>e.width&&(h=e.x+(o.x*e.width+o.offsetX)-(o.x*n-o.offsetX)),i>e.height&&(u=e.y+(o.y*e.height+o.offsetY)-(o.y*i-o.offsetY))),o=t.Si,r=n-e.width,n<e.width+o.left+o.right?(h=Math.min(h+n/2,e.right+Math.max(r,o.right)-n/2),h=Math.max(h,e.left-Math.max(r,o.left)+n/2),h-=n/2):h>e.left?h=e.left:h<e.right-n&&(h=e.right-n),n=i-e.height,i<e.height+o.top+o.bottom?(u=Math.min(u+i/2,e.bottom+Math.max(n,o.bottom)-i/2),u=Math.max(u,e.top-Math.max(n,o.top)+i/2),u-=i/2):u>e.top?u=e.top:u<e.bottom-i&&(u=e.bottom-i)),s.x=isFinite(h)?h:-t.gb.left,s.y=isFinite(u)?u:-t.gb.top,null!==t.positionComputation&&(e=t.positionComputation(t,s),s.x=e.x,s.y=e.y),t.Rc.rc&&eo(t.Rc,t.la,s),t.la.h(s.x,s.y),ee.free(s)}function Io(t,e,n,i){for(void 0===n&&(n=null),void 0===i&&(i=null),Zo(t),t=t.La.iteratorBackwards;t.next();){var o=t.value;if(o.visible&&!o.isTemporary&&null!==(o=o.Ub(e,n,i)))return o}return null}function Vo(t,e,n){var i=t.Ud;return t.Ud=t.gh,(t.gh=i).diagram=t,i.event=e,n?Xo(t,e,i):(i.viewPoint=t.Ud.viewPoint,i.documentPoint=t.Ud.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),i.modifiers=t,i.button=e.button,void 0===e.buttons||A||(i.buttons=e.buttons),E&&0===e.button&&e.ctrlKey&&(i.button=2),i.down=!1,i.up=!1,i.clickCount=1,i.delta=0,i.handled=!1,i.bubbles=!1,i.timestamp=e.timeStamp,i.isMultiTouch=!1,i.targetDiagram=Uo(e),i.targetObject=null,i}function Uo(t){var e,n=t.target.B;return n||((e=t.path)||"function"!=typeof t.composedPath||(e=t.composedPath()),e&&e[0]&&(n=e[0].B)),n||null}function qo(t,e,n,i){var o=Yo(t,e,!0,!1,!0,i);return Xo(t,n,o),o.targetDiagram=Uo(e),o.targetObject=null,i||o.clone(t.Vf),o}function Ho(t,e,n,i){var o;return i=Yo(t,e,!1,!1,!1,i),null!==n?(n=(o=d.document.elementFromPoint(n.clientX,n.clientY))&&o.B?(e=n,o.B):(e=void 0!==e.targetTouches?e.targetTouches[0]:e,t),i.targetDiagram=n,Xo(t,e,i)):null!==t.Ud?(i.documentPoint=t.Ud.documentPoint,i.viewPoint=t.Ud.viewPoint,i.targetDiagram=t.Ud.targetDiagram):null!==t.Vf&&(i.documentPoint=t.Vf.documentPoint,i.viewPoint=t.Vf.viewPoint,i.targetDiagram=t.Vf.targetDiagram),i.targetObject=null,i}function Yo(t,e,n,i,o,r){var a=t.Ud;t.Ud=t.gh,(t.gh=a).diagram=t,a.clickCount=1;var s=a.delta=0;return e.ctrlKey&&(s+=1),e.altKey&&(s+=2),e.shiftKey&&(s+=4),e.metaKey&&(s+=8),a.modifiers=s,a.button=0,a.buttons=1,a.event=e,a.timestamp=e.timeStamp,t.ln&&e instanceof d.PointerEvent&&"touch"!==e.pointerType&&(a.button=e.button,void 0===e.buttons||A||(a.buttons=e.buttons),E&&0===e.button&&e.ctrlKey&&(a.button=2)),a.down=n,a.up=i,a.handled=!1,a.bubbles=o,a.isMultiTouch=r,a}function Ko(t,e){return!!t.bubbles||(void 0!==e.stopPropagation&&e.stopPropagation(),!1!==e.cancelable&&e.preventDefault(),!(e.cancelBubble=!0))}function Xo(t,e,n){var i=t.ta,o=t.xa,r=t.wa,a=0,s=0;null!==i&&(i=i.getBoundingClientRect(),a=e.clientX-o/i.width*i.left,s=e.clientY-r/i.height*i.top),n.viewPoint.h(a,s),null!==t.ob?(e=ee.allocAt(a,s),t.ob.Zd(e),n.documentPoint.assign(e),ee.free(e)):n.documentPoint.h(a,s)}function Wo(t,e,n,i){if(void 0!==e.targetTouches){if(e.targetTouches.length<2)return;e=e.targetTouches[n]}else{if(null===t.Zj[0])return;e=t.Zj[n]}null!==(n=t.ta)&&(n=n.getBoundingClientRect(),i.h(e.clientX-t.xa/n.width*n.left,e.clientY-t.wa/n.height*n.top))}function $o(t,e,n){t.animationManager.defaultAnimation.isAnimating||t.Rb||!t.vi||sr(t)||(e&&Zo(t),n&&jo(t,!1))}function Jo(t,e){if(!t.jc&&(t.Ae=!1,null!==t.Ea||t.mm.u())){t.jc=!0;var n=t.animationManager,i=t.Ns;if(!n.isAnimating&&0!==i.length){for(var o=i.j,r=o.length,a=0;a<r;a++){var s=o[a];Xa(s,!1),s.o()}i.clear()}0<(i=t.Ru).count&&(i.each(function(t){t.Tw()}),i.clear()),o=i=!1,n.isAnimating&&(o=!0,i=t.skipsUndoManager,t.skipsUndoManager=!0),n.rc||Do(t),$o(t,!1,!0),null!==t.Ib&&(t.Ib.visible&&!t.no&&(yr(t),t.no=!0),!t.Ib.visible&&t.no&&(t.no=!1)),Zo(t),r=!1,t.me&&!t.Ng||(t.me?kr(t,!t.Ej):(t.va("Initial Layout"),!1===n.isEnabled&&n.Nc(),kr(t,!1)),r=!0),t.Ej=!1,Zo(t),t.gt||((l=t).jc||Zo(l),l.Ta()),$o(t,!0,!1),a=!1,r?((n=ne.alloc()).assign(t.viewportBounds),t.me||(a=t.me=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,u=(h=t).ya,h.Yf!==Jr?h.scale=zo(h,h.Yf):h.Og!==Jr?h.scale=zo(h,h.Og):(l=h.initialScale,isFinite(l)&&0<l&&(h.scale=l)),h.ya!==u&&(ir(h),$o(h,!0,!1)),jo(h,!0),u=h.La.j,h.Fd(u,u.length,h),h.R("InitialLayoutCompleted"),h.Vs.assign(h.la),yr(h)),t.R("LayoutCompleted"),n.w(t.viewportBounds)||$o(t,!0,!1),ne.free(n)):n.tl&&n.Ox&&(t.Yf!==Jr?t.scale=zo(t,t.Yf):t.Og!==Jr?t.scale=zo(t,t.Og):(n=t.initialScale,isFinite(n)&&0<n&&(t.scale=n)),jo(t,!0)),Zo(t),r&&a&&t.Wa("Initial Layout"),t.Gv(),e||t.bc(t.Gb),o&&(t.skipsUndoManager=i),t.jc=!1}var h,u,l}function Zo(t){if((t.jc||!t.animationManager.isTicking)&&0!==t.rd.count){for(var e=0;e<23;e++){var n=t.rd.iterator;if(null===n||0===t.rd.count)break;t.rd=new $,t.Tw(n,t.rd)}t.nodes.each(function(t){t instanceof pl&&0!=(65536&t.P)!=!1&&(t.P=65536^t.P)})}}function Qo(t,e){for(var n=be(),i=be(),o=e.memberParts;o.next();){var r=o.value;r.isVisible()&&(r instanceof pl?(Ka(r)||Wa(r)||Yu(r))&&Qo(t,r):r instanceof wl?(r.fromNode===e||r.toNode===e?i:n).push(r):(r.measure(1/0,1/0),r.arrange()))}for(t=n.length,o=0;o<t;o++)(r=n[o]).measure(1/0,1/0),r.arrange();for(Se(n),e.measure(1/0,1/0),e.arrange(),t=i.length,e=0;e<t;e++)(n=i[e]).measure(1/0,1/0),n.arrange();Se(i)}function tr(u,l,t,e,n,i,o,r,d,a){if(null!==u.Ea){null===u.ta&&O("No canvas specified"),void 0===o&&(o=null),void 0===r&&(r=null),void 0===d&&(d=!1),void 0===a&&(a=!1),rr(u),u.Gb.tc(!0),or(u),u.xi=!0;var s=u.ya;u.ya=n;var h=u.La.j,c=h.length;try{var g=new ne(i.x,i.y,e.width/n,e.height/n),f=g.copy();f.sq(t),yr(u,f),Zo(u),u.Fd(h,c,u,g),l.setTransform(1,0,0,1,0,0),l.clearRect(0,0,e.width,e.height),null!==r&&""!==r&&(l.fillStyle=r,l.fillRect(0,0,e.width,e.height));g=u.Sb;l.scale(g,g);var p,m,g=Ie.alloc();if(g.reset(),g.translate(t.left,t.top),g.scale(n),0===i.x&&0===i.y||g.translate(-i.x,-i.y),l.setTransform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy),Ie.free(g),er(u,l),l.globalAlpha=u.tb,null!==o){var y=new $,v=o.iterator;for(v.reset();v.next();){var w=v.value;!1===a&&"Grid"===w.layer.name||null===w||y.add(w)}var b=function(t){if(t.visible&&0!==t.tb&&(d||!t.isTemporary)){var e=t.Da.j,n=e.length;if(0!==n){var i=ko(t,l),o=t.np;o.length=0;for(var r=u.scale,a=ne.alloc(),s=0;s<n;s++){var h=e[s];y.contains(h)&&t.dj(l,h,u,o,r,a,!1)}ne.free(a),l.globalAlpha=i}}}}else b=!d&&a?(p=u.grid.part,m=p.layer,function(t){t===m?p.bc(l,u):t.bc(l,u,d)}):function(t){t.bc(l,u,d)};for(t=0;t<c;t++)b(h[t]);u.xi=!1,u.ti&&pa(u.ti,u)&&u.Vr()}finally{u.ya=s,u.Gb.tc(!0),or(u),u.Fd(h,c,u),yr(u)}}}function er(t,e){null!==(t=t.gf)&&(void 0!==t.imageSmoothingEnabled&&e.Py(!!t.imageSmoothingEnabled),null!=(t=t.defaultFont)&&(e.font=t))}function nr(t,e){var n,i=t instanceof hh,o=t instanceof Mo;for(n in e){""===n&&O("Setting properties requires non-empty property names");var r,a,s=t,h=n;if(!i&&!o||0<(r=n.indexOf("."))&&(a=n.substring(0,r),i?s=t.$a(a):null==(s=t[a])&&(s=t.toolManager[a]),y(s)?h=n.substr(r+1):O("Unable to find object named: "+a+" in "+t.toString()+" when trying to set property: "+n)),"_"!==h[0]&&!L(s,h)){if(o&&"ModelChanged"===h){t.Vx(e[h]);continue}if(o&&"Changed"===h){t.Hh(e[h]);continue}if(o&&L(t.toolManager,h))s=t.toolManager;else{if(o&&Mr(t,h)){t.hk(h,e[h]);continue}if(t instanceof pc&&"Changed"===h){t.Hh(e[h]);continue}O('Trying to set undefined property "'+h+'" on object: '+s.toString())}}s[h]=e[n],"_"===h[0]&&s instanceof Na&&s.Rx(h)}}function ir(t){!1===t.vi&&(t.vi=!0)}function or(t){!1===t.wi&&(t.wi=!0)}function rr(t){!1!==t.yl&&(t.yl=!1,ar(t,t.xa,t.wa))}function ar(t,e,n){var i=t.Sb;t.ta.resize(e*i,n*i,e,n)&&(t.Dc=!0,t.Gb.tc(!0))}function sr(t){var e=t.ta;if(null===e)return 1;var n=t.Ea,i=t.xa,o=t.wa,r=t.viewportBounds.copy();if(!r.u())return 1;var a=!1,s=t.Xe?t.nb:0,h=t.le?t.nb:0,u=n.clientWidth||i+s,l=n.clientHeight||o+h;if(u===i+s&&l===o+h||(t.Xe=!1,t.le=!1,h=s=0,t.xa=u,t.wa=l,a=t.yl=!0),!(a||t.Xe||t.le||t.pl||t.ql))return 1;t.vi=!1;var d=t.viewportBounds,c=t.documentBounds,g=0,f=0,p=0,m=0,n=d.width,y=d.height,v=t.Si;t.contentAlignment.ib()?(c.width>n&&(g=v.left,f=v.right),c.height>y&&(p=v.top,m=v.bottom)):(g=v.left,f=v.right,p=v.top,m=v.bottom),v=c.width+g+f;var w=c.height+p+m,g=c.x-g,b=d.x,f=c.right+f,S=d.right+s,p=c.y-p,x=d.y,c=c.bottom+m,d=d.bottom+h,P="1px",k="1px",u=u/(m=t.scale)<v,l=l/m<w;if(t.scrollMode===aa&&(u||l)&&(u&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(g+(u=1)<b&&(u=Math.max((b-g)*m+t.xa,u)),S+1<f&&(u=Math.max((f-S)*m+t.xa,u)),n+s+1<v&&(u=Math.max((v-n)*m+t.xa,u)),P=u.toString()+"px"),l&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(p+(u=1)<x&&(u=Math.max((x-p)*m+t.wa,u)),d+1<c&&(u=Math.max((c-d)*m+t.wa,u)),y+h+1<w&&(u=Math.max((w-y)*m+t.wa,u)),k=u.toString()+"px")),l="1px"!==k,(u="1px"!==P)&&l||!u&&!l||(l&&(S-=t.nb),u&&(d-=t.nb),v<n+s||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(g+(s=1)<b&&(s=Math.max((b-g)*m+t.xa,s)),S+1<f&&(s=Math.max((f-S)*m+t.xa,s)),n+1<v&&(s=Math.max((v-n)*m+t.xa,s)),P=s.toString()+"px"),u="1px"!==P,s=t.wa,u!==t.le&&(s=u?t.wa-t.nb:t.wa+t.nb),w<y+h||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(p+(h=1)<x&&(h=Math.max((x-p)*m+s,h)),d+1<c&&(h=Math.max((c-d)*m+s,h)),y+1<w&&(h=Math.max((w-y)*m+s,h)),k=h.toString()+"px"),l="1px"!==k),t.Kp&&u===t.le&&l===t.Xe)return i===t.xa&&o===t.wa||t.cd(),0;if(u!==t.le&&(t.wa="1px"===P?t.wa+t.nb:Math.max(t.wa-t.nb,1),a=!0),t.le=u,t.Lp.style.width=P,l!==t.Xe&&(t.xa="1px"===k?t.xa+t.nb:Math.max(t.xa-t.nb,1),a=!0,t.Al&&(h=ee.alloc(),l?(e.style.left=t.nb+"px",t.position=h.h(t.la.x+t.nb/t.scale,t.la.y)):(e.style.left="0px",t.position=h.h(t.la.x-t.nb/t.scale,t.la.y)),ee.free(h))),t.Xe=l,t.Lp.style.height=k,t.Xs=!0,a&&(t.yl=!0),h=(e=t.$s).scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(n+1<v?h=(t.position.x-g)*m:g+1<b?h=e.scrollWidth-e.clientWidth:S+1<f&&(h=t.position.x*m)),t.Al)switch(t.Us){case"negative":h=-(e.scrollWidth-h-e.clientWidth);break;case"reverse":h=e.scrollWidth-h-e.clientWidth}return e.scrollLeft=h,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(y+1<w?e.scrollTop=(t.position.y-p)*m:p+1<x?e.scrollTop=e.scrollHeight-e.clientHeight:d+1<c&&(e.scrollTop=t.position.y*m)),u=t.xa,l=t.wa,e.style.width=u+(t.Xe?t.nb:0)+"px",e.style.height=l+(t.le?t.nb:0)+"px",i===u&&o===l&&!t.animationManager.rc||(t.Vq(r,t.viewportBounds,m,a),0)}function hr(t,e,n){var i=e.layer;null!==i&&i.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.C(2),n&&e.rk(),0<=(n=i.Kc(-1,e,!1))&&t.ab(xn,"parts",i,e,null,n,null),null!==(t=e.layerChanged)&&t(e,i,null))}function ur(t,e,n,i,o,r){if(!e.contains(n)&&(void 0===r&&(r=!1),!i||r||n.canMove()||n.canCopy()))if(void 0===o&&(o=dr(t)),n instanceof el){if(e.add(n,t.xd(o,n,n.location)),n instanceof pl&&(null!==n.placeholder||o.dragsMembers))for(r=n.memberParts;r.next();)ur(t,e,r.value,i,o,o.groupsAlwaysMove);for(r=n.linksConnected;r.next();){var a,s,h=r.value;e.contains(h)||(a=h.fromNode,s=h.toNode,null!==a&&e.contains(a)&&null!==s&&e.contains(s)&&ur(t,e,h,i,o))}if(o.dragsTree)for(n=n.Vv();n.next();)ur(t,e,n.value,i,o)}else if(n instanceof wl)for(e.add(n,t.xd(o,n)),n=n.labelNodes;n.next();)ur(t,e,n.value,i,o);else n instanceof tl||e.add(n,t.xd(o,n,n.location))}function lr(t,e,n,i,o){if(null!==e&&0!==e.count){var r=ee.alloc(),a=ee.alloc();a.assign(n),isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),(n=t.cq)||gr(t,e);for(var s=be(),h=be(),u=e.iterator,l=ee.alloc();u.next();){var d=u.key,c=u.value;d.Wb()?null!==(p=function t(e,n,i){n=n.containingGroup;if(null!==n){if(null!==(e=t(e,n,i)))return e;if(null!==(e=i.H(n)))return e}return null}(t,d,e))?s.push(new va(d,c,p)):o&&!d.canMove()||(p=c.point,r.assign(p),t.computeMove(d,r.add(a),i,l),d.location=l,void 0===c.shifted&&(c.shifted=new ee),c.shifted.assign(l.ce(p))):u.key instanceof wl&&h.push(u.ka)}for(ee.free(l),o=s.length,u=0;u<o;u++)d=s[u],r.assign(d.info.point),void 0===d.Zv.shifted&&(d.Zv.shifted=new ee),d.node.location=r.add(d.Zv.shifted);for(o=ee.alloc(),u=ee.alloc(),d=h.length,c=0;c<d;c++){var g,f,p,m=h[c];(p=m.key)instanceof wl&&(p.suspendsRouting?(p.qg=null,l=p.fromNode,f=p.toNode,null!==t.draggedLink&&i.dragsLink?(f=m.value.point,null===p.dragComputation?(e.add(p,t.xd(i,p,a)),xl(p,a.x-f.x,a.y-f.y)):(m=ee.allocAt(0,0),(l=p.i(0))&&l.u()&&m.assign(l),g=l=ee.alloc().assign(m).add(a),i.isGridSnapEnabled&&(i.isGridSnapRealtime||t.lastInput.up)&&cr(t,p,l,g=ee.alloc(),i),l.assign(p.dragComputation(p,l,g)).ce(m),e.add(p,t.xd(i,p,l)),xl(p,l.x-f.x,l.y-f.y),ee.free(m),ee.free(l),g!==l&&ee.free(g))):(null!==l&&(o.assign(l.location),null!==(g=e.H(l))&&o.ce(g.point)),null!==f&&(u.assign(f.location),null!==(g=e.H(f))&&u.ce(g.point)),null!==l&&null!==f?o.Na(u)?(l=m.value.point,(f=r).assign(o),f.ce(l),e.add(p,t.xd(i,p,o)),xl(p,f.x,f.y)):(p.suspendsRouting=!1,p.Ua()):(m=m.value.point,l=null!==l?o:null!==f?u:a,e.add(p,t.xd(i,p,l)),xl(p,l.x-m.x,l.y-m.y)))):null!==p.fromNode&&null!==p.toNode||(l=m.value.point,e.add(p,t.xd(i,p,a)),xl(p,a.x-l.x,a.y-l.y)))}ee.free(r),ee.free(a),ee.free(o),ee.free(u),Se(s),Se(h),n||(Zo(t),fr(t,e))}}function dr(t){var e=t.toolManager.findTool("Dragging");return null!==e?e.dragOptions:t.dl}function cr(t,e,n,i,o){var r,a,s,h;void 0===o&&(o=dr(t)),i.assign(n),null!==e&&(r=t.grid,t=(e=o.gridSnapCellSize).width,e=e.height,a=(h=o.gridSnapOrigin).x,h=h.y,o=o.gridSnapCellSpot,null!==r&&(s=r.gridCellSize,isNaN(t)&&(t=s.width),isNaN(e)&&(e=s.height),r=r.gridOrigin,isNaN(a)&&(a=r.x),isNaN(h)&&(h=r.y)),(r=ee.allocAt(0,0)).Lk(0,0,t,e,o),Ue.Eq(n.x,n.y,a+r.x,h+r.y,t,e,i),ee.free(r))}function gr(t,e){if(null!==e)for(t.cq=!0,t=e.iterator;t.next();)(e=t.key)instanceof wl&&(e.suspendsRouting=!0)}function fr(t,e){if(null!==e){for(e=e.iterator;e.next();){var n=e.key;n instanceof wl&&(n.suspendsRouting=!1,_l(n)&&n.Ua())}t.cq=!1}}function pr(t,e,n){if(null!==e.diagram&&e.diagram!==t&&O("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),null===n?null!==e.diagram&&O("Cannot add an existing Layer to this Diagram again: "+e):(n.diagram!==t&&O("Existing Layer must be in this Diagram: "+n+" not in "+n.diagram),e===n&&O("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,n=(t=t.La).count;for(var i=0;i<n;i++)t.L(i).name===e&&O("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}function mr(t,e,n){var i,o,r,a,s,h,u=t.animationManager;t.Rb||t.jc?(t.ya=n,u.df&&u.Jd.add(u.B,"scale",e,t.ya)):null===t.ta?t.ya=n:(t.Rb=!0,i=t.viewportBounds.copy(),o=t.xa,r=t.wa,i.width=t.xa/e,i.height=t.wa/e,a=t.zoomPoint.x,s=t.zoomPoint.y,h=t.contentAlignment,isNaN(a)&&(h.Mc()?h.Df(re)?a=0:h.Df(ae)&&(a=o-1):a=h.ib()?h.x*(o-1):o/2),isNaN(s)&&(h.Mc()?h.Df(te)?s=0:h.Df(se)&&(s=r-1):s=h.ib()?h.y*(r-1):r/2),null===t.scaleComputation||t.animationManager.isAnimating||(n=t.scaleComputation(t,n)),n<t.minScale&&(n=t.minScale),n>t.maxScale&&(n=t.maxScale),o=ee.allocAt(t.la.x+a/e-a/n,t.la.y+s/e-s/n),t.position=o,ee.free(o),t.ya=n,t.Vq(i,t.viewportBounds,e,!1),t.Rb=!1,jo(t,!1),u.df&&u.Jd.add(u.B,"scale",e,t.ya),t.M(),ir(t))}function yr(t,e){void 0===e&&(e=null);var n=t.Ib;if(null!==n&&n.visible){for(var i=xe.alloc(),o=1,r=1,a=n.W.j,s=a.length,h=0;h<s;h++){var u=a[h],l=u.interval;l<2||(ch(u.figure)?r=r*l/Ue.qy(r,l):o=o*l/Ue.qy(o,l))}if(a=n.gridCellSize,i.h(r*a.width,o*a.height),null!==e)o=e.width,r=e.height,t=e.x,a=e.y;else{if(e=ne.alloc(),t=t.viewportBounds,e.h(t.x,t.y,t.width,t.height),!e.u())return void ne.free(e);o=e.width,r=e.height,t=e.x,a=e.y,ne.free(e)}n.width=o+2*i.width,n.height=r+2*i.height,e=ee.alloc(),Ue.Eq(t,a,0,0,i.width,i.height,e),e.offset(-i.width,-i.height),xe.free(i),n.part.location=e,ee.free(e)}}function vr(t){var e=t.isModified;t.zv!==e&&(t.zv=e,t.R("Modified"))}function wr(t,e){for(var n=(e=e.W.j).length,i=0;i<n;i++)br(t,e[i])}function br(t,e){if(e instanceof vu){var n=e.element;if(null!==n&&n instanceof HTMLImageElement){var i=e.Yg;if(null!==i&&(i.ol instanceof Event&&null!==e.Cc&&e.Cc(e,i.ol),!0===i.ns&&(null!==e.qf&&e.qf(e,i.ov),null!==e.diagram&&e.diagram.Ns.add(e))),n=n.getAttribute("src"),null===(i=t.Pi.H(n)))(i=[]).push(e),t.Pi.add(n,i);else{for(t=0;t<i.length;t++)if(i[t]===e)return;i.push(e)}}}}function Sr(t,e){if(e instanceof vu){var n=e.element;if(null!==n&&n instanceof HTMLImageElement){n=n.getAttribute("src");var i=t.Pi.H(n);if(null!==i)for(var o=0;o<i.length;o++)if(i[o]===e){i.splice(o,1),0===i.length&&(t.Pi.remove(n),wu(n));break}}}}function xr(t,e){t.ui=!1;var n=t.Qn;n.w(e)||(e=e.G(),t.Qn=e,jo(t,!1),t.R("DocumentBoundsChanged",null,n.copy()),ir(t))}function Pr(t,e){for(var n=t.Dh.iterator;n.next();)!function t(e,n,i){if(null!==n){for(var o=n.Ml.iterator;o.next();)t(e,o.value,i);null!==n.layout&&(i?n.layout.isValidLayout=!1:n.layout.C())}}(t,n.value,e);null!==t.layout&&(e?t.layout.isValidLayout=!1:t.layout.C())}function kr(t,e){if(t.Ng&&!t.Pr){var n=t.Z;t.Z=!0;var i=t.undoManager.transactionLevel,o=t.layout,r=t.animationManager;try{0===i&&(t.undoManager.isInternalTransaction=!0,t.va("Layout")),i<=1&&!r.isAnimating&&!r.rc&&(e||Wi(r,"Layout")),t.Ng=!1;for(var a=t.Dh.iterator;a.next();)!function t(e,n,i,o){if(null!==n){for(var r=n.Ml.iterator;r.next();)t(e,r.value,i,o);null===(r=n.layout)||r.isValidLayout||(!i||r.isRealtime||0===o?(n.Rh=!n.location.u(),r.doLayout(n),n.C(32),Qo(e,n),r.isValidLayout=!0):e.Ng=!0)}}(t,a.value,e,i);o.isValidLayout||(!e||o.isRealtime||null===o.isRealtime||0===i?(o.doLayout(t),Zo(t),o.isValidLayout=!0):t.Ng=!0)}finally{e=t.undoManager.isInternalTransaction,0===i&&(t.Wa("Layout"),t.undoManager.isInternalTransaction=!1),!e||0!==i&&1!==i||Ji(r),t.Z=n}}}function Lr(t){function e(t){var e=t.toLowerCase(),n=new X;i.add(t,n),i.add(e,n),o.add(t,t),o.add(e,t)}var i=new at,o=new at;e("InitialAnimationStarting"),e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.Sr=i,t.Rr=o}function Mr(t,e){var n=t.Rr.H(e);return null!==n?n:t.Rr.H(e.toLowerCase())}function _r(t,e){var n=t.Sr.H(e);return null!==n||null!==(n=t.Sr.H(e.toLowerCase()))?n:void O("Unknown DiagramEvent name: "+e)}function Nr(t){if(!t.animationManager.isTicking){var e=t.currentTool;return e!==t.toolManager.findTool("Dragging")||(!t.cq||e.isComplexRoutingRealtime)}}function Ar(t,e,n,i){if(null===t.Gc&&(t.Gc=new od),t.Gc.Rt||t.Gc.group!==n||t.Gc.Sy!==i){if(null===n){(e=t.computeOccupiedArea()).Ic(100,100),t.Gc.initialize(e),e=ne.alloc();for(var o=t.nodes;o.next();){var r=o.value,a=r.layer;null!==a&&a.visible&&!a.isTemporary&&Tr(t,r,i,e)}ne.free(e)}else{for(0<n.memberParts.count&&((e=t.computePartsBounds(n.memberParts,!1)).Ic(20,20),t.Gc.initialize(e)),e=ne.alloc(),o=n.memberParts;o.next();)(r=o.value)instanceof el&&Tr(t,r,i,e);ne.free(e)}t.Gc.group=n,t.Gc.Sy=i,t.Gc.Rt=!1}else e&&sd(t.Gc);return t.Gc}function Tr(t,e,n,i){if(e!==n)if(e.isVisible()&&e.avoidable&&!e.isLinkLabel){e=e.getAvoidableRect(i),t=t.Gc;var o=e.x,r=e.y;if(rd(t,o,r))for(n=(r-t.wd)/t.fc|0,i=Math.min((o+e.width-t.vd)/t.ec|0,t.Zi),e=Math.min((r+e.height-t.wd)/t.fc|0,t.$i),o=(o-t.vd)/t.ec|0;o<=i;o++)if((r=t.Qb[o]).fill)r.fill(cd,n,e+1);else for(var a=n;a<=e;a++)r[a]=cd}else if(e instanceof pl)for(e=e.memberParts;e.next();)(o=e.value)instanceof el&&Tr(t,o,n,i)}function Cr(t,e){null!==t.Gc&&!t.Gc.Rt&&(void 0===e&&(e=null),null===e||e.avoidable&&!e.isLinkLabel)&&(t.Gc.Rt=!0)}function Dr(t,e,n){function i(){var t=+new Date;for(r=!0,a.reset();a.next();)if(!a.value[0].Il){r=!1;break}r||h<t-u?e(n,o,s):d.requestAnimationFrame(i)}for(var o=n.callback,r=!0,a=t.Pi.iterator;a.next();)if(!a.value[0].Il){r=!1;break}if("function"!=typeof o||r)return e(n,o,t);var s=t,h=n.callbackTimeout||300,u=+new Date;return d.requestAnimationFrame(function(){i()}),null}function Er(t,e,n,i){if(t.animationManager.Nc(),t.cd(),null===t.ta)return null;"object"!==_typeof(e)&&O("properties argument must be an Object.");var o=e.size||null,r=e.scale||null;void 0!==e.scale&&isNaN(e.scale)&&(r="NaN");var a=e.maxSize;void 0===e.maxSize&&(a="SVG"===n?new xe(1/0,1/0):new xe(2e3,2e3));var s=e.position||null,h=e.parts||null,u=void 0===e.padding?1:e.padding,l=e.background||null,d=e.omitTemporary;void 0===d&&(d=!0);var c=e.document||document,g=e.elementFinished||null,f=e.showTemporary;void 0===f&&(f=!d),void 0===(e=e.showGrid)&&(e=f),null!==o&&isNaN(o.width)&&isNaN(o.height)&&(o=null),"number"==typeof u?u=new Vt(u):u instanceof Vt||O("MakeImage padding must be a Margin or a number."),u.left=Math.max(u.left,0),u.right=Math.max(u.right,0),u.top=Math.max(u.top,0),u.bottom=Math.max(u.bottom,0),t.Gb.tc(!0);var p=(d=new fs(null,c)).context;if(!(o||r||h||s))return d.width=t.xa+Math.ceil(u.left+u.right),d.height=t.wa+Math.ceil(u.top+u.bottom),"SVG"===n?null===i?null:(i.resize(d.width,d.height,d.width,d.height),i.ownerDocument=c,i.Bq=g,tr(t,i.context,u,new xe(d.width,d.height),t.ya,t.la,h,l,f,e),i.context):(t.kl=!1,tr(t,p,u,new xe(d.width,d.height),t.ya,t.la,h,l,f,e),t.kl=!0,d.context);var m,y=t.Pn,v=t.documentBounds.copy();if(v.Iw(t.gb),f)for(var w=t.La.j,b=w.length,S=0;S<b;S++){var x=w[S];if(x.visible&&x.isTemporary)for(var P=(x=x.Da.j).length,k=0;k<P;k++){var L=x[k];L.isInDocumentBounds&&L.isVisible()&&((L=L.actualBounds).u()&&v.Oc(L))}}if(w=new ee(v.x,v.y),null!==h){for(b=!0,(S=h.iterator).reset();S.next();)(x=S.value)instanceof Ou&&((null===(P=x.layer)||P.visible)&&(null===P||f||!P.isTemporary)&&x.isVisible()&&(x=x.actualBounds).u())&&(b?(b=!1,m=x.copy()):m.Oc(x));b&&(m=new ne(0,0,0,0)),v.width=m.width,v.height=m.height,w.x=m.x,w.y=m.y}return null!==s&&s.u()&&(w=s,r=r||y),m=s=0,null!==u&&(s=u.left+u.right,m=u.top+u.bottom),b=S=0,null!==o&&(S=o.width,b=o.height,isFinite(S)&&(S=Math.max(0,S-s)),isFinite(b)&&(b=Math.max(0,b-m))),v=null!==o&&null!==r?("NaN"===r&&(r=y),o.u()?(o=S,b):isNaN(b)?(o=S,v.height*r):(o=v.width*r,b)):null!==o?o.u()?(r=Math.min(S/v.width,b/v.height),o=S,b):isNaN(b)?(r=S/v.width,o=S,v.height*r):(r=b/v.height,o=v.width*r,b):null!==r?"NaN"===r&&a.u()?y<(r=Math.min((a.width-s)/v.width,(a.height-m)/v.height))?(r=y,o=v.width,v.height):(o=a.width,a.height):(o=v.width*r,v.height*r):(r=y,o=v.width,v.height),null!==u?(o+=s,v+=m):u=new Vt(0),null!==a&&(y=a.width,a=a.height,isNaN(y)&&(y=2e3),isNaN(a)&&(a=2e3),isFinite(y)&&(o=Math.min(o,y)),isFinite(a)&&(v=Math.min(v,a))),d.width=Math.ceil(o),d.height=Math.ceil(v),"SVG"===n?null===i?null:(i.resize(d.width,d.height,d.width,d.height),i.ownerDocument=c,i.Bq=g,tr(t,i.context,u,new xe(Math.ceil(o),Math.ceil(v)),r,w,h,l,f,e),i.context):(t.kl=!1,tr(t,p,u,new xe(Math.ceil(o),Math.ceil(v)),r,w,h,l,f,e),t.kl=!0,d.context)}wo.className="AnimationTrigger",wo.Default=bo,wo.Immediate=So,wo.Bundled=xo,(Bp=Po.prototype).clear=function(){this.Da.clear(),this.np.length=0},Bp.ae=function(t){this.B=t},Bp.toString=function(t){void 0===t&&(t=0);var e='Layer "'+this.name+'"';if(t<=0)return e;for(var n=0,i=0,o=0,r=0,a=0,s=this.Da.iterator;s.next();){var h=s.value;h instanceof pl?o++:h instanceof el?i++:h instanceof wl?r++:h instanceof tl?a++:n++}if(s="",0<n&&(s+=n+" Parts "),0<i&&(s+=i+" Nodes "),0<o&&(s+=o+" Groups "),0<r&&(s+=r+" Links "),0<a&&(s+=a+" Adornments "),1<t)for(t=this.Da.iterator;t.next();)s+="\n    "+(n=t.value).toString(),null!==(i=n.data)&&Q(i)&&(s+=" #"+Q(i)),n instanceof el?s+=" "+k(i):n instanceof wl&&(s+=" "+k(n.fromNode)+" "+k(n.toNode));return e+" "+this.Da.count+": "+s},Bp.Ub=function(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),!1===this.Oi)return null;var i=!1;null!==this.diagram&&this.diagram.viewportBounds.aa(t)&&(i=!0);for(var o=ee.alloc(),r=this.Da.j,a=r.length;a--;){var s=r[a];if((!0!==i||!1!==Wu(s))&&s.isVisible()&&(o.assign(t),lt(o,s.Ad),null!==(s=s.Ub(o,e,n))&&(null!==e&&(s=e(s)),null!==s&&(null===n||n(s)))))return ee.free(o),s}return ee.free(o),null},Bp.hj=function(t,e,n,i){if(void 0===e&&(e=null),void 0===n&&(n=null),i instanceof X||i instanceof $||(i=new $),!1===this.Oi)return i;var o=!1;null!==this.diagram&&this.diagram.viewportBounds.aa(t)&&(o=!0);for(var r=ee.alloc(),a=this.Da.j,s=a.length;s--;){var h=a[s];!0===o&&!1===Wu(h)||!h.isVisible()||(r.assign(t),lt(r,h.Ad),(h=h).hj(r,e,n,i)&&(null!==e&&(h=e(h)),null===h||null!==n&&!n(h)||i.add(h)))}return ee.free(r),i},Bp.zf=function(t,e,n,i,o){if(void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=!1),o instanceof X||o instanceof $||(o=new $),!1===this.Oi)return o;var r=!1;null!==this.diagram&&this.diagram.viewportBounds.De(t)&&(r=!0);for(var a=this.Da.j,s=a.length;s--;){var h=a[s];!0===r&&!1===Wu(h)||!h.isVisible()||(h=h).zf(t,e,n,i,o)&&(null!==e&&(h=e(h)),null===h||null!==n&&!n(h)||o.add(h))}return o},Bp.Uv=function(t,e,n,i,o,r,a){if(!1===this.Oi)return o;for(var s=this.Da.j,h=s.length;h--;){var u=s[h];!0===a&&!1===Wu(u)||!r(u)||!u.isVisible()||(u=u).zf(t,e,n,i,o)&&(null!==e&&(u=e(u)),null===u||null!==n&&!n(u)||o.add(u))}return o},Bp.Eg=function(t,e,n,i,o,r){if(void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof X||o instanceof $)&&(r=o),o=!0),r instanceof X||r instanceof $||(r=new $),!1===this.Oi)return r;var a=!1;null!==this.diagram&&this.diagram.viewportBounds.aa(t)&&(a=!0);for(var s=ee.alloc(),h=ee.alloc(),u=this.Da.j,l=u.length;l--;){var d=u[l];!0===a&&!1===Wu(d)||!d.isVisible()||(s.assign(t),lt(s,d.Ad),h.h(t.x+e,t.y),lt(h,d.Ad),(d=d).Eg(s,h,n,i,o,r)&&(null!==n&&(d=n(d)),null===d||null!==i&&!i(d)||r.add(d)))}return ee.free(s),ee.free(h),r},Bp.Fd=function(t,e){if(this.visible){var n=this.Da.j,i=n.length;if(0!==i){t=be();for(var o=be(),r=0;r<i;r++){var a=n[r];if(a.xx=r,a instanceof wl){if(!1===a.dd)continue}else if(a instanceof tl&&null!==a.adornedPart)continue;Bt(a.actualBounds,e)?(a.Fd(!0),t.push(a)):(a.Fd(!1),null!==a.adornments&&0<a.adornments.count&&o.push(a))}for(e=0;e<t.length;e++)for(Bu(n=t[e]),n=n.adornments;n.next();)(i=n.value).measure(1/0,1/0),i.arrange(),i.Fd(!0);for(e=0;e<o.length;e++)Bu(o[e]);Se(t),Se(o)}}},Bp.bc=function(t,e,n){if(this.visible&&0!==this.tb&&(void 0===n&&(n=!0),n||!this.isTemporary)){var i=(n=this.Da.j).length;if(0!==i){var o=ko(this,t),r=this.np;r.length=0;for(var a=e.scale,s=ne.alloc(),h=0;h<i;h++)this.dj(t,n[h],e,r,a,s,!0);ne.free(s),t.globalAlpha=o}}},Bp.dj=function(t,e,n,i,o,r,a){if((!a||Wu(e))&&!(null!==i&&e instanceof wl&&(e.isOrthogonal&&i.push(e),!1===e.dd))){a=e.actualBounds,i=!1;var s=e.containingGroup;if(null!==s&&s.isClipping&&s.type!==hh.Spot&&e.isVisible()){if((i=s.resizeObject)instanceof hh&&(i=i.pb()),i.wm(r),i instanceof Oh&&r.Ic(-i.strokeWidth,-i.strokeWidth),!r.Lc(a))return;i=!r.De(a)}i&&(t.save(),t.beginPath(),t.rect(r.x,r.y,r.width,r.height),t.clip()),a.width*o>n.To||a.height*o>n.To?e.bc(t,n):(o=e.actualBounds,r=e.naturalBounds,0===o.width||0===o.height||isNaN(o.x)||isNaN(o.y)||!e.isVisible()||(n=e.transform,null!==e.areaBackground&&(Oa(e,t,e.areaBackground,!0,!0,r,o),t.fillRect(o.x,o.y,o.width,o.height)),null===e.areaBackground&&null===e.background&&(Oa(e,t,"rgba(0,0,0,0.3)",!0,!1,r,o),t.fillRect(o.x,o.y,o.width,o.height)),null!==e.background&&(t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),Oa(e,t,e.background,!0,!1,r,o),t.fillRect(0,0,r.width/2,r.height/2),n.Tt()||(e=1/(n.m11*n.m22-n.m12*n.m21),t.transform(n.m22*e,-n.m12*e,-n.m21*e,n.m11*e,e*(n.m21*n.dy-n.m22*n.dx),e*(n.m12*n.dx-n.m11*n.dy)))))),i&&(t.restore(),t.tc(!0))}},Bp.g=function(t,e,n,i,o){var r=this.diagram;null!==r&&r.ab(bn,t,this,e,n,i,o)},Bp.nj=function(t,e,n){var i=this.Da;if(e.Ei=this,t>=i.count)t=i.count;else if(i.L(t)===e)return-1;return i.vb(t,e),e.Kq(n),null!==(i=this.diagram)&&(n?i.M():i.nj(e)),Lo(this,t,e),t},Bp.Kc=function(t,e,n){if(!n&&e.layer!==this&&null!==e.layer)return e.layer.Kc(t,e,n);var i=this.Da;if(t<0||t>=i.length){if((t=i.indexOf(e))<0)return-1}else if(i.L(t)!==e&&(t=i.indexOf(e))<0)return-1;return e.Lq(n),i.bb(t),null!==(i=this.diagram)&&(n?i.M():i.Kc(e)),e.Ei=null,t},s.Object.defineProperties(Po.prototype,{parts:{get:function(){return this.Da.iterator}},partsBackwards:{get:function(){return this.Da.iteratorBackwards}},diagram:{get:function(){return this.B}},name:{get:function(){return this.Qa},set:function(t){var e=this.Qa;if(e!==t){var n=this.diagram;if(null!==n)for(""===e&&O("Cannot rename default Layer to: "+t),n=n.layers;n.next();)n.value.name===t&&O("Layer.name is already present in this diagram: "+t);for(this.Qa=t,this.g("name",e,t),t=this.Da.iterator;t.next();)t.value.layerName=this.Qa}}},opacity:{get:function(){return this.tb},set:function(t){var e=this.tb;e!==t&&((t<0||1<t)&&f(t,"0 <= value <= 1",Po,"opacity"),this.tb=t,this.g("opacity",e,t),null!==(t=this.diagram)&&t.M())}},isTemporary:{get:function(){return this.v},set:function(t){var e=this.v;e!==t&&(this.v=t,this.g("isTemporary",e,t))}},visible:{get:function(){return this.I},set:function(t){var e=this.I;if(e!==t){for(this.I=t,this.g("visible",e,t),e=this.Da.iterator;e.next();)e.value.Ob(t);null!==(t=this.diagram)&&t.M()}}},pickable:{get:function(){return this.Oi},set:function(t){var e=this.Oi;e!==t&&(this.Oi=t,this.g("pickable",e,t))}},isBoundsIncluded:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t,null!==this.diagram&&this.diagram.Oa())}},allowCopy:{get:function(){return this.$h},set:function(t){var e=this.$h;e!==t&&(this.$h=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.ai},set:function(t){var e=this.ai;e!==t&&(this.ai=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.ji},set:function(t){var e=this.ji;e!==t&&(this.ji=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.bi},set:function(t){var e=this.bi;e!==t&&(this.bi=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.ki},set:function(t){var e=this.ki;e!==t&&(this.ki=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.ci},set:function(t){var e=this.ci;e!==t&&(this.ci=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.ei},set:function(t){var e=this.ei;e!==t&&(this.ei=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.di},set:function(t){var e=this.di;e!==t&&(this.di=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.fi},set:function(t){var e=this.fi;e!==t&&(this.fi=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.gi},set:function(t){var e=this.gi;e!==t&&(this.gi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.hi},set:function(t){var e=this.hi;e!==t&&(this.hi=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.ii},set:function(t){var e=this.ii;e!==t&&(this.ii=t,this.g("allowSelect",e,t))}}}),Po.prototype.findObjectsNear=Po.prototype.Eg,Po.prototype.findObjectsIn=Po.prototype.zf,Po.prototype.findObjectsAt=Po.prototype.hj,Po.prototype.findObjectAt=Po.prototype.Ub,Po.className="Layer",Mo.prototype.clear=function(){this.animationManager.Nc(),this.model.clear(),Wr=null,$r="",_o(this,!1),this.Oa(),this.Ta(),this.M()},Mo.prototype.reset=function(){this.clear(),this.Rb=!0,this.Rc=new Xi,this.Rc.ae(this),this.nb=17,this.Al=this.pv=!1,this.Us="default",this.La=new X,this.Ix=new at,this.gf=null,this.ww(),this.Kj=null,this.vw(),this.tb=1,this.la=new ee(NaN,NaN).freeze(),this.Vs=new ee(NaN,NaN),this.Pn=this.ya=1,this.gs=new ee(NaN,NaN).freeze(),this.hs=NaN,this.zs=1e-4,this.xs=100,this.ob=new Ie,this.xt=new ee(NaN,NaN).freeze(),this.bs=new ne(NaN,NaN,NaN,NaN).freeze(),this.Si=new Vt(0,0,0,0).freeze(),this.Ti=aa,this.ct=!1,this.Ws=this.Qs=null,this.Og=Jr,this.Aj=we,this.Yf=Jr,this.qo=we,this.js=this.fs=Yt,this.Dc=!0,this.yl=!1,this.rd=new $,this.Vg=new at,this.kl=!0,this.pn=250,this.yj=-1,this.rn=new Vt(16,16,16,16).freeze(),this.Ej=this.Ae=!1,this.Hj=!0,this.Vf=new mn,(this.Vf.diagram=this).Ud=new mn,(this.Ud.diagram=this).gh=new mn,(this.gh.diagram=this).se=this.Nf=null,this.ek=!1,this.Rr=this.Sr=null,this.ln=d.PointerEvent&&(T||C||D)&&d.navigator&&!1!==d.navigator.msPointerEnabled,Lr(this),this.Dh=new $,this.ss=!0,this.rt=ha,this.Tu=!1,this.tt=ta,this.Lr=this.Or=this.pt=null,this.On=this.Jr="auto",this.gg=this.Cs=this.ig=this.jg=this.lg=this.Pf=this.Tf=this.Of=null,this.es=!1,this.Qf=this.wg=this.kg=this.hg=null,this.Ds=!1,this.Os={},this.Zj=[null,null],this.Dr=null,this.Pr=this.gt=this.rv=this.ug=!1,this.$u=!0,this.xi=this.jc=!1,this.zv=!0,this.Pd=-2,this.Pi=new at,this.Ns=new X,this.$f=!1,this.ai=this.$h=this.qr=this.gd=!0,this.rr=!1,this.xr=this.vr=this.ii=this.hi=this.gi=this.fi=this.di=this.ei=this.ci=this.ur=this.ki=this.bi=this.ji=this.sr=!0,this.Zf=this.Wu=!1,this.wr=this.tr=this.ql=this.pl=!0,this.bt=this.Ys=16,this.Xs=this.Kp=!1,this.Zs=this.at=0,this.gb=new Vt(5).freeze(),this.qv=(new $).freeze(),this.ys=999999999,this.Qu=(new $).freeze(),this.wi=this.vi=this.ui=!0,this.Xe=this.le=!1,this.kc=null,this.Ng=!0,this.me=!1,this.yx=new $,this.Ru=new $,this.Gc=null,this.Pl=1,this.sv=0,this.Vd={scale:1,position:new ee,bounds:new ne,gw:!1},this.Px=new ne(NaN,NaN,NaN,NaN).freeze(),this.mm=new xe(NaN,NaN).freeze(),this.Qn=new ne(NaN,NaN,NaN,NaN).freeze(),this.ts=!1,this.Ho=this.oo=this.gp=this.Eu=this.Du=this.Fu=this.bg=this.eh=this.cf=null,Ao(this),this.Ib=null,this.no=!1,this.Bj=null,this.partManager=new Zd,this.toolManager=new _n,this.toolManager.initializeStandardTools(),this.currentTool=this.defaultTool=this.toolManager,this.Ur=null,this.dl=new wa,this.Is=this.Hs=null,this.cq=!1,this.commandHandler=No(),this.ug=!0,Eo(this),this.layout=new Sd,this.ug=!1,this.model=Bc(),this.model.undoManager=new kn,this.me=!1,this.Hj=!0,this.Ae=!1,this.Sb=1,this.yh=null,this.To=1,this.Zo=0,this.gv=[0,0,0,0,0],this.$o=0,this.sd=1,this.Pj=0,this.Co=new ee,this.qt=500,this.qn=new ee,this.ne=!1,this.sh=this.Ul=this.rh=this.Tl=null,this.eq=this.so=!1,this.$n=null,this.ao=Lt,this.Rb=!1,this.M()},Mo.prototype.setRTL=function(t){null===(t=void 0===t?this.div:t)&&(t=d.document.body);var e=c("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var n="reverse";0<e.scrollLeft?n="default":(e.scrollLeft=1,0===e.scrollLeft&&(n="negative")),t.removeChild(e),this.Us=n},Mo.prototype.setScrollWidth=function(t){null===(t=void 0===t?this.div:t)&&(t=d.document.body);var e,n,i=0;Xr&&(i=Yr,null===(e=Kr)&&((e=Kr=c("p")).style.width="100%",e.style.height="200px",e.style.boxSizing="content-box",(i=Yr=c("div")).style.position="absolute",i.style.visibility="hidden",i.style.width="200px",i.style.height="150px",i.style.boxSizing="content-box",i.appendChild(e)),i.style.overflow="hidden",t.appendChild(i),n=e.offsetWidth,i.style.overflow="scroll",n===(e=e.offsetWidth)&&(e=i.clientWidth),t.removeChild(i),0!==(i=n-e)||F||(i=11)),this.nb=i,this.pv=!0},Mo.prototype.hb=function(t){t.classType===Mo&&(this.autoScale=t)},Mo.prototype.toString=function(t){void 0===t&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',t<=0)return e;for(var n=this.La.iterator;n.next();)e+="\n  "+n.value.toString(t-1);return e},Mo.prototype.addEventListener=function(t,e,n,i){t.addEventListener(e,n,{capture:i,passive:!1})},Mo.prototype.removeEventListener=function(t,e,n,i){t.removeEventListener(e,n,{capture:i})},Mo.prototype.computePixelRatio=function(){return null!==this.yh?this.yh:d.devicePixelRatio||1},Mo.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},Mo.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},Mo.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},Mo.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},Mo.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},Mo.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},Mo.prototype.doFocus=function(){this.focus()},Mo.prototype.focus=function(){var t,e;this.ta&&(this.scrollsPageOnFocus?this.ta.focus():(t=d.scrollX||d.pageXOffset,e=d.scrollY||d.pageYOffset,this.ta.focus(),d.scrollTo(t,e)))},Mo.prototype.wz=function(){this.B.R("GainedFocus")},Mo.prototype.vz=function(){this.B.R("LostFocus")},Mo.prototype.ey=function(t){if(null!==this.ta){this.Kp=!0;var e=this.documentBounds,n=this.viewportBounds,i=this.Si,o=e.x-i.left,r=e.y-i.top,a=e.width+i.left+i.right,s=e.height+i.top+i.bottom,h=e.right+i.right,i=e.bottom+i.bottom,u=n.x,e=n.y,l=n.width,d=n.height,c=n.right,g=n.bottom,n=this.scale,f=t.scrollLeft;if(this.Al)switch(this.Us){case"negative":f=f+t.scrollWidth-t.clientWidth;break;case"reverse":f=t.scrollWidth-f-t.clientWidth}var p=f;l<a||d<s?(f=ee.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.Zs!==p&&(f.x=p/n+o,this.Zs=p),this.allowVerticalScroll&&this.at!==t.scrollTop&&(f.y=t.scrollTop/n+r,this.at=t.scrollTop),this.position=f,ee.free(f),this.vi=this.Kp=!1):(f=ee.alloc(),t.dz&&this.allowHorizontalScroll&&(o<u&&(this.position=f.h(p+o,this.position.y)),c<h&&(this.position=f.h(-(this.$s.scrollWidth-this.xa)+p-this.xa/n+h,this.position.y))),t.ez&&this.allowVerticalScroll&&(r<e&&(this.position=f.h(this.position.x,t.scrollTop+r)),g<i&&(this.position=f.h(this.position.x,-(this.$s.scrollHeight-this.wa)+t.scrollTop-this.wa/n+i))),ee.free(f),or(this),this.vi=this.Kp=!1,e=this.documentBounds,n=this.viewportBounds,h=e.right,c=n.right,i=e.bottom,g=n.bottom,o=e.x,u=n.x,r=e.y,e=n.y,a<=l&&u<=o&&h<=c&&(this.Lp.style.width="1px"),s<=d&&e<=r&&i<=g&&(this.Lp.style.height="1px"))}},Mo.prototype.computeBounds=function(){return 0<this.rd.count&&Zo(this),Go(this)},Mo.prototype.computePartsBounds=function(t,e){void 0===e&&(e=!1);var n=null;if(w(t))for(var i=0;i<t.length;i++){var o=t[i];!e&&o instanceof wl||(o.Ta(),null===n?n=o.actualBounds.copy():n.Oc(o.actualBounds))}else for(t=t.iterator;t.next();)i=t.value,!e&&i instanceof wl||(i.Ta(),null===n?n=i.actualBounds.copy():n.Oc(i.actualBounds));return null===n?new ne(NaN,NaN,0,0):n},Mo.prototype.zoomToFit=function(){var t=this.Ti;this.Ti=aa,this.scale=zo(this,Zr),t!==aa&&(jo(this,!1),Ro(this,this.documentBounds,this.xa/this.ya,this.wa/this.ya,this.Aj,!1)),this.Ti=t},(Bp=Mo.prototype).fB=function(t,e){void 0===e&&(e=Zr);var n,i,o=t.width,r=t.height;0===o||0===r||isNaN(o)&&isNaN(r)||(i=1,e!==Zr&&e!==Qr||(i=isNaN(o)?this.viewportBounds.height*this.scale/r:isNaN(r)?this.viewportBounds.width*this.scale/o:(i=this.xa,n=this.wa,e===Qr?i/o<n/r?(n-(this.le?this.nb:0))/r:(i-(this.Xe?this.nb:0))/o:Math.min(n/r,i/o))),this.scale=i,this.position=new ee(t.x,t.y))},Bp.oz=function(t,e){this.Ta();var n=this.documentBounds,i=this.viewportBounds;this.position=new ee(n.x+(t.x*n.width+t.offsetX)-(e.x*i.width-e.offsetX),n.y+(t.y*n.height+t.offsetY)-(e.y*i.height-e.offsetY))},Bp.fA=function(t){var e;t instanceof Na?(this.$n=t,e=ee.alloc(),this.ao=this.ir(t.ga(Yt,e)),ee.free(e)):(this.$n=null,this.ao=Lt)},Bp.um=function(t,e){if(void 0===e&&(e=!0),e){if((t=Io(this,t,function(t){return t.part},function(t){return t.canSelect()}))instanceof Ou)return t}else if((t=Io(this,t,function(t){return t.part}))instanceof Ou)return t;return null},Bp.Ub=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),Zo(this);for(var i=this.La.iteratorBackwards;i.next();){var o=i.value;if(o.visible&&null!==(o=o.Ub(t,e,n)))return o}return null},Bp.Uz=function(t,e,n){return void 0===e&&(e=!0),function(t,e,n,i,o){for(void 0===n&&(n=null),void 0===i&&(i=null),o instanceof X||o instanceof $||(o=new $),Zo(t),t=t.La.iteratorBackwards;t.next();){var r=t.value;r.visible&&!r.isTemporary&&r.hj(e,n,i,o)}return o}(this,t,function(t){return t.part},e?function(t){return t instanceof Ou&&t.canSelect()}:null,n)},Bp.hj=function(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=null),i instanceof X||i instanceof $||(i=new $),Zo(this);for(var o=this.La.iteratorBackwards;o.next();){var r=o.value;r.visible&&r.hj(t,e,n,i)}return i},Bp.py=function(t,e,n,i){return void 0===e&&(e=!1),void 0===n&&(n=!0),function(t,e,n,i,o){var r=null;for(void 0===r&&(r=null),void 0===n&&(n=null),void 0===i&&(i=!1),o instanceof X||o instanceof $||(o=new $),Zo(t),t=t.La.iteratorBackwards;t.next();){var a=t.value;a.visible&&!a.isTemporary&&a.zf(e,r,n,i,o)}return o}(this,t,function(t){return t instanceof Ou&&(!n||t.canSelect())},e,i)},Bp.zf=function(t,e,n,i,o){void 0===e&&(e=null),void 0===n&&(n=null),void 0===i&&(i=!1),o instanceof X||o instanceof $||(o=new $),Zo(this);for(var r=this.La.iteratorBackwards;r.next();){var a=r.value;a.visible&&a.zf(t,e,n,i,o)}return o},Bp.Uv=function(t,e,n,i,o,r){var a=new $;Zo(this);for(var s=this.La.iteratorBackwards;s.next();){var h=s.value;h.visible&&h.Uv(t,e,n,i,a,o,r)}return a},Bp.Vz=function(t,e,n,i,o){return void 0===n&&(n=!0),void 0===i&&(i=!0),function(t,e,n,i,o,r){var a=null;void 0===a&&(a=null),void 0===i&&(i=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof X||o instanceof $)&&(r=o),o=!0);for(r instanceof X||r instanceof $||(r=new $),Zo(t),t=t.La.iteratorBackwards;t.next();){var s=t.value;s.visible&&!s.isTemporary&&s.Eg(e,n,a,i,o,r)}return r}(this,t,e,function(t){return t instanceof Ou&&(!i||t.canSelect())},n,o)},Bp.Eg=function(t,e,n,i,o,r){void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof X||o instanceof $)&&(r=o),o=!0),r instanceof X||r instanceof $||(r=new $),Zo(this);for(var a=this.La.iteratorBackwards;a.next();){var s=a.value;s.visible&&s.Eg(t,e,n,i,o,r)}return r},Mo.prototype.acceptEvent=function(t){return Vo(this,t,t instanceof MouseEvent)},Mo.prototype.xA=function(t){var e=this.B;if(!this.B.isEnabled)return!1;var n=Vo(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.down=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del";break;case 48:n.key="0";break;case 187:case 61:case 107:n.key="Add";break;case 189:case 173:case 109:n.key="Subtract";break;case 27:n.key="Esc"}return e.doKeyDown(),Ko(n,t)},Mo.prototype.yA=function(t){var e=this.B;if(!e.isEnabled)return!1;var n=Vo(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.up=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del"}return e.doKeyUp(),Ko(n,t)},Mo.prototype.Jz=function(t){var e=this.B;if(!e.isEnabled)return!1;var n=Vo(e,t,!0);return null!==e.mouseEnter&&e.mouseEnter(n),Ko(n,t)},Mo.prototype.Kz=function(t){var e=this.B;if(!e.isEnabled)return!1;var n=Vo(e,t,!0);return null!==e.mouseLeave&&e.mouseLeave(n),Ko(n,t)},Mo.prototype.getMouse=function(t){if(null===(n=this.ta))return new ee(0,0);var e=n.getBoundingClientRect(),n=t.clientX-this.xa/e.width*e.left;return t=t.clientY-this.wa/e.height*e.top,null!==this.ob?lt(new ee(n,t),this.ob):new ee(n,t)},(Bp=Mo.prototype).Oa=function(){this.ui||(this.ui=!0,this.Db(!0))},Bp.Je=function(){this.Rb||this.jc||(this.M(),ir(this),or(this),this.Oa(),this.cd())},Bp.wA=function(){return this.Ae},Bp.Ez=function(t){void 0===t&&(t=null);var e=this.animationManager,n=e.isEnabled;e.Nc(),e.isEnabled=!1,Jo(this),this.me=!1,this.Vs=new ee(NaN,NaN),e.isEnabled=n,this.jc=!0;var i=this;null!==t&&v(function(){i.jc=!1,Wi(e,"Model"),t()},1)},Bp.Db=function(t){var e;void 0===t&&(t=!1),!0===this.Ae||this.Rb||!1===t&&this.jc||(this.Ae=!0,e=this,d.requestAnimationFrame(function(){e.Ae&&e.cd()}))},Bp.cd=function(){this.Hj&&!this.Ae||(this.Hj&&(this.Hj=!1),Jo(this))},Bp.Tw=function(t,e){for(t.reset();t.next();){var n=t.value;!n.Wb()||n instanceof pl||(n.qj()?(n.measure(1/0,1/0),n.arrange()):e.add(n))}for(t.reset();t.next();)(n=t.value)instanceof pl&&n.isVisible()&&Qo(this,n);for(t.reset();t.next();)(n=t.value)instanceof wl&&n.isVisible()&&(n.qj()?(n.measure(1/0,1/0),n.arrange()):e.add(n));for(t.reset();t.next();)(n=t.value)instanceof tl&&n.isVisible()&&(n.qj()?(n.measure(1/0,1/0),n.arrange()):e.add(n))},Bp.Fd=function(t,e,n,i){if(this.wi||this.animationManager.isAnimating){void 0===i&&(i=n.viewportBounds);for(var o=0;o<e;o++)t[o].Fd(n,i)}},Bp.bc=function(l,d){if((void 0===d&&(d=null),null!==this.Ea)&&(null===this.ta&&O("No canvas specified"),!(o=this.animationManager).rc&&(!o.isAnimating||o.isTicking))){var t=new Date;if(rr(this),"0"!==this.Ea.style.opacity){var e=l!==this.Gb,n=this.La.j,i=n.length,c=this;if(this.Fd(n,i,c),e)l.tc(!0),or(this);else if(!this.Dc&&null===d&&!o.isAnimating)return;i=this.la;var o,r=this.ya,a=Math.round(i.x*r)/r,s=Math.round(i.y*r)/r;for((o=this.ob).reset(),1!==r&&o.scale(r),0===i.x&&0===i.y||o.translate(-a,-s),r=this.Sb,l.setTransform(1,0,0,1,0,0),l.scale(r,r),l.clearRect(0,0,this.xa,this.wa),l.setTransform(1,0,0,1,0,0),l.scale(r,r),l.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),er(this,l),l.globalAlpha=this.tb,a=null!==d?function(t){var e=d;if(t.visible&&0!==t.tb){var n=t.Da.j,i=n.length;if(0!==i){var o=ko(t,l),r=t.np;r.length=0;for(var a=c.scale,s=ne.alloc(),h=0;h<i;h++){var u=n[h];e.contains(u)||t.dj(l,u,c,r,a,s,!0)}ne.free(s),l.globalAlpha=o}}}:function(t){t.bc(l,c)},i=n.length,s=0;s<i;s++)l.setTransform(1,0,0,1,0,0),l.scale(r,r),l.transform(o.m11,o.m12,o.m21,o.m22,o.dx,o.dy),a(n[s]);if(this.ti&&pa(this.ti,this)&&this.Vr(),e?(this.Gb.tc(!0),or(this)):this.Dc=this.wi=!1,n=+new Date-+t,e=U.jy,t=this.gv,e||null===this.yh){for(t[this.$o]=n,this.$o=(this.$o+1)%t.length,o=n=0;o<t.length;o++)n+=t[o];this.Zo=n/t.length}if(e)for(l.setTransform(1,0,0,1,0,0),e=0;e<t.length;e++)l.fillText(t[e].toString(),20,150+20*e)}}},Bp.Ge=function(t){return this.gf[t]},Bp.Qy=function(t,e){"minDrawingLength"===t&&(this.To=e),this.gf[t]=e,this.Je()},Bp.ww=function(){this.gf=new I,this.gf.drawShadows=!0,this.gf.textGreeking=!0,this.gf.viewportOptimizations=!(F||T||C),this.gf.temporaryPixelRatio=!0,this.gf.pictureRatioOptimization=!0,this.To=this.gf.minDrawingLength=1},Bp.xm=function(t){return this.Kj[t]},Bp.UA=function(t,e){this.Kj[t]=e},Bp.vw=function(){this.Kj=new I,this.Kj.extraTouchArea=10,this.Kj.extraTouchThreshold=10,this.Kj.hasGestureZoom=!0},Bp.Ew=function(t){nr(this,t)},Bp.Gv=function(){if(0===this.undoManager.transactionLevel&&0!==this.Vg.count){for(;0<this.Vg.count;){var t=this.Vg;for(this.Vg=new at,t=t.iterator;t.next();){var e=t.key;e.Nq(t.value),e.cc()}}this.M()}},Bp.M=function(t){var e;void 0===t&&(t=null),null===t?(this.Dc=!0,this.Db()):(e=this.viewportBounds,null!==t&&t.u()&&e.Lc(t)&&(this.Dc=!0,this.Db())),this.R("InvalidateDraw")},Bp.By=function(t,e){if(!0!==this.Dc){var n=(this.Dc=!0)===this.Ge("temporaryPixelRatio");if(!0===this.Ge("viewportOptimizations")&&this.scrollMode!==sa&&this.Si.fj(0,0,0,0)&&e.width===t.width&&e.height===t.height){var i=this.scale,o=Math.max(t.x,e.x),r=Math.max(t.y,e.y),i=ne.allocAt(o,r,Math.max(0,Math.min(t.x+t.width,e.x+e.width)-o)*i,Math.max(0,Math.min(t.y+t.height,e.y+e.height)-r)*i);if(!this.eq&&0<i.width&&0<i.height){if(!(this.jc||(this.Ae=!1,null===this.Ea||(this.jc=!0,this.Gv(),this.documentBounds.u()||xr(this,this.computeBounds()),null===(o=this.ta)||o instanceof ss)))){var a=this.Sb,r=this.xa*a,s=this.wa*a,h=this.scale*a,u=Math.round(Math.round(e.x*h)-Math.round(t.x*h));e=Math.round(Math.round(e.y*h)-Math.round(t.y*h)),h=this.Iu,t=this.qx,h.width!==r&&(h.width=r),h.height!==s&&(h.height=s),t.clearRect(0,0,r,s),h=190*a;var l=70*a,d=Math.max(u,0),c=Math.max(e,0),g=Math.floor(r-d),f=Math.floor(s-c);t.drawImage(o.Ga,d,c,g,f,0,0,g,f),pa(this.ti,this)&&t.clearRect(0,0,h,l),o=be(),t=be(),f=Math.abs(u),g=Math.abs(e);var p=0===d?0:r-f,d=ee.allocAt(p,0),f=ee.allocAt(f+p,s);t.push(new ne(Math.min(d.x,f.x),Math.min(d.y,f.y),Math.abs(d.x-f.x),Math.abs(d.y-f.y)));var m=this.ob;if(m.reset(),m.scale(a,a),1!==this.ya&&m.scale(this.ya),(0!==(a=this.la).x||0!==a.y)&&isFinite(a.x)&&isFinite(a.y)&&m.translate(-a.x,-a.y),lt(d,m),lt(f,m),o.push(new ne(Math.min(d.x,f.x),Math.min(d.y,f.y),Math.abs(d.x-f.x),Math.abs(d.y-f.y))),p=0===c?0:s-g,d.h(0,p),f.h(r,g+p),t.push(new ne(Math.min(d.x,f.x),Math.min(d.y,f.y),Math.abs(d.x-f.x),Math.abs(d.y-f.y))),lt(d,m),lt(f,m),o.push(new ne(Math.min(d.x,f.x),Math.min(d.y,f.y),Math.abs(d.x-f.x),Math.abs(d.y-f.y))),pa(this.ti,this)&&(r=0<u?0:-u,s=0<e?0:-e,d.h(r,s),f.h(h+r,l+s),t.push(new ne(Math.min(d.x,f.x),Math.min(d.y,f.y),Math.abs(d.x-f.x),Math.abs(d.y-f.y))),lt(d,m),lt(f,m),o.push(new ne(Math.min(d.x,f.x),Math.min(d.y,f.y),Math.abs(d.x-f.x),Math.abs(d.y-f.y)))),ee.free(d),ee.free(f),$o(this,!1,!0),null===this.Ea&&O("No div specified"),null===this.ta&&O("No canvas specified"),!this.animationManager.rc&&(r=this.Gb,this.Dc)){for(rr(this),s=this.Sb,r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,this.xa*s,this.wa*s),r.drawImage(this.Iu.Ga,0<u?0:Math.round(-u),0<e?0:Math.round(-e)),u=this.la,a=this.ya,h=Math.round(u.x*a)/a,l=Math.round(u.y*a)/a,(e=this.ob).reset(),1!==a&&e.scale(a),0===u.x&&0===u.y||e.translate(-h,-l),r.save(),r.beginPath(),u=t.length,a=0;a<u;a++)0!==(h=t[a]).width&&0!==h.height&&r.rect(Math.floor(h.x),Math.floor(h.y),Math.ceil(h.width),Math.ceil(h.height));for(r.clip(),r.setTransform(1,0,0,1,0,0),r.scale(s,s),r.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),u=(e=this.La.j).length,this.Fd(e,u,this),er(this,r),r.globalAlpha=this.tb,s=0;s<u;s++)if(h=o,(a=e[s]).visible&&0!==a.tb){l=ko(a,r),(c=a.np).length=0,d=this.scale,g=ne.alloc(),m=(f=a.Da.j).length,p=h.length;for(var y=0;y<m;y++){var v=f[y],w=zu(v,v.actualBounds);t:{for(var b=2/d,S=4/d,x=0;x<p;x++){var P=h[x];if(0!==P.width&&0!==P.height&&w.bw(P.x-b,P.y-b,P.width+S,P.height+S)){w=!0;break t}}w=!1}w&&a.dj(r,v,this,c,d,g,!0)}ne.free(g),r.globalAlpha=l}r.restore(),r.tc(!0),this.ti&&pa(this.ti,this)&&this.Vr(),this.Dc=this.wi=!1,this.Zq()}Se(o),Se(t),this.jc=!1}}else this.cd();ne.free(i),n&&(To(this),this.cd(),Co(this,!0))}else n?(To(this),this.cd(),Co(this,!0)):this.cd()}},Bp.add=function(t){var e,n=t.diagram;n!==this&&(null!==n&&O("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+n.toString()),null===(n=this.tm(t.layerName))&&(n=this.tm("")),null===n&&O('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==n)&&(0<=(e=n.nj(99999999,t,t.diagram===this))&&this.ab(Sn,"parts",n,null,t,null,e),n.isTemporary||this.Oa(),t.C(1),null!==(e=t.layerChanged)&&e(t,null,n))},Bp.nj=function(t){this.partManager.nj(t);var e=this;fh(t,function(t){wr(e,t)}),(t instanceof tl||t instanceof pl&&null!==t.placeholder)&&t.o(),null!==t.data&&fh(t,function(t){ic(e.partManager,t)}),!0!==Wa(t)&&!0!==Yu(t)||this.rd.add(t),qu(t,!0,this),Ju(t)?(t.actualBounds.u()&&this.M(zu(t,t.actualBounds)),this.Oa()):t.isVisible()&&t.actualBounds.u()&&this.M(zu(t,t.actualBounds)),this.Db()},Bp.Kc=function(t){t.kk(),this.partManager.Kc(t);var e=this;null!==t.data&&fh(t,function(t){oc(e.partManager,t,e)}),this.rd.remove(t),Ju(t)?(t.actualBounds.u()&&this.M(zu(t,t.actualBounds)),this.Oa()):t.isVisible()&&t.actualBounds.u()&&this.M(zu(t,t.actualBounds)),this.Db()},Bp.remove=function(t){hr(this,t,!0)},Bp.gu=function(t,e){if(w(t))for(var n=t.length,i=0;i<n;i++){var o=t[i];e&&!o.canDelete()||this.remove(o)}else for((n=new $).addAll(t),t=n.iterator;t.next();)n=t.value,e&&!n.canDelete()||this.remove(n)},Bp.qk=function(t,e,n){return this.partManager.qk(t,e,n)},Mo.prototype.moveParts=function(t,e,n,i){if(void 0===i&&(i=dr(this)),null!==this.toolManager){var o=new at;if(null!==t)if(w(t))for(var r=0;r<t.length;r++)ur(this,o,t[r],n,i);else for(t=t.iterator;t.next();)ur(this,o,t.value,n,i);else{for(t=this.parts;t.next();)ur(this,o,t.value,n,i);for(t=this.nodes;t.next();)ur(this,o,t.value,n,i);for(t=this.links;t.next();)ur(this,o,t.value,n,i)}lr(this,o,e,i,n)}},Mo.prototype.computeMove=function(t,e,n,i){if(void 0===i&&(i=new ee),i.assign(e),null===t)return i;var o=e,r=n.isGridSnapEnabled;r&&(n.isGridSnapRealtime||this.lastInput.up)&&cr(this,t,e,o=ee.alloc(),n),n=null!==t.dragComputation?t.dragComputation(t,e,o):o;var a=t.minLocation,s=a.x;isNaN(s)&&(s=r?Math.round(1e3*t.location.x)/1e3:t.location.x),a=a.y,isNaN(a)&&(a=r?Math.round(1e3*t.location.y)/1e3:t.location.y);var h=t.maxLocation,u=h.x;return isNaN(u)&&(u=r?Math.round(1e3*t.location.x)/1e3:t.location.x),h=h.y,isNaN(h)&&(h=r?Math.round(1e3*t.location.y)/1e3:t.location.y),i.h(Math.max(s,Math.min(n.x,u)),Math.max(a,Math.min(n.y,h))),o!==e&&ee.free(o),i},(Bp=Mo.prototype).xd=function(t,e,n){if(void 0===n)return new ya(St);var i=t.isGridSnapEnabled;return t.groupsSnapMembers||null===e.containingGroup||(i=!1),new ya(i?new ee(Math.round(1e3*n.x)/1e3,Math.round(1e3*n.y)/1e3):n.copy())},Bp.om=function(t){pr(this,t,null),t.ae(this);var e=this.La,n=e.count-1;if(!t.isTemporary)for(;0<=n&&e.L(n).isTemporary;)n--;e.vb(n+1,t),null!==this.ac&&this.ab(Sn,"layers",this,null,t,null,n+1),this.M(),this.Oa()},Bp.Sx=function(t,e){pr(this,t,e),t.ae(this);var n=this.La,i=n.indexOf(t);0<=i&&(n.remove(t),null!==this.ac&&this.ab(xn,"layers",this,t,null,i,null));for(var o=n.count,r=0;r<o;r++)if(n.L(r)===e){n.vb(r,t);break}null!==this.ac&&this.ab(Sn,"layers",this,null,t,null,r),this.M(),i<0&&this.Oa()},Bp.jz=function(t,e){pr(this,t,e),t.ae(this);var n=this.La,i=n.indexOf(t);0<=i&&(n.remove(t),null!==this.ac&&this.ab(xn,"layers",this,t,null,i,null));for(var o=n.count,r=0;r<o;r++)if(n.L(r)===e){n.vb(r+1,t);break}null!==this.ac&&this.ab(Sn,"layers",this,null,t,null,r+1),this.M(),i<0&&this.Oa()},Bp.NA=function(t){if(t.diagram!==this&&O("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),""!==t.name){var e=this.La,n=e.indexOf(t);if(e.remove(t)){for(e=t.Da.copy().iterator;e.next();){var i=e.value,o=i.layerName;o!==t.name?i.layerName=o:i.layerName=""}null!==this.ac&&this.ab(xn,"layers",this,t,null,n,null),this.M(),this.Oa()}}},Bp.tm=function(t){for(var e=this.layers;e.next();){var n=e.value;if(n.name===t)return n}return null},Bp.Vx=function(t){null===this.se&&(this.se=new X),this.se.add(t),this.model.Hh(t)},Bp.PA=function(t){null!==this.se&&(this.se.remove(t),0===this.se.count&&(this.se=null)),this.model.Kk(t)},Bp.Hh=function(t){null===this.Nf&&(this.Nf=new X),this.Nf.add(t)},Bp.Kk=function(t){null!==this.Nf&&(this.Nf.remove(t),0===this.Nf.count&&(this.Nf=null))},Bp.zt=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.$v(t),t.change!==wn&&(this.isModified=!0),null!==this.Nf)for(var e=this.Nf,n=e.length,i=0;i<n;i++)e.L(i)(t)},Bp.ab=function(t,e,n,i,o,r,a){void 0===r&&(r=null),void 0===a&&(a=null);var s=new vn;s.diagram=this,s.change=t,s.propertyName=e,s.object=n,s.oldValue=i,s.oldParam=r,s.newValue=o,s.newParam=a,this.zt(s)},Bp.g=function(t,e,n,i,o){this.ab(bn,t,this,e,n,i,o)},Mo.prototype.changeState=function(t,e){if(null!==t&&t.diagram===this){var n=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var i,o,r,a,s,h,u=t.change;u===bn?(Rc(i=t.object,t.propertyName,t.H(e)),i instanceof Na&&(null!==(o=i.part)&&o.Lb()),this.isModified=!0):u===Sn?(a=t.object,s=t.newParam,h=t.newValue,a instanceof hh?"number"==typeof s&&h instanceof Na?(e?a.Kc(s):a.vb(s,h),null!==(o=a.part)&&o.Lb()):"number"==typeof s&&h instanceof Th&&(e?h.isRow?a.tw(s):a.rw(s):(h.isRow?a.getRowDefinition(h.index):a.getColumnDefinition(h.index)).Dt(h)):a instanceof Po?(r=!0===t.oldParam,"number"==typeof s&&h instanceof Ou&&(e?(h.isSelected=!1,h.isHighlighted=!1,h.Lb(),a.Kc(r?s:-1,h,r)):a.nj(s,h,r))):a instanceof Mo?"number"==typeof s&&h instanceof Po&&(e?this.La.bb(s):(h.ae(this),this.La.vb(s,h))):O("unknown ChangedEvent.Insert object: "+t.toString()),this.isModified=!0):u===xn?(r=t.object,a=t.oldParam,s=t.oldValue,r instanceof hh?"number"==typeof a&&s instanceof Na?e?r.vb(a,s):r.Kc(a):"number"==typeof a&&s instanceof Th&&(e?(s.isRow?r.getRowDefinition(s.index):r.getColumnDefinition(s.index)).Dt(s):s.isRow?r.tw(a):r.rw(a)):r instanceof Po?(h=!0===t.newParam,"number"==typeof a&&s instanceof Ou&&(e?r.Da.indexOf(s)<0&&r.nj(a,s,h):(s.isSelected=!1,s.isHighlighted=!1,s.Lb(),r.Kc(h?a:-1,s,h)))):r instanceof Mo?"number"==typeof a&&s instanceof Po&&(e?(s.ae(this),this.La.vb(a,s)):this.La.bb(a)):O("unknown ChangedEvent.Remove object: "+t.toString()),this.isModified=!0):u!==wn&&O("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=n}}},Mo.prototype.va=function(t){return this.undoManager.va(t)},Mo.prototype.Wa=function(t){return this.undoManager.Wa(t)},Mo.prototype.Hf=function(){return this.undoManager.Hf()},Mo.prototype.commit=function(t,e){void 0===e&&(e="");var n=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.va(e);var i=!1;try{t(this),i=!0}finally{i?this.undoManager.Wa(e):this.undoManager.Hf(),this.skipsUndoManager=n}},Mo.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},Mo.prototype.kr=function(){this.partManager.kr()},Mo.prototype.Vq=function(t,e,n,i){var o;t.w(e)||(void 0===i&&(i=!1),i||ir(this),or(this),null===(o=this.layout)||!o.isViewportSized||this.autoScale!==Jr||i||t.width===e.width&&t.height===e.height||o.C(),o=this.currentTool,!0===this.Zf&&o instanceof _n&&(this.lastInput.documentPoint=this.nu(this.lastInput.viewPoint),Nn(o,this)),this.Rb||this.By(t,e),yr(this),this.Vd.scale=n,this.Vd.position.x=t.x,this.Vd.position.y=t.y,this.Vd.bounds.assign(t),this.Vd.gw=i,this.R("ViewportBoundsChanged",this.Vd,t),this.isVirtualized&&this.links.each(function(t){t.isAvoiding&&t.actualBounds.Lc(e)&&t.Ua()}))},Mo.prototype.clearSelection=function(t){void 0===t&&(t=!1);var e=this.selection;if(0!==e.count){t||this.R("ChangingSelection",e);for(var n=e.ma(),i=n.length,o=0;o<i;o++)n[o].isSelected=!1;e.ea(),e.clear(),e.freeze(),t||this.R("ChangedSelection",e)}},Mo.prototype.select=function(t){null!==t&&t.layer.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.R("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.R("ChangedSelection",this.selection))},Mo.prototype.TA=function(t){if(this.R("ChangingSelection",this.selection),this.clearSelection(!0),w(t))for(var e=t.length,n=0;n<e;n++){var i=t[n];i instanceof Ou||O("Diagram.selectCollection given something that is not a Part: "+i),i.isSelected=!0}else for(t=t.iterator;t.next();)(e=t.value)instanceof Ou||O("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.R("ChangedSelection",this.selection)},Mo.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.ma(),n=e.length,i=0;i<n;i++)e[i].isHighlighted=!1;t.ea(),t.clear(),t.freeze()}},(Bp=Mo.prototype).pA=function(t){null!==t&&t.layer.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},Bp.qA=function(t){t=(new $).addAll(t);for(var e=this.highlighteds.copy().$q(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)(e=t.value)instanceof Ou||O("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},Bp.scroll=function(t,e,n){void 0===n&&(n=1);var i="up"===e||"down"===e,o=0;if("pixel"===t)o=n;else if("line"===t)o=n*(i?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if("page"===t)t=i?this.viewportBounds.height:this.viewportBounds.width,0!==(t*=this.scale)&&(o=n*Math.max(t-(i?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if("document"===t)return o=this.documentBounds,n=this.viewportBounds,i=ee.alloc(),"up"===e?this.position=i.h(n.x,o.y):"left"===e?this.position=i.h(o.x,n.y):"down"===e?this.position=i.h(n.x,o.bottom-n.height):"right"===e&&(this.position=i.h(o.right-n.width,n.y)),void ee.free(i);O("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}o/=this.scale,n=this.position.copy(),"up"===e?n.y=this.position.y-o:"down"===e?n.y=this.position.y+o:"left"===e?n.x=this.position.x-o:"right"===e?n.x=this.position.x+o:O("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),this.position=n},Bp.zw=function(t){var e=this.viewportBounds;e.De(t)||((t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t)},Bp.At=function(t){var e=this.viewportBounds;(t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t},Bp.ir=function(t){var e=this.ob;e.reset(),1!==this.ya&&e.scale(this.ya);var n=this.la;return(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),t.copy().transform(this.ob)},Bp.bB=function(t){var e=this.ob,n=t.x,i=t.y,o=n+t.width,r=i+t.height,a=e.m11,s=e.m12,h=e.m21,u=e.m22,l=e.dx,d=e.dy,c=n*a+i*h+l,e=n*s+i*u+d,g=o*a+i*h+l;return t=o*s+i*u+d,i=n*a+r*h+l,n=n*s+r*u+d,a=o*a+r*h+l,o=o*s+r*u+d,r=Math.min(c,g),c=Math.max(c,g),g=Math.min(e,t),e=Math.max(e,t),r=Math.min(r,i),c=Math.max(c,i),g=Math.min(g,n),e=Math.max(e,n),r=Math.min(r,a),c=Math.max(c,a),new ne(r,g=Math.min(g,o),c-r,Math.max(e,o)-g)},Bp.nu=function(t){var e=this.ob;e.reset(),1!==this.ya&&e.scale(this.ya);var n=this.la;return(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),lt(t.copy(),this.ob)},Mo.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var n,i,o,r=t.change,a=t.propertyName;if(r===wn&&"S"===a[0])"StartingFirstTransaction"===a?((t=(n=this).toolManager).mouseDownTools.each(function(t){t.diagram=n}),t.mouseMoveTools.each(function(t){t.diagram=n}),t.mouseUpTools.each(function(t){t.diagram=n}),this.jc||this.me||(this.Ej=!0,this.Hj&&(this.Ae=!0))):"StartingUndo"===a||"StartingRedo"===a?((t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.Nc(),this.R("ChangingSelection",this.selection)):"StartedTransaction"!==a||(t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.Nc();else if(this.Z){this.Z=!1;try{""===t.modelChange&&r===wn&&("FinishedUndo"!==a&&"FinishedRedo"!==a||(this.R("ChangedSelection",this.selection),Zo(this)),i=this.animationManager,"RolledBackTransaction"===a&&i.Nc(),this.Ej=!0,this.cd(),0!==this.undoManager.transactionLevel&&1!==this.undoManager.transactionLevel||Ji(i),"CommittedTransaction"===a&&this.undoManager.isJustDiscarded&&(this.Pd=Math.min(this.Pd,this.undoManager.historyIndex-1)),"CommittedTransaction"!==a&&"RolledBackTransaction"!==a||!this.undoManager.isPendingUnmodified||setTimeout(function(){e.isModified=!1},1),(i=t.isTransactionFinished)&&(vr(this),this.Xt.clear(),function(t){for(t=t.Qk.iterator;t.next();)t.value.Cl=!1}(this.animationManager)),!this.Ds&&i&&this.lastInput.targetDiagram&&(this.Ds=!0,o=this,v(function(){o.currentTool.standardMouseOver(),o.Ds=!1},10)))}finally{this.Z=!0}}}},Mo.prototype.Ed=function(){this.partManager.Ed()},Mo.prototype.gk=function(t,e){this.Rc.gk(t,e)},Mo.prototype.ik=function(t,e){this.Rc.ik(t,e)},Mo.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},Mo.prototype.Cb=function(t){return this.partManager.Cb(t)},Mo.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},(Bp=Mo.prototype).yc=function(t){return this.partManager.yc(t)},Bp.gj=function(t){return this.partManager.gj(t)},Bp.xc=function(t){return this.partManager.xc(t)},Bp.Jt=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.Jt.apply(this.partManager,e instanceof Array?e:o(i(e)))},Bp.It=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.It.apply(this.partManager,e instanceof Array?e:o(i(e)))},Bp.Ta=function(){this.ui&&xr(this,this.computeBounds())},Bp.Zz=function(){for(var t=new $,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&t.add(n)}for(e=this.links;e.next();)(n=e.value).isTopLevel&&t.add(n);return t.iterator},Bp.Yz=function(){return this.Dh.iterator},Bp.AA=function(t){Zo(this),t&&Pr(this,!0),this.Ej=!0,Jo(this)},Bp.eA=function(){for(var t=new X,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&null===n.jj()&&t.add(n)}return t.iterator},Bp.hk=function(t,e){null!==(t=_r(this,t))&&t.add(e)},Bp.Km=function(t,e){null!==(t=_r(this,t))&&t.remove(e)},Bp.R=function(t,e,n){var i=_r(this,t),o=new yn;if(null!==(t=Mr(o.diagram=this,t))&&(o.name=t),void 0!==e&&(o.subject=e),void 0!==n&&(o.parameter=n),1===(e=i.length))i.L(0)(o);else if(0!==e)for(i=i.ma(),n=0;n<e;n++)(0,i[n])(o)},Bp.zk=function(t,e){return void 0===e&&(e=null),Ar(this,!1,null,e).zk(t.x,t.y,t.width,t.height)},Mo.prototype.computeOccupiedArea=function(){return this.isVirtualized?this.viewportBounds.copy():this.ui?Go(this):this.documentBounds.copy()},Mo.prototype.Ft=function(t){this.qn.assign(t),this.computeAutoScrollPosition(this.qn).Na(this.position)?this.If():function e(n){-1===n.yj&&(n.yj=v(function(){var t;-1!==n.yj&&(n.If(),null!==n.lastInput.event)&&((t=n.computeAutoScrollPosition(n.qn)).Na(n.position)||(n.position=t,n.lastInput.documentPoint=n.nu(n.qn),n.doMouseMove(),n.ui=!0,xr(n,n.documentBounds.copy().Oc(n.computeBounds())),n.Dc=!0,n.cd(),e(n)))},n.pn))}(this)},Mo.prototype.If=function(){-1!==this.yj&&(d.clearTimeout(this.yj),this.yj=-1)},Mo.prototype.computeAutoScrollPosition=function(t){var e=this.position,n=this.rn;if(n.top<=0&&n.left<=0&&n.right<=0&&n.bottom<=0)return e;var i,o=this.viewportBounds,r=this.scale,o=ne.allocAt(0,0,o.width*r,o.height*r),a=ee.allocAt(0,0);return t.x>=o.x&&t.x<o.x+n.left&&this.allowHorizontalScroll?(i=Math.max(this.scrollHorizontalLineChange,1),i|=0,a.x-=i,t.x<o.x+n.left/2&&(a.x-=i),t.x<o.x+n.left/4&&(a.x-=4*i)):t.x<=o.x+o.width&&t.x>o.x+o.width-n.right&&this.allowHorizontalScroll&&(i=Math.max(this.scrollHorizontalLineChange,1),i|=0,a.x+=i,t.x>o.x+o.width-n.right/2&&(a.x+=i),t.x>o.x+o.width-n.right/4&&(a.x+=4*i)),t.y>=o.y&&t.y<o.y+n.top&&this.allowVerticalScroll?(i=Math.max(this.scrollVerticalLineChange,1),i|=0,a.y-=i,t.y<o.y+n.top/2&&(a.y-=i),t.y<o.y+n.top/4&&(a.y-=4*i)):t.y<=o.y+o.height&&t.y>o.y+o.height-n.bottom&&this.allowVerticalScroll&&(i=Math.max(this.scrollVerticalLineChange,1),i|=0,a.y+=i,t.y>o.y+o.height-n.bottom/2&&(a.y+=i),t.y>o.y+o.height-n.bottom/4&&(a.y+=4*i)),a.Na(St)||(e=new ee(e.x+a.x/r,e.y+a.y/r)),ne.free(o),ee.free(a),e},(Bp=Mo.prototype).Zt=function(){return null},Bp.hw=function(){return null},Bp.mz=function(t,e){this.Ix.add(t,e)},Bp.CA=function(t){return Xr?(void 0===t&&(t=new I),t.returnType="Image",this.Ey(t)):null},Bp.Ey=function(t){return void 0===t&&(t=new I),Dr(this,this.DA,t)},Bp.DA=function(t,e,n){var i=Er(n,t,"canvas",null);if(null===i)return null;var o=null;if(null!==(n=i.Y.canvas))switch(o=t.returnType,o=void 0===o?"string":o.toLowerCase(),o){case"imagedata":o=i.getImageData(0,0,n.width,n.height);break;case"image":(i=(t.document||document).createElement("img")).src=n.toDataURL(t.type,t.details),o=i;break;case"blob":return("function"!=typeof e&&O('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),"function"==typeof n.toBlob)?(n.toBlob(e,t.type,t.details),"toBlob"):"function"==typeof n.msToBlob?(e(n.msToBlob()),"msToBlob"):(e(null),null);default:o=n.toDataURL(t.type,t.details)}return"function"==typeof e?(e(o),null):o},s.Object.defineProperties(Mo.prototype,{div:{get:function(){return this.Ea},set:function(t){var e;this.Ea!==t&&(G=[],null!==(e=this.Ea)?(e.B=void 0,e.goDiagram=void 0,e.innerHTML="",null!==this.ta&&(e=this.ta.Ga,this.removeEventListener(e,"touchstart",this.Nw,!1),this.removeEventListener(e,"touchmove",this.Mw,!1),this.removeEventListener(e,"touchend",this.Lw,!1),this.ta.hy()),this.Sl&&(this.Sl.disconnect(),this.Sl=null),null!==(e=this.toolManager)&&(e.mouseDownTools.each(function(t){t.cancelWaitAfter()}),e.mouseMoveTools.each(function(t){t.cancelWaitAfter()}),e.mouseUpTools.each(function(t){t.cancelWaitAfter()})),e.cancelWaitAfter(),this.currentTool.doCancel(),this.Gb=this.ta=null,this.removeEventListener(d,"resize",this.Uw,!1),this.removeEventListener(d,"mousemove",this.Dk,!0),this.removeEventListener(d,"mousedown",this.Ck,!0),this.removeEventListener(d,"mouseup",this.Fk,!0),this.removeEventListener(d,"wheel",this.Gk,!0),this.removeEventListener(d,"mouseout",this.Ek,!0),qr===this&&(qr=null)):this.me=!1,(this.Ea=null)!==t&&((e=t.B)&&(e.div=null),ma(this,t),this.Je()))}},Xx:{get:function(){return this.Zo}},oj:{get:function(){return this.me}},draggedLink:{get:function(){return this.Ur},set:function(t){this.Ur!==t&&(null!==(this.Ur=t)&&(this.Hs=t.fromPort,this.Is=t.toPort))}},Hy:{get:function(){return this.Hs},set:function(t){this.Hs=t}},Iy:{get:function(){return this.Is},set:function(t){this.Is=t}},animationManager:{get:function(){return this.Rc}},undoManager:{get:function(){return this.ac.undoManager}},skipsUndoManager:{get:function(){return this.ug},set:function(t){this.ug=t,this.ac.skipsUndoManager=t}},delaysLayout:{get:function(){return this.Pr},set:function(t){this.Pr=t}},opacity:{get:function(){return this.tb},set:function(t){var e=this.tb;e!==t&&((t<0||1<t)&&f(t,"0 <= value <= 1",Mo,"opacity"),this.tb=t,this.g("opacity",e,t),this.M())}},validCycle:{get:function(){return this.tt},set:function(t){var e=this.tt;e!==t&&(this.tt=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.La.iterator}},isModelReadOnly:{get:function(){var t=this.ac;return null!==t&&t.isReadOnly},set:function(t){var e=this.ac;null!==e&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.$f},set:function(t){var e=this.$f;e!==t&&(this.$f=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.gd},set:function(t){var e=this.gd;e!==t&&(this.gd=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.qr},set:function(t){var e=this.qr;e!==t&&(this.qr=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.$h},set:function(t){var e=this.$h;e!==t&&(this.$h=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.ai},set:function(t){var e=this.ai;e!==t&&(this.ai=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.rr},set:function(t){var e=this.rr;e!==t&&(this.rr=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.sr},set:function(t){var e=this.sr;e!==t&&(this.sr=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.ji},set:function(t){var e=this.ji;e!==t&&(this.ji=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.bi},set:function(t){var e=this.bi;e!==t&&(this.bi=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.ki},set:function(t){var e=this.ki;e!==t&&(this.ki=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.ur},set:function(t){var e=this.ur;e!==t&&(this.ur=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.ci},set:function(t){var e=this.ci;e!==t&&(this.ci=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.ei},set:function(t){var e=this.ei;e!==t&&(this.ei=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.di},set:function(t){var e=this.di;e!==t&&(this.di=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.fi},set:function(t){var e=this.fi;e!==t&&(this.fi=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.gi},set:function(t){var e=this.gi;e!==t&&(this.gi=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.hi},set:function(t){var e=this.hi;e!==t&&(this.hi=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.ii},set:function(t){var e=this.ii;e!==t&&(this.ii=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.vr},set:function(t){var e=this.vr;e!==t&&(this.vr=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.xr},set:function(t){var e=this.xr;e!==t&&(this.xr=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.ql},set:function(t){var e=this.ql;e!==t&&(this.ql=t,ir(this),this.M(),this.g("hasVerticalScrollbar",e,t),jo(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.pl},set:function(t){var e=this.pl;e!==t&&(this.pl=t,ir(this),this.M(),this.g("hasHorizontalScrollbar",e,t),jo(this,!1))}},allowHorizontalScroll:{get:function(){return this.tr},set:function(t){var e=this.tr;e!==t&&(this.tr=t,this.g("allowHorizontalScroll",e,t),jo(this,!1))}},allowVerticalScroll:{get:function(){return this.wr},set:function(t){var e=this.wr;e!==t&&(this.wr=t,this.g("allowVerticalScroll",e,t),jo(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.Ys},set:function(t){var e=this.Ys;e!==t&&(t<0&&f(t,">= 0",Mo,"scrollHorizontalLineChange"),this.Ys=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.bt},set:function(t){var e=this.bt;e!==t&&(t<0&&f(t,">= 0",Mo,"scrollVerticalLineChange"),this.bt=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.gh},set:function(t){this.gh=t}},firstInput:{get:function(){return this.Vf},set:function(t){this.Vf=t}},currentCursor:{get:function(){return this.Jr},set:function(t){var e,n,i;""===t&&(t=this.On),this.Jr!==t&&(e=this.ta,n=this.Ea,null!==e&&(this.Jr=t,i=e.style.cursor,e.style.cursor=t,n.style.cursor=t,e.style.cursor===i&&(e.style.cursor="-webkit-"+t,n.style.cursor="-webkit-"+t,e.style.cursor===i&&(e.style.cursor="-moz-"+t,n.style.cursor="-moz-"+t,e.style.cursor===i&&(e.style.cursor=t,n.style.cursor=t)))))}},defaultCursor:{get:function(){return this.On},set:function(t){""===t&&(t="auto");var e=this.On;e!==t&&(this.On=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.Of},set:function(t){var e=this.Of;e!==t&&(this.Of=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.Tf},set:function(t){var e=this.Tf;e!==t&&(this.Tf=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.Pf},set:function(t){var e=this.Pf;e!==t&&(this.Pf=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.lg},set:function(t){var e=this.lg;e!==t&&(this.lg=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.jg},set:function(t){var e=this.jg;e!==t&&(this.jg=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.ig},set:function(t){var e=this.ig;e!==t&&(this.ig=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.Cs},set:function(t){var e=this.Cs;e!==t&&(this.Cs=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.gg},set:function(t){var e=this.gg;e!==t&&(this.gg=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.es},set:function(t){var e=this.es;e!==t&&(this.es=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.hg},set:function(t){var e=this.hg;e!==t&&(this.hg=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.kg},set:function(t){var e=this.kg;e!==t&&(this.kg=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.wg},set:function(t){var e=this.wg;e!==t&&(this.wg=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.Qf},set:function(t){var e=this.Qf;e!==t&&(this.Qf=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.Dr},set:function(t){this.Dr!==t&&(this.Dr=t).ae(this)}},toolManager:{get:function(){return this.pt},set:function(t){this.pt!==t&&((this.pt=t).diagram=this)}},defaultTool:{get:function(){return this.Or},set:function(t){var e=this.Or;e===t||((this.Or=t).diagram=this).currentTool===e&&(this.currentTool=t)}},currentTool:{get:function(){return this.Lr},set:function(t){var e=this.Lr;null!==e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),null===t&&(t=this.defaultTool),null!==t&&((this.Lr=t).diagram=this,t.doStart())}},selection:{get:function(){return this.qv}},maxSelectionCount:{get:function(){return this.ys},set:function(t){var e=this.ys;if(e!==t)if(0<=t&&!isNaN(t)){if(this.ys=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&0<(t=this.selection.count-t)){this.R("ChangingSelection",this.selection),e=this.selection.ma();for(var n=0;n<t;n++)e[n].isSelected=!1;this.R("ChangedSelection",this.selection)}}else f(t,">= 0",Mo,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.gp},set:function(t){var e=this.gp;e!==t&&(this.gp=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.oo},set:function(t){var e=this.oo;e!==t&&(this.oo=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.Ho},set:function(t){var e=this.Ho;e!==t&&(this.Ho=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.Qu}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?null!==t.currentTransaction||this.so&&this.Pd!==t.historyIndex:this.so},set:function(t){var e;this.so!==t&&(this.so=t,e=this.undoManager,!t&&e.isEnabled&&(this.Pd=e.historyIndex),t||vr(this))}},model:{get:function(){return this.ac},set:function(e){var t,n=this.ac;if(n!==e){this.currentTool.doCancel(),null!==n&&n.undoManager!==e.undoManager&&n.undoManager.isInTransaction&&O("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.Nc(!0);var i=_o(this,!0);this.me=!1,this.Hj=!0,this.Pd=-2,this.Ae=!1;var o=this.jc;this.jc=!0,Wi(this.animationManager,"Model"),null!==n&&(null!==this.se&&this.se.each(function(t){n.Kk(t)}),n.Kk(this.Qc)),this.ac=e,this.partManager=(t=this.ac.type,new(null!==(t=Hr.get(t))?t:Zd));for(var r=0;r<i.length;r++)this.add(i[r]);e.Hh(this.Bc),this.partManager.addAllModeledParts(),e.Kk(this.Bc),e.Hh(this.Qc),null!==this.se&&this.se.each(function(t){e.Hh(t)}),this.jc=o,this.Rb||this.M(),null!==n&&e.undoManager.copyProperties(n.undoManager)}}},Z:{get:function(){return this.$u},set:function(t){this.$u=t}},Xt:{get:function(){return this.yx}},skipsModelSourceBindings:{get:function(){return this.rv},set:function(t){this.rv=t}},mu:{get:function(){return this.gt},set:function(t){this.gt=t}},nodeTemplate:{get:function(){return this.cf.H("")},set:function(t){var e=this.cf.H("");e!==t&&(this.cf.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.Ed())}},nodeTemplateMap:{get:function(){return this.cf},set:function(t){var e=this.cf;e!==t&&(this.cf=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Ed())}},groupTemplate:{get:function(){return this.eh.H("")},set:function(t){var e=this.eh.H("");e!==t&&(this.eh.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.Ed())}},groupTemplateMap:{get:function(){return this.eh},set:function(t){var e=this.eh;e!==t&&(this.eh=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Ed())}},linkTemplate:{get:function(){return this.bg.H("")},set:function(t){var e=this.bg.H("");e!==t&&(this.bg.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.Ed())}},linkTemplateMap:{get:function(){return this.bg},set:function(t){var e=this.bg;e!==t&&(this.bg=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Ed())}},isMouseCaptured:{get:function(){return this.Wu},set:function(t){var e=this.ta;null!==e&&((e=e.Ga)instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.ln?(this.removeEventListener(e,"pointermove",this.Fm,!1),this.removeEventListener(e,"pointerdown",this.Em,!1),this.removeEventListener(e,"pointerup",this.Hm,!1),this.removeEventListener(e,"pointerout",this.Gm,!1),this.addEventListener(d,"pointermove",this.Fm,!0),this.addEventListener(d,"pointerdown",this.Em,!0),this.addEventListener(d,"pointerup",this.Hm,!0),this.addEventListener(d,"pointerout",this.Gm,!0)):(this.removeEventListener(e,"mousemove",this.Dk,!1),this.removeEventListener(e,"mousedown",this.Ck,!1),this.removeEventListener(e,"mouseup",this.Fk,!1),this.removeEventListener(e,"mouseout",this.Ek,!1),this.addEventListener(d,"mousemove",this.Dk,!0),this.addEventListener(d,"mousedown",this.Ck,!0),this.addEventListener(d,"mouseup",this.Fk,!0),this.addEventListener(d,"mouseout",this.Ek,!0)),this.removeEventListener(e,"wheel",this.Gk,!1),this.addEventListener(d,"wheel",this.Gk,!0),this.addEventListener(d,"selectstart",this.preventDefault,!1)):(this.ln?(this.removeEventListener(d,"pointermove",this.Fm,!0),this.removeEventListener(d,"pointerdown",this.Em,!0),this.removeEventListener(d,"pointerup",this.Hm,!0),this.removeEventListener(d,"pointerout",this.Gm,!0),this.addEventListener(e,"pointermove",this.Fm,!1),this.addEventListener(e,"pointerdown",this.Em,!1),this.addEventListener(e,"pointerup",this.Hm,!1),this.addEventListener(e,"pointerout",this.Gm,!1)):(this.removeEventListener(d,"mousemove",this.Dk,!0),this.removeEventListener(d,"mousedown",this.Ck,!0),this.removeEventListener(d,"mouseup",this.Fk,!0),this.removeEventListener(d,"mouseout",this.Ek,!0),this.addEventListener(e,"mousemove",this.Dk,!1),this.addEventListener(e,"mousedown",this.Ck,!1),this.addEventListener(e,"mouseup",this.Fk,!1),this.addEventListener(e,"mouseout",this.Ek,!1)),this.removeEventListener(d,"wheel",this.Gk,!0),this.removeEventListener(d,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.Gk,!1)),this.Wu=t))}},position:{get:function(){return this.la},set:function(t){var e,n=ee.alloc().assign(this.la);n.w(t)||(e=this.viewportBounds.copy(),this.la.assign(t),eo(this.animationManager,n,this.la),this.Rb||null===this.ta&&!this.mm.u()||(this.Rb=!0,t=this.scale,Ro(this,this.Qn,this.xa/t,this.wa/t,this.Aj,!1),this.Rb=!1),this.Rb||this.Vq(e,this.viewportBounds,this.ya,!1)),ee.free(n)}},initialPosition:{get:function(){return this.gs},set:function(t){this.gs.w(t)||(this.gs=t.G())}},initialScale:{get:function(){return this.hs},set:function(t){this.hs!==t&&(this.hs=t)}},grid:{get:function(){return null===this.Ib&&Fo(this),this.Ib},set:function(t){var e,n=this.Ib;n!==t&&(null===n&&(Fo(this),n=this.Ib),t.type!==hh.Grid&&O("Diagram.grid must be a Panel of type Panel.Grid"),null!==(e=n.panel)&&e.remove(n),(this.Ib=t).name="GRID",null!==e&&e.add(t),yr(this),this.M(),this.g("grid",n,t))}},viewportBounds:{get:function(){var t=this.Px,e=this.la,n=this.ya;return null===this.ta?this.mm.u()&&t.h(e.x,e.y,this.xa/n,this.wa/n):t.h(e.x,e.y,Math.max(this.xa,0)/n,Math.max(this.wa,0)/n),t}},viewSize:{get:function(){return this.mm},set:function(t){var e=this.viewSize;e.w(t)||(this.mm=t=t.G(),this.xa=t.width,this.wa=t.height,this.Oa(),this.g("viewSize",e,t))}},fixedBounds:{get:function(){return this.bs},set:function(t){var e=this.bs;e.w(t)||(-1/0!==t.width&&1/0!==t.height&&-1/0!==t.height||O("fixedBounds width/height must not be Infinity"),this.bs=t=t.G(),this.Oa(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.Si},set:function(t){"number"==typeof t&&(t=new Vt(t));var e=this.Si;e.w(t)||(this.Si=t=t.G(),this.g("scrollMargin",e,t),this.Zq())}},scrollMode:{get:function(){return this.Ti},set:function(t){var e=this.Ti;e!==t&&((this.Ti=t)===aa&&jo(this,!1),this.g("scrollMode",e,t),this.M())}},scrollsPageOnFocus:{get:function(){return this.ct},set:function(t){var e=this.ct;e!==t&&(this.ct=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.Qs},set:function(t){var e=this.Qs;e!==t&&(this.Qs=t,jo(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.Ws},set:function(t){var e=this.Ws;e!==t&&(this.Ws=t,mr(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.Qn}},isVirtualized:{get:function(){return this.ts},set:function(t){var e=this.ts;e!==t&&(this.ts=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.ya},set:function(t){var e=this.ya;e!==t&&mr(this,e,t)}},defaultScale:{get:function(){return this.Pn},set:function(t){this.Pn=t}},autoScale:{get:function(){return this.Og},set:function(t){var e=this.Og;e!==t&&(this.Og=t,this.g("autoScale",e,t),t!==Jr&&jo(this,!1))}},initialAutoScale:{get:function(){return this.Yf},set:function(t){var e=this.Yf;e!==t&&(this.Yf=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.js},set:function(t){var e=this.js;e!==t&&(t.ib()||O("initialViewportSpot must be a specific Spot: "+t),this.js=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.fs},set:function(t){var e=this.fs;e!==t&&(t.ib()||O("initialViewportSpot must be a specific Spot: "+t),this.fs=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.zs},set:function(t){var e=this.zs;e!==t&&(0<t?(this.zs=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):f(t,"> 0",Mo,"minScale"))}},maxScale:{get:function(){return this.xs},set:function(t){var e=this.xs;e!==t&&(0<t?(this.xs=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):f(t,"> 0",Mo,"maxScale"))}},zoomPoint:{get:function(){return this.xt},set:function(t){this.xt.w(t)||(this.xt=t=t.G())}},contentAlignment:{get:function(){return this.Aj},set:function(t){var e=this.Aj;e.w(t)||(this.Aj=t=t.G(),this.g("contentAlignment",e,t),jo(this,!1))}},initialContentAlignment:{get:function(){return this.qo},set:function(t){var e=this.qo;e.w(t)||(this.qo=t=t.G(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.gb},set:function(t){"number"==typeof t&&(t=new Vt(t));var e=this.gb;e.w(t)||(this.gb=t=t.G(),this.Oa(),this.g("padding",e,t))}},partManager:{get:function(){return this.Ka},set:function(t){var e=this.Ka;e!==t&&(null!==t.diagram&&O("Cannot share PartManagers between Diagrams: "+t.toString()),null!==e&&e.ae(null),(this.Ka=t).ae(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.kc},set:function(t){var e=this.kc;e!==t&&((this.kc=t).diagram=this,t.group=null,this.Ng=!0,this.g("layout",e,t),this.Db())}},isTreePathToChildren:{get:function(){return this.ss},set:function(t){var e=this.ss;if(e!==t&&(this.ss=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)hl(t.value)}},treeCollapsePolicy:{get:function(){return this.rt},set:function(t){var e=this.rt;e!==t&&(t!==ha&&t!==ua&&t!==la&&O("Unknown Diagram.treeCollapsePolicy: "+t),this.rt=t,this.g("treeCollapsePolicy",e,t))}},He:{get:function(){return this.Tu},set:function(t){this.Tu=t}},autoScrollInterval:{get:function(){return this.pn},set:function(t){var e=this.pn;e!==t&&(this.pn=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.rn},set:function(t){"number"==typeof t&&(t=new Vt(t));var e=this.rn;e.w(t)||(this.rn=t=t.G(),this.Oa(),this.g("autoScrollRegion",e,t))}}}),s.Object.defineProperties(Mo,{licenseKey:{get:function(){return da.Xb()},set:function(t){da.add(t)}},version:{get:function(){return ca}}}),Mo.prototype.makeImageData=Mo.prototype.Ey,Mo.prototype.makeImage=Mo.prototype.CA,Mo.prototype.addRenderer=Mo.prototype.mz,Mo.prototype.makeSVG=Mo.prototype.hw,Mo.prototype.makeSvg=Mo.prototype.Zt,Mo.prototype.stopAutoScroll=Mo.prototype.If,Mo.prototype.doAutoScroll=Mo.prototype.Ft,Mo.prototype.isUnoccupied=Mo.prototype.zk,Mo.prototype.raiseDiagramEvent=Mo.prototype.R,Mo.prototype.removeDiagramListener=Mo.prototype.Km,Mo.prototype.addDiagramListener=Mo.prototype.hk,Mo.prototype.findTreeRoots=Mo.prototype.eA,Mo.prototype.layoutDiagram=Mo.prototype.AA,Mo.prototype.findTopLevelGroups=Mo.prototype.Yz,Mo.prototype.findTopLevelNodesAndLinks=Mo.prototype.Zz,Mo.prototype.ensureBounds=Mo.prototype.Ta,Mo.prototype.findLinksByExample=Mo.prototype.It,Mo.prototype.findNodesByExample=Mo.prototype.Jt,Mo.prototype.findLinkForData=Mo.prototype.xc,Mo.prototype.findNodeForData=Mo.prototype.gj,Mo.prototype.findPartForData=Mo.prototype.yc,Mo.prototype.findNodeForKey=Mo.prototype.Cb,Mo.prototype.rebuildParts=Mo.prototype.Ed,Mo.prototype.transformViewToDoc=Mo.prototype.nu,Mo.prototype.transformRectDocToView=Mo.prototype.bB,Mo.prototype.transformDocToView=Mo.prototype.ir,Mo.prototype.centerRect=Mo.prototype.At,Mo.prototype.scrollToRect=Mo.prototype.zw,Mo.prototype.highlightCollection=Mo.prototype.qA,Mo.prototype.highlight=Mo.prototype.pA,Mo.prototype.selectCollection=Mo.prototype.TA,Mo.prototype.updateAllRelationshipsFromData=Mo.prototype.kr,Mo.prototype.rollbackTransaction=Mo.prototype.Hf,Mo.prototype.commitTransaction=Mo.prototype.Wa,Mo.prototype.startTransaction=Mo.prototype.va,Mo.prototype.raiseChanged=Mo.prototype.g,Mo.prototype.raiseChangedEvent=Mo.prototype.ab,Mo.prototype.removeChangedListener=Mo.prototype.Kk,Mo.prototype.addChangedListener=Mo.prototype.Hh,Mo.prototype.removeModelChangedListener=Mo.prototype.PA,Mo.prototype.addModelChangedListener=Mo.prototype.Vx,Mo.prototype.findLayer=Mo.prototype.tm,Mo.prototype.removeLayer=Mo.prototype.NA,Mo.prototype.addLayerAfter=Mo.prototype.jz,Mo.prototype.addLayerBefore=Mo.prototype.Sx,Mo.prototype.addLayer=Mo.prototype.om,Mo.prototype.copyParts=Mo.prototype.qk,Mo.prototype.removeParts=Mo.prototype.gu,Mo.prototype.clearDelayedGeometries=Mo.prototype.Gv,Mo.prototype.setProperties=Mo.prototype.Ew,Mo.prototype.resetInputOptions=Mo.prototype.vw,Mo.prototype.setInputOption=Mo.prototype.UA,Mo.prototype.getInputOption=Mo.prototype.xm,Mo.prototype.resetRenderingHints=Mo.prototype.ww,Mo.prototype.setRenderingHint=Mo.prototype.Qy,Mo.prototype.getRenderingHint=Mo.prototype.Ge,Mo.prototype.maybeUpdate=Mo.prototype.cd,Mo.prototype.requestUpdate=Mo.prototype.Db,Mo.prototype.delayInitialization=Mo.prototype.Ez,Mo.prototype.isUpdateRequested=Mo.prototype.wA,Mo.prototype.redraw=Mo.prototype.Je,Mo.prototype.invalidateDocumentBounds=Mo.prototype.Oa,Mo.prototype.findObjectsNear=Mo.prototype.Eg,Mo.prototype.findPartsNear=Mo.prototype.Vz,Mo.prototype.findObjectsIn=Mo.prototype.zf,Mo.prototype.findPartsIn=Mo.prototype.py,Mo.prototype.findObjectsAt=Mo.prototype.hj,Mo.prototype.findPartsAt=Mo.prototype.Uz,Mo.prototype.findObjectAt=Mo.prototype.Ub,Mo.prototype.findPartAt=Mo.prototype.um,Mo.prototype.focusObject=Mo.prototype.fA,Mo.prototype.alignDocument=Mo.prototype.oz,Mo.prototype.zoomToRect=Mo.prototype.fB,Mo.prototype.diagramScroll=Mo.prototype.ey,Mo.useDOM=function(t){Xr=!!t&&void 0!==d.document},Mo.isUsingDOM=function(){return Xr};var Fr,Or,Br,Gr,jr,zr,Rr,Ir,Vr,Ur,qr=null,Hr=new at,Yr=null,Kr=null,Xr=void 0!==d.document,Wr=null,$r="",Jr=new j(Mo,"None",0),Zr=new j(Mo,"Uniform",1),Qr=new j(Mo,"UniformToFill",2),ta=new j(Mo,"CycleAll",10),ea=new j(Mo,"CycleNotDirected",11),na=new j(Mo,"CycleNotDirectedFast",12),ia=new j(Mo,"CycleNotUndirected",13),oa=new j(Mo,"CycleDestinationTree",14),ra=new j(Mo,"CycleSourceTree",15),aa=new j(Mo,"DocumentScroll",1),sa=new j(Mo,"InfiniteScroll",2),ha=new j(Mo,"TreeParentCollapsed",21),ua=new j(Mo,"AllParentsCollapsed",22),la=new j(Mo,"AnyParentsCollapsed",23),da=new X,ca="2.1.34",ga=!1;function fa(){this.fz=null,this.l="zz@orderNum","63ad05bbe23a1786468a4c741b6d2"===this._tk?this.Ue=this.l=!0:this.Ue=null}function pa(t,e){if(e.Gb.setTransform(e.Sb,0,0,e.Sb,0,0),null===t.Ue){e="f";var n=d[N("76a715b2f73f148a")][N("72ba13b5")];if(t.Ue=!0,Xr){var i=Mo[N("76a115b6ed251eaf4692")];if(i)for(var o=da.iterator;o.next()&&!((i=N(i=o.value).split(N("39e9"))).length<6);){var r=N(i[1]).split(".");if("7da71ca0"!==i[4])break;var a=N(u[N("6cae19")]).split(".");if(r[0]>a[0]||r[0]===a[0]&&r[1]>=a[1]){for(r=n[N("76ad18b4f73e")],a=n[N("73a612b6fb191d")](N("35e7"))+2;a<r;a++)e+=n[a];if((r=e[N("73a612b6fb191d")](N(i[2])))<0&&N(i[2])!==N("7da71ca0ad381e90")&&(r=e[N("73a612b6fb191d")](N("76a715b2ef3e149757"))),r<0&&(r=e[N("73a612b6fb191d")](N("76a715b2ef3e149757"))),r<0&&(r=n[N("73a612b6fb191d")](N("7baa19a6f76c1988428554"))),t.Ue=!(0<=r&&r<e[N("73a612b6fb191d")](N("35"))||-1===e[N("73a612b6fb191d")](N("35"))),!t.Ue)break;if("#"!==(r=N(i[2]))[0])break;a=d.document.createElement("div");for(var s=i[0].replace(/[A-Za-z]/g,"");s.length<4;)s+="9";if(s=s.substr(s.length-4),i="",i+=["gsh","gsf"][parseInt(s.substr(0,1),10)%2],i+=["Header","Background","Display","Feedback"][parseInt(s.substr(0,1),10)%4],a[N("79a417a0f0181a8946")]=i,d.document[N("78a712aa")]){if(d.document[N("78a712aa")][N("7bb806b6ed32388c4a875b")](a),s=d.getComputedStyle(a).getPropertyValue(N("78a704b7e62456904c9b12701b6532a8")),d.document[N("78a712aa")][N("68ad1bbcf533388c4a875b")](a),!s)break;if(-1!==s.indexOf(parseInt(r[1]+r[2],16))&&-1!==s.indexOf(parseInt(r[3]+r[4],16))){t.Ue=!1;break}if(A||T||C||D)for(i="."+i,r=0;r<document.styleSheets.length;r++)for(var h in a=document.styleSheets[r].rules||document.styleSheets[r].cssRules)if(i===a[h].selectorText){t.Ue=!1;break}}else t.Ue=null,t.Ue=!1}}else{for(h=n[N("76ad18b4f73e")],o=n[N("73a612b6fb191d")](N("35e7"))+2;o<h;o++)e+=n[o];n=e[N("73a612b6fb191d")](N("7da71ca0ad381e90")),t.Ue=!(0<=n&&n<e[N("73a612b6fb191d")](N("35")))}}}return 0<t.Ue&&t!==t.fz}function ma(r,t){var e,n,i,o;Xr&&(null!=t||O("Diagram setup requires an argument DIV."),null!==r.Ea&&O("Diagram has already completed setup."),"string"==typeof t?r.Ea=d.document.getElementById(t):t instanceof HTMLDivElement?r.Ea=t:O("No DIV or DIV id supplied: "+t),null===r.Ea&&O("Invalid DIV id; could not get element with id: "+t),void 0!==r.Ea.B&&O("Invalid div id; div already has a Diagram associated with it."),!r.Sl&&d.ResizeObserver&&(e=l(function(){r.Db()},250),r.Sl=new d.ResizeObserver(function(){e()}),r.Sl.observe(r.Ea)),"static"===d.getComputedStyle(r.Ea,null).position&&(r.Ea.style.position="relative"),r.Ea.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)",r.Ea.style["-ms-touch-action"]="none",r.Ea.innerHTML="",((r.Ea.B=r).Ea.goDiagram=r).Ea.go=d.go,void 0!==(n=new(r.eq?ss:fs)(r)).style&&(n.style.position="absolute",n.style.top="0px",n.style.left="0px","rtl"===d.getComputedStyle(r.Ea,null).getPropertyValue("direction")&&(r.Al=!0),n.style.zIndex="2",n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.MozUserSelect="none"),r.ta=n,r.Gb=n.context,t=r.Gb,r.Sb=r.computePixelRatio(),r.xa=r.Ea.clientWidth||1,r.wa=r.Ea.clientHeight||1,ar(r,r.xa,r.wa),r.Vr=function(){return!0},r.Ea.insertBefore(n.Ga,r.Ea.firstChild),(n=new fs(null)).width=1,n.height=1,r.Iu=n,r.qx=n.context,Xr&&(n=c("div"),i=c("div"),n.style.position="absolute",n.style.overflow="auto",n.style.width=r.xa+"px",n.style.height=r.wa+"px",n.style.zIndex="1",i.style.position="absolute",i.style.width="1px",i.style.height="1px",r.Ea.appendChild(n),n.appendChild(i),n.onscroll=Oo,n.addEventListener("mousedown",Bo),n.addEventListener("touchstart",Bo,{passive:!0}),n.B=r,n.dz=!0,n.ez=!0,r.$s=n,r.Lp=i),r.Zq=l(function(){r.yh=null,r.M()},300),r.Uw=l(function(){Do(r)},250),r.preventDefault=function(t){return t.preventDefault(),!1},r.Dk=function(t){var e;r.isEnabled&&(r.Zf=!0,e=Vo(r,t,!0),r.doMouseMove(),r.currentTool.isBeyondDragSize()&&(r.sd=0),Ko(e,t))},r.Ck=function(t){var e;r.isEnabled&&(r.Zf=!0,r.ne?t.preventDefault():((e=Vo(r,t,!0)).down=!0,e.clickCount=t.detail,(T||C)&&(t.timeStamp-r.Pj<r.qt&&!r.currentTool.isBeyondDragSize()?r.sd++:r.sd=1,r.Pj=t.timeStamp,e.clickCount=r.sd),e.clone(r.firstInput),r.doMouseDown(),1===t.button?t.preventDefault():Ko(e,t)))},r.Fk=function(t){var e;r.isEnabled&&(r.ne&&2===t.button?t.preventDefault():(r.ne&&0===t.button&&(r.ne=!1),r.ek?t.preventDefault():(r.Zf=!0,(e=Vo(r,t,!0)).up=!0,e.clickCount=t.detail,(T||C)&&(e.clickCount=r.sd),e.bubbles=t.bubbles,e.targetDiagram=Uo(t),r.doMouseUp(),r.If(),Ko(e,t))))},r.Gk=function(t){var e,n,i;r.isEnabled&&((e=Vo(r,t,!0)).bubbles=!0,i=n=0,void(e.delta=0)!==t.deltaX?(0!==t.deltaX&&(n=0<t.deltaX?1:-1),0!==t.deltaY&&(i=0<t.deltaY?1:-1),e.delta=Math.abs(t.deltaX)>Math.abs(t.deltaY)?-n:-i):void 0!==t.wheelDeltaX?(0!==t.wheelDeltaX&&(n=0<t.wheelDeltaX?-1:1),0!==t.wheelDeltaY&&(i=0<t.wheelDeltaY?-1:1),e.delta=Math.abs(t.wheelDeltaX)>Math.abs(t.wheelDeltaY)?-n:-i):void 0!==t.wheelDelta&&0!==t.wheelDelta&&(e.delta=0<t.wheelDelta?1:-1),r.doMouseWheel(),Ko(e,t))},r.Ek=function(t){r.isEnabled&&(r.Zf=!1,Vo(r,t,!0),(t=r.currentTool).cancelWaitAfter(),t.standardMouseOver())},r.Nw=function(t){var e,n,i,o;r.isEnabled&&(r.ek=!1,r.ne=!0,e=qo(r,t,t.targetTouches[0],1<t.touches.length),i=null,0<t.targetTouches.length?i=t.targetTouches[0]:0<t.changedTouches.length&&(i=t.changedTouches[0]),null!==i&&(n=i.screenX,i=i.screenY,o=r.Co,t.timeStamp-r.Pj<r.qt&&!(25<Math.abs(o.x-n)||25<Math.abs(o.y-i))?r.sd++:r.sd=1,e.clickCount=r.sd,r.Pj=t.timeStamp,r.Co.h(n,i)),r.doMouseDown(),Ko(e,t))},r.Mw=function(t){var e;r.isEnabled&&(e=null,0<t.targetTouches.length?e=t.targetTouches[0]:0<t.changedTouches.length&&(e=t.changedTouches[0]),e=Ho(r,t,e,1<t.touches.length),r.doMouseMove(),Ko(e,t))},r.Lw=function(t){var e,n,i;r.isEnabled&&(r.ek?t.preventDefault():1<t.touches.length||(n=e=null,0<t.targetTouches.length?n=t.targetTouches[0]:0<t.changedTouches.length&&(n=t.changedTouches[0]),i=Yo(r,t,!1,!0,!1,!1),null!==n&&(null!==(e=d.document.elementFromPoint(n.clientX,n.clientY))&&e.B instanceof Mo&&e.B!==r&&Xo(e.B,n,i),Xo(r,n,i),i.clickCount=r.sd),null===e?i.targetDiagram=Uo(t):e.B?i.targetDiagram=e.B:i.targetDiagram=null,i.targetObject=null,r.doMouseUp(),Ko(i,t),r.ne=!1))},r.Em=function(t){if(r.isEnabled){r.Zf=!0;var e=r.Os;void 0===e[t.pointerId]&&(e[t.pointerId]=t);var n=!1;if(null!==(e=r.Zj)[0]&&e[0].pointerId===t.pointerId)e[0]=t;else if(null!==e[1]&&e[1].pointerId===t.pointerId)e[1]=t,n=!0;else if(null===e[0])e[0]=t;else{if(null!==e[1])return void t.preventDefault();e[1]=t,n=!0}"touch"!==t.pointerType&&"pen"!==t.pointerType||(r.ek=!1,r.ne=!0),e=qo(r,t,t,n),n=r.Co;var i="touch"===t.pointerType||"pen"===t.pointerType?25:10;t.timeStamp-r.Pj<r.qt&&!(Math.abs(n.x-t.screenX)>i||Math.abs(n.y-t.screenY)>i)?r.sd++:r.sd=1,e.clickCount=r.sd,r.Pj=t.timeStamp,r.Co.Ig(t.screenX,t.screenY),r.doMouseDown(),1===t.button?t.preventDefault():Ko(e,t)}},r.Fm=function(t){if(r.isEnabled){r.Zf=!0;var e=r.Zj;if(null!==e[0]&&e[0].pointerId===t.pointerId)e[0]=t;else{if(null!==e[1]&&e[1].pointerId===t.pointerId)return void(e[1]=t);if(null!==e[0])return;e[0]=t}e[0].pointerId===t.pointerId&&((e=Ho(r,t,t,null!==e[1])).targetDiagram=Uo(t),r.doMouseMove(),Ko(e,t))}},r.Hm=function(t){var e,n,i;r.isEnabled&&(r.Zf=!0,e="touch"===t.pointerType||"pen"===t.pointerType,n=r.Os,e&&r.ek?(delete n[t.pointerId],t.preventDefault()):null!==(n=r.Zj)[0]&&n[0].pointerId===t.pointerId?(n[0]=null,n=Yo(r,t,!1,!0,!0,!1),null!==(i=d.document.elementFromPoint(t.clientX,t.clientY))&&i.B instanceof Mo&&i.B!==r&&Xo(i.B,t,n),Xo(r,t,n),n.clickCount=r.sd,null===i?n.targetDiagram=Uo(t):i.B?n.targetDiagram=i.B:n.targetDiagram=null,n.targetObject=null,r.doMouseUp(),Ko(n,t),e&&(r.ne=!1)):null!==n[1]&&n[1].pointerId===t.pointerId&&(n[1]=null))},r.Gm=function(t){var e;r.isEnabled&&(r.Zf=!1,(e=r.Os)[t.pointerId]&&delete e[t.pointerId],null!==(e=r.Zj)[0]&&e[0].pointerId===t.pointerId&&(e[0]=null),null!==e[1]&&e[1].pointerId===t.pointerId&&(e[1]=null),"touch"!==t.pointerType&&"pen"!==t.pointerType&&((t=r.currentTool).cancelWaitAfter(),t.standardMouseOver()))},t.tc(!0),(t=(o=r).ta.Ga)instanceof HTMLCanvasElement&&(o.ln?(o.addEventListener(t,"pointerdown",o.Em,!1),o.addEventListener(t,"pointermove",o.Fm,!1),o.addEventListener(t,"pointerup",o.Hm,!1),o.addEventListener(t,"pointerout",o.Gm,!1)):(o.addEventListener(t,"touchstart",o.Nw,!1),o.addEventListener(t,"touchmove",o.Mw,!1),o.addEventListener(t,"touchend",o.Lw,!1),o.addEventListener(t,"mousemove",o.Dk,!1),o.addEventListener(t,"mousedown",o.Ck,!1),o.addEventListener(t,"mouseup",o.Fk,!1),o.addEventListener(t,"mouseout",o.Ek,!1)),o.addEventListener(t,"mouseenter",o.Jz,!1),o.addEventListener(t,"mouseleave",o.Kz,!1),o.addEventListener(t,"wheel",o.Gk,!1),o.addEventListener(t,"keydown",o.xA,!1),o.addEventListener(t,"keyup",o.yA,!1),o.addEventListener(t,"blur",o.vz,!1),o.addEventListener(t,"focus",o.wz,!1),o.addEventListener(t,"selectstart",function(t){return t.preventDefault(),!1},!1),o.addEventListener(t,"contextmenu",function(t){return t.preventDefault(),!1},!1),o.addEventListener(t,"gesturestart",function(t){o.toolManager.gestureBehavior!==Fn&&(o.toolManager.gestureBehavior===En?t.preventDefault():o.ne&&o.lastInput.handled||(t.preventDefault(),o.Pl=o.scale,o.currentTool.doCancel()))},!1),o.addEventListener(t,"gesturechange",function(t){var e,n,i;o.toolManager.gestureBehavior!==Fn&&(o.toolManager.gestureBehavior===En?t.preventDefault():o.ne&&o.lastInput.handled||(t.preventDefault(),e=t.scale,null!==o.Pl&&(n=o.ta.getBoundingClientRect(),t=new ee(t.pageX-d.scrollX-o.xa/n.width*n.left,t.pageY-d.scrollY-o.wa/n.height*n.top),e=o.Pl*e,n=o.commandHandler,e!==o.scale&&n.canResetZoom(e)&&(i=o.zoomPoint,o.zoomPoint=t,n.resetZoom(e),o.zoomPoint=i))))},!1),o.addEventListener(d,"resize",o.Uw,!1)))}function ya(t){this.l=void 0===t?new ee:t,this.v=new ee}function va(t,e,n){this.node=t,this.info=e,this.Zv=n}function wa(){this.reset()}function ba(t){1<arguments.length&&O("Palette constructor can only take one optional argument, the DIV HTML element or its id."),Mo.call(this,t),Sa(this)}function Sa(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=oe,t.layout=new Vd}function xa(t){1<arguments.length&&O("Overview constructor can only take one optional argument, the DIV HTML element or its id."),Mo.call(this,t);var i=this;this.animationManager.isEnabled=!1,this.Rb=!0,this.Ja=null,this.ql=this.pl=!1,this.v=this.I=!0,this.cb=0,this.T=!1,this.$l=null,this.Qy("drawShadows",!1);var e=new Ou,t=new Oh;t.stroke="magenta",t.strokeWidth=2,t.fill="transparent",t.name="BOXSHAPE",e.selectable=!0,e.selectionAdorned=!1,e.selectionObjectName="BOXSHAPE",e.locationObjectName="BOXSHAPE",e.resizeObjectName="BOXSHAPE",e.cursor="move",e.add(t),this.l=e,this.allowDelete=this.allowCopy=!1,this.allowSelect=!0,this.autoScrollRegion=new Vt(0,0,0,0),this.la.h(0,0),this.toolManager.Xa("Dragging",new La,this.toolManager.mouseMoveTools),this.click=function(){var t,e,n=i.observed;null!==n&&(t=n.viewportBounds,e=i.lastInput.documentPoint,n.position=new ee(e.x-t.width/2,e.y-t.height/2))},this.Xh=function(){i.Oa(),ka(i)},this.Wh=function(){null!==i.observed&&(i.Oa(),i.M())},this.Pc=function(){i.updateDelay<1?i.M():i.T||(i.T=!0,setTimeout(function(){i.T=!1;var t,e=i.ta,n=i.Gb;if(null!==e&&null!==n){rr(i),null===i.$l&&((t=new fs(null)).width=e.width,t.height=e.height,i.$l=t);try{i.ta=i.$l,i.Gb=i.ta.context,i.Gb.tc(!0),i.Gb.setTransform(1,0,0,1,0,0),i.Gb.clearRect(0,0,i.ta.width,i.ta.height),Pa(i)}finally{i.ta=e,i.Gb=n}}i.M()},i.updateDelay))},this.Gd=function(){null!==i.observed&&ka(i)},this.autoScale=Zr,this.Rb=!1}function Pa(t){var e=t.observed;if(null!==e){var n=t.drawsTemporaryLayers,i=t.drawsGrid&&n,o=e.grid;i&&null!==o&&o.visible&&!isNaN(o.width)&&!isNaN(o.height)&&(yr(e,o=ne.alloc().assign(t.viewportBounds).Oc(e.viewportBounds)),ne.free(o),Zo(e));var r=t.ob;r.reset(),1!==t.scale&&r.scale(t.scale),0===t.position.x&&0===t.position.y||r.translate(-t.position.x,-t.position.y),(o=t.Gb).scale(t.Sb,t.Sb),o.transform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),r=(e=e.La.j).length;for(var a=0;a<r;a++){var s=e[a],h=t;if(s.visible&&0!==s.opacity){var u=s.diagram.grid.part;if(!n&&s.isTemporary)i&&u.layer===s&&(s=ko(s,o),u.bc(o,h),o.globalAlpha=s);else{for(var l=ko(s,o),d=h.scale,c=ne.alloc(),g=s.Da.j,f=g.length,p=0;p<f;p++){var m=g[p];!i&&m===u||s.dj(o,m,h,null,d,c,!1)}ne.free(c),o.globalAlpha=l}}}}}function ka(t){var e,n,i,o=t.box;null===o||null!==(e=t.observed)&&(t.Dc=!0,e=e.viewportBounds,n=o.selectionObject,(i=xe.alloc()).h(e.width,e.height),n.desiredSize=i,xe.free(i),t=2/t.scale,n instanceof Oh&&(n.strokeWidth=t),o.location=new ee(e.x-t/2,e.y-t/2),o.isSelected=!0)}function La(){On.call(this),this.l=null}function Ma(){J(this),this.B=qr,this.cb=this.I=this.v=!0,this.T=this.Ja=this.Pc=this.Ka=!1,this.Ji=this.l=null,this.Gd=1.05,this.av=NaN,this.wx=null,this.Bv=NaN,this.Av=zt,this.Bc=!0,this.rg=null,this.Qc=200}function _a(t){var e=be();for(t=t.iterator;t.next();){var n=t.value;n instanceof wl||e.push(n)}t=new $,n=e.length;for(var i=0;i<n;i++){for(var o=e[i],r=!0,a=0;a<n;a++)if(o.Cd(e[a])){r=!1;break}r&&t.add(o)}return Se(e),t}function Na(){J(this),this.F=4225027,this.tb=1,this.og=null,this.Qa="",this.dc=this.kb=null,this.la=new ee(NaN,NaN).freeze(),this.Uc=bt,this.fg=ft,this.eg=wt,this.ob=new Ie,this.Zh=new Ie,this.cg=new Ie,this.ya=this.jl=1,this.Yb=0,this.ze=Gr,this.ih=Ee,this.pc=new ne(NaN,NaN,NaN,NaN).freeze(),this.xb=new ne(NaN,NaN,NaN,NaN).freeze(),this.qc=new ne(0,0,NaN,NaN).freeze(),this.O=this.sp=this.tp=null,this.Tk=this.yb=we,this.Fp=0,this.Gp=1,this.Rg=0,this.yn=1,this.Zp=null,this.Mp=-1/0,this.Vl=0,this.Wl=St,this.Xl=zl,this.oi="",this.eb=this.N=null,this.Xk=-1,this.Zl=this.pd=this.ni=this.cm=null,this.Rs=Or,this.Ip=this.Mg=this.Yj=null}function Aa(t){null===t.N&&(t.N=new os)}function Ta(t,e,n){var i=t.ij();if(null!==i)for(var o=t.eb.iterator;o.next();){var r=o.value,a=null;if(null!==r.sourceName){if(null===(a=qc(r,i,t)))continue;r.lr(t,a,n,null)}else if(r.isToModel){var s=e.diagram;null===s||s.skipsModelSourceBindings||r.lr(t,s.model.modelData,n,i)}else{if(null===(s=i.data))continue;var h=e.diagram;null===h||h.skipsModelSourceBindings||r.lr(t,s,n,i)}a===t&&(null!==(s=i.Ht(r.vj))&&r.Rw(s,a,n))}}function Ca(t,e,n,i,o){var r=t.pc,a=t.cg;a.reset(),Ga(t,a,e,n,i,o),t.cg=a,r.h(e,n,i,o),a.Tt()||a.Ow(r)}function Da(t,e,n,i){return!1!==t.pickable&&(i.multiply(t.transform),n?t.Lc(e,i):t.Jh(e,i))}function Ea(t,e,n,i,o){if(t.xb.h(e,n,i,o),!t.desiredSize.u()){var r=t.pc;e=(n=t.ih).right+n.left;var a=n.top+n.bottom;switch(n=r.width+e,r=r.height+a,i+=e,o+=a,e=za(t,!0),n===i&&r===o&&(e=Or),e){case Or:(i<n||o<r)&&(Xa(t,!0),t.measure(i<n?i:n,o<r?o:r,0,0));break;case Fr:Xa(t,!0),t.measure(i,o,0,0);break;case jr:Xa(t,!0),t.measure(i,r,0,0);break;case zr:Xa(t,!0),t.measure(n,o,0,0)}}}function Fa(t,e,n){var i=t.xb,o=t.qc;null!==t.dc&&(Oa(t,e,t.dc,!0,!0,o,i),t.dc instanceof vs&&t.dc.type===Fs?(e.beginPath(),e.rect(i.x,i.y,i.width,i.height),e.Yd(t.dc)):e.fillRect(i.x,i.y,i.width,i.height)),null!==t.kb&&(Oa(t,e,t.kb,!0,!1,o,i),t.kb instanceof vs&&t.kb.type===Fs?(e.beginPath(),e.rect(i.x,i.y,i.width,i.height),e.Yd(t.kb)):e.fillRect(i.x,i.y,i.width,i.height)),t.ej(e,n)}function Oa(t,e,n,i,o,r,a){if(null!==n){var s=1,h=1;if("string"==typeof n)i?e.fillStyle=n:e.strokeStyle=n;else if(n.type===Ds)i?e.fillStyle=n.color:e.strokeStyle=n.color;else{var u=0;if(t instanceof Oh&&(u=t.strokeWidth),s=r.width,h=r.height,o?(s=a.width,h=a.height):i||(s+=u,h+=u),(r=e instanceof ps)&&n.ge&&(n.type===Os||n.$k===s&&n.zu===h))var l=n.ge;else{var d,c,g,f,p,m=0,y=0,y=m=0;if(o?(m=a.x,y=a.y):i||(m-=u/2,y-=u/2),d=n.start.x*s+n.start.offsetX,c=n.start.y*h+n.start.offsetY,g=n.end.x*s+n.end.offsetX,f=n.end.y*h+n.end.offsetY,d+=m,g+=m,c+=y,f+=y,n.type===Es)l=e.createLinearGradient(d,c,g,f);else if(n.type===Fs)y=isNaN(n.endRadius)?Math.max(s,h)/2:n.endRadius,isNaN(n.startRadius)?(m=0,y=Math.max(s,h)/2):m=n.startRadius,l=e.createRadialGradient(d,c,m,g,f,y);else if(n.type===Os)try{l=e.createPattern(n.pattern,"repeat")}catch(t){l=null}if(n.type!==Os&&null!==(o=n.colorStops))for(o=o.iterator;o.next();)l.addColorStop(o.key,o.value);r&&(null!==(n.ge=l)&&(n.$k=s,n.zu=h),null===l&&n.type===Os&&-1!==n.$k)&&(n.$k=-1,null!==(p=t.diagram)&&-1===n.$k&&v(function(){p.Je()},600))}i?e.fillStyle=l:e.strokeStyle=l}}}function Ba(t){if(0!=(2048&t.F)==!0){var e,n=t.ob;if(n.reset(),!t.xb.u()||!t.pc.u())return void Ha(t,!1);n.translate(t.xb.x-t.pc.x,t.xb.y-t.pc.y),1===t.scale&&0===t.angle||Ga(t,n,(e=t.naturalBounds).x,e.y,e.width,e.height),Ha(t,!1),Ya(t,!0)}0!=(4096&t.F)==!0&&(null===(n=t.panel)?(t.Zh.set(t.ob),t.jl=t.scale,Ya(t,!1)):null!==n.Ad&&((e=t.Zh).reset(),n.de()?e.multiply(n.Zh):null!==n.panel&&e.multiply(n.panel.Zh),e.multiply(t.ob),t.jl=t.scale*n.jl,Ya(t,!1)))}function Ga(t,e,n,i,o,r){if(1!==t.scale&&e.scale(t.scale),0!==t.Yb){var a=Wt;t.Ef()&&t.locationSpot.ib()&&(a=t.locationSpot);var s=ee.alloc();if(t instanceof Ou&&t.locationObject!==t)for(i=(n=t.locationObject).naturalBounds,s.Lk(i.x,i.y,i.width,i.height,a),n.cg.sa(s),s.offset(-n.measuredBounds.x,-n.measuredBounds.y),a=n.panel;null!==a&&a!==t;)a.cg.sa(s),s.offset(-a.measuredBounds.x,-a.measuredBounds.y),a=a.panel;else s.Lk(n,i,o,r,a);e.rotate(t.Yb,s.x,s.y),ee.free(s)}}function ja(t){var e;!1===Wa(t)&&(null!==(e=t.panel)?e.o():!t.Ef()||null!==(e=t.diagram)&&(e.rd.add(t),t instanceof el&&t.md(),e.Db()),$a(t,!0))}function za(t,e){var n=t.stretch,i=t.panel;return null!==i&&i.type===hh.Table?Ra(t,i.getRowDefinition(t.row),i.getColumnDefinition(t.column),e):null!==i&&i.type===hh.Auto&&i.pb()===t?Ia(t,Fr,e):n===Gr?null!==i?i.type===hh.Spot&&i.pb()===t?Ia(t,Fr,e):Ia(t,(n=i.defaultStretch)===Gr?Or:n,e):Ia(t,Or,e):Ia(t,n,e)}function Ra(t,e,n,i){var o=t.stretch;if(o!==Gr)return Ia(t,o,i);var r=o=null;switch(e.stretch){case zr:r=!0;break;case Fr:r=!0}switch(n.stretch){case jr:o=!0;break;case Fr:o=!0}return e=t.panel.defaultStretch,null===o&&(o=e===jr||e===Fr),null===r&&(r=e===zr||e===Fr),Ia(t,!0===o&&!0===r?Fr:!0===o?jr:!0===r?zr:Or,i)}function Ia(t,e,n){if(n)return e;if(e===Or)return Or;if((n=t.desiredSize).u())return Or;if(t=t.angle,!isNaN(n.width))if(90!==t&&270!==t){if(e===jr)return Or;if(e===Fr)return zr}else{if(e===zr)return Or;if(e===Fr)return jr}if(!isNaN(n.height))if(90!==t&&270!==t){if(e===zr)return Or;if(e===Fr)return jr}else{if(e===jr)return Or;if(e===Fr)return zr}return e}function Va(t,e){t.F=e?512|t.F:-513&t.F}function Ua(t){return 0!=(1024&t.F)}function qa(t,e){t.F=e?1024|t.F:-1025&t.F}function Ha(t,e){t.F=e?2048|t.F:-2049&t.F}function Ya(t,e){t.F=e?4096|t.F:-4097&t.F}function Ka(t){return 0!=(8192&t.F)}function Xa(t,e){t.F=e?8192|t.F:-8193&t.F}function Wa(t){return 0!=(16384&t.F)}function $a(t,e){t.F=e?16384|t.F:-16385&t.F}function Ja(t){var e,n=t.part;n instanceof el&&(null!==t.portId||t===n.port)&&(null===(e=n.diagram)||e.undoManager.isUndoingRedoing||ol(n,t))}function Za(t){var e=t.diagram;null===e||e.undoManager.isUndoingRedoing||(t instanceof hh?t instanceof el?t.md():t.Zm(t,function(t){Ja(t)}):Ja(t))}function Qa(t,e){null===(e.jd=t).Mg&&(t.Mg=new at),t.Mg.add(e.propertyName,e)}function ts(t,e){for(var n=1;n<arguments.length;++n);n=arguments;var i,o=null,r=null;for("function"==typeof t?r=t:"string"==typeof t&&("function"==typeof(i=is.H(t))?y(o=i(n=b(arguments)))||O('GraphObject.make invoked object builder "'+t+'", but it did not return an Object'):r=d.go[t]),null===o&&(null!=r&&r.constructor||O("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),o=new r),r=1,o instanceof Mo&&1<n.length&&(i=o,("string"==typeof(t=n[1])||t instanceof HTMLDivElement)&&(ma(i,t),r++));r<n.length;r++)void 0===(i=n[r])?O("Undefined value at argument "+r+" for object being constructed by GraphObject.make: "+o):function t(e,n){if("string"==typeof n)e instanceof Hh?e.text=n:e instanceof Oh?e.figure=n:e instanceof vu?e.source=n:e instanceof hh?null!==(n=Ah.H(n))&&(e.type=n):e instanceof vs?null!==(r=z(vs,n))?e.type=r:O("Unknown Brush type as an argument to GraphObject.make: "+n):e instanceof qe?null!==(n=z(qe,n))&&(e.type=n):e instanceof sn&&(null!==(n=z(sn,n))&&(e.type=n));else if(n instanceof Na)e instanceof hh||O("A GraphObject can only be added to a Panel, not to: "+e),e.add(n);else if(n instanceof Th){var i;n.isRow&&"function"==typeof e.getRowDefinition?i=e.getRowDefinition(n.index):n.isRow||"function"!=typeof e.getColumnDefinition||(i=e.getColumnDefinition(n.index)),i instanceof Th?i.Dt(n):O("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+e)}else if(n instanceof j)"function"==typeof e.hb&&e.hb(n);else if(n instanceof Ks)e.type=n;else if(n instanceof Uc)e instanceof Na||e instanceof Th?e.bind(n):O("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+e);else if(n instanceof wo)e instanceof Na?Qa(e,n):O("An AnimationTrigger can only be applied to a GraphObject, not to: "+e);else if(n instanceof an)e instanceof qe?e.figures.add(n):O("A PathFigure can only be added to a Geometry, not to: "+e);else if(n instanceof sn)e instanceof an?e.segments.add(n):O("A PathSegment can only be added to a PathFigure, not to: "+e);else if(n instanceof Sd)e instanceof Mo||e instanceof pl?e.layout=n:O("A Layout can only be assigned to a Diagram or a Group, not to: "+e);else if(Array.isArray(n))for(r=0;r<n.length;r++)t(e,n[r]);else if("object"===_typeof(n)&&null!==n)if(e instanceof vs){for(var o in r=new I,n)i=parseFloat(o),isNaN(i)?r[o]=n[o]:e.addColorStop(i,n[o]);nr(e,r)}else if(e instanceof Th){for(var r in void 0!==n.row?((null==(o=n.row)||1/0===o||isNaN(o)||o<0)&&O("Must specify non-negative integer row for RowColumnDefinition "+n+", not: "+o),e.isRow=!0,e.index=o):void 0!==n.column&&((null==(o=n.column)||1/0===o||isNaN(o)||o<0)&&O("Must specify non-negative integer column for RowColumnDefinition "+n+", not: "+o),e.isRow=!1,e.index=o),o=new I,n)"row"!==r&&"column"!==r&&(o[r]=n[r]);nr(e,o)}else nr(e,n);else O('Unknown initializer "'+n+'" for object being constructed by GraphObject.make: '+e)}(o,i);return o}function es(t,e){is.add(t,e)}function ns(t,e,n){void 0===n&&(n=null);var i=t[1];if("function"==typeof n?n(i):"string"==typeof i)return t.splice(1,1),i;if(void 0===e)throw Error("no "+("function"==typeof n?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}Mo.className="Diagram",Mo.fromDiv=function(t){var e=t;return"string"==typeof t&&(e=d.document.getElementById(t)),e instanceof HTMLDivElement&&e.B instanceof Mo?e.B:null},Mo.inherit=function(t,e){function n(){}if(Object.getPrototypeOf(t).prototype)throw Error("Used go.Diagram.inherit defining already defined class \n"+t);n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},Mo.None=Jr,Mo.Uniform=Zr,Mo.UniformToFill=Qr,Mo.CycleAll=ta,Mo.CycleNotDirected=ea,Mo.CycleNotDirectedFast=na,Mo.CycleNotUndirected=ia,Mo.CycleDestinationTree=oa,Mo.CycleSourceTree=ra,Mo.DocumentScroll=aa,Mo.InfiniteScroll=sa,Mo.TreeParentCollapsed=ha,Mo.AllParentsCollapsed=ua,Mo.AnyParentsCollapsed=la,fa.className="DiagramHelper",s.Object.defineProperties(ya.prototype,{point:{get:function(){return this.l},set:function(t){this.l=t}},shifted:{get:function(){return this.v},set:function(t){this.v=t}}}),ya.className="DraggingInfo",va.className="DraggingNodeInfoPair",wa.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new xe(NaN,NaN).freeze(),this.gridSnapCellSpot=Yt,this.gridSnapOrigin=new ee(NaN,NaN).freeze(),this.groupsSnapMembers=this.dragsTree=this.dragsLink=!1,this.dragsMembers=this.groupsAlwaysMove=!0},wa.className="DraggingOptions",n(ba,Mo),ba.prototype.reset=function(){Mo.prototype.reset.call(this),Sa(this)},ba.className="Palette",n(xa,Mo),xa.prototype.computePixelRatio=function(){return 1},xa.prototype.bc=function(){if((null===this.Ea&&O("No div specified"),null===this.ta&&O("No canvas specified"),!(this.ta instanceof ss)&&(Bu(this.box),this.Dc))&&(null!==(t=this.observed)&&!t.animationManager.isAnimating&&t.oj)){rr(this);var t,e=this.ta;(t=this.Gb).tc(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),this.updateDelay<1?Pa(this):null!==this.$l&&(t.drawImage(this.$l.Ga,0,0),(e=this.ob).reset(),1!==this.scale&&e.scale(this.scale),0===this.position.x&&0===this.position.y||e.translate(-this.position.x,-this.position.y),t.scale(this.Sb,this.Sb),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy));for(var n=(e=this.La.j).length,i=0;i<n;i++)e[i].bc(t,this);this.Dc=this.wi=!1}},xa.prototype.computeBounds=function(){var t=this.observed;if(null===t)return zt;var e=t.documentBounds.copy();return e.Oc(t.viewportBounds),e},xa.prototype.By=function(){!0!==this.Dc&&(this.Dc=!0,this.Db())},xa.prototype.Vq=function(t,e,n,i){this.Rb||(or(this),this.M(),ir(this),this.Oa(),ka(this),this.Vd.scale=n,this.Vd.position.x=t.x,this.Vd.position.y=t.y,this.Vd.bounds.assign(t),this.Vd.gw=i,this.R("ViewportBoundsChanged",this.Vd,t))},s.Object.defineProperties(xa.prototype,{observed:{get:function(){return this.Ja},set:function(t){var e,n,i=this.Ja;t instanceof xa&&O("Overview.observed Diagram may not be an Overview itself: "+t),i!==t&&(null!==i&&(this.remove(this.box),i.Km("ViewportBoundsChanged",this.Xh),i.Km("DocumentBoundsChanged",this.Wh),i.Km("InvalidateDraw",this.Pc),i.Km("AnimationFinished",this.Gd)),null!==(this.Ja=t)&&(t.hk("ViewportBoundsChanged",this.Xh),t.hk("DocumentBoundsChanged",this.Wh),t.hk("InvalidateDraw",this.Pc),t.hk("AnimationFinished",this.Gd),this.add(this.box)),this.Oa(),null===t?(this.$l=null,e=this.ta,n=this.Gb,e&&n&&(n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height))):(this.Pc(null),ka(this),this.M()),this.g("observed",i,t))}},box:{get:function(){return this.l},set:function(t){var e=this.l;e!==t&&(this.l=t,this.remove(e),this.add(this.l),ka(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t,this.Je())}},drawsGrid:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t,this.Je())}},updateDelay:{get:function(){return this.cb},set:function(t){t<0&&(t=0),this.cb!==t&&(this.cb=t)}}}),xa.className="Overview",n(La,On),La.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(null===e)return!1;var n=t.lastInput;return!(!n.left||t.currentTool!==this&&(!this.isBeyondDragSize()||n.isTouchEvent&&n.timestamp-t.firstInput.timestamp<this.delay))&&(null===this.findDraggablePart()&&(n=e.viewportBounds,this.l=new ee(n.width/2,n.height/2),t=t.firstInput.documentPoint,e.position=new ee(t.x-this.l.x,t.y-this.l.y)),!0)},La.prototype.doActivate=function(){this.l=null,On.prototype.doActivate.call(this)},La.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;null!==e&&e.cursor&&(t.currentCursor=e.cursor)},La.prototype.moveParts=function(){var t,e,n=this.diagram,i=n.observed;null===i||null!==(e=n.box)&&(null===this.l&&(t=n.firstInput.documentPoint,e=e.location,this.l=new ee(t.x-e.x,t.y-e.y)),n=n.lastInput.documentPoint,i.position=new ee(n.x-this.l.x,n.y-this.l.y))},La.className="OverviewDraggingTool",Ma.prototype.toString=function(){return"CommandHandler"},Ma.prototype.ae=function(t){this.B=t},Ma.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,n=E?e.meta:e.control,i=e.shift,o=e.alt,r=e.key;!n||"C"!==r&&"Insert"!==r?n&&"X"===r||i&&"Del"===r?this.canCutSelection()&&this.cutSelection():n&&"V"===r||i&&"Insert"===r?this.canPasteSelection()&&this.pasteSelection():n&&"Y"===r||o&&i&&"Backspace"===r?this.canRedo()&&this.redo():n&&"Z"===r||o&&"Backspace"===r?this.canUndo()&&this.undo():"Del"===r||"Backspace"===r?this.canDeleteSelection()&&this.deleteSelection():n&&"A"===r?this.canSelectAll()&&this.selectAll():"Esc"===r?this.canStopCommand()&&this.stopCommand():"Up"===r?t.allowVerticalScroll&&(n?t.scroll("pixel","up"):t.scroll("line","up")):"Down"===r?t.allowVerticalScroll&&(n?t.scroll("pixel","down"):t.scroll("line","down")):"Left"===r?t.allowHorizontalScroll&&(n?t.scroll("pixel","left"):t.scroll("line","left")):"Right"===r?t.allowHorizontalScroll&&(n?t.scroll("pixel","right"):t.scroll("line","right")):"PageUp"===r?i&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):"PageDown"===r?i&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):"Home"===r?n&&t.allowVerticalScroll?t.scroll("document","up"):!n&&t.allowHorizontalScroll&&t.scroll("document","left"):"End"===r?n&&t.allowVerticalScroll?t.scroll("document","down"):!n&&t.allowHorizontalScroll&&t.scroll("document","right"):" "===r?this.canScrollToPart()&&this.scrollToPart():"Subtract"===r?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===r?this.canIncreaseZoom()&&this.increaseZoom():n&&"0"===r?this.canResetZoom()&&this.resetZoom():i&&"Z"===r?this.canZoomToFit()&&this.zoomToFit():n&&!i&&"G"===r?this.canGroupSelection()&&this.groupSelection():n&&i&&"G"===r?this.canUngroupSelection()&&this.ungroupSelection():e.event&&113===e.event.which?this.canEditTextBlock()&&this.editTextBlock():e.event&&93===e.event.which?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},Ma.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},Ma.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof _n&&t.allowSelect&&t.clearSelection(),null!==e&&e.doCancel()},Ma.prototype.canStopCommand=function(){return!0},Ma.prototype.selectAll=function(){var t=this.diagram;t.M();try{t.currentCursor="wait",t.R("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var n=t.nodes;n.next();)n.value.isSelected=!0;for(var i=t.links;i.next();)i.value.isSelected=!0}finally{t.R("ChangedSelection",t.selection),t.currentCursor=""}},Ma.prototype.canSelectAll=function(){return this.diagram.allowSelect},Ma.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),t.va("Delete"),t.R("SelectionDeleting",t.selection);for(var e=new $,n=t.selection.iterator;n.next();)Zu(e,n.value,!0,this.deletesTree?1/0:0,!!this.deletesConnectedLinks&&null,function(t){return t.canDelete()});t.gu(e,!0),t.R("SelectionDeleted",e)}finally{t.Wa("Delete"),t.R("ChangedSelection",t.selection),t.currentCursor=""}},Ma.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||0===t.selection.count)},Ma.prototype.copySelection=function(){for(var t=this.diagram,e=new $,t=t.selection.iterator;t.next();)Zu(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,function(t){return t.canCopy()});this.copyToClipboard(e)},Ma.prototype.canCopySelection=function(){var t=this.diagram;return!(!t.allowCopy||!t.allowClipboard||0===t.selection.count)},Ma.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},Ma.prototype.canCutSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowCopy||!t.allowDelete||!t.allowClipboard||0===t.selection.count)},Ma.prototype.copyToClipboard=function(t){var e=this.diagram,n=null;if(null===t)Wr=null,$r="";else{n=e.model;var i=!1,o=!1,r=null;try{n.Am()&&(i=n.pk,n.pk=this.copiesParentKey),n.xk()&&(o=n.nk,n.nk=this.copiesGroupKey),r=e.qk(t,null,!0)}finally{n.Am()&&(n.pk=i),n.xk()&&(n.nk=o),(n=new X).addAll(r),Wr=n,$r=e.model.dataFormat}}e.R("ClipboardChanged",n)},Ma.prototype.pasteFromClipboard=function(){var t=new $,e=Wr;if(null===e)return t;var n=this.diagram;if($r!==n.model.dataFormat)return t;var i=n.model,o=!1,r=!1,a=null;try{i.Am()&&(o=i.pk,i.pk=this.copiesParentKey),i.xk()&&(r=i.nk,i.nk=this.copiesGroupKey),a=n.qk(e,n,!1)}finally{for(i.Am()&&(i.pk=o),i.xk()&&(i.nk=r),e=a.iterator;e.next();)n=e.value,i=e.key,n.location.u()||(i.location.u()?n.location=i.location:!n.position.u()&&i.position.u()&&(n.position=i.position)),t.add(n)}return t},Ma.prototype.pasteSelection=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.R("ChangingSelection",e.selection),e.va("Paste");var n=this.pasteFromClipboard();0<n.count&&e.clearSelection(!0);for(var i,o=n.iterator;o.next();)o.value.isSelected=!0;null===t||(i=e.computePartsBounds(e.selection)).u()&&lr(e,this.computeEffectiveCollection(e.selection,e.dl),new ee(t.x-i.centerX,t.y-i.centerY),e.dl,!1),e.R("ClipboardPasted",n)}finally{e.Wa("Paste"),e.R("ChangedSelection",e.selection),e.currentCursor=""}},Ma.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||null===Wr||0===Wr.count||$r!==t.model.dataFormat)},Ma.prototype.undo=function(){this.diagram.undoManager.undo()},Ma.prototype.canUndo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&(t.allowUndo&&t.undoManager.canUndo())},Ma.prototype.redo=function(){this.diagram.undoManager.redo()},Ma.prototype.canRedo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&(t.allowUndo&&t.undoManager.canRedo())},Ma.prototype.decreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===Jr&&((t=e.scale*t)<e.minScale||t>e.maxScale||(e.scale=t))},Ma.prototype.canDecreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale===Jr&&(!((t=e.scale*t)<e.minScale||t>e.maxScale)&&e.allowZoom)},Ma.prototype.increaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===Jr&&((t=e.scale*t)<e.minScale||t>e.maxScale||(e.scale=t))},Ma.prototype.canIncreaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale===Jr&&(!((t=e.scale*t)<e.minScale||t>e.maxScale)&&e.allowZoom)},Ma.prototype.resetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},Ma.prototype.canResetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;return!(t<e.minScale||t>e.maxScale)&&e.allowZoom},Ma.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.Nc(),t.Je();var n=t.position,i=t.scale;Wi(e,"Zoom To Fit"),this.isZoomToFitRestoreEnabled&&i===this.Bv&&!isNaN(this.av)&&t.documentBounds.w(this.Av)?(t.scale=this.av,t.position=this.wx,this.Bv=NaN,this.Av=zt):(this.av=i,this.wx=n.copy(),t.zoomToFit(),this.Bv=t.scale,this.Av=t.documentBounds.copy()),Ji(e)},Ma.prototype.canZoomToFit=function(){return this.diagram.allowZoom},Ma.prototype.scrollToPart=function(t){void 0===t&&(t=null);var e,n,i,o,r,a,s=this.diagram;if(s.Ta(),null===t){try{null!==this.rg&&(this.rg.next()?t=this.rg.value:this.rg=null)}catch(t){this.rg=null}null===t&&(0<s.highlighteds.count?this.rg=s.highlighteds.iterator:0<s.selection.count&&(this.rg=s.selection.iterator),null!==this.rg&&this.rg.next()&&(t=this.rg.value))}null!==t&&(Wi(e=s.animationManager,"Scroll To Part"),0<(n=this.scrollToPartPause)?1===(i=function t(e,n,i){if(n.isVisible())return i;{var o;n instanceof tl?t(e,n.adornedPart,i):n instanceof wl?(null!==(o=n.fromNode)&&t(e,o,i),null!==(n=n.toNode)&&t(e,n,i)):(n instanceof el&&(null!==(o=n.labeledLink)&&t(e,o,i),null!==(o=n.Fg())&&(o.isTreeExpanded||o.wasTreeExpanded||i.push(o),t(e,o,i))),null!==(n=n.containingGroup)&&(n.isSubGraphExpanded||n.wasSubGraphExpanded||i.push(n),t(e,n,i)))}return i}(this,t,[t])).length?(s.va(),s.At(t.actualBounds),s.Wa("Scroll To Part")):(o=function(){s.va();for(var t=i.pop();0<i.length&&t instanceof el&&t.isTreeExpanded&&(!(t instanceof pl)||t.isSubGraphExpanded);)t=i.pop();0<i.length?(t instanceof Ou&&s.zw(t.actualBounds),t instanceof el&&!t.isTreeExpanded&&(t.isTreeExpanded=!0),t instanceof pl&&!t.isSubGraphExpanded&&(t.isSubGraphExpanded=!0)):(t instanceof Ou&&s.At(t.actualBounds),s.Km("LayoutCompleted",r)),s.Wa("Scroll To Part")},r=function(){v(o,(e.isEnabled?e.duration:0)+n)},s.hk("LayoutCompleted",r),o()):(a=s.position.copy(),s.At(t.actualBounds),a.Na(s.position)&&e.Nc()))},Ma.prototype.canScrollToPart=function(t){return void 0===t&&(t=null),(null===t||t instanceof Ou)&&((0!==(t=this.diagram).selection.count||0!==t.highlighteds.count)&&(t.allowHorizontalScroll&&t.allowVerticalScroll))},Ma.prototype.collapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.va("Collapse Tree"),Wi(e.animationManager,"Collapse Tree");var n=new X;if(null!==t&&t.isTreeExpanded)t.collapseTree(),n.add(t);else if(null===t)for(var i=e.selection.iterator;i.next();){var o=i.value;o instanceof el&&o.isTreeExpanded&&(o.collapseTree(),n.add(o))}e.R("TreeCollapsed",n)}finally{e.Wa("Collapse Tree")}},Ma.prototype.canCollapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof el&&t.isTreeExpanded))return!1;if(0<t.Fq().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof el&&e.isTreeExpanded&&0<e.Fq().count)return!0;return!1},Ma.prototype.expandTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.va("Expand Tree"),Wi(e.animationManager,"Expand Tree");var n=new X;if(null===t||t.isTreeExpanded){if(null===t)for(var i=e.selection.iterator;i.next();){var o=i.value;o instanceof el&&!o.isTreeExpanded&&(o.expandTree(),n.add(o))}}else t.expandTree(),n.add(t);e.R("TreeExpanded",n)}finally{e.Wa("Expand Tree")}},Ma.prototype.canExpandTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof el)||t.isTreeExpanded)return!1;if(0<t.Fq().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof el&&!e.isTreeExpanded&&0<e.Fq().count)return!0;return!1},Ma.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.yk()){var n=this.archetypeGroupData;if(null!==n){var i=null;try{t.currentCursor="wait",t.R("ChangingSelection",t.selection),t.va("Group");for(var o=new X,r=t.selection.iterator;r.next();){var a=r.value;a.Wb()&&a.canGroup()&&o.add(a)}for(var s=new X,h=o.iterator;h.next();){for(var u=h.value,r=!1,l=o.iterator;l.next();)if(u.Cd(l.value)){r=!0;break}r||s.add(u)}if(0<s.count){var d,c=s.first().containingGroup;if(null!==c)for(;null!==c;){o=!1;for(var g=s.iterator;g.next();)if(!g.value.Cd(c)){o=!0;break}if(!o)break;c=c.containingGroup}if(n instanceof pl?(Sh(n),null!==(i=n.copy())&&t.add(i)):!e.ew(n)||y(d=e.copyNodeData(n))&&(e.uf(d),i=t.gj(d)),null!==i){null!==c&&this.isValidMember(c,i)&&(i.containingGroup=c);for(var f=s.iterator;f.next();){var p=f.value;this.isValidMember(i,p)&&(p.containingGroup=i)}t.clearSelection(!0),i.isSelected=!0}}t.R("SelectionGrouped",i)}finally{t.Wa("Group"),t.R("ChangedSelection",t.selection),t.currentCursor=""}}}},Ma.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.yk()||null===this.archetypeGroupData)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Wb()&&e.canGroup())return!0}return!1},Ma.prototype.isValidMember=function(t,e){if(null===e||t===e||e instanceof wl)return!1;if(null!==t){if(t===e||t.Cd(e))return!1;var n=t.memberValidation;if(null!==n&&!n(t,e)||null===t.data&&null!==e.data||null!==t.data&&null===e.data)return!1}return null===(n=this.memberValidation)||n(t,e)},Ma.prototype.ungroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram,n=e.model;if(n.yk())try{e.currentCursor="wait",e.R("ChangingSelection",e.selection),e.va("Ungroup");var i=new X;if(null!==t)i.add(t);else for(var o=e.selection.iterator;o.next();){var r=o.value;r instanceof pl&&r.canUngroup()&&i.add(r)}var a=new X;if(0<i.count){e.clearSelection(!0);for(var s=i.iterator;s.next();){var h=s.value;h.expandSubGraph();var u=h.containingGroup,l=null!==u&&null!==u.data?n.ja(u.data):void 0;a.addAll(h.memberParts);for(var d=a.iterator;d.next();){var c,g=d.value;g.isSelected=!0,g instanceof wl||(null!==(c=g.data)?n.er(c,l):g.containingGroup=u)}e.remove(h)}}e.R("SelectionUngrouped",i,a)}finally{e.Wa("Ungroup"),e.R("ChangedSelection",e.selection),e.currentCursor=""}},Ma.prototype.canUngroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.yk())return!1;if(null!==t){if(!(t instanceof pl))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof pl&&e.canUngroup())return!0;return!1},Ma.prototype.addTopLevelParts=function(t,e){var n=!0;for(t=_a(t).iterator;t.next();){var i=t.value;null!==i.containingGroup&&(!e||this.isValidMember(null,i)?i.containingGroup=null:n=!1)}return n},Ma.prototype.collapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.va("Collapse SubGraph"),Wi(e.animationManager,"Collapse SubGraph");var n=new X;if(null!==t&&t.isSubGraphExpanded)t.collapseSubGraph(),n.add(t);else if(null===t)for(var i=e.selection.iterator;i.next();){var o=i.value;o instanceof pl&&o.isSubGraphExpanded&&(o.collapseSubGraph(),n.add(o))}e.R("SubGraphCollapsed",n)}finally{e.Wa("Collapse SubGraph")}},Ma.prototype.canCollapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return!!(t instanceof pl&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof pl&&e.isSubGraphExpanded)return!0;return!1},Ma.prototype.expandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.va("Expand SubGraph"),Wi(e.animationManager,"Expand SubGraph");var n=new X;if(null===t||t.isSubGraphExpanded){if(null===t)for(var i=e.selection.iterator;i.next();){var o=i.value;o instanceof pl&&!o.isSubGraphExpanded&&(o.expandSubGraph(),n.add(o))}}else t.expandSubGraph(),n.add(t);e.R("SubGraphExpanded",n)}finally{e.Wa("Expand SubGraph")}},Ma.prototype.canExpandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return t instanceof pl&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof pl&&!e.isSubGraphExpanded)return!0;return!1},Ma.prototype.editTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram,n=e.toolManager.findTool("TextEditing");if(null!==n){if(null===t){t=null;for(var i=e.selection.iterator;i.next();){var o=i.value;if(o.canEdit()){t=o;break}}if(null===t)return;t=t.sm(function(t){return t instanceof Hh&&t.editable})}null!==t&&(e.currentTool=null,n.textBlock=t,e.currentTool=n)}},Ma.prototype.canEditTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||null===e.toolManager.findTool("TextEditing"))return!1;if(null!==t){if(!(t instanceof Hh))return!1;if(null!==(t=t.part)&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if((t=e.value).canEdit()&&null!==(t=t.sm(function(t){return t instanceof Hh&&t.editable})))return!0;return!1},Ma.prototype.showContextMenu=function(t){var e,n,i=this.diagram,o=i.toolManager.findTool("ContextMenu");null!==o&&(void 0===t&&(t=0<i.selection.count?i.selection.first():i),null!==(t=o.findObjectWithContextMenu(t)))&&(e=i.lastInput,n=null,t instanceof Na?n=t.ga(Wt):i.viewportBounds.aa(e.documentPoint)||(n=new ee((n=i.viewportBounds).x+n.width/2,n.y+n.height/2)),null!==n&&(e.viewPoint=i.ir(n),e.documentPoint=n,e.left=!1,e.right=!0,e.up=!0),_i(i.currentTool=o,!1,t))},Ma.prototype.canShowContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");return null!==n&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==n.findObjectWithContextMenu(t))},Ma.prototype.computeEffectiveCollection=function(t,e){var n=this.diagram,i=n.toolManager.findTool("Dragging"),o=n.currentTool===i;if(void 0===e&&(e=o?i.dragOptions:n.dl),i=new at,null===t)return i;for(var r=t.iterator;r.next();)ur(n,i,r.value,o,e);if(null!==n.draggedLink&&e.dragsLink)return i;for(r=t.iterator;r.next();)(t=r.value)instanceof wl&&(null===(e=t.fromNode)||i.contains(e)?null===(e=t.toNode)||i.contains(e)||i.remove(t):i.remove(t));return i},s.Object.defineProperties(Ma.prototype,{diagram:{get:function(){return this.B}},copiesClipboardData:{get:function(){return this.v},set:function(t){this.v=t}},copiesConnectedLinks:{get:function(){return this.I},set:function(t){this.I=t}},deletesConnectedLinks:{get:function(){return this.cb},set:function(t){this.cb=t}},copiesTree:{get:function(){return this.Ka},set:function(t){this.Ka=t}},deletesTree:{get:function(){return this.Pc},set:function(t){this.Pc=t}},copiesParentKey:{get:function(){return this.Ja},set:function(t){this.Ja=t}},copiesGroupKey:{get:function(){return this.T},set:function(t){this.T=t}},archetypeGroupData:{get:function(){return this.l},set:function(t){this.l=t}},memberValidation:{get:function(){return this.Ji},set:function(t){this.Ji=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.Gd},set:function(t){1<t||O("zoomFactor must be larger than 1.0, not: "+t),this.Gd=t}},isZoomToFitRestoreEnabled:{get:function(){return this.Bc},set:function(t){this.Bc=t}},scrollToPartPause:{get:function(){return this.Qc},set:function(t){this.Qc=t}}}),Ma.className="CommandHandler",No=function(){return new Ma},Na.prototype.cloneProtected=function(t){t.F=6144|this.F,t.tb=this.tb,t.Qa=this.Qa,t.kb=this.kb,t.dc=this.dc,t.Mg=this.Mg,t.la.assign(this.la),t.Uc=this.Uc.G(),t.fg=this.fg.G(),t.eg=this.eg.G(),t.cg=this.cg.copy(),t.ya=this.ya,t.Yb=this.Yb,t.ze=this.ze,t.ih=this.ih.G(),t.pc.assign(this.pc),t.xb.assign(this.xb),t.qc.assign(this.qc),t.sp=this.sp,null!==this.O&&(t.O=this.O.copy()),t.yb=this.yb.G(),t.Tk=this.Tk.G(),t.Fp=this.Fp,t.Gp=this.Gp,t.Rg=this.Rg,t.yn=this.yn,t.Zp=this.Zp,t.Mp=this.Mp,t.Vl=this.Vl,t.Wl=this.Wl.G(),t.Xl=this.Xl,t.oi=this.oi,null!==this.N&&(t.N=this.N.copy()),t.eb=this.eb,t.Xk=this.Xk,null!==this.ni&&(t.ni=b(this.ni)),null!==this.pd&&(t.pd=this.pd.copy()),t.Zl=this.Zl},Na.prototype.Rx=function(t){var e=this.ni;if(w(e)){for(var n=0;n<e.length;n++)if(e[n]===t)return}else this.ni=e=[];e.push(t)},Na.prototype.yf=function(t){t.tp=null,t.Yj=null,t.o()},Na.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),null!==this.ni)for(var e=0;e<this.ni.length;e++){var n=this.ni[e];t[n]=this[n]}return t},Na.prototype.copy=function(){return this.clone()},(Bp=Na.prototype).hb=function(t){t.classType===wl?0===t.name.indexOf("Orient")?this.segmentOrientation=t:O("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===Na&&(this.stretch=t)},Bp.toString=function(){return P(this.constructor)+"#"+Q(this)},Bp.Jc=function(){var t;null===this.O&&((t=new bd).ah=Ht,t.Ch=Ht,t.Zg=10,t.Ah=10,t.$g=0,t.Bh=0,this.O=t)},Bp.ab=function(t,e,n,i,o,r,a){var s,h,u=this.part;if(null!==u&&(u.Jk(t,e,n,i,o,r,a),n===this&&t===bn&&Ua(this)&&Ta(this,u,e),r=this.diagram,null===this.Mg||null===r||!r.oj||r.undoManager.isUndoingRedoing||r.currentTool!==r.toolManager||r.animationManager.sn||null!==(t=this.Mg.get(e))&&r.animationManager.isEnabled&&!r.animationManager.isTicking&&(null===this.Ip&&(this.Ip=new at),a=0===r.undoManager.transactionLevel,t.startCondition===So?a=!0:t.startCondition===xo&&(a=!1),a?(r=new uo,h=r,null!==(s=(s=t).Vk)&&(s.duration&&(h.duration=s.duration),s.finished&&(h.finished=s.finished),s.easing&&(h.easing=s.easing)),null!==(a=this.Ip.get(t))&&a.stop(),this.Ip.add(t,r),r.xv=this,r.Mx=t,r.add(this,e,i,o),r.start()):($i(r.animationManager,"Trigger"),r.animationManager.defaultAnimation.add(this,e,i,o))),this instanceof hh&&n===u&&0!=(16777216&u.F)&&null!==u.data))for(i=(n=this.W.j).length,o=0;o<i;o++)(u=n[o])instanceof hh&&fh(u,function(t){null!==t.data&&0!=(16777216&t.F)&&t.Ca(e)})},Bp.Ht=function(t){return this.Xk===t?this:null},Bp.g=function(t,e,n){this.ab(bn,t,this,e,n)},Bp.oy=function(t,e,n){if(!1===this.pickable)return!1;var i=this.naturalBounds;return e=t.Fe(e),n?dt(t.x,t.y,0,0,0,i.height)<=e||dt(t.x,t.y,0,i.height,i.width,i.height)<=e||dt(t.x,t.y,i.width,i.height,i.width,0)<=e||dt(t.x,t.y,i.width,0,0,0)<=e:t.kd(0,0)<=e&&t.kd(0,i.height)<=e&&t.kd(i.width,0)<=e&&t.kd(i.width,i.height)<=e},Bp.de=function(){return!0},Bp.aa=function(t){var e=ee.alloc();e.assign(t),this.transform.sa(e);var n=this.actualBounds;if(!n.u())return ee.free(e),!1;if(null!==(i=this.diagram)&&i.ne){var i,o=i.xm("extraTouchThreshold"),r=i.xm("extraTouchArea"),a=r/2,s=this.naturalBounds,h=1/(i=this.Af()*i.scale);if(s.width*i<o&&s.height*i<o)return t=Gt(n.x-a*h,n.y-a*h,n.width+r*h,n.height+r*h,e.x,e.y),ee.free(e),t}return o=!1,(this instanceof tl||this instanceof Oh?Gt(n.x-5,n.y-5,n.width+10,n.height+10,e.x,e.y):n.aa(e))&&(o=!(this.pd&&!this.pd.aa(e))&&(!(null===this.dc||!n.aa(e))||(!(null===this.kb||!this.qc.aa(t))||this.Kh(t)))),ee.free(e),o},Bp.Kh=function(t){var e=this.naturalBounds;return Gt(0,0,e.width,e.height,t.x,t.y)},Bp.De=function(t){if(0===this.angle)return this.actualBounds.De(t);var e=this.naturalBounds,e=ne.allocAt(0,0,e.width,e.height),n=this.transform,i=!1,o=ee.allocAt(t.x,t.y);return e.aa(n.Zd(o))&&(o.h(t.x,t.bottom),e.aa(n.Zd(o))&&(o.h(t.right,t.bottom),e.aa(n.Zd(o))&&(o.h(t.right,t.y),e.aa(n.Zd(o))&&(i=!0)))),ee.free(o),ne.free(e),i},Bp.Jh=function(t,e){if(void 0===e)return t.De(this.actualBounds);var n=this.naturalBounds,i=!1,o=ee.allocAt(0,0);return t.aa(e.sa(o))&&(o.h(0,n.height),t.aa(e.sa(o))&&(o.h(n.width,n.height),t.aa(e.sa(o))&&(o.h(n.width,0),t.aa(e.sa(o))&&(i=!0)))),ee.free(o),i},Bp.Lc=function(t,e){if(void 0===e&&(e=this.transform,0===this.angle))return t.Lc(this.actualBounds);var n,i=this.naturalBounds,o=ee.allocAt(0,0),r=ee.allocAt(0,i.height),a=ee.allocAt(i.width,i.height),s=ee.allocAt(i.width,0),h=!1;return t.aa(e.sa(o))||t.aa(e.sa(r))||t.aa(e.sa(a))||t.aa(e.sa(s))?h=!0:(i=ne.allocAt(0,0,i.width,i.height),n=ee.allocAt(t.x,t.y),i.aa(e.Zd(n))?h=!0:(n.h(t.x,t.bottom),i.aa(e.Zd(n))?h=!0:(n.h(t.right,t.bottom),i.aa(e.Zd(n))?h=!0:(n.h(t.right,t.y),i.aa(e.Zd(n))&&(h=!0)))),ee.free(n),ne.free(i),!h&&(Ue.Qt(t,o,r)||Ue.Qt(t,r,a)||Ue.Qt(t,a,s)||Ue.Qt(t,s,o))&&(h=!0)),ee.free(o),ee.free(r),ee.free(a),ee.free(s),h},Bp.ga=function(t,e){var n;return void 0===e&&(e=new ee),t instanceof Be?(n=this.naturalBounds,e.h(t.x*n.width+t.offsetX,t.y*n.height+t.offsetY)):e.set(t),this.Ad.sa(e),e},Bp.wm=function(t){void 0===t&&(t=new ne);var e=this.naturalBounds,n=this.Ad,i=ee.allocAt(0,0).transform(n);return t.h(i.x,i.y,0,0),i.h(e.width,0).transform(n),ie(t,i.x,i.y,0,0),i.h(e.width,e.height).transform(n),ie(t,i.x,i.y,0,0),i.h(0,e.height).transform(n),ie(t,i.x,i.y,0,0),ee.free(i),t},Bp.lj=function(){var t=this.Ad;return 1===t.m11&&0===t.m12?t=0:(t=180*Math.atan2(t.m12,t.m11)/Math.PI)<0&&(t+=360),t},Bp.Af=function(){if(0!=(4096&this.F)==!1)return this.jl;var t=this.ya;return null!==this.panel?t*this.panel.Af():t},Bp.Nt=function(t,e){return void 0===e&&(e=new ee),e.assign(t),this.Ad.Zd(e),e},Bp.bd=function(t,e,n){return this.vk(t.x,t.y,e.x,e.y,n)},Bp.vk=function(t,e,n,i,o){var r=this.transform,a=1/(r.m11*r.m22-r.m12*r.m21),s=r.m22*a,h=-r.m12*a,u=-r.m21*a,l=r.m11*a,d=a*(r.m21*r.dy-r.m22*r.dx),c=a*(r.m12*r.dx-r.m11*r.dy);return null!==this.areaBackground?(r=this.actualBounds,Ue.bd(r.left,r.top,r.right,r.bottom,t,e,n,i,o)):(a=t*s+e*u+d,t=t*h+e*l+c,e=n*s+i*u+d,n=n*h+i*l+c,o.h(0,0),i=this.naturalBounds,n=Ue.bd(0,0,i.width,i.height,a,t,e,n,o),o.transform(r),n)},Na.prototype.measure=function(t,e,n,i){if(!1!==Ka(this)){var o=(r=this.ih).right+r.left,r=r.top+r.bottom;t=Math.max(t-o,0),e=Math.max(e-r,0),n=Math.max((n||0)-o,0),i=Math.max((i||0)-r,0),o=this.angle,r=this.desiredSize;var a=0;this instanceof Oh&&(a=this.strokeWidth),e=90===o||270===o?(t=isFinite(r.height)?r.height+a:t,isFinite(r.width)?r.width+a:e):(t=isFinite(r.width)?r.width+a:t,isFinite(r.height)?r.height+a:e),r=n||0,a=i||0;var s=this instanceof hh;switch(za(this,!0)){case Or:a=r=0,s&&(e=t=1/0);break;case Fr:isFinite(t)&&n<t&&(r=t),isFinite(e)&&i<e&&(a=e);break;case jr:isFinite(t)&&n<t&&(r=t),a=0,s&&(e=1/0);break;case zr:isFinite(e)&&i<e&&(a=e),r=0,s&&(t=1/0)}s=this.maxSize;var h=this.minSize;r>s.width&&h.width<s.width&&(r=s.width),a>s.height&&h.height<s.height&&(a=s.height),n=Math.max(r/this.scale,h.width),i=Math.max(a/this.scale,h.height),s.width<n&&(n=Math.min(h.width,n)),s.height<i&&(i=Math.min(h.height,i)),t=Math.min(s.width,t),e=Math.min(s.height,e),t=Math.max(n,t),e=Math.max(i,e),90!==o&&270!==o||(o=t,t=e,e=o,o=n,n=i,i=o),this.pc.ea(),this.Dm(t,e,n,i),this.pc.freeze(),this.pc.u()||O("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.pc.toString()),Xa(this,!1)}},Na.prototype.Dm=function(){},Na.prototype.Ef=function(){return!1},Na.prototype.arrange=function(t,e,n,i,o){this.zl();var r=ne.alloc();r.assign(this.xb),this.xb.ea(),!1===Wa(this)?this.xb.h(t,e,n,i):this.Ih(t,e,n,i),this.xb.freeze(),this.pd=void 0===o?null:o,n=!1,void 0!==o?n=!0:(null===(o=this.panel)||o.type!==hh.TableRow&&o.type!==hh.TableColumn||(o=o.panel),null!==o&&(o=o.qc,i=this.measuredBounds,null!==this.areaBackground&&(i=this.xb),n=e+i.height,i=t+i.width,n=!(0<=t+.05&&i<=o.width+.05&&0<=e+.05&&n<=o.height+.05),this instanceof Hh&&(t=this.naturalBounds,this.ws>t.height||this.sb>t.width))&&(n=!0)),this.F=n?256|this.F:-257&this.F,this.xb.u()||O("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.xb.toString()),this.cu(r,this.xb),$a(this,!1),ne.free(r)},(Bp=Na.prototype).Ih=function(){},Bp.cu=function(t,e){var n=this.part;null!==n&&null!==n.diagram&&(n.selectionObject!==this&&n.resizeObject!==this&&n.rotateObject!==this||Xu(n,!0),this.M(),Et(t,e)||(n.Oh(),this.ip(n)))},Bp.ip=function(t){null!==this.portId&&(Xu(t,!0),t instanceof el&&ol(t,this))},Bp.bc=function(t,e){if(this.visible){var n=this instanceof hh&&(this.type===hh.TableRow||this.type===hh.TableColumn),i=this.xb;if(n||0!==i.width&&0!==i.height&&!isNaN(i.x)&&!isNaN(i.y)){var o=this.opacity;if(0!==o){var r=1;if(1!==o&&(r=t.globalAlpha,t.globalAlpha=r*o),!this.iy(t,e))if(n)Fa(this,t,e);else{this instanceof wl&&this.Bk(!1),n=this.transform;var a=this.panel;0!=(4096&this.F)==!0&&Ba(this);var s,h,u,l,d,c,g,f,p,m,y,v,w,b,S,x=this.part,P=!1,k=0;if(x&&e.Ge("drawShadows")&&(P=x.isShadowed)&&(h=x.shadowOffset,k=Math.max(h.y,h.x)*e.scale*e.Sb),(h=e.xi||!this.Ef())||(s=this.naturalBounds,u=(h=this.Zh).m11,l=h.m21,d=h.dx,c=h.m12,g=h.m22,f=h.dy,h=(y=m=0)*u+0*l+d,p=0*c+0*g+f,y=0,v=(m=s.width+k)*u+0*l+d,m=m*c+0*g+f,y=Math.min(h,v),w=Math.min(p,m),b=Math.max(h+0,v)-y,S=Math.max(p+0,m)-w,h=y,p=w,v=(m=s.width+k)*u+(y=s.height+k)*l+d,m=m*c+y*g+f,y=Math.min(h,v),w=Math.min(p,m),b=Math.max(h+b,v)-y,S=Math.max(p+S,m)-w,h=y,p=w,v=(m=0)*u+(y=s.height+k)*l+d,m=0*c+y*g+f,y=Math.min(h,v),w=Math.min(p,m),b=Math.max(h+b,v)-y,S=Math.max(p+S,m)-w,h=y,p=w,s=(k=e.viewportBounds).x,u=k.y,h=!(h>k.width+s||b+h<s||p>k.height+u||S+p<u)),h){if(h=0!=(256&this.F),t.clipInsteadOfFill&&(h=!1),this instanceof Hh&&(t.font=this.font),h){if(p=a.de()?a.naturalBounds:a.actualBounds,s=null!==this.pd?(b=(s=this.pd).x,S=s.y,k=s.width,s.height):(b=Math.max(i.x,p.x),S=Math.max(i.y,p.y),k=Math.min(i.right,p.right)-b,Math.min(i.bottom,p.bottom)-S),b>i.width+i.x||i.x>p.width+p.x)return void(1!==o&&(t.globalAlpha=r));t.save(),t.beginPath(),t.rect(b,S,k,s),t.clip()}if(this.Ef()){if(!x.isVisible())return void(1!==o&&(t.globalAlpha=r));P&&(p=x.shadowOffset,t.Hw(p.x*e.scale*e.Sb,p.y*e.scale*e.Sb,x.shadowBlur),gs(t),t.shadowColor=x.shadowColor)}!0===this.shadowVisible?gs(t):!1===this.shadowVisible&&cs(t),x=this.naturalBounds,null!==this.dc&&(Oa(this,t,this.dc,!0,!0,x,i),this.dc instanceof vs&&this.dc.type===Fs?(t.beginPath(),t.rect(i.x,i.y,i.width,i.height),t.Yd(this.dc)):t.fillRect(i.x,i.y,i.width,i.height)),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),P&&(null!==a&&0!=(512&a.F)||null!==a&&(a.type===hh.Auto||a.type===hh.Spot)&&a.pb()!==this)&&null===this.shadowVisible&&cs(t),null!==this.kb&&(b=p=0,S=(k=this.naturalBounds).width,k=k.height,s=0,this instanceof Oh&&(p=(k=this.na.bounds).x,b=k.y,S=k.width,k=k.height,s=this.strokeWidth),Oa(this,t,this.kb,!0,!1,x,i),this.kb instanceof vs&&this.kb.type===Fs?(t.beginPath(),t.rect(p-s/2,b-s/2,S+s,k+s),t.Yd(this.kb)):t.fillRect(p-s/2,b-s/2,S+s,k+s)),P&&(null!==this.kb||null!==this.dc||null!==a&&0!=(512&a.F)||null!==a&&(a.type===hh.Auto||a.type===hh.Spot)&&a.pb()!==this)?(Va(this,!0),null===this.shadowVisible&&cs(t)):Va(this,!1),this.ej(t,e),P&&0!=(512&this.F)==!0&&gs(t),this.Ef()&&P&&cs(t),h?(t.restore(),this instanceof hh?t.tc(!0):t.tc(!1)):n.Tt()||(e=1/(n.m11*n.m22-n.m12*n.m21),t.transform(n.m22*e,-n.m12*e,-n.m21*e,n.m11*e,e*(n.m21*n.dy-n.m22*n.dx),e*(n.m12*n.dx-n.m11*n.dy)))}}1!==o&&(t.globalAlpha=r)}}}},Bp.iy=function(){return!1},Bp.ej=function(){},Bp.Gg=function(t){if(t instanceof hh)t:{if(this!==t&&null!==t)for(var e=this.panel;null!==e;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},Bp.Ff=function(){if(!this.visible)return!1;var t=this.panel;return null===t||t.Ff()},Bp.Hg=function(){for(var t=this instanceof hh?this:this.panel;null!==t&&t.isEnabled;)t=t.panel;return null===t},Bp.o=function(t){var e;void 0===t&&(t=!1),!0!==Ka(this)&&(Xa(this,!0),$a(this,!0),null===(e=this.panel)||t||e.o())},Bp.zm=function(){!0!==Ka(this)&&(Xa(this,!0),$a(this,!0))},Bp.zl=function(){0!=(2048&this.F)==!1&&(Ha(this,!0),Ya(this,!0))},Bp.cw=function(){Ya(this,!0)},Bp.M=function(){var t=this.part;null!==t&&t.M()},Bp.rj=function(t){this.og=t},Bp.lu=function(){},Bp.Dw=function(t){return this.la.assign(t),ja(this),!0},Bp.fr=function(t,e){this.la.x===t&&this.la.y===e||(this.la.h(t,e),this.zl())},Bp.bind=function(t){var e=(t.jd=this).ij();null!==e&&bh(e)&&O("Cannot add a Binding to a template that has already been copied: "+t),null===this.eb&&(this.eb=new X),this.eb.add(t)},Bp.ij=function(){for(var t=this instanceof hh?this:this.panel;null!==t;){if(null!==t.li)return t;t=t.panel}return null},Bp.Ew=function(t){nr(this,t)},s.Object.defineProperties(Na.prototype,{shadowVisible:{get:function(){return this.Zl},set:function(t){var e=this.Zl;e!==t&&(this.Zl=t,this.M(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return null!==this.N?this.N.Vn:null},set:function(t){Aa(this);var e=this.N.Vn;e!==t&&(this.N.Vn=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return this.Xl},set:function(t){var e=this.Xl;e!==t&&(this.Xl=t,this.o(),this.g("segmentOrientation",e,t),t===zl&&(this.angle=0))}},segmentIndex:{get:function(){return this.Mp},set:function(t){t=Math.round(t);var e=this.Mp;e!==t&&(this.Mp=t,this.o(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return this.Vl},set:function(t){isNaN(t)||t<0?t=0:1<t&&(t=1);var e=this.Vl;e!==t&&(this.Vl=t,this.o(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return this.Wl},set:function(t){var e=this.Wl;e.w(t)||(this.Wl=t=t.G(),this.o(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return this.ze},set:function(t){var e=this.ze;e!==t&&(this.ze=t,this.o(),this.g("stretch",e,t))}},name:{get:function(){return this.Qa},set:function(t){var e=this.Qa;e!==t&&(this.Qa=t,null!==this.part&&(this.part.Uj=null),this.g("name",e,t))}},opacity:{get:function(){return this.tb},set:function(t){var e=this.tb;e!==t&&((t<0||1<t)&&f(t,"0 <= value <= 1",Na,"opacity"),this.tb=t,this.g("opacity",e,t),t=this.diagram,e=this.part,null!==t&&null!==e&&t.M(zu(e,e.actualBounds)))}},visible:{get:function(){return 0!=(1&this.F)},set:function(t){var e=0!=(1&this.F);e!==t&&(this.F^=1,this.g("visible",e,t),null!==(e=this.panel)?e.o():this.Ef()&&this.Ob(t),this.M(),Za(this))}},pickable:{get:function(){return 0!=(2&this.F)},set:function(t){var e=0!=(2&this.F);e!==t&&(this.F^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return 0!=(4&this.F)},set:function(t){var e=0!=(4&this.F);e!==t&&(this.F^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return 0!=(8&this.F)},set:function(t){var e=0!=(8&this.F);e!==t&&(this.F^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return 0!=(16&this.F)},set:function(t){var e=0!=(16&this.F);e!==t&&(this.F^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return 0!=(32&this.F)},set:function(t){var e=0!=(32&this.F);e!==t&&(this.F^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return 0!=(64&this.F)},set:function(t){var e=0!=(64&this.F);e!==t&&(this.F^=64,this.o(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return 0!=(128&this.F)},set:function(t){var e=0!=(128&this.F);e!==t&&(this.F^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return this.dc},set:function(t){var e=this.dc;e!==t&&(null!==t&&Ts(t,"GraphObject.areaBackground"),t instanceof vs&&t.freeze(),this.dc=t,this.M(),this.g("areaBackground",e,t))}},background:{get:function(){return this.kb},set:function(t){var e=this.kb;e!==t&&(null!==t&&Ts(t,"GraphObject.background"),t instanceof vs&&t.freeze(),this.kb=t,this.M(),this.g("background",e,t))}},part:{get:function(){if(this.Ef())return this;if(null!==this.Yj)return this.Yj;for(var t=this.panel;t;){if(t instanceof Ou)return this.Yj=t;t=t.panel}return null}},svg:{get:function(){return this.eq},set:function(t){this.eq=t}},panel:{get:function(){return this.og}},layer:{get:function(){var t=this.part;return null!==t?t.layer:null}},diagram:{get:function(){var t=this.part;return null!==t?t.diagram:null}},position:{get:function(){return this.la},set:function(t){var e=t.x,n=t.y,i=this.la,o=i.x,r=i.y;(o===e||isNaN(o)&&isNaN(e))&&(r===n||isNaN(r)&&isNaN(n))?this.lu():(t=t.copy(),this.Dw(t,i)&&this.g("position",i.copy(),t.copy()))}},actualBounds:{get:function(){return this.xb}},scale:{get:function(){return this.ya},set:function(t){var e=this.ya;e!==t&&(t<=0&&O("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.ya=t,this.o(),this.g("scale",e,t))}},angle:{get:function(){return this.Yb},set:function(t){var e=this.Yb;e!==t&&((t%=360)<0&&(t+=360),e!==t&&(this.Yb=t,Za(this),this.o(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.Uc},set:function(t){var e=t.width,n=t.height,i=this.Uc,o=i.width,r=i.height;(o===e||isNaN(o)&&isNaN(e))&&(r===n||isNaN(r)&&isNaN(n))||(this.Uc=t=t.G(),this.o(),this instanceof Oh&&this.cc(),this.g("desiredSize",i,t),!Ua(this)||null!==(t=this.part)&&(Ta(this,t,"width"),Ta(this,t,"height")))}},width:{get:function(){return this.Uc.width},set:function(t){var e=this.Uc.width;e===t||isNaN(e)&&isNaN(t)||(e=this.Uc,this.Uc=t=new xe(t,this.Uc.height).freeze(),this.o(),this instanceof Oh&&this.cc(),this.g("desiredSize",e,t),!Ua(this)||null!==(t=this.part)&&Ta(this,t,"width"))}},height:{get:function(){return this.Uc.height},set:function(t){var e=this.Uc.height;e===t||isNaN(e)&&isNaN(t)||(e=this.Uc,this.Uc=t=new xe(this.Uc.width,t).freeze(),this.o(),this instanceof Oh&&this.cc(),this.g("desiredSize",e,t),!Ua(this)||null!==(t=this.part)&&Ta(this,t,"height"))}},minSize:{get:function(){return this.fg},set:function(t){var e=this.fg;e.w(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),this.fg=t,this.o(),this.g("minSize",e,t))}},maxSize:{get:function(){return this.eg},set:function(t){var e=this.eg;e.w(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),this.eg=t,this.o(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.pc}},naturalBounds:{get:function(){return this.qc}},margin:{get:function(){return this.ih},set:function(t){"number"==typeof t&&(t=new Vt(t));var e=this.ih;e.w(t)||(this.ih=t=t.G(),this.o(),this.g("margin",e,t))}},transform:{get:function(){return 0!=(2048&this.F)==!0&&Ba(this),this.ob}},Ad:{get:function(){return 0!=(4096&this.F)==!0&&Ba(this),this.Zh}},alignment:{get:function(){return this.yb},set:function(t){var e=this.yb;e.w(t)||(t.mc()&&!t.Mb()&&O("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.yb=t=t.G(),ja(this),this.g("alignment",e,t))}},column:{get:function(){return this.Rg},set:function(t){t=Math.round(t);var e=this.Rg;e!==t&&(t<0&&f(t,">= 0",Na,"column"),this.Rg=t,this.o(),this.g("column",e,t))}},columnSpan:{get:function(){return this.yn},set:function(t){t=Math.round(t);var e=this.yn;e!==t&&(t<1&&f(t,">= 1",Na,"columnSpan"),this.yn=t,this.o(),this.g("columnSpan",e,t))}},row:{get:function(){return this.Fp},set:function(t){t=Math.round(t);var e=this.Fp;e!==t&&(t<0&&f(t,">= 0",Na,"row"),this.Fp=t,this.o(),this.g("row",e,t))}},rowSpan:{get:function(){return this.Gp},set:function(t){t=Math.round(t);var e=this.Gp;e!==t&&(t<1&&f(t,">= 1",Na,"rowSpan"),this.Gp=t,this.o(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return this.Zp},set:function(t){var e=this.Zp;e!==t&&(this.Zp=t,this.o(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.Tk},set:function(t){var e=this.Tk;e.w(t)||(this.Tk=t=t.G(),this.o(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.sp},set:function(t){var e,n=this.sp;n!==t&&(null===(e=this.part)||e instanceof el||(O("Cannot set portID on a Link: "+t),e=null),null!==n&&null!==e&&dl(e,this),null!==(this.sp=t)&&null!==e&&(e.Nh=!0,ll(e,this)),this.g("portId",n,t))}},toSpot:{get:function(){return null!==this.O?this.O.Ch:Ht},set:function(t){this.Jc();var e=this.O.Ch;e.w(t)||(t=t.G(),this.O.Ch=t,this.g("toSpot",e,t),Ja(this))}},toEndSegmentLength:{get:function(){return null!==this.O?this.O.Ah:10},set:function(t){this.Jc();var e=this.O.Ah;e!==t&&(t<0&&f(t,">= 0",Na,"toEndSegmentLength"),this.O.Ah=t,this.g("toEndSegmentLength",e,t),Ja(this))}},toShortLength:{get:function(){return null!==this.O?this.O.Bh:0},set:function(t){this.Jc();var e=this.O.Bh;e!==t&&(this.O.Bh=t,this.g("toShortLength",e,t),Ja(this))}},toLinkable:{get:function(){return null!==this.O?this.O.iq:null},set:function(t){this.Jc();var e=this.O.iq;e!==t&&(this.O.iq=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return null!==this.O?this.O.jq:1/0},set:function(t){this.Jc();var e=this.O.jq;e!==t&&(t<0&&f(t,">= 0",Na,"toMaxLinks"),this.O.jq=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return null!==this.O?this.O.ah:Ht},set:function(t){this.Jc();var e=this.O.ah;e.w(t)||(t=t.G(),this.O.ah=t,this.g("fromSpot",e,t),Ja(this))}},fromEndSegmentLength:{get:function(){return null!==this.O?this.O.Zg:10},set:function(t){this.Jc();var e=this.O.Zg;e!==t&&(t<0&&f(t,">= 0",Na,"fromEndSegmentLength"),this.O.Zg=t,this.g("fromEndSegmentLength",e,t),Ja(this))}},fromShortLength:{get:function(){return null!==this.O?this.O.$g:0},set:function(t){this.Jc();var e=this.O.$g;e!==t&&(this.O.$g=t,this.g("fromShortLength",e,t),Ja(this))}},fromLinkable:{get:function(){return null!==this.O?this.O.bo:null},set:function(t){this.Jc();var e=this.O.bo;e!==t&&(this.O.bo=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return null!==this.O?this.O.co:1/0},set:function(t){this.Jc();var e=this.O.co;e!==t&&(t<0&&f(t,">= 0",Na,"fromMaxLinks"),this.O.co=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return this.oi},set:function(t){var e=this.oi;e!==t&&(this.oi=t,this.g("cursor",e,t))}},click:{get:function(){return null!==this.N?this.N.Of:null},set:function(t){Aa(this);var e=this.N.Of;e!==t&&(this.N.Of=t,this.g("click",e,t))}},doubleClick:{get:function(){return null!==this.N?this.N.Tf:null},set:function(t){Aa(this);var e=this.N.Tf;e!==t&&(this.N.Tf=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return null!==this.N?this.N.Pf:null},set:function(t){Aa(this);var e=this.N.Pf;e!==t&&(this.N.Pf=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return null!==this.N?this.N.hg:null},set:function(t){Aa(this);var e=this.N.hg;e!==t&&(this.N.hg=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return null!==this.N?this.N.kg:null},set:function(t){Aa(this);var e=this.N.kg;e!==t&&(this.N.kg=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return null!==this.N?this.N.lg:null},set:function(t){Aa(this);var e=this.N.lg;e!==t&&(this.N.lg=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return null!==this.N?this.N.jg:null},set:function(t){Aa(this);var e=this.N.jg;e!==t&&(this.N.jg=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return null!==this.N?this.N.ig:null},set:function(t){Aa(this);var e=this.N.ig;e!==t&&(this.N.ig=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return null!==this.N?this.N.Wo:null},set:function(t){Aa(this);var e=this.N.Wo;e!==t&&(this.N.Wo=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return null!==this.N?this.N.Xo:null},set:function(t){Aa(this);var e=this.N.Xo;e!==t&&(this.N.Xo=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return null!==this.N?this.N.gg:null},set:function(t){Aa(this);var e=this.N.gg;e!==t&&(this.N.gg=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return null!==this.N?this.N.en:null},set:function(t){Aa(this);var e=this.N.en;e!==t&&(this.N.en=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return null!==this.N?this.N.fn:null},set:function(t){Aa(this);var e=this.N.fn;e!==t&&(this.N.fn=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return null!==this.N?this.N.gn:null},set:function(t){Aa(this);var e=this.N.gn;e!==t&&(this.N.gn=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return null!==this.N?this.N.dn:null},set:function(t){Aa(this);var e=this.N.dn;e!==t&&(this.N.dn=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return null!==this.N?this.N.wg:null},set:function(t){Aa(this);var e=this.N.wg;e!==t&&(this.N.wg=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return null!==this.N?this.N.Qf:null},set:function(t){Aa(this);var e=this.N.Qf;e!==t&&(this.N.Qf=t,this.g("contextMenu",e,t))}}}),Na.prototype.setProperties=Na.prototype.Ew,Na.prototype.findTemplateBinder=Na.prototype.ij,Na.prototype.isEnabledObject=Na.prototype.Hg,Na.prototype.isVisibleObject=Na.prototype.Ff,Na.prototype.isContainedBy=Na.prototype.Gg,Na.prototype.getNearestIntersectionPoint=Na.prototype.bd,Na.prototype.getLocalPoint=Na.prototype.Nt,Na.prototype.getDocumentScale=Na.prototype.Af,Na.prototype.getDocumentAngle=Na.prototype.lj,Na.prototype.getDocumentBounds=Na.prototype.wm,Na.prototype.getDocumentPoint=Na.prototype.ga,Na.prototype.intersectsRect=Na.prototype.Lc,Na.prototype.containedInRect=Na.prototype.Jh,Na.prototype.containsRect=Na.prototype.De,Na.prototype.containsPoint=Na.prototype.aa,Na.prototype.raiseChanged=Na.prototype.g,Na.prototype.raiseChangedEvent=Na.prototype.ab,Na.prototype.addCopyProperty=Na.prototype.Rx;var is=null;function os(){this.Vn=this.Qf=this.wg=this.dn=this.gn=this.fn=this.en=this.gg=this.Xo=this.Wo=this.ig=this.jg=this.lg=this.kg=this.hg=this.Pf=this.Tf=this.Of=null}function rs(){this.Ma=[1,0,0,1,0,0]}function as(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.Zx=[],this.pattern=null}function ss(t,e){this.ownerDocument=t=void 0===e?d.document:e,this.HA="http://www.w3.org/2000/svg",void 0!==t&&(this.Ga=this.wb("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.Ga.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Ga.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.Bq=null,this.context=new hs(this)}function hs(t){this.Mk=t,this.svg=t.Ga,this.stack=[],this.zc=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.jf=this.Vp=this.Up=0,this.Oq=null,this.path=[],this.Uu=!1,this.vh=null,this.wh=0,this.Xd=new rs,ds(this,1,0,0,1,0,0);var e=tt++,n=this.wb("clipPath",{id:"mainClip"+e});n.appendChild(this.wb("rect",{x:0,y:0,width:t.width,height:t.height})),this.cv=n,this.Mk.Ga.appendChild(n),this.zc[0].setAttributeNS(null,"clip-path","url(#mainClip"+e+")"),this.JA={}}function us(t,e,n,i,o){1!==t.globalAlpha&&(n.opacity=t.globalAlpha),"fill"===e?(t.fillStyle instanceof as?n.fill=ls(t,t.fillStyle):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),n.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",n["fill-opacity"]=t[4]):n.fill=t.fillStyle,n.stroke="none"):"stroke"===e&&(n.fill="none",t.strokeStyle instanceof as?n.stroke=ls(t,t.strokeStyle):/^rgba\(/.test(t.strokeStyle)?(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),n.stroke="rgb("+e[1]+","+e[2]+","+e[3]+")",n["stroke-opacity"]=e[4]):n.stroke=t.strokeStyle,n["stroke-width"]=t.lineWidth,n["stroke-linecap"]=t.lineCap,n["stroke-linejoin"]=t.lineJoin,n["stroke-miterlimit"]=t.miterLimit),i="matrix("+(i=i.Ma)[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+")",void 0!==o&&(i+=o),n.transform=i}function ls(t,e){var n="GRAD"+tt++;if("linear"===e.type)var i=t.wb("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:n,gradientUnits:"userSpaceOnUse"});else{if("radial"!==e.type)throw Error("invalid gradient");i=t.wb("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:n})}var o=e.Zx;e=o.length;for(var r=[],a=0;a<e;a++){var s=(h=o[a]).color,h={offset:h.offset,"stop-color":s};/^rgba\(/.test(s)&&(s=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(s),h["stop-color"]="rgb("+s[1]+","+s[2]+","+s[3]+")",h["stop-opacity"]=s[4]),r.push(h)}for(r.sort(function(t,e){return t.offset>e.offset?1:-1}),o=0;o<e;o++)i.appendChild(t.wb("stop",r[o]));return t.svg.appendChild(i),"url(#"+n+")"}function ds(t,e,n,i,o,r,a){var s=new rs;s.Ma=[e,n,i,o,r,a],us(t,"g",e={},s),s=t.addElement("g",e),t.zc.push(s)}function cs(t){t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function gs(t){t.shadowOffsetX=t.Up,t.shadowOffsetY=t.Vp,t.shadowBlur=t.jf}function fs(t,e){this.ownerDocument=e=void 0===e?d.document:e,this.Bq=null,(e=e.createElement("canvas")).tabIndex=0,this.Ga=e,this.Ga.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",this.context=new ps(e),e.B=t}function ps(t){t.getContext&&t.getContext("2d")||O("Browser does not support HTML Canvas Element"),this.Y=t.getContext("2d"),this.wu=this.yu=this.xu="",this.xn=!1,this.jf=this.Vp=this.Up=0}Na.className="GraphObject",is=new at,es("Button",function(){function r(t,e){return null!==t.diagram.Ub(t.documentPoint,function(t){for(;null!==t.panel&&!t.isActionable;)t=t.panel;return t},function(t){return t===e})}var t=ts(hh,hh.Auto,{isActionable:!0,enabledChanged:function(t,e){var n;t instanceof hh&&(null!==(n=t.$a("ButtonBorder"))&&(n.fill=e?t._buttonFillNormal:t._buttonFillDisabled))},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},ts(Oh,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new Be(0,0,2.76142374915397,2.761423749153969),spot2:new Be(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return t.mouseEnter=function(t,e){var n;e.Hg()&&e instanceof hh&&(t=e.$a("ButtonBorder"))instanceof Oh&&(n=e._buttonFillOver,e._buttonFillNormal=t.fill,t.fill=n,n=e._buttonStrokeOver,e._buttonStrokeNormal=t.stroke,t.stroke=n)},t.mouseLeave=function(t,e){e.Hg()&&e instanceof hh&&((t=e.$a("ButtonBorder"))instanceof Oh&&(t.fill=e._buttonFillNormal,t.stroke=e._buttonStrokeNormal))},t.actionDown=function(t,e){var n,i,o;e.Hg()&&e instanceof hh&&null!==e._buttonFillPressed&&0===t.button&&((n=e.$a("ButtonBorder"))instanceof Oh&&(i=(t=t.diagram).skipsUndoManager,t.skipsUndoManager=!0,o=e._buttonFillPressed,e._buttonFillOver=n.fill,n.fill=o,o=e._buttonStrokePressed,e._buttonStrokeOver=n.stroke,n.stroke=o,t.skipsUndoManager=i))},t.actionUp=function(t,e){var n,i,o;e.Hg()&&e instanceof hh&&null!==e._buttonFillPressed&&0===t.button&&((n=e.$a("ButtonBorder"))instanceof Oh&&(o=(i=t.diagram).skipsUndoManager,i.skipsUndoManager=!0,r(t,e)?(n.fill=e._buttonFillOver,n.stroke=e._buttonStrokeOver):(n.fill=e._buttonFillNormal,n.stroke=e._buttonStrokeNormal),i.skipsUndoManager=o))},t.actionCancel=function(t,e){var n,i,o;e.Hg()&&e instanceof hh&&null!==e._buttonFillPressed&&((n=e.$a("ButtonBorder"))instanceof Oh&&(o=(i=t.diagram).skipsUndoManager,i.skipsUndoManager=!0,r(t,e)?(n.fill=e._buttonFillOver,n.stroke=e._buttonStrokeOver):(n.fill=e._buttonFillNormal,n.stroke=e._buttonStrokeNormal),i.skipsUndoManager=o))},t.actionMove=function(t,e){var n,i,o;e.Hg()&&e instanceof hh&&null!==e._buttonFillPressed&&(0===(n=t.diagram).firstInput.button&&(n.currentTool.standardMouseOver(),r(t,e)&&(t=e.$a("ButtonBorder"))instanceof Oh)&&(i=n.skipsUndoManager,n.skipsUndoManager=!0,o=e._buttonFillPressed,t.fill!==o&&(t.fill=o),o=e._buttonStrokePressed,t.stroke!==o&&(t.stroke=o),n.skipsUndoManager=i))},t}),es("TreeExpanderButton",function(){var t=ts("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},ts(Oh,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:yt},new Uc("figure","isTreeExpanded",function(t,e){return e=e.panel,t?e._treeExpandedFigure:e._treeCollapsedFigure}).Uq()),{visible:!1},new Uc("visible","isTreeLeaf",function(t){return!t}).Uq());return t.click=function(t,e){if((e=e.part)instanceof tl&&(e=e.adornedPart),e instanceof el){var n=e.diagram;if(null!==n){if(n=n.commandHandler,e.isTreeExpanded){if(!n.canCollapseTree(e))return}else if(!n.canExpandTree(e))return;t.handled=!0,e.isTreeExpanded?n.collapseTree(e):n.expandTree(e)}}},t}),es("SubGraphExpanderButton",function(){var t=ts("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},ts(Oh,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:yt},new Uc("figure","isSubGraphExpanded",function(t,e){return e=e.panel,t?e._subGraphExpandedFigure:e._subGraphCollapsedFigure}).Uq()));return t.click=function(t,e){if((e=e.part)instanceof tl&&(e=e.adornedPart),e instanceof pl){var n=e.diagram;if(null!==n){if(n=n.commandHandler,e.isSubGraphExpanded){if(!n.canCollapseSubGraph(e))return}else if(!n.canExpandSubGraph(e))return;t.handled=!0,e.isSubGraphExpanded?n.collapseSubGraph(e):n.expandSubGraph(e)}}},t}),es("ToolTip",function(){return ts(tl,hh.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new ee(0,3),shadowBlur:5},ts(Oh,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new Be(0,0,4,6),spot2:new Be(1,1,-4,-4)}))}),es("ContextMenu",function(){return ts(tl,hh.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new ee(0,3),shadowBlur:5},new Uc("background","",function(t){return null!==t.adornedPart&&null!==t.placeholder?null:"#F5F5F5"}))}),es("ContextMenuButton",function(){var t=ts("Button");t.stretch=jr;var e=t.$a("ButtonBorder");return e instanceof Oh&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new Be(0,0,2,3),e.spot2=new Be(1,1,-2,-2)),t}),es("PanelExpanderButton",function(t){var o=ns(t,"COLLAPSIBLE"),e=ts("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},ts(Oh,{name:"ButtonIcon",strokeWidth:2},new Uc("geometryString","visible",function(t){return t?e._buttonExpandedFigure:e._buttonCollapsedFigure}).Uq(o)));return(t=e.$a("ButtonBorder"))instanceof Oh&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),e.click=function(t,e){var n,i=e.diagram;null===i||i.isReadOnly||(null===(n=e.ij())&&(n=e.part),null===n||null!==(e=n.$a(o))&&(t.handled=!0,i.va("Collapse/Expand Panel"),e.visible=!e.visible,i.Wa("Collapse/Expand Panel")))},e}),es("CheckBoxButton",function(t){var o=ns(t);return(t=ts("Button",{desiredSize:new xe(14,14)},ts(Oh,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:Fr,geometryStretch:Br,visible:!1},""!==o?new Uc("visible",o).Fy():[]))).click=function(t,e){var n,i;e instanceof hh&&(null===(n=t.diagram)||n.isReadOnly||""!==o&&n.model.isReadOnly||(t.handled=!0,i=e.$a("ButtonIcon"),n.va("checkbox"),i.visible=!i.visible,"function"==typeof e._doClick&&e._doClick(t,e),n.Wa("checkbox")))},t}),es("CheckBox",function(t){t=ts("CheckBoxButton",t=ns(t),{name:"Button",isActionable:!1,margin:new Vt(0,1,0,0)});var e=ts(hh,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e}),Na.None=Or=new j(Na,"None",0),Na.Default=Gr=new j(Na,"Default",0),Na.Vertical=zr=new j(Na,"Vertical",4),Na.Horizontal=jr=new j(Na,"Horizontal",5),Na.Fill=Fr=new j(Na,"Fill",3),Na.Uniform=Br=new j(Na,"Uniform",1),Na.UniformToFill=Rr=new j(Na,"UniformToFill",2),Na.FlipVertical=Ir=new j(Na,"FlipVertical",1),Na.FlipHorizontal=Vr=new j(Na,"FlipHorizontal",2),Na.FlipBoth=Ur=new j(Na,"FlipBoth",3),Na.make=ts,Na.getBuilders=function(){var t,e,n=new at;for(t in is)t===t.toLowerCase()||"function"==typeof(e=is.H(t))&&n.add(t,e);return n.freeze(),n},Na.defineBuilder=es,Na.takeBuilderArgument=ns,os.prototype.copy=function(){var t=new os;return t.Of=this.Of,t.Tf=this.Tf,t.Pf=this.Pf,t.hg=this.hg,t.kg=this.kg,t.lg=this.lg,t.jg=this.jg,t.ig=this.ig,t.Wo=this.Wo,t.Xo=this.Xo,t.gg=this.gg,t.en=this.en,t.fn=this.fn,t.gn=this.gn,t.dn=this.dn,t.wg=this.wg,t.Qf=this.Qf,t.Vn=this.Vn,t},os.className="GraphObjectEventHandlers",rs.prototype.copy=function(){var t=new rs;return t.Ma[0]=this.Ma[0],t.Ma[1]=this.Ma[1],t.Ma[2]=this.Ma[2],t.Ma[3]=this.Ma[3],t.Ma[4]=this.Ma[4],t.Ma[5]=this.Ma[5],t},rs.prototype.translate=function(t,e){this.Ma[4]+=this.Ma[0]*t+this.Ma[2]*e,this.Ma[5]+=this.Ma[1]*t+this.Ma[3]*e},rs.prototype.scale=function(t,e){this.Ma[0]*=t,this.Ma[1]*=t,this.Ma[2]*=e,this.Ma[3]*=e},rs.className="STransform",as.prototype.addColorStop=function(t,e){this.Zx.push({offset:t,color:e})},as.className="SGradient",ss.prototype.resize=function(t,e,n,i){return(this.width!==t||this.height!==e)&&(this.style.width=n+"px",this.style.height=i+"px",this.Ga.setAttributeNS(null,"width",n+"px"),this.Ga.setAttributeNS(null,"height",i+"px"),this.Ga.setAttributeNS(null,"viewBox","0 0 "+n+" "+i),this.context.cv.firstElementChild.setAttributeNS(null,"width",n+"px"),this.context.cv.firstElementChild.setAttributeNS(null,"height",i+"px"),!0)},ss.prototype.wb=function(t,e,n){if(t=this.ownerDocument.createElementNS(this.HA,t),y(e))for(var i in e)t.setAttributeNS("href"===i?"http://www.w3.org/1999/xlink":"",i,e[i]);return void 0!==n&&(t.textContent=n),t},ss.prototype.getBoundingClientRect=function(){return this.Ga.getBoundingClientRect()},ss.prototype.focus=function(){this.Ga.focus()},ss.prototype.hy=function(){this.ownerDocument=null},s.Object.defineProperties(ss.prototype,{width:{get:function(){return this.Ga.width.baseVal.value},set:function(t){this.Ga.width=t}},height:{get:function(){return this.Ga.height.baseVal.value},set:function(t){this.Ga.height=t}},style:{get:function(){return this.Ga.style}}}),ss.className="SVGSurface",(Bp=hs.prototype).reset=function(){this.stack=[],this.zc=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.jf=this.Vp=this.Up=0,this.Oq=null,this.path=[],this.Xd=new rs,ds(this,1,0,0,1,0,0);var t=tt++,e=this.wb("clipPath",{id:"mainClip"+t});e.appendChild(this.wb("rect",{x:0,y:0,width:this.Mk.width,height:this.Mk.height})),this.cv=e,this.Mk.Ga.appendChild(e),this.zc[0].setAttributeNS(null,"clip-path","url(#mainClip"+t+")")},Bp.arc=function(t,e,n,i,o,r,a,s){var h=2*Math.PI,u=h-1e-6,l=n*Math.cos(i),d=n*Math.sin(i),c=t+l,g=e+d,f=r?0:1;i=r?i-o:o-i,(1e-6<Math.abs(a-c)||1e-6<Math.abs(s-g))&&this.path.push(["L",c,+g]),i<0&&(i=i%h+h),u<i?(this.path.push(["A",n,n,0,1,f,t-l,e-d]),this.path.push(["A",n,n,0,1,f,c,g])):1e-6<i&&this.path.push(["A",n,n,0,+(i>=Math.PI),f,t+n*Math.cos(o),e+n*Math.sin(o)])},Bp.beginPath=function(){this.path=[]},Bp.bezierCurveTo=function(t,e,n,i,o,r){this.path.push(["C",t,e,n,i,o,r])},Bp.clearRect=function(){},Bp.clip=function(){this.addPath("clipPath",this.path,this.Xd),this.addPath("clipPath",this.path,new rs)},Bp.closePath=function(){this.path.push(["z"])},Bp.createLinearGradient=function(t,e,n,i){var o=new as("linear");return o.x1=t,o.y1=e,o.x2=n,o.y2=i,o},Bp.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var n=this.JA;if(n[e])return"url(#"+n[e]+")";var i="PATTERN"+tt++,o={x:0,y:0,width:t.width,height:t.height,href:e};return(t=this.wb("pattern",{width:t.width,height:t.height,id:i,patternUnits:"userSpaceOnUse"})).appendChild(this.wb("image",o)),this.svg.appendChild(t),"url(#"+(n[e]=i)+")"},Bp.createRadialGradient=function(t,e,n,i,o,r){var a=new as("radial");return a.x1=t,a.y1=e,a.r1=n,a.x2=i,a.y2=o,a.r2=r,a},Bp.drawImage=function(t,e,n,i,o,r,a,s,h){var u="";t instanceof HTMLCanvasElement&&(u=t.toDataURL()),t instanceof HTMLImageElement&&(u=t.getAttribute("src"));var l=t instanceof HTMLImageElement?t.naturalWidth:t.width,d=t instanceof HTMLImageElement?t.naturalHeight:t.height;void 0===i&&(r=e,a=n,s=i=l,h=o=d),i=i||0,o=o||0,r=r||0,a=a||0,s=s||0,h=h||0,t={x:0,y:0,width:l||i,height:d||o,href:u},Ue.$(i,s)&&Ue.$(o,h)?-1===u.toLowerCase().indexOf(".svg")&&-1===u.toLowerCase().indexOf("data:image/svg")&&(t.preserveAspectRatio="xMidYMid slice"):t.preserveAspectRatio="none",u="",h/=o,0===r&&0===a||(u+=" translate("+r+", "+a+")"),1===(s/=i)&&1===h||(u+=" scale("+s+", "+h+")"),0===e&&0===n||(u+=" translate("+-e+", "+-n+")"),0===e&&0===n&&i===l&&o===d||(r="CLIP"+tt++,(a=this.wb("clipPath",{id:r})).appendChild(this.wb("rect",{x:e,y:n,width:i,height:o})),this.svg.appendChild(a),t["clip-path"]="url(#"+r+")"),us(this,"image",t,this.Xd,u),this.addElement("image",t)},Bp.fill=function(){this.addPath("fill",this.path,this.Xd)},Bp.Yd=function(){this.clipInsteadOfFill?this.clip():this.fill()},Bp.fillRect=function(t,e,n,i){us(this,"fill",t={x:(t=[t,e,n,i])[0],y:t[1],width:t[2],height:t[3]},this.Xd),this.addElement("rect",t)},Bp.fillText=function(t,e,n){t=[t,e,n],"left"===(e=this.textAlign)?e="start":"right"===e?e="end":"center"===e&&(e="middle"),us(this,"fill",e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},this.Xd),this.addElement("text",e,t[0])},Bp.lineTo=function(t,e){this.path.push(["L",t,e])},Bp.moveTo=function(t,e){this.path.push(["M",t,e])},Bp.quadraticCurveTo=function(t,e,n,i){this.path.push(["Q",t,e,n,i])},Bp.rect=function(t,e,n,i){this.path.push(["M",t,e],["L",t+n,e],["L",t+n,e+i],["L",t,e+i],["z"])},Bp.restore=function(){this.Xd=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},Bp.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.Xd.copy())},Bp.setTransform=function(t,e,n,i,o,r){1===t&&0===e&&0===n&&1===i&&0===o&&0===r||ds(this,t,e,n,i,o,r)},Bp.scale=function(t,e){this.Xd.scale(t,e)},Bp.translate=function(t,e){this.Xd.translate(t,e)},Bp.transform=function(){},Bp.stroke=function(){this.addPath("stroke",this.path,this.Xd)},Bp.uj=function(){this.clipInsteadOfFill||this.stroke()},Bp.wb=function(t,e,n){return this.Mk.wb(t,e,n)},Bp.addElement=function(t,e,n){return t=this.wb(t,e,n),(0<this.zc.length?this.zc[this.zc.length-1]:this.svg).appendChild(t),this.Oq=t},Bp.addPath=function(t,e,n){for(var i=[],o=0;o<e.length;o++){var r=b(e[o]),a=[r.shift()];if("A"===a[0])a.push(r.shift()+","+r.shift(),r.shift(),r.shift()+","+r.shift(),r.shift()+","+r.shift());else for(;r.length;)a.push(r.shift()+","+r.shift());i.push(a.join(" "))}e={d:i.join(" ")},"stroke"===t&&this.Uu&&(e["stroke-dasharray"]=this.vh.toString(),e["stroke-dashoffset"]=this.wh),us(this,t,e,n),"clipPath"===t?(t="CLIP"+tt++,(n=this.wb("clipPath",{id:t})).appendChild(this.wb("path",e)),this.svg.appendChild(n),0<this.zc.length&&this.zc[this.zc.length-1].setAttributeNS(null,"clip-path","url(#"+t+")")):this.addElement("path",e)},Bp.gr=function(){var t,e,n,i,o,r,a;0===this.shadowOffsetX&&0===this.shadowOffsetY&&0===this.shadowBlur||(t="SHADOW"+tt++,e=this.addElement("filter",{id:t,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),n=this.wb("feGaussianBlur",{in:"SourceAlpha",result:"blur",uB:this.shadowBlur/2}),i=this.wb("feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),o=this.wb("feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"}),r=this.wb("feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX,dy:this.shadowOffsetY}),(a=this.wb("feMerge",{})).appendChild(this.wb("feMergeNode",{in:"offsetBlur"})),a.appendChild(this.wb("feMergeNode",{in:"SourceGraphic"})),e.appendChild(n),e.appendChild(i),e.appendChild(o),e.appendChild(r),e.appendChild(a),0<this.zc.length&&this.zc[this.zc.length-1].setAttributeNS(null,"filter","url(#"+t+")"))},Bp.Hw=function(t,e,n){this.Up=t,this.Vp=e,this.jf=n},Bp.Gt=function(t,e){this.Uu=!0,this.vh=t,this.wh=e},Bp.Et=function(){this.Uu=!1},Bp.tc=function(){},Bp.Py=function(){},hs.prototype.rotate=function(){},hs.prototype.getImageData=function(){return null},hs.prototype.measureText=function(){return null},hs.className="SVGContext",Mo.prototype.makeSvg=Mo.prototype.Zt=function(t){var n=new ss(0,d.document);void 0===t&&(t=new I);var i=this;return Dr(this,function(t,e){return t=null!==(t=Er(i,t,"SVG",n))?t.svg:null,"function"==typeof e?(e(t),null):t},t)},Mo.prototype.makeSVG=Mo.prototype.hw=function(t){return this.Zt(t)},Na.prototype.iy=function(t,e){if(!(t instanceof hs))return!1;if(!this.visible)return!0;var n=null,i=t.Oq;if(this instanceof hh&&(this.type===hh.TableRow||this.type===hh.TableColumn))return Fa(this,t,e),!0;var o=this.xb;if(0===o.width||0===o.height||isNaN(o.x)||isNaN(o.y))return!0;var r=this.transform,a=this.panel;0!=(4096&this.F)==!0&&Ba(this);var s,h,u,l=0!=(256&this.F),d=!1;if(this instanceof Hh&&(t.font=this.font),l){var c,g,f,p,d=a.de()?a.naturalBounds:a.actualBounds;if(p=null!==this.pd?(c=(p=this.pd).x,g=p.y,f=p.width,p.height):(c=Math.max(o.x,d.x),g=Math.max(o.y,d.y),f=Math.min(o.right,d.right)-c,Math.min(o.bottom,d.bottom)-g),c>o.width+o.x||o.x>d.width+d.x||g>o.height+o.y||o.y>d.height+d.y)return!0;d=!0,ds(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(c,g,f,p),t.clip()}return this.Ef()&&!this.isVisible()||(t.Xd.Ma=[1,0,0,1,0,0],(this instanceof Hh&&1<this.lineCount||this instanceof Oh&&1<this.geometry.figures.length)&&ds(t,1,0,0,1,0,0),c=!1,this.Ef()&&this.isShadowed&&e.Ge("drawShadows")&&(g=this.shadowOffset,t.Hw(g.x*e.scale*e.Sb,g.y*e.scale*e.Sb,this.shadowBlur),gs(t),t.shadowColor=this.shadowColor),g=!1,this.part&&e.Ge("drawShadows")&&(g=this.part.isShadowed),!0===this.shadowVisible?(gs(t),!1===c&&g&&(ds(t,1,0,0,1,0,0),t.gr(),c=!0)):!1===this.shadowVisible&&cs(t),f=this.naturalBounds,null!==this.areaBackground&&(Oa(this,t,this.areaBackground,!0,!0,f,o),!1===c&&g&&(ds(t,1,0,0,1,0,0),t.gr(),c=!0),this.areaBackground instanceof vs&&this.areaBackground.type===Fs?(t.beginPath(),t.rect(o.x,o.y,o.width,o.height),t.Yd(this.areaBackground)):t.fillRect(o.x,o.y,o.width,o.height)),this instanceof hh?ds(t,r.m11,r.m12,r.m21,r.m22,r.dx,r.dy):t.Xd.Ma=[r.m11,r.m12,r.m21,r.m22,r.dx,r.dy],null!==this.background&&(!1===c&&g&&(ds(t,1,0,0,1,0,0),t.gr(),c=!0),p=r=0,s=(h=this.naturalBounds).width,h=h.height,u=0,this instanceof Oh&&(r=(h=this.geometry.bounds).x,p=h.y,s=h.width,h=h.height,u=this.strokeWidth),Oa(this,t,this.background,!0,!1,f,o),this.background instanceof vs&&this.background.type===Fs?(t.beginPath(),t.rect(r-u/2,p-u/2,s+u,h+u),t.Yd(this.background)):t.fillRect(r-u/2,p-u/2,s+u,h+u)),g&&(null!==this.background||null!==this.areaBackground||null!==a&&0!=(512&a.F)||null!==a&&(a.type===hh.Auto||a.type===hh.Spot)&&a.pb()!==this)?(Va(this,!0),null===this.shadowVisible&&cs(t)):Va(this,!1),this.ej(t,e),g&&0!=(512&this.F)==!0&&gs(t),this.Ef()&&g&&cs(t),l&&(t.restore(),d&&t.zc.pop()),this instanceof hh&&(n=t.zc.pop()),!0===c&&t.zc.pop(),(this instanceof Hh&&1<this.lineCount||this instanceof Oh&&1<this.geometry.figures.length)&&(n=t.zc.pop()),null!==t.Mk.Bq&&(null===n&&(n=i===t.Oq?(ds(t,1,0,0,1,0,0),t.zc.pop()):t.Oq),t.Mk.Bq(this,n)),this.svg=n),!0},fs.prototype.resize=function(t,e,n,i){return(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.style.width=n+"px",this.style.height=i+"px",!0)},fs.prototype.toDataURL=function(t,e){return this.Ga.toDataURL(t,e)},fs.prototype.getBoundingClientRect=function(){return this.Ga.getBoundingClientRect()},fs.prototype.focus=function(){this.Ga.focus()},fs.prototype.hy=function(){this.ownerDocument=this.Ga.B=null},s.Object.defineProperties(fs.prototype,{width:{get:function(){return this.Ga.width},set:function(t){this.Ga.width=t}},height:{get:function(){return this.Ga.height},set:function(t){this.Ga.height=t}},style:{get:function(){return this.Ga.style}}}),fs.className="CanvasSurface",(Bp=ps.prototype).Py=function(t){this.Y.imageSmoothingEnabled=t},Bp.arc=function(t,e,n,i,o,r){this.Y.arc(t,e,n,i,o,r)},Bp.beginPath=function(){this.Y.beginPath()},Bp.bezierCurveTo=function(t,e,n,i,o,r){this.Y.bezierCurveTo(t,e,n,i,o,r)},Bp.clearRect=function(t,e,n,i){this.Y.clearRect(t,e,n,i)},Bp.clip=function(){this.Y.clip()},Bp.closePath=function(){this.Y.closePath()},Bp.createLinearGradient=function(t,e,n,i){return this.Y.createLinearGradient(t,e,n,i)},Bp.createPattern=function(t,e){return this.Y.createPattern(t,e)},Bp.createRadialGradient=function(t,e,n,i,o,r){return this.Y.createRadialGradient(t,e,n,i,o,r)},Bp.drawImage=function(t,e,n,i,o,r,a,s,h){void 0===i?this.Y.drawImage(t,e,n):this.Y.drawImage(t,e,n,i,o,r,a,s,h)},Bp.fill=function(){this.Y.fill()},Bp.fillRect=function(t,e,n,i){this.Y.fillRect(t,e,n,i)},Bp.fillText=function(t,e,n){this.Y.fillText(t,e,n)},Bp.getImageData=function(t,e,n,i){return this.Y.getImageData(t,e,n,i)},Bp.lineTo=function(t,e){this.Y.lineTo(t,e)},Bp.measureText=function(t){return this.Y.measureText(t)},Bp.moveTo=function(t,e){this.Y.moveTo(t,e)},Bp.quadraticCurveTo=function(t,e,n,i){this.Y.quadraticCurveTo(t,e,n,i)},Bp.rect=function(t,e,n,i){this.Y.rect(t,e,n,i)},Bp.restore=function(){this.Y.restore()},ps.prototype.rotate=function(t){this.Y.rotate(t)},(Bp=ps.prototype).save=function(){this.Y.save()},Bp.setTransform=function(t,e,n,i,o,r){this.Y.setTransform(t,e,n,i,o,r)},Bp.scale=function(t,e){this.Y.scale(t,e)},Bp.stroke=function(){this.Y.stroke()},Bp.transform=function(t,e,n,i,o,r){1===t&&0===e&&0===n&&1===i&&0===o&&0===r||this.Y.transform(t,e,n,i,o,r)},Bp.translate=function(t,e){this.Y.translate(t,e)},Bp.Yd=function(t){var e;t instanceof vs&&t.type===Fs?((e=t.$k)<(t=t.zu)?(this.scale(e/t,1),this.translate((t-e)/2,0)):t<e&&(this.scale(1,t/e),this.translate(0,(e-t)/2)),this.xn?this.clip():this.fill(),e<t?(this.translate(-(t-e)/2,0),this.scale(1/(e/t),1)):t<e&&(this.translate(0,-(e-t)/2),this.scale(1,1/(t/e)))):this.xn?this.clip():this.fill()},Bp.uj=function(){this.xn||this.stroke()},Bp.Hw=function(t,e,n){this.Up=t,this.Vp=e,this.jf=n},Bp.Gt=function(t,e){var n=this.Y;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)},Bp.Et=function(){var t=this.Y;void 0!==t.setLineDash&&(t.setLineDash(ms),t.lineDashOffset=0)},Bp.tc=function(t){t&&(this.xu=""),this.wu=this.yu=""},s.Object.defineProperties(ps.prototype,{fillStyle:{get:function(){return this.Y.fillStyle},set:function(t){this.wu!==t&&(this.wu=this.Y.fillStyle=t)}},font:{get:function(){return this.Y.font},set:function(t){this.xu!==t&&(this.xu=this.Y.font=t)}},globalAlpha:{get:function(){return this.Y.globalAlpha},set:function(t){this.Y.globalAlpha=t}},lineCap:{get:function(){return this.Y.lineCap},set:function(t){this.Y.lineCap=t}},lineDashOffset:{get:function(){return this.Y.lineDashOffset},set:function(t){this.Y.lineDashOffset=t}},lineJoin:{get:function(){return this.Y.lineJoin},set:function(t){this.Y.lineJoin=t}},lineWidth:{get:function(){return this.Y.lineWidth},set:function(t){this.Y.lineWidth=t}},miterLimit:{get:function(){return this.Y.miterLimit},set:function(t){this.Y.miterLimit=t}},shadowBlur:{get:function(){return this.Y.shadowBlur},set:function(t){this.Y.shadowBlur=t}},shadowColor:{get:function(){return this.Y.shadowColor},set:function(t){this.Y.shadowColor=t}},shadowOffsetX:{get:function(){return this.Y.shadowOffsetX},set:function(t){this.Y.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Y.shadowOffsetY},set:function(t){this.Y.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Y.strokeStyle},set:function(t){this.yu!==t&&(this.yu=this.Y.strokeStyle=t)}},textAlign:{get:function(){return this.Y.textAlign},set:function(t){this.Y.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Y.imageSmoothingEnabled},set:function(t){this.Y.imageSmoothingEnabled=t}},clipInsteadOfFill:{get:function(){return this.xn},set:function(t){this.xn=t}}});var ms=Object.freeze([]);function ys(){this.T=this.v=this.I=this.l=0}function vs(t){Ys||(Cs(),Ys=!0),J(this),this.s=!1,void 0===t?(this.pa=Ds,this.Zk="black"):"string"==typeof t?(this.pa=Ds,this.Zk=t):(this.pa=t,this.Zk="black"),(t=this.pa)===Es?(this.yd=oe,this.ll=Zt):this.ll=this.yd=t===Fs?Wt:Ht,this.jt=0,this.Xr=NaN,this.ge=this.Ms=this.fe=null,this.zu=this.$k=0}function ws(t,e,n){return e=void 0===e||"number"!=typeof e?.2:e,n=void 0===n?Bs:n,ks(t),Ps(e,n)}function bs(t,e,n){return e=void 0===e||"number"!=typeof e?.2:e,n=void 0===n?Bs:n,ks(t),Ps(-e,n)}function Ss(t,e,n){ks(t),t=Vs.l;var i=Vs.I,o=Vs.v,r=Vs.T;return ks(e),void 0===n&&(n=.5),"rgba("+Math.round((Vs.l-t)*n+t)+", "+Math.round((Vs.I-i)*n+i)+", "+Math.round((Vs.v-o)*n+o)+", "+Math.round((Vs.T-r)*n+r)+")"}function xs(t){return!!t&&(t instanceof vs?t.Cy():(ks(t),(299*Vs.l+587*Vs.I+114*Vs.v)/1e3<128))}function Ps(t,e){switch(e){case Bs:e=100*Ms(Vs.l);var n=100*Ms(Vs.I),i=100*Ms(Vs.v);return qs.l=.4124564*e+.3575761*n+.1804375*i,qs.I=.2126729*e+.7151522*n+.072175*i,qs.v=.0193339*e+.119192*n+.9503041*i,qs.T=Vs.T,e=Ns(qs.l/Rs[0]),n=Ns(qs.I/Rs[1]),i=Ns(qs.v/Rs[2]),Hs.l=116*n-16,Hs.I=500*(e-n),Hs.v=200*(n-i),Hs.T=qs.T,Hs.l=Math.min(100,Math.max(0,Hs.l+100*t)),e=(t=(Hs.l+16)/116)-Hs.v/200,qs.l=Rs[0]*As(Hs.I/500+t),qs.I=Rs[1]*(Hs.l>zs*js?Math.pow(t,3):Hs.l/zs),qs.v=Rs[2]*As(e),qs.T=Hs.T,t=-.969266*qs.l+1.8760108*qs.I+.041556*qs.v,e=.0556434*qs.l+-.2040259*qs.I+1.0572252*qs.v,Vs.l=255*_s((3.2404542*qs.l+-1.5371385*qs.I+-.4985314*qs.v)/100),Vs.I=255*_s(t/100),Vs.v=255*_s(e/100),Vs.T=qs.T,Vs.l=Math.round(Vs.l),255<Vs.l?Vs.l=255:Vs.l<0&&(Vs.l=0),Vs.I=Math.round(Vs.I),255<Vs.I?Vs.I=255:Vs.I<0&&(Vs.I=0),Vs.v=Math.round(Vs.v),255<Vs.v?Vs.v=255:Vs.v<0&&(Vs.v=0),"rgba("+Vs.l+", "+Vs.I+", "+Vs.v+", "+Vs.T+")";case Gs:return Ls(),Us.v=Math.min(100,Math.max(0,Us.v+100*t)),"hsla("+Us.l+", "+Us.I+"%, "+Us.v+"%, "+Us.T+")";default:return O("Unknown color space: "+e),"rgba(0, 0, 0, 1)"}}function ks(t){Ys||(Cs(),Ys=!0);var e,n=Is;null!==n&&(n.clearRect(0,0,1,1),n.fillStyle="#000000",e=n.fillStyle,n.fillStyle=t,n.fillStyle!==e?(n.fillRect(0,0,1,1),t=n.getImageData(0,0,1,1).data,Vs.l=t[0],Vs.I=t[1],Vs.v=t[2],Vs.T=t[3]/255):(n.fillStyle="#FFFFFF",n.fillStyle=t,Vs.l=0,Vs.I=0,Vs.v=0,Vs.T=1))}function Ls(){var t=Vs.l/255,e=Vs.I/255,n=Vs.v/255,i=Math.max(t,e,n),o=i-(r=Math.min(t,e,n)),r=(i+r)/2;if(0==o)var a=t=0;else{switch(i){case t:a=(e-n)/o%6;break;case e:a=(n-t)/o+2;break;case n:a=(t-e)/o+4}(a*=60)<0&&(a+=360),t=o/(1-Math.abs(2*r-1))}Us.l=Math.round(a),Us.I=Math.round(100*t),Us.v=Math.round(100*r),Us.T=Vs.T}function Ms(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function _s(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function Ns(t){return js<t?Math.pow(t,1/3):(zs*t+16)/116}function As(t){var e=t*t*t;return js<e?e:(116*t-16)/zs}function Ts(t,e){"string"!=typeof t&&(t instanceof vs||O("Value for "+e+" must be a color string or a Brush, not "+t))}function Cs(){Is=Xr?new fs(null).context:null}ps.className="CanvasSurfaceContext",ys.className="ColorNumbers",vs.prototype.copy=function(){var t=new vs;return t.pa=this.pa,t.Zk=this.Zk,t.yd=this.yd.G(),t.ll=this.ll.G(),t.jt=this.jt,t.Xr=this.Xr,null!==this.fe&&(t.fe=this.fe.copy()),t.Ms=this.Ms,t},(Bp=vs.prototype).freeze=function(){return this.s=!0,null!==this.fe&&this.fe.freeze(),this},Bp.ea=function(){return Object.isFrozen(this)&&O("cannot thaw constant: "+this),this.s=!1,null!==this.fe&&this.fe.ea(),this},Bp.hb=function(t){t.classType===vs&&(this.type=t)},Bp.toString=function(){var t="Brush(";if(this.type===Ds)t+=this.color;else if(t=this.type===Es?t+"Linear ":this.type===Fs?t+"Radial ":this.type===Os?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,null!==this.colorStops)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},Bp.addColorStop=function(t,e){return this.s&&g(this),("number"!=typeof t||!isFinite(t)||1<t||t<0)&&f(t,"0 <= loc <= 1",vs,"addColorStop:loc"),null===this.fe&&(this.fe=new at),this.fe.add(t,e),this.pa===Ds&&(this.type=Es),this.ge=null,this},Bp.BA=function(t,e){if(this.s&&g(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?Bs:e,this.type===Ds)ks(this.color),this.color=Ps(t,e);else if((this.type===Es||this.type===Fs)&&null!==this.colorStops)for(var n=this.colorStops.iterator;n.next();)ks(n.value),this.addColorStop(n.key,Ps(t,e));return this},Bp.Dz=function(t,e){if(this.s&&g(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?Bs:e,this.type===Ds)ks(this.color),this.color=Ps(-t,e);else if((this.type===Es||this.type===Fs)&&null!==this.colorStops)for(var n=this.colorStops.iterator;n.next();)ks(n.value),this.addColorStop(n.key,Ps(-t,e));return this},Bp.Cy=function(){if(this.type===Ds)return xs(this.color);if(this.type!==Es&&this.type!==Fs||null===this.colorStops)return!1;var t=this.colorStops;if(this.type===Fs)return xs(t.first().value);if(null!==t.get(.5))return xs(t.get(.5));if(2===t.count)return xs(Ss((t=t.ma())[0].value,t[1].value));for(var e=t.iterator,n=-1,i=-1,o=1,r=1;e.next();){var a=e.key,s=Math.abs(.5-e.key);r<o&&s<o?(n=a,o=s):o<=r&&s<r&&(i=a,r=s)}return i<n&&(r=n,n=i,i=r,r=o),o=i-n,xs(Ss(t.get(n),t.get(i),1-r/o))},s.Object.defineProperties(vs.prototype,{type:{get:function(){return this.pa},set:function(t){this.s&&g(this,t),this.pa=t,this.start.mc()&&(t===Es?this.start=oe:t===Fs&&(this.start=Wt)),this.end.mc()&&(t===Es?this.end=Zt:t===Fs&&(this.end=Wt)),this.ge=null}},color:{get:function(){return this.Zk},set:function(t){this.s&&g(this,t),this.Zk=t,this.ge=null}},start:{get:function(){return this.yd},set:function(t){this.s&&g(this,t),this.yd=t.G(),this.ge=null}},end:{get:function(){return this.ll},set:function(t){this.s&&g(this,t),this.ll=t.G(),this.ge=null}},startRadius:{get:function(){return this.jt},set:function(t){this.s&&g(this,t),t<0&&f(t,">= zero",vs,"startRadius"),this.jt=t,this.ge=null}},endRadius:{get:function(){return this.Xr},set:function(t){this.s&&g(this,t),t<0&&f(t,">= zero",vs,"endRadius"),this.Xr=t,this.ge=null}},colorStops:{get:function(){return this.fe},set:function(t){this.s&&g(this,t),this.fe=t,this.ge=null}},pattern:{get:function(){return this.Ms},set:function(t){this.s&&g(this,t),this.Ms=t,this.ge=null}}}),vs.prototype.isDark=vs.prototype.Cy,vs.prototype.darkenBy=vs.prototype.Dz,vs.prototype.lightenBy=vs.prototype.BA;var Ds,Es,Fs,Os,Bs,Gs,js=216/24389,zs=24389/27,Rs=[95.047,100,108.883],Is=null,Vs=new ys,Us=new ys,qs=new ys,Hs=new ys,Ys=!1;function Ks(){this.name="Base"}function Xs(){this.name="Base"}function Ws(){this.name="Base"}function $s(){this.name="Base"}function Js(){this.name="Base"}function Zs(){this.name="Base"}function Qs(){this.name="Base",this.name="Table"}function th(){this.name="Base"}function eh(){this.name="Base"}function nh(){this.name="Base"}function ih(){this.name="Base"}function oh(t,e,n){if(e<0)return 0==t%e;if(0==t%e){e=n.length;for(var i=0;i<e;i++)if(0==t%n[i])return;return 1}}function rh(){this.name="Base"}function ah(t,e,n,i){var o;!1!==Ka(i)&&(0===(o=i.strokeWidth)&&t instanceof tl&&t.type===hh.Link&&t.adornedObject instanceof Oh&&(o=t.adornedObject.strokeWidth),o*=i.ya,t instanceof wl&&null!==t.na?Ca(i,(t=t.na.bounds).x-o/2,t.y-o/2,t.width+o,t.height+o):t instanceof tl&&null!==t.adornedPart.na?Ca(i,(t=t.adornedPart.na.bounds).x-o/2,t.y-o/2,t.width+o,t.height+o):Ca(i,-o/2,-o/2,e+o,n+o),Xa(i,!1))}function sh(){this.name="Base"}function hh(t){Na.call(this),this.pa=void 0===t?hh.Position:t,null===this.pa&&O("Panel type not specified or PanelLayout not loaded: "+t),this.W=new X,this.gb=Ee,this.pa===hh.Grid&&(this.isAtomic=!0),this.Ln=we,this.Rf=Gr,this.pa===hh.Table&&uh(this),this.nq=Br,this.lo=vt,this.mo=St,this.io=0,this.ho=100,this.ko=10,this.jo=0,this.li=this.lb=this.dh=this.bh=this.Jj=null,this.zo=NaN,this.pe=this.Bi=null,this.Dl="category",this.Rd=null,this.xg=new ne(NaN,NaN,NaN,NaN),this.zh=this.Hp=this.Ui=null,this.Lg=""}function uh(t){t.Cj=Ee,t.Ug=1,t.si=null,t.ri=null,t.Tg=1,t.Sg=null,t.pi=null,t.ub=[],t.qb=[],t.ak=Fh,t.zj=Fh,t.Xi=0,t.Fi=0}function lh(t,e,n,i){for(var o=i.length,r=t.actualBounds,a=t.naturalBounds,s=!0,h=0;h<o;h++){var u=i[h];if(void 0!==u)if(s)s=!1;else if(0!==u.actual){if(n){if(u.position>r.height)continue}else if(u.position>r.width)continue;var l=u.separatorStrokeWidth;isNaN(l)&&(l=n?t.Ug:t.Tg);var d,c=u.separatorStroke;null===c&&(c=n?t.si:t.Sg),0!==l&&null!==c&&(Oa(t,e,c,!1,!1,a,r),c=!1,null===(d=u.separatorDashArray)&&(d=n?t.ri:t.pi),null!==d&&(c=!0,e.Gt(d,0)),e.beginPath(),d=u.position+l,n?d>r.height&&(l-=d-r.height):d>r.width&&(l-=d-r.width),u=u.position+l/2,e.lineWidth=l,l=t.gb,n?(u+=l.top,d=r.width-l.right,e.moveTo(l.left,u),e.lineTo(d,u)):(u+=l.left,d=r.height-l.bottom,e.moveTo(u,l.top),e.lineTo(u,d)),e.stroke(),c&&e.Et())}}}function dh(t,e,n,i,o){for(var r=i.length,a=t.actualBounds,s=t.naturalBounds,h=0;h<r;h++){var u,l,d,c,g=i[h];void 0!==g&&null!==g.background&&g.coversSeparators!==o&&0!==g.actual&&(u=n?a.height:a.width,g.position>u||(l=g.vc(),d=g.separatorStrokeWidth,isNaN(d)&&(d=n?t.Ug:t.Tg),null===(c=g.separatorStroke)&&(c=n?t.si:t.Sg),null===c&&(d=0),l-=d,u<(d=g.position+d)+(l+=g.actual)&&(l=u-d),l<=0||(u=t.gb,Oa(t,e,g.background,!0,!1,s,a),n?e.fillRect(u.left,d+u.top,a.width-(u.left+u.right),l):e.fillRect(d+u.left,u.top,l,a.height-(u.top+u.bottom)))))}}function ch(t){return"LineV"===t||"BarV"===t}function gh(t){return null!==t.part?t.part.locationObject:null}function fh(t,e){!function t(e,n,i){i(n);n=n.W.j;for(var o=n.length,r=0;r<o;r++){var a=n[r];a instanceof hh&&t(e,a,i)}}(t,t,e)}function ph(t,e){!function t(e,n,i){i(n);if(n instanceof hh)for(var o=(n=n.W.j).length,r=0;r<o;r++)t(e,n[r],i)}(t,t,e)}function mh(t,e,n,i){for(var o=t.W.j,r=o.length;r--;){var a,s,h=o[r];h.visible&&(a=h.actualBounds,s=t.naturalBounds,a.x>s.width||a.y>s.height||a.x+a.width<0||a.y+a.height<0||(h instanceof hh&&mh(h,e,n,i),null!==e&&(h=e(h)),null===h||null!==n&&!n(h)||i.add(h)))}}function yh(t){var e=null;return t instanceof Oh&&((e=t.spot1)===we&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot1)),null===e&&(e=Yt),e}function vh(t){var e=null;return t instanceof Oh&&((e=t.spot2)===we&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot2)),null===e&&(e=Qt),e}function wh(t,e){t.F=e?16777216|t.F:-16777217&t.F}function bh(t){return null!==(t=t.li)&&t.s}function Sh(t){var s=t.li;if(null===s)null!==t.data&&O("Template cannot have .data be non-null: "+t),t.li=s=new X;else if(s.s)return;var h=new X;wh(t,!1),t.Zm(t,function(t,e){var n=e.eb;if(null!==n)for(qa(e,!1),n=n.iterator;n.next();){var i=n.value;i.mode===Yc&&qa(e,!0);var o=i.sourceName;null!==o&&("/"===o&&wh(t,!0),null!==(o=qc(i,t,e))&&(h.add(o),null===o.cm&&(o.cm=new X),o.cm.add(i))),s.add(i)}if(e instanceof hh&&e.type===hh.Table){if(0<e.ub.length)for(n=(t=e.ub).length,i=0;i<n;i++)if(void 0!==(o=t[i])&&null!==o.eb)for(var r=o.eb.iterator;r.next();){var a=r.value;a.jd=o,a.fq=2,a.im=o.index,s.add(a)}if(0<e.qb.length)for(t=(e=e.qb).length,n=0;n<t;n++)if(void 0!==(i=e[n])&&null!==i.eb)for(o=i.eb.iterator;o.next();)(r=o.value).jd=i,r.fq=1,r.im=i.index,s.add(r)}});for(var e,n,i=h.iterator;i.next();){var o=i.value;if(null!==o.cm){qa(o,!0);for(var r=o.cm.iterator;r.next();){var a=r.value;null===o.eb&&(o.eb=new X),o.eb.add(a)}}o.cm=null}for(i=s.iterator;i.next();)null!==(r=(o=i.value).jd)&&(o.jd=null,0<(n=(e=o.targetProperty).indexOf("."))&&r instanceof hh&&(a=e.substring(0,n),e=e.substr(n+1),null!==(n=r.$a(a))?(r=n,o.targetProperty=e):p('Warning: unable to find GraphObject named "'+a+'" for Binding: '+o.toString())),r instanceof Th?(a=Q(r.panel),o.vj=void 0===a?-1:a,r.panel.Xk=o.vj):r instanceof Na?(a=Q(r),o.vj=void 0===a?-1:a,r.Xk=o.vj):O("Unknown type of binding target: "+r));s.freeze(),t instanceof Ou&&t.Wb()&&t.Ta()}function xh(t){if(t.type===hh.Spot||t.type===hh.Auto)return Math.min(t.W.length,1);if(t.type!==hh.Link)return t.type===hh.Table&&0<t.W.length&&((t=t.W.L(0)).isPanelMain&&t instanceof hh&&(t.type===hh.TableRow||t.type===hh.TableColumn))?1:0;for(var e=(t=t.W).length,n=0;n<e;n++){var i=t.L(n);if(!(i instanceof Oh&&i.isPanelMain))break}return n}function Ph(t,e,n){var i,o,r;null==e||n<0||(i=function(t,e){if(null===e)return"";if("function"==typeof(t=t.Dl))t=t(e);else{if("string"!=typeof t||"object"!==_typeof(e))return"";if(""===t)return"";t=zc(e,t)}return void 0===t?"":"string"==typeof t?t:(O("Panel.getCategoryForItemData found a non-string category for "+e+": "+t),"")}(t,e),(r=null)!==(o=t.itemTemplateMap)&&(r=o.H(i)),null===r&&(_h||(_h=!0,p('No item template Panel found for category "'+i+'" on '+t),p("  Using default item template."),i=new hh,(o=new Hh).bind(new Uc("text","",k)),i.add(o),Nh=i),r=Nh),null!==(i=r)&&(Sh(i),0==(16777216&(i=i.copy()).F)||null!==(o=t.ij())&&wh(o,!0),"object"===_typeof(e)&&(null===t.Rd&&(t.Rd=new at),t.Rd.add(e,i)),o=n+xh(t),t.vb(o,i),i.lb=e,kh(t,o,n),i.lb=null,i.data=e))}function kh(t,e,n){for(t=t.W;e<t.length;){var i,o,r=t.L(e);r instanceof hh&&(i=e,o=n,r.type===hh.TableRow?r.row=i:r.type===hh.TableColumn&&(r.column=i),r.itemIndex=o),e++,n++}}function Lh(t,e,n){var i=e.enabledChanged;if(null!==i&&i(e,n),e instanceof hh){i=(e=e.W.j).length;for(var o=0;o<i;o++){var r=e[o];n&&r instanceof hh&&!r.isEnabled||Lh(t,r,n)}}}function Mh(t,e){e.name=t,Ah.add(t,e)}vs.className="Brush",vs.Solid=Ds=new j(vs,"Solid",0),vs.Linear=Es=new j(vs,"Linear",1),vs.Radial=Fs=new j(vs,"Radial",2),vs.Pattern=Os=new j(vs,"Pattern",4),vs.Lab=Bs=new j(vs,"Lab",5),vs.HSL=Gs=new j(vs,"HSL",6),vs.randomColor=function(t,e){void 0===t&&(t=128),void 0===e&&(e=Math.max(t,255));var n=Math.abs(e-t);e=Math.floor(t+Math.random()*n).toString(16);var i=Math.floor(t+Math.random()*n).toString(16);return t=Math.floor(t+Math.random()*n).toString(16),e.length<2&&(e="0"+e),i.length<2&&(i="0"+i),t.length<2&&(t="0"+t),"#"+e+i+t},vs.isValidColor=function(t){if("black"===t)return!0;if(""===t)return!1;Ys||(Cs(),Ys=!0);var e=Is;if(null===e)return!0;e.fillStyle="#000000";var n=e.fillStyle;return e.fillStyle=t,e.fillStyle!==n||(e.fillStyle="#FFFFFF",n=e.fillStyle,e.fillStyle=t,e.fillStyle!==n)},vs.lighten=function(t){return ws(t)},vs.lightenBy=ws,vs.darken=function(t){return bs(t)},vs.darkenBy=bs,vs.mix=Ss,vs.isDark=xs,Ks.prototype.measure=function(){},Ks.prototype.EA=function(t,e,n,i,o){t.measure(e,n,i,o)},Ks.prototype.arrange=function(){},Ks.prototype.qz=function(t,e,n,i,o,r){t.arrange(e,n,i,o,r)},Ks.prototype.bc=function(){},s.Object.defineProperties(Ks.prototype,{classType:{get:function(){return hh}}}),Ks.prototype.arrangeElement=Ks.prototype.qz,Ks.prototype.measureElement=Ks.prototype.EA,Ks.className="PanelLayout",n(Xs,Ks),Xs.prototype.measure=function(t,e,n,i,o,r,a){var s=i.length;t=gh(t);for(var h=0;h<s;h++){var u,l,d,c,g=i[h];!g.visible&&g!==t||(d=(u=g.margin).right+u.left,u=u.top+u.bottom,g.measure(e,n,r,a),l=g.measuredBounds,d=Math.max(l.width+d,0),u=Math.max(l.height+u,0),l=g.position.x,c=g.position.y,isFinite(l)||(l=0),isFinite(c)||(c=0),g instanceof Oh&&g.isGeometryPositioned&&(l-=g=g.strokeWidth/2,c-=g),ie(o,l,c,d,u))}},Xs.prototype.arrange=function(t,e,n){var i=e.length,o=t.padding;for(t=n.x-o.left,n=n.y-o.top,o=0;o<i;o++){var r,a=e[o],s=a.measuredBounds,h=a.margin,u=a.position.x,l=a.position.y,u=isNaN(u)?-t:u-t,l=isNaN(l)?-n:l-n;a instanceof Oh&&a.isGeometryPositioned&&(u-=r=a.strokeWidth/2,l-=r),a.visible&&a.arrange(u+h.left,l+h.top,s.width,s.height)}},n(Ws,Ks),Ws.prototype.measure=function(t,e,n,i,o,r,a){var s=i.length;e=be(),r=gh(t);for(var h=0;h<s;h++){var u,l,d=i[h];!d.visible&&d!==r||((u=za(d,!1))!==Or&&u!==jr?e.push(d):(d.measure(1/0,n,0,a),u=d.margin,d=d.measuredBounds,l=Math.max(d.height+u.top+u.bottom,0),o.width+=Math.max(d.width+u.right+u.left,0),o.height=Math.max(o.height,l)))}for(i=e.length,t.desiredSize.height?n=Math.min(t.desiredSize.height,t.maxSize.height):0!==o.height&&(n=Math.min(o.height,t.maxSize.height)),t=0;t<i;t++)!(h=e[t]).visible&&h!==r||(s=(u=h.margin).right+u.left,u=u.top+u.bottom,h.measure(1/0,n,0,a),h=h.measuredBounds,u=Math.max(h.height+u,0),o.width+=Math.max(h.width+s,0),o.height=Math.max(o.height,u));Se(e)},Ws.prototype.arrange=function(t,e,n){for(var i=e.length,o=t.padding,r=o.top,a=t.isOpposite,s=a?n.width:o.left,h=0;h<i;h++){var u,l,d,c,g,f,p=r,m=e[h];m.visible&&(u=m.measuredBounds,d=(l=m.margin).top+l.bottom,c=r+o.bottom,g=u.height,f=za(m,!1),(isNaN(m.desiredSize.height)&&f===Fr||f===zr)&&(g=Math.max(n.height-d-c,0)),d=g+d+c,(c=m.alignment).Mb()&&(c=t.defaultAlignment),c.ib()||(c=Wt),a&&(s-=u.width+l.left+l.right),m.arrange(s+c.offsetX+l.left,p+c.offsetY+l.top+(n.height*c.y-d*c.y),u.width,g),a||(s+=u.width+l.left+l.right))}},n($s,Ks),$s.prototype.measure=function(t,e,n,i,o,r){var a=i.length;n=be();for(var s=gh(t),h=0;h<a;h++){var u,l,d=i[h];!d.visible&&d!==s||((u=za(d,!1))!==Or&&u!==zr?n.push(d):(u=(l=d.margin).right+l.left,l=l.top+l.bottom,d.measure(e,1/0,r,0),d=d.measuredBounds,Tt(o,Math.max(o.width,Math.max(d.width+u,0)),o.height+Math.max(d.height+l,0))))}if(0!==(i=n.length)){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):0!==o.width&&(e=Math.min(o.width,t.maxSize.width)),t=0;t<i;t++)!(h=n[t]).visible&&h!==s||(a=(d=h.margin).right+d.left,d=d.top+d.bottom,h.measure(e,1/0,r,0),h=h.measuredBounds,d=Math.max(h.height+d,0),o.width=Math.max(o.width,Math.max(h.width+a,0)),o.height+=d);Se(n)}},$s.prototype.arrange=function(t,e,n){for(var i=e.length,o=t.padding,r=o.left,a=t.isOpposite,s=a?n.height:o.top,h=0;h<i;h++){var u,l,d,c,g,f,p=r,m=e[h];m.visible&&(u=m.measuredBounds,d=(l=m.margin).left+l.right,c=r+o.right,g=u.width,f=za(m,!1),(isNaN(m.desiredSize.width)&&f===Fr||f===jr)&&(g=Math.max(n.width-d-c,0)),d=g+d+c,(c=m.alignment).Mb()&&(c=t.defaultAlignment),c.ib()||(c=Wt),a&&(s-=u.height+l.bottom+l.top),m.arrange(p+c.offsetX+l.left+(n.width*c.x-d*c.x),s+c.offsetY+l.top,g,u.height),a||(s+=u.height+l.bottom+l.top))}},n(Js,Ks),Js.prototype.measure=function(t,e,n,i,o,r,a){var s=i.length,h=t.pb(),u=h.margin,l=u.right+u.left,d=u.top+u.bottom;h.measure(e,n,r,a);var c=h.measuredBounds;r=c.width,a=c.height;for(var g=Math.max(r+l,0),f=Math.max(a+d,0),p=t.isClipping,m=ne.allocAt(-u.left,-u.top,g,f),y=!0,v=gh(t),w=0;w<s;w++){var b=i[w];if(b!==h&&(b.visible||b===v)){switch(g=(u=b.margin).right+u.left,f=u.top+u.bottom,c=za(b,!1)){case Fr:e=r,n=a;break;case jr:e=r;break;case zr:n=a}b.measure(e,n,0,0),c=b.measuredBounds,g=Math.max(c.width+g,0),f=Math.max(c.height+f,0);var S=b.alignment;S.Mb()&&(S=t.defaultAlignment),S.ib()||(S=Wt);var x=b.alignmentFocus;x.Mb()&&(x=Wt);var P=null;if(b instanceof hh&&""!==b.Lg&&(b.arrange(0,0,c.width,c.height),(P=b.$a(b.Lg))===b&&(P=null)),null!==P){for(u=P.naturalBounds,c=P.margin,u=ee.allocAt(x.x*u.width-x.offsetX-c.left,x.y*u.height-x.offsetY-c.top);P!==b;)P.transform.sa(u),P=P.panel;b=S.x*r+S.offsetX-u.x,c=S.y*a+S.offsetY-u.y,ee.free(u)}else b=S.x*r+S.offsetX-(x.x*c.width+x.offsetX)-u.left,c=S.y*a+S.offsetY-(x.y*c.height+x.offsetY)-u.top;y?(y=!1,o.h(b,c,g,f)):ie(o,b,c,g,f)}}switch(y?o.assign(m):p?o.aw(m.x,m.y,m.width,m.height):ie(o,m.x,m.y,m.width,m.height),ne.free(m),(c=h.stretch)===Gr&&(c=za(h,!1)),c){case Or:return;case Fr:if(!isFinite(e)&&!isFinite(n))return;break;case jr:if(!isFinite(e))return;break;case zr:if(!isFinite(n))return}for(r=(c=h.measuredBounds).width,a=c.height,g=Math.max(r+l,0),f=Math.max(a+d,0),u=h.margin,m=ne.allocAt(-u.left,-u.top,g,f),e=0;e<s;e++)(n=i[e])===h||!n.visible&&n!==v||(g=(u=n.margin).right+u.left,f=u.top+u.bottom,c=n.measuredBounds,g=Math.max(c.width+g,0),f=Math.max(c.height+f,0),(l=n.alignment).Mb()&&(l=t.defaultAlignment),l.ib()||(l=Wt),(n=n.alignmentFocus).Mb()&&(n=Wt),y?(y=!1,o.h(l.x*r+l.offsetX-(n.x*c.width+n.offsetX)-u.left,l.y*a+l.offsetY-(n.y*c.height+n.offsetY)-u.top,g,f)):ie(o,l.x*r+l.offsetX-(n.x*c.width+n.offsetX)-u.left,l.y*a+l.offsetY-(n.y*c.height+n.offsetY)-u.top,g,f));y?o.assign(m):p?o.aw(m.x,m.y,m.width,m.height):ie(o,m.x,m.y,m.width,m.height),ne.free(m)},Js.prototype.arrange=function(t,e,n){var i=e.length,o=t.pb(),r=(a=o.measuredBounds).width,a=a.height,s=(h=t.padding).left,h=h.top,u=s-n.x,l=h-n.y;o.arrange(u,l,r,a);for(var d=0;d<i;d++){var c=e[d];if(c!==o){var g=(f=c.measuredBounds).width,f=f.height;if((l=c.alignment).Mb()&&(l=t.defaultAlignment),l.ib()||(l=Wt),(m=c.alignmentFocus).Mb()&&(m=Wt),u=null,c instanceof hh&&""!==c.Lg&&((u=c.$a(c.Lg))===c&&(u=null)),null!==u){for(var p=u.naturalBounds,m=ee.allocAt(m.x*p.width-m.offsetX,m.y*p.height-m.offsetY);u!==c;)u.transform.sa(m),u=u.panel;u=l.x*r+l.offsetX-m.x,l=l.y*a+l.offsetY-m.y,ee.free(m)}else u=l.x*r+l.offsetX-(m.x*g+m.offsetX),l=l.y*a+l.offsetY-(m.y*f+m.offsetY);u-=n.x,l-=n.y,c.visible&&c.arrange(s+u,h+l,g,f)}}},n(Zs,Ks),Zs.prototype.measure=function(t,e,n,i,o,r,a){var s=i.length,h=t.pb(),u=e,l=n,d=(m=h.margin).right+m.left,c=m.top+m.bottom;h.measure(e,n,r,a),m=h.measuredBounds;var g=0,f=null;h instanceof Oh&&(g=(f=h).strokeWidth*f.scale);var p=Math.max(m.width+d,0),m=Math.max(m.height+c,0),y=(v=yh(h)).x*p+v.offsetX,v=v.y*m+v.offsetY,w=(b=vh(h)).x*p+b.offsetX,b=b.y*m+b.offsetY;for(isFinite(e)&&(u=Math.max(Math.abs(y-w)-g,0)),isFinite(n)&&(l=Math.max(Math.abs(v-b)-g,0)),(g=xe.alloc()).h(0,0),t=gh(t),b=0;b<s;b++)(v=i[b])===h||!v.visible&&v!==t||(p=(m=v.margin).right+m.left,y=m.top+m.bottom,v.measure(u,l,0,0),m=v.measuredBounds,p=Math.max(m.width+p,0),m=Math.max(m.height+y,0),g.h(Math.max(p,g.width),Math.max(m,g.height)));if(1===s)o.width=p,o.height=m,xe.free(g);else{switch(v=yh(h),s=i=0,(b=vh(h)).x!==v.x&&b.y!==v.y&&(i=g.width/Math.abs(b.x-v.x),s=g.height/Math.abs(b.y-v.y)),xe.free(g),g=0,null!==f&&(g=f.strokeWidth*f.scale,Gh(f)===Br&&(i=s=Math.max(i,s))),i+=Math.abs(v.offsetX)+Math.abs(b.offsetX)+g,s+=Math.abs(v.offsetY)+Math.abs(b.offsetY)+g,(f=h.stretch)===Gr&&(f=za(h,!1)),f){case Or:a=r=0;break;case Fr:isFinite(e)&&(i=e),isFinite(n)&&(s=n);break;case jr:isFinite(e)&&(i=e),a=0;break;case zr:r=0,isFinite(n)&&(s=n)}h.zm(),h.measure(i,s,r,a),o.width=h.measuredBounds.width+d,o.height=h.measuredBounds.height+c}},Zs.prototype.arrange=function(t,e){var n=e.length,i=t.pb(),o=i.measuredBounds,r=ne.alloc();r.h(0,0,1,1);var a=(s=i.margin).left,s=s.top,h=(u=t.padding).left,u=u.top;i.arrange(h+a,u+s,o.width,o.height);var l=yh(i),d=vh(i),c=l.y*o.height+l.offsetY,g=d.x*o.width+d.offsetX,d=d.y*o.height+d.offsetY;for(r.x=l.x*o.width+l.offsetX,r.y=c,ie(r,g,d,0,0),r.x+=a+h,r.y+=s+u,o=0;o<n;o++)(a=e[o])!==i&&(h=a.measuredBounds,s=a.margin,u=Math.max(h.width+s.right+s.left,0),l=Math.max(h.height+s.top+s.bottom,0),(c=a.alignment).Mb()&&(c=t.defaultAlignment),c.ib()||(c=Wt),u=r.width*c.x+c.offsetX-u*c.x+s.left+r.x,s=r.height*c.y+c.offsetY-l*c.y+s.top+r.y,a.visible&&(Gt(r.x,r.y,r.width,r.height,u,s,h.width,h.height)?a.arrange(u,s,h.width,h.height):a.arrange(u,s,h.width,h.height,new ne(r.x,r.y,r.width,r.height))));ne.free(r)},n(Qs,Ks),Qs.prototype.measure=function(t,e,n,i,o,r,a){for(var s=i.length,h=be(),u=be(),l=0;l<s;l++){var d=i[l],c=d instanceof hh?d:null;if(null===c||c.type!==hh.TableRow&&c.type!==hh.TableColumn||!d.visible)h.push(d);else{u.push(c);for(var g=c.W.j,f=g.length,p=0;p<f;p++){var m=g[p];c.type===hh.TableRow?m.row=d.row:c.type===hh.TableColumn&&(m.column=d.column),h.push(m)}}}0===(s=h.length)&&(t.getRowDefinition(0),t.getColumnDefinition(0));for(var y=[],v=0;v<s;v++){var w=h[v];Xa(w,!0),$a(w,!0),y[w.row]||(y[w.row]=[]),y[w.row][w.column]||(y[w.row][w.column]=[]),y[w.row][w.column].push(w)}Se(h);for(var b=be(),S=be(),x=be(),P={count:0},k={count:0},L=e,M=n,_=t.ub,s=_.length,N=0;N<s;N++){var A=_[N];void 0!==A&&(A.actual=0)}s=(_=t.qb).length;for(var T=0;T<s;T++)void 0!==(A=_[T])&&(A.actual=0);for(var C=y.length,D=0,E=0;E<C;E++)y[E]&&(D=Math.max(D,y[E].length));for(var F=Math.min(t.topIndex,C-1),O=Math.min(t.leftIndex,D-1),B=0,C=y.length,G=gh(t),j=0;j<C;j++)if(y[j]){D=y[j].length;for(var z=t.getRowDefinition(j),R=z.actual=0;R<D;R++)if(y[j][R]){var I=t.getColumnDefinition(R);void 0===b[R]&&(I.actual=0,b[R]=!0);for(var V=y[j][R],U=V.length,q=0;q<U;q++){var H,Y,K,X,W,$,J=V[q];!J.visible&&J!==G||((H=1<J.rowSpan||1<J.columnSpan)&&(j<F||R<O||S.push(J)),$=(K=J.margin).right+K.left,X=K.top+K.bottom,se=Ra(J,z,I,!1),Y=J.desiredSize,K=!isNaN(Y.height),K=!isNaN(Y.width)&&K,H||se===Or||K||j<F||R<O||(void 0!==P[R]||se!==Fr&&se!==jr||(P[R]=-1,P.count++),void 0!==k[j]||se!==Fr&&se!==zr||(k[j]=-1,k.count++),x.push(J)),J.measure(1/0,1/0,0,0),j<F||R<O||(K=J.measuredBounds,$=Math.max(K.width+$,0),X=Math.max(K.height+X,0),1!==J.rowSpan||se!==Or&&se!==jr||(W=(A=t.getRowDefinition(j)).vc(),M<(B=Math.max(X-A.actual,0))+W&&(B=Math.max(M-W,0)),X=0===A.actual,A.actual=A.actual+B,M=Math.max(M-(B+(X?W:0)),0)),1!==J.columnSpan||se!==Or&&se!==zr||(W=(A=t.getColumnDefinition(R)).vc(),L<(B=Math.max($-A.actual,0))+W&&(B=Math.max(L-W,0)),$=0===A.actual,A.actual=A.actual+B,L=Math.max(L-(B+($?W:0)),0)),H&&J.zm()))}}}Se(b);var Z=0,Q=0;s=t.columnCount;for(var tt=0;tt<s;tt++){var et=t.qb[tt];void 0!==et&&(Z+=et.ha,0!==et.ha&&(Z+=et.vc()))}s=t.rowCount;for(var nt=0;nt<s;nt++){var it=t.ub[nt];void 0!==it&&(Q+=it.ha,0!==it.ha&&(Q+=it.vc()))}L=Math.max(e-Z,0);var ot=M=Math.max(n-Q,0),rt=L;s=x.length;for(var at=0;at<s;at++){var st=x[at],ht=t.getRowDefinition(st.row),ut=t.getColumnDefinition(st.column),lt=st.measuredBounds,dt=st.margin,ct=dt.right+dt.left,dt=dt.top+dt.bottom;P[st.column]=0===ut.actual&&void 0!==P[st.column]?Math.max(lt.width+ct,P[st.column]):null,k[st.row]=0===ht.actual&&void 0!==k[st.row]?Math.max(lt.height+dt,k[st.row]):null}var gt,ft=0,pt=0;for(gt in k)"count"!==gt&&(ft+=k[gt]);for(gt in P)"count"!==gt&&(pt+=P[gt]);for(var mt=xe.alloc(),yt=0;yt<s;yt++){var vt=x[yt];if(vt.visible||vt===G){var wt=t.getRowDefinition(vt.row),bt=t.getColumnDefinition(vt.column),St=0,St=isFinite(bt.width)?bt.width:(St=isFinite(L)&&null!==P[vt.column]?0===pt?bt.actual+L:P[vt.column]/pt*rt:null===P[vt.column]&&bt.actual||L,Math.max(0,St-bt.vc())),xt=0,xt=isFinite(wt.height)?wt.height:(xt=isFinite(M)&&null!==k[vt.row]?0===ft?wt.actual+M:k[vt.row]/ft*ot:null===k[vt.row]&&wt.actual||M,Math.max(0,xt-wt.vc()));switch(mt.h(Math.max(bt.minimum,Math.min(St,bt.maximum)),Math.max(wt.minimum,Math.min(xt,wt.maximum))),se=Ra(vt,wt,bt,!1)){case jr:mt.height=Math.max(mt.height,wt.actual+M);break;case zr:mt.width=Math.max(mt.width,bt.actual+L)}St=vt.margin,xt=St.right+St.left,St=St.top+St.bottom;vt.zm(),vt.measure(mt.width,mt.height,bt.minimum,wt.minimum);vt=vt.measuredBounds,xt=Math.max(vt.width+xt,0),vt=Math.max(vt.height+St,0);isFinite(L)&&(xt=Math.min(xt,mt.width)),isFinite(M)&&(vt=Math.min(vt,mt.height));St=0,St=wt.actual;wt.actual=Math.max(wt.actual,vt),B=wt.actual-St,M=Math.max(M-B,0),St=bt.actual,bt.actual=Math.max(bt.actual,xt),B=bt.actual-St,L=Math.max(L-B,0)}}Se(x);var Pt=xe.alloc(),kt=be(),Lt=be();if(0!==(s=S.length))for(var Mt=0;Mt<C;Mt++)if(y[Mt]){D=y[Mt].length;var _t=t.getRowDefinition(Mt);kt[Mt]=_t.actual;for(var Nt,At=0;At<D;At++)y[Mt][At]&&(Nt=t.getColumnDefinition(At),Lt[At]=Nt.actual)}for(var Tt=0;Tt<s;Tt++){var Ct=S[Tt];if(Ct.visible||Ct===G){var Dt=t.getRowDefinition(Ct.row),Et=t.getColumnDefinition(Ct.column);switch(mt.h(Math.max(Et.minimum,Math.min(e,Et.maximum)),Math.max(Dt.minimum,Math.min(n,Dt.maximum))),se=Ra(Ct,Dt,Et,!1)){case Fr:0!==Lt[Et.index]&&(mt.width=Math.min(mt.width,Lt[Et.index])),0!==kt[Dt.index]&&(mt.height=Math.min(mt.height,kt[Dt.index]));break;case jr:0!==Lt[Et.index]&&(mt.width=Math.min(mt.width,Lt[Et.index]));break;case zr:0!==kt[Dt.index]&&(mt.height=Math.min(mt.height,kt[Dt.index]))}isFinite(Et.width)&&(mt.width=Et.width),isFinite(Dt.height)&&(mt.height=Dt.height),Pt.h(0,0);for(var Ft=1;Ft<Ct.rowSpan&&!(Ct.row+Ft>=t.rowCount);Ft++)A=t.getRowDefinition(Ct.row+Ft),B=0,B=se===Fr||se===zr?Math.max(A.minimum,0===kt[Ct.row+Ft]?A.maximum:Math.min(kt[Ct.row+Ft],A.maximum)):Math.max(A.minimum,isNaN(A.Xc)?A.maximum:Math.min(A.Xc,A.maximum)),Pt.height+=B;for(var Ot=1;Ot<Ct.columnSpan&&!(Ct.column+Ot>=t.columnCount);Ot++)A=t.getColumnDefinition(Ct.column+Ot),B=0,B=se===Fr||se===jr?Math.max(A.minimum,0===Lt[Ct.column+Ot]?A.maximum:Math.min(Lt[Ct.column+Ot],A.maximum)):Math.max(A.minimum,isNaN(A.Xc)?A.maximum:Math.min(A.Xc,A.maximum)),Pt.width+=B;mt.width+=Pt.width,mt.height+=Pt.height;var Bt=Ct.margin,Gt=Bt.right+Bt.left,jt=Bt.top+Bt.bottom;Ct.measure(mt.width,mt.height,r,a);for(var Bt=Ct.measuredBounds,Gt=Math.max(Bt.width+Gt,0),jt=Math.max(Bt.height+jt,0),zt=0,Rt=0;Rt<Ct.rowSpan&&!(Ct.row+Rt>=t.rowCount);Rt++)zt+=(A=t.getRowDefinition(Ct.row+Rt)).total||0;if(zt<jt){var It=jt-zt,Vt=jt-zt;if(null!==Ct.spanAllocation)for(var Ut=Ct.spanAllocation,qt=0;qt<Ct.rowSpan&&!(It<=0)&&!(Ct.row+qt>=t.rowCount);qt++){var Ht=(A=t.getRowDefinition(Ct.row+qt)).ha||0,Yt=Ut(Ct,A,Vt);A.actual=Math.min(A.maximum,Ht+Yt),A.ha!==Ht&&(It-=A.ha-Ht)}for(;0<It;){var Kt=A.ha||0;if(isNaN(A.height)&&A.maximum>Kt&&(A.actual=Math.min(A.maximum,Kt+It),A.ha!==Kt&&(It-=A.ha-Kt)),0===A.index)break;A=t.getRowDefinition(A.index-1)}}for(var Xt=0,Wt=0;Wt<Ct.columnSpan&&!(Ct.column+Wt>=t.columnCount);Wt++)Xt+=(A=t.getColumnDefinition(Ct.column+Wt)).total||0;if(Xt<Gt){var $t=Gt-Xt,Jt=Gt-Xt;if(null!==Ct.spanAllocation)for(var Zt=Ct.spanAllocation,Qt=0;Qt<Ct.columnSpan&&!($t<=0)&&!(Ct.column+Qt>=t.columnCount);Qt++){var te=(A=t.getColumnDefinition(Ct.column+Qt)).ha||0,ee=Zt(Ct,A,Jt);A.actual=Math.min(A.maximum,te+ee),A.ha!==te&&($t-=A.ha-te)}for(;0<$t;){var ne=A.ha||0;if(isNaN(A.width)&&A.maximum>ne&&(A.actual=Math.min(A.maximum,ne+$t),A.ha!==ne&&($t-=A.ha-ne)),0===A.index)break;A=t.getColumnDefinition(A.index-1)}}}}Se(S),xe.free(Pt),xe.free(mt),void 0!==kt&&Se(kt),void 0!==Lt&&Se(Lt);var ie=0,oe=0,re=t.desiredSize,ae=t.maxSize,se=za(t,!0),he=Q=Z=0,ue=0;s=t.columnCount;for(var le=0;le<s;le++)void 0!==t.qb[le]&&(A=t.getColumnDefinition(le),isFinite(A.width)?(he+=A.width,he+=A.vc()):Ch(A)===Eh?(he+=A.ha,he+=A.vc()):0!==A.ha&&(Z+=A.ha,Z+=A.vc()));ie=isFinite(re.width)?Math.min(re.width,ae.width):se!==Or&&isFinite(e)?e:Z,ie=Math.max(ie,t.minSize.width),ie=Math.max(ie-he,0);for(var de=0===Z?1:Math.max(ie/Z,1),ce=0;ce<s;ce++)void 0!==t.qb[ce]&&(A=t.getColumnDefinition(ce),isFinite(A.width)||Ch(A)===Eh||(A.actual=A.ha*de),A.position=o.width,0!==A.ha&&(o.width+=A.ha,o.width+=A.vc()));s=t.rowCount;for(var ge=0;ge<s;ge++)void 0!==t.ub[ge]&&(A=t.getRowDefinition(ge),isFinite(A.height)?(ue+=A.height,ue+=A.vc()):Ch(A)===Eh?(ue+=A.ha,ue+=A.vc()):0!==A.ha&&(Q+=A.ha,0!==A.ha&&(Q+=A.vc())));oe=isFinite(re.height)?Math.min(re.height,ae.height):se!==Or&&isFinite(n)?n:Q,oe=Math.max(oe,t.minSize.height),oe=Math.max(oe-ue,0);for(var fe=0===Q?1:Math.max(oe/Q,1),pe=0;pe<s;pe++)void 0!==t.ub[pe]&&(A=t.getRowDefinition(pe),isFinite(A.height)||Ch(A)===Eh||(A.actual=A.ha*fe),A.position=o.height,0!==A.ha&&(o.height+=A.ha,0!==A.ha&&(o.height+=A.vc())));s=u.length;for(var me=0;me<s;me++){var ye=u[me],ve=0,we=0,we=ye.type===hh.TableRow?(ve=o.width,(A=t.getRowDefinition(ye.row)).actual):(ve=(A=t.getColumnDefinition(ye.column)).actual,o.height);ye.measuredBounds.h(0,0,ve,we),Xa(ye,!1),y[ye.row]||(y[ye.row]=[]),y[ye.row][ye.column]||(y[ye.row][ye.column]=[]),y[ye.row][ye.column].push(ye)}Se(u),t.Hp=y},Qs.prototype.arrange=function(t,e,n){for(var i=e.length,o=(r=t.padding).left,r=r.top,a=t.Hp,s=a.length,h=0,u=0;u<s;u++)a[u]&&(h=Math.max(h,a[u].length));for(u=Math.min(t.topIndex,s-1);u!==s&&(void 0===t.ub[u]||0===t.ub[u].ha);)u++;for(u=Math.min(u,s-1),u=-t.ub[u].position,y=Math.min(t.leftIndex,h-1);y!==h&&(void 0===t.qb[y]||0===t.qb[y].ha);)y++;y=Math.min(y,h-1);for(var l=-t.qb[y].position,d=xe.alloc(),c=0;c<s;c++)if(a[c]){h=a[c].length;var g=t.getRowDefinition(c),f=g.position+u+r;0!==g.ha&&(f+=g.Iv());for(var p=0;p<h;p++)if(a[c][p]){var m=t.getColumnDefinition(p),y=m.position+l+o;0!==m.ha&&(y+=m.Iv());for(var v=a[c][p],w=v.length,b=0;b<w;b++){var S=v[b],x=S.measuredBounds;if(null===(M=S instanceof hh?S:null)||M.type!==hh.TableRow&&M.type!==hh.TableColumn){d.h(0,0);for(var P=1;P<S.rowSpan&&!(c+P>=t.rowCount);P++)M=t.getRowDefinition(c+P),d.height+=M.total;for(P=1;P<S.columnSpan&&!(p+P>=t.columnCount);P++)M=t.getColumnDefinition(p+P),d.width+=M.total;var k=m.ha+d.width,L=g.ha+d.height,P=y,M=f,_=k,N=L,A=y,T=f,C=k,D=L;y+k>n.width&&(C=Math.max(n.width-y,0)),f+L>n.height&&(D=Math.max(n.height-f,0));var E,F,O,B,G,j=S.alignment;j.Mb()?((j=t.defaultAlignment).ib()||(j=Wt),E=j.x,F=j.y,O=j.offsetX,j=j.offsetY,B=m.alignment,G=g.alignment,B.ib()&&(E=B.x,O=B.offsetX),G.ib()&&(F=G.y,j=G.offsetY)):(E=j.x,F=j.y,O=j.offsetX,j=j.offsetY),(isNaN(E)||isNaN(F))&&(F=E=.5,j=O=0),B=x.width,G=x.height;var z=S.margin,R=z.left+z.right,I=z.top+z.bottom,V=Ra(S,g,m,!1);!isNaN(S.desiredSize.width)||V!==Fr&&V!==jr||(B=Math.max(k-R,0)),!isNaN(S.desiredSize.height)||V!==Fr&&V!==zr||(G=Math.max(L-I,0)),k=S.maxSize,L=S.minSize,B=Math.min(k.width,B),G=Math.min(k.height,G),B=Math.max(L.width,B),k=(G=Math.max(L.height,G))+I,P+=_*E-(B+R)*E+O+z.left,M+=N*F-k*F+j+z.top,S.visible&&(Gt(A,T,C,D,P,M,x.width,x.height)?S.arrange(P,M,B,G):S.arrange(P,M,B,G,new ne(A,T,C,D)))}else S.zl(),S.actualBounds.ea(),_=S.actualBounds,P=ne.allocAt(_.x,_.y,_.width,_.height),_.x=M.type===hh.TableRow?o:y,_.y=M.type===hh.TableColumn?r:f,_.width=x.width,_.height=x.height,S.actualBounds.freeze(),$a(S,!1),Et(P,_)||null!==(x=S.part)&&(x.Oh(),S.ip(x)),ne.free(P)}}}for(xe.free(d),t=0;t<i;t++)null===(o=(n=e[t])instanceof hh?n:null)||o.type!==hh.TableRow&&o.type!==hh.TableColumn||(o=n.actualBounds,n.naturalBounds.ea(),n.naturalBounds.h(0,0,o.width,o.height),n.naturalBounds.freeze())},n(th,Ks),th.prototype.measure=function(){},th.prototype.arrange=function(){},n(eh,Ks),eh.prototype.measure=function(){},eh.prototype.arrange=function(){},n(nh,Ks),nh.prototype.measure=function(t,e,n,i,o,r,a){1<i.length&&O("Viewbox Panel cannot contain more than one GraphObject."),(i=i[0]).ya=1,i.zm(),i.measure(1/0,1/0,r,a);var s,h,u,l,d,c=i.measuredBounds,g=(f=i.margin).right+f.left,f=f.top+f.bottom;(isFinite(e)||isFinite(n))&&(s=i.scale,h=c.width,c=c.height,u=Math.max(e-g,0),l=Math.max(n-f,0),d=1,t.viewboxStretch===Br?0!==h&&0!==c&&(d=Math.min(u/h,l/c)):0!==h&&0!==c&&(d=Math.max(u/h,l/c)),0===d&&(d=1e-4),i.ya*=d,s!==i.scale&&(Xa(i,!0),i.measure(1/0,1/0,r,a))),c=i.measuredBounds,o.width=isFinite(e)?e:Math.max(c.width+g,0),o.height=isFinite(n)?n:Math.max(c.height+f,0)},nh.prototype.arrange=function(t,e,n){var i=(e=e[0]).measuredBounds,o=e.margin,r=Math.max(i.width+(o.right+o.left),0),o=Math.max(i.height+(o.top+o.bottom),0),a=e.alignment;a.Mb()&&(a=t.defaultAlignment),a.ib()||(a=Wt),e.arrange(n.width*a.x-r*a.x+a.offsetX,n.height*a.y-o*a.y+a.offsetY,i.width,i.height)},n(ih,Ks),ih.prototype.measure=function(){},ih.prototype.arrange=function(){},ih.prototype.bc=function(t,e,n){(n=t.Af()*n.scale)<=0&&(n=1);var i=(o=t.gridCellSize).width,o=o.height,r=t.naturalBounds,a=t.actualBounds,s=r.width,h=r.height,u=Math.ceil(s/i),l=Math.ceil(h/o),d=t.gridOrigin;e.save(),e.beginPath(),e.rect(0,0,s,h),e.clip();for(var c=[],g=t.W.j,f=g.length,p=0;p<f;p++){var m=g[p],y=[];if(c.push(y),m.visible){var v=m.interval;if(!(v<0)){m=ch(m.figure);for(var w,b=0;b<f;b++)b!==p&&(!(w=g[b]).visible||ch(w.figure)!==m||v<(w=w.interval)&&y.push(w))}}}for(f=(g=t.W.j).length,p=0;p<f;p++){var S=g[p];if(S.visible&&(y=S.interval,!(i*Math.abs(y)*n<2))){if((m=1)!==(v=S.opacity)){if(0===v)continue;m=e.globalAlpha,e.globalAlpha=m*v}b=c[p],w=!1;var x=S.strokeDashArray;if(null!==x&&(w=!0,e.Gt(x,S.strokeDashOffset)),"LineV"===S.figure&&null!==S.stroke&&0<S.strokeWidth){for(e.lineWidth=S.strokeWidth,Oa(t,e,S.stroke,!1,!1,r,a),e.beginPath(),x=S=Math.floor(-d.x/i);x<=S+u;x++){var P=x*i+d.x;0<=P&&P<=s&&oh(x,y,b)&&(e.moveTo(P,0),e.lineTo(P,h))}e.stroke()}else if("LineH"===S.figure&&null!==S.stroke&&0<S.strokeWidth){for(e.lineWidth=S.strokeWidth,Oa(t,e,S.stroke,!1,!1,r,a),e.beginPath(),x=S=Math.floor(-d.y/o);x<=S+l;x++)0<=(P=x*o+d.y)&&P<=h&&oh(x,y,b)&&(e.moveTo(0,P),e.lineTo(s,P));e.stroke()}else if("BarV"===S.figure&&null!==S.fill)for(Oa(t,e,S.fill,!0,!1,r,a),S=S.width,isNaN(S)&&(S=i),P=x=Math.floor(-d.x/i);P<=x+u;P++){var k=P*i+d.x;0<=k&&k<=s&&oh(P,y,b)&&e.fillRect(k,0,S,h)}else if("BarH"===S.figure&&null!==S.fill)for(Oa(t,e,S.fill,!0,!1,r,a),S=S.height,isNaN(S)&&(S=o),P=x=Math.floor(-d.y/o);P<=x+l;P++)0<=(k=P*o+d.y)&&k<=h&&oh(P,y,b)&&e.fillRect(0,k,s,S);w&&e.Et(),1!==v&&(e.globalAlpha=m)}}e.restore(),e.tc(!1)},n(rh,Ks),rh.prototype.measure=function(t,e,n,i,o){if(n=i.length,t instanceof tl||t instanceof wl){var r=null,a=null,s=null;if(t instanceof wl&&(a=r=t),t instanceof tl&&(r=(s=t).adornedPart),r instanceof wl){var h=r;if(0===n)Tt(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var u=t instanceof tl?null:r.path,l=r.routeBounds;(e=t.xg).h(0,0,l.width,l.height);var d=h.points,r=r.pointsCount;null!==s?s.Bk(!1):null!==a&&a.Bk(!1);var c=l.width,g=l.height;t.location.h(l.x,l.y),t.l.length=0,null!==u&&(ah(t,c,g,u),s=u.measuredBounds,e.Oc(s),t.l.push(s)),s=Ie.alloc();for(var f=ee.alloc(),p=ee.alloc(),m=0;m<n;m++){var y,v,w,b,S,x,P,k,L,M,_,N,A,T,C,D,E=i[m];E!==u&&(E.isPanelMain&&E instanceof Oh?(ah(t,c,g,E),x=E.measuredBounds,e.Oc(x),t.l.push(x)):r<2?(E.measure(1/0,1/0,0,0),x=E.measuredBounds,e.Oc(x),t.l.push(x)):(y=E.segmentIndex,v=E.segmentFraction,(w=E.alignmentFocus).mc()&&(w=Wt),b=E.segmentOrientation,S=E.segmentOffset,isNaN(y)?(M=h.na,x=be(),M.Xv(v,x),(P=ee.allocAt(x[0],x[1])).add(h.i(0)),M.type===en||(M=M.figures.first()),P.offset(-M.startX,-M.startY),M=x[2],b!==zl&&(_=h.computeAngle(E,b,M),E.Yb=_),_=P.x-l.x,k=P.y-l.y,ee.free(P),Se(x)):k=y<-r||r<=y?(k=h.midPoint,M=h.midAngle,b!==zl&&(_=h.computeAngle(E,b,M),E.Yb=_),_=k.x-l.x,k.y-l.y):(x=(_=0)<=y?(k=d.L(y),y<r-1?d.L(y+1):k):(_=r+y,k=d.L(_),0<_?d.L(_-1):k),M=k.Na(x)?(_=0<=y?(M=0<y?d.L(y-1):k,y<r-2?d.L(y+2):x):(M=_<r-1?d.L(_+1):k,1<_?d.L(_-2):x),P=M.Fe(k),(L=x.Fe(_))+10<P?0<=y?M.Sa(k):k.Sa(M):P+10<L?0<=y?x.Sa(_):_.Sa(x):0<=y?M.Sa(_):_.Sa(M)):0<=y?k.Sa(x):x.Sa(k),b!==zl&&(_=h.computeAngle(E,b,M),E.Yb=_),_=k.x+(x.x-k.x)*v-l.x,k.y+(x.y-k.y)*v-l.y),E.measure(1/0,1/0,0,0),x=E.measuredBounds,P=E.naturalBounds,N=0,E instanceof Oh&&(N=E.strokeWidth),L=P.width+N,A=P.height+N,s.reset(),s.translate(-x.x,-x.y),s.scale(E.scale,E.scale),s.rotate(b===zl?E.angle:M,L/2,A/2),b!==Kl&&b!==Jl||s.rotate(90,L/2,A/2),b!==Xl&&b!==Zl||s.rotate(-90,L/2,A/2),b===Ql&&(45<M&&M<135||225<M&&M<315)&&s.rotate(-M,L/2,A/2),P=new ne(0,0,L,A),f.sj(P,w),s.sa(f),w=-f.x+N/2*E.scale,E=-f.y+N/2*E.scale,p.assign(S),N=isNaN(S.x),T=isNaN(S.y),N||T?(L=L/2+3,A=A/2+3,C=45<=M&&M<=135,D=225<=M&&M<=315,b===zl&&(C||D)?(p.x=T?L:S.y,p.y=N?A:S.x,C?0<=y||isNaN(y)&&v<.5||!N||(p.y=-A):D&&((0<=y||isNaN(y)&&v<.5)&&N&&(p.y=-A),T&&(p.x=-L))):(N&&(p.x=0<=y||isNaN(y)&&v<.5?L:-L),T&&(p.y=-A),p.rotate(M))):p.rotate(M),_+=p.x,k+=p.y,P.set(x),P.h(_+w,k+E,x.width,x.height),t.l.push(P),e.Oc(P)))}if(null!==a)for(i=a.labelNodes;i.next();)i.value.measure(1/0,1/0);t.xg=e,(t=t.location).h(t.x+e.x,t.y+e.y),Tt(o,e.width||0,e.height||0),Ie.free(s),ee.free(f),ee.free(p)}}}},rh.prototype.arrange=function(t,e){var n=e.length;if(t instanceof tl||t instanceof wl){var i=null,o=null,r=null;t instanceof wl&&(o=i=t),t instanceof tl&&(i=(r=t).adornedPart);var a=t instanceof tl?null:i.path;if(0!==t.l.length){var s=t.l,h=0;for(null!==a&&h<t.l.length&&(L=s[h],h++,a.arrange(L.x-t.xg.x,L.y-t.xg.y,L.width,L.height)),L=0;L<n;L++){var u=e[L];u!==a&&h<t.l.length&&(g=s[h],h++,u.arrange(g.x-t.xg.x,g.y-t.xg.y,g.width,g.height))}}if(2<=(n=(e=i.points).count)&&t instanceof wl)for(i=t.labelNodes;i.next();){var l,d,c,g,f,p,m,y,v,w,b,S,x,P=t,s=(a=i.value).segmentIndex,h=a.segmentFraction,k=a.alignmentFocus,L=a.segmentOrientation,u=a.segmentOffset;isNaN(s)?(g=P.na,l=be(),g.Xv(h,l),(f=ee.allocAt(l[0],l[1])).add(P.i(0)),g.type===en||(g=g.figures.first()),f.offset(-g.startX,-g.startY),g=l[2],L!==zl&&(P=P.computeAngle(a,L,g),a.angle=P),P=f.x,p=f.y,ee.free(f),Se(l)):p=s<-n||n<=s?(p=P.midPoint,g=P.midAngle,L!==zl&&(P=P.computeAngle(a,L,g),a.angle=P),P=p.x,p.y):(p=(f=0)<=s?(l=e.j[s],s<n-1?e.j[s+1]:l):(f=n+s,l=e.j[f],0<f?e.j[f-1]:l),g=l.Na(p)?(f=0<=s?(g=0<s?e.j[s-1]:l,s<n-2?e.j[s+2]:p):(g=f<n-1?e.j[f+1]:l,1<f?e.j[f-2]:p),d=g.Fe(l),(c=p.Fe(f))+10<d?0<=s?g.Sa(l):l.Sa(g):d+10<c?0<=s?p.Sa(f):f.Sa(p):0<=s?g.Sa(f):f.Sa(g)):0<=s?l.Sa(p):p.Sa(l),L!==zl&&(P=P.computeAngle(a,L,g),a.angle=P),P=l.x+(p.x-l.x)*h,l.y+(p.y-l.y)*h),k.Vt()?a.location=new ee(P,p):(k.mc()&&(k=Wt),(l=Ie.alloc()).reset(),l.scale(a.scale,a.scale),l.rotate(a.angle,0,0),v=a.naturalBounds,f=ne.allocAt(0,0,v.width,v.height),(d=ee.alloc()).sj(f,k),l.sa(d),k=-d.x,c=-d.y,m=v.width,y=v.height,(v=ee.alloc()).assign(u),w=isNaN(u.x),b=isNaN(u.y),w||b?(m=m/2+3,y=y/2+3,S=45<=g&&g<=135,x=225<=g&&g<=315,L===zl&&(S||x)?(v.x=b?m:u.y,v.y=w?y:u.x,S?0<=s||isNaN(s)&&h<.5||!w||(v.y=-y):x&&((0<=s||isNaN(s)&&h<.5)&&w&&(v.y=-y),b&&(v.x=-m))):(w&&(v.x=0<=s||isNaN(s)&&h<.5?m:-m),b&&(v.y=-y),v.rotate(g))):v.rotate(g),P+=v.x,p+=v.y,l.Ow(f),k+=f.x,c+=f.y,s=ee.allocAt(P+k,p+c),a.move(s),ee.free(s),ee.free(v),ee.free(d),ne.free(f),Ie.free(l))}null!==r?r.Bk(!1):null!==o&&o.Bk(!1)}},n(sh,Ks),sh.prototype.measure=function(t,e,n,i,o,r,a){var s=t.pb();t.bh=[];var h=s.margin,u=h.right+h.left,l=h.top+h.bottom;s.measure(e,n,r,a);a=s.measuredBounds,l=new ne(-h.left,-h.top,Math.max(a.width+u,0),Math.max(a.height+l,0));t.bh.push(l),o.assign(l);for(var d=s.geometry,c=s.strokeWidth,g=d.flattenedSegments,f=d.flattenedLengths,p=d.flattenedTotalLength,m=g.length,y=0,v=0,w=be(),b=0;b<m;b++){for(var S=g[b],x=[],v=y=0,P=S.length,k=0;k<P;k+=2){var L,M=S[k],_=S[k+1];0!==k&&((L=180*Math.atan2(_-v,M-y)/Math.PI)<0&&(L+=360),x.push(L)),y=M,v=_}w.push(x)}if(null===t.dh){for(var N=[],A=t.W.j,T=A.length,C=0;C<T;C++){var D=A[C],E=[];if(N.push(E),D.visible){var F,O=D.interval;if(!(O<0))for(var B=0;B<T;B++)B!==C&&(!(F=A[B]).visible||D.constructor!==F.constructor||O<(F=F.interval)&&E.push(F))}}t.dh=N}var G=t.dh,j=t.W.j,z=j.length,R=0;t.Jj=[];for(var I=0;I<z;I++){var V=j[I],U=[];if(V.visible&&V!==s){var q=Math.abs(V.interval),H=t.graduatedTickUnit;if(!(H*q*p/t.graduatedRange<2)){var Y=f[0][0],K=0,X=0,W=p*V.graduatedStart-1e-4,$=p*V.graduatedEnd+1e-4,J=H*q,Z=t.graduatedTickBase;Z<t.graduatedMin?Z+=(q=0==(q=(t.graduatedMin-Z)/J)%1?q:Math.floor(q+1))*J:Z>t.graduatedMin+J&&(Z-=Math.floor((Z-t.graduatedMin)/J)*J);for(var Q=G[I];Z<=t.graduatedMax;){t:{for(var tt=Q.length,et=0;et<tt;et++)if(Ue.$((Z-t.graduatedTickBase)%(Q[et]*t.graduatedTickUnit),0)){var nt=!1;break t}nt=!0}if(nt&&(null===V.graduatedSkip||!V.graduatedSkip(Z))&&(p<(R=(Z-t.graduatedMin)*p/t.graduatedRange)&&(R=p),W<=R&&R<=$)){for(var it=w[K][X],ot=f[K][X];K<f.length;){for(;Y<R&&X<f[K].length-1;)X++,it=w[K][X],Y+=ot=f[K][X];if(R<=Y)break;X=0,it=w[++K][X],Y+=ot=f[K][X]}var rt=g[K],at=rt[2*X],st=rt[2*X+1],ht=(R-(Y-ot))/ot,ut=new ee(at+(rt[2*X+2]-at)*ht+c/2-d.bounds.x,st+(rt[2*X+3]-st)*ht+c/2-d.bounds.y);ut.scale(s.scale,s.scale);at=it,st=w[K];ht<1e-4?0<X?at=st[X-1]:Ue.$(rt[0],rt[rt.length-2])&&Ue.$(rt[1],rt[rt.length-1])&&(at=st[st.length-1]):.9999<ht&&(X+1<st.length?at=st[X+1]:Ue.$(rt[0],rt[rt.length-2])&&Ue.$(rt[1],rt[rt.length-1])&&(at=st[0])),it!==at&&(180<Math.abs(it-at)&&(it<at?it+=360:at+=360),it=(it+at)/2%360),V instanceof Hh?(at="")!==(at=null!==V.graduatedFunction?null!=(at=V.graduatedFunction(Z))?at.toString():"":(+Z.toFixed(2)).toString())&&U.push({Jm:ut,angle:it,text:at}):U.push({Jm:ut,angle:it})}Z+=J}}}t.Jj.push(U)}Se(w);var lt=t.Jj;if(null!==lt)for(var dt=i.length,ct=0;ct<dt;ct++){var gt=i[ct],ft=lt[ct];if(gt.visible&&gt!==s&&0!==ft.length){if(gt instanceof Oh){var pt=t,mt=o,yt=gt.alignmentFocus;yt.mc()&&(yt=oe);var vt=gt.angle;gt.Yb=0,gt.measure(1/0,1/0,0,0),gt.Yb=vt;var vt=gt.measuredBounds,wt=vt.width,bt=vt.height,vt=ne.allocAt(0,0,wt,bt),St=ee.alloc();St.sj(vt,yt),ne.free(vt);for(var xt=-St.x,Pt=-St.y,kt=new ne,Lt=ft.length,Mt=0;Mt<Lt;Mt++)for(var _t=ft[Mt],Nt=_t.Jm.x,At=_t.Jm.y,Tt=_t.angle,Ct=0;Ct<4;Ct++){switch(Ct){case 0:St.h(xt,Pt);break;case 1:St.h(xt+wt,Pt);break;case 2:St.h(xt,Pt+bt);break;case 3:St.h(xt+wt,Pt+bt)}St.rotate(Tt+gt.angle),St.offset(Nt,At),0===Mt&&0===Ct?kt.h(St.x,St.y,0,0):kt.Me(St),St.offset(-Nt,-At),St.rotate(-Tt-gt.angle)}ee.free(St),null!==pt.bh&&pt.bh.push(kt),ie(mt,kt.x,kt.y,kt.width,kt.height)}else if(gt instanceof Hh){pt=t,mt=o;null===pt.zh&&(pt.zh=new Hh);var Dt=pt.zh;Yh(Dt,gt);var Et=gt.alignmentFocus;Et.mc()&&(Et=oe);for(var Ft=gt.segmentOrientation,Ot=gt.segmentOffset,Bt=new ne,Gt=0,jt=0,zt=ft.length,Rt=0;Rt<zt;Rt++){var It=ft[Rt],Vt=It.Jm.x,Ut=It.Jm.y,qt=It.angle,jt=Gt=gt.angle;Ft!==zl&&(jt=Ft===Yl||Ft===$l?qt+gt.angle:qt,Gt=wl.computeAngle(Ft,jt)),Dt.Yb=Gt,Dt.text=It.text||"",Dt.measure(1/0,1/0,0,0);var Ht=Dt.measuredBounds,Yt=Dt.naturalBounds,Kt=Yt.width,Xt=Yt.height,Wt=Ie.alloc();Wt.reset(),Wt.translate(-Ht.x,-Ht.y),Wt.scale(Dt.scale,Dt.scale),Wt.rotate(jt,Kt/2,Xt/2),Ft!==Kl&&Ft!==Jl||Wt.rotate(90,Kt/2,Xt/2),Ft!==Xl&&Ft!==Zl||Wt.rotate(-90,Kt/2,Xt/2),Ft===Ql&&(45<qt&&qt<135||225<qt&&qt<315)&&Wt.rotate(-qt,Kt/2,Xt/2);var $t=ne.allocAt(0,0,Kt,Xt),Jt=ee.alloc();Jt.sj($t,Et),Wt.sa(Jt);var Zt=-Jt.x,Qt=-Jt.y,te=ee.alloc();te.assign(Ot),isNaN(te.x)&&(te.x=Kt/2+3),isNaN(te.y)&&(te.y=-(Xt/2+3)),te.rotate(qt);Qt=new ne(Vt+=te.x+Zt,Ut+=te.y+Qt,Ht.width,Ht.height),Ht=new ne(Ht.x,Ht.y,Ht.width,Ht.height),Yt=new ne(Yt.x,Yt.y,Yt.width,Yt.height);It.zA=Gt,It.lineCount=Dt.lineCount,It.lines=[Dt.sb,Dt.Di,Dt.ke,Dt.xe,Dt.Pb,Dt.jb,Dt.ie],It.actualBounds=Qt,It.measuredBounds=Ht,It.naturalBounds=Yt,0===Rt?Bt.assign(Qt):Bt.Oc(Qt),ee.free(te),ee.free(Jt),ne.free($t),Ie.free(Wt)}null!==pt.bh&&pt.bh.push(Bt),ie(mt,Bt.x,Bt.y,Bt.width,Bt.height)}Xa(gt,!1)}}},sh.prototype.arrange=function(t,e,n){if(null!==t.bh){var i=t.pb(),o=t.Jj;if(null!==o){var r=t.bh,a=0,s=r[a];a++,null!==i&&i.arrange(s.x-n.x,s.y-n.y,s.width,s.height);for(var h=e.length,u=0;u<h;u++){var l=e[u],s=o[u];l.visible&&l!==i&&0!==s.length&&(s=r[a],a++,l.arrange(s.x-n.x,s.y-n.y,s.width,s.height))}t.bh=null}}},sh.prototype.bc=function(t,e,n){var i=n.xi;n.xi=!0;var o=(r=t.naturalBounds).width,r=r.height;e.save(),e.beginPath(),e.rect(-1,-1,o+1,r+1),e.clip(),(o=t.pb()).bc(e,n),(r=t.Af()*n.scale)<=0&&(r=1);for(var a=o.actualBounds,s=t.W.j,h=t.Jj,u=s.length,l=0;l<u;l++){var d=s[l],c=h[l],g=c.length;if(d.visible&&d!==o&&0!==c.length)if(d instanceof Oh){if(!(t.graduatedTickUnit*d.interval*o.geometry.flattenedTotalLength/t.graduatedRange*r<2)){var f=d.measuredBounds,p=d.strokeWidth*d.scale,m=d.alignmentFocus;m.mc()&&(m=oe);for(var y=0;y<g;y++){var v=c[y].Jm,w=c[y].angle,b=m,S=d.ob;S.reset(),S.translate(v.x+a.x,v.y+a.y),S.rotate(w+d.angle,0,0),S.translate(-f.width*b.x+b.offsetX+p/2,-f.height*b.y+b.offsetY+p/2),S.scale(d.scale,d.scale),Ha(d,!1),d.Zh.set(d.ob),d.jl=d.scale,Ya(d,!1),d.bc(e,n),d.ob.reset()}}}else if(d instanceof Hh)for(null===t.zh&&(t.zh=new Hh),Yh(f=t.zh,d),d=0;d<g;d++)(p=c[d]).actualBounds&&p.measuredBounds&&p.naturalBounds&&(f.Tb=p.text||"",f.Yb=p.zA||0,f.Vc=p.lineCount||0,void 0!==(m=p.lines)&&(f.sb=m[0],f.Di=m[1],f.ke=m[2],f.xe=m[3],f.Pb=m[4],f.jb=m[5],f.ie=m[6]),p.naturalBounds&&(f.qc=p.naturalBounds),p.actualBounds&&(m=p.actualBounds,f.arrange(m.x,m.y,m.width,m.height)),m=p.actualBounds,f.arrange(m.x,m.y,m.width,m.height),y=p.measuredBounds,p=p.naturalBounds,(v=f.ob).reset(),v.translate(m.x+a.x,m.y+a.y),v.translate(-y.x,-y.y),Ga(f,v,p.x,p.y,p.width,p.height),Ha(f,!1),f.Zh.set(f.ob),f.jl=f.scale,Ya(f,!1),f.bc(e,n))}n.xi=i,e.restore(),e.tc(!0)},n(hh,Na),hh.prototype.cloneProtected=function(t){if(Na.prototype.cloneProtected.call(this,t),t.pa=this.pa,t.gb=this.gb.G(),t.Ln=this.Ln.G(),t.Rf=this.Rf,t.pa===hh.Table){t.Cj=this.Cj.G(),t.Ug=this.Ug,t.si=this.si,t.ri=this.ri,t.Tg=this.Tg,t.Sg=this.Sg,t.pi=this.pi;var e,n=[];if(0<this.ub.length)for(var i=this.ub,o=i.length,r=0;r<o;r++)void 0!==i[r]&&((e=i[r].copy()).rj(t),n[r]=e);if(t.ub=n,n=[],0<this.qb.length)for(o=(i=this.qb).length,r=0;r<o;r++)void 0!==i[r]&&((e=i[r].copy()).rj(t),n[r]=e);t.qb=n,t.ak=this.ak,t.zj=this.zj,t.Xi=this.Xi,t.Fi=this.Fi}t.nq=this.nq,t.lo=this.lo.G(),t.mo=this.mo.G(),t.io=this.io,t.ho=this.ho,t.ko=this.ko,t.jo=this.jo,t.Jj=this.Jj,t.dh=this.dh,t.lb=this.lb,t.li=this.li,t.zo=this.zo,t.Bi=this.Bi,t.pe=this.pe,t.Dl=this.Dl,t.xg.assign(this.xg),t.Lg=this.Lg,null!==this.Hp&&(t.Hp=this.Hp)},hh.prototype.yf=function(t){Na.prototype.yf.call(this,t),t.W=this.W;for(var e=t.W.j,n=e.length,i=0;i<n;i++)e[i].og=t;t.Ui=null},hh.prototype.copy=function(){var t=Na.prototype.copy.call(this);if(null===t)return null;for(var e=this.W.j,n=e.length,i=0;i<n;i++){var o=e[i].copy();o.rj(t),o.Yj=null;var r,a=t.W,s=a.count;a.vb(s,o),null!==(a=t.part)&&((a.Uj=null)!==o.portId&&a instanceof el&&(a.Nh=!0),null!==(r=t.diagram)&&r.undoManager.isUndoingRedoing||a.ab(Sn,"elements",t,null,o,null,s))}return t},(Bp=hh.prototype).toString=function(){return"Panel("+this.type+")#"+Q(this)},Bp.ip=function(t){Na.prototype.ip.call(this,t);for(var e=this.W.j,n=e.length,i=0;i<n;i++)e[i].ip(t)},Bp.ej=function(t,e){if(this.pa===hh.Grid)this.pa.bc(this,t,e);else if(this.pa===hh.Graduated)this.pa.bc(this,t,e);else{this.pa===hh.Table&&(t.lineCap="butt",dh(this,t,!0,this.ub,!0),dh(this,t,!1,this.qb,!0),lh(this,t,!0,this.ub),lh(this,t,!1,this.qb),dh(this,t,!0,this.ub,!1),dh(this,t,!1,this.qb,!1));var n=this.isClipping&&this.pa===hh.Spot;n&&t.save();for(var i=this.pb(),o=this.W.j,r=o.length,a=0;a<r;a++){var s=o[a];n&&s===i&&(t.clipInsteadOfFill=!0),s.bc(t,e),n&&s===i&&(t.clipInsteadOfFill=!1)}n&&(t.restore(),t.tc(!0))}},Bp.vk=function(t,e,n,i,o){var r=this.de(),a=this.transform,s=1/(a.m11*a.m22-a.m12*a.m21),h=a.m22*s,u=-a.m12*s,l=-a.m21*s,d=a.m11*s,c=s*(a.m21*a.dy-a.m22*a.dx),g=s*(a.m12*a.dx-a.m11*a.dy);if(null!==this.areaBackground)return a=this.actualBounds,Ue.bd(a.left,a.top,a.right,a.bottom,t,e,n,i,o);if(null!==this.background)return r=t*h+e*l+c,s=t*u+e*d+g,t=n*h+i*l+c,h=n*u+i*d+g,o.h(0,0),n=this.naturalBounds,r=Ue.bd(0,0,n.width,n.height,r,s,t,h,o),o.transform(a),r;r||(d=h=1,g=c=l=u=0),s=t*h+e*l+c,t=t*u+e*d+g,h=n*h+i*l+c,n=n*u+i*d+g,o.h(h,n),i=(h-s)*(h-s)+(n-t)*(n-t),u=!1,g=(d=this.W.j).length,l=ee.alloc(),e=1/0;var f=c=null,p=this.isClipping&&this.pa===hh.Spot;p&&(f=ee.alloc(),(u=(c=this.pb()).vk(s,t,h,n,f))&&(e=(s-f.x)*(s-f.x)+(t-f.y)*(t-f.y)));for(var m=0;m<g;m++){var y=d[m];y.visible&&y!==c&&y.vk(s,t,h,n,l)&&(u=!0,(y=(s-l.x)*(s-l.x)+(t-l.y)*(t-l.y))<i&&(i=y,o.set(l)))}return p&&(i<e&&o.set(f),ee.free(f)),ee.free(l),r&&o.transform(a),u},Bp.o=function(t){if(!0!==Ka(this)){Na.prototype.o.call(this,t),t=null,this.pa!==hh.Auto&&this.pa!==hh.Link||(t=this.pb());for(var e=this.W.j,n=e.length,i=0;i<n;i++){var o,r=e[i];r!==t&&!r.isPanelMain||r.o(!0),r.desiredSize.u()||(o=za(r,!1),(r instanceof vl||r instanceof hh||r instanceof Hh||o!==Or)&&r.o(!0))}}},Bp.zm=function(){if(!1===Ka(this)){Xa(this,!0),$a(this,!0);for(var t=this.W.j,e=t.length,n=0;n<e;n++)t[n].zm()}},Bp.zl=function(){if(0!=(2048&this.F)==!1){Ha(this,!0),Ya(this,!0);for(var t=this.W.j,e=t.length,n=0;n<e;n++)t[n].cw()}},Bp.cw=function(){Ya(this,!0);for(var t=this.W.j,e=t.length,n=0;n<e;n++)t[n].cw()},Bp.Dm=function(t,e,n,i){var o=this.xg;o.h(0,0,0,0);var r=this.desiredSize,a=this.minSize;void 0===n&&(n=a.width,i=a.height),n=Math.max(n,a.width),i=Math.max(i,a.height);var s=this.maxSize;isNaN(r.width)||(t=Math.min(r.width,s.width)),isNaN(r.height)||(e=Math.min(r.height,s.height)),t=Math.max(n,t),e=Math.max(i,e);var h=this.gb;t=Math.max(t-h.left-h.right,0),e=Math.max(e-h.top-h.bottom,0);var u=this.W.j;0!==u.length&&this.pa.measure(this,t,e,u,o,n,i),t=o.width+h.left+h.right,h=o.height+h.top+h.bottom,isFinite(r.width)&&(t=r.width),isFinite(r.height)&&(h=r.height),t=Math.min(s.width,t),h=Math.min(s.height,h),t=Math.max(a.width,t),h=Math.max(a.height,h),Tt(o,t=Math.max(n,t),h=Math.max(i,h)),Tt(this.naturalBounds,t,h),Ca(this,0,0,t,h)},Bp.pb=function(){if(null===this.Ui){var t=this.W.j,e=t.length;if(0===e)return null;for(var n=0;n<e;n++){var i=t[n];if(!0===i.isPanelMain)return this.Ui=i}this.Ui=t[0]}return this.Ui},Bp.Ih=function(t,e,n,i){var o=this.W.j;if(this.actualBounds.h(t,e,n,i),0!==o.length){if(!this.desiredSize.u()){t=za(this,!0);var r=this.measuredBounds;e=r.width,r=r.height;var a=(s=this.ih).left+s.right,s=s.top+s.bottom;switch(e===n&&r===i&&(t=Or),t){case Or:(n<e||i<r)&&(this.o(),this.measure(n<e?n:e,i<r?i:r,0,0));break;case Fr:this.o(!0),this.measure(n+a,i+s,0,0);break;case jr:this.o(!0),this.measure(n+a,r+s,0,0);break;case zr:this.o(!0),this.measure(e+a,i+s,0,0)}}this.pa.arrange(this,o,this.xg)}},Bp.Kh=function(t){var e=this.naturalBounds,n=gh(this);if(Gt(0,0,e.width,e.height,t.x,t.y)){for(var i=(e=this.W.j).length,o=ee.allocAt(0,0);i--;){var r=e[i];if((r.visible||r===n)&&(lt(o.set(t),r.transform),r.aa(o)))return ee.free(o),!0}return ee.free(o),null!==this.kb||null!==this.dc}return!1},Bp.Ht=function(t){if(this.Xk===t)return this;for(var e=this.W.j,n=e.length,i=0;i<n;i++){var o=e[i].Ht(t);if(null!==o)return o}return null},Bp.Zm=function(t,e){if(e(this,t),t instanceof hh)for(var n=(t=t.W.j).length,i=0;i<n;i++)this.Zm(t[i],e)},Bp.sm=function(t){return function t(e,n,i){if(i(n))return n;if(n instanceof hh)for(var o=(n=n.W.j).length,r=0;r<o;r++){var a=t(e,n[r],i);if(null!==a)return a}return null}(this,this,t)},Bp.$a=function(t){if(this.name===t)return this;var e=this.W.j,n=e.length;null===this.Bi&&null===this.pe||(n=xh(this));for(var i=0;i<n;i++){var o=e[i];if(o instanceof hh){var r=o.$a(t);if(null!==r)return r}if(o.name===t)return o}return null},Bp.de=function(){return!(this.type===hh.TableRow||this.type===hh.TableColumn)},Bp.Ub=function(t,e,n){if(!1===this.pickable)return null;if(void 0===e&&(e=null),void 0===n&&(n=null),Wa(this))return null;var i=this.naturalBounds,o=1/this.Af(),r=this.de(),a=r?t:lt(ee.allocAt(t.x,t.y),this.transform),s=10,h=5;if(null!==(l=this.diagram)&&(h=(s=l.xm("extraTouchArea"))/2),Gt(-h*o,-h*o,i.width+s*o,i.height+s*o,a.x,a.y)){if(!this.isAtomic){var u=(o=this.W.j).length,l=ee.alloc(),h=(s=this.isClipping&&this.pa===hh.Spot)?this.pb():null;if(s&&(h.de()?lt(l.set(t),h.transform):l.set(t),!h.aa(l)))return ee.free(l),r||ee.free(a),null;for(var d=gh(this);u--;){var c=o[u];if((c.visible||c===d)&&(c.de()?lt(l.set(t),c.transform):l.set(t),!s||c!==h)){var g=null;if(c instanceof hh?g=c.Ub(l,e,n):!0===c.pickable&&c.aa(l)&&(g=c),null!==g&&(null!==e&&(g=e(g)),null!==g&&(null===n||n(g))))return ee.free(l),r||ee.free(a),g}}ee.free(l)}return null===this.background&&null===this.areaBackground?(r||ee.free(a),null):(t=Gt(0,0,i.width,i.height,a.x,a.y)?this:null,r||ee.free(a),t)}return r||ee.free(a),null},Bp.hj=function(t,e,n,i){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var o=this.naturalBounds,r=this.de(),a=r?t:lt(ee.allocAt(t.x,t.y),this.transform),o=Gt(0,0,o.width,o.height,a.x,a.y);if(this.type===hh.TableRow||this.type===hh.TableColumn||o){if(!this.isAtomic){for(var s=this.W.j,h=s.length,u=ee.alloc(),l=gh(this);h--;){var d,c=s[h];!c.visible&&c!==l||(c.de()?lt(u.set(t),c.transform):u.set(t),(null!==(c=(d=c)instanceof hh?c:null)?c.hj(u,e,n,i):d.aa(u))&&!1!==d.pickable&&(null!==e&&(d=e(d)),null===d||null!==n&&!n(d)||i.add(d)))}ee.free(u)}return r||ee.free(a),o&&(null!==this.background||null!==this.areaBackground)}return r||ee.free(a),!1},Bp.zf=function(t,e,n,i,o,r){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var a=r;if(void 0===r&&(a=Ie.alloc()).reset(),a.multiply(this.transform),this.Jh(t,a))return mh(this,e,n,o),void 0===r&&Ie.free(a),!0;if(this.Lc(t,a)){if(!this.isAtomic)for(var s=gh(this),h=this.W.j,u=h.length;u--;){var l,d,c=h[u];!c.visible&&c!==s||(l=c.actualBounds,d=this.naturalBounds,l.x>d.width||l.y>d.height||l.x+l.width<0||l.y+l.height<0||(c=(l=c)instanceof hh?c:null,(d=Ie.alloc()).set(a),(null!==c?c.zf(t,e,n,i,o,d):Da(l,t,i,d))&&(null!==e&&(l=e(l)),null===l||null!==n&&!n(l)||o.add(l)),Ie.free(d)))}return void 0===r&&Ie.free(a),i}return void 0===r&&Ie.free(a),!1},Bp.Eg=function(t,e,n,i,o,r){if(!1===this.pickable)return!1;void 0===n&&(n=null),void 0===i&&(i=null);var a=this.naturalBounds,s=this.de(),h=s?t:lt(ee.allocAt(t.x,t.y),this.transform),u=s?e:lt(ee.allocAt(e.x,e.y),this.transform),l=h.Fe(u),d=0<h.x&&h.x<a.width&&0<h.y&&h.y<a.height||dt(h.x,h.y,0,0,0,a.height)<=l||dt(h.x,h.y,0,a.height,a.width,a.height)<=l||dt(h.x,h.y,a.width,a.height,a.width,0)<=l||dt(h.x,h.y,a.width,0,0,0)<=l,a=h.kd(0,0)<=l&&h.kd(0,a.height)<=l&&h.kd(a.width,0)<=l&&h.kd(a.width,a.height)<=l;if(s||(ee.free(h),ee.free(u)),d){if(!this.isAtomic){h=ee.alloc(),u=ee.alloc(),l=gh(this);for(var c=this.W.j,g=c.length;g--;){var f,p,m=c[g];!m.visible&&m!==l||(f=m.actualBounds,p=this.naturalBounds,s&&(f.x>p.width||f.y>p.height||f.x+f.width<0||f.y+f.height<0)||(m.de()?(f=m.transform,lt(h.set(t),f),lt(u.set(e),f)):(h.set(t),u.set(e)),(null!==(m=(f=m)instanceof hh?m:null)?m.Eg(h,u,n,i,o,r):f.oy(h,u,o))&&(null!==n&&(f=n(f)),null===f||null!==i&&!i(f)||r.add(f))))}ee.free(h),ee.free(u)}return o?d:a}return!1},Bp.add=function(t){this.vb(this.W.count,t)},Bp.L=function(t){return this.W.L(t)},Bp.vb=function(t,e){e instanceof Ou&&O("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),this!==e&&!this.Gg(e)||(this===e&&O("Cannot make a Panel contain itself: "+this.toString()),O("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var n=e.panel;null!==n&&n!==this&&O("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+n.toString()+", cannot be shared by this Panel: "+this.toString()),this.pa!==hh.Grid||e instanceof Oh||O("Can only add Shapes to a Grid Panel, not: "+e),this.pa!==hh.Graduated||e instanceof Oh||e instanceof Hh||O("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.rj(this),(e.Yj=null)===this.itemArray||null!==(o=e.data)&&"object"===_typeof(o)&&(null===this.Rd&&(this.Rd=new at),this.Rd.add(o,e));var i=this.W,o=-1;if(n===this){for(var r=-1,a=this.W.j,s=a.length,h=0;h<s;h++)if(a[h]===e){r=h;break}if(-1!==r){if(r===t||r+1>=i.count&&t>=i.count)return;i.bb(r),o=r}else O("element "+e.toString()+" has panel "+n.toString()+" but is not contained by it.")}(t<0||t>i.count)&&(t=i.count),i.vb(t,e),0!==t&&!e.isPanelMain||(this.Ui=null),Ka(this)||this.o(),e.o(!1),(null!==e.portId||e instanceof hh&&!0===e.Nh)&&(this.Nh=!0),(this.dh=null)!==(n=this.part)&&(n.Uj=null,n.jh=NaN,this.Nh&&n instanceof el&&(n.Nh=!0),n.Nh&&n instanceof el&&(n.sc=null),null!==(i=this.diagram)&&i.undoManager.isUndoingRedoing||(-1!==o&&n.ab(xn,"elements",this,e,null,o,null),n.ab(Sn,"elements",this,null,e,null,t),this.Hg()||Lh(this,e,!1)))},Bp.remove=function(t){for(var e=this.W.j,n=e.length,i=-1,o=0;o<n;o++)if(e[o]===t){i=o;break}-1!==i&&this.Kc(i,!0)},Bp.bb=function(t){0<=t&&this.Kc(t,!0)},Bp.Kc=function(t,n){var e,i=this.W,o=i.L(t);o.Yj=null,o.rj(null),null===this.Rd||"object"===_typeof(e=o.data)&&this.Rd.remove(e),i.bb(t),Xa(this,!1),this.o(),this.Ui===o&&(this.Ui=null),this.dh=null;var r=this.part;null!==r&&(r.Uj=null,r.jh=NaN,r.Lb(),r instanceof el&&(o instanceof hh?o.Zm(o,function(t,e){dl(r,e,n)}):dl(r,o,n)),null!==(i=this.diagram)&&i.undoManager.isUndoingRedoing||r.ab(xn,"elements",this,o,null,t,null))},hh.prototype.getRowDefinition=function(t){t<0&&f(t,">= 0",hh,"getRowDefinition:idx"),t=Math.round(t);var e,n=this.ub;return void 0===n?null:(void 0===n[t]&&((e=new Th).rj(this),e.isRow=!0,n[e.index=t]=e),n[t])},hh.prototype.tw=function(t){t<0&&f(t,">= 0",hh,"removeRowDefinition:idx"),t=Math.round(t);var e=this.ub;void 0!==e&&(this.ab(xn,"coldefs",this,e[t],null,t,null),e[t]&&delete e[t],this.o())},hh.prototype.getColumnDefinition=function(t){t<0&&f(t,">= 0",hh,"getColumnDefinition:idx"),t=Math.round(t);var e,n=this.qb;return void 0===n?null:(void 0===n[t]&&((e=new Th).rj(this),e.isRow=!1,n[e.index=t]=e),n[t])},(Bp=hh.prototype).rw=function(t){t<0&&f(t,">= 0",hh,"removeColumnDefinition:idx"),t=Math.round(t);var e=this.qb;void 0!==e&&(this.ab(xn,"coldefs",this,e[t],null,t,null),e[t]&&delete e[t],this.o())},Bp.Wz=function(t){if(t<0||this.type!==hh.Table)return-1;for(var e=0,n=this.ub,i=n.length,o=this.Xi;o<i;o++){var r=n[o];if(void 0!==r&&t<(e+=r.total))break}return o},Bp.Oz=function(t){if(t<0||this.type!==hh.Table)return-1;for(var e=0,n=this.qb,i=n.length,o=this.Fi;o<i;o++){var r=n[o];if(void 0!==r&&t<(e+=r.total))break}return o},Bp.lA=function(t,e){if(void 0===e&&(e=new ee(NaN,NaN)),this.type!==hh.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var n=this.pb();return n.geometry.Wv((t-this.graduatedMin)/this.graduatedRange,e),n.transform.sa(e)},Bp.mA=function(t){if(this.type!==hh.Graduated)return NaN;var e=this.pb();return e.transform.Zd(t),e.geometry.ty(t)*this.graduatedRange+this.graduatedMin},Bp.Bz=function(t){void 0===t&&(t=!1);var e=this.copy();return ph(e,function(e){e instanceof hh&&(e.li=null,e.lb=null);var t=e.eb;null!==t&&(e.eb=null,t.each(function(t){e.bind(t.copy())})),null!==(t=e.Mg)&&(e.Mg=null,t.each(function(t){Qa(e,t.value.copy())}))}),t&&Sh(e),e},Bp.Ca=function(t){var e=this.li;if(null!==e)for(void 0===t&&(t=""),e=e.iterator;e.next();){var n=e.value,i=n.sourceProperty;if((""===t||""===i||i===t)&&(i=n.targetProperty,null!==n.converter||""!==i)){i=this.data;var o,r=n.sourceName;if(null!==r?i=""===r||"/"===r||"."===r||".."===r?this:this.$a(r):null!==(o=this.diagram)&&n.isToModel&&(i=o.model.modelData),null!==i){o=this;var a=n.vj;if(-1!==a){if(null===(o=this.Ht(a)))continue}else null!==n.jd&&(o=n.jd);if("/"===r?i=o.part:"."===r?i=o:".."===r&&(i=o.panel),0!==(r=n.fq)){if(!(o instanceof hh))continue;1===r?o=o.getColumnDefinition(n.im):2===r&&(o=o.getRowDefinition(n.im))}void 0!==o&&n.Rw(o,i)}}}},Bp.eu=function(){for(var t=xh(this);this.W.length>t;)this.Kc(this.W.length-1,!1);if(null!==(t=this.itemArray))for(var e=t.length,n=0;n<e;n++)Ph(this,t[n],n)},Bp.ny=function(t){return null==t||null===this.Rd?null:this.Rd.H(t)},s.Object.defineProperties(hh.prototype,{type:{get:function(){return this.pa},set:function(t){var e=this.pa;e!==t&&(this.pa=t,this.pa===hh.Grid?this.isAtomic=!0:this.pa===hh.Table&&uh(this),this.o(),this.g("type",e,t))}},elements:{get:function(){return this.W.iterator}},naturalBounds:{get:function(){return this.qc}},padding:{get:function(){return this.gb},set:function(t){"number"==typeof t?(t<0&&f(t,">= 0",hh,"padding"),t=new Vt(t)):(t.left<0&&f(t.left,">= 0",hh,"padding:value.left"),t.right<0&&f(t.right,">= 0",hh,"padding:value.right"),t.top<0&&f(t.top,">= 0",hh,"padding:value.top"),t.bottom<0&&f(t.bottom,">= 0",hh,"padding:value.bottom"));var e=this.gb;e.w(t)||(this.gb=t=t.G(),this.o(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.Ln},set:function(t){var e=this.Ln;e.w(t)||(this.Ln=t=t.G(),this.o(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Rf},set:function(t){var e=this.Rf;e!==t&&(this.Rf=t,this.o(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return void 0===this.Cj?Ee:this.Cj},set:function(t){var e;void 0!==this.Cj&&("number"==typeof t&&(t=new Vt(t)),(e=this.Cj).w(t)||(this.Cj=t=t.G(),this.o(),this.g("defaultSeparatorPadding",e,t)))}},defaultRowSeparatorStroke:{get:function(){return void 0===this.si?null:this.si},set:function(t){var e=this.si;e!==t&&(null===t||"string"==typeof t||t instanceof vs)&&(t instanceof vs&&t.freeze(),this.si=t,this.M(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return void 0===this.Ug?1:this.Ug},set:function(t){var e;void 0===this.Ug||(e=this.Ug)!==t&&isFinite(t)&&0<=t&&(this.Ug=t,this.o(),this.g("defaultRowSeparatorStrokeWidth",e,t))}},defaultRowSeparatorDashArray:{get:function(){return void 0===this.ri?null:this.ri},set:function(t){if(void 0!==this.ri){var e=this.ri;if(e!==t){if(null!==t){for(var n=t.length,i=0,o=0;o<n;o++){var r=t[o];"number"==typeof r&&0<=r&&isFinite(r)||O("defaultRowSeparatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),i+=r}if(0===i){if(null===e)return;t=null}}this.ri=t,this.M(),this.g("defaultRowSeparatorDashArray",e,t)}}}},defaultColumnSeparatorStroke:{get:function(){return void 0===this.Sg?null:this.Sg},set:function(t){var e;void 0===this.Sg||(e=this.Sg)!==t&&(null===t||"string"==typeof t||t instanceof vs)&&(t instanceof vs&&t.freeze(),this.Sg=t,this.M(),this.g("defaultColumnSeparatorStroke",e,t))}},defaultColumnSeparatorStrokeWidth:{get:function(){return void 0===this.Tg?1:this.Tg},set:function(t){var e;void 0===this.Tg||(e=this.Tg)!==t&&isFinite(t)&&0<=t&&(this.Tg=t,this.o(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}},defaultColumnSeparatorDashArray:{get:function(){return void 0===this.pi?null:this.pi},set:function(t){if(void 0!==this.pi){var e=this.pi;if(e!==t){if(null!==t){for(var n=t.length,i=0,o=0;o<n;o++){var r=t[o];"number"==typeof r&&0<=r&&isFinite(r)||O("defaultColumnSeparatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),i+=r}if(0===i){if(null===e)return;t=null}}this.pi=t,this.M(),this.g("defaultColumnSeparatorDashArray",e,t)}}}},viewboxStretch:{get:function(){return this.nq},set:function(t){var e=this.nq;e!==t&&(this.nq=t,this.o(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.lo},set:function(t){var e,n=this.lo;n.w(t)||(t.u()&&0!==t.width&&0!==t.height||O("Invalid Panel.gridCellSize: "+t),this.lo=t.G(),null!==(e=this.diagram)&&this===e.grid&&yr(e),this.M(),this.g("gridCellSize",n,t))}},gridOrigin:{get:function(){return this.mo},set:function(t){var e,n=this.mo;n.w(t)||(t.u()||O("Invalid Panel.gridOrigin: "+t),this.mo=t.G(),null!==(e=this.diagram)&&this===e.grid&&yr(e),this.M(),this.g("gridOrigin",n,t))}},graduatedMin:{get:function(){return this.io},set:function(t){var e=this.io;e!==t&&(this.io=t,this.o(),this.g("graduatedMin",e,t),!Ua(this)||null!==(t=this.part)&&Ta(this,t,"graduatedRange"))}},graduatedMax:{get:function(){return this.ho},set:function(t){var e=this.ho;e!==t&&(this.ho=t,this.o(),this.g("graduatedMax",e,t),!Ua(this)||null!==(t=this.part)&&Ta(this,t,"graduatedRange"))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return this.ko},set:function(t){var e=this.ko;e!==t&&0<t&&(this.ko=t,this.o(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return this.jo},set:function(t){var e=this.jo;e!==t&&(this.jo=t,this.o(),this.g("graduatedTickBase",e,t))}},Nh:{get:function(){return 0!=(8388608&this.F)},set:function(t){0!=(8388608&this.F)!==t&&(this.F^=8388608)}},rowCount:{get:function(){return void 0===this.ub?0:this.ub.length}},columnCount:{get:function(){return void 0===this.qb?0:this.qb.length}},rowSizing:{get:function(){return void 0===this.ak?Fh:this.ak},set:function(t){var e;void 0===this.ak||(e=this.ak)!==t&&(this.ak=t,this.o(),this.g("rowSizing",e,t))}},columnSizing:{get:function(){return void 0===this.zj?Fh:this.zj},set:function(t){var e;void 0===this.zj||(e=this.zj)!==t&&(this.zj=t,this.o(),this.g("columnSizing",e,t))}},topIndex:{get:function(){return void 0===this.Xi?0:this.Xi},set:function(t){var e;void 0===this.Xi||(e=this.Xi)!==t&&((!isFinite(t)||t<0)&&O("Panel.topIndex must be greater than zero and a real number, not: "+t),this.Xi=t,this.o(),this.g("topIndex",e,t))}},leftIndex:{get:function(){return void 0===this.Fi?0:this.Fi},set:function(t){var e;void 0===this.Fi||(e=this.Fi)!==t&&((!isFinite(t)||t<0)&&O("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.Fi=t,this.o(),this.g("leftIndex",e,t))}},data:{get:function(){return this.lb},set:function(t){var e,n,i=this.lb;i!==t&&(e=this instanceof Ou&&!(this instanceof tl),Sh(this),this.lb=t,null!==(n=this.diagram)&&(e?(e=n.partManager,this instanceof wl?(null!==i&&e.Se.remove(i),null!==t&&e.Se.add(t,this)):this instanceof Ou&&(null!==i&&e.Te.remove(i),null!==t&&e.Te.add(t,this))):null!==(e=this.panel)&&null!==e.Rd&&(null!==i&&e.Rd.remove(i),null!==t&&e.Rd.add(t,this))),this.g("data",i,t),null!==n&&n.undoManager.isUndoingRedoing||null!==t&&this.Ca())}},itemIndex:{get:function(){return this.zo},set:function(t){var e=this.zo;e!==t&&(this.zo=t,this.g("itemIndex",e,t))}},itemArray:{get:function(){return this.Bi},set:function(t){var e,n=this.Bi;(n!==t||null!==t&&function(t,e){for(var n=(t=t.W.j).length,i=e.length,o=0,r=null;o<n&&!((r=t[o])instanceof hh&&null!==r.data);)r=t[++o];if(n-o!==i)return 1;if(null===r)return 0<i;for(var a=0;o<n&&a<i;){if(!((r=t[o])instanceof hh)||r.data!==e[a])return 1;o++,a++}}(this,t))&&(e=this.diagram,n!==t&&(null!==e&&null!==n&&oc(e.partManager,this,e),this.Bi=t,null!==e&&null!==t&&ic(e.partManager,this)),this.g("itemArray",n,t),null!==e&&e.undoManager.isUndoingRedoing||this.eu())}},itemTemplate:{get:function(){return null===this.pe?null:this.pe.H("")},set:function(t){if(null===this.pe){if(null===t)return;this.pe=new at}var e=this.pe.H("");e!==t&&((t instanceof Ou||t.isPanelMain)&&O("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.pe.add("",t),this.g("itemTemplate",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.eu())}},itemTemplateMap:{get:function(){return this.pe},set:function(t){var e=this.pe;if(e!==t){for(var n=t.iterator;n.next(););this.pe=t,this.g("itemTemplateMap",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.eu()}}},itemCategoryProperty:{get:function(){return this.Dl},set:function(t){var e=this.Dl;e!==t&&(this.Dl=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return 0!=(1048576&this.F)},set:function(t){var e=0!=(1048576&this.F);e!==t&&(this.F^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return 0!=(2097152&this.F)},set:function(t){var e=0!=(2097152&this.F);e!==t&&(t&&this.type!==hh.Spot&&p("Warning: Panel.isClipping set on non-Spot Panel: "+this.toString()),this.F^=2097152,this.o(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return 0!=(33554432&this.F)},set:function(t){var e=0!=(33554432&this.F);e!==t&&(this.F^=33554432,this.o(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return 0!=(4194304&this.F)},set:function(t){var e,n=0!=(4194304&this.F);n!==t&&(e=null===this.panel||this.panel.Hg(),this.F^=4194304,this.g("isEnabled",n,t),null!==(n=this.diagram)&&n.undoManager.isUndoingRedoing||e&&Lh(this,this,t))}},alignmentFocusName:{get:function(){return this.Lg},set:function(t){var e=this.Lg;e!==t&&(this.Lg=t,this.o(),this.g("alignmentFocusName",e,t))}}}),s.Object.defineProperties(hh,{Position:{get:function(){return Ah.H("Position")}},Horizontal:{get:function(){return Ah.H("Horizontal")}},Vertical:{get:function(){return Ah.H("Vertical")}},Spot:{get:function(){return Ah.H("Spot")}},Auto:{get:function(){return Ah.H("Auto")}},Table:{get:function(){return Ah.H("Table")}},Viewbox:{get:function(){return Ah.H("Viewbox")}},TableRow:{get:function(){return Ah.H("TableRow")}},TableColumn:{get:function(){return Ah.H("TableColumn")}},Link:{get:function(){return Ah.H("Link")}},Grid:{get:function(){return Ah.H("Grid")}},Graduated:{get:function(){return Ah.H("Graduated")}}}),hh.prototype.findItemPanelForData=hh.prototype.ny,hh.prototype.rebuildItemElements=hh.prototype.eu,hh.prototype.updateTargetBindings=hh.prototype.Ca,hh.prototype.copyTemplate=hh.prototype.Bz,hh.prototype.graduatedValueForPoint=hh.prototype.mA,hh.prototype.graduatedPointForValue=hh.prototype.lA,hh.prototype.findColumnForLocalX=hh.prototype.Oz,hh.prototype.findRowForLocalY=hh.prototype.Wz,hh.prototype.removeColumnDefinition=hh.prototype.rw,hh.prototype.removeRowDefinition=hh.prototype.tw,hh.prototype.removeAt=hh.prototype.bb,hh.prototype.insertAt=hh.prototype.vb,hh.prototype.elt=hh.prototype.L,hh.prototype.findObject=hh.prototype.$a,hh.prototype.findInVisualTree=hh.prototype.sm,hh.prototype.walkVisualTreeFrom=hh.prototype.Zm,hh.prototype.findMainElement=hh.prototype.pb;var _h=!1,Nh=null,Ah=new at;function Th(){J(this),this.og=null,this.ps=!0,this.Pa=0,this.Xc=NaN,this.mh=0,this.kh=1/0,this.yb=we,this.la=this.ha=0,this.eb=null,this.Wp=Dh,this.ze=Gr,this.Qp=this.sg=null,this.Rp=NaN,this.kb=this.ck=null,this.Hn=!1}function Ch(t){if(t.sizing!==Dh)return t.sizing;var e=t.og;return t.isRow?e.rowSizing:e.columnSizing}hh.className="Panel",(hh.definePanelLayout=Mh)("Position",new Xs),Mh("Vertical",new $s),Mh("Auto",new Zs),Mh("Link",new rh),Th.prototype.copy=function(){var t=new Th;return t.ps=this.ps,t.Pa=this.Pa,t.Xc=this.Xc,t.mh=this.mh,t.kh=this.kh,t.yb=this.yb,t.ha=this.ha,t.la=this.la,t.ze=this.ze,t.Wp=this.Wp,null===this.sg?t.sg=null:t.sg=this.sg.G(),t.Qp=this.Qp,t.Rp=this.Rp,(t.ck=null)!==this.ck&&(t.separatorDashArray=b(this.separatorDashArray)),t.kb=this.kb,t.Hn=this.Hn,t.eb=this.eb,t},(Bp=Th.prototype).Dt=function(t){t.isRow?this.height=t.height:this.width=t.width,this.minimum=t.minimum,this.maximum=t.maximum,this.alignment=t.alignment,this.stretch=t.stretch,this.sizing=t.sizing,this.sg=null===t.separatorPadding?null:t.separatorPadding.G(),this.separatorStroke=t.separatorStroke,this.separatorStrokeWidth=t.separatorStrokeWidth,this.ck=null,t.separatorDashArray&&(this.ck=b(t.separatorDashArray)),this.background=t.background,this.coversSeparators=t.coversSeparators,this.eb=t.eb},Bp.hb=function(t){t.classType===Th&&(this.sizing=t)},Bp.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+Q(this)},Bp.rj=function(t){this.og=t},Bp.Iv=function(){var t=0,e=0,n=this.og,i=this.isRow;if(null!==n&&n.type===hh.Table)for(var o=(i?n.ub:n.qb).length,r=0;r<o;r++){var a=(i?n.ub:n.qb)[r];if(void 0!==a){e=a.index;break}}if(this.index!==e&&(null===(e=this.separatorStroke)&&null!==n&&(e=this.isRow?n.defaultRowSeparatorStroke:n.defaultColumnSeparatorStroke),null!==e&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==n?this.isRow?n.defaultRowSeparatorStrokeWidth:n.defaultColumnSeparatorStrokeWidth:0))),null===(e=this.sg)){if(null===n)return t;e=n.defaultSeparatorPadding}return t+(this.isRow?e.top:e.left)},Bp.vc=function(){var t=0,e=this.og,n=0,i=this.isRow;if(null!==e&&e.type===hh.Table)for(var o=(i?e.ub:e.qb).length,r=0;r<o;r++){var a=(i?e.ub:e.qb)[r];if(void 0!==a){n=a.index;break}}if(this.index!==n&&(null===(n=this.separatorStroke)&&null!==e&&(n=i?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),null!==n&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==e?i?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:0))),null===(i=this.sg)){if(null===e)return t;i=e.defaultSeparatorPadding}return t+(this.isRow?i.top+i.bottom:i.left+i.right)},Bp.Bb=function(t,e,n){var i=this.og;if(null!==i&&(i.ab(bn,t,this,e,n,void 0,void 0),null!==this.eb&&(null!==(e=i.diagram)&&!e.skipsModelSourceBindings&&(null!==(i=i.ij())&&null!==(e=i.data)))))for(n=this.eb.iterator;n.next();)n.value.lr(this,e,t,i)},Bp.bind=function(t){var e,n=(t.jd=this).panel;null===n||null!==(e=n.ij())&&bh(e)&&O("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+t+" on "+n),null===this.eb&&(this.eb=new X),this.eb.add(t)},s.Object.defineProperties(Th.prototype,{panel:{get:function(){return this.og}},isRow:{get:function(){return this.ps},set:function(t){this.ps=t}},index:{get:function(){return this.Pa},set:function(t){this.Pa=t}},height:{get:function(){return this.Xc},set:function(t){var e=this.Xc;e!==t&&(t<0&&f(t,">= 0",Th,"height"),this.Xc=t,this.actual=this.ha,null!==this.panel&&this.panel.o(),this.Bb("height",e,t))}},width:{get:function(){return this.Xc},set:function(t){var e=this.Xc;e!==t&&(t<0&&f(t,">= 0",Th,"width"),this.Xc=t,this.actual=this.ha,null!==this.panel&&this.panel.o(),this.Bb("width",e,t))}},minimum:{get:function(){return this.mh},set:function(t){var e=this.mh;e!==t&&((t<0||!isFinite(t))&&f(t,">= 0",Th,"minimum"),this.mh=t,this.actual=this.ha,null!==this.panel&&this.panel.o(),this.Bb("minimum",e,t))}},maximum:{get:function(){return this.kh},set:function(t){var e=this.kh;e!==t&&(t<0&&f(t,">= 0",Th,"maximum"),this.kh=t,this.actual=this.ha,null!==this.panel&&this.panel.o(),this.Bb("maximum",e,t))}},alignment:{get:function(){return this.yb},set:function(t){var e=this.yb;e.w(t)||(this.yb=t.G(),null!==this.panel&&this.panel.o(),this.Bb("alignment",e,t))}},stretch:{get:function(){return this.ze},set:function(t){var e=this.ze;e!==t&&(this.ze=t,null!==this.panel&&this.panel.o(),this.Bb("stretch",e,t))}},separatorPadding:{get:function(){return this.sg},set:function(t){"number"==typeof t&&(t=new Vt(t));var e=this.sg;null!==t&&null!==e&&e.w(t)||(null!==t&&(t=t.G()),this.sg=t,null!==this.panel&&this.panel.o(),this.Bb("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.Qp},set:function(t){var e=this.Qp;e!==t&&(null!==t&&Ts(t,"RowColumnDefinition.separatorStroke"),t instanceof vs&&t.freeze(),this.Qp=t,null!==this.panel&&this.panel.o(),this.Bb("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.Rp},set:function(t){var e=this.Rp;e!==t&&(this.Rp=t,null!==this.panel&&this.panel.o(),this.Bb("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.ck},set:function(t){var e=this.ck;if(e!==t){if(null!==t){for(var n=t.length,i=0,o=0;o<n;o++){var r=t[o];"number"==typeof r&&0<=r&&isFinite(r)||O("separatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),i+=r}if(0===i){if(null===e)return;t=null}}this.ck=t,null!==this.panel&&this.panel.M(),this.Bb("separatorDashArray",e,t)}}},background:{get:function(){return this.kb},set:function(t){var e=this.kb;e!==t&&(null!==t&&Ts(t,"RowColumnDefinition.background"),t instanceof vs&&t.freeze(),this.kb=t,null!==this.panel&&this.panel.M(),this.Bb("background",e,t))}},coversSeparators:{get:function(){return this.Hn},set:function(t){var e=this.Hn;e!==t&&(this.Hn=t,null!==this.panel&&this.panel.M(),this.Bb("coversSeparators",e,t))}},sizing:{get:function(){return this.Wp},set:function(t){var e=this.Wp;e!==t&&(this.Wp=t,null!==this.panel&&this.panel.o(),this.Bb("sizing",e,t))}},actual:{get:function(){return this.ha},set:function(t){this.ha=isNaN(this.Xc)?Math.max(Math.min(this.kh,t),this.mh):Math.max(Math.min(this.kh,this.Xc),this.mh)}},total:{get:function(){return this.ha+this.vc()},set:function(t){this.ha=isNaN(this.Xc)?Math.max(Math.min(this.kh,t),this.mh):Math.max(Math.min(this.kh,this.Xc),this.mh),this.ha=Math.max(0,this.ha-this.vc())}},position:{get:function(){return this.la},set:function(t){this.la=t}}}),Th.prototype.computeEffectiveSpacing=Th.prototype.vc,Th.prototype.computeEffectiveSpacingTop=Th.prototype.Iv;var Dh=new j(Th,"Default",0),Eh=new j(Th,"None",1),Fh=new j(Th,"ProportionalExtra",2);function Oh(){Na.call(this),this.zd=this.na=null,this.Xn="None",this.fo=Gr,this.Hc=this.ml="black",this.xh=1,this.em="butt",this.fm="miter",this.dk=10,this.vh=null,this.wh=0,this.pf=this.nf=we,this.pp=this.op=NaN,this.ro=!1,this.rp=null,this.nl=this.lm="None",this.Qd=1,this.Od=0,this.Md=1,this.Nd=null}function Bh(t,e,n,i){var o=n.length;if(!(o<4)){for(var r,a,s,h,u,l,d=i.measuredBounds,c=Math.max(1,d.width),d=d.height,g=n[0],f=n[1],p=0,m=be(),y=2;y<o;y+=2)0===(s=(r=n[y])-g)&&(s=.001),h=(g=(a=n[y+1])-f)/s,u=Math.atan2(g,s),l=Math.sqrt(s*s+g*g),m.push([s,u,h,l]),p+=l,g=r,f=a;g=n[0],f=n[1],s=i.measuredBounds.width,i instanceof Oh&&(s-=i.strokeWidth),s<1&&(s=1),o=n=s,a=0!==(r=c/2),s=(l=m[y=0])[0],u=l[1],h=l[2],l=l[3];for(var v=0;.1<=p;){if(0===v&&(a?(o=n,o-=r,p-=r,a=!1):o=n,0===o&&(o=1)),p<o)return void Se(m);l<o?(v=o-l,o=l):v=0;var w=Math.sqrt(o*o/(1+h*h));if(s<0&&(w=-w),g+=w,f+=h*w,t.translate(g,f),t.rotate(u),t.translate(-c/2,-d/2),0===v&&i.ej(t,e),t.translate(c/2,d/2),t.rotate(-u),t.translate(-g,-f),p-=o,l-=o,0!==v){if(++y===m.length)return void Se(m);s=(l=m[y])[0],u=l[1],h=l[2],l=l[3],o=v}}Se(m)}}function Gh(t){var e=t.geometryStretch;return null!==t.zd?e===Gr?Fr:e:e===Gr?qh[t.figure].defaultStretch:e}function jh(t,e,n,i,o){return(e=(t=n.x-t)*t+(e=n.y-e)*e)<i?(o.x=n.x,o.y=n.y,e):i}function zh(t,e,n,i,o,r,a,s,h){var u=!1,l=(o-a)*(e-i)-(r-s)*(t-n);return 0!=l&&(h.x=((o*s-r*a)*(t-n)-(o-a)*(t*i-e*n))/l,h.y=((o*s-r*a)*(e-i)-(r-s)*(t*i-e*n))/l,(n<t?t-n:n-t)<(i<e?e-i:i-e)?(t=e<i?e:i,e=e<i?i:e,(h.y>t||Ue.$(h.y,t))&&(h.y<e||Ue.$(h.y,e))&&(u=!0)):(e=t<n?t:n,t=t<n?n:t,(h.x>e||Ue.$(h.x,e))&&(h.x<t||Ue.$(h.x,t))&&(u=!0)),u)}function Rh(t,e,n,i){if(t.bd(e,n,i)){t=e.x,e=e.y;var o=n.x,r=n.y;return(n=i.x,i=i.y,t===o)?(e<r?(t=e,e=r):t=r,t<=i&&i<=e):(t<o?(i=t,t=o):i=o,i<=n&&n<=t)}}function Ih(t){var e=t.diagram;null!==e&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=Yl,"None"!==t.lm?(t.segmentIndex=-1,t.alignmentFocus=Ae):"None"!==t.nl&&(t.segmentIndex=0,t.alignmentFocus=new Be(1-Ae.x,Ae.y)))}function Vh(t){var e=Uh[t];if(void 0===e){var n=t.toLowerCase();if("none"===n)return"None";if(void 0===(e=Uh[n])){var i,o=null;for(i in Ue.bn)if(i.toLowerCase()===n){o=i;break}if(null!==o)return t=Ke(Ue.bn[o],!1),Uh[o]=t,n!==o&&(Uh[n]=o),o}}return"string"==typeof e?e:e instanceof qe?t:null}Th.className="RowColumnDefinition",Th.Default=Dh,Th.None=Eh,Th.ProportionalExtra=Fh,n(Oh,Na),Oh.prototype.cloneProtected=function(t){Na.prototype.cloneProtected.call(this,t),t.na=this.na,t.Xn=this.Xn,t.fo=this.fo,t.zd=this.zd,t.ml=this.ml,t.Hc=this.Hc,t.xh=this.xh,t.em=this.em,t.fm=this.fm,t.dk=this.dk,null!==this.vh&&(t.vh=b(this.vh)),t.wh=this.wh,t.nf=this.nf.G(),t.pf=this.pf.G(),t.op=this.op,t.pp=this.pp,t.ro=this.ro,t.rp=this.rp,t.lm=this.lm,t.nl=this.nl,t.Qd=this.Qd,t.Od=this.Od,t.Md=this.Md,t.Nd=this.Nd},(Bp=Oh.prototype).hb=function(t){t===Or||t===Br||t===Rr||t===Gr?this.geometryStretch=t:Na.prototype.hb.call(this,t)},Bp.toString=function(){return"Shape("+("None"!==this.figure?this.figure:"None"!==this.toArrow?this.toArrow:this.fromArrow)+")#"+Q(this)},Bp.ej=function(t,e){var n=this.Hc,i=this.ml;if(null!==n||null!==i){var o=this.actualBounds,r=this.naturalBounds;null!==i&&Oa(this,t,i,!0,!1,r,o);var a=this.part,s=this.xh;if(null===n||0!==s||null===a||!this.isPanelMain&&a.pb()!==this||(s=a.type===hh.Link&&a instanceof tl&&"Selection"===a.category&&a.adornedObject instanceof Oh&&a.adornedPart.pb()===a.adornedObject?a.adornedObject.strokeWidth:0),null!==n&&0!==s&&(Oa(this,t,n,!1,!1,r,o),t.lineWidth=s,t.lineJoin=this.fm,t.lineCap=this.em,t.miterLimit=this.dk),o=!1,a&&e.Ge("drawShadows")&&(o=a.isShadowed),a=!0,null===n||null!==i&&"transparent"!==i||(a=!1),r=!1,null!==(u=this.strokeDashArray)&&(r=!0,t.Gt(u,this.wh)),null!==(c=this.na)){if(c.type===en)t.beginPath(),t.moveTo(c.startX,c.startY),t.lineTo(c.endX,c.endY),null!==i&&t.Yd(i),0!==s&&null!==n&&t.uj();else if(c.type===nn){var h=c.startX,u=c.startY,l=c.endX,d=c.endY,c=Math.min(h,l),g=Math.min(u,d),h=Math.abs(l-h);u=Math.abs(d-u),t.beginPath(),t.rect(c,g,h,u),null!==i&&t.Yd(i),null!==n&&(a&&o&&cs(t),0!==s&&(0!==h&&0!==u||(t.beginPath(),t.rect(c,g,Math.max(h,.1),Math.max(u,.1))),t.uj()),a&&o&&gs(t))}else if(c.type===on)h=c.startX,u=c.startY,l=c.endX,d=c.endY,c=Math.abs(l-h)/2,g=Math.abs(d-u)/2,h=Math.min(h,l)+c,u=Math.min(u,d)+g,t.beginPath(),t.moveTo(h,u-g),t.bezierCurveTo(h+Ue.Kg*c,u-g,h+c,u-Ue.Kg*g,h+c,u),t.bezierCurveTo(h+c,u+Ue.Kg*g,h+Ue.Kg*c,u+g,h,u+g),t.bezierCurveTo(h-Ue.Kg*c,u+g,h-c,u+Ue.Kg*g,h-c,u),t.bezierCurveTo(h-c,u-Ue.Kg*g,h-Ue.Kg*c,u-g,h,u-g),t.closePath(),null!==i&&t.Yd(i),0!==s&&null!==n&&(a&&o?(cs(t),t.uj(),gs(t)):t.uj());else if(c.type===rn)for(c=(u=c.figures).length,g=0;g<c;g++){h=u.j[g],t.beginPath(),t.moveTo(h.startX,h.startY),d=(l=h.segments.j).length;for(var f=null,p=0;p<d;p++){var m=l[p];switch(m.type){case ln:t.moveTo(m.endX,m.endY);break;case dn:t.lineTo(m.endX,m.endY);break;case cn:t.bezierCurveTo(m.point1X,m.point1Y,m.point2X,m.point2Y,m.endX,m.endY);break;case gn:t.quadraticCurveTo(m.point1X,m.point1Y,m.endX,m.endY);break;case fn:if(m.radiusX===m.radiusY){var y=Math.PI/180;t.arc(m.point1X,m.point1Y,m.radiusX,m.startAngle*y,(m.startAngle+m.sweepAngle)*y,m.sweepAngle<0,null!==f?f.endX:h.startX,null!==f?f.endY:h.startY)}else if(0===(y=(f=hn(m,h)).length))t.lineTo(m.centerX,m.centerY);else for(var v=0;v<y;v++){var w=f[v];0===v&&t.lineTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7])}break;case pn:if(v=y=0,null!==f&&f.type===fn){if(0===(w=(f=hn(f,h)).length)){t.lineTo(m.centerX,m.centerY);break}null!==(f=f[w-1]||null)&&(y=f[6],v=f[7])}else y=null!==f?f.endX:h.startX,v=null!==f?f.endY:h.startY;if(0===(y=(f=un(m,h,y,v)).length)){t.lineTo(m.centerX,m.centerY);break}for(v=0;v<y;v++)w=f[v],t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]);break;default:O("Segment not of valid type: "+m.type)}m.isClosed&&t.closePath(),f=m}o?h.isShadowed?(!0===h.isFilled&&"transparent"!==i&&null!==i&&t.Yd(i),0!==s&&null!==n&&(a&&cs(t),t.uj(),a&&gs(t))):(a&&cs(t),!0===h.isFilled&&"transparent"!==i&&null!==i&&t.Yd(i),0!==s&&null!==n&&t.uj(),a&&gs(t)):(!0===h.isFilled&&null!==i&&t.Yd(i),0!==s&&null!==n&&t.uj())}if(r&&t.Et(),null!==this.pathPattern){if((n=this.pathPattern).measure(1/0,1/0),i=n.measuredBounds,n.arrange(0,0,i.width,i.height),s=this.geometry,t.save(),t.beginPath(),i=be(),s.type===en)i.push(s.startX),i.push(s.startY),i.push(s.endX),i.push(s.endY),Bh(t,e,i,n);else if(s.type===rn)for(s=s.figures.iterator;s.next();){for(o=s.value,i.length=0,i.push(o.startX),i.push(o.startY),u=a=o.startX,c=r=o.startY,h=(g=o.segments.j).length,l=0;l<h;l++){switch((d=g[l]).type){case ln:Bh(t,e,i,n),i.length=0,i.push(d.endX),i.push(d.endY),u=a=d.endX,c=r=d.endY;break;case dn:i.push(d.endX),i.push(d.endY),a=d.endX,r=d.endY;break;case cn:Ue.Ce(a,r,d.point1X,d.point1Y,d.point2X,d.point2Y,d.endX,d.endY,.5,i),a=d.endX,r=d.endY;break;case gn:Ue.Wq(a,r,d.point1X,d.point1Y,d.endX,d.endY,.5,i),a=d.endX,r=d.endY;break;case fn:if(0===(m=(p=hn(d,o)).length)){i.push(d.centerX),i.push(d.centerY),a=d.centerX,r=d.centerY;break}for(f=0;f<m;f++)y=p[f],Ue.Ce(a,r,y[2],y[3],y[4],y[5],y[6],y[7],.5,i),a=y[6],r=y[7];break;case pn:if(0===(m=(p=un(d,o,a,r)).length)){i.push(d.centerX),i.push(d.centerY),a=d.centerX,r=d.centerY;break}for(f=0;f<m;f++)y=p[f],Ue.Ce(a,r,y[2],y[3],y[4],y[5],y[6],y[7],.5,i),a=y[6],r=y[7];break;default:O("Segment not of valid type: "+d.type)}d.isClosed&&(i.push(u),i.push(c),Bh(t,e,i,n))}Bh(t,e,i,n)}else if(s.type===nn)i.push(s.startX),i.push(s.startY),i.push(s.endX),i.push(s.startY),i.push(s.endX),i.push(s.endY),i.push(s.startX),i.push(s.endY),i.push(s.startX),i.push(s.startY),Bh(t,e,i,n);else if(s.type===on){if((r=new an).startX=s.endX,r.startY=(s.startY+s.endY)/2,(a=new sn(fn)).startAngle=0,a.sweepAngle=360,a.centerX=(s.startX+s.endX)/2,a.centerY=(s.startY+s.endY)/2,a.radiusX=Math.abs(s.startX-s.endX)/2,a.radiusY=Math.abs(s.startY-s.endY)/2,r.add(a),0===(o=(s=hn(a,r)).length))i.push(a.centerX),i.push(a.centerY);else for(a=r.startX,r=r.startY,u=0;u<o;u++)c=s[u],Ue.Ce(a,r,c[2],c[3],c[4],c[5],c[6],c[7],.5,i),a=c[6],r=c[7];Bh(t,e,i,n)}Se(i),t.restore(),t.tc(!1)}}}},Bp.ga=function(t,e){var n,i;return void 0===e&&(e=new ee),t instanceof Be?(t.mc()&&O("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString()),n=this.naturalBounds,i=this.strokeWidth,e.h(t.x*(n.width+i)-i/2+n.x+t.offsetX,t.y*(n.height+i)-i/2+n.y+t.offsetY)):e.set(t),this.Ad.sa(e),e},Bp.wm=function(t){void 0===t&&(t=new ne);var e=this.naturalBounds,n=this.Ad,e=ne.allocAt(e.x,e.y,e.width,e.height),i=this.strokeWidth;return e.Ic(i/2,i/2),i=ee.allocAt(e.x,e.y).transform(n),t.h(i.x,i.y,0,0),i.h(e.right,e.y).transform(n),ie(t,i.x,i.y,0,0),i.h(e.right,e.bottom).transform(n),ie(t,i.x,i.y,0,0),i.h(e.x,e.bottom).transform(n),ie(t,i.x,i.y,0,0),ne.free(e),ee.free(i),t},Bp.Kh=function(t,e){if(null===(s=this.geometry)||null===this.fill&&null===this.stroke)return!1;var n=s.bounds,i=this.strokeWidth/2;s.type!==en||e||(i+=2);var o=ne.alloc();if(o.assign(n),o.Ic(i+2,i+2),!o.aa(t))return ne.free(o),!1;if(n=i+1e-4,s.type===en)return null!==this.stroke&&(n=(s.endX-s.startX)*(t.x-s.startX)+(s.endY-s.startY)*(t.y-s.startY),!((s.startX-s.endX)*(t.x-s.endX)+(s.startY-s.endY)*(t.y-s.endY)<0||n<0)&&(ne.free(o),Ue.Nb(s.startX,s.startY,s.endX,s.endY,i,t.x,t.y)));if(s.type===nn){e=s.startX;var r=s.startY,a=s.endX,s=s.endY;if(o.x=Math.min(e,a),o.y=Math.min(r,s),o.width=Math.abs(a-e),o.height=Math.abs(s-r),null===this.fill){if(o.Ic(-n,-n),o.aa(t))return ne.free(o),!1;o.Ic(n,n)}return null!==this.stroke&&o.Ic(i,i),t=o.aa(t),ne.free(o),t}if(s.type!==on)return s.type===rn?(ne.free(o),null===this.fill?Ze(s,t.x,t.y,i):$e(s,t,i,1<this.strokeWidth,e)):(O("Unknown Geometry type: "+s.type),!1);r=s.startX,i=s.startY,a=s.endX;var h=s.endY;if(s=Math.min(r,a),e=Math.min(i,h),r=Math.abs(a-r)/2,i=Math.abs(h-i)/2,s=t.x-(s+r),e=t.y-(e+i),null===this.fill){if(i-=n,(r-=n)<=0||i<=0||s*s/(r*r)+e*e/(i*i)<=1)return ne.free(o),!1;r+=n,i+=n}return null!==this.stroke&&(r+=n,i+=n),ne.free(o),!(r<=0||i<=0)&&s*s/(r*r)+e*e/(i*i)<=1},Bp.Dm=function(t,e,n,i){var o,r,a,s,h=this.desiredSize,u=this.xh;t=Math.max(t,0),e=Math.max(e,0),r=(o=null!==this.zd?this.geometry.bounds:(r=this.figure,void 0===(a=qh[r])&&("string"==typeof(s=Ue.Oe[r])&&(s=Ue.Oe[s]),"function"==typeof s?(a=s(null,100,100),qh[r]=a):O("Unsupported Figure: "+r)),a.bounds)).width,a=o.height,s=o.width;var l=o.height;switch(za(this,!0)){case Or:i=n=0;break;case Fr:s=Math.max(t-u,0),l=Math.max(e-u,0);break;case jr:s=Math.max(t-u,0),i=0;break;case zr:n=0,l=Math.max(e-u,0)}switch(isFinite(h.width)&&(s=h.width),isFinite(h.height)&&(l=h.height),h=this.maxSize,o=this.minSize,n=Math.max(n-u,o.width),i=Math.max(i-u,o.height),s=Math.min(h.width,s),l=Math.min(h.height,l),s=isFinite(s)?Math.max(n,s):Math.max(r,n),l=isFinite(l)?Math.max(i,l):Math.max(a,i),n=Gh(this)){case Or:break;case Fr:r=s,a=l;break;case Br:n=Math.min(s/r,l/a),isFinite(n)||(n=1),r*=n,a*=n;break;default:O(n+" is not a valid geometryStretch.")}null!==this.zd?(r=Math.max(r,.01),a=Math.max(a,.01),i=r/(h=(n=null!==this.zd?this.zd:this.na).bounds).width,h=a/h.height,isFinite(i)||(i=1),isFinite(h)||(h=1),this.na=1===i&&1===h?n:n.copy().scale(i,h)):null!==this.na&&Ue.$(this.na.xl,t-u)&&Ue.$(this.na.wl,e-u)||(this.na=Oh.makeGeometry(this,r,a)),o=this.na.bounds,1/0===t||1/0===e?Ca(this,o.x-u/2,o.y-u/2,0===t&&0===r?0:o.width+u,0===e&&0===a?0:o.height+u):Ca(this,-u/2,-u/2,s+u,l+u)},Bp.Ih=function(t,e,n,i){Ea(this,t,e,n,i)},Bp.bd=function(t,e,n){return this.vk(t.x,t.y,e.x,e.y,n)},Bp.vk=function(t,e,n,i,o){var r=1/((c=this.transform).m11*c.m22-c.m12*c.m21),a=c.m22*r,s=-c.m12*r,h=-c.m21*r,u=c.m11*r,l=r*(c.m21*c.dy-c.m22*c.dx),d=r*(c.m12*c.dx-c.m11*c.dy),c=t*a+e*h+l,r=t*s+e*u+d,a=n*a+i*h+l,s=n*s+i*u+d,l=this.xh/2;if(null===(h=this.na)&&(this.measure(1/0,1/0),h=this.na),d=h.bounds,u=!1,h.type===en)if(this.strokeWidth<=1.5)u=Ue.Ie(h.startX,h.startY,h.endX,h.endY,c,r,a,s,o);else{if(h.startX===h.endX?(i=l,u=0):(e=(h.endY-h.startY)/(h.endX-h.startX),i=(u=l/Math.sqrt(1+e*e))*e),e=be(),t=new ee,Ue.Ie(h.startX+i,h.startY+u,h.endX+i,h.endY+u,c,r,a,s,t)&&e.push(t),t=new ee,Ue.Ie(h.startX-i,h.startY-u,h.endX-i,h.endY-u,c,r,a,s,t)&&e.push(t),t=new ee,Ue.Ie(h.startX+i,h.startY+u,h.startX-i,h.startY-u,c,r,a,s,t)&&e.push(t),t=new ee,Ue.Ie(h.endX+i,h.endY+u,h.endX-i,h.endY-u,c,r,a,s,t)&&e.push(t),0===(a=e.length))return Se(e),!1;for(u=!0,s=1/0,i=0;i<a;i++)(n=((t=e[i]).x-c)*(t.x-c)+(t.y-r)*(t.y-r))<s&&(s=n,o.x=t.x,o.y=t.y);Se(e)}else if(h.type===nn)u=Ue.bd(d.x-l,d.y-l,d.x+d.width+l,d.y+d.height+l,c,r,a,s,o);else if(h.type===on){t:if(0===(e=ne.allocAt(d.x,d.y,d.width,d.height).Ic(l,l)).width)u=Ue.Ie(e.x,e.y,e.x,e.y+e.height,c,r,a,s,o);else if(0===e.height)u=Ue.Ie(e.x,e.y,e.x+e.width,e.y,c,r,a,s,o);else{if(t=e.width/2,h=e.height/2,i=e.x+t,u=e.y+h,n=9999,c!==a&&(n=(r-s)/(c-a)),Math.abs(n)<9999){if(t*t*n*n+h*h-(s=r-u-n*(c-i))*s<0){o.x=NaN,o.y=NaN,u=!1;break t}a=(-t*t*n*s+t*h*(l=Math.sqrt(t*t*n*n+h*h-s*s)))/(h*h+t*t*n*n)+i,t=(-t*t*n*s-t*h*l)/(h*h+t*t*n*n)+i,h=n*(a-i)+s+u,s=n*(t-i)+s+u,Math.abs((c-a)*(c-a))+Math.abs((r-h)*(r-h))<Math.abs((c-t)*(c-t))+Math.abs((r-s)*(r-s))?(o.x=a,o.y=h):(o.x=t,o.y=s)}else{if(a=h*h,(a-=a/(t*t)*(s=c-i)*s)<0){o.x=NaN,o.y=NaN,u=!1;break t}a=u+(s=Math.sqrt(a)),s=u-s,Math.abs(a-r)<Math.abs(s-r)?(o.x=c,o.y=a):(o.x=c,o.y=s)}u=!0}ne.free(e)}else if(h.type===rn){d=ee.alloc();var g=a-c,f=s-r,p=g*g+f*f;o.x=a,o.y=s;for(var m=0;m<h.figures.count;m++)for(var y=h.figures.j[m],v=y.segments,w=g=y.startX,b=f=y.startY,S=0;S<v.count;S++){var x=v.j[S],P=x.type,k=x.endX,L=x.endY,M=!1;switch(P){case ln:w=k,b=L;break;case dn:M=zh(g,f,k,L,c,r,a,s,d);break;case cn:M=Ue.uq(g,f,x.point1X,x.point1Y,x.point2X,x.point2Y,k,L,c,r,a,s,.6,d);break;case gn:M=Ue.uq(g,f,g+2/3*(x.point1X-g),f+2/3*(x.point1Y-f),k+2/3*(x.point1X-k),L+2/3*(x.point1Y-L),k,L,c,r,a,s,.6,d);break;case fn:case pn:var _=(P=x.type===fn?hn(x,y):un(x,y,g,f)).length;if(0===_){M=zh(g,f,x.centerX,x.centerY,c,r,a,s,d);break}for(L=null,k=0;k<_;k++){var N,L=P[k];0!==k||!zh(g,f,L[0],L[1],c,r,a,s,d)||(N=jh(c,r,d,p,o))<p&&(p=N,u=!0),Ue.uq(L[0],L[1],L[2],L[3],L[4],L[5],L[6],L[7],c,r,a,s,.6,d)&&((N=jh(c,r,d,p,o))<p&&(p=N,u=!0))}k=L[6],L=L[7];break;default:O("Unknown Segment type: "+P)}g=k,f=L,M&&((M=jh(c,r,d,p,o))<p&&(p=M,u=!0)),x.isClosed&&(zh(g,f,k=w,L=b,c,r,a,s,d)&&((x=jh(c,r,d,p,o))<p&&(p=x,u=!0)))}c=n-t,r=i-e,0!==(a=Math.sqrt(c*c+r*r))&&(c/=a,r/=a),o.x-=c*l,o.y-=r*l,ee.free(d)}else O("Unknown Geometry type: "+h.type);return!!u&&(this.transform.sa(o),!0)},Bp.Jh=function(t,e){if(void 0===e)return t.De(this.actualBounds);var n=this.na;null===n&&(this.measure(1/0,1/0),n=this.na),n=n.bounds;var i=this.strokeWidth/2,o=!1,r=ee.alloc();return r.h(n.x-i,n.y-i),t.aa(e.sa(r))&&(r.h(n.x-i,n.bottom+i),t.aa(e.sa(r))&&(r.h(n.right+i,n.bottom+i),t.aa(e.sa(r))&&(r.h(n.right+i,n.y-i),t.aa(e.sa(r))&&(o=!0)))),ee.free(r),o},Bp.Lc=function(t,e){if(this.Jh(t,e)||void 0===e&&(e=this.transform,t.De(this.actualBounds)))return!0;var n=Ie.alloc();n.set(e),n.St();var i=t.left,o=t.right,r=t.top;t=t.bottom;var a=ee.alloc();if(a.h(i,r),n.sa(a),this.Kh(a,!0))return ee.free(a),!0;if(a.h(o,r),n.sa(a),this.Kh(a,!0))return ee.free(a),!0;if(a.h(i,t),n.sa(a),this.Kh(a,!0))return ee.free(a),!0;if(a.h(o,t),n.sa(a),this.Kh(a,!0))return ee.free(a),!0;var s=ee.alloc(),h=ee.alloc();return n.set(e),n.iw(this.transform),n.St(),s.x=o,s.y=r,s.transform(n),a.x=i,a.y=r,a.transform(n),e=!1,Rh(this,a,s,h)?e=!0:(a.x=o,a.y=t,a.transform(n),Rh(this,a,s,h)?e=!0:(s.x=i,s.y=t,s.transform(n),Rh(this,a,s,h)?e=!0:(a.x=i,a.y=r,a.transform(n),Rh(this,a,s,h)&&(e=!0)))),ee.free(a),Ie.free(n),ee.free(s),ee.free(h),e},Bp.oy=function(t,e,n){function i(t,e){for(var n=t.length,i=0;i<n;i+=2)if(e.kd(t[i],t[i+1])>o)return!0;return!1}if(n&&null!==this.fill&&this.Kh(t,!0))return!0;var o=t.Fe(e),r=o;if(1.5<this.strokeWidth&&(o=this.strokeWidth/2+Math.sqrt(o),o*=o),null===(e=this.na)&&(this.measure(1/0,1/0),null===(e=this.na)))return!1;if(!n){var a=(u=e.bounds).x,s=u.y,h=u.x+u.width,u=u.y+u.height;if(ct(t.x,t.y,a,s)<=o&&ct(t.x,t.y,h,s)<=o&&ct(t.x,t.y,a,u)<=o&&ct(t.x,t.y,h,u)<=o)return!0}if(a=e.startX,s=e.startY,h=e.endX,u=e.endY,e.type===en){if(n=(a-h)*(t.x-h)+(s-u)*(t.y-u),dt(t.x,t.y,a,s,h,u)<=(0<=(h-a)*(t.x-a)+(u-s)*(t.y-s)&&0<=n?o:r))return!0}else{if(e.type===nn)return e=!1,n&&(e=dt(t.x,t.y,a,s,a,u)<=o||dt(t.x,t.y,a,s,h,s)<=o||dt(t.x,t.y,h,s,h,u)<=o||dt(t.x,t.y,a,u,h,u)<=o),e;if(e.type===on){e=t.x-(a+h)/2,r=t.y-(s+u)/2;var l=Math.abs(h-a)/2,d=Math.abs(u-s)/2;if(0===l||0===d)return dt(t.x,t.y,a,s,h,u)<=o;if(!n)return!(ct(e,r,-l,0)>=o||ct(e,r,0,-d)>=o||ct(e,r,0,d)>=o||ct(e,r,l,0)>=o);if((t=Ue.Hz(l,d,e,r))*t<=o)return!0}else if(e.type===rn){if(r=(h=e.bounds).x,a=h.y,s=h.x+h.width,h=h.y+h.height,t.x>s&&t.x<r&&t.y>h&&t.y<a&&dt(t.x,t.y,r,a,r,h)>o&&dt(t.x,t.y,r,a,s,a)>o&&dt(t.x,t.y,s,h,r,h)>o&&dt(t.x,t.y,s,h,s,a)>o)return!1;if(r=Math.sqrt(o),!n){for(n=e.figures,e=0;e<n.count;e++){if(u=(r=n.j[e]).startX,l=r.startY,t.kd(u,l)>o)return!1;for(s=(a=r.segments.j).length,h=0;h<s;h++)switch((d=a[h]).type){case ln:case dn:if(u=d.endX,l=d.endY,t.kd(u,l)>o)return!1;break;case cn:var c=be();if(Ue.Ce(u,l,d.point1X,d.point1Y,d.point2X,d.point2Y,d.endX,d.endY,.8,c),u=i(c,t),Se(c),u)return!1;if(u=d.endX,l=d.endY,t.kd(u,l)>o)return!1;break;case gn:if(c=be(),Ue.Wq(u,l,d.point1X,d.point1Y,d.endX,d.endY,.8,c),u=i(c,t),Se(c),u)return!1;if(u=d.endX,l=d.endY,t.kd(u,l)>o)return!1;break;case fn:case pn:var g=(c=d.type===fn?hn(d,r):un(d,r,u,l)).length;if(0===g){if(u=d.centerX,l=d.centerY,t.kd(u,l)>o)return!1;break}d=null;for(var f=be(),p=0;p<g;p++)if(d=c[p],f.length=0,Ue.Ce(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.8,f),i(f,t))return Se(f),!1;Se(f),null!==d&&(u=d[6],l=d[7]);break;default:O("Unknown Segment type: "+d.type)}}return!0}if(null===this.fill?Ze(e,t.x,t.y,r):$e(e,t,r,!0,!1))return!0}}return!1},Bp.cc=function(){this.na=null},Oh.makeGeometry=function(t,e,n){var i,o;return"None"!==t.toArrow?i=Uh[t.toArrow]:"None"!==t.fromArrow?i=Uh[t.fromArrow]:("string"==typeof(i=Ue.Oe[t.figure])&&(i=Ue.Oe[i]),void 0===i&&O("Unknown Shape.figure: "+t.figure),(i=i(t,e,n)).xl=e,i.wl=n),null!==i||"function"==typeof(o=Ue.Oe.Rectangle)&&(i=o(t,e,n)),i},s.Object.defineProperties(Oh.prototype,{geometry:{get:function(){return null!==this.na?this.na:this.zd},set:function(t){var e,n=this.na,i=this.zd;n!==t&&(this.zd=this.na=null!==t?t.freeze():null,null!==(e=this.part)&&(e.jh=NaN),this.o(),this.g("geometry",n||i,t),!Ua(this)||null!==(t=this.part)&&Ta(this,t,"geometryString"))}},geometryString:{get:function(){return null===this.geometry?"":this.geometry.toString()},set:function(t){var e=(t=Ke(t)).normalize();this.geometry=t,this.position=t=ee.allocAt(-e.x,-e.y),ee.free(t)}},isGeometryPositioned:{get:function(){return this.ro},set:function(t){var e=this.ro;e!==t&&(this.ro=t,this.o(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.ml},set:function(t){var e=this.ml;e!==t&&(null!==t&&Ts(t,"Shape.fill"),t instanceof vs&&t.freeze(),this.ml=t,this.M(),this.g("fill",e,t))}},stroke:{get:function(){return this.Hc},set:function(t){var e=this.Hc;e!==t&&(null!==t&&Ts(t,"Shape.stroke"),t instanceof vs&&t.freeze(),this.Hc=t,this.M(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.xh},set:function(t){var e,n=this.xh;n!==t&&(0<=t?(this.xh=t,this.o(),null!==(e=this.part)&&(e.jh=NaN),this.g("strokeWidth",n,t)):f(t,"value >= 0",Oh,"strokeWidth:value"))}},strokeCap:{get:function(){return this.em},set:function(t){var e=this.em;e!==t&&("string"!=typeof t||"butt"!==t&&"round"!==t&&"square"!==t?f(t,'"butt", "round", or "square"',Oh,"strokeCap"):(this.em=t,this.M(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return this.fm},set:function(t){var e=this.fm;e!==t&&("string"!=typeof t||"miter"!==t&&"bevel"!==t&&"round"!==t?f(t,'"miter", "bevel", or "round"',Oh,"strokeJoin"):(this.fm=t,this.M(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return this.dk},set:function(t){var e,n=this.dk;n!==t&&1<=t&&(this.dk=t,this.M(),null!==(e=this.part)&&(e.jh=NaN),this.g("strokeMiterLimit",n,t))}},strokeDashArray:{get:function(){return this.vh},set:function(t){var e=this.vh;if(e!==t){if(null!==t){for(var n=t.length,i=0,o=0;o<n;o++){var r=t[o];0<=r&&isFinite(r)||O("strokeDashArray:value "+r+" at index "+o+" must be a positive number or zero."),i+=r}if(0===i){if(null===e)return;t=null}}this.vh=t,this.M(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return this.wh},set:function(t){var e=this.wh;e!==t&&0<=t&&(this.wh=t,this.M(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.Xn},set:function(t){var e,n=this.Xn;n!==t&&("function"==typeof(e=Ue.Oe[t])?e=t:(e=Ue.Oe[t.toLowerCase()])||O("Unknown Shape.figure: "+t),n!==e&&(null!==(t=this.part)&&(t.jh=NaN),this.Xn=e,this.zd=null,this.cc(),this.o(),this.g("figure",n,e)))}},toArrow:{get:function(){return this.lm},set:function(t){var e,n=this.lm;!0===t?t="Standard":!1===t&&(t=""),n!==t&&(null===(e=Vh(t))?O("Unknown Shape.toArrow: "+t):n!==e&&(this.lm=e,this.zd=null,this.cc(),this.o(),Ih(this),this.g("toArrow",n,e)))}},fromArrow:{get:function(){return this.nl},set:function(t){var e,n=this.nl;!0===t?t="Standard":!1===t&&(t=""),n!==t&&(null===(e=Vh(t))?O("Unknown Shape.fromArrow: "+t):n!==e&&(this.nl=e,this.zd=null,this.cc(),this.o(),Ih(this),this.g("fromArrow",n,e)))}},spot1:{get:function(){return this.nf},set:function(t){var e=this.nf;e.w(t)||(this.nf=t=t.G(),this.o(),this.g("spot1",e,t))}},spot2:{get:function(){return this.pf},set:function(t){var e=this.pf;e.w(t)||(this.pf=t=t.G(),this.o(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.op},set:function(t){var e=this.op;e!==t&&(this.op=t,this.cc(),this.o(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.pp},set:function(t){var e=this.pp;e!==t&&(this.pp=t,this.cc(),this.o(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){if(null!==this.na)return this.qc.assign(this.na.bounds),this.qc;var t=this.desiredSize;return new ne(0,0,t.width,t.height)}},pathPattern:{get:function(){return this.rp},set:function(t){var e=this.rp;e!==t&&(this.rp=t,this.M(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return this.fo},set:function(t){var e=this.fo;e!==t&&(this.fo=t,this.g("geometryStretch",e,t))}},interval:{get:function(){return this.Qd},set:function(t){var e,n=this.Qd;n!==(t=Math.round(t))&&0!==t&&isFinite(t)&&(this.Qd=t,null!==(e=this.diagram)&&this.panel===e.grid&&yr(e),this.o(),null!==(e=this.panel)&&(e.dh=null),this.g("interval",n,t))}},graduatedStart:{get:function(){return this.Od},set:function(t){var e=this.Od;e!==t&&(t<0?t=0:1<t&&(t=1),this.Od=t,this.o(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.Md},set:function(t){var e=this.Md;e!==t&&(t<0?t=0:1<t&&(t=1),this.Md=t,this.o(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return this.Nd},set:function(t){var e=this.Nd;e!==t&&(this.Nd=t,this.o(),this.g("graduatedSkip",e,t))}}}),Oh.prototype.intersectsRect=Oh.prototype.Lc,Oh.prototype.containedInRect=Oh.prototype.Jh,Oh.prototype.getNearestIntersectionPoint=Oh.prototype.bd,Oh.prototype.getDocumentBounds=Oh.prototype.wm,Oh.prototype.getDocumentPoint=Oh.prototype.ga;var Uh=new I,qh=new I;function Hh(){Na.call(this),mu||(pu=Xr?new fs(null).context:null,mu=!0),this.Hx=this.Tb="",this.Hc="black",this.je="13px sans-serif",this.Vi="start",this.Ld=Or,this.aj=Le,this.Mj=!0,this.zi=this.Ai=!1,this.mg=au,this.zg=ou,this.ws=this.sb=this.Vc=0,this.dv=this.ev=null,this.Un=!1,this.Cc=this.wn=this.gq=this.Wi=this.hq=null,this.mf=this.lf=0,this.re=1/0,this.Di=0,this.ke=null,this.xe=0,this.ie=this.jb=this.Pb=null,this.Qd=1,this.Od=0,this.Md=1,this.Nd=this.Ij=null}function Yh(t,e){t.F=6144|e.F,t.tb=e.opacity,t.kb=e.background,t.dc=e.areaBackground,t.Uc=e.desiredSize.G(),t.fg=e.minSize.G(),t.eg=e.maxSize.G(),t.cg=e.cg.copy(),t.ya=e.scale,t.Yb=e.angle,t.ze=e.stretch,t.ih=e.margin.G(),t.yb=e.alignment.G(),t.Tk=e.alignmentFocus.G(),t.Vl=e.segmentFraction,t.Wl=e.segmentOffset.G(),t.Xl=e.segmentOrientation,null!==e.pd&&(t.pd=e.pd.copy()),t.Zl=e.shadowVisible,e instanceof Hh&&(t.Tb=e.Tb,t.Hc=e.Hc,t.je=e.je,t.Vi=e.Vi,t.Ld=e.Ld,t.aj=e.aj,t.Mj=e.Mj,t.Ai=e.Ai,t.zi=e.zi,t.mg=e.mg,t.zg=e.zg,t.ke=null,t.lf=e.lf,t.mf=e.mf,t.re=e.re,t.Di=e.Di,t.Qd=e.Qd,t.Od=e.Od,t.Md=e.Md,t.Ij=e.Ij,t.Nd=e.Nd)}function Kh(t,e,n){null===t.ie?(t.ie=e,t.sb=n):(null!==t.jb&&null!==t.Pb||(t.jb=[],t.Pb=[],t.jb.push(t.ie),t.Pb.push(t.sb)),t.jb.push(e),t.Pb.push(n))}function Xh(t,e,n,i){e=e.trim();var o=0,r=t.je,a=t.lf+t.mf,a=Math.max(0,Jh(t)+a),s=t.mg===su?Zh(r):0;if(t.Vc>=t.re)null!==i&&i.h(0,a);else{var h=e;if(t.zg===nu)if(t.xe=1,r=$h(e),0===s||r<=n)t.sb=Math.max(t.sb,r),Kh(t,e,t.sb),null!==i&&i.h(r,a);else{for(r=$h((o=Wh(t,h))+(e=Wh(t,h=h.substr(o.length))));0<e.length&&r<=n;)r=$h(((o+=e)+(e=Wh(t,h=h.substr(e.length)))).trim());for(o+=e.trim(),n=Math.max(1,n-s);$h(o)>n&&1<o.length;)o=o.substr(0,o.length-1);e=$h(o+=gu),t.sb=e,Kh(t,o,e),null!==i&&i.h(e,a)}else{for((s=0)===h.length&&(s=1,Kh(t,h,0));0<h.length;){for(var u=Wh(t,h),h=h.substr(u.length);$h(u)>n;){var l,d=1,r=$h(u.substr(0,d));for(e=0;r<=n;)d++,e=r,r=$h(u.substr(0,d));if(o=1===d?(l=r,Math.max(o,r)):(l=e,Math.max(o,e)),--d<1&&(d=1),Kh(t,u.substr(0,d),l),s++,u=u.substr(d),t.Vc+s>t.re)break}for(r=$h(u+(e=Wh(t,h)));0<e.length&&r<=n;)r=$h(((u+=e)+(e=Wh(t,h=h.substr(e.length)))).trim());if(""!==(u=u.trim())&&("­"===u[u.length-1]&&(u=u.substring(0,u.length-1)+"‐"),o=0===e.length?(d=r,Math.max(o,r)):(d=e=$h(u),Math.max(o,e)),Kh(t,u,d),s++,t.Vc+s>t.re))break}t.xe=Math.min(t.re,s),t.sb=Math.max(t.sb,o),null!==i&&i.h(t.sb,a*t.xe)}}}function Wh(t,e){if(t.zg===ru)return e.substr(0,1);t=e.length;for(var n=0,i=hu;n<t&&!i.test(e.charAt(n));)n++;for(;n<t&&i.test(e.charAt(n));)n++;return t<=n?e:e.substr(0,n)}function $h(t){return null===pu?8*t.length:pu.measureText(t).width}function Jh(t){if(null!==t.ke)return t.ke;var e=t.je;if(null!==pu)return void 0!==uu[e]&&lu<5e3?n=uu[e]:(n=1.3*pu.measureText("M").width,uu[e]=n,lu++),t.ke=n;var n=16;return t.ke=n}function Zh(t){return null===pu?6:(void 0!==du[t]&&cu<5e3?e=du[t]:(e=pu.measureText(gu).width,du[t]=e,cu++),e);var e}function Qh(t,e){var n,i=t.Tb.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),o=t.lf+t.mf,o=Math.max(0,Jh(t)+o);if(0===i.length)return t.sb=0,t.Vc=1,o;t.isMultiline||0<=(n=i.indexOf("\n",0))&&(i=i.substr(0,n)),n=0;for(var r,a,s=t.Vc=0,h=!1;!h;)-1===(a=i.indexOf("\n",s))&&(a=i.length,h=!0),s<=a&&(s=i.substr(s,a-s),t.zg!==nu?(t.xe=0,Xh(t,s,e,r=xe.alloc()),n+=r.height,xe.free(r),t.Vc+=t.xe):(Xh(t,s,e,null),n+=o,t.Vc++),t.Vc===t.re&&(h=!0)),s=a+1;return t.ws=n}Oh.className="Shape",Oh.getFigureGenerators=function(){var t,e=new at;for(t in Ue.Oe)t!==t.toLowerCase()&&e.add(t,Ue.Oe[t]);return e.freeze(),e},Oh.defineFigureGenerator=function(t,e){var n=t.toLowerCase(),i=Ue.Oe;i[t]=e,i[n]=t},Oh.getArrowheadGeometries=function(){var t,e,n,i=new at;for(n in Ue.bn)void 0===Uh[n]&&(t=Ke(Ue.bn[n],!1),Uh[n]=t,(t=n.toLowerCase())!==n&&(Uh[t]=n));for(e in Uh)e===e.toLowerCase()||(n=Uh[e])instanceof qe&&i.add(e,n);return i.freeze(),i},Oh.defineArrowheadGeometry=function(t,e){var n=null,n="string"==typeof e?Ke(e,!1):e;"none"!==(e=t.toLowerCase())&&t!==e||O("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var i=Uh;i[t]=n,i[e]=t},n(Hh,Na),Hh.prototype.cloneProtected=function(t){Na.prototype.cloneProtected.call(this,t),t.Tb=this.Tb,t.Hx=this.Hx,t.Hc=this.Hc,t.je=this.je,t.Vi=this.Vi,t.Ld=this.Ld,t.aj=this.aj,t.Mj=this.Mj,t.Ai=this.Ai,t.zi=this.zi,t.mg=this.mg,t.zg=this.zg,t.Vc=this.Vc,t.ws=this.ws,t.sb=this.sb,t.ev=this.ev,t.dv=this.dv,t.Un=this.Un,t.hq=this.hq,t.Wi=this.Wi,t.gq=this.gq,t.wn=this.wn,t.Cc=this.Cc,t.lf=this.lf,t.mf=this.mf,t.re=this.re,t.ke=this.ke,t.xe=this.xe,t.Pb=this.Pb,t.jb=this.jb,t.ie=this.ie,t.Di=this.Di,t.Qd=this.Qd,t.Od=this.Od,t.Md=this.Md,t.Ij=this.Ij,t.Nd=this.Nd},(Bp=Hh.prototype).hb=function(t){t.classType===Hh?this.wrap=t:Na.prototype.hb.call(this,t)},Bp.toString=function(){return 22<this.Tb.length?'TextBlock("'+this.Tb.substring(0,20)+'"...)':'TextBlock("'+this.Tb+'")'},Bp.o=function(){Na.prototype.o.call(this),this.dv=this.ev=null},Bp.ej=function(t,e){if(null!==this.Hc&&0!==this.Tb.length&&null!==this.je){var n=this.naturalBounds,i=this.actualBounds,o=n.width,r=n.height,a=Jh(this),s=t.textAlign=this.Vi,h=e.Al;"start"===s?s=h?"right":"left":"end"===s&&(s=h?"left":"right"),h=this.Ai;var u=this.zi;Oa(this,t,this.Hc,!0,!1,n,i),(h||u)&&Oa(this,t,this.Hc,!1,!1,n,i),n=!1;var l=ee.allocAt(i=0,0);this.Ad.sa(l);var d=ee.allocAt(0,a);this.Ad.sa(d);var c=l.Fe(d);switch(ee.free(l),ee.free(d),c*(l=e.scale)*l<8&&(n=!0),e.Gb!==t&&(n=!1),!1===e.Ge("textGreeking")&&(n=!1),e=this.lf,c=this.mf,this.flip){case Vr:t.translate(o,0),t.scale(-1,1);break;case Ir:t.translate(0,r),t.scale(1,-1);break;case Ur:t.translate(o,r),t.scale(-1,-1)}if((d=(e+a+c)*(l=this.Vc))<r&&(i=(i=this.aj).y*r-i.y*d+i.offsetY),1===l&&null!==this.ie)o<(c=this.sb)&&(c=o),this.dj(this.ie,t,0,i+e,o,a,c,n,s,h,u);else if(null!==this.Pb&&null!==this.jb)for(d=0;d<l;d++){var g=this.Pb[d];o<g&&(g=o),i+=e,this.dj(this.jb[d],t,0,i,o,a,g,n,s,h,u),i+=a+c}switch(this.flip){case Vr:t.scale(-1,1),t.translate(-o,0);break;case Ir:t.scale(1,-1),t.translate(0,-r);break;case Ur:t.scale(-1,-1),t.translate(-o,-r)}}},Bp.dj=function(t,e,n,i,o,r,a,s,h,u,l){var d=0;s?("left"===h?d=0:"right"===h?d=o-a:"center"===h&&(d=(o-a)/2),e.fillRect(n+d,i+.25*r,a,1)):("left"===h?d=0:"right"===h?d=o:"center"===h&&(d=o/2),o=null!==tu?tu(this,r):.75*r,e.fillText(t,n+d,i+o),0===(t=r/20|0)&&(t=1),"right"===h?d-=a:"center"===h&&(d-=a/2),u&&(h=null!==eu?eu(this,r):.8*r,e.beginPath(),e.lineWidth=t,e.moveTo(n+d,i+h),e.lineTo(n+d+a,i+h),e.stroke()),l&&(e.beginPath(),i=i+r-r/2.2|0,0!=(e.lineWidth=t)%2&&(i+=.5),e.moveTo(n+d,i),e.lineTo(n+d+a,i),e.stroke()))},Bp.Dm=function(t,e,n,i){this.Di=t;var o,r=this.je;if(null!==pu&&fu!==r&&(fu=pu.font=r),this.sb=this.xe=0,this.ie=this.jb=this.Pb=this.ke=null,isNaN(this.desiredSize.width)){if(0===(r=this.Tb.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length)r=0;else if(this.isMultiline){for(var a=o=0,s=!1;!s;){var h=r.indexOf("\n",a);-1===h&&(h=r.length,s=!0),o=Math.max(o,$h(r.substr(a,h-a).trim())),a=h+1}r=o}else 0<=(o=r.indexOf("\n",0))&&(r=r.substr(0,o)),r=$h(r);r=Math.min(r,t/this.scale),r=Math.max(8,r)}else r=this.desiredSize.width;if(null!==this.panel&&(r=Math.min(r,this.panel.maxSize.width)),o=Qh(this,r),a=o=isNaN(this.desiredSize.height)?Math.min(o,e/this.scale):this.desiredSize.height,0!==this.sb&&null!==this.Pb&&null!==this.jb&&this.mg===su&&(e=this.je,e=this.mg===su?Zh(e):0,s=this.lf+this.mf,s=Math.max(0,Jh(this)+s),!((a=Math.min(this.maxLines-1,Math.max(Math.floor(a/s+.01)-1,0)))+1>=this.jb.length))){for(s=this.jb[a],e=Math.max(1,t-e);$h(s)>e&&1<s.length;)s=s.substr(0,s.length-1);e=$h(s+=gu),this.jb[a]=s,this.jb=this.jb.slice(0,a+1),this.Pb[a]=e,this.Pb=this.Pb.slice(0,a+1),this.xe=this.jb.length,this.sb=Math.max(this.sb,e),this.Vc=this.xe,1===this.Vc&&(this.ie=this.jb[0])}this.wrap!==iu&&!isNaN(this.desiredSize.width)||(r=isNaN(t)?this.sb:Math.min(t,this.sb),isNaN(this.desiredSize.width)&&(r=Math.max(8,r))),r=Math.max(n,r),o=Math.max(i,o),Tt(this.qc,r,o),Ca(this,0,0,r,o)},Bp.Ih=function(t,e,n,i){Ea(this,t,e,n,i)},s.Object.defineProperties(Hh.prototype,{font:{get:function(){return this.je},set:function(t){var e=this.je;e!==t&&(this.je=t,this.ke=null,this.o(),this.g("font",e,t))}},text:{get:function(){return this.Tb},set:function(t){var e=this.Tb;e!==(t=null!=t?t.toString():"")&&(this.Tb=t,this.o(),this.g("text",e,t))}},textAlign:{get:function(){return this.Vi},set:function(t){var e=this.Vi;e===t||"start"!==t&&"end"!==t&&"left"!==t&&"right"!==t&&"center"!==t||(this.Vi=t,this.M(),this.g("textAlign",e,t))}},flip:{get:function(){return this.Ld},set:function(t){var e=this.Ld;e!==t&&(this.Ld=t,this.M(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return this.aj},set:function(t){var e=this.aj;e.w(t)||(this.aj=t=t.G(),ja(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){var t,e,n;return this.qc.u()||(t=xe.alloc(),Xh(this,this.Tb,999999,t),e=t.width,xe.free(t),t=Qh(this,e),n=this.desiredSize,isNaN(n.width)||(e=n.width),isNaN(n.height)||(t=n.height),Tt(this.qc,e,t)),this.qc}},isMultiline:{get:function(){return this.Mj},set:function(t){var e=this.Mj;e!==t&&(this.Mj=t,this.o(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return this.Ai},set:function(t){var e=this.Ai;e!==t&&(this.Ai=t,this.M(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return this.zi},set:function(t){var e=this.zi;e!==t&&(this.zi=t,this.M(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return this.zg},set:function(t){var e=this.zg;e!==t&&(this.zg=t,this.o(),this.g("wrap",e,t))}},overflow:{get:function(){return this.mg},set:function(t){var e=this.mg;e!==t&&(this.mg=t,this.o(),this.g("overflow",e,t))}},stroke:{get:function(){return this.Hc},set:function(t){var e=this.Hc;e!==t&&(null!==t&&Ts(t,"TextBlock.stroke"),t instanceof vs&&t.freeze(),this.Hc=t,this.M(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.Vc}},editable:{get:function(){return this.Un},set:function(t){var e=this.Un;e!==t&&(this.Un=t,this.g("editable",e,t))}},textEditor:{get:function(){return this.hq},set:function(t){var e=this.hq;e!==t&&(this.hq=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return this.Cc},set:function(t){var e=this.Cc;e!==t&&(this.Cc=t,this.g("errorFunction",e,t))}},interval:{get:function(){return this.Qd},set:function(t){var e,n=this.Qd;n!==(t=Math.round(t))&&0!==t&&isFinite(t)&&(this.Qd=t,this.o(),null!==(e=this.panel)&&(e.dh=null),this.g("interval",n,t))}},graduatedStart:{get:function(){return this.Od},set:function(t){var e=this.Od;e!==t&&(t<0?t=0:1<t&&(t=1),this.Od=t,this.o(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.Md},set:function(t){var e=this.Md;e!==t&&(t<0?t=0:1<t&&(t=1),this.Md=t,this.o(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return this.Ij},set:function(t){var e=this.Ij;e!==t&&(this.Ij=t,this.o(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return this.Nd},set:function(t){var e=this.Nd;e!==t&&(this.Nd=t,this.o(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return this.Wi},set:function(t){var e=this.Wi;e!==t&&(this.Wi=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return this.gq},set:function(t){var e=this.gq;e!==t&&(this.gq=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return this.lf},set:function(t){var e=this.lf;e!==t&&(this.lf=t,this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return this.mf},set:function(t){var e=this.mf;e!==t&&(this.mf=t,this.g("spacingBelow",e,t))}},maxLines:{get:function(){return this.re},set:function(t){var e=this.re;e!==t&&((t=Math.floor(t))<=0&&f(t,"> 0",Hh,"maxLines"),this.re=t,this.g("maxLines",e,t),this.o())}},metrics:{get:function(){return{arrSize:null!==this.Pb?this.Pb:[this.sb],arrText:null!==this.jb?this.jb:[this.ie],maxLineWidth:this.sb,fontHeight:this.ke}}},choices:{get:function(){return this.wn},set:function(t){var e=this.wn;e!==t&&(this.wn=t,this.g("choices",e,t))}}});var tu=null,eu=null,nu=new j(Hh,"None",0),iu=new j(Hh,"WrapFit",1),ou=new j(Hh,"WrapDesiredSize",2),ru=new j(Hh,"WrapBreakAll",3),au=new j(Hh,"OverflowClip",0),su=new j(Hh,"OverflowEllipsis",1),hu=/[ \u200b\u00ad]/,uu=new I,lu=0,du=new I,cu=0,gu="...",fu="",pu=null,mu=!1;function yu(){this.Pb=[],this.jb=[]}function vu(){Na.call(this),this.Yg=null,this.Yp="",this.uh=Rt,this.sl=Fr,this.qf=this.Cc=null,this.rl=Wt,this.Ld=Or,this.hm=null,this.Su=!1,this.$r=!0,this.Il=!1,this.am=null}function wu(t){void 0===t&&(t=""),""!==t?xu[t]&&(delete xu[t],Pu--):(xu=new I,Pu=0)}function bu(t,e){t.ns=!0,t.ol=!1;for(var n=_(),i=n.length,o=0;o<i;o++){var r=n[o],a=t.getAttribute("src"),s=r.Pi.H(a);if(null!==s)for(var h=s.length,u=0;u<h;u++)a=s[u],r.Ns.add(a),r.Db(),void 0===t.ov&&(t.ov=e,null!==a.qf&&a.qf(a,e))}}function Su(t,e){t.ol=e;for(var n=_(),i=n.length,o=0;o<i;o++){var r,a=n[o],s=t.getAttribute("src");if(null!==(r=a.Pi.H(s))){a=r.length,s=be();for(var h=0;h<a;h++)s.push(r[h]);for(h=0;h<a;h++)null!==(r=s[h]).Cc&&r.Cc(r,e);Se(s)}}}Hh.className="TextBlock",Hh.getEllipsis=function(){return gu},Hh.setEllipsis=function(t){gu=t,du=new I,cu=0},Hh.getBaseline=function(){return tu},Hh.setBaseline=function(t){tu=t;for(var e=(t=_()).length,n=0;n<e;n++)t[n].Je()},Hh.getUnderline=function(){return eu},Hh.setUnderline=function(t){eu=t;for(var e=(t=_()).length,n=0;n<e;n++)t[n].Je()},Hh.isValidFont=function(t){if(mu||(pu=Xr?new fs(null).context:null,mu=!0),null===pu)return!0;var e=pu.font;if(t===e||"10px sans-serif"===t)return!0;pu.font="10px sans-serif",pu.font=t;var n=pu.font;if("10px sans-serif"!==n)return pu.font=e,!0;pu.font="19px serif";var i=pu.font;return pu.font=t,n=pu.font,pu.font=e,n!==i},Hh.None=nu,Hh.WrapFit=iu,Hh.WrapDesiredSize=ou,Hh.WrapBreakAll=ru,Hh.OverflowClip=au,Hh.OverflowEllipsis=su,yu.prototype.reset=function(){this.Pb=[],this.jb=[]},yu.prototype.Dt=function(t){this.Pb=b(t.Pb),this.jb=b(t.jb)},yu.className="TextBlockMetrics",n(vu,Na),vu.prototype.cloneProtected=function(t){Na.prototype.cloneProtected.call(this,t),t.element=this.Yg,t.Yp=this.Yp,t.uh=this.uh.G(),t.sl=this.sl,t.Ld=this.Ld,t.Cc=this.Cc,t.qf=this.qf,t.rl=this.rl.G(),t.$r=this.$r,t.am=this.am},(Bp=vu.prototype).hb=function(t){t===Or||t===Br||t===Rr?this.imageStretch=t:Na.prototype.hb.call(this,t)},Bp.toString=function(){return"Picture("+this.source+")#"+Q(this)},Bp.MA=function(){var t;""!==this.source&&(wu(this.source),t=this.source,this.source="",this.source=t)},Bp.Je=function(){this.M()},Bp.ej=function(t,e){var n=this.Yg;if(null!==n){var i=n.getAttribute("src");if(!(n instanceof HTMLImageElement&&(null===i||""===i)||n.ol instanceof Event&&t instanceof ps)){i=this.naturalBounds;var o=0,r=0,a=(s=this.Su)?+n.width:n.naturalWidth,s=s?+n.height:n.naturalHeight;if(void 0===a&&n.videoWidth&&(a=n.videoWidth),void 0===s&&n.videoHeight&&(s=n.videoHeight),a=a||i.width,s=s||i.height,0!==a&&0!==s){var h=a,u=s;this.sourceRect.u()&&(o=this.uh.x,r=this.uh.y,a=this.uh.width,s=this.uh.height);var l=a,d=s,c=this.sl,g=this.rl;switch(c){case Or:if(this.sourceRect.u())break;l>=i.width&&(o=o+g.offsetX+(l*g.x-i.width*g.x)),d>=i.height&&(r=r+g.offsetY+(d*g.y-i.height*g.y)),a=Math.min(i.width,l),s=Math.min(i.height,d);break;case Fr:l=i.width,d=i.height;break;case Br:case Rr:c===Br?(l*=c=Math.min(i.height/d,i.width/l),d*=c):c===Rr&&(d*=c=Math.max(i.height/d,i.width/l),(l*=c)>=i.width&&(o=(o+g.offsetX+(l*g.x-i.width*g.x)/l)*a),d>=i.height&&(r=(r+g.offsetY+(d*g.y-i.height*g.y)/d)*s),a*=1/(l/i.width),s*=1/(d/i.height),l=i.width,d=i.height)}var f=l*(c=this.Af()*e.scale)*d*c,p=a*s/f,m=n.__goCache,c=null;if(n.ns&&void 0!==m&&4<f&&ku*ku<p)for(null===m.cj&&(Mu(m,4,h,u,n),Mu(m,16,h,u,n)),u=(h=m.cj).length,f=0;f<u&&h[f].ratio*h[f].ratio<p;f++)c=h[f];if(!e.kl){if(null===this.hm)if(null===this.Yg)this.hm=!1;else{(h=new fs(null).context).drawImage(this.Yg,0,0);try{h.getImageData(0,0,1,1).data[3]&&(this.hm=!1),this.hm=!1}catch(t){this.hm=!0}}if(this.hm)return}switch(h=0,l<i.width&&(h=g.offsetX+(i.width*g.x-l*g.x)),u=0,d<i.height&&(u=g.offsetY+(i.height*g.y-d*g.y)),this.flip){case Vr:t.translate(Math.min(i.width,l),0),t.scale(-1,1);break;case Ir:t.translate(0,Math.min(i.height,d)),t.scale(1,-1);break;case Ur:t.translate(Math.min(i.width,l),Math.min(i.height,d)),t.scale(-1,-1)}if(e.Ge("pictureRatioOptimization")&&!e.xi&&void 0!==m&&null!==c&&1!==c.ratio){t.save(),e=c.ratio;try{t.drawImage(c.source,o/e,r/e,Math.min(c.source.width,a/e),Math.min(c.source.height,s/e),h,u,Math.min(i.width,l),Math.min(i.height,d))}catch(t){this.$r=!1}t.restore()}else try{t.drawImage(n,o,r,a,s,h,u,Math.min(i.width,l),Math.min(i.height,d))}catch(t){this.$r=!1}switch(this.flip){case Vr:t.scale(-1,1),t.translate(-Math.min(i.width,l),0);break;case Ir:t.scale(1,-1),t.translate(0,-Math.min(i.height,d));break;case Ur:t.scale(-1,-1),t.translate(-Math.min(i.width,l),-Math.min(i.height,d))}}}}},Bp.Dm=function(t,e,n,i){var o=this.desiredSize,r=za(this,!0),a=this.Yg,s=this.Su;(s||!this.Il&&a&&a.complete)&&(this.Il=!0),null===a&&(isFinite(o.width)||(t=0),isFinite(o.height)||(e=0)),isFinite(o.width)||r===Fr||r===jr?(isFinite(t)||(t=this.sourceRect.u()?this.sourceRect.width:s?+a.width:a.naturalWidth),n=0):null!==a&&!1!==this.Il&&(t=this.sourceRect.u()?this.sourceRect.width:s?+a.width:a.naturalWidth),isFinite(o.height)||r===Fr||r===zr?(isFinite(e)||(e=this.sourceRect.u()?this.sourceRect.height:s?+a.height:a.naturalHeight),i=0):null!==a&&!1!==this.Il&&(e=this.sourceRect.u()?this.sourceRect.height:s?+a.height:a.naturalHeight),isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(e=o.height),o=this.maxSize,r=this.minSize,n=Math.max(n,r.width),i=Math.max(i,r.height),t=Math.min(o.width,t),e=Math.min(o.height,e),t=Math.max(n,t),e=Math.max(i,e),null===a||a.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),Tt(this.qc,t,e),Ca(this,0,0,t,e)},Bp.Ih=function(t,e,n,i){Ea(this,t,e,n,i)},s.Object.defineProperties(vu.prototype,{element:{get:function(){return this.Yg},set:function(e){var n,t=this.Yg;t!==e&&(null===e||e instanceof HTMLImageElement||e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||O("Picture.element must be an instance of Image, Canvas, or Video, not: "+e),this.Su=e instanceof HTMLCanvasElement,null!==(this.Yg=e)&&(e instanceof HTMLCanvasElement||!0===e.complete?(e.ol instanceof Event&&null!==this.Cc&&this.Cc(this,e.ol),!0===e.ns&&null!==this.qf&&this.qf(this,e.ov),e.ns=!0,this.desiredSize.u()||(Xa(this,!1),this.o())):(n=this,e.vx||(e.addEventListener("load",function(t){bu(e,t),n.desiredSize.u()||(Xa(n,!1),n.o())}),e.addEventListener("error",function(t){Su(e,t)}),e.vx=!0))),this.g("element",t,e),this.M())}},source:{get:function(){return this.Yp},set:function(t){var e,n,i,o,r,a=this.Yp;a!==t&&(this.Yp=t,e=xu,n=this.diagram,Xr&&(i=null,void 0!==e[t]?i=e[t]:""!==t&&(30<Pu&&(wu(),e=xu),i=c("img"),o=this,i.addEventListener("load",function(t){bu(i,t),o.desiredSize.u()||(Xa(o,!1),o.o())}),i.addEventListener("error",function(t){Su(i,t)}),i.vx=!0,null!==(r=this.am)&&(i.crossOrigin=r(this)),e[i.src=t]=i,Pu++),null!==n&&Sr(n,this),this.element=i,null!==n&&null!==i&&br(n,this),null!==i&&void 0===i.__goCache&&(i.__goCache=new Lu),this.o(),this.M()),this.g("source",a,t))}},sourceCrossOrigin:{get:function(){return this.am},set:function(t){var e;this.am!==t&&(this.am=t,null!==this.element)&&(e=this.element.getAttribute("src"),null===t&&"string"==typeof e?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this)),this.element.src=e)}},sourceRect:{get:function(){return this.uh},set:function(t){var e=this.uh;e.w(t)||(this.uh=t=t.G(),this.M(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.sl},set:function(t){var e=this.sl;e!==t&&(this.sl=t,this.M(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.Ld},set:function(t){var e=this.Ld;e!==t&&(this.Ld=t,this.M(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.rl},set:function(t){var e=this.rl;e.w(t)||(this.rl=t=t.G(),this.o(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.Cc},set:function(t){var e=this.Cc;e!==t&&(this.Cc=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.qf},set:function(t){var e=this.qf;e!==t&&(this.qf=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.qc}}}),vu.prototype.redraw=vu.prototype.Je,vu.prototype.reloadSource=vu.prototype.MA;var xu=null,Pu=0,ku=4;function Lu(){this.cj=null}function Mu(t,e,n,i,o){null===t.cj&&(t.cj=[]);var r=new fs(null),a=r.context,s=1/e;r.width=n/e,r.height=i/e,0!==r.width&&0!==r.height&&(e=new _u(r.Ga,e),n=1,0<t.cj.length&&(o=(n=t.cj[t.cj.length-1]).source,n=n.ratio),a.setTransform(s*n,0,0,s*n,0,0),a.drawImage(o,0,0),t.cj.push(e))}function _u(t,e){this.source=t,this.ratio=e}function Nu(){this.Lt=new qe,this.hc=null}function Au(t,e,n,i,o){t.hc=new an,t.hc.startX=e,t.hc.startY=n,t.hc.isFilled=i,t.Lt.figures.add(t.hc),void 0!==o&&(t.hc.isShadowed=o)}function Tu(t,e,n,i,o,r,a){var s;void 0===s&&(s=!1);var h=new sn(cn);h.point1X=e,h.point1Y=n,h.point2X=i,h.point2Y=o,h.endX=r,h.endY=a,s&&h.close(),t.hc.segments.add(h)}function Cu(t,e,n,i,o){var r;void 0===r&&(r=!1);var a=new sn(gn);a.point1X=e,a.point1Y=n,a.endX=i,a.endY=o,r&&a.close(),t.hc.segments.add(a)}function Du(t){var e=Eu;return null!==e?(Eu=null,e.reset(t)):(e=new Nu).reset(t),e}vu.className="Picture",xu=new I,vu.clearCache=wu,Lu.className="PictureCacheArray",_u.className="PictureCacheInstance",(Bp=Nu.prototype).reset=function(t){null!==t?(t.ea(),(this.Lt=t).figures.clear()):this.Lt=new qe,this.hc=null},Bp.gr=function(t){this.hc.isShadowed=t},Bp.moveTo=function(t,e,n){void 0===n&&(n=!1);var i=new sn(ln);i.endX=t,i.endY=e,n&&i.close(),this.hc.segments.add(i)},Bp.lineTo=function(t,e,n){void 0===n&&(n=!1);var i=new sn(dn);i.endX=t,i.endY=e,n&&i.close(),this.hc.segments.add(i)},Bp.arcTo=function(t,e,n,i,o,r,a){void 0===r&&(r=0),void 0===a&&(a=!1);var s=new sn(fn);s.startAngle=t,s.sweepAngle=e,s.centerX=n,s.centerY=i,s.radiusX=o,s.radiusY=0!==r?r:o,a&&s.close(),this.hc.segments.add(s)};var Eu=null;function Fu(t,e){var n=t.toLowerCase(),i=Ue.Oe;i[t]=e,i[n]=t}function Ou(t){hh.call(this,t),this.D=2408959,this.hh=this.Mf="",this.Cp=this.yp=this.Np=this.Do=null,this.Pp="",this.Kf=this.po=this.Op=this.th=null,this.Ap="",this.zp=bt,this.Tb=this.Dp="",this.Ei=this.zn=this.mi=null,this.dg=new ee(NaN,NaN).freeze(),this.Ko="",this.bf=null,this.Lo=Yt,this.Ep=we,this.Uo=xt,this.Mo=Pt,this.Rn=null,this.Eo=127,this.Tp=kt,this.Sp="gray",this.jf=4,this.xx=-1,this.rq=NaN,this.bz=new ne,this.Uj=null,this.jh=NaN}function Bu(t){0!=(16384&t.D)!=!1&&(t.updateAdornments(),t.D&=-16385)}function Gu(t){var e;!1===Yu(t)&&(Ku(t,!0),t.zl(),null!==(e=t.diagram)&&(e.rd.add(t),e.Db()))}function ju(t){var e,n,i;t.D|=2097152,!1!==Yu(t)&&(e=t.position,(n=t.location).u()&&e.u()||Iu(t,e,n),n=t.xb,i=ne.alloc().assign(n),n.ea(),n.x=e.x,n.y=e.y,n.freeze(),t.cu(i,n),ne.free(i),Ku(t,!1))}function zu(t,e){var n=t.bz;isNaN(t.jh)&&(t.jh=function t(e){for(var n=(e=e.W.j).length,i=0,o=0;o<n;o++){var r=e[o];r instanceof hh?i=Math.max(i,t(r)):r instanceof Oh&&(i=Math.max(i,r.xh/2*r.dk*r.Af()))}return i}(t));var i=t.jh,o=2*i;if(!t.isShadowed)return n.h(e.x-1-i,e.y-1-i,e.width+2+o,e.height+2+o),n;i=e.x,o=e.y;var r=e.width;e=e.height;var a=t.shadowBlur;return r+=a,e+=a,i-=a/2,o-=a/2,0<(t=t.shadowOffset).x?r+=t.x:(i+=t.x,r-=t.x),0<t.y?e+=t.y:(o+=t.y,e-=t.y),n.h(i-1,o-1,r+2,e+2),n}function Ru(t,e,n,i){null===e||t instanceof tl||(e=e.animationManager).df&&Zi(e,t,i.copy(),n.copy())}function Iu(t,e,n){var i=ee.alloc(),o=t.locationSpot,r=t.locationObject;o.mc()&&O("determineOffset: Part's locationSpot must be real: "+o.toString());var a=r.naturalBounds,s=r instanceof Oh?r.strokeWidth:0;if(i.Lk(0,0,a.width+s,a.height+s,o),r!==t)for(i.offset(-s/2,-s/2),r.transform.sa(i),o=r.panel;null!==o&&o!==t;)o.transform.sa(i),o=o.panel;t.cg.sa(i),i.offset(-t.pc.x,-t.pc.y),o=t.diagram,r=n.u(),a=e.u(),r&&a?(0!=(2097152&t.D)?Vu:Uu)(t,e,n,o,i):r?Vu(t,e,n,o,i):a&&Uu(t,e,n,o,i),t.D|=2097152,ee.free(i),t.zl()}function Vu(t,e,n,i,o){var r=e.x,a=e.y;e.h(n.x-o.x,n.y-o.y),null!==i&&((i=(n=i.animationManager).isAnimating)||!n.df||t instanceof tl||Zi(n,t,new ee(r,a),e),i||e.x===r&&e.y===a||t.g("position",new ee(r,a),e.copy()))}function Uu(t,e,n,i,o){var r=n.copy();n.h(e.x+o.x,e.y+o.y),n.w(r)||null===i||t.g("location",r,n.copy())}function qu(t,e,n){Xu(t,!1),t instanceof el&&Cr(n,t),t.layer.isTemporary||e||n.Oa(),e=t.xb;var i=n.viewportBounds;i.u()?Wu(t)?(Bt(e,i)||t.Fd(!1),t.updateAdornments()):e.Lc(i)?(t.Fd(!0),t.updateAdornments()):t.Lb():n.wi=!0}function Hu(t,e,n,i){e.constructor===t.constructor||Qu||(Qu=!0,p('Should not change the class of the Part when changing category from "'+n+'" to "'+i+'"'),p("  Old class: "+P(t.constructor)+", new class: "+P(e.constructor)+", part: "+t.toString())),t.kk();var o=t.data;n=t.layerName;var r=t.isSelected,a=t.isHighlighted,s=!0,h=!0,u=!1;t instanceof el&&(s=t.isTreeLeaf,h=t.isTreeExpanded,u=t.wasTreeExpanded),e.yf(t),e.cloneProtected(t),t.Mf=i,t.o(),t.M(),i=!0,null!==(e=t.diagram)&&(i=e.skipsUndoManager,e.skipsUndoManager=!0),t.lb=o,t.D=r?4096|t.D:-4097&t.D,t.D=a?524288|t.D:-524289&t.D,t instanceof el&&(t.P=s?4|t.P:-5&t.P,t.P=h?1|t.P:-2&t.P,t.P=u?2|t.P:-3&t.P),null!==o&&t.Ca(),(o=t.layerName)!==n&&(t.hh=n,t.layerName=o),null!==e&&(e.skipsUndoManager=i),t.Wb()&&t.C(64)}function Yu(t){return 0!=(32768&t.D)}function Ku(t,e){t.D=e?32768|t.D:-32769&t.D}function Xu(t,e){t.D=e?65536|t.D:-65537&t.D}function Wu(t){return 0!=(131072&t.D)}function $u(t,e){t.D=e?1048576|t.D:-1048577&t.D}function Ju(t){return t.isVisible()&&(null===(t=t.layer)||!t.isTemporary)}function Zu(t,e,n,i,o,r){if(void 0===r&&(r=null),!(t.contains(e)||null!==r&&!r(e)||e instanceof tl))if(t.add(e),e instanceof el){if(n&&e instanceof pl)for(var a=e.memberParts;a.next();)Zu(t,a.value,n,i,o,r);if(!1!==o)for(a=e.linksConnected;a.next();){var s,h,u=a.value;t.contains(u)||(s=u.fromNode,h=u.toNode,s=null===s||t.contains(s),h=null===h||t.contains(h),(o?s&&h:s||h)&&Zu(t,u,n,i,o,r))}if(1<i)for(e=e.Vv();e.next();)Zu(t,e.value,n,i-1,o,r)}else if(e instanceof wl)for(e=e.labelNodes;e.next();)Zu(t,e.value,n,i,o,r)}Nu.className="StreamGeometryContext",Fu("Rectangle",function(t,e,n){t="r"+e+","+n;var i=Ue.Uh[t];return void 0!==i||((i=new qe(nn)).endX=e,i.endY=n,Ue.Vh<50&&(Ue.Uh[t]=i,Ue.Vh++)),i}),Fu("Square",function(t,e,n){t="s"+e+","+n;var i=Ue.Uh[t];return void 0!==i||((i=new qe(nn)).endX=e,i.endY=n,i.defaultStretch=Br,Ue.Vh<50&&(Ue.Uh[t]=i,Ue.Vh++)),i}),Fu("RoundedRectangle",function(t,e,n){var i=t?t.parameter1:NaN;return(isNaN(i)||i<0)&&(i=5),i=Math.min(i,e/3),t=(i=Math.min(i,n/3))*Ue.Kg,e=(new qe).add(new an(i,0,!0).add(new sn(dn,e-i,0)).add(new sn(cn,e,i,e-t,0,e,t)).add(new sn(dn,e,n-i)).add(new sn(cn,e-i,n,e,n-t,e-t,n)).add(new sn(dn,i,n)).add(new sn(cn,0,n-i,t,n,0,n-t)).add(new sn(dn,0,i)).add(new sn(cn,i,0,0,t,t,0).close())),1<t&&(e.spot1=new Be(0,0,t,t),e.spot2=new Be(1,1,-t,-t)),e}),Fu("Border","RoundedRectangle"),Fu("Ellipse",function(t,e,n){t="e"+e+","+n;var i=Ue.Uh[t];return void 0!==i||((i=new qe(on)).endX=e,i.endY=n,i.spot1=Ce,i.spot2=De,Ue.Vh<50&&(Ue.Uh[t]=i,Ue.Vh++)),i}),Fu("Circle",function(t,e,n){t="c"+e+","+n;var i=Ue.Uh[t];return void 0!==i||((i=new qe(on)).endX=e,i.endY=n,i.spot1=Ce,i.spot2=De,i.defaultStretch=Br,Ue.Vh<50&&(Ue.Uh[t]=i,Ue.Vh++)),i}),Fu("TriangleRight",function(t,e,n){return(new qe).add(new an(0,0).add(new sn(dn,e,.5*n)).add(new sn(dn,0,n).close())).Xm(0,.25,.5,.75)}),Fu("TriangleDown",function(t,e,n){return(new qe).add(new an(0,0).add(new sn(dn,e,0)).add(new sn(dn,.5*e,n).close())).Xm(.25,0,.75,.5)}),Fu("TriangleLeft",function(t,e,n){return(new qe).add(new an(e,n).add(new sn(dn,0,.5*n)).add(new sn(dn,e,0).close())).Xm(.5,.25,1,.75)}),Fu("TriangleUp",function(t,e,n){return(new qe).add(new an(e,n).add(new sn(dn,0,n)).add(new sn(dn,.5*e,0).close())).Xm(.25,.5,.75,1)}),Fu("Triangle","TriangleUp"),Fu("Diamond",function(t,e,n){return(new qe).add(new an(.5*e,0).add(new sn(dn,0,.5*n)).add(new sn(dn,.5*e,n)).add(new sn(dn,e,.5*n).close())).Xm(.25,.25,.75,.75)}),Fu("LineH",function(t,e,n){return(t=new qe(en)).startX=0,t.startY=n/2,t.endX=e,t.endY=n/2,t}),Fu("LineV",function(t,e,n){return(t=new qe(en)).startX=e/2,t.startY=0,t.endX=e/2,t.endY=n,t}),Fu("None","Rectangle"),Fu("BarH","Rectangle"),Fu("BarV","Rectangle"),Fu("MinusLine","LineH"),Fu("PlusLine",function(t,e,n){return(new qe).add(new an(0,n/2,!1).add(new sn(dn,e,n/2)).add(new sn(ln,e/2,0)).add(new sn(dn,e/2,n)))}),Fu("XLine",function(t,e,n){return(new qe).add(new an(0,n,!1).add(new sn(dn,e,0)).add(new sn(ln,0,0)).add(new sn(dn,e,n)))}),Ue.bn={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"},n(Ou,hh),Ou.prototype.cloneProtected=function(t){hh.prototype.cloneProtected.call(this,t),t.D=-4097&this.D|49152,t.Mf=this.Mf,t.hh=this.hh,t.Do=this.Do,t.Np=this.Np,t.yp=this.yp,t.Cp=this.Cp,t.Pp=this.Pp,t.Op=this.Op,t.po=this.po,t.Kf=null,t.Ap=this.Ap,t.zp=this.zp.G(),t.Dp=this.Dp,t.Ep=this.Ep.G(),t.Tb=this.Tb,t.zn=this.zn,t.dg.assign(this.dg),t.Ko=this.Ko,t.Lo=this.Lo.G(),t.Uo=this.Uo.G(),t.Mo=this.Mo.G(),t.Rn=this.Rn,t.Eo=this.Eo,t.Tp=this.Tp.G(),t.Sp=this.Sp,t.jf=this.jf,t.rq=this.rq},Ou.prototype.yf=function(t){hh.prototype.yf.call(this,t),t.Oh(),t.th=null,t.bf=null,t.Uj=null},Ou.prototype.toString=function(){var t=P(this.constructor)+"#"+Q(this);return null!==this.data&&(t+="("+k(this.data)+")"),t},Ou.prototype.Jk=function(t,e,n,i,o,r,a){var s=this.diagram;null!==s&&(t===Sn&&"elements"===e?o instanceof hh?fh(o,function(t){ic(s.partManager,t),wr(s,t)}):br(s,o):t===xn&&"elements"===e&&(o instanceof hh?fh(o,function(t){oc(s.partManager,t,s)}):Sr(s,o)),s.ab(t,e,n,i,o,r,a))},Ou.prototype.Ca=function(t){if(hh.prototype.Ca.call(this,t),null!==this.data){for(var e=this.W.j,n=e.length,i=0;i<n;i++){var o=e[i];o instanceof hh&&fh(o,function(t){null!==t.data&&t.Ca()})}for(e=this.adornments;e.next();)e.value.Ca(t)}},Ou.prototype.updateRelationshipsFromData=function(){null!==this.data&&this.diagram.partManager.updateRelationshipsFromData(this)},Ou.prototype.tk=function(t){var e=this.Kf;return null===e?null:e.H(t)},Ou.prototype.Gh=function(t,e){var n,i,o;null!==e&&((n=null)!==(i=this.Kf)&&(n=i.H(t)),n!==e&&(null===n||null!==(o=n.diagram)&&o.remove(n),null===i&&(this.Kf=i=new at),e.Mf!==t&&(e.category=t),i.add(t,e),null!==(t=this.diagram)&&(t.add(e),null===(t=e.adornedObject)||null!==(t=t.ij())&&(e.data=t.data))))},Ou.prototype.Gf=function(t){var e,n,i=this.Kf;null!==i&&(null===(e=i.H(t))||null!==(n=e.diagram)&&n.remove(e),i.remove(t),0===i.count&&(this.Kf=null))},Ou.prototype.kk=function(){if(null!==(e=this.Kf)){for(var t=be(),e=e.iterator;e.next();)t.push(e.key);e=t.length;for(var n=0;n<e;n++)this.Gf(t[n]);Se(t)}},Ou.prototype.updateAdornments=function(){var e,t,n=this.diagram;if(null!==n){for(var i=this.adornments;i.next();){var o=i.value;o.o(),o.placeholder&&o.placeholder.o()}t:{if(this.isSelected&&this.selectionAdorned&&(null!==(i=this.selectionObject)&&this.actualBounds.u()&&this.isVisible()&&i.Ff()&&i.actualBounds.u())){if(null===(o=this.tk("Selection"))){if(null===(o=this.selectionAdornmentTemplate)&&(o=this.Ph()?n.linkSelectionAdornmentTemplate:this instanceof pl?n.groupSelectionAdornmentTemplate:n.nodeSelectionAdornmentTemplate),!(o instanceof tl))break t;Sh(o),null!==(o=o.copy())&&(this.Ph()&&this.selectionObject===this.path&&(o.type=hh.Link),o.adornedObject=i)}if(null!==o){o.type===hh.Link&&o.o(),this.Gh("Selection",o);break t}}this.Gf("Selection")}for(e=this,(t=n).toolManager.mouseDownTools.each(function(t){t.isEnabled&&t.updateAdornments(e)}),t.toolManager.updateAdornments(e),i=this.adornments;i.next();)i.value.Ca()}},Ou.prototype.Lb=function(){var t=this.diagram;null!==t&&(or(t),0!=(16384&this.D)!=!0&&(this.D|=16384,t.Db()))},Ou.prototype.move=function(t,e){!0===e?this.location=t:this.position=t},Ou.prototype.moveTo=function(t,e,n){t=ee.allocAt(t,e),this.move(t,n),ee.free(t)},Ou.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(null!==t){if(!t.visible)return!1;if(null!==(t=t.diagram)&&t.animationManager.bu(this))return!0}return!!(null===(t=this.containingGroup)||t.isSubGraphExpanded&&t.isVisible())},(Bp=Ou.prototype).Ob=function(t){var e=this.diagram;t?(this.C(4),this.Lb(),null!==e&&e.rd.add(this)):(this.C(8),this.kk()),this.Oh(),null!==e&&(e.Oa(),e.M())},Bp.$a=function(t){if(this.name===t)return this;var e=this.Uj;if(null===e&&(this.Uj=e=new at),null!==e.H(t))return e.H(t);var n=hh.prototype.$a.call(this,t);return null!==n?(e.set(t,n),n):(e.set(t,null),null)},Bp.Cf=function(t,e,n){void 0===n&&(n=new ee),e=e.mc()?Wt:e;var i=t.naturalBounds;if(n.h(i.width*e.x+e.offsetX,i.height*e.y+e.offsetY),null===t||t===this)return n;for(t.transform.sa(n),t=t.panel;null!==t&&t!==this;)t.transform.sa(n),t=t.panel;return this.cg.sa(n),n.offset(-this.pc.x,-this.pc.y),n},Bp.wm=function(t){return void 0===t&&(t=new ne),t.assign(this.actualBounds)},Bp.Ta=function(){!0===Ka(this)&&this.measure(1/0,1/0),this.arrange()},Ou.prototype.arrange=function(){var t,e,n,i;!1===Wa(this)?ju(this):($a(this,!1),t=this.xb,(e=ne.alloc()).assign(t),t.ea(),n=Wu(this),this.Ih(0,0,this.pc.width,this.pc.height),Iu(this,i=this.position,this.location),t.x=i.x,t.y=i.y,t.freeze(),this.cu(e,t),e.w(t)?this.Fd(n):!this.Wb()||Ue.A(e.width,t.width)&&Ue.A(e.height,t.height)||0<=this.xx&&this.C(16),ne.free(e),Ku(this,!1))},(Bp=Ou.prototype).cu=function(t,e){var n,i,o=this.diagram;null!==o&&((n=!1)===o.ui&&t.u()&&((i=ne.alloc()).assign(o.documentBounds),i.Iw(o.padding),t.x>i.x&&t.y>i.y&&t.right<i.right&&t.bottom<i.bottom&&e.x>i.x&&e.y>i.y&&e.right<i.right&&e.bottom<i.bottom&&(n=!0),ne.free(i)),0!=(65536&this.D)!=!0&&t.w(e)||qu(this,n,o),o.M(),Et(t,e)||(this instanceof el&&!o.undoManager.isUndoingRedoing&&this.md(),this.Oh()))},Bp.Dw=function(t,e){if(this.Ph()||!t.u())return!1;var n=this.diagram;null!==n&&Ru(this,n,t,e),this.la=t,this.D&=-2097153;var i=this.dg;return!i.u()||null!==n&&!n.animationManager.isTicking&&n.undoManager.isUndoingRedoing||(n=i.copy(),i.h(i.x+(t.x-e.x),i.y+(t.y-e.y)),this.g("location",n,i.copy())),!1===Yu(this)&&!1===Wa(this)&&(Gu(this),ju(this)),!0},Bp.fr=function(t,e,n){var i=this.dg,o=this.la;if(n){if(i.x===t&&i.y===e)return;Yu(this)||Wa(this)?o.h(NaN,NaN):o.h(o.x+t-i.x,o.y+e-i.y),i.h(t,e)}else{if(o.x===t&&o.y===e)return;Yu(this)||Wa(this)?this.lu():i.h(i.x+t-o.x,i.y+e-o.y),o.h(t,e)}Gu(this)},Bp.lu=function(){this.D&=-2097153,Gu(this)},Bp.qj=function(){return!0},Bp.Wb=function(){return!0},Bp.Ph=function(){return!1},Bp.Ef=function(){return!0},Ou.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return null===t||!!t.allowCopy&&(null===(t=t.diagram)||!!t.allowCopy)},Ou.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return null===t||!!t.allowDelete&&(null===(t=t.diagram)||!!t.allowDelete)},Ou.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return null===t||!!t.allowTextEdit&&(null===(t=t.diagram)||!!t.allowTextEdit)},Ou.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return null===t||!!t.allowGroup&&(null===(t=t.diagram)||!!t.allowGroup)},Ou.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return null===t||!!t.allowMove&&(null===(t=t.diagram)||!!t.allowMove)},Ou.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return null===t||!!t.allowReshape&&(null===(t=t.diagram)||!!t.allowReshape)},Ou.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return null===t||!!t.allowResize&&(null===(t=t.diagram)||!!t.allowResize)},Ou.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return null===t||!!t.allowRotate&&(null===(t=t.diagram)||!!t.allowRotate)},Ou.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return null===t||!!t.allowSelect&&(null===(t=t.diagram)||!!t.allowSelect)},(Bp=Ou.prototype).Fd=function(t){this.D=t?131072|this.D:-131073&this.D},Bp.Oh=function(){var t=this.containingGroup;null!==t&&(t.o(),null!==t.placeholder&&t.placeholder.o(),t.md())},Bp.M=function(){var t=this.diagram;null!==t&&!Wa(this)&&!Yu(this)&&this.isVisible()&&this.xb.u()&&t.M(zu(this,this.xb))},Bp.o=function(){hh.prototype.o.call(this);var t=this.diagram;null!==t&&(t.rd.add(this),this instanceof el&&null!==this.labeledLink&&ja(this.labeledLink),t.Db(!0))},Bp.Kq=function(t){t||null!==(t=this.mi)&&ml(t,this)},Bp.Lq=function(t){t||null!==(t=this.mi)&&yl(t,this)},Bp.rk=function(){var t,e=this.data;null!==e&&(null===(t=this.diagram)||null!==(t=t.model)&&t.Mm(e))},Bp.Xz=function(){return function t(e,n){var i=n.containingGroup;return null!==i?1+t(e,i):n instanceof el&&(n=n.labeledLink,null!==n)?t(e,n):0}(this,this)},Bp.$z=function(){return function t(e,n){var i=n.containingGroup;return null!==i||n instanceof el&&(i=n.labeledLink,null!==i)?t(e,i):n}(this,this)},Bp.Cd=function(t){return t instanceof pl&&function t(e,n,i){if(n===i||null===i)return!1;var o=n.containingGroup;return!(null===o||o!==i&&!t(e,o,i))||n instanceof el&&(n=n.labeledLink,null!==n)&&t(e,n,i)}(this,this,t)},Bp.ly=function(t){if(null===t)return null;if(this===t)return this.containingGroup;for(var e,n=this;null!==n;)n instanceof pl&&$u(n,!0),n instanceof el&&(null!==(e=n.labeledLink)&&(n=e)),n=n.containingGroup;for(e=null,n=t;null!==n;){if(0!=(1048576&n.D)){e=n;break}n instanceof el&&(null!==(t=n.labeledLink)&&(n=t)),n=n.containingGroup}for(n=this;null!==n;)n instanceof pl&&$u(n,!1),n instanceof el&&(null!==(t=n.labeledLink)&&(n=t)),n=n.containingGroup;return e},Ou.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(null!==t&&t.isTemporary||this instanceof el&&this.isLinkLabel)},Ou.prototype.C=function(t){var e,n;void 0===t&&(t=16777215),(e=!(!this.isLayoutPositioned||0==(t&this.layoutConditions))&&(!(null!==(e=this.layer)&&e.isTemporary||this instanceof el&&this.isLinkLabel)&&(null===(e=this.diagram)||!e.undoManager.isUndoingRedoing)))&&(null!==(e=this.mi)?null!==(n=e.layout)?n.C():e.C(t):null===(t=this.diagram)||null!==(t=t.layout)&&t.C())},s.Object.defineProperties(Ou.prototype,{key:{get:function(){var t=this.diagram;if(null!==t)return t.model.ja(this.data)}},adornments:{get:function(){return null===this.Kf?V:this.Kf.iteratorValues}},layer:{get:function(){return this.Ei}},diagram:{get:function(){var t=this.Ei;return null!==t?t.diagram:null}},layerName:{get:function(){return this.hh},set:function(t){var e,n,i,o=this.hh;o!==t&&(null!==(e=this.diagram)&&(null===e.tm(t)||e.partManager.addsToTemporaryLayer)||(this.hh=t,null!==e&&e.Oa(),this.g("layerName",o,t),null!==(o=this.layer)&&o.name!==t&&(null!==(e=o.diagram)&&(null!==(t=e.tm(t))&&t!==o))&&(0<=(n=o.Kc(-1,this,!0))&&e.ab(xn,"parts",o,this,null,n,!0),n=t.nj(99999999,this,!0),o.visible!==t.visible&&this.Ob(t.visible),0<=n&&e.ab(Sn,"parts",t,null,this,!0,n),null!==(n=this.layerChanged)&&(i=e.Z,e.Z=!0,n(this,o,t),e.Z=i))))}},layerChanged:{get:function(){return this.Do},set:function(t){var e=this.Do;e!==t&&(this.Do=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.rq},set:function(t){var e,n=this.rq;n!==t&&(this.rq=t,null!==(e=this.layer)&&Lo(e,-1,this),this.g("zOrder",n,t),null!==(t=this.diagram)&&t.M())}},locationObject:{get:function(){var t;return null===this.bf&&(""!==(t=this.locationObjectName)?(t=this.$a(t),this.bf=null!==t?t:this):this instanceof tl&&this.type!==hh.Link&&null!==this.placeholder?this.bf=this.placeholder:this.bf=this),this.bf.visible?this.bf:this}},minLocation:{get:function(){return this.Uo},set:function(t){var e=this.Uo;e.w(t)||(this.Uo=t=t.G(),this.g("minLocation",e,t))}},maxLocation:{get:function(){return this.Mo},set:function(t){var e=this.Mo;e.w(t)||(this.Mo=t=t.G(),this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return this.Ko},set:function(t){var e=this.Ko;e!==t&&(this.Ko=t,this.bf=null,this.o(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return this.Lo},set:function(t){var e=this.Lo;e.w(t)||(this.Lo=t=t.G(),this.o(),this.g("locationSpot",e,t))}},location:{get:function(){return this.dg},set:function(t){var e=t.x,n=t.y,i=this.dg,o=i.x,r=i.y;(o===e||isNaN(o)&&isNaN(e))&&(r===n||isNaN(r)&&isNaN(n))||(e=t=t.copy(),(e=!this.Ph()&&(this.dg=e,this.D|=2097152,!1===Wa(this)&&(Gu(this),(n=this.la).u()&&(null===(o=this.diagram)||o.animationManager.isTicking||!o.undoManager.isUndoingRedoing))&&(r=n.copy(),n.h(n.x+(e.x-i.x),n.y+(e.y-i.y)),Ru(this,o,n,r),this.g("position",r,n.copy())),!0))&&this.g("location",i.copy(),t.copy()))}},category:{get:function(){return this.Mf},set:function(t){var e,n,i,o,r=this.Mf;r!==t&&(e=this.diagram,n=this.data,(i=null)===e||null===n||this instanceof tl||(o=e.model.undoManager).isEnabled&&!o.isUndoingRedoing&&(i=this.clone()).W.addAll(this.W),this.Mf=t,this.g("category",r,t),null===e||null===n||this instanceof tl?this instanceof tl&&(null!==(i=this.adornedPart)&&(null!==(t=i.Kf)&&t.remove(r),i.Gh(this.category,this))):(o=e.model).undoManager.isUndoingRedoing||(this.Ph()?(e.partManager.setLinkCategoryForData(n,t),null!==(e=e.partManager.findLinkTemplateForCategory(t))&&(Sh(e),null!==(e=e.copy())&&Hu(this,e,r,t))):(null!==o&&o.Tm(n,t),null!==(e=tc(e.partManager,n,t))&&(Sh(e),null===(e=e.copy())||e instanceof wl||(n=this.location.copy(),Hu(this,e,r,t),this.location.u()||(this.location=n)))),null!==i&&((r=this.clone()).W.addAll(this.W),this.g("self",i,r))))}},self:{get:function(){return this},set:function(t){Hu(this,t,this.category,t.category)}},copyable:{get:function(){return 0!=(1&this.D)},set:function(t){var e=0!=(1&this.D);e!==t&&(this.D^=1,this.g("copyable",e,t))}},deletable:{get:function(){return 0!=(2&this.D)},set:function(t){var e=0!=(2&this.D);e!==t&&(this.D^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return 0!=(4&this.D)},set:function(t){var e=0!=(4&this.D);e!==t&&(this.D^=4,this.g("textEditable",e,t),this.Lb())}},groupable:{get:function(){return 0!=(8&this.D)},set:function(t){var e=0!=(8&this.D);e!==t&&(this.D^=8,this.g("groupable",e,t))}},movable:{get:function(){return 0!=(16&this.D)},set:function(t){var e=0!=(16&this.D);e!==t&&(this.D^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return 0!=(32&this.D)},set:function(t){var e=0!=(32&this.D);e!==t&&(this.D^=32,this.g("selectionAdorned",e,t),this.Lb())}},isInDocumentBounds:{get:function(){return 0!=(64&this.D)},set:function(t){var e,n=0!=(64&this.D);n!==t&&(this.D^=64,null!==(e=this.diagram)&&e.Oa(),this.g("isInDocumentBounds",n,t))}},isLayoutPositioned:{get:function(){return 0!=(128&this.D)},set:function(t){var e=0!=(128&this.D);e!==t&&(this.D^=128,this.g("isLayoutPositioned",e,t),this.C(t?4:8))}},selectable:{get:function(){return 0!=(256&this.D)},set:function(t){var e=0!=(256&this.D);e!==t&&(this.D^=256,this.g("selectable",e,t),this.Lb())}},reshapable:{get:function(){return 0!=(512&this.D)},set:function(t){var e=0!=(512&this.D);e!==t&&(this.D^=512,this.g("reshapable",e,t),this.Lb())}},resizable:{get:function(){return 0!=(1024&this.D)},set:function(t){var e=0!=(1024&this.D);e!==t&&(this.D^=1024,this.g("resizable",e,t),this.Lb())}},rotatable:{get:function(){return 0!=(2048&this.D)},set:function(t){var e=0!=(2048&this.D);e!==t&&(this.D^=2048,this.g("rotatable",e,t),this.Lb())}},isSelected:{get:function(){return 0!=(4096&this.D)},set:function(t){var e,n,i,o=0!=(4096&this.D);o!==t&&(e=this.diagram,t&&(!this.canSelect()||null!==e&&e.selection.count>=e.maxSelectionCount)||(this.D^=4096,n=!1,null!==e&&(n=e.skipsUndoManager,e.skipsUndoManager=!0,(i=e.selection).ea(),t?i.add(this):i.remove(this),i.freeze()),this.g("isSelected",o,t),this.Lb(),null!==(t=this.selectionChanged)&&t(this),null!==e&&(e.Db(),e.skipsUndoManager=n)))}},isHighlighted:{get:function(){return 0!=(524288&this.D)},set:function(t){var e,n=0!=(524288&this.D);n!==t&&(this.D^=524288,null!==(e=this.diagram)&&((e=e.highlighteds).ea(),t?e.add(this):e.remove(this),e.freeze()),this.g("isHighlighted",n,t),this.M(),null!==(t=this.highlightedChanged)&&t(this))}},isShadowed:{get:function(){return 0!=(8192&this.D)},set:function(t){var e=0!=(8192&this.D);e!==t&&(this.D^=8192,this.g("isShadowed",e,t),this.M())}},isAnimated:{get:function(){return 0!=(262144&this.D)},set:function(t){var e=0!=(262144&this.D);e!==t&&(this.D^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return this.po},set:function(t){var e=this.po;e!==t&&(this.po=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return this.Pp},set:function(t){var e=this.Pp;e!==t&&(this.Pp=t,this.th=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return this.Np},set:function(t){var e=this.Np;e!==t&&(this.Np=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){var t;return null===this.th&&(null!==(t=this.selectionObjectName)&&""!==t?(t=this.$a(t),this.th=null!==t?t:this):this instanceof wl?(t=this.path,this.th=null!==t?t:this):this.th=this),this.th}},selectionChanged:{get:function(){return this.Op},set:function(t){var e=this.Op;e!==t&&(this.Op=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return this.yp},set:function(t){var e=this.yp;e!==t&&(this.yp=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return this.Ap},set:function(t){var e=this.Ap;e!==t&&(this.Ap=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return""!==t&&null!==(t=this.$a(t))?t:this}},resizeCellSize:{get:function(){return this.zp},set:function(t){var e=this.zp;e.w(t)||(this.zp=t=t.G(),this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return this.Cp},set:function(t){var e=this.Cp;e!==t&&(this.Cp=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return this.Dp},set:function(t){var e=this.Dp;e!==t&&(this.Dp=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return""!==t&&null!==(t=this.$a(t))?t:this}},rotationSpot:{get:function(){return this.Ep},set:function(t){var e=this.Ep;e.w(t)||(this.Ep=t=t.G(),this.g("rotationSpot",e,t))}},text:{get:function(){return this.Tb},set:function(t){var e=this.Tb;e!==t&&(this.Tb=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.mi},set:function(t){if(this.Wb()){var e=this.mi;if(e!==t){null===t||this!==t&&!t.Cd(this)||(this===t&&O("Cannot make a Group a member of itself: "+this.toString()),O("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.C(2);var n,i,o,r=this.diagram;if(null!==e?yl(e,this):this instanceof pl&&null!==r&&r.Dh.remove(this),null!==(this.mi=t)?ml(t,this):this instanceof pl&&null!==r&&r.Dh.add(this),this.C(1),null!==r&&r.Z&&(n=this.data,i=r.model,null!==n&&i.yk()&&(o=i.ja(null!==t?t.data:null),i.er(n,o))),null!==(n=this.containingGroupChanged)&&(i=!0,null!==r&&(i=r.Z,r.Z=!0),n(this,e,t),null!==r&&(r.Z=i)),this instanceof pl)for(Zu(r=new $,this,!0,0,!0),r=r.iterator;r.next();)if((n=r.value)instanceof el)for(n=n.linksConnected;n.next();)bl(n.value);if(this instanceof el){for(r=this.linksConnected;r.next();)bl(r.value);null!==(r=this.labeledLink)&&bl(r)}this.g("containingGroup",e,t),null!==t&&(null!==(e=t.layer)&&Lo(e,-1,t))}}else O("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return this.zn},set:function(t){var e=this.zn;e!==t&&(this.zn=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(null!==this.containingGroup||this instanceof el&&null!==this.labeledLink)}},layoutConditions:{get:function(){return this.Eo},set:function(t){var e=this.Eo;e!==t&&(this.Eo=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return this.Rn},set:function(t){var e=this.Rn;e!==t&&(this.Rn=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return this.Tp},set:function(t){var e=this.Tp;e.w(t)||(this.Tp=t=t.G(),this.M(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return this.Sp},set:function(t){var e=this.Sp;e!==t&&(this.Sp=t,this.M(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return this.jf},set:function(t){var e=this.jf;e!==t&&(this.jf=t,this.M(),this.g("shadowBlur",e,t))}}}),Ou.prototype.invalidateLayout=Ou.prototype.C,Ou.prototype.findCommonContainingGroup=Ou.prototype.ly,Ou.prototype.isMemberOf=Ou.prototype.Cd,Ou.prototype.findTopLevelPart=Ou.prototype.$z,Ou.prototype.findSubGraphLevel=Ou.prototype.Xz,Ou.prototype.ensureBounds=Ou.prototype.Ta,Ou.prototype.getDocumentBounds=Ou.prototype.wm,Ou.prototype.getRelativePoint=Ou.prototype.Cf,Ou.prototype.findObject=Ou.prototype.$a,Ou.prototype.invalidateAdornments=Ou.prototype.Lb,Ou.prototype.clearAdornments=Ou.prototype.kk,Ou.prototype.removeAdornment=Ou.prototype.Gf,Ou.prototype.addAdornment=Ou.prototype.Gh,Ou.prototype.findAdornment=Ou.prototype.tk,Ou.prototype.updateTargetBindings=Ou.prototype.Ca;var Qu=!1;function tl(t){Ou.call(this,t),this.D&=-257,this.hh="Adornment",this.ee=null,this.Bx=0,this.Qx=!1,this.l=[],this.Ra=null}function el(t){Ou.call(this,t),this.P=13,this.Ya=new X,this.lq=this.El=this.Hi=this.Go=this.Fo=null,this.Wk=Fe,this.sc=this.Re=null,this.vp=gl,this.Eh=!1}function nl(t,e){null!==e&&(null===t.Re&&(t.Re=new $),t.Re.add(e))}function il(t,e,n,i){if(null===e||null===t.Re)return null;for(var o=t.Re.iterator;o.next();){var r=o.value;if(r.$t===t&&r.jw===e&&r.Jy===n&&r.Ky===i||r.$t===e&&r.jw===t&&r.Jy===i&&r.Ky===n)return r}return null}function ol(t,e){for(var n=t.linksConnected;n.next();){var i=n.value;i.fromPort!==e&&i.toPort!==e||(rl(t,i.fromPort),rl(t,i.toPort),i.Ua())}}function rl(t,e){null!==e&&(null!==(e=e.tp)&&e.ym(),null===(e=t.containingGroup)||t.isVisible()||rl(e,e.port))}function al(t,e,n){rl(t,n);var i,o,r,a=t.Ya.contains(e);a||t.Ya.add(e),a&&e.fromNode!==e.toNode||null!==(i=t.linkConnected)&&(o=!0,null!==(r=t.diagram)&&(o=r.Z,r.Z=!0),i(t,e,n),null!==r&&(r.Z=o)),!a&&e.isTreeLink&&(n=e.fromNode,e=e.toNode,null!==n&&null!==e&&n!==e&&(a=!0,null!==(t=t.diagram)&&(a=t.isTreePathToChildren),o=a?n:e,(i=a?e:n).Eh||(i.Eh=o),!o.isTreeLeaf||null!==t&&t.undoManager.isUndoingRedoing||(a?n===o&&(o.isTreeLeaf=!1):e===o&&(o.isTreeLeaf=!1))))}function sl(t,e,n){rl(t,n);var i,o,r=t.Ya.remove(e),a=null;!r&&e.toNode!==e.fromNode||(i=t.linkDisconnected,a=t.diagram,null!==i&&(o=!0,null!==a&&(o=a.Z,a.Z=!0),i(t,e,n),null!==a&&(a.Z=o))),r&&e.isTreeLink&&(n=!0,null!==a&&(n=a.isTreePathToChildren),t=n?e.toNode:e.fromNode,e=n?e.fromNode:e.toNode,null!==t&&(t.Eh=!1),null===e||e.isTreeLeaf||(0===e.Ya.count?(e.Eh=null)!==a&&a.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0):hl(e)))}function hl(t){if(t.Eh=!1,0!==t.Ya.count){var e=!0,n=t.diagram;if(null===n||!n.undoManager.isUndoingRedoing){for(null!==n&&(e=n.isTreePathToChildren),n=t.Ya.iterator;n.next();){var i=n.value;if(i.isTreeLink)if(e){if(i.fromNode===t)return void(t.isTreeLeaf=!1)}else if(i.toNode===t)return void(t.isTreeLeaf=!1)}t.isTreeLeaf=!0}}}function ul(t){null===t.sc?t.sc=new at:t.sc.clear(),t.Zm(t,function(t,e){ll(t,e)}),0===t.sc.count&&t.sc.add("",t)}function ll(t,e){var n=e.portId;null!==n&&null!==t.sc&&t.sc.add(n,e)}function dl(t,e,n){var i=e.portId;if(null!==i&&(null!==t.sc&&t.sc.remove(i),null!==(e=t.diagram)&&n)){for(n=null,t=t.findLinksConnected(i);t.next();)i=t.value,null===n&&(n=be()),n.push(i);if(null!==n){for(t=0;t<n.length;t++)e.remove(n[t]);Se(n)}}}function cl(t,e,n,i,o,r){for(var a=o===t||t.isTreeExpanded,s=n?t.Dq():t.Bd();s.next();){var h,u=s.value;u.isTreeLink&&(null!==(u=u.Iq(t))&&u!==t)&&((h=e.contains(u))||e.add(u),a&&(r&&i.gk(u,o),u.Oh(),u.Ob(!1)),u.isTreeExpanded&&(u.wasTreeExpanded=u.isTreeExpanded,h||cl(u,e,n,i,o,r)))}t.isTreeExpanded=!1}Ou.className="Part",Ou.LayoutNone=0,Ou.LayoutAdded=1,Ou.LayoutRemoved=2,Ou.LayoutShown=4,Ou.LayoutHidden=8,Ou.LayoutNodeSized=16,Ou.LayoutGroupLayout=32,Ou.LayoutNodeReplaced=64,Ou.LayoutStandard=127,Ou.LayoutAll=16777215,n(tl,Ou),tl.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(null!==t?t.toString():"")},tl.prototype.updateRelationshipsFromData=function(){},tl.prototype.Bk=function(t){var e=this.adornedObject.part;if(e instanceof wl&&this.adornedObject instanceof Oh){var n=e.path;e.Bk(t),t=n.geometry,n=(e=this.W.j).length;for(var i=0;i<n;i++){var o=e[i];o.isPanelMain&&o instanceof Oh&&(o.na=t)}}},tl.prototype.qj=function(){var t=this.ee;return null===t||(null===(t=t.part)||!Wa(t))},tl.prototype.Wb=function(){return!1},tl.prototype.Jk=function(t,e,n,i,o,r,a){var s;t===Sn&&"elements"===e?o instanceof vl?null===this.Ra&&(this.Ra=o):o instanceof hh&&((s=o.sm(function(t){return t instanceof vl}))instanceof vl&&null===this.Ra&&(this.Ra=s)):t===xn&&"elements"===e&&null!==this.Ra&&(i===this.Ra||i instanceof hh&&this.Ra.Gg(i))&&(this.Ra=null),Ou.prototype.Jk.call(this,t,e,n,i,o,r,a)},tl.prototype.updateAdornments=function(){},tl.prototype.rk=function(){},s.Object.defineProperties(tl.prototype,{placeholder:{get:function(){return this.Ra}},adornedObject:{get:function(){return this.ee},set:function(t){var e=this.adornedPart,n=null;null!==t&&(n=t.part),null===e||null!==t&&e===n||e.Gf(this.category),this.ee=t,null!==n&&n.Gh(this.category,this)}},adornedPart:{get:function(){var t=this.ee;return null!==t?t.part:null}},containingGroup:{get:function(){return null}}}),tl.className="Adornment",n(el,Ou),el.prototype.cloneProtected=function(t){Ou.prototype.cloneProtected.call(this,t),t.P=this.P,t.P=-17&this.P,t.Fo=this.Fo,t.Go=this.Go,t.Hi=this.Hi,t.lq=this.lq,t.Wk=this.Wk.G(),t.vp=this.vp},(Bp=el.prototype).yf=function(t){Ou.prototype.yf.call(this,t),t.md(),t.Re=this.Re,t.sc=null},Bp.tA=function(t,e,n){null==e&&(e=""),null==n&&(n=""),null!==(t=il(this,t,e,n))&&t.ym()},Bp.Jk=function(t,e,n,i,o,r,a){(t===Sn&&"elements"===e||t===xn&&"elements"===e)&&(this.sc=null),Ou.prototype.Jk.call(this,t,e,n,i,o,r,a)},Bp.md=function(t){void 0===t&&(t=null);for(var e=this.linksConnected;e.next();){var n=e.value;null!==t&&t.contains(n)||(rl(this,n.fromPort),rl(this,n.toPort),n.Ua())}},Bp.qj=function(){return!0},el.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.sq(this.Wk),t},el.prototype.findVisibleNode=function(){for(var t=this;null!==t&&!t.isVisible();)t=t.containingGroup;return t},el.prototype.isVisible=function(){if(!Ou.prototype.isVisible.call(this))return!1;var t=!0,e=ha,n=this.diagram;if(null!==n){if(n.animationManager.bu(this))return!0;t=n.isTreePathToChildren,e=n.treeCollapsePolicy}if(e===ha){if(null!==(t=this.Fg())&&!t.isTreeExpanded)return!1}else if(e===ua){if(0<(t=t?this.Sv():this.Tv()).count&&t.all(function(t){return!t.isTreeExpanded}))return!1}else if(e===la&&(0<(t=t?this.Sv():this.Tv()).count&&t.any(function(t){return!t.isTreeExpanded})))return!1;return null===(t=this.labeledLink)||t.isVisible()},el.prototype.Ob=function(t){Ou.prototype.Ob.call(this,t);for(var e=this.linksConnected;e.next();){var n,i=e.value;t&&null!==this.containingGroup&&(null===(n=i.Iq(this))||n.Cd(this.containingGroup)||i.Ua()),i.Ob(t)}},el.prototype.my=function(){var t=new $,e=new $;return function e(n,i,o,r){{var a,t;null===i||o.has(i)||(o.add(i),a=!0,null!==(t=n.diagram)&&(a=t.isTreePathToChildren),i.linksConnected.each(function(t){t.isTreeLink?(a?t.fromNode===i:t.toNode===i)&&e(n,a?t.toNode:t.fromNode,o,r):r.add(t)}))}}(this,this,t,e),e.iterator},el.prototype.findLinksConnected=function(e){if(void 0===e&&(e=null),null===e)return this.Ya.iterator;var t=new Y(this.Ya),n=this;return t.predicate=function(t){return t.fromNode===n&&t.fromPortId===e||t.toNode===n&&t.toPortId===e},t},(Bp=el.prototype).Dq=function(e){void 0===e&&(e=null);var t=new Y(this.Ya),n=this;return t.predicate=function(t){return t.fromNode===n&&(null===e||t.fromPortId===e)},t},Bp.Bd=function(e){void 0===e&&(e=null);var t=new Y(this.Ya),n=this;return t.predicate=function(t){return t.toNode===n&&(null===e||t.toPortId===e)},t},Bp.Rv=function(t){void 0===t&&(t=null);for(var e=null,n=null,i=this.Ya.iterator;i.next();){var o=i.value;o.fromNode===this?null!==t&&o.fromPortId!==t||(o=o.toNode,null!==e?e.add(o):null!==n&&n!==o?((e=new $).add(n),e.add(o)):n=o):o.toNode!==this||null!==t&&o.toPortId!==t||(o=o.fromNode,null!==e?e.add(o):null!==n&&n!==o?((e=new $).add(n),e.add(o)):n=o)}return null!==e?e.iterator:null!==n?new H(n):V},Bp.Tv=function(t){void 0===t&&(t=null);for(var e=null,n=null,i=this.Ya.iterator;i.next();){var o=i.value;o.fromNode!==this||null!==t&&o.fromPortId!==t||(o=o.toNode,null!==e?e.add(o):null!==n&&n!==o?((e=new $).add(n),e.add(o)):n=o)}return null!==e?e.iterator:null!==n?new H(n):V},Bp.Sv=function(t){void 0===t&&(t=null);for(var e=null,n=null,i=this.Ya.iterator;i.next();){var o=i.value;o.toNode!==this||null!==t&&o.toPortId!==t||(o=o.fromNode,null!==e?e.add(o):null!==n&&n!==o?((e=new $).add(n),e.add(o)):n=o)}return null!==e?e.iterator:null!==n?new H(n):V},Bp.Sz=function(e,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var t=new Y(this.Ya),o=this;return t.predicate=function(t){return!(t.fromNode!==o||t.toNode!==e||null!==n&&t.fromPortId!==n||null!==i&&t.toPortId!==i)||!(t.fromNode!==e||t.toNode!==o||null!==i&&t.fromPortId!==i||null!==n&&t.toPortId!==n)},t},Bp.Tz=function(e,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var t=new Y(this.Ya),o=this;return t.predicate=function(t){return!(t.fromNode!==o||t.toNode!==e||null!==n&&t.fromPortId!==n||null!==i&&t.toPortId!==i)},t},el.prototype.updateRelationshipsFromData=function(){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)},(Bp=el.prototype).Kq=function(t){Ou.prototype.Kq.call(this,t),t||(hl(this),null!==(t=this.El)&&Sl(t,this))},Bp.Lq=function(t){Ou.prototype.Lq.call(this,t),t||null!==(t=this.El)&&null!==t.hd&&(t.hd.remove(this),t.o())},Bp.rk=function(){if(0<this.Ya.count){var t=this.diagram;if(null!==t)for(var e=null===t.commandHandler||t.commandHandler.deletesConnectedLinks,n=this.Ya.copy().iterator;n.next();){var i=n.value;e?t.remove(i):(i.fromNode===this&&(i.fromNode=null),i.toNode===this&&(i.toNode=null))}}this.labeledLink=null,Ou.prototype.rk.call(this)},Bp.Kt=function(t){if(null===this.sc){if(""===t&&!1===this.Nh)return this;ul(this)}var e=this.sc.H(t);return null!==e||""!==t&&null!==(e=this.sc.H(""))?e:this},Bp.vA=function(t){if(null===t||t===this)return!1;var e=!0,n=this.diagram;if(null!==n&&(e=n.isTreePathToChildren),n=this,e)for(;n!==t;){e=null;for(var i=n.Ya.iterator;i.next();){var o=i.value;if(o.isTreeLink&&((e=o.fromNode)!==n&&e!==this))break}if(e===this||null===e||e===n)return!1;n=e}else for(;n!==t;){for(e=null,i=n.Ya.iterator;i.next()&&(!(o=i.value).isTreeLink||((e=o.toNode)===n||e===this)););if(e===this||null===e||e===n)return!1;n=e}return!0},Bp.dA=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var n=e.Ya.iterator;n.next();){var i=n.value;if(i.isTreeLink&&((t=i.fromNode)!==e&&t!==this))break}if(t===this)return this;if(null===t||t===e)return e;e=t}else for(;;){for(t=null,n=e.Ya.iterator;n.next()&&(!(i=n.value).isTreeLink||((t=i.toNode)===e||t===this)););if(t===this)return this;if(null===t||t===e)return e;e=t}},Bp.Pz=function(t){if(null===t)return null;if(this===t)return this;for(var e=this;null!==e;)$u(e,!0),e=e.Fg();for(var n=null,e=t;null!==e;){if(0!=(1048576&e.D)){n=e;break}e=e.Fg()}for(e=this;null!==e;)$u(e,!1),e=e.Fg();return n},Bp.jj=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this.Ya.iterator,t){for(;e.next();)if((t=e.value).isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if((t=e.value).isTreeLink&&t.toNode!==this)return t;return null},Bp.Fg=function(){var t=this.Eh;if(null===t)return null;if(t instanceof el)return t;var e=!0;if(null!==(t=this.diagram)&&(e=t.isTreePathToChildren),t=this.Ya.iterator,e){for(;t.next();)if((e=t.value).isTreeLink&&(e=e.fromNode)!==this)return this.Eh=e}else for(;t.next();)if((e=t.value).isTreeLink&&(e=e.toNode)!==this)return this.Eh=e;return this.Eh=null},Bp.bA=function(){var t=new $;return function t(e,n){var i;null!==e&&(n.add(e),null!==(i=e.jj())&&(n.add(i),t(e.Fg(),n)))}(this,t),t},Bp.aA=function(){return function t(e,n){n=n.Fg();return null===n?0:1+t(e,n)}(this,this)},Bp.Fq=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren),e=new Y(this.Ya);var n=this;return e.predicate=t?function(t){return!(!t.isTreeLink||t.fromNode!==n)}:function(t){return!(!t.isTreeLink||t.toNode!==n)},e},Bp.Vv=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren);var n=e=null,i=this.Ya.iterator;if(t)for(;i.next();)(t=i.value).isTreeLink&&t.fromNode===this&&(t=t.toNode,null!==e?e.add(t):null!==n&&n!==t?((e=new X).add(n),e.add(t)):n=t);else for(;i.next();)(t=i.value).isTreeLink&&t.toNode===this&&(t=t.fromNode,null!==e?e.add(t):null!==n&&n!==t?((e=new X).add(n),e.add(t)):n=t);return null!==e?e.iterator:null!==n?new H(n):V},Bp.cA=function(t){void 0===t&&(t=1/0);var e=new $;return Zu(e,this,!1,t,!0),e},el.prototype.collapseTree=function(t){void 0===t&&(t=1),t<1&&(t=1);var e,n=this.diagram;null===n||n.He||(n.He=!0,(e=new $).add(this),function t(e,n,i,o,r,a,s){if(1<o)for(var h=i?e.Dq():e.Bd();h.next();){var u=h.value;u.isTreeLink&&(null===(u=u.Iq(e))||u===e||n.contains(u)||(n.add(u),t(u,n,i,o-1,r,a,s)))}else cl(e,n,i,r,a,s)}(this,e,n.isTreePathToChildren,t,n,this,n.treeCollapsePolicy===ha),n.He=!1)},el.prototype.expandTree=function(t){void 0===t&&(t=2),t<2&&(t=2);var e,n=this.diagram;null===n||n.He||(n.He=!0,(e=new $).add(this),function t(e,n,i,o,r,a,s){for(var h=a!==e&&e.isTreeExpanded,u=i?e.Dq():e.Bd();u.next();){var l=u.value;l.isTreeLink&&(h||l.dd||l.Ua(),null!==(l=l.Iq(e))&&l!==e&&!n.contains(l)&&(n.add(l),h||(l.Ob(!0),l.Oh(),s&&r.ik(l,a)),2<o||l.wasTreeExpanded))&&(l.wasTreeExpanded=!1,t(l,n,i,o-1,r,a,s))}e.isTreeExpanded=!0}(this,e,n.isTreePathToChildren,t,n,this,n.treeCollapsePolicy===ha),n.He=!1)},s.Object.defineProperties(el.prototype,{portSpreading:{get:function(){return this.vp},set:function(t){var e=this.vp;e!==t&&(this.vp=t,this.g("portSpreading",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.md())}},avoidable:{get:function(){return 0!=(8&this.P)},set:function(t){var e,n=0!=(8&this.P);n!==t&&(this.P^=8,null!==(e=this.diagram)&&Cr(e,this),this.g("avoidable",n,t))}},avoidableMargin:{get:function(){return this.Wk},set:function(t){"number"==typeof t&&(t=new Vt(t));var e,n=this.Wk;n.w(t)||(this.Wk=t=t.G(),null!==(e=this.diagram)&&Cr(e,this),this.g("avoidableMargin",n,t))}},linksConnected:{get:function(){return this.Ya.iterator}},linkConnected:{get:function(){return this.Fo},set:function(t){var e=this.Fo;e!==t&&(this.Fo=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return this.Go},set:function(t){var e=this.Go;e!==t&&(this.Go=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return this.Hi},set:function(t){var e=this.Hi;e!==t&&(this.Hi=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return null!==this.El}},labeledLink:{get:function(){return this.El},set:function(t){var e,n,i,o,r,a=this.El;a!==t&&(e=this.diagram,n=this.data,null!==a&&(null!==a.hd&&(a.hd.remove(this),a.o()),null===e||null===n||e.undoManager.isUndoingRedoing||(i=a.data,o=e.model,null===i||!o.pj()||void 0!==(r=o.ja(n))&&o.Ly(i,r)),this.containingGroup=null),null!==(this.El=t)&&(Sl(t,this),null===e||null===n||e.undoManager.isUndoingRedoing||(i=t.data,e=e.model,null===i||!e.pj()||void 0!==(n=e.ja(n))&&e.Dv(i,n)),this.containingGroup=t.containingGroup),ja(this),this.g("labeledLink",a,t))}},port:{get:function(){return this.Kt("")}},ports:{get:function(){return null===this.sc&&ul(this),this.sc.iteratorValues}},isTreeExpanded:{get:function(){return 0!=(1&this.P)},set:function(t){var e,n,i=0!=(1&this.P);i!==t&&(this.P^=1,e=this.diagram,this.g("isTreeExpanded",i,t),null!==(i=this.treeExpandedChanged)&&(n=!0,null!==e&&(n=e.Z,e.Z=!0),i(this),null!==e&&(e.Z=n)),null!==e&&e.undoManager.isUndoingRedoing?this.Ob(t):t?this.expandTree():this.collapseTree())}},wasTreeExpanded:{get:function(){return 0!=(2&this.P)},set:function(t){var e=0!=(2&this.P);e!==t&&(this.P^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return this.lq},set:function(t){var e=this.lq;e!==t&&(this.lq=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return 0!=(4&this.P)},set:function(t){var e=0!=(4&this.P);e!==t&&(this.P^=4,this.g("isTreeLeaf",e,t))}}}),el.prototype.findTreeParts=el.prototype.cA,el.prototype.findTreeChildrenNodes=el.prototype.Vv,el.prototype.findTreeChildrenLinks=el.prototype.Fq,el.prototype.findTreeLevel=el.prototype.aA,el.prototype.findTreeParentChain=el.prototype.bA,el.prototype.findTreeParentNode=el.prototype.Fg,el.prototype.findTreeParentLink=el.prototype.jj,el.prototype.findCommonTreeParent=el.prototype.Pz,el.prototype.findTreeRoot=el.prototype.dA,el.prototype.isInTreeOf=el.prototype.vA,el.prototype.findPort=el.prototype.Kt,el.prototype.findLinksTo=el.prototype.Tz,el.prototype.findLinksBetween=el.prototype.Sz,el.prototype.findNodesInto=el.prototype.Sv,el.prototype.findNodesOutOf=el.prototype.Tv,el.prototype.findNodesConnected=el.prototype.Rv,el.prototype.findLinksInto=el.prototype.Bd,el.prototype.findLinksOutOf=el.prototype.Dq,el.prototype.findExternalTreeLinksConnected=el.prototype.my,el.prototype.invalidateConnectedLinks=el.prototype.md,el.prototype.invalidateLinkBundle=el.prototype.tA;var Cn=new j(el,"SpreadingNone",10),gl=new j(el,"SpreadingEvenly",11),fl=new j(el,"SpreadingPacked",12);function pl(t){el.call(this,t),this.P|=4608,this.Ro=new $,this.Ml=new $,this.Ra=this.bq=this.Ji=this.So=this.Qo=null,this.kc=new Sd,this.kc.group=this}function ml(t,e){var n,i,o;t.Ro.add(e)&&(e instanceof pl&&t.Ml.add(e),null!==(n=t.memberAdded)&&(i=!0,null!==(o=t.diagram)&&(i=o.Z,o.Z=!0),n(t,e),null!==o&&(o.Z=i)),t.isVisible()&&t.isSubGraphExpanded||e.Ob(!1)),e instanceof wl&&!t.computesBoundsIncludingLinks||(null===(e=t.Ra)&&(e=t),e.o())}function yl(t,e){var n,i,o;t.Ro.remove(e)&&(e instanceof pl&&t.Ml.remove(e),null!==(n=t.memberRemoved)&&(i=!0,null!==(o=t.diagram)&&(i=o.Z,o.Z=!0),n(t,e),null!==o&&(o.Z=i)),t.isVisible()&&t.isSubGraphExpanded||e.Ob(!0)),e instanceof wl&&!t.computesBoundsIncludingLinks||(null===(e=t.Ra)&&(e=t),e.o())}function vl(){Na.call(this),this.gb=Ee,this.Jp=new ne(NaN,NaN,NaN,NaN)}function wl(){Ou.call(this,hh.Link),this.Fa=8,this.Ve=null,this.We="",this.rf=this.eo=null,this.sf="",this.kq=null,this.Rk=zl,this.Gn=0,this.In=zl,this.Jn=NaN,this.$j=Gl,this.Xp=.5,this.hd=null,this.Ab=(new X).freeze(),this.qg=this.oh=null,this.Rl=new ne,this.na=new qe,this.I=this.v=this.Lf=this.Uf=null,this.l=[],this.vv=new ee,this.cs=this.Lx=this.Kx=null,this.Pu=NaN,this.O=null}function bl(t){var e,n,i,o=t.fromNode,r=t.toNode,a=null,o=a=null!==o?null!==r?o.ly(r):o.containingGroup:null!==r?r.containingGroup:null;if((r=t.mi)!==o&&(null!==r&&yl(r,t),null!==(t.mi=o)&&ml(o,t),null!==(e=t.containingGroupChanged)&&(n=!0,null!==(i=t.diagram)&&(n=i.Z,i.Z=!0),e(t,r,o),null!==i&&(i.Z=n)),!t.dd||t.Kx!==r&&t.Lx!==r||t.Ua()),t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=a}function Sl(t,e){null===t.hd&&(t.hd=new $),t.hd.add(e),t.o()}function xl(t,e,n){if(0!==e||0!==n){for(var i=t.dd,o=new X,r=t.Ab.iterator;r.next();){var a=r.value;o.add(new ee(a.x+e,a.y+n).freeze())}o.freeze(),r=t.Ab,t.Ab=o,a=t.diagram,isNaN(e)||isNaN(n)||null!==a&&a.animationManager.rc?t.o():(t.dg.h(t.dg.x+e,t.dg.y+n),t.la.h(t.la.x+e,t.la.y+n),ja(t)),i&&Pl(t),null!==a&&a.animationManager.rc&&(t.qg=o),t.g("points",r,o)}}function Pl(t){0===t.Ab.count?t.dd=!1:(t.dd=!0,t.cs=null,t.Pu=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),El(t,!1))}function kl(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x>=t.x?e.x=t.x+9e9:e.x=t.x-9e9,e.y=t.y):(e.y>=t.y?e.y=t.y+9e9:e.y=t.y-9e9,e.x=t.x),e}function Ll(t,e){var n=e.tp;return null===n&&((n=new yd).port=e,n.node=e.part,e.tp=n),vd(n,t)}function Ml(t){return t===Ht||.5===t.x&&.5===t.y}function _l(t){if(null!==t.diagram&&t.isAvoiding&&Nr(t.diagram)){var e=t.points.j,n=e.length;if(!(n<4)){t=Ar(t.diagram,!0,t.containingGroup,null);for(var i=1;i<n-2;i++){var o=e[i],r=e[i+1];if(!t.zk(Math.min(o.x,r.x),Math.min(o.y,r.y),Math.abs(o.x-r.x),Math.abs(o.y-r.y)))return 1}}}}function Nl(t,e,n,i){return t=n-t,isNaN(t)||1/0===t||-1/0===t?NaN:(t<0&&(t=-t),e=i-e,isNaN(e)||1/0===e||-1/0===e?NaN:(e<0&&(e=-e),Ue.$(t,0)?e:Ue.$(e,0)?t:Math.sqrt(t*t+e*e)))}function Al(t,e,n,i){var o=t.pointsCount;if(o<2)return e;if(n){var r=t.i(1);if(n=r.x-i.x,r=r.y-i.y,0===(i=Nl(e.x,e.y,n,r)))return e;(o=2===o?.5*i:i)<(t=t.computeShortLength(!0))&&(t=o),o=t*(r-e.y)/i,e.x+=t*(n-e.x)/i,e.y+=o}else{if(n=(r=t.i(o-2)).x-i.x,r=r.y-i.y,0===(i=Nl(e.x,e.y,n,r)))return e;(o=2===o?.5*i:i)<(t=t.computeShortLength(!1))&&(t=o),o=t*(e.y-r)/i,e.x-=t*(e.x-n)/i,e.y-=o}return e}function Tl(t,e,n,i){for(var o=t.pointsCount,r=e;Ue.$(e.x,r.x)&&Ue.$(e.y,r.y);){if(o<=n)return o-1;r=t.i(n++)}if(!Ue.$(e.x,r.x)&&!Ue.$(e.y,r.y))return n-1;for(var a=r;Ue.$(e.x,r.x)&&Ue.$(r.x,a.x)&&(!i||(e.y>=r.y?r.y>=a.y:r.y<=a.y))||Ue.$(e.y,r.y)&&Ue.$(r.y,a.y)&&(!i||(e.x>=r.x?r.x>=a.x:r.x<=a.x));){if(o<=n)return o-1;a=t.i(n++)}return n-2}function Cl(t,e,n,i,o,r,a){if(!a&&Dl(t)){a=[];var s=0;if(t.isVisible()&&(s=function(t,e,n,i){var o=t.diagram;if(null===o||e.w(n))return 0;for(o=o.layers;o.next();){var r=o.value;if(null!==r&&r.visible)for(var a=(r=r.Da.j).length,s=0;s<a;s++){var h,u=r[s];if(u instanceof wl){if(u===t)return 0<i.length&&i.sort(function(t,e){return t-e}),i.length;u.isVisible()&&Dl(u)&&(!(h=u.routeBounds).u()||!t.routeBounds.Lc(h)||t.usesSamePort(u)||null!==(h=u.path)&&h.Ff()&&function(t,e,n,i){for(var o=Ue.A(t.y,e.y),r=i.pointsCount,a=i.i(0),s=ee.alloc(),h=1;h<r;h++){var u=i.i(h);if(h<r-1){var l=i.i(h+1);if(a.y===u.y&&u.y===l.y){if(u.x>a.x&&l.x>=u.x||u.x<a.x&&l.x<=u.x)continue}else if(a.x===u.x&&u.x===l.x&&(u.y>a.y&&l.y>=u.y||u.y<a.y&&l.y<=u.y))continue}t:{l=t.x;var d=t.y,c=e.x,g=e.y,f=a.x;a=a.y;var p=u.x,m=u.y;if(Ue.A(l,c)){if(!Ue.A(d,g)&&Ue.A(a,m)&&Math.min(d,g)<a&&Math.max(d,g)>a&&Math.min(f,p)<l&&Math.max(f,p)>l&&!Ue.A(f,p)){s.x=l,s.y=a,l=!0;break t}}else if(Ue.A(d,g)&&Ue.A(f,p)&&Math.min(l,c)<f&&Math.max(l,c)>f&&Math.min(a,m)<d&&Math.max(a,m)>d&&!Ue.A(a,m)){s.x=f,s.y=d,l=!0;break t}s.x=0,s.y=0,l=!1}l&&(o?n.push(s.x):n.push(s.y)),a=u}ee.free(s)}(e,n,i,u))}}}return 0<i.length&&i.sort(function(t,e){return t-e}),i.length}(t,o,r,a)),0<s)if(Ue.A(o.y,r.y))if(o.x<r.x)for(var h=0;h<s;){var u=Math.max(o.x,Math.min(a[h++]-5,r.x-10));e.lineTo(u+n,r.y+i);for(var l=u+n,d=Math.min(u+10,r.x);h<s&&(u=a[h])<d+10;)h++,d=Math.min(u+5,r.x);u=r.y-10+i,d+=n;var c=r.y+i;t.curve===Il?Au(e,d,c,!1):Tu(e,l,u,d,u,d,c)}else for(--s;0<=s;){for(h=Math.min(o.x,Math.max(a[s--]+5,r.x+10)),e.lineTo(h+n,r.y+i),l=h+n,u=Math.max(h-10,r.x);0<=s&&u-10<(h=a[s]);)s--,u=Math.max(h-5,r.x);h=r.y-10+i,u+=n,d=r.y+i,t.curve===Il?Au(e,u,d,!1):Tu(e,l,h,u,h,u,d)}else if(Ue.A(o.x,r.x))if(o.y<r.y)for(h=0;h<s;){for(u=Math.max(o.y,Math.min(a[h++]-5,r.y-10)),e.lineTo(r.x+n,u+i),l=u+i,u=Math.min(u+10,r.y);h<s&&(d=a[h])<u+10;)h++,u=Math.min(d+5,r.y);d=r.x-10+n,c=r.x+n,u+=i,t.curve===Il?Au(e,c,u,!1):Tu(e,d,l,d,u,c,u)}else for(--s;0<=s;){for(h=Math.min(o.y,Math.max(a[s--]+5,r.y+10)),e.lineTo(r.x+n,h+i),l=h+i,h=Math.max(h-10,r.y);0<=s&&h-10<(u=a[s]);)s--,h=Math.max(u-5,r.y);u=r.x-10+n,d=r.x+n,h+=i,t.curve===Il?Au(e,d,h,!1):Tu(e,u,l,u,h,d,h)}}e.lineTo(r.x+n,r.y+i)}function Dl(t){return(t=t.curve)===Vl||t===Il}function El(t,e){(e||Dl(t))&&(null===(e=t.diagram)||e.animationManager.isTicking||e.Vg.contains(t)||0===t.Rl.width&&0===t.Rl.height||e.Vg.add(t,t.Rl.copy()))}function Fl(t,e,n){var i;null!==e&&e.Ym&&e.dd&&Dl(e)&&((i=e.routeBounds).u()&&(t.routeBounds.Lc(i)||n.Lc(i))&&(t.usesSamePort(e)||e.cc()))}function Ol(t){var e=t.Ve;if(null!==e){var n=t.rf;if(null!==n){for(var i=t.We,o=t.sf,r=t=null,a=e.Ya.j,s=a.length,h=0;h<s;h++){var u=a[h];(u.Ve===e&&u.We===i&&u.rf===n&&u.sf===o||u.Ve===n&&u.We===o&&u.rf===e&&u.sf===i)&&(null===r?r=u:(null===t&&(t=[]).push(r),t.push(u)))}if(null!==t){for(null===(r=il(e,n,i,o))&&(nl(e,r=new id(e,i,n,o)),nl(n,r)),r.links=t,e=0;e<t.length;e++)t[e].Lf=r;r.ym()}}}}function Bl(t){var e=t.Lf;null!==e&&(t.Lf=null,0<=(t=e.links.indexOf(t))&&(x(e.links,t),e.ym()))}el.className="Node",el.SpreadingNone=Cn,el.SpreadingEvenly=gl,el.SpreadingPacked=fl,n(pl,el),pl.prototype.cloneProtected=function(t){el.prototype.cloneProtected.call(this,t),this.P=-32769&this.P,t.Qo=this.Qo,t.So=this.So,t.Ji=this.Ji,t.bq=this.bq;var e=t.sm(function(t){return t instanceof vl});t.Ra=e instanceof vl?e:null,null!==this.kc?(t.kc=this.kc.copy(),t.kc.group=t):(null!==t.kc&&(t.kc.group=null),t.kc=null)},(Bp=pl.prototype).yf=function(t){el.prototype.yf.call(this,t);var e=t.uk();for(t=t.memberParts;t.next();){var n=t.value;if(n.o(),n.C(8),n.kk(),n instanceof el)n.md(e);else if(n instanceof wl)for(n=n.labelNodes;n.next();)n.value.md(e)}},Bp.Jk=function(t,e,n,i,o,r,a){var s;t===Sn&&"elements"===e?o instanceof vl?null===this.Ra?this.Ra=o:this.Ra!==o&&O("Cannot insert a second Placeholder into the visual tree of a Group."):o instanceof hh&&((s=o.sm(function(t){return t instanceof vl}))instanceof vl&&(null===this.Ra?this.Ra=s:this.Ra!==s&&O("Cannot insert a second Placeholder into the visual tree of a Group."))):t===xn&&"elements"===e&&null!==this.Ra&&(i===this.Ra||i instanceof hh&&this.Ra.Gg(i))&&(this.Ra=null),el.prototype.Jk.call(this,t,e,n,i,o,r,a)},Bp.Ih=function(t,e,n,i){this.bf=this.Ra,el.prototype.Ih.call(this,t,e,n,i)},Bp.Ta=function(){var e=this;e.isSubGraphExpanded&&this.memberParts.each(function(t){!e.computesBoundsIncludingLinks&&t instanceof wl||t.Ta()}),el.prototype.Ta.call(this)},Bp.qj=function(){if(!el.prototype.qj.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof el){if(e.isVisible()&&Wa(e))return!1}else if(e instanceof wl&&e.isVisible()&&Wa(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0},Bp.rk=function(){if(0<this.Ro.count){var t=this.diagram;if(null!==t)for(var e=this.Ro.copy().iterator;e.next();)t.remove(e.value)}el.prototype.rk.call(this)},pl.prototype.canAddMembers=function(t){var e=this.diagram;if(null===e)return!1;for(e=e.commandHandler,t=_a(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},pl.prototype.addMembers=function(t,e){var n=this.diagram;if(null===n)return!1;n=n.commandHandler;var i=!0;for(t=_a(t).iterator;t.next();){var o=t.value;!e||n.isValidMember(this,o)?o.containingGroup=this:i=!1}return i},pl.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return!(null!==t&&!t.allowUngroup)&&!(null!==(t=t.diagram)&&!t.allowUngroup)},(Bp=pl.prototype).md=function(t){void 0===t&&(t=null);var e=0!=(65536&this.P);if(el.prototype.md.call(this,t),!e)for(0!=(65536&this.P)!=!0&&(this.P=65536^this.P),e=this.Qv();e.next();){var n,i=e.value;null!==t&&t.contains(i)||(null!==(n=i.fromNode)&&n!==this&&n.Cd(this)&&!n.isVisible()?(rl(n,i.fromPort),rl(n,i.toPort),i.Ua()):null!==(n=i.toNode)&&n!==this&&n.Cd(this)&&!n.isVisible()&&(rl(n,i.fromPort),rl(n,i.toPort),i.Ua()))}},Bp.Qv=function(){var t=this.uk();t.add(this);for(var e=new $,n=t.iterator;n.next();){var i=n.value;if(i instanceof el)for(i=i.linksConnected;i.next();){var o=i.value;t.contains(o)||e.add(o)}}return e.iterator},Bp.Rz=function(){var t=this.uk();t.add(this);for(var e=new $,n=t.iterator;n.next();){var i=n.value;if(i instanceof el)for(i=i.linksConnected;i.next();){var o=i.value,r=o.fromNode;null===r||t.contains(r)&&r!==this||e.add(r),null===(o=o.toNode)||t.contains(o)&&o!==this||e.add(o)}}return e.iterator},Bp.Qz=function(){var t=new $;return function t(e,n){null!==e&&(n.add(e),t(e.containingGroup,n))}(this,t),t},Bp.uk=function(){var t=new $;return Zu(t,this,!0,0,!0),t.remove(this),t},Bp.Ob=function(t){el.prototype.Ob.call(this,t);for(var e=this.memberParts;e.next();)e.value.Ob(t)},pl.prototype.collapseSubGraph=function(){var t,e=this.diagram;null===e||e.He||(e.He=!0,t=this.uk(),function t(e,n,i,o){for(var r=e.memberParts;r.next();){var a=r.value;if(a.Ob(!1),a instanceof pl&&a.isSubGraphExpanded&&(a.wasSubGraphExpanded=a.isSubGraphExpanded,t(a,n,i,o)),a instanceof el)a.md(n),i.gk(a,o);else if(a instanceof wl)for(a=a.labelNodes;a.next();)a.value.md(n)}e.isSubGraphExpanded=!1}(this,t,e,this),e.He=!1)},pl.prototype.expandSubGraph=function(){var t,e=this.diagram;null===e||e.He||(e.He=!0,t=this.uk(),function t(e,n,i,o){for(var r=e.memberParts;r.next();){var a=r.value;if(a.Ob(!0),a instanceof pl&&a.wasSubGraphExpanded&&(a.wasSubGraphExpanded=!1,t(a,n,i,o)),a instanceof el)a.md(n),i.ik(a,o);else if(a instanceof wl)for(a=a.labelNodes;a.next();)a.value.md(n)}e.isSubGraphExpanded=!0}(this,t,e,this),e.He=!1)},pl.prototype.move=function(t,e){void 0===e&&(e=!1);var n,i,o=(r=e?this.location:this.position).x,r=r.y,a=t.x,s=t.y;if(!(o===a||isNaN(o)&&isNaN(a))||!(r===s||isNaN(r)&&isNaN(s))){for(o=a-(isNaN(o)?0:o),r=s-(isNaN(r)?0:r),s=ee.alloc(),el.prototype.move.call(this,t,e),t=new $,e=this.uk().iterator;e.next();)(a=e.value)instanceof wl&&(a.suspendsRouting&&t.add(a),a.dd||a.fromNode!==this&&a.toNode!==this)&&(a.suspendsRouting=!0);for(e.reset();e.next();)(a=e.value).Ph()||a instanceof el&&a.isLinkLabel||(n=a.position,i=a.location,n.u()?(s.x=n.x+o,s.y=n.y+r,a.position=s):i.u()&&(s.x=i.x+o,s.y=i.y+r,a.location=s));for(e.reset();e.next();)(a=e.value)instanceof wl&&(a.suspendsRouting=t.contains(a),a.dd||a.fromNode!==this&&a.toNode!==this)&&(n=a.position,s.x=n.x+o,s.y=n.y+r,s.u()?a.move(s):a.Ua(),_l(a)&&a.Ua());ee.free(s)}},s.Object.defineProperties(pl.prototype,{placeholder:{get:function(){return this.Ra}},computesBoundsAfterDrag:{get:function(){return 0!=(2048&this.P)},set:function(t){var e=0!=(2048&this.P);e!==t&&(this.P^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return 0!=(4096&this.P)},set:function(t){var e=0!=(4096&this.P);e!==t&&(this.P^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return 0!=(8192&this.P)},set:function(t){var e=0!=(8192&this.P);e!==t&&(this.P^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return 0!=(16384&this.P)},set:function(t){var e=0!=(16384&this.P);e!==t&&(this.P^=16384,this.g("handlesDragDropForMembers",e,t))}},memberParts:{get:function(){return this.Ro.iterator}},layout:{get:function(){return this.kc},set:function(t){var e,n=this.kc;n!==t&&(null!==n&&(n.diagram=null,n.group=null),this.kc=t,e=this.diagram,null!==t&&(t.diagram=e,t.group=this),null!==e&&(e.Ng=!0),this.g("layout",n,t),null!==e&&e.Db())}},memberAdded:{get:function(){return this.Qo},set:function(t){var e=this.Qo;e!==t&&(this.Qo=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return this.So},set:function(t){var e=this.So;e!==t&&(this.So=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return this.Ji},set:function(t){var e=this.Ji;e!==t&&(this.Ji=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return 0!=(256&this.P)},set:function(t){var e=0!=(256&this.P);e!==t&&(this.P^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return 0!=(512&this.P)},set:function(t){var e,n,i=0!=(512&this.P);i!==t&&(this.P^=512,e=this.diagram,this.g("isSubGraphExpanded",i,t),null!==(i=this.subGraphExpandedChanged)&&(n=!0,null!==e&&(n=e.Z,e.Z=!0),i(this),null!==e&&(e.Z=n)),null!==e&&e.undoManager.isUndoingRedoing?(null!==this.Ra&&this.Ra.o(),this.memberParts.each(function(t){t.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph())}},wasSubGraphExpanded:{get:function(){return 0!=(1024&this.P)},set:function(t){var e=0!=(1024&this.P);e!==t&&(this.P^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return this.bq},set:function(t){var e=this.bq;e!==t&&(this.bq=t,this.g("subGraphExpandedChanged",e,t))}},Rh:{get:function(){return 0!=(32768&this.P)},set:function(t){0!=(32768&this.P)!==t&&(this.P^=32768)}}}),pl.prototype.findSubGraphParts=pl.prototype.uk,pl.prototype.findContainingGroupChain=pl.prototype.Qz,pl.prototype.findExternalNodesConnected=pl.prototype.Rz,pl.prototype.findExternalLinksConnected=pl.prototype.Qv,pl.prototype.ensureBounds=pl.prototype.Ta,pl.className="Group",n(vl,Na),vl.prototype.cloneProtected=function(t){Na.prototype.cloneProtected.call(this,t),t.gb=this.gb.G(),t.Jp=this.Jp.copy()},vl.prototype.Kh=function(t){if(null===this.background&&null===this.areaBackground)return!1;var e=this.naturalBounds;return Gt(0,0,e.width,e.height,t.x,t.y)},vl.prototype.Dm=function(){var t=this.part;if(null!==t&&(t instanceof pl||t instanceof tl)||O("Placeholder is not inside a Group or Adornment."),t instanceof pl){var e=this.computeBorder(this.Jp),n=this.minSize,i=this.qc;for(Tt(i,(isFinite(n.width)?Math.max(n.width,e.width):e.width)||0,(isFinite(n.height)?Math.max(n.height,e.height):e.height)||0),Ca(this,0,0,i.width,i.height),i=t.memberParts,n=!1;i.next();)if(i.value.isVisible()){n=!0;break}i=t.diagram,!n||null===i||i.animationManager.dw(t)||isNaN(e.x)||isNaN(e.y)||((n=ee.alloc()).sj(e,t.locationSpot),n.w(t.location)||(t.location=new ee(n.x,n.y)),ee.free(n))}else{e=this.qc,i=(n=this.gb).left+n.right;var o=n.top+n.bottom,r=t.adornedObject;t.angle=r.lj();var a=0;r instanceof Oh&&(a=r.strokeWidth);var s=r.Af(),h=r.naturalBounds,u=(h.width+a)*s,a=(h.height+a)*s;t.type!==hh.Link&&(r=r.ga("Selection"===t.category?Yt:t.locationSpot,ee.alloc()),t.location=r,ee.free(r)),isNaN(u)||isNaN(a)?(u=(t=t.adornedObject).ga(Yt,ee.alloc()),(r=ne.allocAt(u.x,u.y,0,0)).Me(t.ga(Qt,u)),r.Me(t.ga(Kt,u)),r.Me(t.ga(Jt,u)),Tt(e,r.width+i||0,r.height+o||0),Ca(this,-n.left,-n.top,e.width,e.height),ee.free(u),ne.free(r)):(Tt(e,u+i||0,a+o||0),Ca(this,-n.left,-n.top,e.width,e.height))}},vl.prototype.Ih=function(t,e,n,i){this.actualBounds.h(t,e,n,i)},vl.prototype.computeBorder=function(t){var e=this.part,n=e.diagram;if(null!==n&&e instanceof pl&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.Jp.u()){var i=n.toolManager.findTool("Dragging");if(i===n.currentTool&&null!==(n=i.computeBorder(e,this.Jp,t)))return n}n=ne.alloc(),i=this.computeMemberBounds(n);var o=this.gb;return e instanceof pl&&!e.isSubGraphExpanded?t.h(i.x-o.left,i.y-o.top,0,0):t.h(i.x-o.left,i.y-o.top,Math.max(i.width+o.left+o.right,0),Math.max(i.height+o.top+o.bottom,0)),ne.free(n),e instanceof pl&&e.computesBoundsIncludingLocation&&e.location.u()&&t.Me(e.location),t},vl.prototype.computeMemberBounds=function(t){if(!(this.part instanceof pl))return t.h(0,0,0,0),t;for(var e=this.part,n=1/0,i=1/0,o=-1/0,r=-1/0,a=e.memberParts;a.next();){var s=a.value;if(s.isVisible()){if(s instanceof wl){if(!e.computesBoundsIncludingLinks)continue;if(Ka(s))continue;if(s.fromNode===e||s.toNode===e)continue}(s=s.actualBounds).left<n&&(n=s.left),s.top<i&&(i=s.top),s.right>o&&(o=s.right),s.bottom>r&&(r=s.bottom)}}return isFinite(n)&&isFinite(i)?t.h(n,i,o-n,r-i):(e=e.location,t.h(e.x,e.y,0,0)),t},s.Object.defineProperties(vl.prototype,{padding:{get:function(){return this.gb},set:function(t){"number"==typeof t&&(t=new Vt(t));var e=this.gb;e.w(t)||(this.gb=t=t.G(),this.g("padding",e,t),this.o())}}}),vl.className="Placeholder",n(wl,Ou),wl.prototype.cloneProtected=function(t){Ou.prototype.cloneProtected.call(this,t),t.Fa=-113&this.Fa,t.We=this.We,t.eo=this.eo,t.sf=this.sf,t.kq=this.kq,t.Rk=this.Rk,t.Gn=this.Gn,t.In=this.In,t.Jn=this.Jn,t.$j=this.$j,t.Xp=this.Xp,null!==this.O&&(t.O=this.O.copy())},(Bp=wl.prototype).yf=function(t){Ou.prototype.yf.call(this,t),this.We=t.We,this.sf=t.sf,t.oh=null,t.Ua(),t.Lf=this.Lf;var e=t.fromPort;null!==e&&rl(t.fromNode,e),null!==(e=t.toPort)&&rl(t.toNode,e)},Bp.hb=function(t){t.classType===wl?2==(2&t.value)?this.routing=t:t===Rl||t===Il||t===Vl?this.curve=t:t===Ul||t===ql||t===Hl?this.adjusting=t:t!==Gl&&t!==zl&&O("Unknown Link enum value for a Link property: "+t):Ou.prototype.hb.call(this,t)},Bp.Jc=function(){null===this.O&&(this.O=new bd)},Bp.qj=function(){var t=this.fromNode;if(null!==t){var e=t.findVisibleNode();if(null!==e&&(t=e),Wa(t)||Yu(t))return!1}return null===(t=this.toNode)||(null!==(e=t.findVisibleNode())&&(t=e),!Wa(t)&&!Yu(t))},Bp.Dw=function(){return!1},Bp.lu=function(){},Bp.Wb=function(){return!1},wl.prototype.computeAngle=function(t,e,n){return wl.computeAngle(e,n)},wl.computeAngle=function(t,e){switch(t){default:case zl:t=0;break;case Yl:t=e;break;case Kl:t=e+90;break;case Xl:t=e-90;break;case Wl:t=e+180;break;case $l:90<(t=Ue.Tq(e))&&t<270&&(t-=180);break;case Jl:90<(t=Ue.Tq(e+90))&&t<270&&(t-=180);break;case Zl:90<(t=Ue.Tq(e-90))&&t<270&&(t-=180);break;case Ql:if(45<(t=Ue.Tq(e))&&t<135||225<t&&t<315)return 0;90<t&&t<270&&(t-=180)}return Ue.Tq(t)},(Bp=wl.prototype).Oh=function(){var t=this.containingGroup;null!==t&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&Ou.prototype.Oh.call(this)},Bp.Iq=function(t){var e=this.fromNode;return t===e?this.toNode:e},Bp.iA=function(t){var e=this.fromPort;return t===e?this.toPort:e},Bp.Kq=function(t){var e,n,i;Ou.prototype.Kq.call(this,t),Dl(this)&&this.Nq(this.actualBounds),t||((e=null)!==(t=this.Ve)&&al(t,this,e=this.fromPort),null!==(n=this.rf)&&(i=this.toPort,n===t&&i===e||al(n,this,i)),Ol(this))},Bp.Lq=function(t){var e,n,i;Ou.prototype.Lq.call(this,t),Dl(this)&&this.Nq(this.actualBounds),t||((e=null)!==(t=this.Ve)&&sl(t,this,e=this.fromPort),null!==(n=this.rf)&&(i=this.toPort,n===t&&i===e||sl(n,this,i)),Bl(this))},Bp.rk=function(){if(this.dd=!0,null!==this.hd){var t=this.diagram;if(null!==t)for(var e=this.hd.copy().iterator;e.next();)t.remove(e.value)}null===this.data||null!==(t=this.diagram)&&t.partManager.removeDataForLink(this)},wl.prototype.updateRelationshipsFromData=function(){var t;null===this.data||null!==(t=this.diagram)&&t.partManager.updateRelationshipsFromData(this)},wl.prototype.move=function(t,e){var n=e?this.location:this.position,i=n.x;isNaN(i)&&(i=0);var o=n.y;for(isNaN(o)&&(o=0),i=t.x-i,o=t.y-o,!0===e?Ou.prototype.move.call(this,t,!1):(t=ee.allocAt(n.x+i,n.y+o),Ou.prototype.move.call(this,t,!1),ee.free(t)),xl(this,i,o),t=this.labelNodes;t.next();)n=(e=t.value).position,e.moveTo(n.x+i,n.y+o)},wl.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},wl.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},wl.prototype.computeMidPoint=function(t){var e,n,i=this.pointsCount;if(0===i)return t.assign(Lt),t;if(1===i)return t.assign(this.i(0)),t;if(2===i){var o=this.i(0),r=this.i(1);return t.h((o.x+r.x)/2,(o.y+r.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Rl))return this.na.Wv(.5,t),t.add(this.i(0)),o=this.na.figures.first(),t.offset(-o.startX,-o.startY),t;if(this.computeCurve()===Rl)return 3===i?this.i(1):(o=3*((r=(i-1)/3|0)/2|0),1==r%2?(r=this.i(o),e=this.i(o+1),n=this.i(o+2),o=this.i(o+3),Ue.sz(r.x,r.y,e.x,e.y,n.x,n.y,o.x,o.y,t)):t.assign(this.i(o)),t);var a=this.flattenedLengths;for(o=this.flattenedTotalLength,e=n=r=0;r<o/2&&n<i&&!(o/2<r+(e=a[n]));)r+=e,n++;return i=this.i(n),n=this.i(n+1),Math.abs(i.x-n.x)<1?i.y>n.y?t.h(i.x,i.y-(o/2-r)):t.h(i.x,i.y+(o/2-r)):Math.abs(i.y-n.y)<1?i.x>n.x?t.h(i.x-(o/2-r),i.y):t.h(i.x+(o/2-r),i.y):(o=(o/2-r)/e,t.h(i.x+o*(n.x-i.x),i.y+o*(n.y-i.y))),t},wl.prototype.computeMidAngle=function(){var t=this.pointsCount;if(t<2)return NaN;if(2===t)return this.i(0).Sa(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===Rl))return this.na.sy(.5);if(this.computeCurve()===Rl&&4<=t){var e=(t-1)/3|0,n=3*(e/2|0);if(1==e%2){n=Math.floor(n),t=this.i(n),e=this.i(n+1);var i=this.i(n+2),n=this.i(n+3);return Ue.rz(t.x,t.y,e.x,e.y,i.x,i.y,n.x,n.y)}if(0<n&&n+1<t)return this.i(n-1).Sa(this.i(n+1))}e=this.flattenedLengths,i=this.flattenedTotalLength;var o,r=0;for(n=0;r<i/2&&n<t&&!(i/2<r+(o=e[n]));)r+=o,n++;if(e=this.i(n),i=this.i(n+1),Math.abs(e.x-i.x)<1&&Math.abs(e.y-i.y)<1){if(0<n&&n+2<t)return this.i(n-1).Sa(this.i(n+2))}else{if(Math.abs(e.x-i.x)<1)return e.y>i.y?270:90;if(Math.abs(e.y-i.y)<1)return e.x>i.x?180:0}return e.Sa(i)},(Bp=wl.prototype).i=function(t){return this.Ab.j[t]},Bp.od=function(t,e){this.Ab.nd(t,e)},Bp.K=function(t,e,n){this.Ab.nd(t,new ee(e,n))},Bp.rA=function(t,e){this.Ab.vb(t,e)},Bp.m=function(t,e,n){this.Ab.vb(t,new ee(e,n))},Bp.Be=function(t){this.Ab.add(t)},Bp.vf=function(t,e){this.Ab.add(new ee(t,e))},Bp.sw=function(t){this.Ab.bb(t)},Bp.lk=function(){this.Ab.clear()},Bp.Th=function(){null===this.oh&&(this.oh=this.Ab,this.Ab=this.Ab.copy())},Bp.xf=function(){if(null!==this.oh){for(var t=this.oh,e=this.Ab,n=1/0,i=1/0,o=t.j,r=o.length,a=0;a<r;a++)var s=o[a],n=Math.min(s.x,n),i=Math.min(s.y,i);s=a=1/0;for(var h=e.j,u=h.length,l=0;l<u;l++){var d=h[l],a=Math.min(d.x,a),s=Math.min(d.y,s);d.freeze()}if(e.freeze(),u===r){for(r=0;r<u;r++)if(l=o[r],d=h[r],l.x-n!=d.x-a||l.y-i!=d.y-s){this.cc();break}}else this.cc();(this.oh=null)!==(n=this.diagram)&&n.animationManager.rc&&(this.qg=e),Pl(this),this.g("points",t,e)}},Bp.xw=function(){null!==this.oh&&(this.Ab=this.oh,this.oh=null)},Bp.Ua=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.Xt.contains(this)||t.undoManager.isUndoingRedoing)return;if((t=t.animationManager).isTicking&&!t.isAnimating)return;null!==this.qg&&!t.isTicking&&t.isAnimating&&(this.qg=null)}null!==(t=this.path)&&(this.dd=!1,this.o(),t.o())}},Bp.wj=function(){if(!this.dd&&!this.Ct){var t=!0;try{this.Ct=!0,this.Th(),t=this.computePoints()}catch(t){this.Ct=!1,this.xw()}finally{this.Ct=!1,t?this.xf():this.xw()}}},wl.prototype.computePoints=function(){if(null===(a=this.diagram))return!1;var t=this.fromNode,e=null;if(null===t?(a.rh||(a.Tl=new Oh,a.Tl.desiredSize=ft,a.Tl.strokeWidth=0,a.rh=new el,a.rh.add(a.Tl),a.rh.Ta()),this.defaultFromPoint&&(a.rh.position=a.rh.location=this.defaultFromPoint,a.rh.Ta(),t=a.rh,e=a.Tl)):e=this.fromPort,null===e||t.isVisible()||(null!==(r=t.findVisibleNode())&&r!==t?e=(t=r).port:t=r),null===(this.Kx=t)||!t.location.u())return!1;for(;!(null===e||e.actualBounds.u()&&e.Ff());)e=e.panel;if(null===e)return!1;var n=this.toNode,i=null;if(null===n?(a.sh||(a.Ul=new Oh,a.Ul.desiredSize=ft,a.Ul.strokeWidth=0,a.sh=new el,a.sh.add(a.Ul),a.sh.Ta()),this.defaultToPoint&&(a.sh.position=a.sh.location=this.defaultToPoint,a.sh.Ta(),n=a.sh,i=a.Ul)):i=this.toPort,null===i||n.isVisible()||(null!==(a=n.findVisibleNode())&&a!==n?i=(n=a).port:n=a),null===(this.Lx=n)||!n.location.u())return!1;for(;!(null===i||i.actualBounds.u()&&i.Ff());)i=i.panel;if(null===i)return!1;var o=this.pointsCount,r=this.computeSpot(!0,e),a=this.computeSpot(!1,i),s=Ml(r),h=Ml(a),u=e===i&&null!==e,l=this.isOrthogonal,d=this.curve===Rl;this.Uf=!(!u||l)&&(d=!0);var c,g,f,p,m,y,v,w,b,S=this.computeAdjusting()===zl||u;return!l&&!u&&s&&h?(s=!1,!S&&3<=o&&(S=this.getLinkPoint(t,e,r,!0,!1,n,i),h=this.getLinkPoint(n,i,a,!1,!1,t,e),s=this.adjustPoints(0,S,o-1,h))&&(S=this.getLinkPoint(t,e,r,!0,!1,n,i),h=this.getLinkPoint(n,i,a,!1,!1,t,e),this.adjustPoints(0,S,o-1,h)),s||(this.lk(),d?(o=this.getLinkPoint(t,e,r,!0,!1,n,i),s=(S=this.getLinkPoint(n,i,a,!1,!1,t,e)).x-o.x,h=S.y-o.y,u=this.computeCurviness(),d=l=0,c=f=o.x+s/3,g=p=o.y+h/3,g=Ue.A(h,0)?0<s?g-u:g+u:(l=-s/h,d=Math.sqrt(u*u/(l*l+1)),u<0&&(d=-d),l*((c=(h<0?-1:1)*d+f)-f)+p),m=f=o.x+2*s/3,y=p=o.y+2*h/3,y=Ue.A(h,0)?0<s?y-u:y+u:l*((m=(h<0?-1:1)*d+f)-f)+p,this.lk(),this.Be(o),this.vf(c,g),this.vf(m,y),this.Be(S),this.od(0,this.getLinkPoint(t,e,r,!0,!1,n,i)),this.od(3,this.getLinkPoint(n,i,a,!1,!1,t,e))):(r=this.getLinkPoint(t,e,r,!0,!1,n,i),a=this.getLinkPoint(n,i,a,!1,!1,t,e),this.hasCurviness()?(S=a.x-r.x,n=a.y-r.y,i=this.computeCurviness(),o=t=r.x+S/2,s=e=r.y+n/2,s=Ue.A(n,0)?0<S?s-i:s+i:(S=-S/n,o=Math.sqrt(i*i/(S*S+1)),i<0&&(o=-o),S*((o=(n<0?-1:1)*o+t)-t)+e),this.Be(r),this.vf(o,s)):this.Be(r),this.Be(a)))):(d=this.isAvoiding,S&&(l&&d||u)&&this.lk(),v=u?this.computeCurviness():0,d=this.getLinkPoint(t,e,r,!0,l,n,i),f=c=p=0,!l&&s&&!u||(g=this.computeEndSegmentLength(t,e,r,!0),f=this.getLinkDirection(t,e,d,r,!0,l,n,i),u&&(s||r.w(a)||!l&&1===r.x+a.x&&1===r.y+a.y)&&(f-=l?90:30,v<0&&(f-=180)),f<0?f+=360:360<=f&&(f-=360),u&&(g+=Math.abs(v)*(l?1:2)),0===f?p=g:90===f?c=g:180===f?p=-g:c=270===f?-g:(p=g*Math.cos(f*Math.PI/180),g*Math.sin(f*Math.PI/180)),r.mc()&&u&&(g=e.ga(Wt,ee.alloc()),m=ee.allocAt(g.x+1e3*p,g.y+1e3*c),this.getLinkPointFromPoint(t,e,g,m,!0,d),ee.free(g),ee.free(m))),g=this.getLinkPoint(n,i,a,!1,l,t,e),b=y=m=0,!l&&h&&!u||(w=this.computeEndSegmentLength(n,i,a,!1),b=this.getLinkDirection(n,i,g,a,!1,l,t,e),u&&(h||r.w(a)||!l&&1===r.x+a.x&&1===r.y+a.y)&&(b+=l?0:30,v<0&&(b+=180)),b<0?b+=360:360<=b&&(b-=360),u&&(w+=Math.abs(v)*(l?1:2)),0===b?m=w:90===b?y=w:180===b?m=-w:y=270===b?-w:(m=w*Math.cos(b*Math.PI/180),w*Math.sin(b*Math.PI/180)),a.mc()&&u&&(a=i.ga(Wt,ee.alloc()),r=ee.allocAt(a.x+1e3*m,a.y+1e3*y),this.getLinkPointFromPoint(n,i,a,r,!1,g),ee.free(a),ee.free(r))),a=d,!l&&s&&!u||(a=new ee(d.x+p,d.y+c)),r=g,!l&&h&&!u||(r=new ee(g.x+m,g.y+y)),!S&&!l&&s&&3<o&&this.adjustPoints(0,d,o-2,r)?this.od(o-1,g):!S&&!l&&h&&3<o&&this.adjustPoints(1,a,o-1,g)?this.od(0,d):!S&&(l?6<=o:4<o)&&this.adjustPoints(1,a,o-2,r)?(this.od(0,d),this.od(o-1,g)):(this.lk(),this.Be(d),!l&&s&&!u||this.Be(a),l&&this.addOrthoPoints(a,f,r,b,t,n),!l&&h&&!u||this.Be(r),this.Be(g))),!0},wl.prototype.getLinkPointFromPoint=function(t,e,n,i,o,r){return void 0===r&&(r=new ee),null===t||null===e?r.assign(n):(t.isVisible()||null!==(o=t.findVisibleNode())&&o!==t&&(e=o.port),(t=null)===(o=e.panel)||o.de()||(o=o.panel),n=null===o?(o=i.x,i=i.y,a=n.x,n.y):(o=1/((t=o.Ad).m11*t.m22-t.m12*t.m21),a=t.m22*o,s=-t.m12*o,h=-t.m21*o,u=t.m11*o,l=o*(t.m21*t.dy-t.m22*t.dx),d=o*(t.m12*t.dx-t.m11*t.dy),o=i.x*a+i.y*h+l,i=i.x*s+i.y*u+d,a=n.x*a+n.y*h+l,n.x*s+n.y*u+d),e.vk(o,i,a,n,r),null!==t&&r.transform(t)),r;var a,s,h,u,l,d},wl.prototype.getLinkPoint=function(t,e,n,i,o,r,a,s){if(void 0===s&&(s=new ee),n.ib()&&!Ml(n))return e.ga(n,s),s;if(n.Mc()){var h,u,l,d=Ll(this,e);if(null!==d)return s.assign(d.Qq),!o||this.routing!==jl||null!==(h=Ll(this,a))&&d.qm<h.qm&&(d=ee.alloc(),h=ee.alloc(),u=new ne(e.ga(Yt,d),e.ga(Qt,h)),l=this.computeSpot(!i,a),t=this.getLinkPoint(r,a,l,!i,o,t,e,h),(n.Df(re)||n.Df(ae))&&t.y>=u.y&&t.y<=u.y+u.height?s.y=t.y:(n.Df(te)||n.Df(se))&&t.x>=u.x&&t.x<=u.x+u.width&&(s.x=t.x),ee.free(d),ee.free(h)),s}return n=e.ga(.5===n.x&&.5===n.y?n:Wt,ee.alloc()),this.pointsCount>(o?6:2)?(a=i?this.i(1):this.i(this.pointsCount-2),o&&(a=kl(n,a.copy()))):(d=this.computeSpot(!i,a),r=ee.alloc(),a=a.ga(.5===d.x&&.5===d.y?d:Wt,r),o&&(a=kl(n,a)),ee.free(r)),this.getLinkPointFromPoint(t,e,n,a,i,s),ee.free(n),s},wl.prototype.getLinkDirection=function(t,e,n,i,o,r,a,s){t:if(i.ib())var h=i.x>i.y?i.x>1-i.y?0:i.x<1-i.y?270:315:i.x<i.y?i.x>1-i.y?90:i.x<1-i.y?180:135:i.x<.5?225:.5<i.x?45:0;else{if(i.Mc()&&null!==(h=Ll(this,e)))switch(h.Ac){case 1:h=270;break t;case 2:h=180;break t;default:case 4:h=0;break t;case 8:h=90;break t}h=e.ga(Wt,ee.alloc()),this.pointsCount>(r?6:2)?(s=o?this.i(1):this.i(this.pointsCount-2),s=r?kl(h,s.copy()):n):(n=ee.alloc(),s=s.ga(Wt,n),ee.free(n)),n=Math.abs(s.x-h.x)>Math.abs(s.y-h.y)?s.x>=h.x?0:180:s.y>=h.y?90:270,ee.free(h),h=n}return i.mc()&&a.Cd(t)&&(360<=(h+=180)&&(h-=360)),Ml(i)||0===(t=e.lj())||(45<=t&&t<135?h+=90:135<=t&&t<225?h+=180:225<=t&&t<315&&(h+=270),360<=h&&(h-=360)),h},wl.prototype.computeEndSegmentLength=function(t,e,n,i){return null!==e&&n.Mc()&&null!==(t=Ll(this,e))?t.Ov:(t=i?this.fromEndSegmentLength:this.toEndSegmentLength,null!==e&&isNaN(t)&&(t=i?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},wl.prototype.computeSpot=function(t,e){return void 0===e&&(e=null),t=t?null===(t=e||this.fromPort)?Wt:((e=this.fromSpot).Mb()&&(e=t.fromSpot),e===we?Ht:e):null===(t=e||this.toPort)?Wt:((e=this.toSpot).Mb()&&(e=t.toSpot),e===we?Ht:e)},wl.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==zl&&4<this.pointsCount?this.computeMidPoint(new ee):(t=e.ga(Wt),null!==(e=null!==(e=e.tp)?vd(e,this):null)&&(t=e.Qq),t)},wl.prototype.computeShortLength=function(t){var e;return t?(t=this.fromShortLength,!isNaN(t)||null!==(e=this.fromPort)&&(t=e.fromShortLength)):(t=this.toShortLength,!isNaN(t)||null!==(e=this.toPort)&&(t=e.toShortLength)),isNaN(t)?0:t},wl.prototype.zf=function(t,e,n,i,o,r){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var a=r;if(void 0===r&&(a=Ie.alloc()).reset(),a.multiply(this.transform),this.Jh(t,a))return mh(this,e,n,o),void 0===r&&Ie.free(a),!0;if(this.Lc(t,a)){var s=!1;if(!this.isAtomic)for(var h=this.W.j,u=h.length;u--;){var l,d,c,g,f,p,m,y,v,w=h[u];!w.visible&&w!==this.locationObject||(v=w.actualBounds,l=this.naturalBounds,v.x>l.width||v.y>l.height||v.x+v.width<0||v.y+v.height<0||((v=Ie.alloc()).set(a),w instanceof hh?s=w.zf(t,e,n,i,o,v):this.path===w?w instanceof Oh&&(s=t,l=i,s=!1!==w.pickable&&(v.multiply(w.transform),l?(g=s,d=v,!!w.Jh(g,d)||(!(void 0!==d||(d=w.transform,!g.De(w.actualBounds)))||(s=g.left,l=g.right,c=g.top,g=g.bottom,f=ee.alloc(),p=ee.alloc(),m=ee.alloc(),(y=Ie.alloc()).set(d),y.iw(w.transform),y.St(),p.x=l,p.y=c,p.transform(y),f.x=s,f.y=c,f.transform(y),d=!1,Rh(w,f,p,m)?d=!0:(f.x=l,f.y=g,f.transform(y),Rh(w,f,p,m)?d=!0:(p.x=s,p.y=g,p.transform(y),Rh(w,f,p,m)?d=!0:(f.x=s,f.y=c,f.transform(y),Rh(w,f,p,m)&&(d=!0)))),Ie.free(y),ee.free(f),ee.free(p),ee.free(m),d))):w.Jh(s,v))):s=Da(w,t,i,v),s&&(l=w,null!==e&&(l=e(w)),l&&(null===n||n(l))&&o.add(l)),Ie.free(v)))}return void 0===r&&Ie.free(a),s||null!==this.background||null!==this.areaBackground}return void 0===r&&Ie.free(a),!1},wl.prototype.computeCurve=function(){var t,e;return null===this.Uf&&(t=this.fromPort,e=this.isOrthogonal,this.Uf=null!==t&&t===this.toPort&&!e),this.Uf?Rl:this.curve},wl.prototype.computeCorner=function(){if(this.curve===Rl)return 0;var t=this.corner;return(isNaN(t)||t<0)&&(t=10),t},wl.prototype.findMidLabel=function(){for(var t=this.path,e=this.W.j,n=e.length,i=0;i<n;i++){var o=e[i];if(o!==t&&!o.isPanelMain&&(-1/0===o.segmentIndex||isNaN(o.segmentIndex)))return o}for(t=this.labelNodes;t.next();)if(-1/0===(e=t.value).segmentIndex||isNaN(e.segmentIndex))return e;return null},wl.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=ed;t=Math.max(t,this.computeThickness());var e,n,i,o,r=this.fromPort,a=this.toPort;return null===r||null===a||null!==(o=this.findMidLabel())&&(i=o.naturalBounds,e=o.margin,n=isNaN(i.width)?30:i.width*o.scale+e.left+e.right,i=isNaN(i.height)?14:i.height*o.scale+e.top+e.bottom,t=(o=o.segmentOrientation)===Yl||o===$l||o===Wl?Math.max(t,i):o===Xl||o===Zl||o===Kl||o===Jl?Math.max(t,n):(r=r.ga(Wt).Sa(a.ga(Wt))/180*Math.PI,Math.max(t,Math.abs(Math.sin(r)*n)+Math.abs(Math.cos(r)*i)+1)),this.curve===Rl&&(t*=1.333)),t},wl.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var n=t[e];n.computeAdjusting()===zl&&n.Ua()}},wl.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=td;var e=this.Lf;if(null!==e){for(var n=be(),i=0,o=e.links,r=0;r<o.length;r++){var a=o[r].computeSpacing();n.push(a),i+=a}for(i=-i/2,r=0;r<o.length;r++){if(o[r]===this){t=i+n[r]/2;break}i+=n[r]}e.$t===this.fromNode&&(t=-t),Se(n)}}return t},wl.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return null!==t?Math.max(t.strokeWidth,1):1},wl.prototype.hasCurviness=function(){return!isNaN(this.curviness)||null!==this.Lf},wl.prototype.adjustPoints=function(t,e,n,i){var o=this.computeAdjusting();if(this.isOrthogonal){if(o===ql)return!1;o===Hl&&(o=Ul)}switch(o){case ql:var r=this.i(t),a=this.i(n);if(!r.Na(e)||!a.Na(i)){o=r.x,r=r.y;var s,h=a.x-o,u=a.y-r,l=Math.sqrt(h*h+u*u);if(!Ue.$(l,0)){Ue.$(h,0)?s=u<0?-Math.PI/2:Math.PI/2:(s=Math.atan(u/Math.abs(h)),h<0&&(s=Math.PI-s)),a=e.x;var d=e.y,h=i.x-a,c=i.y-d,u=Math.sqrt(h*h+c*c);for(Ue.$(h,0)?c=c<0?-Math.PI/2:Math.PI/2:(c=Math.atan(c/Math.abs(h)),h<0&&(c=Math.PI-c)),l=u/l,s=c-s,this.od(t,e),t+=1;t<n;t++)h=(e=this.i(t)).x-o,u=e.y-r,e=Math.sqrt(h*h+u*u),Ue.$(e,0)||(Ue.$(h,0)?u=u<0?-Math.PI/2:Math.PI/2:(u=Math.atan(u/Math.abs(h)),h<0&&(u=Math.PI-u)),h=u+s,e*=l,this.K(t,a+e*Math.cos(h),d+e*Math.sin(h)));this.od(n,i)}}return!0;case Hl:if(r=this.i(t),d=this.i(n),!r.Na(e)||!d.Na(i)){o=r.x,r=r.y,l=((a=d.x)-o)*(a-o)+((d=d.y)-r)*(d-r),h=e.x,s=e.y,u=i.x,c=i.y;var g,f=1;for(0!=u-h?(g=(c-s)/(u-h),f=Math.sqrt(1+1/(g*g))):g=9e9,this.od(t,e),t+=1;t<n;t++){var p=(e=this.i(t)).x,m=e.y,y=.5;0!==l&&(y=((o-p)*(o-a)+(r-m)*(r-d))/l);var v=o+y*(a-o),w=r+y*(d-r);e=Math.sqrt((p-v)*(p-v)+(m-w)*(m-w)),m<g*(p-v)+w&&(e=-e),0<g&&(e=-e),p=h+y*(u-h),y=s+y*(c-s),0!==g?(e=p+e/f,this.K(t,e,y-(e-p)/g)):this.K(t,p,y+e)}this.od(n,i)}return!0;case Ul:return n=this.isOrthogonal&&(o=this.i(t),r=this.i(t+1),a=this.i(t+2),d=h=r.x,l=s=r.y,Ue.A(o.y,r.y)?Ue.A(r.x,a.x)?s=e.y:Ue.A(r.y,a.y)&&(h=e.x):Ue.A(o.x,r.x)&&(Ue.A(r.y,a.y)?h=e.x:Ue.A(r.x,a.x)&&(s=e.y)),this.K(t+1,h,s),o=this.i(n),r=this.i(n-1),a=this.i(n-2),u=h=r.x,c=s=r.y,Ue.A(o.y,r.y)?Ue.A(r.x,a.x)?s=i.y:Ue.A(r.y,a.y)&&(h=i.x):Ue.A(o.x,r.x)&&(Ue.A(r.y,a.y)?h=i.x:Ue.A(r.x,a.x)&&(s=i.y)),this.K(n-1,h,s),_l(this))?(this.K(t+1,d,l),this.K(n-1,u,c),!1):(this.od(t,e),this.od(n,i),!0);default:return!1}},wl.prototype.addOrthoPoints=function(t,e,n,i,o,r){e=-45<=e&&e<45?0:45<=e&&e<135?90:135<=e&&e<225?180:270,i=-45<=i&&i<45?0:45<=i&&i<135?90:135<=i&&i<225?180:270;var a,s,h,u,l,d,c,g,f,p=o.actualBounds.copy(),m=r.actualBounds.copy();p.u()&&m.u()&&(p.Ic(nd,nd),m.Ic(nd,nd),p.Me(t),m.Me(n),0===e?n.x>t.x||270===i&&n.y<t.y&&m.right>t.x||90===i&&n.y>t.y&&m.right>t.x?(a=new ee(n.x,t.y),s=new ee(n.x,(t.y+n.y)/2),180===i?(a.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),s.x=a.x,s.y=n.y):270===i&&n.y<t.y||90===i&&n.y>t.y?(a.x=t.x<m.left?this.computeMidOrthoPosition(t.x,t.y,m.left,n.y,!1):t.x<m.right&&(270===i&&t.y<m.top||90===i&&t.y>m.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):m.right,s.x=a.x,s.y=n.y):0===i&&t.x<m.left&&t.y>m.top&&t.y<m.bottom&&(a.x=t.x,a.y=t.y<n.y?Math.min(n.y,m.top):Math.max(n.y,m.bottom),s.y=a.y)):(a=new ee(t.x,n.y),s=new ee((t.x+n.x)/2,n.y),(180===i||90===i&&n.y<p.top||270===i&&n.y>p.bottom)&&(180===i&&(m.aa(t)||p.aa(n))?a.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(180===i||90===i)?a.y=this.computeMidOrthoPosition(t.x,p.top,n.x,Math.max(n.y,m.bottom),!0):n.y>t.y&&(180===i||270===i)&&(a.y=this.computeMidOrthoPosition(t.x,p.bottom,n.x,Math.min(n.y,m.top),!0)),s.x=n.x,s.y=a.y),a.y>p.top&&a.y<p.bottom&&(n.x>=p.left&&n.x<=t.x||t.x<=m.right&&t.x>=n.x?90!==i&&270!==i||(a=new ee(Math.max((t.x+n.x)/2,t.x),t.y),s=new ee(a.x,n.y)):(a.y=270===i||(0===i||180===i)&&n.y<t.y?Math.min(n.y,0===i?p.top:Math.min(p.top,m.top)):Math.max(n.y,0===i?p.bottom:Math.max(p.bottom,m.bottom)),s.x=n.x,s.y=a.y))):180===e?n.x<t.x||270===i&&n.y<t.y&&m.left<t.x||90===i&&n.y>t.y&&m.left<t.x?(a=new ee(n.x,t.y),s=new ee(n.x,(t.y+n.y)/2),0===i?(a.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),s.x=a.x,s.y=n.y):270===i&&n.y<t.y||90===i&&n.y>t.y?(a.x=t.x>m.right?this.computeMidOrthoPosition(t.x,t.y,m.right,n.y,!1):t.x>m.left&&(270===i&&t.y<m.top||90===i&&t.y>m.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):m.left,s.x=a.x,s.y=n.y):180===i&&t.x>m.right&&t.y>m.top&&t.y<m.bottom&&(a.x=t.x,a.y=t.y<n.y?Math.min(n.y,m.top):Math.max(n.y,m.bottom),s.y=a.y)):(a=new ee(t.x,n.y),s=new ee((t.x+n.x)/2,n.y),(0===i||90===i&&n.y<p.top||270===i&&n.y>p.bottom)&&(0===i&&(m.aa(t)||p.aa(n))?a.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(0===i||90===i)?a.y=this.computeMidOrthoPosition(t.x,p.top,n.x,Math.max(n.y,m.bottom),!0):n.y>t.y&&(0===i||270===i)&&(a.y=this.computeMidOrthoPosition(t.x,p.bottom,n.x,Math.min(n.y,m.top),!0)),s.x=n.x,s.y=a.y),a.y>p.top&&a.y<p.bottom&&(n.x<=p.right&&n.x>=t.x||t.x>=m.left&&t.x<=n.x?90!==i&&270!==i||(a=new ee(Math.min((t.x+n.x)/2,t.x),t.y),s=new ee(a.x,n.y)):(a.y=270===i||(0===i||180===i)&&n.y<t.y?Math.min(n.y,180===i?p.top:Math.min(p.top,m.top)):Math.max(n.y,180===i?p.bottom:Math.max(p.bottom,m.bottom)),s.x=n.x,s.y=a.y))):90===e?n.y>t.y||180===i&&n.x<t.x&&m.bottom>t.y||0===i&&n.x>t.x&&m.bottom>t.y?(a=new ee(t.x,n.y),s=new ee((t.x+n.x)/2,n.y),270===i?(a.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),s.x=n.x,s.y=a.y):180===i&&n.x<t.x||0===i&&n.x>t.x?(a.y=t.y<m.top?this.computeMidOrthoPosition(t.x,t.y,n.x,m.top,!0):t.y<m.bottom&&(180===i&&t.x<m.left||0===i&&t.x>m.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):m.bottom,s.x=n.x,s.y=a.y):90===i&&t.y<m.top&&t.x>m.left&&t.x<m.right&&(a.x=t.x<n.x?Math.min(n.x,m.left):Math.max(n.x,m.right),a.y=t.y,s.x=a.x)):(a=new ee(n.x,t.y),s=new ee(n.x,(t.y+n.y)/2),(270===i||0===i&&n.x<p.left||180===i&&n.x>p.right)&&(270===i&&(m.aa(t)||p.aa(n))?a.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(270===i||0===i)?a.x=this.computeMidOrthoPosition(p.left,t.y,Math.max(n.x,m.right),n.y,!1):n.x>t.x&&(270===i||180===i)&&(a.x=this.computeMidOrthoPosition(p.right,t.y,Math.min(n.x,m.left),n.y,!1)),s.x=a.x,s.y=n.y),a.x>p.left&&a.x<p.right&&(n.y>=p.top&&n.y<=t.y||t.y<=m.bottom&&t.y>=n.y?0!==i&&180!==i||(a=new ee(t.x,Math.max((t.y+n.y)/2,t.y)),s=new ee(n.x,a.y)):(a.x=180===i||(90===i||270===i)&&n.x<t.x?Math.min(n.x,90===i?p.left:Math.min(p.left,m.left)):Math.max(n.x,90===i?p.right:Math.max(p.right,m.right)),s.x=a.x,s.y=n.y))):n.y<t.y||180===i&&n.x<t.x&&m.top<t.y||0===i&&n.x>t.x&&m.top<t.y?(a=new ee(t.x,n.y),s=new ee((t.x+n.x)/2,n.y),90===i?(a.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),s.x=n.x,s.y=a.y):180===i&&n.x<t.x||0===i&&n.x>=t.x?(a.y=t.y>m.bottom?this.computeMidOrthoPosition(t.x,t.y,n.x,m.bottom,!0):t.y>m.top&&(180===i&&t.x<m.left||0===i&&t.x>m.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):m.top,s.x=n.x,s.y=a.y):270===i&&t.y>m.bottom&&t.x>m.left&&t.x<m.right&&(a.x=t.x<n.x?Math.min(n.x,m.left):Math.max(n.x,m.right),a.y=t.y,s.x=a.x)):(a=new ee(n.x,t.y),s=new ee(n.x,(t.y+n.y)/2),(90===i||0===i&&n.x<p.left||180===i&&n.x>p.right)&&(90===i&&(m.aa(t)||p.aa(n))?a.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(90===i||0===i)?a.x=this.computeMidOrthoPosition(p.left,t.y,Math.max(n.x,m.right),n.y,!1):n.x>t.x&&(90===i||180===i)&&(a.x=this.computeMidOrthoPosition(p.right,t.y,Math.min(n.x,m.left),n.y,!1)),s.x=a.x,s.y=n.y),a.x>p.left&&a.x<p.right&&(n.y<=p.bottom&&n.y>=t.y||t.y>=m.top&&t.y<=n.y?0!==i&&180!==i||(a=new ee(t.x,Math.min((t.y+n.y)/2,t.y)),s=new ee(n.x,a.y)):(a.x=180===i||(90===i||270===i)&&n.x<t.x?Math.min(n.x,270===i?p.left:Math.min(p.left,m.left)):Math.max(n.x,270===i?p.right:Math.max(p.right,m.right)),s.x=a.x,s.y=n.y))),h=a,u=s,l=n,(e=!!this.isAvoiding&&(!(null===(d=this.diagram)||!Nr(d)||p.aa(l)&&!r.Cd(o)||m.aa(t)&&!o.Cd(r)||o===r||this.layer.isTemporary)&&(c=Ar(d,!0,this.containingGroup,null),!(17!==this.segmentIndex&&c.zk(Math.min(t.x,h.x),Math.min(t.y,h.y),Math.abs(t.x-h.x),Math.abs(t.y-h.y))&&c.zk(Math.min(h.x,u.x),Math.min(h.y,u.y),Math.abs(h.x-u.x),Math.abs(h.y-u.y))&&c.zk(Math.min(u.x,l.x),Math.min(u.y,l.y),Math.abs(u.x-l.x),Math.abs(u.y-l.y)))&&(o=t,r=l,g=n=null,d.isVirtualized&&((d=c.bounds.copy()).Ic(-c.xq,-c.wq),f=ee.alloc(),rd(c,t.x,t.y)||(Ue.bd(d.x,d.y,d.x+d.width,d.y+d.height,t.x,t.y,h.x,h.y,f)?(n=t=f.copy(),e=f.Sa(h)):Ue.bd(d.x,d.y,d.x+d.width,d.y+d.height,h.x,h.y,u.x,u.y,f)?(n=t=f.copy(),e=f.Sa(u)):Ue.bd(d.x,d.y,d.x+d.width,d.y+d.height,u.x,u.y,l.x,l.y,f)&&(n=t=f.copy(),e=f.Sa(l))),rd(c,l.x,l.y)||(Ue.bd(d.x,d.y,d.x+d.width,d.y+d.height,l.x,l.y,u.x,u.y,f)?(g=l=f.copy(),i=u.Sa(f)):Ue.bd(d.x,d.y,d.x+d.width,d.y+d.height,u.x,u.y,h.x,h.y,f)?(g=l=f.copy(),i=h.Sa(f)):Ue.bd(d.x,d.y,d.x+d.width,d.y+d.height,h.x,h.y,t.x,t.y,f)&&(g=l=f.copy(),i=t.Sa(f))),ee.free(f)),(p=p.copy().Oc(m)).Ic(c.xq*c.Ty,c.wq*c.Ty),dd(c,t,e,l,i,p,!0),m=ad(c,l.x,l.y),!c.abort&&fd<=m&&(sd(c),p.Ic(c.xq*c.Dy,c.wq*c.Dy),dd(c,t,e,l,i,p,!1),m=ad(c,l.x,l.y)),!c.abort&&m<fd&&ad(c,l.x,l.y)!==cd&&(function t(e,n,i,o,r,a){var s=n.xq,h=n.wq,u=ad(n,i,o),l=i,d=o;for(0===r?l+=s:90===r?d+=h:180===r?l-=s:d-=h;gd<u&&ad(n,l,d)===u-1;)i=l,o=d,0===r?l+=s:90===r?d+=h:180===r?l-=s:d-=h,--u;a?gd<u&&(180===r||0===r?i=Math.floor(i/s)*s+s/2:90!==r&&270!==r||(o=Math.floor(o/h)*h+h/2)):(i=Math.floor(i/s)*s+s/2,o=Math.floor(o/h)*h+h/2);gd<u&&(a=r,l=i,d=o,0===r?(a=90,d+=h):90===r?(a=180,l-=s):180===r?(a=270,d-=h):270===r&&(a=0,l+=s),ad(n,l,d)===u-1?t(e,n,l,d,a,!1):(l=i,d=o,0===r?(a=270,d-=h):90===r?(a=0,l+=s):180===r?(a=90,d+=h):270===r&&(a=180,l-=s),ad(n,l,d)===u-1&&t(e,n,l,d,a,!1)));e.vf(i,o)}(this,c,l.x,l.y,i,!0),m=this.i(2),this.pointsCount<4?(0===e||180===e?(m.x=t.x,m.y=l.y):(m.x=l.x,m.y=t.y),this.K(2,m.x,m.y),this.m(3,m.x,m.y)):(p=this.i(3),0===e||180===e?Ue.A(m.x,p.x)?(m=0===e?Math.max(m.x,t.x):Math.min(m.x,t.x),this.K(2,m,t.y),this.K(3,m,p.y)):Ue.A(m.y,p.y)?(Math.abs(t.y-m.y)<=c.wq/2&&(this.K(2,m.x,t.y),this.K(3,p.x,t.y)),this.m(2,m.x,t.y)):this.K(2,t.x,m.y):90!==e&&270!==e||(Ue.A(m.y,p.y)?(m=90===e?Math.max(m.y,t.y):Math.min(m.y,t.y),this.K(2,t.x,m),this.K(3,p.x,m)):Ue.A(m.x,p.x)?(Math.abs(t.x-m.x)<=c.xq/2&&(this.K(2,t.x,m.y),this.K(3,t.x,p.y)),this.m(2,t.x,m.y)):this.K(2,m.x,t.y))),null!==n&&(t=this.i(1),p=this.i(2),t.x!==p.x&&t.y!==p.y?0===e||180===e?this.m(2,t.x,p.y):this.m(2,p.x,t.y):0===e||180===e?this.m(2,o.x,n.y):this.m(2,n.x,o.y)),null!==g&&(0===i||180===i?this.vf(r.x,g.y):this.vf(g.x,r.y)),!0)))))||(this.Be(a),this.Be(s)))},wl.prototype.computeMidOrthoPosition=function(t,e,n,i,o){var r=0;return!this.hasCurviness()||this.computeSpot(!0,this.fromPort).Mc()||this.computeSpot(!1,this.toPort).Mc()||(r=this.computeCurviness()),o?(e+i)/2+r:(t+n)/2+r},wl.prototype.Nz=function(t){var e=t.x;t=t.y;for(var n=this.i(0),i=this.i(1),o=dt(e,t,n.x,n.y,i.x,i.y),r=0,a=1;a<this.pointsCount-1;a++){n=this.i(a+1);var s=dt(e,t,i.x,i.y,n.x,n.y),i=n;s<o&&(r=a,o=s)}return r},wl.prototype.cc=function(){this.Ym=!1,this.o()},wl.prototype.Bk=function(t){if(!t){if(!1===this.dd)return;if(t=this.pb(),this.Ym&&(null===t||null!==t.geometry))return}if(this.na=this.makeGeometry(),null!==(t=this.path)){t.na=this.na;for(var e=this.W.j,n=e.length,i=0;i<n;i++){var o=e[i];o!==t&&o.isPanelMain&&o instanceof Oh&&(o.na=this.na)}}},wl.prototype.makeGeometry=function(){var t=this.na,e=this.pointsCount;if(e<2)return t.type=en,this.Ym=!0,t;var n=!1;null!==(s=this.diagram)&&Dl(this)&&s.Vg.contains(this)&&(0!==this.Rl.width||0!==this.Rl.height)&&(n=!0);var i=this.i(0).copy(),o=i.copy();s=this.Ab.j;var r=this.computeCurve();if(r===Rl&&3<=e&&!Ue.$(this.smoothness,0))if(3===e){var a=this.i(1),s=Math.min(i.x,a.x),h=Math.min(i.y,a.y),a=this.i(2);s=Math.min(s,a.x),h=Math.min(h,a.y)}else{if(this.isOrthogonal)for(h=0;h<e;h++)a=s[h],o.x=Math.min(a.x,o.x),o.y=Math.min(a.y,o.y);else for(s=3;s<e;s+=3)e<=s+3&&(s=e-1),h=this.i(s),o.x=Math.min(h.x,o.x),o.y=Math.min(h.y,o.y);s=o.x,h=o.y}else{for(h=0;h<e;h++)a=s[h],o.x=Math.min(a.x,o.x),o.y=Math.min(a.y,o.y);s=o.x,h=o.y}if(s-=this.vv.x,h-=this.vv.y,i.x-=s,i.y-=h,2!==e||Dl(this)){if(t.type=rn,a=Du(t),0!==this.computeShortLength(!0)&&(i=Al(this,i,!0,o)),Au(a,i.x,i.y,!1),r===Rl&&3<=e&&!Ue.$(this.smoothness,0))if(3===e)e=(n=this.i(1)).x-s,n=n.y-h,(i=this.i(2).copy()).x-=s,i.y-=h,0!==this.computeShortLength(!1)&&(i=Al(this,i,!1,o)),Tu(a,e,n,e,n,i.x,i.y);else if(this.isOrthogonal){o=new ee(s,h),i=this.i(1).copy(),r=new ee(s,h),e=new ee(s,h),n=this.i(0);for(var u=this.smoothness/3,l=1;l<this.pointsCount-1;l++){var d,c,g,f,p=n,m=b=this.i(l),y=this.i(Tl(this,b,l,!1));Ue.$(p.x,m.x)&&Ue.$(m.x,y.x)||Ue.$(p.y,m.y)&&Ue.$(m.y,y.y)||(d=u,isNaN(d)&&(d=this.smoothness/3),S=p.x,p=p.y,c=m.x,m=m.y,g=y.x,y=y.y,f=d*Nl(S,p,c,m),d*=Nl(c,m,g,y),Ue.$(p,m)&&Ue.$(c,g)&&(S<c?m<y?(r.x=c-f,r.y=m-f,e.x=c+d,e.y=m+d):(r.x=c-f,r.y=m+f,e.x=c+d,e.y=m-d):m<y?(r.x=c+f,r.y=m-f,e.x=c-d,e.y=m+d):(r.x=c+f,r.y=m+f,e.x=c-d,e.y=m-d)),Ue.$(S,c)&&Ue.$(m,y)&&(p<m?(c<g?(r.x=c-f,r.y=m-f,e.x=c+d):(r.x=c+f,r.y=m-f,e.x=c-d),e.y=m+d):(c<g?(r.x=c-f,r.y=m+f,e.x=c+d):(r.x=c+f,r.y=m+f,e.x=c-d),e.y=m-d)),(Ue.$(S,c)&&Ue.$(c,g)||Ue.$(p,m)&&Ue.$(m,y))&&(S=.5*(S+g),p=.5*(p+y),r.x=S,r.y=p,e.x=S,e.y=p),(1===l||2===l&&Ue.$(n.x,this.i(0).x)&&Ue.$(n.y,this.i(0).y))&&(i.x=.5*(n.x+b.x),i.y=.5*(n.y+b.y)),Tu(a,i.x-s,i.y-h,r.x-s,r.y-h,b.x-s,b.y-h),o.set(r),i.set(e),n=b)}o=n.x,n=n.y,i=this.i(this.pointsCount-1),0!==this.computeShortLength(!1)&&(i=Al(this,i.copy(),!1,St)),o=.5*(o+i.x),n=.5*(n+i.y),Tu(a,e.x-s,e.y-h,o-s,n-h,i.x-s,i.y-h)}else for(n=3;n<e;n+=3)o=this.i(n-2),e<=n+3&&(n=e-1),i=this.i(n-1),r=this.i(n),n===e-1&&0!==this.computeShortLength(!1)&&(r=Al(this,r.copy(),!1,St)),Tu(a,o.x-s,o.y-h,i.x-s,i.y-h,r.x-s,r.y-h);else{for((o=ee.alloc()).assign(this.i(0)),(i=ee.alloc()).assign(o),r=this.computeCorner(),l=1,b=0;l<e;){if(l=Tl(this,o,l,1<l),u=this.i(l),e-1<=l){if(o.w(u)){if(0===b)for(l=1;l<e;)i.assign(o),u=this.i(l++),Cl(this,a,-s,-h,o,u,n),o.assign(u)}else 0!==this.computeShortLength(!1)&&(u=Al(this,u.copy(),!1,St)),Cl(this,a,-s,-h,o,u,n);break}var v,w,b=Tl(this,u,l+1,l<e-3),l=-s,S=-h;p=u,d=this.i(b),c=n,Ue.A(o.y,p.y)&&Ue.A(p.x,d.x)?(m=Math.min(r,Math.abs(p.x-i.x)/2),m=g=Math.min(m,Math.abs(d.y-p.y)/2),Ue.A(m,0)?(Cl(this,a,l,S,o,p,c),o.assign(p)):(v=y=p.x,w=f=p.y,y=p.x>o.x?p.x-m:p.x+m,w=d.y>p.y?p.y+g:p.y-g,Cl(this,a,l,S,o,new ee(y,f),c),Cu(a,p.x+l,p.y+S,v+l,w+S),o.h(v,w))):Ue.A(o.x,p.x)&&Ue.A(p.y,d.y)?(m=Math.min(r,Math.abs(p.y-i.y)/2),m=g=Math.min(m,Math.abs(d.x-p.x)/2),Ue.A(g,0)?(Cl(this,a,l,S,o,p,c),o.assign(p)):(v=y=p.x,w=f=p.y,f=p.y>o.y?p.y-m:p.y+m,v=d.x>p.x?p.x+g:p.x-g,Cl(this,a,l,S,o,new ee(y,f),c),Cu(a,p.x+l,p.y+S,v+l,w+S),o.h(v,w))):(Cl(this,a,l,S,o,p,c),o.assign(p)),i.assign(u),l=b}ee.free(o)}Eu=a}else(a=this.i(1).copy()).x-=s,a.y-=h,0!==this.computeShortLength(!0)&&(i=Al(this,i,!0,o)),0!==this.computeShortLength(!1)&&(a=Al(this,a,!1,o)),t.type=en,t.startX=i.x,t.startY=i.y,t.endX=a.x,t.endY=a.y;return this.Ym=!0,t},wl.prototype.Nq=function(t){var e=this.layer;if(null!==e&&e.visible&&!e.isTemporary&&(null!==(i=e.diagram)&&!i.animationManager.isTicking))for(var n=!1,i=i.layers;i.next();){var o=i.value;if(o.visible)if(o===e)for(var r=!(n=!0),a=(o=o.Da.j).length,s=0;s<a;s++){var h=o[s];h instanceof wl&&(h===this?r=!0:r&&Fl(this,h,t))}else if(n)for(o=(r=o.Da.j).length,a=0;a<o;a++)(s=r[a])instanceof wl&&Fl(this,s,t)}},wl.prototype.usesSamePort=function(t){var e=this.pointsCount,n=t.pointsCount;if(0<e&&0<n){var i=this.i(0),o=t.i(0);if(i.Na(o))return!0;if(e=this.i(e-1),t=t.i(n-1),e.Na(t)||i.Na(t)||e.Na(o))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},wl.prototype.isVisible=function(){if(!Ou.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,n=this.diagram;if(null!==n&&(e=n.isTreePathToChildren),null!==(n=this.fromNode)){if(this.isTreeLink&&e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(var i=n;null!==i;){if(i.labeledLink===this)return!0;i=i.containingGroup}if(null===(n=n.findVisibleNode())||n===t)return!1}if(null!==(n=this.toNode)){if(this.isTreeLink&&!e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(e=n;null!==e;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(null===(e=n.findVisibleNode())||e===t)return!1}return!0},wl.prototype.Ob=function(t){if(Ou.prototype.Ob.call(this,t),null!==this.Lf&&this.Lf.ym(),null!==this.hd)for(var e=this.hd.iterator;e.next();)e.value.Ob(t)},wl.prototype.computeAdjusting=function(){return this.isAvoiding&&null!==this.diagram&&this.diagram.animationManager.isAnimating?Ul:this.Rk},wl.prototype.Ph=function(){return!0},s.Object.defineProperties(wl.prototype,{fromNode:{get:function(){return this.Ve},set:function(t){var e,n,i,o,r,a=this.Ve;a!==t&&(e=this.fromPort,null!==a&&(this.rf!==a&&sl(a,this,e),Bl(this),this.C(2)),null!==(this.Ve=t)&&this.Ob(t.isVisible()),this.Uf=null,this.Ua(),null!==(n=this.diagram)&&n.Z&&n.partManager.setFromNodeForLink(this,t,a),i=this.fromPort,null!==(o=this.fromPortChanged)&&(r=!0,null!==n&&(r=n.Z,n.Z=!0),o(this,e,i),null!==n&&(n.Z=r)),null!==t&&(this.rf!==t&&al(t,this,i),Ol(this),this.C(1)),this.g("fromNode",a,t),bl(this))}},fromPortId:{get:function(){return this.We},set:function(t){var e,n,i,o,r,a=this.We;a!==t&&(null!==(e=this.fromPort)&&rl(this.fromNode,e),Bl(this),this.We=t,null!==(n=this.fromPort)&&rl(this.fromNode,n),null!==(i=this.diagram)&&(o=this.data,r=i.model,null!==o&&r.pj()&&r.Bw(o,t)),e!==n&&(this.Uf=null,this.Ua(),null!==(o=this.fromPortChanged)&&(r=!0,null!==i&&(r=i.Z,i.Z=!0),o(this,e,n),null!==i&&(i.Z=r))),Ol(this),this.g("fromPortId",a,t))}},fromPort:{get:function(){var t=this.Ve;return null===t?null:t.Kt(this.We)}},fromPortChanged:{get:function(){return this.eo},set:function(t){var e=this.eo;e!==t&&(this.eo=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.rf},set:function(t){var e,n,i,o,r,a=this.rf;a!==t&&(e=this.toPort,null!==a&&(this.Ve!==a&&sl(a,this,e),Bl(this),this.C(2)),null!==(this.rf=t)&&this.Ob(t.isVisible()),this.Uf=null,this.Ua(),null!==(n=this.diagram)&&n.Z&&n.partManager.setToNodeForLink(this,t,a),i=this.toPort,null!==(o=this.toPortChanged)&&(r=!0,null!==n&&(r=n.Z,n.Z=!0),o(this,e,i),null!==n&&(n.Z=r)),null!==t&&(this.Ve!==t&&al(t,this,i),Ol(this),this.C(1)),this.g("toNode",a,t),bl(this))}},toPortId:{get:function(){return this.sf},set:function(t){var e,n,i,o,r,a=this.sf;a!==t&&(null!==(e=this.toPort)&&rl(this.toNode,e),Bl(this),this.sf=t,null!==(n=this.toPort)&&rl(this.toNode,n),null!==(i=this.diagram)&&(o=this.data,r=i.model,null!==o&&r.pj()&&r.Gw(o,t)),e!==n&&(this.Uf=null,this.Ua(),null!==(o=this.toPortChanged)&&(r=!0,null!==i&&(r=i.Z,i.Z=!0),o(this,e,n),null!==i&&(i.Z=r))),Ol(this),this.g("toPortId",a,t))}},toPort:{get:function(){var t=this.rf;return null===t?null:t.Kt(this.sf)}},toPortChanged:{get:function(){return this.kq},set:function(t){var e=this.kq;e!==t&&(this.kq=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return null!==this.O?this.O.ah:we},set:function(t){this.Jc();var e=this.O.ah;e.w(t)||(t=t.G(),this.O.ah=t,this.g("fromSpot",e,t),!e.Mc()&&!t.Mc()||null!==(t=this.fromNode)&&rl(t,this.fromPort),this.Ua())}},fromEndSegmentLength:{get:function(){return null!==this.O?this.O.Zg:NaN},set:function(t){this.Jc();var e=this.O.Zg;e!==t&&(t<0&&f(t,">= 0",wl,"fromEndSegmentLength"),this.O.Zg=t,this.g("fromEndSegmentLength",e,t),this.Ua())}},fromShortLength:{get:function(){return null!==this.O?this.O.$g:NaN},set:function(t){this.Jc();var e=this.O.$g;e!==t&&(this.O.$g=t,this.cc(),this.g("fromShortLength",e,t))}},toSpot:{get:function(){return null!==this.O?this.O.Ch:we},set:function(t){this.Jc();var e=this.O.Ch;e.w(t)||(t=t.G(),this.O.Ch=t,this.g("toSpot",e,t),!e.Mc()&&!t.Mc()||null!==(t=this.toNode)&&rl(t,this.toPort),this.Ua())}},toEndSegmentLength:{get:function(){return null!==this.O?this.O.Ah:NaN},set:function(t){this.Jc();var e=this.O.Ah;e!==t&&(t<0&&f(t,">= 0",wl,"toEndSegmentLength"),this.O.Ah=t,this.g("toEndSegmentLength",e,t),this.Ua())}},toShortLength:{get:function(){return null!==this.O?this.O.Bh:NaN},set:function(t){this.Jc();var e=this.O.Bh;e!==t&&(this.O.Bh=t,this.cc(),this.g("toShortLength",e,t))}},isLabeledLink:{get:function(){return null!==this.hd&&0<this.hd.count}},labelNodes:{get:function(){return null===this.hd?V:this.hd.iterator}},relinkableFrom:{get:function(){return 0!=(1&this.Fa)},set:function(t){var e=0!=(1&this.Fa);e!==t&&(this.Fa^=1,this.g("relinkableFrom",e,t),this.Lb())}},relinkableTo:{get:function(){return 0!=(2&this.Fa)},set:function(t){var e=0!=(2&this.Fa);e!==t&&(this.Fa^=2,this.g("relinkableTo",e,t),this.Lb())}},resegmentable:{get:function(){return 0!=(4&this.Fa)},set:function(t){var e=0!=(4&this.Fa);e!==t&&(this.Fa^=4,this.g("resegmentable",e,t),this.Lb())}},isTreeLink:{get:function(){return 0!=(8&this.Fa)},set:function(t){var e=0!=(8&this.Fa);e!==t&&(this.Fa^=8,this.g("isTreeLink",e,t),null!==this.fromNode&&hl(this.fromNode),null!==this.toNode&&hl(this.toNode))}},path:{get:function(){var t=this.pb();return t instanceof Oh?t:null}},routeBounds:{get:function(){this.wj();var t=this.Rl,e=1/0,n=1/0,i=this.pointsCount;if(0===i)t.h(NaN,NaN,0,0);else{if(1===i)i=this.i(0),e=Math.min(i.x,e),n=Math.min(i.y,n),t.h(i.x,i.y,0,0);else if(2===i){i=this.i(0);var o=this.i(1),e=Math.min(i.x,o.x),n=Math.min(i.y,o.y);t.h(i.x,i.y,0,0),t.Me(o)}else if(this.computeCurve()===Rl&&3<=i&&!this.isOrthogonal)if(e=(o=this.i(0)).x,n=o.y,t.h(e,n,0,0),3===i){i=this.i(1),e=Math.min(i.x,e),n=Math.min(i.y,n);var r=this.i(2);e=Math.min(r.x,e),n=Math.min(r.y,n),Ue.pm(o.x,o.y,i.x,i.y,i.x,i.y,r.x,r.y,.5,t)}else for(r=3;r<i;r+=3){var a=this.i(r-2);i<=r+3&&(r=i-1);var s=this.i(r-1),h=this.i(r);Ue.pm(o.x,o.y,a.x,a.y,s.x,s.y,h.x,h.y,.5,t),e=Math.min(h.x,e),n=Math.min(h.y,n),o=h}else for(o=this.i(0),r=this.i(1),e=Math.min(o.x,r.x),n=Math.min(o.y,r.y),t.h(o.x,o.y,0,0),t.Me(r),o=2;o<i;o++)r=this.i(o),e=Math.min(r.x,e),n=Math.min(r.y,n),t.Me(r);this.vv.h(e-t.x,n-t.y)}return t}},midPoint:{get:function(){return this.wj(),this.computeMidPoint(new ee)}},midAngle:{get:function(){return this.wj(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(null===this.cs){this.dd||Pl(this);for(var t=this.cs=[],e=this.pointsCount,n=0;n<e-1;n++){var i=this.i(n),o=this.i(n+1);Ue.$(i.x,o.x)?(i=o.y-i.y)<0&&(i=-i):Ue.$(i.y,o.y)?(i=o.x-i.x)<0&&(i=-i):i=Math.sqrt(i.Fe(o)),t.push(i)}}return this.cs}},flattenedTotalLength:{get:function(){var t=this.Pu;if(isNaN(t)){for(var e=this.flattenedLengths,n=e.length,i=t=0;i<n;i++)t+=e[i];this.Pu=t}return t}},points:{get:function(){return this.Ab},set:function(t){var e=this.Ab;if(e!==t){var n=null;if(Array.isArray(t)){var i=0==t.length%2;if(i)for(var o=0;o<t.length;o++)if("number"!=typeof t[o]||isNaN(t[o])){i=!1;break}if(i)for(n=new X,i=0;i<t.length/2;i++)o=new ee(t[2*i],t[2*i+1]).freeze(),n.add(o);else{for(i=!0,o=0;o<t.length;o++){var r=t[o];if(!y(r)||"number"!=typeof r.x||isNaN(r.x)||"number"!=typeof r.y||isNaN(r.y)){i=!1;break}}if(i)for(n=new X,i=0;i<t.length;i++)o=t[i],n.add(new ee(o.x,o.y).freeze())}}else if(t instanceof X)for(t=(n=t.copy()).iterator;t.next();)t.value.freeze();else O("Link.points value is not an instance of List or Array: "+t);n.freeze(),this.Ab=n,this.cc(),Pl(this),null!==(t=this.diagram)&&(t.oj||t.undoManager.isUndoingRedoing||t.Xt.add(this),t.animationManager.rc&&(this.qg=n)),this.g("points",e,n)}}},pointsCount:{get:function(){return this.Ab.count}},dd:{get:function(){return 0!=(16&this.Fa)},set:function(t){0!=(16&this.Fa)!==t&&(this.Fa^=16)}},suspendsRouting:{get:function(){return 0!=(32&this.Fa)},set:function(t){0!=(32&this.Fa)!==t&&(this.Fa^=32)}},Ct:{get:function(){return 0!=(64&this.Fa)},set:function(t){0!=(64&this.Fa)!==t&&(this.Fa^=64)}},defaultFromPoint:{get:function(){return this.v},set:function(t){this.v=t.copy()}},defaultToPoint:{get:function(){return this.I},set:function(t){this.I=t.copy()}},isOrthogonal:{get:function(){return 2==(2&this.$j.value)}},isAvoiding:{get:function(){return 4==(4&this.$j.value)}},Ym:{get:function(){return 0!=(128&this.Fa)},set:function(t){0!=(128&this.Fa)!==t&&(this.Fa^=128)}},geometry:{get:function(){return this.Ym||(this.wj(),this.na=this.makeGeometry()),this.na}},firstPickIndex:{get:function(){return!(this.pointsCount<=2)&&(this.isOrthogonal||!Ml(this.computeSpot(!0)))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return 0===t?0:!(t<=2)&&(this.isOrthogonal||!Ml(this.computeSpot(!1)))?t-2:t-1}},adjusting:{get:function(){return this.Rk},set:function(t){var e=this.Rk;e!==t&&(this.Rk=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.Gn},set:function(t){var e=this.Gn;e!==t&&(this.Gn=t,this.cc(),this.g("corner",e,t))}},curve:{get:function(){return this.In},set:function(t){var e=this.In;e!==t&&(this.In=t,this.Ua(),this.cc(),El(this,e===Il||e===Vl||t===Il||t===Vl),this.g("curve",e,t))}},curviness:{get:function(){return this.Jn},set:function(t){var e=this.Jn;e!==t&&(this.Jn=t,this.Ua(),this.cc(),this.g("curviness",e,t))}},routing:{get:function(){return this.$j},set:function(t){var e=this.$j;e!==t&&(this.$j=t,this.Uf=null,this.Ua(),El(this,2==(2&e.value)||2==(2&t.value)),this.g("routing",e,t))}},smoothness:{get:function(){return this.Xp},set:function(t){var e=this.Xp;e!==t&&(this.Xp=t,this.cc(),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(null!==t&&t.model.pj())return t.model.Vb(this.data)}}}),wl.prototype.invalidateOtherJumpOvers=wl.prototype.Nq,wl.prototype.findClosestSegment=wl.prototype.Nz,wl.prototype.updateRoute=wl.prototype.wj,wl.prototype.invalidateRoute=wl.prototype.Ua,wl.prototype.rollbackRoute=wl.prototype.xw,wl.prototype.commitRoute=wl.prototype.xf,wl.prototype.startRoute=wl.prototype.Th,wl.prototype.clearPoints=wl.prototype.lk,wl.prototype.removePoint=wl.prototype.sw,wl.prototype.addPointAt=wl.prototype.vf,wl.prototype.addPoint=wl.prototype.Be,wl.prototype.insertPointAt=wl.prototype.m,wl.prototype.insertPoint=wl.prototype.rA,wl.prototype.setPointAt=wl.prototype.K,wl.prototype.setPoint=wl.prototype.od,wl.prototype.getPoint=wl.prototype.i,wl.prototype.getOtherPort=wl.prototype.iA,wl.prototype.getOtherNode=wl.prototype.Iq;var Gl=new j(wl,"Normal",1),ji=new j(wl,"Orthogonal",2),Cn=new j(wl,"AvoidsNodes",6),jl=new j(wl,"AvoidsNodesStraight",7),zl=new j(wl,"None",0),Rl=new j(wl,"Bezier",9),Il=new j(wl,"JumpGap",10),Vl=new j(wl,"JumpOver",11),Ul=new j(wl,"End",17),ql=new j(wl,"Scale",18),Hl=new j(wl,"Stretch",19),Yl=new j(wl,"OrientAlong",21),Kl=new j(wl,"OrientPlus90",22),Xl=new j(wl,"OrientMinus90",23),Wl=new j(wl,"OrientOpposite",24),$l=new j(wl,"OrientUpright",25),Jl=new j(wl,"OrientPlus90Upright",26),Zl=new j(wl,"OrientMinus90Upright",27),Ql=new j(wl,"OrientUpright45",28),td=16,ed=14,nd=8;function id(t,e,n,i){J(this),this.oe=this.ks=!1,this.$t=t,this.Jy=e,this.jw=n,this.Ky=i,this.links=[]}function od(){J(this),this.Sy=this.group=null,this.Rt=!0,this.abort=!1,this.wd=this.vd=1,this.Oo=this.No=-1,this.fc=this.ec=8,this.Qb=null,this.$i=this.Zi=0,this.Ty=11,this.Dy=124}function rd(t,e,n){return t.vd<=e&&e<=t.No&&t.wd<=n&&n<=t.Oo}function ad(t,e,n){return rd(t,e,n)?(e-=t.vd,e/=t.ec,n-=t.wd,n/=t.fc,t.Qb[0|e][0|n]):pd}function sd(t){if(null!==t.Qb)for(var e=0;e<=t.Zi;e++)for(var n=t.Qb[e],i=0;i<=t.$i;i++)n[i]>=gd&&(n[i]=pd)}function hd(t,e,n,i,o,r,a,s,h){if(!(e<r||a<e||n<s||h<n)){var u=0|e,l=0|n,d=t.Qb[u][l];if(gd<=d&&d<fd)for(o?l+=i:u+=i,d+=1;r<=u&&u<=a&&s<=l&&l<=h&&!(d>=t.Qb[u][l]);)t.Qb[u][l]=d,d+=1,o?l+=i:u+=i;if(u=o?l:u,o)if(0<i)for(n+=i;n<u;n+=i)hd(t,e,n,1,!o,r,a,s,h),hd(t,e,n,-1,!o,r,a,s,h);else for(n+=i;u<n;n+=i)hd(t,e,n,1,!o,r,a,s,h),hd(t,e,n,-1,!o,r,a,s,h);else if(0<i)for(e+=i;e<u;e+=i)hd(t,e,n,1,!o,r,a,s,h),hd(t,e,n,-1,!o,r,a,s,h);else for(e+=i;u<e;e+=i)hd(t,e,n,1,!o,r,a,s,h),hd(t,e,n,-1,!o,r,a,s,h)}}function ud(t,e,n,i,o,r,a,s,h){e|=0,n|=0;var u=cd,l=gd;for(t.Qb[e][n]=l;u===cd&&r<e&&e<a&&s<n&&n<h;)l+=1,t.Qb[e][n]=l,o?n+=i:e+=i,u=t.Qb[e][n]}function ld(t,e,n,i,o,r,a,s,h){e|=0,n|=0;var u=cd,l=fd;for(t.Qb[e][n]=l;u===cd&&r<e&&e<a&&s<n&&n<h;)t.Qb[e][n]=l,o?n+=i:e+=i,u=t.Qb[e][n]}function dd(t,e,n,i,o,r,a){if(null!==t.Qb){t.abort=!1;var s=e.x,h=e.y;if(rd(t,s,h)){s-=t.vd,s/=t.ec,h-=t.wd,h/=t.fc;var u=i.x,l=i.y;if(rd(t,u,l))if(u-=t.vd,u/=t.ec,l-=t.wd,l/=t.fc,Math.abs(s-u)<=1&&Math.abs(h-l)<=1)t.abort=!0;else{var d=r.x;i=r.y,e=r.x+r.width;var c=r.y+r.height;d-=t.vd,d/=t.ec,i-=t.wd,i/=t.fc,e-=t.vd,e/=t.ec,c-=t.wd,c/=t.fc,r=Math.max(0,Math.min(t.Zi,0|d)),e=Math.min(t.Zi,Math.max(0,0|e)),d=Math.max(0,Math.min(t.$i,0|i)),c=Math.min(t.$i,Math.max(0,0|c)),h|=0,u|=0,l|=0;var g=0===n||90===n?1:-1;if(n=90===n||270===n,(i=t.Qb)[s|=0][h]===cd?(ud(t,s,h,g,n,r,e,d,c),ud(t,s,h,1,!n,r,e,d,c),ud(t,s,h,-1,!n,r,e,d,c)):ud(t,s,h,g,n,s,h,s,h),i[u][l]===cd?(ld(t,u,l,0===o||90===o?1:-1,90===o||270===o,r,e,d,c),ld(t,u,l,1,!(90===o||270===o),r,e,d,c),ld(t,u,l,-1,!(90===o||270===o),r,e,d,c)):ld(t,u,l,g,n,u,l,u,l),n=be(),a&&function t(e,n,i,o,r,a,s){for(var h=e.Qb,u=n,l=i;;){if(u===r&&l===a)return!0;var d=u,c=l;if(0===o){if(!(d<r))break;d++}else if(90===o){if(!(c<a))break;c++}else if(180===o){if(!(r<d))break;d--}else{if(!(a<c))break;c--}var g=h[d][c];if(0===g||g===md)break;u=d,l=c}for(;;){if(c=u,g=l,0===(d=o)||90!==o&&180===o?g<a?(d=90,g++):a<g&&(d=270,g--):c<r?(d=0,c++):r<c&&(d=180,c--),c=h[c][g],d!==o&&0!==c&&c!==md){if(s.push(u),s.push(l),t(e,u,l,d,r,a,s))return!0;s.pop(),s.pop()}if(h[u][l]=md,0===o){if(u===n)return!1;u--}else if(90===o){if(l===i)return!1;l--}else if(180===o){if(u===n)return!1;u++}else{if(l===i)return!1;l++}}}(t,u,l,o,s,h,n))for(n[0]===u&&n[1]===l||(n.unshift(l),n.unshift(u)),n[n.length-2]===s&&n[n.length-1]===h||(n.push(s),n.push(h)),t=gd,o=n[n.length-2],a=n[n.length-1],i[o][a]=t++,r=n.length-4;0<=r;r-=2)for(o=n[r+2],a=n[r+3],e=n[r],u=n[r+1];o<e?o++:e<o?o--:a<u?a++:u<a&&a--,i[o][a]=t++,o!==e||a!==u;);else hd(t,s,h,1,!1,r,e,d,c),hd(t,s,h,-1,!1,r,e,d,c),hd(t,s,h,1,!0,r,e,d,c),hd(t,s,h,-1,!0,r,e,d,c);Se(n)}}}}wl.className="Link",wl.Normal=Gl,wl.Orthogonal=ji,wl.AvoidsNodes=Cn,wl.AvoidsNodesStraight=jl,wl.None=zl,wl.Bezier=Rl,wl.JumpGap=Il,wl.JumpOver=Vl,wl.End=Ul,wl.Scale=ql,wl.Stretch=Hl,wl.OrientAlong=Yl,wl.OrientPlus90=Kl,wl.OrientMinus90=Xl,wl.OrientOpposite=Wl,wl.OrientUpright=$l,wl.OrientPlus90Upright=Jl,wl.OrientMinus90Upright=Zl,wl.OrientUpright45=Ql,wl.EndSegmentStep=8,wl.CurvinessStart=td,wl.SpacingMin=ed,wl.OrthoShortCut=nd,wl.AvoidanceCell=8,wl.AvoidanceLimit=999,id.prototype.ym=function(){var t;this.ks||0<(t=this.links).length&&(null!==(t=t[0].diagram)&&(t.Ru.add(this),this.oe=t.undoManager.isUndoingRedoing)),this.ks=!0},id.prototype.Tw=function(){var t,e,n;this.ks&&(this.ks=!1,0<(t=this.links).length&&(n=null===(n=(e=t[0]).diagram)||n.oj&&!this.oe,this.oe=!1,e.arrangeBundledLinks(t,n),1===t.length&&(e.Lf=null,t.length=0)),0===t.length&&(t=this.$t,null!==this&&null!==t.Re&&t.Re.remove(this),t=this.jw,null!==this&&null!==t.Re&&t.Re.remove(this)))},id.className="LinkBundle",od.prototype.initialize=function(t){if(!(t.width<=0||t.height<=0)){var e=t.y,n=t.x+t.width,i=t.y+t.height;if(this.vd=Math.floor((t.x-this.ec)/this.ec)*this.ec,this.wd=Math.floor((e-this.fc)/this.fc)*this.fc,this.No=Math.ceil((n+2*this.ec)/this.ec)*this.ec,this.Oo=Math.ceil((i+2*this.fc)/this.fc)*this.fc,t=1+(0|Math.ceil((this.No-this.vd)/this.ec)),e=1+(0|Math.ceil((this.Oo-this.wd)/this.fc)),null===this.Qb||this.Zi<t-1||this.$i<e-1){for(n=[],i=0;i<=t;i++)n[i]=new Uint32Array(e);this.Qb=n,this.Zi=t-1,this.$i=e-1}if(t=pd,null!==this.Qb)for(e=0;e<=this.Zi;e++)if((n=this.Qb[e]).fill)n.fill(t);else for(i=0;i<=this.$i;i++)n[i]=t}},od.prototype.zk=function(t,e,n,i){if(t>this.No||t+n<this.vd||e>this.Oo||e+i<this.wd)return!0;t=(t-this.vd)/this.ec|0,e=(e-this.wd)/this.fc|0,n=Math.max(0,n)/this.ec+1|0;var o=Math.max(0,i)/this.fc+1|0;if(t<0&&(n+=t,t=0),e<0&&(o+=e,e=0),n<0||o<0)return!0;for(i=0|Math.min(t+n-1,this.Zi),n=0|Math.min(e+o-1,this.$i);t<=i;t++){o=this.Qb[t];for(var r=e;r<=n;r++)if(o[r]===cd)return!1}return!0},s.Object.defineProperties(od.prototype,{bounds:{get:function(){return new ne(this.vd,this.wd,this.No-this.vd,this.Oo-this.wd)}},xq:{get:function(){return this.ec},set:function(t){0<t&&t!==this.ec&&(this.ec=t,this.initialize(this.bounds))}},wq:{get:function(){return this.fc},set:function(t){0<t&&t!==this.fc&&(this.fc=t,this.initialize(this.bounds))}}});var cd=0,gd=1,fd=999999,pd=fd+1,md=fd+2;function yd(){J(this),this.port=this.node=null,this.$d=[],this.Sq=!1}function vd(t,e){var n=t.$d;if(0===n.length){t:if(!t.Sq){n=t.Sq,t.Sq=!0;var i=null,o=t.node,r=o instanceof pl?o:null;if(null===r||r.isSubGraphExpanded)var a=o.isTreeExpanded?o.findLinksConnected(t.port.portId):o.my();else{if(!r.actualBounds.u()){t.Sq=n;break t}a=(i=r).Qv()}r=t.$d.length=0;var s=t.port.ga(Yt,ee.alloc()),h=t.port.ga(Qt,ee.alloc());for((o=ne.allocAt(s.x,s.y,0,0)).Me(h),ee.free(s),ee.free(h),s=ee.allocAt(o.x+o.width/2,o.y+o.height/2),h=t.port.lj(),a=a.iterator;a.next();){var u,l,d,c,g=a.value;g.isVisible()&&g.fromPort!==g.toPort&&(u=g.fromPort===t.port||null!==g.fromNode&&g.fromNode.Cd(i),!(l=g.computeSpot(u,t.port)).Mc()||null===(u=u?g.toPort:g.fromPort)||null!==(d=u.part)&&(null!==(c=d.findVisibleNode())&&c!==d&&(u=(d=c).port),u=g.computeOtherPoint(d,u),d=s.Sa(u),(d-=h)<0?d+=360:360<=d&&(d-=360),0===(l=function(t,e,n,i){switch(e=e.offsetY){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<n?270:90;case 6:return 90<n&&n<=270?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return t<n&&n<=180+t?180:270;case 5:return 180-t<n&&n<=360-t?270:0;case 12:return t<n&&n<=180+t?90:0;case 10:return 180-t<n&&n<=360-t?180:90;case 7:return 90<n&&n<=180+t?180:180+t<n&&n<=360-t?270:0;case 13:return 180<n&&n<=360-t?270:t<n&&n<=180?90:0;case 14:return t<n&&n<=180-t?90:180-t<n&&n<=270?180:0;case 11:return 180-t<n&&n<=180+t?180:180+t<n?270:90}return i&&15!==e&&((n-=15)<0&&(n+=360)),t<n&&n<180-t?90:180-t<=n&&n<=180+t?180:180+t<n&&n<360-t?270:0}(o,l,d,g.isOrthogonal))?(l=4,180<d&&(d-=360)):90===l?(l=8,270<d&&(d-=360)):180===l?l=2:(l=1,d<90&&(d+=360)),void 0===(c=t.$d[r])?(c=new wd(g,d,l),t.$d[r]=c):(c.link=g,c.angle=d,c.Ac=l),c.lw.set(u),r++))}for(ee.free(s),t.$d.sort(yd.prototype.l),h=t.$d.length,i=-1,r=s=0;r<h;r++)void 0!==(a=t.$d[r])&&(a.Ac!==i&&(i=a.Ac,s=0),a.Jq=s,s++);for(i=-1,s=0,r=h-1;0<=r;r--)void 0!==(h=t.$d[r])&&(h.Ac!==i&&(i=h.Ac,s=h.Jq+1),h.qm=s);if(r=t.$d,l=t.port,i=t.node.portSpreading,s=ee.alloc(),h=ee.alloc(),a=ee.alloc(),g=ee.alloc(),l.ga(Yt,s),l.ga(Kt,h),l.ga(Qt,a),l.ga(Jt,g),c=d=u=l=0,i===fl)for(var f=0;f<r.length;f++){var p=r[f];if(null!==p){var m=p.link.computeThickness();switch(p.Ac){case 8:d+=m;break;case 2:c+=m;break;case 1:l+=m;break;default:u+=m}}}for(var y=f=0,v=1,w=p=0,m=0;m<r.length;m++){var b=r[m];if(null!==b){if(f!==b.Ac){switch(f=b.Ac){case 8:var S=a,y=g;break;case 2:S=g,y=s;break;case 1:S=s,y=h;break;default:S=h,y=a}switch(p=y.x-S.x,w=y.y-S.y,f){case 8:d>Math.abs(p)?(v=Math.abs(p)/d,d=Math.abs(p)):v=1;break;case 2:c>Math.abs(w)?(v=Math.abs(w)/c,c=Math.abs(w)):v=1;break;case 1:l>Math.abs(p)?(v=Math.abs(p)/l,l=Math.abs(p)):v=1;break;default:u>Math.abs(w)?(v=Math.abs(w)/u,u=Math.abs(w)):v=1}y=0}var x=b.Qq;if(i===fl){switch(b=b.link.computeThickness(),b*=v,x.set(S),f){case 8:x.x=S.x+p/2+d/2-y-b/2;break;case 2:x.y=S.y+w/2+c/2-y-b/2;break;case 1:x.x=S.x+p/2-l/2+y+b/2;break;default:x.y=S.y+w/2-u/2+y+b/2}y+=b}else{var P=.5;i===gl&&(P=(b.Jq+1)/(b.qm+1)),x.x=S.x+p*P,x.y=S.y+w*P}}}for(ee.free(s),ee.free(h),ee.free(a),ee.free(g),S=t.$d,r=0;r<S.length;r++)null!==(i=S[r])&&(i.Ov=t.computeEndSegmentLength(i));t.Sq=n,ne.free(o)}n=t.$d}for(t=0;t<n.length;t++)if(null!==(o=n[t])&&o.link===e)return o;return null}function wd(t,e,n){this.link=t,this.angle=e,this.Ac=n,this.lw=new ee,this.qm=this.Jq=0,this.Qq=new ee,this.Ov=0}function bd(){this.Ch=this.ah=we,this.Bh=this.$g=this.Ah=this.Zg=NaN,this.iq=this.bo=null,this.jq=this.co=1/0}function Sd(){J(this),this.v=this.B=null,this.yi=this.to=!0,this.yo=!1,this.mn=new ee(0,0).freeze(),this.vo=!0,this.un=this.uo=null,this.xo=!1,this.l=null,this.I=0,this.Po=this.oq=null,this.wt=!1,this.yg=this.bk=null,this.lt=!1}function xd(t,e,n,i,o,r,a,s){for(n=n.iterator;n.next();){var h=n.value;i&&!h.isTopLevel||null!==o&&!o(h)||!h.canLayout()||(r&&h instanceof el?h.isLinkLabel||(h instanceof pl&&null===h.layout?xd(t,e,h.memberParts,!1,o,r,a,s):(Pd(h),e.add(h))):a&&h instanceof wl?e.add(h):!s||!h.Wb()||h instanceof el||(Pd(h),e.add(h)))}}function Pd(t){var e=t.actualBounds;(0===e.width||0===e.height||isNaN(e.width)||isNaN(e.height))&&t.Ta()}function kd(t,e){var n;null!==t.workerStateChanged&&(n={key:t.group?t.group.key:null},void 0!==e&&(n.time=e),null!==t.bk&&(n.running=Ld(t.bk)),null!==t.yg&&(n.waiting=Ld(t.yg)),t.workerStateChanged(n,t))}function Ld(t){return{vertexes:t.vertexes.count,edges:t.edges.count}}function Md(t,e){var n=_d(t);if(!n)throw Error("Unknown Layout class: "+t);if(e)for(var i in e)n[i]=e[i]}function _d(t){var e,n=null;return"function"==typeof t?(n=Cd.get(t))||(e=P(t),(n=Cd.get(e))||((n=new Fd).Kv=t,n.name=e,n.l=t.name,n.zy=Dd,Cd.set(e,n),Cd.set(t,n),Cd.set(t.name,n))):"string"==typeof t&&(n=Cd.get(t)),n}function Nd(t,e){t.wt=!0;var n=_d(t.constructor),i=Ad(t,e,!0);i._GoJS="_GoJS",n.Ne.postMessage(i),n.Bm.set(Q(t),t),t.bk=e}function Ad(t,e,n){t.onNetworkSerialization(1,n,e,null);var i={};t.serializeLayoutProperties(i,n);var o=[];e.vertexes.each(function(t){var e={};t.serializeVertexProperties(e,n),o.push(e)});var r=[];return e.edges.each(function(t){var e={};t.serializeEdgeProperties(e,n),r.push(e)}),i={id:n?Q(t):t.id,layout:P(t.constructor),p:i,cB:o,Lz:r},t.onNetworkSerialization(2,n,e,i),i}function Td(t,e,n){n&&(t.id=e.id);var i=t.diagram,o=t.createNetwork();t.onNetworkSerialization(3,n,o,e);var r=e.cB,a=new at;r&&r.forEach(function(t){var e=null;null===t.key||null===i||n||(e=i.Cb(t.key)),null!==e?e=o.jk(e):(e=o.createVertex(),null!==t.key&&(e.data=e),o.Bg(e)),n&&null!==e.data&&(e.data.Ci=t.key),a.set(t.id,e)});var s=e.Lz,h=new at;return s&&s.forEach(function(t){var e=null;null===t.key||null===i||n||(e=i.findLinkForKey(t.key)),null!==e?e=o.Tx(e):(e=o.createEdge(),null!==t.key&&(e.data=e),o.nm(e)),n&&null!==e.data&&(e.data.Ci=t.key),h.set(t.id,e)}),t.deserializeLayoutProperties(e.p,a,h,n),r&&r.forEach(function(t){var e=a.get(t.id);e&&e.Aq(t,a,h,n)}),s&&s.forEach(function(t){var e=h.get(t.id);e&&e.deserializeEdgeProperties(t,a,h,n)}),t.onNetworkSerialization(4,n,o,e),o}od.className="PositionArray",yd.prototype.toString=function(){for(var t=this.$d,e=this.node.toString()+" "+t.length.toString()+":",n=0;n<t.length;n++){var i=t[n];null!==i&&(e+="\n  "+i.toString())}return e},yd.prototype.ym=function(){this.$d.length=0},yd.prototype.l=function(t,e){return t===e?0:null===t?-1:null===e?1:t.Ac<e.Ac?-1:t.Ac>e.Ac?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},yd.prototype.computeEndSegmentLength=function(t){var e=t.link,n=e.computeEndSegmentLength(this.node,this.port,Ht,e.fromPort===this.port),i=t.Jq;if(i<0)return n;var o=t.qm;if(o<=1||!e.isOrthogonal)return n;e=t.lw;var r=t.Qq;return 2!==t.Ac&&8!==t.Ac||(i=o-1-i),((t=2===t.Ac||4===t.Ac)?e.y<r.y:e.x<r.x)?n+8*i:(t?e.y===r.y:e.x===r.x)?n:n+8*(o-1-i)},yd.className="Knot",wd.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.Ac.toString()+":"+this.Jq.toString()+"/"+this.qm.toString()+" "+this.Qq.toString()+" "+this.Ov.toString()+" "+this.lw.toString()},wd.className="LinkInfo",bd.prototype.copy=function(){var t=new bd;return t.ah=this.ah.G(),t.Ch=this.Ch.G(),t.Zg=this.Zg,t.Ah=this.Ah,t.$g=this.$g,t.Bh=this.Bh,t.bo=this.bo,t.iq=this.iq,t.co=this.co,t.jq=this.jq,t},bd.className="LinkSettings",Sd.prototype.cloneProtected=function(t){t.to=this.to,t.yi=this.yi,t.yo=this.yo,t.mn.assign(this.mn),t.vo=this.vo,t.uo=this.uo,t.un=this.un,t.xo=!0,t.Po=this.Po,t.oq=this.oq},Sd.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Sd.prototype.serializeLayoutProperties=function(t){t.arrangementOrigin={x:this.arrangementOrigin.x,y:this.arrangementOrigin.y},t.isRouting=this.isRouting},Sd.prototype.deserializeLayoutProperties=function(t){null!==t&&(this.arrangementOrigin=new ee(t.arrangementOrigin.x,t.arrangementOrigin.y),this.isRouting=t.isRouting)},Sd.prototype.hb=function(){},Sd.prototype.toString=function(){var t=P(this.constructor);return t+="(",null!==this.group&&(t+=" in "+this.group),null!==this.diagram&&(t+=" for "+this.diagram),t+")"},Sd.prototype.C=function(){var t,e;this.isValidLayout&&(null===(t=this.diagram)||t.undoManager.isUndoingRedoing||!(e=t.animationManager).isTicking&&(e.defaultAnimation.isAnimating&&e.Nc(),this.isOngoing&&t.oj||this.isInitial&&!t.oj)&&(this.isValidLayout=!1,t.Db()))},Sd.prototype.createNetwork=function(){return new Od(this)},Sd.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof Mo?(e.Ag(t.nodes,!0),e.Ag(t.links,!0)):t instanceof pl?e.Ag(t.memberParts):e.Ag(t.iterator),e},Sd.prototype.updateParts=function(){if(this.isValidLayout=!0,!this.workerLayout()){var t=this.diagram;if(null===t&&null!==this.network)for(var e=this.network.vertexes.iterator;e.next();){var n=e.value.node;if(null!==n&&null!==(t=n.diagram))break}try{null!==t&&t.va("Layout"),this.commitLayout()}finally{null!==t&&t.Wa("Layout")}}},Sd.prototype.commitLayout=function(){if(null!==this.network){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},Sd.prototype.doLayout=function(t){var e=new $;t instanceof Mo?(xd(this,e,t.nodes,!0,this.Rh,!0,!1,!0),xd(this,e,t.parts,!0,this.Rh,!0,!1,!0)):t instanceof pl?xd(this,e,t.memberParts,!1,this.Rh,!0,!1,!0):e.addAll(t.iterator),0<e.count&&(null!==(t=this.diagram)&&t.va("Layout"),this.doMinimalNoNetworkLayout(e),null!==t&&t.Wa("Layout")),this.isValidLayout=!0},Sd.prototype.doMinimalNoNetworkLayout=function(t){var e=Math.ceil(Math.sqrt(t.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var n=this.arrangementOrigin.x,i=n,o=this.arrangementOrigin.y,r=0,a=0;for(t=t.iterator;t.next();){var s=t.value;Pd(s);var h=(u=s.measuredBounds).width,u=u.height;s.moveTo(i,o),s instanceof pl&&(s.Rh=!1),i+=Math.max(h,50)+20,a=Math.max(a,Math.max(u,50)),e-1<=r?(i=n,o+=a+20,a=r=0):r++}},Sd.prototype.doMinimalNetworkLayout=function(){var t=Math.ceil(Math.sqrt(this.network.vertexes.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);for(var e=this.arrangementOrigin.x,n=e,i=this.arrangementOrigin.y,o=0,r=0,a=this.network.vertexes.iterator;a.next();){var s,h,u=a.value.node;null===u||u instanceof wl||(Pd(u),!this.Rh(u))||(s=(h=u.measuredBounds).width,h=h.height,u.moveTo(n,i),u instanceof pl&&(u.Rh=!1),n+=Math.max(s,50)+20,r=Math.max(r,Math.max(h,50)),t-1<=o?(n=e,i+=r+20,r=o=0):o++)}},Sd.prototype.Rh=function(t){return!(t.location.u()&&!(t instanceof pl&&t.Rh))},Sd.prototype.mj=function(t,e){var n=this.boundsComputation;return null!==n?n(t,this,e=e||new ne):e?(e.set(t.actualBounds),e):t.actualBounds},Sd.prototype.Yx=function(t){var e=new $;return t instanceof Mo?(xd(this,e,t.nodes,!0,null,!0,!0,!0),xd(this,e,t.links,!0,null,!0,!0,!0),xd(this,e,t.parts,!0,null,!0,!0,!0)):xd(this,e,t instanceof pl?t.memberParts:t.iterator,!1,null,!0,!0,!0),e},Sd.prototype.initialOrigin=function(t){var e=this.group;if(null===e)return t;var n=e.position.copy();return(isNaN(n.x)||isNaN(n.y))&&n.set(t),null!==(e=e.placeholder)&&(n=e.ga(Yt),(isNaN(n.x)||isNaN(n.y))&&n.set(t),t=e.padding,n.x+=t.left,n.y+=t.top),n},Sd.prototype.mayUseWorker=function(){return!!this.mayUseWorkerFunction&&this.mayUseWorkerFunction(this)},Sd.prototype.workerLayout=function(){return!1},Sd.prototype.uz=function(){var t=_d(this.constructor);t&&(null!==t.Ne&&t.Ne.terminate(),t.Ne=null,t.Bm.iteratorValues.each(function(t){t.wt=!1,t.bk=null,t.yg=null,t.lt=!1,kd(t)}),t.Bm.clear())},Sd.prototype.Sw=function(){if("undefined"==typeof Worker||!Ed||"undefined"==typeof self||void 0!==self.DedicatedWorkerGlobalScope)return!1;if(!this.mayUseWorker())return this.wt&&(this.lt=!0,this.yg=this.bk=null,kd(this)),!1;var o=_d(this.constructor);return null!==o&&(null===o.Ne&&(o.Ne=new Worker(Ed),o.Ne.onerror=function(t){t.preventDefault(),p("Worker Error at: "+t.filename+" "+t.lineno+" "+t.colno+"\n  "+t.message)},o.Ne.l=function(t){p("Worker serialization error: "+t)},o.Ne.onmessage=function(t){var e;if("_GoJS"===(n=t.data)._GoJS)if(n.version)p("GoJS v"+Mo.version+"  Worker v"+n.version);else if(t=o.Bm.get(n.id)){if(o.Bm.remove(n.id),t.wt=!1,t.bk=null,t.lt?(t.lt=!1,t.yg=null):(e=Td(t,n,!1),t.network=e,t.updateParts(),t.network=null,t.isValidLayout=!0),kd(t,n.time),null!==(n=t.yg))t.yg=null;else for(e=o.Bm.iteratorValues;e.next();){var n,i=e.value;if(null!==(n=i.yg)){i.yg=null;break}}null!==n&&Nd(t,n)}},o.Ne.postMessage({_GoJS:"_GoJS",url:o.zy}),Array.isArray(o.scripts)&&o.scripts.forEach(function(t){o.Ne.postMessage({_GoJS:"_GoJS",url:t})}),o.Ne.postMessage({_GoJS:"_GoJS",version:-1})),null!==this.bk?this.yg=this.network:Nd(this,this.network),kd(this),this.doMinimalNetworkLayout(),this.network=null,this.isValidLayout=!0)},Sd.prototype.onNetworkSerialization=function(){},s.Object.defineProperties(Sd.prototype,{diagram:{get:function(){return this.B},set:function(t){this.B=t}},group:{get:function(){return this.v},set:function(t){this.v!==t&&(null!==(this.v=t)&&(this.B=t.diagram))}},isOngoing:{get:function(){return this.to},set:function(t){this.to!==t&&(this.to=t)}},isInitial:{get:function(){return this.yi},set:function(t){(this.yi=t)||(this.xo=!0)}},isViewportSized:{get:function(){return this.yo},set:function(t){this.yo!==t&&(this.yo=t)&&this.C()}},isRouting:{get:function(){return this.vo},set:function(t){this.vo!==t&&(this.vo=t)}},isRealtime:{get:function(){return this.uo},set:function(t){this.uo!==t&&(this.uo=t)}},isValidLayout:{get:function(){return this.xo},set:function(t){this.xo!==t&&((this.xo=t)||null!==(t=this.diagram)&&(t.Ng=!0))}},network:{get:function(){return this.l},set:function(t){this.l!==t&&(null!==(this.l=t)&&(t.layout=this))}},boundsComputation:{get:function(){return this.un},set:function(t){this.un!==t&&(this.un=t,this.C())}},arrangementOrigin:{get:function(){return this.mn},set:function(t){this.mn.w(t)||(this.mn.assign(t),this.C())}},id:{get:function(){return this.I},set:function(t){this.I=t}},mayUseWorkerFunction:{get:function(){return this.Po},set:function(t){this.Po!==t&&(this.Po=t)}},workerStateChanged:{get:function(){return this.oq},set:function(t){this.oq!==t&&(this.oq=t)}}}),Sd.prototype.useWorker=Sd.prototype.Sw,Sd.declareWorkerLayout=Md,Sd.prototype.cancelWorker=Sd.prototype.uz,Sd.prototype.collectParts=Sd.prototype.Yx,Sd.prototype.getLayoutBounds=Sd.prototype.mj,Sd.prototype.invalidateLayout=Sd.prototype.C;var Cd=new at,Dd="object"===_typeof(d.document)&&d.document.currentScript?d.document.currentScript.src:"",Ed="undefined"!=typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof Blob?URL.createObjectURL(new Blob(["self.onmessage=function(e){if(e.data.url){\nimportScripts(e.data.url);}}"],{type:"text/javascript"})):"";function Fd(){this.Kv=null,this.zy=this.l=this.name="",this.scripts=[],this.Ne=null,this.Bm=new at}function Od(t){J(this),this.kc=t,this.tf=new $,this.he=new $,this.au=new at,this.Wt=new at}function Bd(t,e){if(null!==e){var n=t.tf.remove(e);return n&&(null!==(e=e.node)&&t.au.remove(e)),n}}function Gd(t,e){var n;null!==e&&(t.he.add(e),null!==(n=e.link)&&null===t.Cq(n)&&t.Wt.add(n,e),e.network=t)}function jd(t,e){null!==e&&t.he.remove(e)&&(null!==(e=e.link)&&t.Wt.remove(e))}function zd(t){J(this),this.Qc=t,this.l=new ne(0,0,10,10).freeze(),this.v=new ee(5,5).freeze(),this.Li=this.lb=null,this.Le=new X,this.Ee=new X}function Rd(t,e){return t=t.Li,e=e.Li,t?e?(t=t.text)<(e=e.text)?-1:e<t?1:0:1:null!==e?-1:0}function Id(t){J(this),this.Pc=t,this.vg=this.Wf=this.Hl=this.lb=null}function Vd(){Sd.call(this),this.isViewportSized=!0,this.pq=this.qq=NaN,this.Qg=new xe(NaN,NaN).freeze(),this.kf=new xe(10,10).freeze(),this.yb=Hd,this.Eb=Yd,this.Yc=$d,this.Tc=Ud}function Ud(t,e){return(t=t.text)<(e=e.text)?-1:e<t?1:0}Sd.className="Layout",Sd.GoJSScriptURL=Dd,Sd.declareWorkerLayout=Md,"undefined"!=typeof self&&void 0!==self.DedicatedWorkerGlobalScope&&"undefined"!=typeof self&&void 0!==self.DedicatedWorkerGlobalScope&&(self.onmessage=function(t){if("_GoJS"===(t=t.data)._GoJS)if(t.url)importScripts(t.url);else if(t.version)self.postMessage({_GoJS:"_GoJS",version:Mo.version},void 0);else{var e=performance.now(),n=null;t.layout&&(n=_d(t.layout));var i=null;if(n&&n.Kv&&(i=new n.Kv),!i)throw Error("no registered Worker Layout: "+t.layout);i.network=Td(i,t,!0),i.workerLayout=function(){var t=Ad(i,i.network,!1);return t._GoJS="_GoJS",t.time=performance.now()-e,self.postMessage(t,void 0),!0},i.doLayout(new X)}}),Od.prototype.clear=function(){if(this.tf)for(var t=this.tf.iterator;t.next();)t.value.clear();if(this.he)for(t=this.he.iterator;t.next();)t.value.clear();this.tf=new $,this.he=new $,this.au=new at,this.Wt=new at},Od.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutNetwork"+(null!==this.layout?"("+this.layout.toString()+")":"");if(t<=0)return e;if(e+=" vertexes: "+this.tf.count+" edges: "+this.he.count,1<t){for(var n=this.tf.iterator;n.next();)e+="\n    "+n.value.toString(t-1);for(n=this.he.iterator;n.next();)e+="\n    "+n.value.toString(t-1)}return e},Od.prototype.createVertex=function(){return new zd(this)},Od.prototype.createEdge=function(){return new Id(this)},Od.prototype.Ag=function(t,e,n){if(null!==t){for(void 0===e&&(e=!1),void 0===n&&(n=null),null===n&&(n=function(t){if(t instanceof el)return!t.isLinkLabel;if(t instanceof wl){var e=t.fromNode;return null===e||e.isLinkLabel?!1:null!==(t=t.toNode)&&!t.isLinkLabel}return!1}),t=t.iterator;t.next();){var i=t.value;i instanceof el&&(!e||i.isTopLevel)&&i.canLayout()&&n(i)&&(i instanceof pl&&null===i.layout?this.Ag(i.memberParts,!1):null===this.kj(i)&&((r=this.createVertex()).node=i,this.Bg(r)))}for(t.reset();t.next();){var o,r;(i=t.value)instanceof wl&&(!e||i.isTopLevel)&&i.canLayout()&&n(i)&&null===this.Cq(i)&&(o=i.fromNode,r=i.toNode,null!==o&&null!==r&&o!==r&&(o=this.findGroupVertex(o),r=this.findGroupVertex(r),null!==o&&null!==r&&this.Ak(o,r,i)))}}},Od.prototype.findGroupVertex=function(t){if(null===t)return null;var e=t.findVisibleNode();if(null===e)return null;if(null!==(t=this.kj(e)))return t;for(e=e.containingGroup;null!==e;){if(null!==(t=this.kj(e)))return t;e=e.containingGroup}return null},(Bp=Od.prototype).Bg=function(t){var e;null!==t&&(this.tf.add(t),null!==(e=t.node)&&this.au.add(e,t),t.network=this)},Bp.jk=function(t){if(null===t)return null;var e=this.kj(t);return null===e&&((e=this.createVertex()).node=t,this.Bg(e)),e},Bp.Nv=function(t){if(null!==t&&Bd(this,t)){for(var e=t.Le,n=e.count-1;0<=n;n--){var i=e.L(n);this.sk(i)}for(t=(e=t.Ee).count-1;0<=t;t--)n=e.L(t),this.sk(n)}},Bp.Gz=function(t){null!==t&&(null!==(t=this.kj(t))&&this.Nv(t))},Bp.kj=function(t){return null===t?null:this.au.H(t)},Bp.nm=function(t){var e;null!==t&&(Gd(this,t),null!==(e=t.toVertex)&&e.Ev(t),null!==(e=t.fromVertex)&&e.Cv(t))},Bp.Tx=function(t){if(null===t)return null;var e=t.fromNode,n=t.toNode,i=this.Cq(t);return null===i?((i=this.createEdge()).link=t,null!==e&&(i.fromVertex=this.jk(e)),null!==n&&(i.toVertex=this.jk(n)),this.nm(i)):(i.fromVertex=null!==e?this.jk(e):null,i.toVertex=null!==n?this.jk(n):null),i},Bp.sk=function(t){var e;null!==t&&(null!==(e=t.toVertex)&&e.Mv(t),null!==(e=t.fromVertex)&&e.Lv(t),jd(this,t))},Bp.Fz=function(t){null!==t&&(null!==(t=this.Cq(t))&&this.sk(t))},Bp.Cq=function(t){return null===t?null:this.Wt.H(t)},Bp.Ak=function(t,e,n){if(null===t||null===e)return null;if(t.network!==this||e.network!==this)return null;var i=this.createEdge();return i.link=n,i.fromVertex=t,i.toVertex=e,this.nm(i),i},Bp.Qm=function(t){var e,n;null!==t&&(e=t.fromVertex,n=t.toVertex,null!==e&&null!==n&&(e.Lv(t),n.Mv(t),t.Qm(),e.Ev(t),n.Cv(t)))},Bp.zq=function(){for(var t=be(),e=this.he.iterator;e.next();){var n=e.value;n.fromVertex===n.toVertex&&t.push(n)}for(e=t.length,n=0;n<e;n++)this.sk(t[n]);Se(t)},Od.prototype.deleteArtificialVertexes=function(){for(var t=be(),e=this.tf.iterator;e.next();){var n=e.value;null===n.node&&null===n.data&&t.push(n)}for(n=t.length,e=0;e<n;e++)this.Nv(t[e]);for(e=be(),n=this.he.iterator;n.next();){var i=n.value;null===i.link&&null===i.data&&e.push(i)}for(n=e.length,i=0;i<n;i++)this.sk(e[i]);Se(t),Se(e)},Od.prototype.Uy=function(t){void 0===t&&(t=!0),t&&(this.deleteArtificialVertexes(),function(t){for(var e=be(),n=t.he.iterator;n.next();){var i=n.value;null!==i.fromVertex&&null!==i.toVertex||e.push(i)}for(n=e.length,i=0;i<n;i++)t.sk(e[i]);Se(e)}(this),this.zq()),t=new X;for(var e=!0;e;){e=!1;for(var n=this.tf.iterator;n.next();){var i=n.value;if(0<i.Le.count||0<i.Ee.count){e=this.layout.createNetwork(),t.add(e),function t(e,n,i){if(null!==i&&i.network!==n){Bd(e,i),n.Bg(i);for(var o=i.sourceEdges;o.next();){var r=o.value;r.network!==n&&(jd(e,r),Gd(n,r),t(e,n,r.fromVertex))}for(o=i.destinationEdges;o.next();)(i=o.value).network!==n&&(jd(e,i),Gd(n,i),t(e,n,i.toVertex))}}(this,e,i),e=!0;break}}}return t.sort(function(t,e){return null===t||null===e||t===e?0:e.vertexes.count-t.vertexes.count}),t},Od.prototype.Mz=function(){for(var t=new $,e=this.tf.iterator;e.next();)t.add(e.value.node);for(e=this.he.iterator;e.next();)t.add(e.value.link);return t},s.Object.defineProperties(Od.prototype,{layout:{get:function(){return this.kc},set:function(t){null!==t&&(this.kc=t)}},vertexes:{get:function(){return this.tf}},edges:{get:function(){return this.he}}}),Od.prototype.findAllParts=Od.prototype.Mz,Od.prototype.splitIntoSubNetworks=Od.prototype.Uy,Od.prototype.deleteSelfEdges=Od.prototype.zq,Od.prototype.reverseEdge=Od.prototype.Qm,Od.prototype.linkVertexes=Od.prototype.Ak,Od.prototype.findEdge=Od.prototype.Cq,Od.prototype.deleteLink=Od.prototype.Fz,Od.prototype.deleteEdge=Od.prototype.sk,Od.prototype.addLink=Od.prototype.Tx,Od.prototype.addEdge=Od.prototype.nm,Od.prototype.findVertex=Od.prototype.kj,Od.prototype.deleteNode=Od.prototype.Gz,Od.prototype.deleteVertex=Od.prototype.Nv,Od.prototype.addNode=Od.prototype.jk,Od.prototype.addVertex=Od.prototype.Bg,Od.prototype.addParts=Od.prototype.Ag,Od.className="LayoutNetwork",zd.prototype.serializeVertexProperties=function(t){t.id=Q(this),t.key=this.node?this.node.key:this.data?this.data.Ci:void 0,void 0===t.key&&(t.key=null),t.x=this.bounds.x,t.y=this.bounds.y,t.dB=this.bounds.width,t.oA=this.bounds.height,t.fx=this.focus.x,t.fy=this.focus.y;var e=[];this.Le.each(function(t){e.push(Q(t))}),t.Ry=e;var n=[];this.Ee.each(function(t){n.push(Q(t))}),t.gy=n},zd.prototype.Aq=function(t,e,n){var i;null!==t&&(this.x=t.x,this.y=t.y,this.width=t.dB,this.height=t.oA,this.focusX=t.fx,this.focusY=t.fy,i=this,t.Ry&&t.Ry.forEach(function(t){(t=n.get(t))&&i.Le.add(t)}),t.gy&&t.gy.forEach(function(t){(t=n.get(t))&&i.Ee.add(t)}))},zd.prototype.clear=function(){this.Li=this.lb=null,this.Le=new X,this.Ee=new X},zd.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutVertex#"+Q(this);if(0<t&&(e+=null!==this.node?"("+this.node.toString()+")":"",1<t)){for(var n=!(t=""),i=this.Le.iterator;i.next();){var o=i.value;n?n=!1:t+=",",t+=o.toString(0)}for(n=!(o=""),i=this.Ee.iterator;i.next();)n?n=!1:o+=",",o+=i.value.toString(0);e+=" sources: "+t+" destinations: "+o}return e},zd.prototype.commit=function(){var t=this.lb;if(null!==t){var e=this.bounds,n=t.bounds;y(n)?(n.x=e.x,n.y=e.y,n.width=e.width,n.height=e.height):t.bounds=e.copy()}else if(null!==(t=this.node)){if(e=this.bounds,!(t instanceof pl)){n=ne.alloc();var i=this.network.layout.mj(t,n),o=t.locationObject.ga(Wt);if(i.u()&&o.u())return t.moveTo(e.x+this.focusX-(o.x-i.x),e.y+this.focusY-(o.y-i.y)),void ne.free(n);ne.free(n)}t.moveTo(e.x,e.y)}},zd.prototype.Ev=function(t){null!==t&&(this.Le.contains(t)||this.Le.add(t))},zd.prototype.Mv=function(t){null!==t&&this.Le.remove(t)},zd.prototype.Cv=function(t){null!==t&&(this.Ee.contains(t)||this.Ee.add(t))},zd.prototype.Lv=function(t){null!==t&&this.Ee.remove(t)},s.Object.defineProperties(zd.prototype,{sourceEdgesArrayAccess:{get:function(){return this.Le._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.Ee._dataArray}},data:{get:function(){return this.lb},set:function(t){var e,n,i;null!==(this.lb=t)&&t.bounds&&(t=(i=t.bounds).x,e=i.y,n=i.width,i=i.height,this.v.h(n/2,i/2),this.l.h(t,e,n,i))}},node:{get:function(){return this.Li},set:function(t){var e,n,i,o,r;this.Li!==t&&((this.Li=t).Ta(),n=this.network.layout,e=ne.alloc(),n=(r=n.mj(t,e)).x,i=r.y,o=r.width,r=r.height,isNaN(n)&&(n=0),isNaN(i)&&(i=0),this.l.h(n,i,o,r),ne.free(e),t instanceof pl||!(t=t.locationObject.ga(Wt)).u()?this.v.h(o/2,r/2):this.v.h(t.x-n,t.y-i))}},bounds:{get:function(){return this.l},set:function(t){this.l.w(t)||this.l.assign(t)}},focus:{get:function(){return this.v},set:function(t){this.v.w(t)||this.v.assign(t)}},centerX:{get:function(){return this.l.x+this.v.x},set:function(t){var e=this.l;e.x+this.v.x!==t&&(e.ea(),e.x=t-this.v.x,e.freeze())}},centerY:{get:function(){return this.l.y+this.v.y},set:function(t){var e=this.l;e.y+this.v.y!==t&&(e.ea(),e.y=t-this.v.y,e.freeze())}},focusX:{get:function(){return this.v.x},set:function(t){var e=this.v;e.x!==t&&(e.ea(),e.x=t,e.freeze())}},focusY:{get:function(){return this.v.y},set:function(t){var e=this.v;e.y!==t&&(e.ea(),e.y=t,e.freeze())}},x:{get:function(){return this.l.x},set:function(t){var e=this.l;e.x!==t&&(e.ea(),e.x=t,e.freeze())}},y:{get:function(){return this.l.y},set:function(t){var e=this.l;e.y!==t&&(e.ea(),e.y=t,e.freeze())}},width:{get:function(){return this.l.width},set:function(t){var e=this.l;e.width!==t&&(e.ea(),e.width=t,e.freeze())}},height:{get:function(){return this.l.height},set:function(t){var e=this.l;e.height!==t&&(e.ea(),e.height=t,e.freeze())}},network:{get:function(){return this.Qc},set:function(t){this.Qc=t}},sourceVertexes:{get:function(){for(var t=new $,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new $,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new $,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.Le.iterator}},destinationEdges:{get:function(){return this.Ee.iterator}},edges:{get:function(){for(var t=new X,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.Le.count+this.Ee.count}}}),zd.prototype.deleteDestinationEdge=zd.prototype.Lv,zd.prototype.addDestinationEdge=zd.prototype.Cv,zd.prototype.deleteSourceEdge=zd.prototype.Mv,zd.prototype.addSourceEdge=zd.prototype.Ev,zd.className="LayoutVertex",zd.standardComparer=Rd,zd.smartComparer=function(t,e){if(null===t)return null!==e?-1:0;if(null===e)return 1;t=t.Li;var n=e.Li;if(null===t)return null!==n?-1:0;if(null===n)return 1;for(e=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),t=n.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),n=0;n<e.length;n++)if(""!==t[n]&&void 0!==t[n]){var i=parseFloat(e[n]),o=parseFloat(t[n]);if(isNaN(i)){if(!isNaN(o))return 1;if(0!==e[n].localeCompare(t[n]))return e[n].localeCompare(t[n])}else{if(isNaN(o))return-1;if(0!=i-o)return i-o}}else if(""!==e[n])return 1;return""!==t[n]&&void 0!==t[n]?-1:0},Id.prototype.clear=function(){this.vg=this.Wf=this.Hl=this.lb=null},Id.prototype.serializeEdgeProperties=function(t){t.id=Q(this),t.key=this.link?this.link.key:this.data?this.data.Ci:void 0,void 0===t.key&&(t.key=null),t.from=this.fromVertex?Q(this.fromVertex):null,t.ZA=this.toVertex?Q(this.toVertex):null},Id.prototype.deserializeEdgeProperties=function(t,e){var n;null!==t&&((n=e.get(t.from))&&(this.fromVertex=n),(t=e.get(t.ZA))&&(this.toVertex=t))},Id.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutEdge#"+Q(this);return 0<t&&(e+=null!==this.Hl?"("+this.Hl.toString()+")":"",1<t&&(e+=" "+(this.Wf?this.Wf.toString():"null")+" --\x3e "+(this.vg?this.vg.toString():"null"))),e},Id.prototype.Qm=function(){var t=this.Wf;this.Wf=this.vg,this.vg=t},Id.prototype.commit=function(){},Id.prototype.wy=function(t){return this.vg===t?this.Wf:this.Wf===t?this.vg:null},s.Object.defineProperties(Id.prototype,{network:{get:function(){return this.Pc},set:function(t){this.Pc=t}},data:{get:function(){return this.lb},set:function(t){this.lb!==t&&(this.lb=t)}},link:{get:function(){return this.Hl},set:function(t){this.Hl!==t&&(this.Hl=t)}},fromVertex:{get:function(){return this.Wf},set:function(t){this.Wf!==t&&(this.Wf=t)}},toVertex:{get:function(){return this.vg},set:function(t){this.vg!==t&&(this.vg=t)}}}),Id.prototype.getOtherVertex=Id.prototype.wy,Id.className="LayoutEdge",n(Vd,Sd),Vd.prototype.cloneProtected=function(t){Sd.prototype.cloneProtected.call(this,t),t.qq=this.qq,t.pq=this.pq,t.Qg.assign(this.Qg),t.kf.assign(this.kf),t.yb=this.yb,t.Eb=this.Eb,t.Yc=this.Yc,t.Tc=this.Tc},Vd.prototype.hb=function(t){t.classType===Vd?t===$d||t===Jd||t===Xd||t===Wd?this.sorting=t:t===Yd||t===Kd?this.arrangement=t:t===Hd||t===qd?this.alignment=t:O("Unknown enum value: "+t):Sd.prototype.hb.call(this,t)},Vd.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.Yx(t);t=this.diagram;for(var n=e.copy().iterator;n.next();){var i=n.value;if(!i.Ph()||null===i.fromNode&&null===i.toNode){if(i.Ta(),i instanceof pl)for(i=i.memberParts;i.next();)e.remove(i.value)}else e.remove(i)}var o=e.ma();if(0!==o.length){switch(this.sorting){case Wd:o.reverse();break;case $d:o.sort(this.comparer);break;case Jd:o.sort(this.comparer),o.reverse()}var r=this.wrappingColumn;isNaN(r)&&(r=0);var a=this.wrappingWidth,a=isNaN(a)&&null!==t?(e=t.padding,Math.max(t.viewportBounds.width-e.left-e.right,0)):Math.max(this.wrappingWidth,0);switch(r<=0&&a<=0&&(r=1),e=this.spacing.width,isFinite(e)||(e=0),n=this.spacing.height,isFinite(n)||(n=0),null!==t&&t.va("Layout"),i=[],this.alignment){case qd:var s=e,h=n,u=ne.alloc(),l=Math.max(this.cellSize.width,1);if(!isFinite(l))for(var d=l=0;d<o.length;d++)var c=this.mj(o[d],u),l=Math.max(l,c.width);if(l=Math.max(l+s,1),d=Math.max(this.cellSize.height,1),!isFinite(d))for(c=d=0;c<o.length;c++)var g=this.mj(o[c],u),d=Math.max(d,g.height);d=Math.max(d+h,1),c=this.arrangement;for(var f=g=this.arrangementOrigin.x,p=this.arrangementOrigin.y,m=0,y=0,v=0;v<o.length;v++){var w=o[v],b=this.mj(w,u),S=Math.ceil((b.width+s)/l)*l,x=Math.ceil((b.height+h)/d)*d,P=c===Kd?Math.abs(f-b.width):f+b.width;(0<r&&r-1<m||0<a&&0<m&&a<P-g)&&(i.push(new ne(0,p,a+s,y)),f=g,p+=y,y=m=0),y=Math.max(y,x),b=c===Kd?-b.width:0,w.moveTo(f+b,p),c===Kd?f-=S:f+=S,m++}i.push(new ne(0,p,a+s,y)),ne.free(u);break;case Hd:for(h=a,l=r,d=e,c=n,a=ne.alloc(),g=Math.max(this.cellSize.width,1),r=p=u=0,s=ee.alloc(),f=0;f<o.length;f++)y=o[f],m=this.mj(y,a),y=y.Cf(y.locationObject,y.locationSpot,s),u=Math.max(u,y.x),p=Math.max(p,m.width-y.x),r=Math.max(r,y.y);(f=this.arrangement)===Kd?u+=d:p+=d,g=isFinite(g)?Math.max(g+d,1):Math.max(u+p,1);var k=y=this.arrangementOrigin.x,v=this.arrangementOrigin.y,p=0;for(u<=h&&(h-=u),u=w=0,S=Math.max(this.cellSize.height,1),x=!(b=r=0),m=ee.alloc(),P=0;P<o.length;P++){var L,M=o[P],_=this.mj(M,a),N=M.Cf(M.locationObject,M.locationSpot,s);if(0<p?k=f===Kd?(k=(k-y-(_.width-N.x))/g,(k=Ue.$(Math.round(k),k)?Math.round(k):Math.floor(k))*g+y):(k=(k-y+N.x)/g,(k=Ue.$(Math.round(k),k)?Math.round(k):Math.ceil(k))*g+y):w=f===Kd?k+N.x+_.width:k-N.x,L=f===Kd?-(k+N.x)+w:k+_.width-N.x-w,0<l&&l-1<p||0<h&&0<p&&h<L){for(i.push(new ne(0,x?v-r:v,h+d,b+r+c)),k=0;k<p&&P!==p;k++){var A=(L=o[P-p+k]).Cf(L.locationObject,L.locationSpot,m);L.moveTo(L.position.x,L.position.y+r-A.y)}b+=c,v=x?v+b:v+(b+r),p=b=r=0,k=y,x=!1}k===y&&(u=f===Kd?Math.max(u,_.width-N.x):Math.min(u,-N.x)),r=Math.max(r,N.y),b=Math.max(b,_.height-N.y),isFinite(S)&&(b=Math.max(b,Math.max(_.height,S)-N.y)),x?M.moveTo(k-N.x,v-N.y):M.moveTo(k-N.x,v),f===Kd?k-=N.x+d:k+=_.width-N.x+d,p++}if(i.push(new ne(0,v,h+d,(x?b:b+r)+c)),o.length!==p)for(h=0;h<p;h++)d=(l=o[o.length-p+h]).Cf(l.locationObject,l.locationSpot,s),l.moveTo(l.position.x,l.position.y+r-d.y);if(ee.free(s),ee.free(m),f===Kd)for(o=0;o<i.length;o++)(r=i[o]).width+=u,r.x-=u;else for(o=0;o<i.length;o++)(r=i[o]).x>u&&(r.width+=r.x-u,r.x=u);ne.free(a)}for(s=r=a=o=0;s<i.length;s++)h=i[s],o=Math.min(o,h.x),a=Math.min(a,h.y),r=Math.max(r,h.x+h.width);this.arrangement===Kd?this.commitLayers(i,new ee(o+e/2-(r+o),a-n/2)):this.commitLayers(i,new ee(o-e/2,a-n/2)),null!==t&&t.Wa("Layout"),this.isValidLayout=!0}},Vd.prototype.commitLayers=function(){},s.Object.defineProperties(Vd.prototype,{wrappingWidth:{get:function(){return this.qq},set:function(t){this.qq!==t&&(0<t||isNaN(t))&&(this.qq=t,this.isViewportSized=isNaN(t),this.C())}},wrappingColumn:{get:function(){return this.pq},set:function(t){this.pq!==t&&(0<t||isNaN(t))&&(this.pq=t,this.C())}},cellSize:{get:function(){return this.Qg},set:function(t){this.Qg.w(t)||(this.Qg.assign(t),this.C())}},spacing:{get:function(){return this.kf},set:function(t){this.kf.w(t)||(this.kf.assign(t),this.C())}},alignment:{get:function(){return this.yb},set:function(t){this.yb===t||t!==Hd&&t!==qd||(this.yb=t,this.C())}},arrangement:{get:function(){return this.Eb},set:function(t){this.Eb===t||t!==Yd&&t!==Kd||(this.Eb=t,this.C())}},sorting:{get:function(){return this.Yc},set:function(t){this.Yc===t||t!==Xd&&t!==Wd&&t!==$d&&t!==Jd||(this.Yc=t,this.C())}},comparer:{get:function(){return this.Tc},set:function(t){this.Tc!==t&&(this.Tc=t,this.C())}}});var qd=new j(Vd,"Position",0),Hd=new j(Vd,"Location",1),Yd=new j(Vd,"LeftToRight",2),Kd=new j(Vd,"RightToLeft",3),Xd=new j(Vd,"Forward",4),Wd=new j(Vd,"Reverse",5),$d=new j(Vd,"Ascending",6),Jd=new j(Vd,"Descending",7);function Zd(){this.hp=new $,this.Jo=new $,this.Da=new $,this.Te=new at,this.Se=new at,this.Nj=new at,this.B=null,this.pr=!1}function Qd(t,e,n){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Te.contains(e)){void 0===n&&(n=!0);t:{if(null!=e&&!t.B.undoManager.isUndoingRedoing&&!t.Te.contains(e)){var i=t.Gq(e),o=tc(t,e,i);if(null!==o&&(Sh(o),null!==(o=o.copy()))){var r=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,o.Mf=i,o.lb=e,t.pr&&(o.hh="Tool"),t.diagram.add(o),o.lb=null,o.data=e,t.diagram.skipsModelSourceBindings=r,i=o;break t}}i=null}null!==i&&n&&t.resolveReferencesForData(e)}}function tc(t,e,n){var i=(t=t.B).model;return i.yk()&&i.ew(e)?null===(e=t.groupTemplateMap.H(n))&&(null===(e=t.groupTemplateMap.H(""))&&(sc||(sc=!0,p('No Group template found for category "'+n+'"'),p("  Using default group template")),e=t.Du)):null===(e=t.nodeTemplateMap.H(n))&&(null===(e=t.nodeTemplateMap.H(""))&&(ac||(ac=!0,p('No Node template found for category "'+n+'"'),p("  Using default node template")),e=t.Fu)),e}function ec(t,e,n){for(var i in n){var o=e[i],r=n[i];if(w(r)){if(!w(o)||o.length<r.length)return;for(var a=0;a<o.length;a++){var s=r[a];if(void 0!==s&&!nc(t,o[a],s))return}}else if(!nc(t,o,r))return}return 1}function nc(t,e,n){if("function"==typeof n){if(!n(e))return}else if(n instanceof RegExp){if(!e||!n.test(e.toString()))return}else if(y(e)&&y(n)){if(!ec(t,e,n))return}else if(e!==n)return;return 1}function ic(t,e){var n=e.Bi;if(w(n)){var i=t.Nj.H(n);if(null===i)(i=[]).push(e),t.Nj.add(n,i);else{for(t=0;t<i.length;t++)if(i[t]===e)return;i.push(e)}}}function oc(t,e,i){fh(e,function(t){for(var e=(t=t.W.j).length,n=0;n<e;n++)Sr(i,t[n])});var n=e.Bi;if(w(n)){var o=t.Nj.H(n);if(null!==o)for(var r=0;r<o.length;r++)if(o[r]===e){o.splice(r,1),0===o.length&&t.Nj.remove(n);break}}}function rc(t,e,n,i,o){if(null===e||o&&!e.canCopy())return null;if(i.contains(e))return i.H(e);var r=t.copyPartData(e,n);if(!(r instanceof Ou))return null;if(r.isSelected=!1,r.isHighlighted=!1,i.add(e,r),e instanceof el){for(var a=e.linksConnected;a.next();){var s,h=a.value;h.fromNode!==e||null!==(s=i.H(h))&&(s.fromNode=r),h.toNode===e&&(null!==(h=i.H(h))&&(h.toNode=r))}if(e instanceof pl&&r instanceof pl)for(e=e.memberParts;e.next();)(a=rc(t,e.value,n,i,o))instanceof wl||null===a||(a.containingGroup=r)}else if(e instanceof wl&&r instanceof wl)for(null!==(a=e.fromNode)&&(null!==(a=i.H(a))&&(r.fromNode=a)),null!==(a=e.toNode)&&(null!==(a=i.H(a))&&(r.toNode=a)),e=e.labelNodes;e.next();)null!==(a=rc(t,e.value,n,i,o))&&a instanceof el&&(a.labeledLink=r);return r}Vd.className="GridLayout",Vd.standardComparer=Ud,Vd.smartComparer=function(t,e){if(null===t)return null!==e?-1:0;if(null===e)return 1;t=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/);for(var n=0;n<t.length;n++)if(""!==e[n]&&void 0!==e[n]){var i=parseFloat(t[n]),o=parseFloat(e[n]);if(isNaN(i)){if(!isNaN(o))return 1;if(0!==t[n].localeCompare(e[n]))return t[n].localeCompare(e[n])}else{if(isNaN(o))return-1;if(0!=i-o)return i-o}}else if(""!==t[n])return 1;return""!==e[n]&&void 0!==e[n]?-1:0},Vd.Position=qd,Vd.Location=Hd,Vd.LeftToRight=Yd,Vd.RightToLeft=Kd,Vd.Forward=Xd,Vd.Reverse=Wd,Vd.Ascending=$d,Vd.Descending=Jd,(Bp=Zd.prototype).clear=function(){this.hp.clear(),this.Jo.clear(),this.Da.clear(),this.Te.clear(),this.Se.clear(),this.Nj.clear()},Bp.ae=function(t){this.B=t},Bp.nj=function(t){var e;t instanceof el?(this.hp.add(t),t instanceof pl&&((null===(e=t.containingGroup)?this.B.Dh:e.Ml).add(t),null!==(e=t.layout)&&(e.diagram=this.B))):t instanceof wl?this.Jo.add(t):t instanceof tl||this.Da.add(t),null===(e=t.data)||t instanceof tl||(t instanceof wl?this.Se:this.Te).add(e,t)},Bp.Kc=function(t){var e;t.kk(),t instanceof el?(this.hp.remove(t),t instanceof pl&&((null===(e=t.containingGroup)?this.B.Dh:e.Ml).remove(t),null!==(e=t.layout)&&(e.diagram=null))):t instanceof wl?this.Jo.remove(t):t instanceof tl||this.Da.remove(t),null===(e=t.data)||t instanceof tl||(t instanceof wl?this.Se:this.Te).remove(e)},Bp.Ed=function(){for(var t=this.B.nodeTemplateMap.iterator;t.next();){var e=t.value,n=t.key;(!e.Wb()||e instanceof pl)&&O('Invalid node template in Diagram.nodeTemplateMap: template for "'+n+'" must be a Node or a simple Part, not a Group or Link: '+e)}for(t=this.B.groupTemplateMap.iterator;t.next();)e=t.value,n=t.key,e instanceof pl||O('Invalid group template in Diagram.groupTemplateMap: template for "'+n+'" must be a Group, not a normal Node or Link: '+e);for(t=this.B.linkTemplateMap.iterator;t.next();)e=t.value,n=t.key,e instanceof wl||O('Invalid link template in Diagram.linkTemplateMap: template for "'+n+'" must be a Link, not a normal Node or simple Part: '+e);for(t=be(),e=this.B.selection.iterator;e.next();)(n=e.value.data)&&t.push(n);for(e=be(),n=this.B.highlighteds.iterator;n.next();){var i=n.value.data;i&&e.push(i)}for(n=be(),i=this.nodes.iterator;i.next();){var o=i.value;null!==o.data&&(n.push(o.data),n.push(o.location))}for(i=this.links.iterator;i.next();)null!==(o=i.value).data&&(n.push(o.data),n.push(o.location));for(i=this.parts.iterator;i.next();)null!==(o=i.value).data&&(n.push(o.data),n.push(o.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),i=0;i<t.length;i++)null!==(o=this.yc(t[i]))&&(o.isSelected=!0);for(i=0;i<e.length;i++)null!==(o=this.yc(e[i]))&&(o.isHighlighted=!0);for(i=0;i<n.length;i+=2)null!==(o=this.yc(n[i]))&&(o.location=n[i+1]);Se(t),Se(e),Se(n)},Zd.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},Zd.prototype.addModeledParts=function(t,e){var n=this,i=this.diagram.model;t.forEach(function(t){i.Za(t)&&Qd(n,t,!1)}),t.forEach(function(t){i.Za(t)&&n.resolveReferencesForData(t)}),!1!==e&&Pr(this.diagram,!1)},Zd.prototype.insertLink=function(){return null},Zd.prototype.resolveReferencesForData=function(){},Zd.prototype.Gq=function(t){return this.B.model.Gq(t)},Zd.prototype.getLinkCategoryForData=function(){return""},Zd.prototype.setLinkCategoryForData=function(){},Zd.prototype.setFromNodeForLink=function(){},Zd.prototype.setToNodeForLink=function(){},Zd.prototype.findLinkTemplateForCategory=function(t){var e=this.B.linkTemplateMap.H(t);return null===e&&(null===(e=this.B.linkTemplateMap.H(""))&&(hc||(hc=!0,p('No Link template found for category "'+t+'"'),p("  Using default link template")),e=this.B.Eu)),e},Zd.prototype.removeAllModeledParts=function(){this.fu(this.diagram.model.nodeDataArray)},Zd.prototype.fu=function(t){var e=this;t.forEach(function(t){e.ar(t)})},Zd.prototype.ar=function(t){null!==(t=this.yc(t))&&(hr(this.diagram,t,!1),this.unresolveReferencesForPart(t))},Zd.prototype.unresolveReferencesForPart=function(){},Zd.prototype.removeDataForLink=function(){},Zd.prototype.findPartForKey=function(t){return null!=t&&null!==(t=this.B.model.Kb(t))?this.Te.H(t):null},Zd.prototype.Cb=function(t){return null!=t&&null!==(t=this.B.model.Kb(t))&&(t=this.Te.H(t))instanceof el?t:null},Zd.prototype.findLinkForKey=function(){return null},(Bp=Zd.prototype).yc=function(t){if(null===t)return null;var e=this.Te.H(t);return null!==e?e:e=this.Se.H(t)},Bp.gj=function(t){return null!==t&&(t=this.Te.H(t))instanceof el?t:null},Bp.xc=function(t){return null===t?null:this.Se.H(t)},Bp.Jt=function(t){for(var e=0;e<arguments.length;++e);e=new $;for(var n=this.hp.iterator;n.next();){var i=n.value,o=i.data;if(null!==o)for(var r=0;r<arguments.length;r++){var a=arguments[r];if(y(a)&&ec(this,o,a)){e.add(i);break}}}return e.iterator},Bp.It=function(t){for(var e=0;e<arguments.length;++e);e=new $;for(var n=this.Jo.iterator;n.next();){var i=n.value,o=i.data;if(null!==o)for(var r=0;r<arguments.length;r++){var a=arguments[r];if(y(a)&&ec(this,o,a)){e.add(i);break}}}return e.iterator},Zd.prototype.doModelChanged=function(t){if(this.B){var e=this.B;if(t.model===e.model){var n=t.change;if(e.doModelChanged(t),e.Z){e.Z=!1;try{var i,o,r=t.modelChange;if(""!==r)n===bn?("nodeCategory"===r?(i=this.yc(t.object),o=t.newValue,null!==i&&"string"==typeof o&&(i.category=o)):"nodeDataArray"===r&&(this.fu(t.oldValue),this.addModeledParts(t.newValue)),e.isModified=!0):n===Sn?(o=t.newValue,"nodeDataArray"===r&&y(o)&&Qd(this,o),e.isModified=!0):n===xn?(a=t.oldValue,"nodeDataArray"===r&&y(a)&&this.ar(a),e.isModified=!0):n===wn&&("SourceChanged"===r?null!==t.object?this.updateDataBindings(t.object,t.propertyName):(this.kr(),this.updateAllTargetBindings()):"ModelDisplaced"===r&&this.Ed());else if(n===bn){var a=t.propertyName,r=t.object;r===e.model?"nodeKeyProperty"!==a&&"nodeCategoryProperty"!==a||e.undoManager.isUndoingRedoing||this.Ed():this.updateDataBindings(r,a),e.isModified=!0}else if(n===Sn||n===xn){var s=t.change===Sn,h=s?t.newParam:t.oldParam,u=s?t.newValue:t.oldValue,l=this.Nj.H(t.object);if(Array.isArray(l))for(t=0;t<l.length;t++){var d,c=l[t];s?Ph(c,u,h):h<0||(d=h+xh(c),c.Kc(d,!0),kh(c,d,h))}e.isModified=!0}}finally{e.Z=!0}}}}},Zd.prototype.updateAllTargetBindings=function(t){void 0===t&&(t="");for(var e=this.parts.iterator;e.next();)e.value.Ca(t);for(e=this.nodes.iterator;e.next();)e.value.Ca(t);for(e=this.links.iterator;e.next();)e.value.Ca(t)},Zd.prototype.kr=function(){for(var e=this.B.model,n=new $,t=e.nodeDataArray,i=0;i<t.length;i++)n.add(t[i]);var o=[];for(this.nodes.each(function(t){null===t.data||n.contains(t.data)||o.push(t.data)}),this.parts.each(function(t){null===t.data||n.contains(t.data)||o.push(t.data)}),o.forEach(function(t){Cc(e,t,!1)}),i=0;i<t.length;i++){var r=t[i];null===this.yc(r)&&Tc(e,r,!1)}for(this.refreshDataBoundLinks(),t=this.parts.iterator;t.next();)t.value.updateRelationshipsFromData();for(t=this.nodes.iterator;t.next();)t.value.updateRelationshipsFromData();for(t=this.links.iterator;t.next();)t.value.updateRelationshipsFromData()},Zd.prototype.refreshDataBoundLinks=function(){},Zd.prototype.updateRelationshipsFromData=function(){},Zd.prototype.updateDataBindings=function(t,e){if("string"==typeof e){var n=this.yc(t);if(null!==n)n.Ca(e);else{n=null;for(var i=this.Nj.iterator;i.next();){for(var o=i.value,r=0;r<o.length;r++){var a=o[r].ny(t);null!==a&&(null===n&&(n=be()),n.push(a))}if(null!==n)break}if(null!==n){for(i=0;i<n.length;i++)n[i].Ca(e);Se(n)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}},Zd.prototype.qk=function(t,e,n){var i,o=new at;if(w(t))for(var r=0;r<t.length;r++)rc(this,t[r],e,o,n);else for(t=t.iterator;t.next();)rc(this,t.value,e,o,n);if(null!==e){n=e.model,t=(null!==(t=e.toolManager.findTool("Dragging"))?t.dragOptions:e.dl).dragsLink,r=new $;for(var a=new at,s=o.iterator;s.next();){var h,u,l=s.value;l instanceof wl?t||null!==l.fromNode&&null!==l.toNode||r.add(l):l instanceof el&&null!==l.data&&n.Am()&&(h=l,null!==(u=(l=s.key).Fg())&&(null!==(u=o.H(u))?(n.be(h.data,n.ja(u.data)),h=e.xc(h.data),null!==(l=l.jj())&&null!==h&&a.add(l,h)):n.be(h.data,void 0)))}if(0<r.count&&e.gu(r,!1),0<a.count)for(n=a.iterator;n.next();)o.add(n.key,n.value)}for(null!==e&&null!==this.B&&null!==(n=(e=e.model).afterCopyFunction)&&(i=new at,o.each(function(t){null!==t.key.data&&i.add(t.key.data,t.value.data)}),n(i,e,this.B.model)),e=o.iterator;e.next();)e.value.Ca();return o},Zd.prototype.copyPartData=function(t,e){var n,i=null,o=t.data;return null!==o&&null!==e?(n=e.model,t instanceof wl||y(o=n.copyNodeData(o))&&(n.uf(o),i=e.yc(o))):(Sh(t),null!==(i=t.copy())&&(n=this.B,null!==e?e.add(i):null!==o&&null!==n&&null!==n.commandHandler&&n.commandHandler.copiesClipboardData&&(e=n.model,n=null,i instanceof wl||(n=e.copyNodeData(o)),y(n)&&(i.data=n)))),i},s.Object.defineProperties(Zd.prototype,{nodes:{get:function(){return this.hp}},links:{get:function(){return this.Jo}},parts:{get:function(){return this.Da}},diagram:{get:function(){return this.B}},addsToTemporaryLayer:{get:function(){return this.pr},set:function(t){this.pr=t}}}),Zd.prototype.updateAllRelationshipsFromData=Zd.prototype.kr,Zd.prototype.findLinksByExample=Zd.prototype.It,Zd.prototype.findNodesByExample=Zd.prototype.Jt,Zd.prototype.findLinkForData=Zd.prototype.xc,Zd.prototype.findNodeForData=Zd.prototype.gj,Zd.prototype.findPartForData=Zd.prototype.yc,Zd.prototype.findNodeForKey=Zd.prototype.Cb,Zd.prototype.removeModeledPart=Zd.prototype.ar,Zd.prototype.removeModeledParts=Zd.prototype.fu,Zd.prototype.rebuildParts=Zd.prototype.Ed;var ac=!1,sc=!1,hc=!1;function uc(t){Zd.apply(this,arguments)}function lc(e,t){t.forEach(function(t){dc(e,t)}),Pr(e.diagram,!1)}function dc(e,t){var n,i,o,r;null==t||e.diagram.undoManager.isUndoingRedoing||e.Se.contains(t)||(n=e.getLinkCategoryForData(t),null!==(i=e.findLinkTemplateForCategory(n))&&(Sh(i),null!==(o=i.copy())&&(i=e.diagram.skipsModelSourceBindings,e.diagram.skipsModelSourceBindings=!0,o.Mf=n,o.lb=t,""!==(r=Jc(n=e.diagram.model,t,!0))&&(o.fromPortId=r),void 0===(r=Wc(n,t,!0))||(r=e.Cb(r))instanceof el&&(o.fromNode=r),""!==(r=Jc(n,t,!1))&&(o.toPortId=r),void 0===(r=Wc(n,t,!1))||(r=e.Cb(r))instanceof el&&(o.toNode=r),n=n.Bf(t),Array.isArray(n)&&n.forEach(function(t){null!==(t=e.Cb(t))&&(t.labeledLink=o)}),e.pr&&(o.hh="Tool"),e.diagram.add(o),o.lb=null,o.data=t,e.diagram.skipsModelSourceBindings=i)))}function cc(e,t){t.forEach(function(t){e.ar(t)})}function gc(){Zd.apply(this,arguments),this.qh=null}function fc(t,e,n){if(null!==e&&null!==n){var i,o=t.diagram.toolManager.findTool("Linking"),r=e,a=n;if(t.diagram.isTreePathToChildren){for(e=a.linksConnected;e.next();)if(e.value.toNode===a)return}else for(a=e,e=(r=n).linksConnected;e.next();)if(e.value.fromNode===r)return;null!==o&&ni(o,r,a,null,!0)||(o=t.getLinkCategoryForData(n.data),null!==(e=t.findLinkTemplateForCategory(o))&&(Sh(e),null!==(e=e.copy()))&&(i=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,e.Mf=o,e.lb=n.data,e.fromNode=r,e.toNode=a,t.diagram.add(e),e.lb=null,e.data=n.data,t.diagram.skipsModelSourceBindings=i))}}function pc(t){this.Ni=new $,this.Ki=new $,this.su=',\n  "insertedNodeKeys": ',this.jx=',\n  "modifiedNodeData": ',this.uu=',\n  "removedNodeKeys": ',this.Yh=null,J(this),this.Kn=this.Qa="",this.$f=!1,this.l={},this.Fc=[],this.Va=new at,this.Mi="key",this.bl=this.Jl=null,this.Bn=this.Cn=!1,this.En=!0,this.hn=null,this.Vj="category",this.Sf=new at,this.bv=new X,this.ug=!1,this.v=null,this.undoManager=new kn,void 0!==t&&(this.nodeDataArray=t)}function mc(t){return',\n  "modelData": '+Mc(t,t.modelData)}function yc(t,e){y(e=e.modelData)&&(t.Nm(e),t.modelData=e)}function vc(t,e,n,i){if(e===n)return 1;if(_typeof(e)===_typeof(n)&&"function"!=typeof e&&"function"!=typeof n){if(Array.isArray(e)&&Array.isArray(n)){if(i.H(e)===n)return 1;if(i.add(e,n),e.length!==n.length)return;for(var o=0;o<e.length;o++)if(!vc(t,e[o],n[o],i))return;return 1}if(y(e)&&y(n)){if(i.H(e)===n)return 1;for(var r in i.add(e,n),e){var a=e[r];if(!kc(r,a)){var s=n[r];if(void 0===s||!vc(t,a,s,i))return}}for(o in n)if(!kc(o,r=n[o])&&(void 0===(a=e[o])||!vc(t,a,r,i)))return;return 1}}}function wc(t,e,n){t[n]!==e[n]&&O("Model.computeJsonDifference: Model."+n+' is not the same in both models: "'+t[n]+'" and "'+e[n]+'"')}function bc(t,e){function n(t,e){var n;(e=e.part)&&t!==(e=e.data)&&(null===(n=i.get(t))?((n=new $).add(e),i.add(t,n)):n.add(e))}var i=t.Yh;null===i&&(i=new at,e.changes.each(function(t){var e;null!==t.diagram&&((e=t.change)===bn?(t=t.object.panel)&&(e=t.data)&&n(e,t):e!==Sn&&e!==xn||(e=(t=t.object).itemArray)&&n(e,t))}),t.Yh=i)}function Sc(t,e){for(var n=new $,i=0;i<t.nodeDataArray.length;i++){var o=t.nodeDataArray[i];xc(t,e,o,o,n)}return n}function xc(t,e,n,i,o){if(Array.isArray(n))for(var r=0;r<n.length;r++){var a=n[r];if(a===e)return o.add(i),1;if(xc(t,e,a,i,o))return 1}else if(y(n)&&Object.getPrototypeOf(n)===Object.prototype)for(r in n){if((a=n[r])===e)return o.add(i),1;if(xc(t,e,a,i,o))return 1}}function Pc(t,e,n){void 0===n&&(n=!1);var i=e.length;if(i<=0)return"[]";var o=new R;o.add("[ "),n&&1<i&&o.add("\n");for(var r=0;r<i;r++){var a=e[r];void 0!==a&&(0<r&&(o.add(","),n&&o.add("\n")),o.add(t.$m(a)))}return n&&1<i&&o.add("\n"),o.add(" ]"),o.toString()}function kc(t,e){return void 0===e||"__gohashid"===t||"_"===t[0]||"function"==typeof e}function Lc(t){return isNaN(t)?"NaN":1/0===t?"9e9999":-1/0===t?"-9e9999":t}function Mc(t,e){if((i=e)instanceof ee)e={class:"go.Point",x:Lc(i.x),y:Lc(i.y)};else if(i instanceof xe)e={class:"go.Size",width:Lc(i.width),height:Lc(i.height)};else if(i instanceof ne)e={class:"go.Rect",x:Lc(i.x),y:Lc(i.y),width:Lc(i.width),height:Lc(i.height)};else if(i instanceof Vt)e={class:"go.Margin",top:Lc(i.top),right:Lc(i.right),bottom:Lc(i.bottom),left:Lc(i.left)};else if(i instanceof Be)e=i.ib()?{class:"go.Spot",x:Lc(i.x),y:Lc(i.y),offsetX:Lc(i.offsetX),offsetY:Lc(i.offsetY)}:{class:"go.Spot",enum:i.toString()};else if(i instanceof vs){if(e={class:"go.Brush",type:i.type.name},i.type===Ds?e.color=i.color:i.type!==Es&&i.type!==Fs||(e.start=i.start,e.end=i.end,i.type===Fs&&(0!==i.startRadius&&(e.startRadius=Lc(i.startRadius)),isNaN(i.endRadius)||(e.endRadius=Lc(i.endRadius)))),null!==i.colorStops){for(var n={},i=i.colorStops.iterator;i.next();)n[i.key]=i.value;e.colorStops=n}}else i instanceof qe?(e={class:"go.Geometry",type:i.type.name},0!==i.startX&&(e.startX=Lc(i.startX)),0!==i.startY&&(e.startY=Lc(i.startY)),0!==i.endX&&(e.endX=Lc(i.endX)),0!==i.endY&&(e.endY=Lc(i.endY)),i.spot1.w(Yt)||(e.spot1=i.spot1),i.spot2.w(Qt)||(e.spot2=i.spot2),i.type===rn&&(e.path=Ye(i))):i instanceof j&&(e={class:"go.EnumValue",classType:Gc(t,i.classType),name:i.name});for(var o in n="{",i=!0,e)if(!kc(o,a=zc(e,o)))if(i?i=!1:n+=", ",n+='"'+o+'":',"points"===o&&a instanceof X){for(var r="[",a=a.iterator;a.next();){var s=a.value;1<r.length&&(r+=","),r+=t.$m(s.x),r+=",",r+=t.$m(s.y)}n+=r+="]"}else n+=t.$m(a);return n+"}"}function _c(t){return"number"==typeof t?t:"NaN"===t?NaN:"9e9999"===t?1/0:"-9e9999"===t?-1/0:parseFloat(t)}function Nc(t,e,n,i,o,r,a,s,h){void 0===s&&(s=null),void 0===h&&(h=null);var u=new vn;u.model=t,u.change=n,u.modelChange=e,u.propertyName=i,u.object=o,u.oldValue=r,u.oldParam=s,u.newValue=a,u.newParam=h,t.zt(u)}function Ac(t){return"number"==typeof t||"string"==typeof t}function Tc(t,e,n){var i=t.ja(e);void 0!==i&&t.Va.H(i)===e||(t.Yt(e),void 0===(i=t.ja(e))?O("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."):(t.Va.add(i,e),i=null,n&&(i=t.Fc.length,S(t.Fc,i,e)),Nc(t,"nodeDataArray",Sn,"nodeDataArray",t,null,e,null,i),t.Pm(e),t.Om(e)))}function Cc(t,e,n){var i=t.ja(e);if(void 0!==i&&t.Va.remove(i),i=null,n){t:if(n=t.Fc,Array.isArray(n))i=n.indexOf(e);else{i=n.length;for(var o=0;o<i;o++)if(n[o]===e){i=o;break t}i=-1}if(i<0)return;x(t.Fc,i)}Nc(t,"nodeDataArray",xn,"nodeDataArray",t,e,null,i,null),t.jr(e)}function Dc(t,e,n){var i;void 0!==e&&(null===(i=t.Sf.H(e))&&(i=new $,t.Sf.add(e,i)),i.add(n))}function Ec(t,e,n){var i;void 0===e||(i=t.Sf.H(e))instanceof $&&(null==n?t.Sf.remove(e):(i.remove(n),0===i.count&&t.Sf.remove(e)))}function Fc(t,e){return void 0!==e&&(t=t.Sf.H(e))instanceof $?t:null}function Oc(t,e,n){if(t.copiesArrays&&Array.isArray(e)){var i=[];for(n=0;n<e.length;n++){var o=Oc(t,e[n],t.copiesArrayObjects);i.push(o)}return J(i),i}if(n&&y(e)){for(i in n=(n=e.constructor)?new n:{},o=t.copiesKey||"string"!=typeof t.nodeKeyProperty?null:t.nodeKeyProperty,e){var r,a;"__gohashid"===i?n.__gohashid=void 0:i===o?n[o]=void 0:("GraphObject"===(a=Gc(t,r=zc(e,i)))||"Diagram"===a||"Layer"===a||"RowColumnDefinition"===a||"AnimationManager"===a||"Tool"===a||"CommandHandler"===a||"Layout"===a||"InputEvent"===a||"DiagramEvent"===a||r instanceof pc||r instanceof kn||r instanceof Pn||r instanceof vn||(r=Oc(t,r,!1)),Rc(n,i,r))}return J(n),n}return e instanceof ee||e instanceof xe||e instanceof ne||e instanceof Be||e instanceof Vt?e.copy():e}function Bc(){return new pc}function Gc(t,e){if("function"==typeof e){if(e.className)return e.className;if(e.name)return e.name}else if("object"===_typeof(e)&&null!==e&&e.constructor)return Gc(t,e.constructor);return _typeof(e)}function jc(t){return Vc[t]||(void 0!==d.go&&d.go[t]?d.go[t]:null)}function zc(t,e){if(!t||!e)return null;try{var n;"function"==typeof e?n=e(t):"function"==typeof t.getAttribute?null===(n=t.getAttribute(e))&&(n=void 0):n=t[e]}catch(t){}return n}function Rc(t,e,n){if(t&&e)try{"function"==typeof e?e(t,n):"function"==typeof t.setAttribute?t.setAttribute(e,n):t[e]=n}catch(t){}}Zd.className="PartManager",n(uc,Zd),uc.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),lc(this,t.linkDataArray)},uc.prototype.addModeledParts=function(t){for(Zd.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)bl(t.value);Pr(this.diagram,!1)},uc.prototype.removeAllModeledParts=function(){var t=this.diagram.model;cc(this,t.linkDataArray),this.fu(t.nodeDataArray)},uc.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Mt(t)},uc.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.dr(t,e)},uc.prototype.setFromNodeForLink=function(t,e){var n=this.diagram.model;n.Aw(t.data,n.ja(null!==e?e.data:null))},uc.prototype.setToNodeForLink=function(t,e){var n=this.diagram.model;n.Fw(t.data,n.ja(null!==e?e.data:null))},uc.prototype.removeDataForLink=function(t){this.diagram.model.Lm(t.data)},uc.prototype.findPartForKey=function(t){var e=Zd.prototype.findPartForKey.call(this,t);return null===e&&null!==(t=this.diagram.model.Dg(t))?this.Se.H(t):e},uc.prototype.findLinkForKey=function(t){return null!=t&&null!==(t=this.diagram.model.Dg(t))?this.Se.H(t):null},uc.prototype.doModelChanged=function(t){var e=this;if(Zd.prototype.doModelChanged.call(this,t),this.diagram){var n=this.diagram;if(t.model===n.model){var i=t.change;if(n.Z){n.Z=!1;try{var o,r,a,s,h,u,l,d,c,g,f,p,m=t.modelChange;""!==m?i===bn?("linkFromKey"===m?null!==(o=this.xc(t.object))&&(r=this.Cb(t.newValue),o.fromNode=r):"linkToKey"===m?null!==(a=this.xc(t.object))&&(s=this.Cb(t.newValue),a.toNode=s):"linkFromPortId"===m?null===(a=this.xc(t.object))||"string"==typeof(s=t.newValue)&&(a.fromPortId=s):"linkToPortId"===m?null===(h=this.xc(t.object))||"string"==typeof(u=t.newValue)&&(h.toPortId=u):"nodeGroupKey"===m?null!==(h=this.yc(t.object))&&(void 0!==(u=t.newValue)?(u=this.Cb(u),h.containingGroup=u instanceof pl?u:null):h.containingGroup=null):"linkLabelKeys"===m?null!==(l=this.xc(t.object))&&(c=t.oldValue,d=t.newValue,Array.isArray(c)&&c.forEach(function(t){0<=d.indexOf(t)||null!==(t=e.Cb(t))&&(t.labeledLink=null)}),Array.isArray(d)&&d.forEach(function(t){null!==(t=e.Cb(t))&&(t.labeledLink=l)})):"linkCategory"===m?(c=this.xc(t.object),g=t.newValue,null!==c&&"string"==typeof g&&(c.category=g)):"linkDataArray"===m&&(cc(this,t.oldValue),lc(this,t.newValue)),n.isModified=!0):i===Sn?(g=t.newValue,"linkDataArray"===m&&"object"===_typeof(g)&&null!==g?dc(this,g):"linkLabelKeys"===m&&Ac(g)&&(f=this.xc(t.object),g=this.Cb(g),null!==f&&null!==g&&(g.labeledLink=f)),n.isModified=!0):i===xn&&(f=t.oldValue,"linkDataArray"===m&&"object"===_typeof(f)&&null!==f?this.ar(f):"linkLabelKeys"!==m||!Ac(f)||null!==(p=this.Cb(f))&&(p.labeledLink=null),n.isModified=!0):i===bn&&(p=t.propertyName,t.object!==n.model||"linkFromKeyProperty"!==p&&"linkToKeyProperty"!==p&&"linkFromPortIdProperty"!==p&&"linkToPortIdProperty"!==p&&"linkLabelKeysProperty"!==p&&"nodeIsGroupProperty"!==p&&"nodeGroupKeyProperty"!==p&&"linkCategoryProperty"!==p||n.undoManager.isUndoingRedoing||this.Ed(),n.isModified=!0)}finally{n.Z=!0}}}}},uc.prototype.refreshDataBoundLinks=function(){var e=this,n=this.diagram.model,i=new $,t=n.linkDataArray;t.forEach(function(t){i.add(t)});var o=[];this.links.each(function(t){null===t.data||i.contains(t.data)||o.push(t.data)}),o.forEach(function(t){tg(n,t,!1)}),t.forEach(function(t){null===e.xc(t)&&Qc(n,t,!1)})},uc.prototype.updateRelationshipsFromData=function(e){var t=e.data;if(null!==t){var n=e.diagram;if(null!==n){var i=n.model;if(e instanceof wl){var o=Wc(i,t,!0),o=n.Cb(o);if(e.fromNode=o,o=Wc(i,t,!1),o=n.Cb(o),e.toNode=o,0<(t=i.Bf(t)).length||0<e.labelNodes.count){if(1===t.length&&1===e.labelNodes.count){o=t[0];var r=e.labelNodes.first();if(i.ja(r.data)===o)return}o=(new $).addAll(t);var a=new $;e.labelNodes.each(function(t){null!==t.data&&(void 0!==(t=i.ja(t.data))&&a.add(t))}),(t=a.copy()).$q(o),(o=o.copy()).$q(a),(0<t.count||0<o.count)&&(t.each(function(t){null!==(t=n.Cb(t))&&t.labeledLink===e&&(t.labeledLink=null)}),o.each(function(t){null!==(t=n.Cb(t))&&t.labeledLink!==e&&(t.labeledLink=e)}))}}else!(e instanceof tl)&&(t=i.Lh(t),null===(t=n.findPartForKey(t))||t instanceof pl)&&(e.containingGroup=t)}}},uc.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.ja(t);if(void 0!==n){var i=Fc(e,n),o=this.yc(t);if(null!==i&&null!==o){i=i.iterator;for(var r={};i.next();){var a=i.value;e.Za(a)?o instanceof pl&&e.Lh(a)===n&&(null!==(a=this.yc(a))&&(a.containingGroup=o)):(r.link=this.xc(a),null!==r.link&&o instanceof el&&(Wc(e,a,!0)===n&&(r.link.fromNode=o),Wc(e,a,!1)===n&&(r.link.toNode=o),a=e.Bf(a),Array.isArray(a)&&a.some(function(e){return function(t){return t===n&&(o.labeledLink=e.link,!0)}}(r)))),r={link:r.link}}Ec(e,n)}void 0!==(t=e.Lh(t))&&((t=this.Cb(t))instanceof pl&&(o.containingGroup=t))}},uc.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof el){var n=e.ja(t.data);if(void 0!==n){for(var i=t.linksConnected;i.next();)Dc(e,n,i.value.data);if(t.isLinkLabel&&(null!==(i=t.labeledLink)&&Dc(e,n,i.data)),t instanceof pl)for(t=t.memberParts;t.next();)i=t.value.data,e.Za(i)&&Dc(e,n,i)}}},uc.prototype.copyPartData=function(t,e){var n,i=Zd.prototype.copyPartData.call(this,t,e);return t instanceof wl&&(null!==(t=t.data)&&null!==e?"object"===_typeof(t=(n=e.model).yq(t))&&null!==t&&(n.bj(t),i=e.xc(t)):null!==i&&(e=this.diagram,null===t||null===e||null===e.commandHandler||!e.commandHandler.copiesClipboardData||"object"===_typeof(e=e.model.yq(t))&&null!==e&&(i.data=e))),i},uc.prototype.insertLink=function(t,e,n,i){var o=this.diagram,r=o.model,a=o.toolManager.findTool("Linking"),s="";if(null!==t&&(null===e&&(e=t),null===(s=e.portId)&&(s="")),e="",null!==n&&(null===i&&(i=n),null===(e=i.portId)&&(e="")),(i=a.archetypeLinkData)instanceof wl){if(Sh(i),null!==(r=i.copy()))return r.fromNode=t,r.fromPortId=s,r.toNode=n,r.toPortId=e,o.add(r),(t=a.archetypeLabelNodeData)instanceof el&&(Sh(t),null!==(t=t.copy())&&(t.labeledLink=r,o.add(t))),r}else if(null!==i&&("object"===_typeof(i=r.yq(i))&&null!==i))return null!==t&&$c(r,i,r.ja(t.data),!0),Zc(r,i,s,!0),null!==n&&$c(r,i,r.ja(n.data),!1),Zc(r,i,e,!1),r.bj(i),null===(t=a.archetypeLabelNodeData)||t instanceof el||"object"===_typeof(t=r.copyNodeData(t))&&null!==t&&(r.uf(t),void 0!==(t=r.ja(t))&&r.Dv(i,t)),o.xc(i);return null},uc.className="GraphLinksPartManager",n(gc,Zd),gc.prototype.getLinkCategoryForData=function(t){return this.diagram.model.Ot(t)},gc.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.ku(t,e)},gc.prototype.setFromNodeForLink=function(t,e,n){var i,o=this.diagram.model;void 0===n&&(n=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren?o.be(t.data,o.ja(e)):(i=this.qh,this.qh=t,null!==n&&o.be(n.data,void 0),o.be(e,o.ja(null!==t.toNode?t.toNode.data:null)),this.qh=i)},gc.prototype.setToNodeForLink=function(t,e,n){var i,o=this.diagram.model;void 0===n&&(n=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren?(i=this.qh,this.qh=t,null!==n&&o.be(n.data,void 0),o.be(e,o.ja(null!==t.fromNode?t.fromNode.data:null)),this.qh=i):o.be(t.data,o.ja(e))},gc.prototype.removeDataForLink=function(t){this.diagram.model.be(t.data,void 0)},gc.prototype.findLinkForKey=function(t){return null!=t&&null!==(t=this.diagram.model.Kb(t))?this.Se.H(t):null},gc.prototype.doModelChanged=function(t){if(Zd.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var n=t.change;if(e.Z){e.Z=!1;try{var i,o,r,a,s=t.modelChange;""!==s?n===bn&&("nodeParentKey"===s?(r=t.object,i=this.Cb(t.newValue),o=this.gj(r),null!==this.qh?null!==i&&(this.qh.data=r,this.qh.category=this.getLinkCategoryForData(r)):null!==o&&(null!==(r=o.jj())?null===i?e.remove(r):e.isTreePathToChildren?r.fromNode=i:r.toNode=i:fc(this,i,o))):"parentLinkCategory"===s&&(s=this.gj(t.object),a=t.newValue,null===s||"string"!=typeof a||null!==(s=s.jj())&&(s.category=a)),e.isModified=!0):n===bn&&(a=t.propertyName,t.object===e.model&&"nodeParentKeyProperty"===a&&(e.undoManager.isUndoingRedoing||this.Ed()),e.isModified=!0)}finally{e.Z=!0}}}}},gc.prototype.updateRelationshipsFromData=function(t){var e,n,i=t.data;null===i||null!==(e=t.diagram)&&(n=e.model,t instanceof el&&(i=n.Mh(i),(i=e.Cb(i))!==(n=t.Fg())&&(n=t.jj(),null!==i?null!==n?e.isTreePathToChildren?n.fromNode=i:n.toNode=i:fc(this,i,t):null!==n&&hr(e,n,!1))))},gc.prototype.updateDataBindings=function(t,e){Zd.prototype.updateDataBindings.call(this,t,e),"string"!=typeof e||null===this.yc(t)||null!==(t=this.xc(t))&&t.Ca(e)},gc.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.ja(t);if(void 0!==n){var i=Fc(e,n),o=this.yc(t);if(null!==i&&null!==o){for(i=i.iterator;i.next();){var r=i.value;e.Za(r)&&o instanceof el&&e.Mh(r)===n&&fc(this,o,this.gj(r))}Ec(e,n)}void 0!==(t=e.Mh(t))&&o instanceof el&&(t=this.Cb(t),fc(this,t,o))}},gc.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof el){var n,i,o=e.ja(t.data),r=this.xc(t.data);for(null!==r&&(r.isSelected=!1,r.isHighlighted=!1,null!==(n=r.layer)&&(0<=(i=n.Kc(-1,r,!1))&&this.diagram.ab(xn,"parts",n,r,null,i,null),null!==(i=r.layerChanged)&&i(r,n,null))),r=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)n=t.value,n=(r?n.toNode:n.fromNode).data,e.Za(n)&&Dc(e,o,n)}},gc.prototype.insertLink=function(t,e,n){e=this.diagram.model;var i=t,o=n;return this.diagram.isTreePathToChildren||(i=n,o=t),null!==i&&null!==o?(e.be(o.data,e.ja(i.data)),o.jj()):null},gc.className="TreePartManager",pc.prototype.cloneProtected=function(t){t.Qa=this.Qa,t.Kn=this.Kn,t.$f=this.$f,t.Mi=this.Mi,t.Jl=this.Jl,t.bl=this.bl,t.Cn=this.Cn,t.Bn=this.Bn,t.En=this.En,t.hn=this.hn,t.Vj=this.Vj},pc.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},pc.prototype.clear=function(){this.Fc=[],this.Va.clear(),this.Sf.clear(),this.undoManager.clear()},pc.prototype.toString=function(t){if(void 0===t&&(t=0),1<t)return this.hr();var e=(""!==this.name?this.name:"")+" Model";if(0<t){e+="\n node data:";for(var n=(t=this.nodeDataArray).length,i=0;i<n;i++){var o=t[i];e+=" "+this.ja(o)+":"+k(o)}}return e},pc.prototype.$A=function(t){t.change!==wn&&O("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof Pn?(bc(this,e),t=this.Ww(e,"FinishedUndo"===t.propertyName),this.Yh=null,t):null},pc.prototype.Ww=function(t,e){var n=this,i=!1,o=new $,r=new $,a=new $,s=this.Yh;t.changes.each(function(t){t.model===n&&("nodeDataArray"===t.modelChange?t.change===Sn?o.add(t.newValue):t.change===xn&&a.add(t.oldValue):n.Za(t.object)?r.add(t.object):t.change!==bn||n.modelData!==t.object&&"modelData"!==t.propertyName?null!==t.object&&(s&&s.contains(t.object)?s.get(t.object).each(function(t){n.Za(t)&&r.add(t)}):t.object instanceof pc||n.pj()&&n.wc(t.object)||Sc(n,t.object).each(function(t){r.add(t)})):i=!0)});var h=this.Ki;h.clear(),o.each(function(t){h.add(n.ja(t)),e||r.add(t)});var u=this.Ni;u.clear(),a.each(function(t){u.add(n.ja(t)),e&&r.add(t)}),t=n.cloneDeep(r.ma());var l=null;return i&&(null===l&&(l={}),l.modelData=this.cloneDeep(this.modelData)),0<h.count&&(null===l&&(l={}),e?l.removedNodeKeys=h.ma():l.insertedNodeKeys=h.ma()),0<t.length&&(null===l&&(l={}),l.modifiedNodeData=t),0<u.count&&(null===l&&(l={}),e?l.insertedNodeKeys=u.ma():l.removedNodeKeys=u.ma()),u.clear(),h.clear(),l},pc.prototype.cloneDeep=function(t){return function t(e,n,i,o,r,a){function s(t,e){h?(void 0===t.__gohashid&&a.push(t),o.set(t,e)):(t=tt++,o.set(t,e),r.set(t,n))}if(!y(n))return n;a=a||[];var h=Object.isExtensible(n);o=o||new at;if(h){var u=o.get(n);if(u)return u}else for(r=r||new at,u=r.iterator;u.next();){var l=u.key;if(u.value===n&&(l=o.get(l)))return l}if(Array.isArray(n)){s(n,u=[]);for(var d=0;d<n.length;d++)u.push(t(e,n[d],!1,o,r,a))}else if(n instanceof ee||n instanceof xe||n instanceof ne||n instanceof Vt||n instanceof Be)u=n.copy(),s(n,u);else{if(n instanceof vs||n instanceof qe||n instanceof j)return n;if(n instanceof X)u=(new X).addAll(t(e,n.ma(),!1,o,r,a)),s(n,u);else if(n instanceof $)u=(new $).addAll(t(e,n.ma(),!1,o,r,a)),s(n,u);else if(n instanceof at)u=(new at).addAll(t(e,n.ma(),!1,o,r,a)),s(n,u);else if(n instanceof Date)u=new Date(n.getTime()),s(n,u);else if(n instanceof RegExp)u=new RegExp(n),s(n,u),u.lastIndex=n.lastIndex;else if("function"==typeof n.copy)u=n.copy(),s(n,u);else for(d in s(n,u={}),n)"__gohashid"!==d&&(u[d]=t(e,n[d],!1,o,r,a))}i&&a.forEach(function(t){delete t.__gohashid});return u}(this,t,!0)},(Bp=pc.prototype).Nk=function(){var t="";return""!==this.name&&(t+=',\n  "name": '+this.quote(this.name)),""!==this.dataFormat&&(t+=',\n  "dataFormat": '+this.quote(this.dataFormat)),this.isReadOnly&&(t+=',\n  "isReadOnly": '+this.isReadOnly),"key"!==this.nodeKeyProperty&&"string"==typeof this.nodeKeyProperty&&(t+=',\n  "nodeKeyProperty": '+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=',\n  "copiesArrays": true'),this.copiesArrayObjects&&(t+=',\n  "copiesArrayObjects": true'),this.copiesKey||(t+=',\n  "copiesKey": false'),"category"!==this.nodeCategoryProperty&&"string"==typeof this.nodeCategoryProperty&&(t+=',\n  "nodeCategoryProperty": '+this.quote(this.nodeCategoryProperty)),t},Bp.Yq=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),!1===t.copiesKey&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)},Bp.Xw=function(){var t,e=this.modelData,n=!1;for(t in e)if(!kc(t,e[t])){n=!0;break}return e="",n&&(e=mc(this)),e+',\n  "nodeDataArray": '+Pc(this,this.nodeDataArray,!0)},Bp.ow=function(t){yc(this,t),w(t=t.nodeDataArray)&&(this.Nm(t),this.nodeDataArray=t)},Bp.mr=function(t){wc(this,t,"nodeKeyProperty");var e=this.Ki;e.clear();var n=new $,i=this.Ni;i.clear(),i.addAll(this.Va.iteratorKeys);for(var o=new at,r=t.nodeDataArray,a=r.length,s=0;s<a;s++){var h,u=r[s],l=t.ja(u);void 0!==l?(i.remove(l),null===(h=this.Kb(l))?(e.add(l),n.add(u)):vc(this,h,u,o)||n.add(u)):(this.Yt(u),l=this.ja(u),e.add(l),n.add(u))}return r="",vc(this,this.modelData,t.modelData,o)||(r+=mc(this)),0<e.count&&(r+=this.su+Pc(this,e.ma(),!0)),0<n.count&&(r+=this.jx+Pc(this,n.ma(),!0)),0<i.count&&(r+=this.uu+Pc(this,i.ma(),!0)),i.clear(),e.clear(),r},Bp.yz=function(t,e){return void 0===e&&(e=Gc(this,this)),'{ "class": '+this.quote(e)+', "incremental": 1'+this.Nk()+this.mr(t)+"}"},Bp.Vw=function(t,e){var n=this,i=!1,o=new $,r=new $,a=new $,s=this.Yh;t.changes.each(function(t){t.model===n&&("nodeDataArray"===t.modelChange?t.change===Sn?o.add(t.newValue):t.change===xn&&a.add(t.oldValue):n.Za(t.object)?r.add(t.object):t.change!==bn||n.modelData!==t.object&&"modelData"!==t.propertyName?null!==t.object&&(s&&s.contains(t.object)?s.get(t.object).each(function(t){n.Za(t)&&r.add(t)}):t.object instanceof pc||n.pj()&&n.wc(t.object)||Sc(n,t.object).each(function(t){r.add(t)})):i=!0)});var h=this.Ki;h.clear(),o.each(function(t){h.add(n.ja(t)),e||r.add(t)});var u=this.Ni;return u.clear(),a.each(function(t){u.add(n.ja(t)),e&&r.add(t)}),t="",i&&(t+=mc(this)),0<h.count&&(t+=(e?this.uu:this.su)+Pc(this,h.ma(),!0)),0<r.count&&(t+=this.jx+Pc(this,r.ma(),!0)),0<u.count&&(t+=(e?this.su:this.uu)+Pc(this,u.ma(),!0)),u.clear(),h.clear(),t},Bp.Xq=function(t){(void 0!==t.name&&t.name!==this.name||void 0!==t.dataFormat&&t.dataFormat!==this.dataFormat||void 0!==t.isReadOnly&&t.isReadOnly!==this.isReadOnly||void 0!==t.nodeKeyProperty&&t.nodeKeyProperty!==this.nodeKeyProperty||void 0!==t.copiesArrays&&t.copiesArrays!==this.copiesArrays||void 0!==t.copiesArrayObjects&&t.copiesArrayObjects!==this.copiesArrayObjects||void 0!==t.copiesKey&&t.copiesKey!==this.copiesKey||void 0!==t.nodeCategoryProperty&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&O("applyIncrementalJson cannot change Model properties"),yc(this,t);var e=t.insertedNodeKeys,n=t.modifiedNodeData,i=new at;if(Array.isArray(n))for(var o=0;o<n.length;o++){var r=n[o],a=this.ja(r);null!=a&&i.set(a,r)}if(Array.isArray(e))for(o=e.length,r=0;r<o;r++){a=e[r];var s=this.Kb(a);null===s&&(s=(s=i.get(a))?s:this.copyNodeData({}),this.Um(s,a),this.uf(s))}if(Array.isArray(n))for(e=n.length,i=0;i<e;i++)if(o=n[i],r=this.ja(o),null!==(r=this.Kb(r))){for(var h in o)"__gohashid"===h||h===this.nodeKeyProperty||this.xk()&&h===this.nodeIsGroupProperty||this.setDataProperty(r,h,o[h]);this.Vm(o,r)}if(t=t.removedNodeKeys,Array.isArray(t))for(n=t.length,h=0;h<n;h++)null!==(e=this.Kb(t[h]))&&this.Mm(e)},Bp.Vy=function(t,e){t.change!==wn&&O("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var n=t.object;return t.isTransactionFinished&&n instanceof Pn?(void 0===e&&(e=Gc(this,this)),bc(this,n),t=this.Vw(n,"FinishedUndo"===t.propertyName),this.Yh=null,"2"===e?'{ "incremental": 2'+t+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.Nk()+t+"}"):'{ "incremental": 0 }'},Bp.aB=function(t,e){return this.Vy(t,e)},Bp.hr=function(t){return void 0===t&&(t=Gc(this,this)),'{ "class": '+this.quote(t)+this.Nk()+this.Xw()+"}"},Bp.toJSON=function(t){return this.hr(t)},Bp.Wx=function(t){var e=null;if("string"==typeof t)try{e=d.JSON.parse(t)}catch(t){}else"object"===_typeof(t)?e=t:O("Unable to modify a Model from: "+t);var n=e.incremental;"number"!=typeof n&&O("Unable to apply non-incremental changes to Model: "+t),0!==n&&(this.va("applyIncrementalJson"),this.Xq(e),this.Wa("applyIncrementalJson"))},Bp.pz=function(t){return this.Wx(t)},pc.constructGraphLinksModel=function(){return new pc},(Bp=pc.prototype).Nm=function(t){if(w(t))for(var e=t.length,n=0;n<e;n++){var i,o=t[n];y(o)&&(i=n,o=this.Nm(o),Array.isArray(t)?t[i]=o:O("Cannot replace an object in an HTMLCollection or NodeList at "+i))}else if(y(t)){for(n in t)if(y(i=t[n])&&(i=this.Nm(i),t[n]=i,"points"===n&&Array.isArray(i))){o=0==i.length%2;for(var r=0;r<i.length;r++)if("number"!=typeof i[r]){o=!1;break}if(o){for(o=new X,r=0;r<i.length/2;r++)o.add(new ee(i[2*r],i[2*r+1]));o.freeze(),t[n]=o}}if("object"===_typeof(t)){if(0===(i=(n=t).class||"").indexOf("go.")&&(i=i.substr(3)),"NaN"===i)n=NaN;else if("Date"===i)n=new Date(t.value);else if("Point"===i)n=new ee(_c(t.x),_c(t.y));else if("Size"===i)n=new xe(_c(t.width),_c(t.height));else if("Rect"===i)n=new ne(_c(t.x),_c(t.y),_c(t.width),_c(t.height));else if("Margin"===i)n=new Vt(_c(t.top),_c(t.right),_c(t.bottom),_c(t.left));else if("Spot"===i)n="string"==typeof t.enum?je(t.enum):new Be(_c(t.x),_c(t.y),_c(t.offsetX),_c(t.offsetY));else if("Brush"===i){if((n=new vs).type=z(vs,t.type),"string"==typeof t.color&&(n.color=t.color),t.start instanceof Be&&(n.start=t.start),t.end instanceof Be&&(n.end=t.end),"number"==typeof t.startRadius&&(n.startRadius=_c(t.startRadius)),"number"==typeof t.endRadius&&(n.endRadius=_c(t.endRadius)),y(t=t.colorStops))for(e in t)n.addColorStop(parseFloat(e),t[e])}else"Geometry"===i?(e=null,(e="string"==typeof t.path?Ke(t.path):new qe).type=z(qe,t.type),"number"==typeof t.startX&&(e.startX=_c(t.startX)),"number"==typeof t.startY&&(e.startY=_c(t.startY)),"number"==typeof t.endX&&(e.endX=_c(t.endX)),"number"==typeof t.endY&&(e.endY=_c(t.endY)),t.spot1 instanceof Be&&(e.spot1=t.spot1),t.spot2 instanceof Be&&(e.spot2=t.spot2),n=e):"EnumValue"===i&&(0===(e=t.classType).indexOf("go.")&&(e=e.substr(3)),"function"==typeof(e=jc(e))&&(n=z(e,t.name)));t=n}}return t},Bp.quote=function(t){for(var e="",n=t.length,i=0;i<n;i++){var o,r=t[i];'"'===r||"\\"===r?e+="\\"+r:"\b"===r?e+="\\b":"\f"===r?e+="\\f":"\n"===r?e+="\\n":"\r"===r?e+="\\r":"\t"===r?e+="\\t":e=(o=t.charCodeAt(i))<16?e+("\\u000"+t.charCodeAt(i).toString(16)):o<32?e+("\\u00"+t.charCodeAt(i).toString(16)):8232===o?e+"\\u2028":8233===o?e+"\\u2029":e+r}return'"'+e+'"'},Bp.$m=function(t){return void 0===t?"undefined":null===t?"null":!0===t?"true":!1===t?"false":"string"==typeof t?this.quote(t):"number"==typeof t?1/0===t?"9e9999":-1/0===t?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.$m(t.valueOf()):w(t)?Pc(this,t):y(t)?Mc(this,t):"function"==typeof t?"null":t.toString()},Bp.Hh=function(t){this.bv.add(t)},Bp.Kk=function(t){this.bv.remove(t)},Bp.zt=function(t){this.skipsUndoManager||this.undoManager.$v(t);for(var e=this.bv,n=e.length,i=0;i<n;i++)e.L(i)(t)},Bp.ab=function(t,e,n,i,o,r,a){Nc(this,"",t,e,n,i,o,r,a)},Bp.g=function(t,e,n,i,o){Nc(this,"",bn,t,this,e,n,i,o)},Bp.du=function(t,e,n,i,o,r){Nc(this,"",bn,e,t,n,i,o,r)},pc.prototype.changeState=function(t,e){var n,i,o;null!==t&&t.model===this&&(t.change===bn?(n=t.object,i=t.propertyName,o=t.H(e),i===this.nodeKeyProperty&&this.Za(n)&&(void 0!==(e=t.H(!e))&&this.Va.remove(e),void 0!==o&&this.Va.add(o,n)),Rc(n,i,o)):t.change===Sn?(n=t.newParam,"nodeDataArray"===t.modelChange?y(t=t.newValue)&&"number"==typeof n&&(i=this.ja(t),e?(this.Fc[n]===t&&x(this.Fc,n),void 0!==i&&this.Va.remove(i)):(this.Fc[n]!==t&&S(this.Fc,n,t),void 0!==i&&this.Va.add(i,t))):""===t.modelChange?((i=t.object)&&!w(i)&&t.propertyName&&(i=zc(t.object,t.propertyName)),w(i)&&"number"==typeof n&&(t=t.newValue,e?x(i,n):S(i,n,t))):O("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.change===xn?(n=t.oldParam,"nodeDataArray"===t.modelChange?y(t=t.oldValue)&&"number"==typeof n&&(i=this.ja(t),e?(this.Fc[n]!==t&&S(this.Fc,n,t),void 0!==i&&this.Va.add(i,t)):(this.Fc[n]===t&&x(this.Fc,n),void 0!==i&&this.Va.remove(i))):""===t.modelChange?((i=t.object)&&!w(i)&&t.propertyName&&(i=zc(t.object,t.propertyName)),w(i)&&"number"==typeof n&&(t=t.oldValue,e?S(i,n,t):x(i,n))):O("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==wn&&O("unknown ChangedEvent: "+t.toString()))},pc.prototype.va=function(t){return this.undoManager.va(t)},pc.prototype.Wa=function(t){return this.undoManager.Wa(t)},pc.prototype.Hf=function(){return this.undoManager.Hf()},pc.prototype.commit=function(t,e){void 0===e&&(e="");var n=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.va(e);var i=!1;try{t(this),i=!0}finally{i?this.undoManager.Wa(e):this.undoManager.Hf(),this.skipsUndoManager=n}},(Bp=pc.prototype).Ca=function(t,e){void 0===e&&(e=""),Nc(this,"SourceChanged",wn,e,t,null,null)},Bp.ja=function(t){if(null!==t){var e=this.Mi;if(""!==e&&void 0!==(e=zc(t,e))){if(Ac(e))return e;O("Key value for node data "+t+" is not a number or a string: "+e)}}},Bp.Um=function(t,e){var n,i;null===t||""!==(n=this.Mi)&&(this.Za(t)?(i=zc(t,n))!==e&&null===this.Kb(e)&&(Rc(t,n,e),void 0!==i&&this.Va.remove(i),this.Va.add(e,t),Nc(this,"nodeKey",bn,n,t,i,e),"string"==typeof n&&this.Ca(t,n),this.br(i,e)):Rc(t,n,e))},Bp.Za=function(t){var e=this.ja(t);return void 0!==e&&this.Va.H(e)===t},Bp.Kb=function(t){return null===t&&O("Model.findNodeDataForKey:key must not be null"),void 0!==t&&Ac(t)?this.Va.H(t):null},Bp.Yt=function(t){if(null!==t){var e=this.Mi;if(""!==e){var n=this.ja(t);if(void 0===n||this.Va.contains(n)){var i=this.Jl;if(null===i||(null==(n=i(this,t))||this.Va.contains(n))){if("string"==typeof n){for(i=2;this.Va.contains(n+i);)i++;Rc(t,e,n+i)}else if(void 0===n||"number"==typeof n){for(n=-this.Va.count-1;this.Va.contains(n);)n--;Rc(t,e,n)}}else Rc(t,e,n)}}}},Bp.uf=function(t){null!==t&&(Z(t),this.Za(t)||Tc(this,t,!0))},Bp.lz=function(t){if(w(t))for(var e=t.length,n=0;n<e;n++)this.uf(t[n]);else for(t=t.iterator;t.next();)this.uf(t.value)},Bp.Mm=function(t){null!==t&&Cc(this,t,!0)},Bp.QA=function(t){if(w(t))for(var e=t.length,n=0;n<e;n++)this.Mm(t[n]);else for(t=t.iterator;t.next();)this.Mm(t.value)},Bp.GA=function(t){if(t!==this.nodeDataArray&&w(t)){var e=this.Ni;e.clear(),e.addAll(this.Va.iteratorKeys);var n=this.Ki;n.clear();for(var i=t.length,o=0;o<i;o++){var r,a=t[o],s=this.ja(a);void 0!==s?(n.add(s),(r=this.Kb(s))!==a&&(null!==r?(this.tq(r,a),this.Vm(a,r)):(a=this.cloneDeep(a),this.Um(a,s),this.uf(a)))):(s=this.cloneDeep(a),this.uf(s),n.add(this.ja(s)))}for(t=e.iterator;t.next();)i=t.value,n.contains(i)||(i=this.Kb(i))&&this.Mm(i);e.clear(),n.clear()}},Bp.br=function(t,e){void 0!==e&&((t=Fc(this,t))instanceof $&&this.Sf.add(e,t))},Bp.Qw=function(){},Bp.Pm=function(){},Bp.Om=function(){},Bp.jr=function(){},Bp.xz=function(t){void 0===t?this.Sf.clear():this.Sf.remove(t)},pc.prototype.copyNodeData=function(t){if(null===t)return null;var e=this.bl;return y(t=null!==e?e(t,this):Oc(this,t,!0))&&J(t),t},pc.prototype.setDataProperty=function(t,e,n){if(this.Za(t)){if(e===this.nodeKeyProperty)return void this.Um(t,n);if(e===this.nodeCategoryProperty)return void this.Tm(t,n)}else!Ic&&t instanceof Na&&(Ic=!0,p('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),p("  Is that really your intent?"));var i=zc(t,e);i!==n&&(Rc(t,e,n),this.du(t,e,i,n))},(Bp=pc.prototype).set=function(t,e,n){this.setDataProperty(t,e,n)},Bp.tq=function(t,e){if(e){var n,i=this.Za(t);for(n in e)"__gohashid"===n||i&&n===this.nodeKeyProperty||this.setDataProperty(t,n,e[n])}},Bp.iz=function(t,e){this.Pt(t,-1,e)},Bp.Pt=function(t,e,n){e<0&&(e=t.length),S(t,e,n),Nc(this,"",Sn,"",t,null,n,null,e)},Bp.qw=function(t,e){void 0===e&&(e=-1),t===this.Fc&&O("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===e&&(e=t.length-1);var n=t[e];x(t,e),Nc(this,"",xn,"",t,n,null,e,null)},Bp.Gq=function(t){if(null===t)return"";var e=this.Vj;return""===e||void 0===(e=zc(t,e))?"":"string"==typeof e?e:(O("getCategoryForNodeData found a non-string category for "+t+": "+e),"")},Bp.Tm=function(t,e){var n,i;null===t||""!==(n=this.Vj)&&(this.Za(t)?(void 0===(i=zc(t,n))&&(i=""),i!==e&&(Rc(t,n,e),Nc(this,"nodeCategory",bn,n,t,i,e))):Rc(t,n,e))},Bp.Vm=function(t,e){this.Tm(e,this.Gq(t))},Bp.Am=function(){return!1},Bp.xk=function(){return!1},Bp.pj=function(){return!1},Bp.Ut=function(){return!1},Bp.yk=function(){return!1},s.Object.defineProperties(pc.prototype,{name:{get:function(){return this.Qa},set:function(t){var e=this.Qa;e!==t&&(this.Qa=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.Kn},set:function(t){var e=this.Kn;e!==t&&(this.Kn=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.$f},set:function(t){var e=this.$f;e!==t&&(this.$f=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.l},set:function(t){var e=this.l;e!==t&&(this.l=t,this.g("modelData",e,t),this.Ca(t))}},undoManager:{get:function(){return this.v},set:function(t){var e=this.v;e!==t&&(null!==e&&e.My(this),null!==(this.v=t)&&t.Ux(this))}},skipsUndoManager:{get:function(){return this.ug},set:function(t){this.ug=t}},nodeKeyProperty:{get:function(){return this.Mi},set:function(t){var e=this.Mi;e!==t&&(""===t&&O("Model.nodeKeyProperty may not be the empty string"),0<this.Va.count&&O("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Mi=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.Jl},set:function(t){var e=this.Jl;e!==t&&(this.Jl=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Fc},set:function(t){var e=this.Fc;if(e!==t){this.Va.clear(),this.Qw();for(var n=t.length,i=0;i<n;i++){var o=t[i];if(!y(o))return void O("Model.nodeDataArray must only contain Objects, not: "+o);Z(o)}for(this.Fc=t,i=new X,o=0;o<n;o++){var r=t[o],a=this.ja(r);void 0===a||null!==this.Va.H(a)?i.add(r):this.Va.add(a,r)}for(i=i.iterator;i.next();)o=i.value,this.Yt(o),void 0!==(r=this.ja(o))&&this.Va.add(r,o);for(Nc(this,"nodeDataArray",bn,"nodeDataArray",this,e,t),e=0;e<n;e++)i=t[e],this.Pm(i),this.Om(i);Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.bl},set:function(t){var e=this.bl;e!==t&&(this.bl=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.Cn},set:function(t){var e=this.Cn;e!==t&&(this.Cn=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.Bn},set:function(t){var e=this.Bn;e!==t&&(this.Bn=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.En},set:function(t){var e=this.En;e!==t&&(this.En=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.hn},set:function(t){var e=this.hn;e!==t&&(this.hn=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.Vj},set:function(t){var e=this.Vj;e!==t&&(this.Vj=t,this.g("nodeCategoryProperty",e,t))}},type:{get:function(){return"Model"}}}),pc.prototype.setCategoryForNodeData=pc.prototype.Tm,pc.prototype.getCategoryForNodeData=pc.prototype.Gq,pc.prototype.removeArrayItem=pc.prototype.qw,pc.prototype.insertArrayItem=pc.prototype.Pt,pc.prototype.addArrayItem=pc.prototype.iz,pc.prototype.assignAllDataProperties=pc.prototype.tq,pc.prototype.clearUnresolvedReferences=pc.prototype.xz,pc.prototype.mergeNodeDataArray=pc.prototype.GA,pc.prototype.removeNodeDataCollection=pc.prototype.QA,pc.prototype.removeNodeData=pc.prototype.Mm,pc.prototype.addNodeDataCollection=pc.prototype.lz,pc.prototype.addNodeData=pc.prototype.uf,pc.prototype.makeNodeDataKeyUnique=pc.prototype.Yt,pc.prototype.findNodeDataForKey=pc.prototype.Kb,pc.prototype.containsNodeData=pc.prototype.Za,pc.prototype.setKeyForNodeData=pc.prototype.Um,pc.prototype.getKeyForNodeData=pc.prototype.ja,pc.prototype.updateTargetBindings=pc.prototype.Ca,pc.prototype.rollbackTransaction=pc.prototype.Hf,pc.prototype.commitTransaction=pc.prototype.Wa,pc.prototype.startTransaction=pc.prototype.va,pc.prototype.raiseDataChanged=pc.prototype.du,pc.prototype.raiseChanged=pc.prototype.g,pc.prototype.raiseChangedEvent=pc.prototype.ab,pc.prototype.removeChangedListener=pc.prototype.Kk,pc.prototype.addChangedListener=pc.prototype.Hh,pc.prototype.writeJsonValue=pc.prototype.$m,pc.prototype.replaceJsonObjects=pc.prototype.Nm,pc.prototype.applyIncrementalJSON=pc.prototype.pz,pc.prototype.applyIncrementalJson=pc.prototype.Wx,pc.prototype.toJson=pc.prototype.hr,pc.prototype.toIncrementalJSON=pc.prototype.aB,pc.prototype.toIncrementalJson=pc.prototype.Vy,pc.prototype.computeJsonDifference=pc.prototype.yz,pc.prototype.toIncrementalData=pc.prototype.$A;var Ic=!1,Vc={};function Uc(t,e,n){J(this),this.s=!1,void 0===t&&(t=""),void 0===e&&(e=t),void 0===n&&(n=null),this.l=-1,this.jd=null,this.jm=t,this.im=this.fq=0,this.ht=null,this.wo=!1,this.bm=e,this.An=n,this.Vo=Hc,this.tn=null,this.Nu=new $}function qc(t,e,n){return null===(t=t.sourceName)||""===t?e:"/"===t?n.part:"."===t?n:".."===t?n.panel:e.$a(t)}pc.className="Model",pc.fromJSON=pc.fromJson=function(t,e){void 0===e&&(e=null);var n=null;if("string"==typeof t)try{n=d.JSON.parse(t)}catch(t){}else"object"===_typeof(t)?n=t:O("Unable to construct a Model from: "+t);if(null===e){t=null;var i=n.class;if("string"==typeof i)try{var o=null;0===i.indexOf("go.")?o=jc(i=i.substr(3)):null===(o=jc(i))&&(o=d[i]),"function"==typeof o&&(t=new o)}catch(t){}null===t||t instanceof pc?e=t:O("Unable to construct a Model of declared class: "+n.class)}return null===e&&(e=pc.constructGraphLinksModel()),e.Yq(n),e.ow(n),e},pc.safePropertyValue=zc,pc.safePropertySet=Rc,Vc.Brush=vs,Vc.ChangedEvent=vn,Vc.Geometry=qe,Vc.Margin=Vt,Vc.Panel=hh,Vc.Point=ee,Vc.Rect=ne,Vc.Size=xe,Vc.Spot=Be,Vc.Transaction=Pn,Vc.UndoManager=kn,Uc.prototype.copy=function(){var t=new Uc;return t.jm=this.jm,t.fq=this.fq,t.im=this.im,t.ht=this.ht,t.wo=this.wo,t.bm=this.bm,t.An=this.An,t.Vo=this.Vo,t.tn=this.tn,t},(Bp=Uc.prototype).hb=function(t){t.classType===Uc&&(this.mode=t)},Bp.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(-1!==this.vj?" "+this.vj:"")+" "+this.mode.name+")"},Bp.freeze=function(){return this.s=!0,this},Bp.ea=function(){return this.s=!1,this},Bp.Fy=function(t){return void 0===t&&(t=null),this.mode=Yc,this.backConverter=t,this},Bp.Uq=function(t){return void 0===t&&(t=""),this.sourceName=t,this.isToModel=!1,this},Bp.IA=function(){return this.sourceName=null,this.isToModel=!0,this},Bp.Rw=function(t,e,n){var i=this.bm;if(void 0===n||""===i||i===n){n=this.jm;var o=this.An;if(null===o&&""===n)p("Binding error: target property is the empty string: "+this.toString());else{var r=e;if(""!==i&&(r=zc(e,i)),void 0!==r)if(null===o)""!==n&&Rc(t,n,r);else try{""!==n?Rc(t,n,o(r,t)):o(r,t)}catch(t){}}}},Bp.lr=function(t,e,n,i){if(this.Vo===Yc){var o=this.jm;if(void 0===n||o===n){n=this.bm;var r=this.tn,a=t;if(""!==o&&(a=zc(t,o)),void 0!==a&&!this.Nu.contains(t))try{this.Nu.add(t);var s,h,u,l,d=null!==i?i.diagram:null,c=null!==d?d.model:null;if(null===r)""!==n?null!==c?c.setDataProperty(e,n,a):Rc(e,n,a):null!==c&&null!==i&&0<=i.itemIndex&&null!==i.panel&&Array.isArray(i.panel.itemArray)&&(s=i.itemIndex,d=i.panel.itemArray,c.qw(d,s),c.Pt(d,s,a));else try{""!==n?(l=r(a,e,c),null!==c?c.setDataProperty(e,n,l):Rc(e,n,l)):void 0!==(h=r(a,e,c))&&null!==c&&null!==i&&0<=i.itemIndex&&null!==i.panel&&Array.isArray(i.panel.itemArray)&&(u=i.itemIndex,l=i.panel.itemArray,c.qw(l,u),c.Pt(l,u,h))}catch(t){}}finally{this.Nu.remove(t)}}}},s.Object.defineProperties(Uc.prototype,{vj:{get:function(){return this.l},set:function(t){this.s&&g(this),this.l=t}},targetProperty:{get:function(){return this.jm},set:function(t){this.s&&g(this),this.jm=t}},sourceName:{get:function(){return this.ht},set:function(t){this.s&&g(this),null!==(this.ht=t)&&(this.wo=!1)}},isToModel:{get:function(){return this.wo},set:function(t){this.s&&g(this),this.wo=t}},sourceProperty:{get:function(){return this.bm},set:function(t){this.s&&g(this),this.bm=t}},converter:{get:function(){return this.An},set:function(t){this.s&&g(this),this.An=t}},backConverter:{get:function(){return this.tn},set:function(t){this.s&&g(this),this.tn=t}},mode:{get:function(){return this.Vo},set:function(t){this.s&&g(this),this.Vo=t}}}),Uc.prototype.updateSource=Uc.prototype.lr,Uc.prototype.updateTarget=Uc.prototype.Rw,Uc.prototype.ofModel=Uc.prototype.IA,Uc.prototype.ofObject=Uc.prototype.Uq,Uc.prototype.makeTwoWay=Uc.prototype.Fy;var Hc=new j(Uc,"OneWay",1),Yc=new j(Uc,"TwoWay",2);function Kc(t,e){pc.call(this),this.ru=',\n  "insertedLinkKeys": ',this.ix=',\n  "modifiedLinkData": ',this.tu=',\n  "removedLinkKeys": ',this.Wc=[],this.ag=new $,this.fb=new at,this.Gi="",this.xj=this.al=this.Kl=null,this.$e="from",this.af="to",this.Sj=this.Rj="",this.Qj="category",this.Td="",this.Ol="isGroup",this.ve="group",this.Dn=!1,void 0!==t&&(this.nodeDataArray=t),void 0!==e&&(this.linkDataArray=e)}function Xc(t,e){for(var n=new $,i=0;i<t.linkDataArray.length;i++){var o=t.linkDataArray[i];xc(t,e,o,o,n)}return n}function Wc(t,e,n){if(null!==e&&(""!==(t=n?t.$e:t.af)&&void 0!==(t=zc(e,t)))){if(Ac(t))return t;O((n?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function $c(t,e,n,i){var o,r;null===n&&(n=void 0),null===e||""!==(o=i?t.$e:t.af)&&(n=t.Cm(n),t.wc(e)?(r=zc(e,o))!==n&&(Ec(t,r,e),Rc(e,o,n),null===t.Kb(n)&&Dc(t,n,e),Nc(t,i?"linkFromKey":"linkToKey",bn,o,e,r,n),"string"==typeof o&&t.Ca(e,o)):Rc(e,o,n))}function Jc(t,e,n){return null===e||""===(t=n?t.Rj:t.Sj)||void 0===(e=zc(e,t))?"":e}function Zc(t,e,n,i){var o,r;null===e||""!==(o=i?t.Rj:t.Sj)&&(t.wc(e)?(void 0===(r=zc(e,o))&&(r=""),r!==n&&(Rc(e,o,n),Nc(t,i?"linkFromPortId":"linkToPortId",bn,o,e,r,n),"string"==typeof o&&t.Ca(e,o))):Rc(e,o,n))}function Qc(t,e,n){if(""!==t.linkKeyProperty){var i=t.Vb(e);if(void 0!==i&&t.fb.H(i)===e)return;if(t.Rq(e),void 0===(i=t.Vb(e)))return void O("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model.");t.fb.add(i,e)}t.ag.add(e),i=null,n&&(i=t.Wc.length,t.Wc.splice(i,0,e)),Nc(t,"linkDataArray",Sn,"linkDataArray",t,null,e,null,i),eg(t,e)}function tg(t,e,n){t.ag.remove(e);var i=t.Vb(e);if(void 0!==i&&t.fb.remove(i),i=null,n){if((i=t.Wc.indexOf(e))<0)return;t.Wc.splice(i,1)}if(Nc(t,"linkDataArray",xn,"linkDataArray",t,e,null,i,null),Ec(t,n=Wc(t,e,!0),e),Ec(t,n=Wc(t,e,!1),e),i=t.Bf(e),Array.isArray(i))for(var o=i.length,r=0;r<o;r++)Ec(t,n=i[r],e)}function eg(t,e){var n=Wc(t,e,!0),n=t.Cm(n);null===t.Kb(n)&&Dc(t,n,e),n=Wc(t,e,!1),n=t.Cm(n),null===t.Kb(n)&&Dc(t,n,e);var i=t.Bf(e);if(Array.isArray(i))for(var o=i.length,r=0;r<o;r++)n=i[r],null===t.Kb(n)&&Dc(t,n,e)}function ng(t,e,n){t.dr(n,t.Mt(e)),t.Aw(n,t.uy(e)),t.Fw(n,t.xy(e)),t.ju(n,t.Bf(e)),t.Bw(n,t.vy(e)),t.Gw(n,t.yy(e))}Uc.className="Binding",Uc.parseEnum=function(e,n){return function(t){return null===(t=z(e,t))?n:t}},Uc.toString=k,Uc.OneWay=Hc,Uc.TwoWay=Yc,n(Kc,pc),Kc.constructGraphLinksModel=pc.constructGraphLinksModel,Kc.prototype.cloneProtected=function(t){pc.prototype.cloneProtected.call(this,t),t.Gi=this.Gi,t.Kl=this.Kl,t.al=this.al,t.$e=this.$e,t.af=this.af,t.Rj=this.Rj,t.Sj=this.Sj,t.Qj=this.Qj,t.Td=this.Td,t.Ol=this.Ol,t.ve=this.ve,t.Dn=this.Dn},(Bp=Kc.prototype).clear=function(){pc.prototype.clear.call(this),this.Wc=[],this.fb.clear(),this.ag.clear()},Bp.toString=function(t){if(void 0===t&&(t=0),2<=t)return this.hr();var e=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<t){e+="\n node data:";for(var n=(t=this.nodeDataArray).length,i=0;i<n;i++){var o=t[i];e+=" "+this.ja(o)+":"+k(o)}for(e+="\n link data:",n=(t=this.linkDataArray).length,i=0;i<n;i++)e+=" "+Wc(this,o=t[i],!0)+"--\x3e"+Wc(this,o,!1)}return e},Bp.Ww=function(t,e){""===this.linkKeyProperty&&O("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.");var n=pc.prototype.Ww.call(this,t,e),i=this,o=new $,r=new $,a=new $,s=this.Yh;t.changes.each(function(t){t.model===i&&("linkDataArray"===t.modelChange?t.change===Sn?o.add(t.newValue):t.change===xn&&a.add(t.oldValue):i.wc(t.object)?r.add(t.object):null!==t.object&&(null!==t.object&&s&&s.contains(t.object)?s.get(t.object).each(function(t){i.wc(t)&&r.add(t)}):t.object instanceof pc||i.Za(t.object)||Xc(i,t.object).each(function(t){r.add(t)})))});var h=this.Ki;h.clear(),o.each(function(t){h.add(i.Vb(t)),e||r.add(t)});var u=this.Ni;return u.clear(),a.each(function(t){u.add(i.Vb(t)),e&&r.add(t)}),t=i.cloneDeep(r.ma()),0<h.count&&(null===n&&(n={}),e?n.removedLinkKeys=h.ma():n.insertedLinkKeys=h.ma()),0<t.length&&(null===n&&(n={}),n.modifiedLinkData=t),0<u.count&&(null===n&&(n={}),e?n.insertedLinkKeys=u.ma():n.removedLinkKeys=u.ma()),u.clear(),h.clear(),n},Bp.Nk=function(){var t=pc.prototype.Nk.call(this),e="";return"category"!==this.linkCategoryProperty&&"string"==typeof this.linkCategoryProperty&&(e+=',\n  "linkCategoryProperty": '+this.quote(this.linkCategoryProperty)),""!==this.linkKeyProperty&&"string"==typeof this.linkKeyProperty&&(e+=',\n  "linkKeyProperty": '+this.quote(this.linkKeyProperty)),"from"!==this.linkFromKeyProperty&&"string"==typeof this.linkFromKeyProperty&&(e+=',\n  "linkFromKeyProperty": '+this.quote(this.linkFromKeyProperty)),"to"!==this.linkToKeyProperty&&"string"==typeof this.linkToKeyProperty&&(e+=',\n  "linkToKeyProperty": '+this.quote(this.linkToKeyProperty)),""!==this.linkFromPortIdProperty&&"string"==typeof this.linkFromPortIdProperty&&(e+=',\n  "linkFromPortIdProperty": '+this.quote(this.linkFromPortIdProperty)),""!==this.linkToPortIdProperty&&"string"==typeof this.linkToPortIdProperty&&(e+=',\n  "linkToPortIdProperty": '+this.quote(this.linkToPortIdProperty)),""!==this.linkLabelKeysProperty&&"string"==typeof this.linkLabelKeysProperty&&(e+=',\n  "linkLabelKeysProperty": '+this.quote(this.linkLabelKeysProperty)),"isGroup"!==this.nodeIsGroupProperty&&"string"==typeof this.nodeIsGroupProperty&&(e+=',\n  "nodeIsGroupProperty": '+this.quote(this.nodeIsGroupProperty)),"group"!==this.nodeGroupKeyProperty&&"string"==typeof this.nodeGroupKeyProperty&&(e+=',\n  "nodeGroupKeyProperty": '+this.quote(this.nodeGroupKeyProperty)),t+e},Bp.Yq=function(t){pc.prototype.Yq.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},Bp.Xw=function(){return pc.prototype.Xw.call(this)+(',\n  "linkDataArray": '+Pc(this,this.linkDataArray,!0))},Bp.ow=function(t){pc.prototype.ow.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.Nm(t),this.linkDataArray=t)},Bp.mr=function(t){if(!(t instanceof Kc))return O("Model.computeJsonDifference: newmodel must be a GraphLinksModel"),"";""===this.linkKeyProperty&&O("GraphLinksModel.linkKeyProperty must not be an empty string for .computeJsonDifference() to succeed.");var e=pc.prototype.mr.call(this,t);wc(this,t,"linkKeyProperty"),wc(this,t,"linkFromKeyProperty"),wc(this,t,"linkToKeyProperty"),wc(this,t,"linkLabelKeysProperty"),wc(this,t,"nodeIsGroupProperty"),wc(this,t,"nodeGroupKeyProperty");var n=this.Ki;n.clear();var i=new $,o=this.Ni;o.clear(),o.addAll(this.fb.iteratorKeys);for(var r=new at,a=t.linkDataArray,s=a.length,h=0;h<s;h++){var u,l=a[h],d=t.Vb(l);void 0!==d?(o.remove(d),null===(u=this.Dg(d))?(n.add(d),i.add(l)):vc(this,u,l,r)||i.add(l)):(this.Rq(l),d=this.Vb(l),n.add(d),i.add(l))}return t=e,0<n.count&&(t+=this.ru+Pc(this,n.ma(),!0)),0<i.count&&(t+=this.ix+Pc(this,i.ma(),!0)),0<o.count&&(t+=this.tu+Pc(this,o.ma(),!0)),o.clear(),n.clear(),t},Bp.Vw=function(t,e){""===this.linkKeyProperty&&O("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var n=pc.prototype.Vw.call(this,t,e),i=this,o=new $,r=new $,a=new $,s=this.Yh;t.changes.each(function(t){t.model===i&&("linkDataArray"===t.modelChange?t.change===Sn?o.add(t.newValue):t.change===xn&&a.add(t.oldValue):i.wc(t.object)?r.add(t.object):null!==t.object&&(null!==t.object&&s&&s.contains(t.object)?s.get(t.object).each(function(t){i.wc(t)&&r.add(t)}):t.object instanceof pc||i.Za(t.object)||Xc(i,t.object).each(function(t){r.add(t)})))});var h=this.Ki;h.clear(),o.each(function(t){h.add(i.Vb(t)),e||r.add(t)});var u=this.Ni;return u.clear(),a.each(function(t){u.add(i.Vb(t)),e&&r.add(t)}),t=n,0<h.count&&(t+=(e?this.tu:this.ru)+Pc(this,h.ma(),!0)),0<r.count&&(t+=this.ix+Pc(this,r.ma(),!0)),0<u.count&&(t+=(e?this.ru:this.tu)+Pc(this,u.ma(),!0)),u.clear(),h.clear(),t},Bp.Xq=function(t){(void 0!==t.linkCategoryProperty&&t.linkCategoryProperty!==this.linkCategoryProperty||void 0!==t.linkKeyProperty&&t.linkKeyProperty!==this.linkKeyProperty||void 0!==t.linkFromKeyProperty&&t.linkFromKeyProperty!==this.linkFromKeyProperty||void 0!==t.linkToKeyProperty&&t.linkToKeyProperty!==this.linkToKeyProperty||void 0!==t.linkFromPortIdProperty&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||void 0!==t.linkToPortIdProperty&&t.linkToPortIdProperty!==this.linkToPortIdProperty||void 0!==t.linkLabelKeysProperty&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||void 0!==t.nodeIsGroupProperty&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||void 0!==t.nodeGroupKeyProperty&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&O("applyIncrementalJson cannot change Model properties"),pc.prototype.Xq.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var n=e.length,i=0;i<n;i++){var o=e[i],r=this.Dg(o);null===r&&(r=this.yq({}),this.iu(r,o),this.bj(r))}if(e=t.modifiedLinkData,Array.isArray(e))for(n=e.length,i=0;i<n;i++)if(o=e[i],r=this.Vb(o),null!==(r=this.Dg(r))){for(var a in o)"__gohashid"!==a&&a!==this.linkKeyProperty&&this.setDataProperty(r,a,o[a]);ng(this,o,r)}if(t=t.removedLinkKeys,Array.isArray(t))for(a=t.length,e=0;e<a;e++)null!==(n=this.Dg(t[e]))&&this.Lm(n)},Kc.prototype.changeState=function(t,e){if(null!==t&&t.model===this){if(t.change===bn){var n=t.object,i=t.propertyName;if(i===this.linkKeyProperty&&this.wc(n)){var o=t.H(e);return void 0!==(e=t.H(!e))&&this.fb.remove(e),void 0!==o&&this.fb.add(o,n),void Rc(n,i,o)}}else if(t.change===Sn){if(n=t.newParam,"linkDataArray"===t.modelChange)return void(y(t=t.newValue)&&"number"==typeof n&&(i=this.Vb(t),e?(this.ag.remove(t),this.Wc[n]===t&&this.Wc.splice(n,1),void 0!==i&&this.fb.remove(i)):(this.ag.add(t),this.Wc[n]!==t&&this.Wc.splice(n,0,t),void 0!==i&&this.fb.add(i,t))));if("linkLabelKeys"===t.modelChange)return i=this.Bf(t.object),void(Array.isArray(i)&&"number"==typeof n&&(e?0<=(n=i.indexOf(t.newValue))&&i.splice(n,1):i.indexOf(t.newValue)<0&&i.splice(n,0,t.newValue)))}else if(t.change===xn){if(n=t.oldParam,"linkDataArray"===t.modelChange)return void(y(t=t.oldValue)&&"number"==typeof n&&(i=this.Vb(t),e?(this.ag.add(t),this.Wc[n]!==t&&this.Wc.splice(n,0,t),void 0!==i&&this.fb.add(i,t)):(this.ag.remove(t),this.Wc[n]===t&&this.Wc.splice(n,1),void 0!==i&&this.fb.remove(i))));if("linkLabelKeys"===t.modelChange)return i=this.Bf(t.object),void(Array.isArray(i)&&"number"==typeof n&&(e?i.indexOf(t.newValue)<0&&i.splice(n,0,t.newValue):0<=(n=i.indexOf(t.newValue))&&i.splice(n,1)))}pc.prototype.changeState.call(this,t,e)}},(Bp=Kc.prototype).Cm=function(t){if(void 0!==t){var e,n=this.xj;return null===n||null===(e=this.Kb(t))&&(Rc(e=this.copyNodeData(n),this.nodeKeyProperty,t),this.uf(e)),t}},Bp.uy=function(t){return Wc(this,t,!0)},Bp.Aw=function(t,e){$c(this,t,e,!0)},Bp.xy=function(t){return Wc(this,t,!1)},Bp.Fw=function(t,e){$c(this,t,e,!1)},Bp.vy=function(t){return Jc(this,t,!0)},Bp.Bw=function(t,e){Zc(this,t,e,!0)},Bp.yy=function(t){return Jc(this,t,!1)},Bp.Gw=function(t,e){Zc(this,t,e,!1)},Bp.Bf=function(t){if(null===t)return ig;var e=this.Td;return""===e||void 0===(t=zc(t,e))?ig:t},Bp.ju=function(t,e){if(null!==t){var n=this.Td;if(""!==n)if(this.wc(t)){var i=zc(t,n);if(void 0===i&&(i=ig),i!==e){if(Array.isArray(i))for(var o=i.length,r=0;r<o;r++)Ec(this,i[r],t);for(Rc(t,n,e),o=e.length,r=0;r<o;r++){var a=e[r];null===this.Kb(a)&&Dc(this,a,t)}Nc(this,"linkLabelKeys",bn,n,t,i,e),"string"==typeof n&&this.Ca(t,n)}}else Rc(t,n,e)}},Bp.Dv=function(t,e){var n,i,o;null==e||null===t||""!==(n=this.Td)&&(void 0===(i=zc(t,n))?((n=[]).push(e),this.ju(t,n)):Array.isArray(i)?0<=(o=i.indexOf(e))||(o=i.length,i.push(e),this.wc(t)&&(null===this.Kb(e)&&Dc(this,e,t),Nc(this,"linkLabelKeys",Sn,n,t,null,e,null,o))):O(n+" property is not an Array; cannot addLabelKeyForLinkData: "+t))},Bp.Ly=function(t,e){var n,i,o;null==e||null===t||""!==(n=this.Td)&&(i=zc(t,n),Array.isArray(i)?(o=i.indexOf(e))<0||(i.splice(o,1),this.wc(t)&&(Ec(this,e,t),Nc(this,"linkLabelKeys",xn,n,t,e,null,o,null))):void 0!==i&&O(n+" property is not an Array; cannot removeLabelKeyforLinkData: "+t))},Bp.Vb=function(t){if(null!==t){var e=this.Gi;if(""!==e&&void 0!==(e=zc(t,e))){if(Ac(e))return e;O("Key value for link data "+t+" is not a number or a string: "+e)}}},Bp.iu=function(t,e){var n,i;null===t||""!==(n=this.Gi)&&(this.wc(t)?(i=zc(t,n))!==e&&null===this.Dg(e)&&(Rc(t,n,e),void 0!==i&&this.fb.remove(i),this.fb.add(e,t),Nc(this,"linkKey",bn,n,t,i,e),"string"==typeof n&&this.Ca(t,n)):Rc(t,n,e))},Bp.Dg=function(t){return null===t&&O("GraphLinksModel.findLinkDataForKey:key must not be null"),void 0!==t&&Ac(t)?this.fb.H(t):null},Bp.Rq=function(t){if(null!==t){var e=this.Gi;if(""!==e){var n=this.Vb(t);if(void 0===n||this.fb.contains(n)){var i=this.Kl;if(null===i||(null==(n=i(this,t))||this.fb.contains(n))){if("string"==typeof n){for(i=2;this.fb.contains(n+i);)i++;Rc(t,e,n+i)}else if(void 0===n||"number"==typeof n){for(n=-this.fb.count-1;this.fb.contains(n);)n--;Rc(t,e,n)}}else Rc(t,e,n)}}}},Bp.wc=function(t){return null!==t&&this.ag.contains(t)},Bp.bj=function(t){null!==t&&(Z(t),this.wc(t)||Qc(this,t,!0))},Bp.kz=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.bj(t[n]);else for(t=t.iterator;t.next();)this.bj(t.value)},Bp.Lm=function(t){null!==t&&tg(this,t,!0)},Bp.OA=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.Lm(t[n]);else for(t=t.iterator;t.next();)this.Lm(t.value)},Bp.FA=function(t){if(""===this.linkKeyProperty&&O("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t!==this.linkDataArray&&w(t)){var e=this.Ni;e.clear(),e.addAll(this.fb.iteratorKeys);var n=this.Ki;n.clear();for(var i=t.length,o=0;o<i;o++){var r,a=t[o],s=this.Vb(a);void 0!==s?(n.add(s),(r=this.Dg(s))!==a&&(null!==r?(this.tq(r,a),ng(this,a,r)):(a=this.cloneDeep(a),this.iu(a,s),this.bj(a)))):(s=this.cloneDeep(a),this.bj(s),n.add(this.Vb(s)))}for(t=e.iterator;t.next();)i=t.value,n.contains(i)||(i=this.Dg(i))&&this.Lm(i);e.clear(),n.clear()}},Bp.yq=function(t){if(null===t)return null;var e=this.al;return y(t=null!==e?e(t,this):Oc(this,t,!0))&&(J(t),""!==this.$e&&Rc(t,this.$e,void 0),""!==this.af&&Rc(t,this.af,void 0),""!==this.Td&&Rc(t,this.Td,[])),t},Bp.ew=function(t){if(null===t)return!1;var e=this.Ol;return""!==e&&!!zc(t,e)},Bp.Lh=function(t){if(null!==t){var e=this.ve;if(""!==e&&void 0!==(e=zc(t,e))){if(Ac(e))return e;O("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},Bp.er=function(t,e){var n,i;null===e&&(e=void 0),null===t||""!==(n=this.ve)&&(this.Za(t)?(i=zc(t,n))!==e&&(Ec(this,i,t),Rc(t,n,e),null===this.Kb(e)&&Dc(this,e,t),Nc(this,"nodeGroupKey",bn,n,t,i,e),"string"==typeof n&&this.Ca(t,n)):Rc(t,n,e))},Kc.prototype.copyNodeData=function(t){return null===t?null:(t=pc.prototype.copyNodeData.call(this,t),this.nk||""===this.ve||void 0===zc(t,this.ve)||Rc(t,this.ve,void 0),t)},Kc.prototype.setDataProperty=function(t,e,n){if(this.Za(t)){if(e===this.nodeKeyProperty)return void this.Um(t,n);if(e===this.nodeCategoryProperty)return void this.Tm(t,n);if(e===this.nodeGroupKeyProperty)return void this.er(t,n)}else if(this.wc(t)){if(e===this.linkFromKeyProperty)return void $c(this,t,n,!0);if(e===this.linkToKeyProperty)return void $c(this,t,n,!1);if(e===this.linkFromPortIdProperty)return void Zc(this,t,n,!0);if(e===this.linkToPortIdProperty)return void Zc(this,t,n,!1);if(e===this.linkKeyProperty)return void this.iu(t,n);if(e===this.linkCategoryProperty)return void this.dr(t,n);if(e===this.linkLabelKeysProperty)return void this.ju(t,n)}var i=zc(t,e);i!==n&&(Rc(t,e,n),this.du(t,e,i,n))},(Bp=Kc.prototype).tq=function(t,e){if(e){var n,i=this.Za(t),o=this.wc(t);for(n in e)"__gohashid"===n||i&&n===this.nodeKeyProperty||i&&n===this.nodeIsGroupProperty&&zc(t,n)===e[n]||o&&n===this.linkKeyProperty||this.setDataProperty(t,n,e[n])}},Bp.br=function(t,e){pc.prototype.br.call(this,t,e);for(var n=this.Va.iterator;n.next();)this.uw(n.value,t,e);for(n=this.ag.iterator;n.next();){var i,o=n.value,r=t,a=e;if(Wc(this,o,!0)===r&&(Rc(o,i=this.$e,a),Nc(this,"linkFromKey",bn,i,o,r,a),"string"==typeof i&&this.Ca(o,i)),Wc(this,o,!1)===r&&(Rc(o,i=this.af,a),Nc(this,"linkToKey",bn,i,o,r,a),"string"==typeof i&&this.Ca(o,i)),i=this.Bf(o),Array.isArray(i))for(var s=i.length,h=this.Td,u=0;u<s;u++)i[u]===r&&(i[u]=a,Nc(this,"linkLabelKeys",Sn,h,o,r,a,u,u))}},Bp.uw=function(t,e,n){var i;this.Lh(t)===e&&(Rc(t,i=this.ve,n),Nc(this,"nodeGroupKey",bn,i,t,e,n),"string"==typeof i&&this.Ca(t,i))},Bp.Qw=function(){pc.prototype.Qw.call(this);for(var t=this.linkDataArray,e=t.length,n=0;n<e;n++)eg(this,t[n])},Bp.Pm=function(t){if(pc.prototype.Pm.call(this,t),t=this.ja(t),null!==(n=Fc(this,t))){for(var e=be(),n=n.iterator;n.next();){var i,o=n.value;if(this.Za(o))this.Lh(o)===t&&(i=this.ve,Nc(this,"nodeGroupKey",bn,i,o,t,t),"string"==typeof i&&this.Ca(o,i),e.push(o));else if(Wc(this,o,!0)===t&&(i=this.$e,Nc(this,"linkFromKey",bn,i,o,t,t),"string"==typeof i&&this.Ca(o,i),e.push(o)),Wc(this,o,!1)===t&&(i=this.af,Nc(this,"linkToKey",bn,i,o,t,t),"string"==typeof i&&this.Ca(o,i),e.push(o)),i=this.Bf(o),Array.isArray(i))for(var r=i.length,a=this.Td,s=0;s<r;s++)i[s]===t&&(Nc(this,"linkLabelKeys",Sn,a,o,t,t,s,s),e.push(o))}for(n=0;n<e.length;n++)Ec(this,t,e[n]);Se(e)}},Bp.Om=function(t){pc.prototype.Om.call(this,t);var e=this.Lh(t);null===this.Kb(e)&&Dc(this,e,t)},Bp.jr=function(t){pc.prototype.jr.call(this,t);var e=this.Lh(t);Ec(this,e,t)},Bp.Mt=function(t){if(null===t)return"";var e=this.Qj;return""===e||void 0===(e=zc(t,e))?"":"string"==typeof e?e:(O("getCategoryForLinkData found a non-string category for "+t+": "+e),"")},Kc.prototype.getLinkCategoryForData=function(t){return this.Mt(t)},Kc.prototype.dr=function(t,e){var n,i;null===t||""!==(n=this.Qj)&&(this.wc(t)?(void 0===(i=zc(t,n))&&(i=""),i!==e&&(Rc(t,n,e),Nc(this,"linkCategory",bn,n,t,i,e),"string"==typeof n&&this.Ca(t,n))):Rc(t,n,e))},Kc.prototype.setLinkCategoryForData=function(t,e){this.dr(t,e)},(Bp=Kc.prototype).Vm=function(t,e){pc.prototype.Vm.call(this,t,e),this.er(e,this.Lh(t))},Bp.xk=function(){return!0},Bp.pj=function(){return!0},Bp.Ut=function(){return!0},Bp.yk=function(){return!0},s.Object.defineProperties(Kc.prototype,{archetypeNodeData:{get:function(){return this.xj},set:function(t){var e=this.xj;e!==t&&(this.xj=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.$e},set:function(t){var e=this.$e;e!==t&&(this.$e=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.af},set:function(t){var e=this.af;e!==t&&(this.af=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.Rj},set:function(t){var e=this.Rj;e!==t&&(this.Rj=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.Sj},set:function(t){var e=this.Sj;e!==t&&(this.Sj=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.Td},set:function(t){var e=this.Td;e!==t&&(this.Td=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.Wc},set:function(t){var e=this.Wc;if(e!==t){this.fb.clear();for(var n=t.length,i=0;i<n;i++){var o=t[i];if(!y(o))return void O("GraphLinksModel.linkDataArray must only contain Objects, not: "+o);Z(o)}if(this.Wc=t,""!==this.linkKeyProperty){for(i=new X,o=0;o<n;o++){var r=t[o],a=this.Vb(r);void 0===a||null!==this.fb.H(a)?i.add(r):this.fb.add(a,r)}for(i=i.iterator;i.next();)o=i.value,this.Rq(o),void 0!==(r=this.Vb(o))&&this.fb.add(r,o)}for(i=new $,o=0;o<n;o++)i.add(t[o]);for(this.ag=i,Nc(this,"linkDataArray",bn,"linkDataArray",this,e,t),e=0;e<n;e++)eg(this,t[e])}}},linkKeyProperty:{get:function(){return this.Gi},set:function(t){var e=this.Gi;if(e!==t){this.Gi=t,this.fb.clear();for(var n=this.linkDataArray.length,i=0;i<n;i++){var o=this.linkDataArray[i],r=this.Vb(o);void 0===r&&(this.Rq(o),r=this.Vb(o)),void 0!==r&&this.fb.add(r,o)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.Kl},set:function(t){var e=this.Kl;e!==t&&(this.Kl=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.al},set:function(t){var e=this.al;e!==t&&(this.al=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.Ol},set:function(t){var e=this.Ol;e!==t&&(this.Ol=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.ve},set:function(t){var e=this.ve;e!==t&&(this.ve=t,this.g("nodeGroupKeyProperty",e,t))}},nk:{get:function(){return this.Dn},set:function(t){this.Dn!==t&&(this.Dn=t)}},linkCategoryProperty:{get:function(){return this.Qj},set:function(t){var e=this.Qj;e!==t&&(this.Qj=t,this.g("linkCategoryProperty",e,t))}},type:{get:function(){return"GraphLinksModel"}}}),Kc.prototype.setCategoryForLinkData=Kc.prototype.dr,Kc.prototype.getCategoryForLinkData=Kc.prototype.Mt,Kc.prototype.assignAllDataProperties=Kc.prototype.tq,Kc.prototype.setGroupKeyForNodeData=Kc.prototype.er,Kc.prototype.getGroupKeyForNodeData=Kc.prototype.Lh,Kc.prototype.isGroupForNodeData=Kc.prototype.ew,Kc.prototype.copyLinkData=Kc.prototype.yq,Kc.prototype.mergeLinkDataArray=Kc.prototype.FA,Kc.prototype.removeLinkDataCollection=Kc.prototype.OA,Kc.prototype.removeLinkData=Kc.prototype.Lm,Kc.prototype.addLinkDataCollection=Kc.prototype.kz,Kc.prototype.addLinkData=Kc.prototype.bj,Kc.prototype.containsLinkData=Kc.prototype.wc,Kc.prototype.makeLinkDataKeyUnique=Kc.prototype.Rq,Kc.prototype.findLinkDataForKey=Kc.prototype.Dg,Kc.prototype.setKeyForLinkData=Kc.prototype.iu,Kc.prototype.getKeyForLinkData=Kc.prototype.Vb,Kc.prototype.removeLabelKeyForLinkData=Kc.prototype.Ly,Kc.prototype.addLabelKeyForLinkData=Kc.prototype.Dv,Kc.prototype.setLabelKeysForLinkData=Kc.prototype.ju,Kc.prototype.getLabelKeysForLinkData=Kc.prototype.Bf,Kc.prototype.setToPortIdForLinkData=Kc.prototype.Gw,Kc.prototype.getToPortIdForLinkData=Kc.prototype.yy,Kc.prototype.setFromPortIdForLinkData=Kc.prototype.Bw,Kc.prototype.getFromPortIdForLinkData=Kc.prototype.vy,Kc.prototype.setToKeyForLinkData=Kc.prototype.Fw,Kc.prototype.getToKeyForLinkData=Kc.prototype.xy,Kc.prototype.setFromKeyForLinkData=Kc.prototype.Aw,Kc.prototype.getFromKeyForLinkData=Kc.prototype.uy;var ig=Object.freeze([]);function og(t){pc.call(this),this.we="parent",this.Fn=!1,this.Xj="parentLinkCategory",void 0!==t&&(this.nodeDataArray=t)}function rg(){Sd.call(this),this.tx=this.Tn=this.$b=0,this.Wr=360,this.sx=pg,this.Fj=0,this.kx=new ee,this.Ir=this.Wd=0,this.ut=new Tg,this.Au=this.Wj=0,this.cz=600,this.wp=NaN,this.on=1,this.$p=0,this.gm=360,this.Eb=pg,this.J=wg,this.Yc=_g,this.Tc=Rd,this.kf=6,this.fp=Ng}function ag(t,e,n,i,o){var r=t.Wr,a=t.$b;t=t.Wd,i=i*Math.PI/180,n=n*Math.PI/180;for(var s=e.length,h=0;h<s;h++){var u=i+(o===wg?h*n/(360<=r?s:s-1):-h*n/s),l=e.L(h),d=a*Math.tan(u)/t,d=Math.sqrt((a*a+t*t*d*d)/(1+d*d));l.centerX=d*Math.cos(u),l.centerY=d*Math.sin(u),l.actualAngle=180*u/Math.PI}}function sg(t,e,n,i){var o=t.$b,r=t.Wd,a=t.Fj;n=n*Math.PI/180;for(var s=e.length,h=0;h<s;h++){var u=e.L(h),l=e.L(h===s-1?0:h+1),d=r*Math.sin(n);u.centerX=o*Math.cos(n),u.centerY=d,u.actualAngle=180*n/Math.PI,isNaN(u.diameter)&&Eg(u,0),isNaN(l.diameter)&&Eg(l,0),u=fg(t,o,r,i===wg?n:-n,(u.diameter+l.diameter)/2+a),n+=i===wg?u:-u}}function hg(t,e,n,i){var o=t.$b,r=t.Wd,a=t.Ir;n=n*Math.PI/180;for(var s=e.length,h=0;h<s;h++){var u=e.L(h);u.centerX=o*Math.cos(n),u.centerY=r*Math.sin(n),u.actualAngle=180*n/Math.PI,u=fg(t,o,r,i===wg?n:-n,a),n+=i===wg?u:-u}}function ug(t,e,n,i,o){var r=t.Wr;if(t.Wj=0,t.ut=new Tg,n<360){for(r=i+(o===wg?r:-r);r<0;)r+=360;180<(r%=360)&&(r-=360),r*=Math.PI/180,t.Au=r,function t(e,n,i,o,r){for(var a=e.$b,s=e.Wd,h=e.Tn,u=a*Math.cos(o*Math.PI/180),l=s*Math.sin(o*Math.PI/180),d=ee.alloc(),c=n.ma(),g=0;g<c.length&&(c[g].centerX=u,c[g].centerY=l,!(g>=c.length-1));g++)lg(e,u,l,c,g,r,d)||dg(e,u,l,c,g,r,d),u=d.x,l=d.y;ee.free(d);e.Wj++;if(!(23<e.Wj)){if(u=Math.atan2(l,u),u=r===wg?e.Au-u:u-e.Au,u=Math.abs(u)<Math.abs(u-2*Math.PI)?u:u-2*Math.PI,a=u*(a+s)/2,s=e.ut,Math.abs(a)<Math.abs(s.vm))for(s.vm=a,s.Ok=[],s.an=[],u=0;u<c.length;u++)s.Ok[u]=c[u].bounds.x,s.an[u]=c[u].bounds.y;1<Math.abs(a)&&(e.$b=e.Wj<8?e.$b-a/(2*Math.PI):e.$b-(0<a?1.7:-2.3),e.Wd=e.$b*h,t(e,n,i,o,r))}}(t,e,n,i,o)}else!function t(e,n,i,o,r){var a=e.$b,s=e.Fj,h=e.Tn,u=a*Math.cos(o*Math.PI/180),l=e.Wd*Math.sin(o*Math.PI/180),d=n.ma();if(3===d.length)d[0].centerX=a,d[0].centerY=0,d[1].centerX=d[0].centerX-d[0].width/2-d[1].width/2-s,d[1].y=d[0].y,d[2].centerX=(d[0].centerX+d[1].centerX)/2,d[2].y=d[0].y-d[2].height-s;else if(4===d.length)d[0].centerX=a,d[0].centerY=0,d[2].centerX=-d[0].centerX,d[2].centerY=d[0].centerY,d[1].centerX=0,d[1].y=Math.min(d[0].y,d[2].y)-d[1].height-s,d[3].centerX=0,d[3].y=Math.max(d[0].y+d[0].height+s,d[2].y+d[2].height+s);else{a=ee.alloc();for(var c,g,f=0;f<d.length&&(d[f].centerX=u,d[f].centerY=l,!(f>=d.length-1));f++)lg(e,u,l,d,f,r,a)||dg(e,u,l,d,f,r,a),u=a.x,l=a.y;ee.free(a),e.Wj++,23<e.Wj||(u=d[0].centerX,l=d[0].centerY,a=d[d.length-1].centerX,f=d[d.length-1].centerY,c=Math.abs(u-a)-((d[0].width+d[d.length-1].width)/2+s),g=Math.abs(l-f)-((d[0].height+d[d.length-1].height)/2+s),s=0,Math.abs(g)<1?Math.abs(u-a)<(d[0].width+d[d.length-1].width)/2&&(s=0):s=0<g?g:Math.abs(c)<1?0:c,u=Math.abs(a)>Math.abs(f)?0<a!=f<l:0<f!=u<a,(u=r===wg?u:!u)&&(s=-Math.abs(s),s=Math.min(s,-d[d.length-1].width),s=Math.min(s,-d[d.length-1].height)),e.ut.compare(s,d),1<Math.abs(s)&&(e.$b=e.Wj<8?e.$b-s/(2*Math.PI):d.length<5&&10<s?e.$b/2:e.$b-(0<s?1.7:-2.3),e.Wd=e.$b*h,t(e,n,i,o,r)))}}(t,e,n,i,o);t.ut.commit(e)}function lg(t,e,n,i,o,r,a){var s=t.$b,h=t.Wd,u=0;t=(i[o].width+i[o+1].width)/2+t.Fj;var l=!1;if(0<=n!=(r===wg)){if(s<(r=e+t)){if((r=e-t)<-s)return a.x=r,a.y=u,0;l=!0}}else if((r=e-t)<-s){if(s<(r=e+t))return a.x=r,a.y=u,0;l=!0}return u=Math.sqrt(1-Math.min(1,r*r/(s*s)))*h,n<0!==l&&(u=-u),Math.abs(n-u)>(i[o].height+i[o+1].height)/2?(a.x=r,a.y=u,0):(a.x=r,a.y=u,1)}function dg(t,e,n,i,o,r,a){var s=t.$b,h=t.Wd,u=0;if(t=(i[o].height+i[o+1].height)/2+t.Fj,i=!1,0<=e!=(r===wg)){if((r=n-t)<-h){if(h<(r=n+t))return a.x=u,void(a.y=r);i=!0}}else if(h<(r=n+t)){if((r=n-t)<-h)return a.x=u,void(a.y=r);i=!0}u=Math.sqrt(1-Math.min(1,r*r/(h*h)))*s,e<0!==i&&(u=-u),a.x=u,a.y=r}function cg(t,e,n,i,o){var r=t.cz;if(Math.abs(t.Tn-1)<.001)return void 0!==i&&void 0!==o?o*e:2*Math.PI*e;t=n<e?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n;for(var a=0,s=void 0!==i&&void 0!==o?o/(r+1):Math.PI/(2*(r+1)),h=0,u=0;u<=r;u++){h=void 0!==i&&void 0!==o?i+u*o/r:u*Math.PI/(2*r);var l=Math.sin(h);a+=Math.sqrt(1-t*t*l*l)*s}return void 0!==i&&void 0!==o?(n<e?e:n)*a:4*(n<e?e:n)*a}function gg(t,e,n,i,o){return e/(void 0!==i&&void 0!==o?cg(t,1,n,i,o):cg(t,1,n))}function fg(t,e,n,i,o){if(Math.abs(t.Tn-1)<.001)return o/e;var r=n<e?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n,a=0;t=2*Math.PI/(700*t.network.vertexes.count),n<e&&(i+=Math.PI/2);for(var s=0;;s++){var h=Math.sin(i+s*t);if(o<=(a+=(n<e?e:n)*Math.sqrt(1-r*r*h*h)*t))return s*t}}Kc.className="GraphLinksModel",Vc.GraphLinksModel=Kc,pc.constructGraphLinksModel=pc.constructGraphLinksModel=function(){return new Kc},pc.initDiagramModel=Bc=function(){return new Kc},n(og,pc),og.constructGraphLinksModel=pc.constructGraphLinksModel,og.prototype.cloneProtected=function(t){pc.prototype.cloneProtected.call(this,t),t.we=this.we,t.Fn=this.Fn,t.Xj=this.Xj},(Bp=og.prototype).toString=function(t){if(void 0===t&&(t=0),2<=t)return this.hr();var e=(""!==this.name?this.name:"")+" TreeModel";if(0<t){e+="\n node data:";for(var n=(t=this.nodeDataArray).length,i=0;i<n;i++){var o=t[i];e+=" "+this.ja(o)+":"+k(o)}}return e},Bp.Nk=function(){var t=pc.prototype.Nk.call(this),e="";return"parent"!==this.nodeParentKeyProperty&&"string"==typeof this.nodeParentKeyProperty&&(e+=',\n  "nodeParentKeyProperty": '+this.quote(this.nodeParentKeyProperty)),t+e},Bp.Yq=function(t){pc.prototype.Yq.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},Bp.mr=function(t){return wc(this,t,"nodeParentKeyProperty"),pc.prototype.mr.call(this,t)},Bp.Xq=function(t){void 0!==t.nodeParentKeyProperty&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&O("applyIncrementalJson cannot change Model properties"),pc.prototype.Xq.call(this,t)},Bp.Cm=function(t){return t},Bp.Mh=function(t){if(null!==t){var e=this.we;if(""!==e&&void 0!==(e=zc(t,e))){if(Ac(e))return e;O("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},Bp.be=function(t,e){var n,i;null===e&&(e=void 0),null===t||""!==(n=this.we)&&(e=this.Cm(e),this.Za(t)?(i=zc(t,n))!==e&&(Ec(this,i,t),Rc(t,n,e),null===this.Kb(e)&&Dc(this,e,t),Nc(this,"nodeParentKey",bn,n,t,i,e),"string"==typeof n&&this.Ca(t,n)):Rc(t,n,e))},Bp.Ot=function(t){if(null===t)return"";var e=this.Xj;return""===e||void 0===(e=zc(t,e))?"":"string"==typeof e?e:(O("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},og.prototype.getLinkCategoryForData=function(t){return this.Ot(t)},og.prototype.ku=function(t,e){var n,i;null===t||""!==(n=this.Xj)&&(this.Za(t)?(void 0===(i=zc(t,n))&&(i=""),i!==e&&(Rc(t,n,e),Nc(this,"parentLinkCategory",bn,n,t,i,e),"string"==typeof n&&this.Ca(t,n))):Rc(t,n,e))},og.prototype.setLinkCategoryForData=function(t,e){this.ku(t,e)},og.prototype.copyNodeData=function(t){return null===t?null:(t=pc.prototype.copyNodeData.call(this,t),this.pk||""===this.we||void 0===zc(t,this.we)||Rc(t,this.we,void 0),t)},og.prototype.setDataProperty=function(t,e,n){if(this.Za(t)){if(e===this.nodeKeyProperty)return void this.Um(t,n);if(e===this.nodeCategoryProperty)return void this.Tm(t,n);if(e===this.nodeParentKeyProperty)return void this.be(t,n)}var i=zc(t,e);i!==n&&(Rc(t,e,n),this.du(t,e,i,n))},(Bp=og.prototype).br=function(t,e){pc.prototype.br.call(this,t,e);for(var n=this.Va.iterator;n.next();)this.uw(n.value,t,e)},Bp.uw=function(t,e,n){var i;this.Mh(t)===e&&(Rc(t,i=this.we,n),Nc(this,"nodeParentKey",bn,i,t,e,n),"string"==typeof i&&this.Ca(t,i))},Bp.Pm=function(t){if(pc.prototype.Pm.call(this,t),t=this.ja(t),null!==(n=Fc(this,t))){for(var e=be(),n=n.iterator;n.next();){var i,o=n.value;this.Za(o)&&this.Mh(o)===t&&(i=this.we,Nc(this,"nodeParentKey",bn,i,o,t,t),"string"==typeof i&&this.Ca(o,i),e.push(o))}for(n=0;n<e.length;n++)Ec(this,t,e[n]);Se(e)}},Bp.Om=function(t){pc.prototype.Om.call(this,t);var e=this.Mh(t),e=this.Cm(e);null===this.Kb(e)&&Dc(this,e,t)},Bp.jr=function(t){pc.prototype.jr.call(this,t);var e=this.Mh(t);Ec(this,e,t)},Bp.Vm=function(t,e){pc.prototype.Vm.call(this,t,e),this.ku(e,this.Ot(t)),this.be(e,this.Mh(t))},Bp.Am=function(){return!0},Bp.Ut=function(){return!0},s.Object.defineProperties(og.prototype,{nodeParentKeyProperty:{get:function(){return this.we},set:function(t){var e=this.we;e!==t&&(this.we=t,this.g("nodeParentKeyProperty",e,t))}},pk:{get:function(){return this.Fn},set:function(t){this.Fn!==t&&(this.Fn=t)}},parentLinkCategoryProperty:{get:function(){return this.Xj},set:function(t){var e=this.Xj;e!==t&&(this.Xj=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}},type:{get:function(){return"TreeModel"}}}),og.prototype.setParentLinkCategoryForNodeData=og.prototype.ku,og.prototype.getParentLinkCategoryForNodeData=og.prototype.Ot,og.prototype.setParentKeyForNodeData=og.prototype.be,og.prototype.getParentKeyForNodeData=og.prototype.Mh,og.className="TreeModel",Vc.TreeModel=og,n(rg,Sd),rg.prototype.cloneProtected=function(t){Sd.prototype.cloneProtected.call(this,t),t.wp=this.wp,t.on=this.on,t.$p=this.$p,t.gm=this.gm,t.Eb=this.Eb,t.J=this.J,t.Yc=this.Yc,t.Tc=this.Tc,t.kf=this.kf,t.fp=this.fp},rg.prototype.hb=function(t){t.classType===rg?t===Lg||t===Mg||t===Pg||t===kg||t===_g?this.sorting=t:t===Sg||t===xg||t===wg||t===bg?this.direction=t:t===yg||t===mg||t===pg||t===vg?this.arrangement=t:t!==Ag&&t!==Ng||(this.nodeDiameterFormula=t):Sd.prototype.hb.call(this,t)},rg.prototype.createNetwork=function(){return new Cg(this)},rg.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),(t=this.network.vertexes).count<=1)1===t.count&&((t=t.first()).centerX=0,t.centerY=0);else{var e=new X;e.addAll(t.iterator),t=new X;var n,i,o=new X,r=this.sort(e),a=this.Ir,s=this.arrangement,h=this.nodeDiameterFormula,u=this.radius;(!isFinite(u)||u<=0)&&(u=NaN);var l=this.aspectRatio;(!isFinite(l)||l<=0)&&(l=1);var d=this.startAngle;isFinite(d)||(d=0);var c=this.sweepAngle;if((!isFinite(c)||360<c||c<1)&&(c=360),e=this.spacing,isFinite(e)||(e=NaN),s===vg&&h===Ag?s=pg:s===vg&&h!==Ag&&(s=this.arrangement),(this.direction===Sg||this.direction===xg)&&this.sorting!==_g){for(h=0;!(h>=r.length)&&(t.add(r.L(h)),!(h+1>=r.length));h+=2)o.add(r.L(h+1));this.direction===Sg?(this.arrangement===vg&&t.reverse(),(r=new X).addAll(t),r.addAll(o)):(this.arrangement===vg&&o.reverse(),(r=new X).addAll(o),r.addAll(t))}h=r.length;for(var g=i=n=0;g<r.length;g++){var f=d+c*i*(this.direction===wg?1:-1)/h,p=r.L(g).diameter;isNaN(p)&&(p=Eg(r.L(g),f)),c<360&&(0===g||g===r.length-1)&&(p/=2),n+=p,i++}if(isNaN(u)||s===vg){if(isNaN(e)&&(e=6),s!==pg&&s!==vg){for(i=-1/0,a=0;a<h;a++)g=r.L(a),n=r.L(a===h-1?0:a+1),isNaN(g.diameter)&&Eg(g,0),isNaN(n.diameter)&&Eg(n,0),i=Math.max(i,(g.diameter+n.diameter)/2);a=i+e,u=s===yg?(i+e)/(2*Math.PI/h):gg(this,a*(360<=c?h:h-1),l,d*Math.PI/180,c*Math.PI/180)}else u=gg(this,n+(360<=c?h:h-1)*(s!==vg?e:1.6*e),l,d*Math.PI/180,c*Math.PI/180);i=u*l}else if(g=cg(this,u,i=u*l,d*Math.PI/180,c*Math.PI/180),isNaN(e))s!==pg&&s!==vg||(e=(g-n)/(360<=c?h:h-1));else if(s===pg||s===vg)(g=(g-n)/(360<=c?h:h-1))<e?i=(u=gg(this,n+e*(360<=c?h:h-1),l,d*Math.PI/180,c*Math.PI/180))*l:e=g;else{for(a=-1/0,n=0;n<h;n++)f=r.L(n),p=r.L(n===h-1?0:n+1),isNaN(f.diameter)&&Eg(f,0),isNaN(p.diameter)&&Eg(p,0),a=Math.max(a,(f.diameter+p.diameter)/2);u<(n=gg(this,(a+=e)*(360<=c?h:h-1),l,d*Math.PI/180,c*Math.PI/180))?i=(u=n)*l:a=g/(360<=c?h:h-1)}if(this.sx=s,this.$b=u,this.Tn=l,this.tx=d,this.Wr=c,this.Fj=e,this.Wd=i,this.Ir=a,e=r,r=this.sx,s=this.$b,u=this.tx,l=this.Wr,d=this.Fj,c=this.Wd,h=this.Ir,this.direction!==Sg&&this.direction!==xg||r!==vg)if(this.direction===Sg||this.direction===xg){switch(a=0,r){case mg:a=180*fg(this,s,c,u,h)/Math.PI;break;case pg:h=e=0,null!==(a=t.first())&&(e=Eg(a,Math.PI/2)),null!==(a=o.first())&&(h=Eg(a,Math.PI/2)),a=180*fg(this,s,c,u,d+(e+h)/2)/Math.PI;break;case yg:a=l/e.length}if(this.direction===Sg){switch(r){case mg:hg(this,t,u,bg);break;case pg:sg(this,t,u,bg);break;case yg:ag(this,t,l/2,u,bg)}switch(r){case mg:hg(this,o,u+a,wg);break;case pg:sg(this,o,u+a,wg);break;case yg:ag(this,o,l/2,u+a,wg)}}else{switch(r){case mg:hg(this,o,u,bg);break;case pg:sg(this,o,u,bg);break;case yg:ag(this,o,l/2,u,bg)}switch(r){case mg:hg(this,t,u+a,wg);break;case pg:sg(this,t,u+a,wg);break;case yg:ag(this,t,l/2,u+a,wg)}}}else switch(r){case mg:hg(this,e,u,this.direction);break;case pg:sg(this,e,u,this.direction);break;case yg:ag(this,e,l,u,this.direction);break;case vg:ug(this,e,l,u,this.direction)}else ug(this,e,l,u-l/2,wg)}this.updateParts(),this.network=null,this.isValidLayout=!0},rg.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},rg.prototype.commitNodes=function(){var t=null!==this.group&&null!==this.group.placeholder&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,n=this.actualCenter;t?n=new ee(0,0):(n.x=this.arrangementOrigin.x+this.$b,n.y=this.arrangementOrigin.y+this.Wd);for(var i=this.network.vertexes.iterator;i.next();){var o=i.value;o.x+=n.x,o.y+=n.y,o.commit()}t&&(this.group.Ta(),t=this.group.position.copy(),n=this.group.location.copy(),e=e.ce(n.ce(t)),this.group.move(e),this.kx=e.ce(t))},rg.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},rg.prototype.sort=function(t){switch(this.sorting){case Pg:break;case kg:t.reverse();break;case Lg:t.sort(this.comparer);break;case Mg:t.sort(this.comparer),t.reverse();break;case _g:for(var e=[],n=0;n<t.length;n++)e.push(0);n=new X;for(var i=0;i<t.length;i++){var o=-1,r=-1;if(0===i)for(var a=0;a<t.length;a++){var s=t.L(a).edgesCount;o<s&&(o=s,r=a)}else for(a=0;a<t.length;a++)o<(s=e[a])&&(o=s,r=a);for(n.add(t.L(r)),e[r]=-1,a=(r=t.L(r)).sourceEdges;a.next();)(o=t.indexOf(a.value.fromVertex))<0||0<=e[o]&&e[o]++;for(r=r.destinationEdges;r.next();)(o=t.indexOf(r.value.toVertex))<0||0<=e[o]&&e[o]++}for(t=[],e=0;e<n.length;e++){for(o=n.L(e),t[e]=[],r=o.destinationEdges;r.next();)(i=n.indexOf(r.value.toVertex))!==e&&t[e].indexOf(i)<0&&t[e].push(i);for(o=o.sourceEdges;o.next();)(i=n.indexOf(o.value.fromVertex))!==e&&t[e].indexOf(i)<0&&t[e].push(i)}for(r=[],e=0;e<t.length;e++)r[e]=0;e=[],a=[],s=[],o=[],i=new X;for(var h=0,u=0;u<t.length;u++){var l=t[u].length;if(1===l)o.push(u);else if(0===l)i.add(n.L(u));else{if(0===h)e.push(u);else{for(var d=l=1/0,c=-1,g=[],f=0;f<e.length;f++)t[e[f]].indexOf(e[f===e.length-1?0:f+1])<0&&g.push(f===e.length-1?0:f+1);if(0===g.length)for(f=0;f<e.length;f++)g.push(f);for(f=0;f<g.length;f++){for(var p=g[f],m=t[u],y=0,v=0;v<a.length;v++){var w,b=r[a[v]],S=r[s[v]];if(b<S?(w=b,b=S):w=S,w<p&&p<=b)for(S=0;S<m.length;S++){var x=m[S];e.indexOf(x)<0||w<r[x]&&r[x]<b||w===r[x]||b===r[x]||y++}else for(S=0;S<m.length;S++)x=m[S],e.indexOf(x)<0||w<r[x]&&r[x]<b&&w!==r[x]&&b!==r[x]&&y++}for(m=y,v=y=0;v<t[u].length;v++)0<=(w=e.indexOf(t[u][v]))&&(y+=(w=Math.abs(p-(p<=w?w+1:w)))<e.length+1-w?w:e.length+1-w);for(v=0;v<a.length;v++)p<=(w=r[a[v]])&&w++,p<=(b=r[s[v]])&&b++,b<w&&(S=b,b=w,w=S),b-w<(e.length+2)/2==(w<p&&p<=b)&&y++;(m<l||m===l&&y<d)&&(l=m,d=y,c=p)}for(e.splice(c,0,u),l=0;l<e.length;l++)r[e[l]]=l;for(l=0;l<t[u].length;l++)d=t[u][l],0<=e.indexOf(d)&&(a.push(u),s.push(d))}h++}}for(a=e.length;;){for(r=!0,s=0;s<o.length;s++)if(u=t[h=o[s]][0],0<=(l=e.indexOf(u))){for(c=d=0;c<t[u].length;c++)(g=e.indexOf(t[u][c]))<0||g===l||(d+=g<l!=a-(f=l<g?g-l:l-g)<f?1:-1);e.splice(d<0?l:l+1,0,h),o.splice(s,1),s--}else r=!1;if(r)break;e.push(o[0]),o.splice(0,1)}for(t=0;t<e.length;t++)i.add(n.L(e[t]));return i;default:O("Invalid sorting type.")}return t},s.Object.defineProperties(rg.prototype,{radius:{get:function(){return this.wp},set:function(t){this.wp!==t&&(0<t||isNaN(t))&&(this.wp=t,this.C())}},aspectRatio:{get:function(){return this.on},set:function(t){this.on!==t&&0<t&&(this.on=t,this.C())}},startAngle:{get:function(){return this.$p},set:function(t){this.$p!==t&&(this.$p=t,this.C())}},sweepAngle:{get:function(){return this.gm},set:function(t){this.gm!==t&&(this.gm=0<t&&t<=360?t:360,this.C())}},arrangement:{get:function(){return this.Eb},set:function(t){this.Eb===t||t!==vg&&t!==pg&&t!==mg&&t!==yg||(this.Eb=t,this.C())}},direction:{get:function(){return this.J},set:function(t){this.J===t||t!==wg&&t!==bg&&t!==Sg&&t!==xg||(this.J=t,this.C())}},sorting:{get:function(){return this.Yc},set:function(t){this.Yc===t||t!==Pg&&t!==kg&&t!==Lg&&!Mg&&t!==_g||(this.Yc=t,this.C())}},comparer:{get:function(){return this.Tc},set:function(t){this.Tc!==t&&(this.Tc=t,this.C())}},spacing:{get:function(){return this.kf},set:function(t){this.kf!==t&&(this.kf=t,this.C())}},nodeDiameterFormula:{get:function(){return this.fp},set:function(t){this.fp===t||t!==Ng&&t!==Ag||(this.fp=t,this.C())}},actualXRadius:{get:function(){return this.$b}},actualYRadius:{get:function(){return this.Wd}},actualSpacing:{get:function(){return this.Fj}},actualCenter:{get:function(){return this.kx}}});var pg=new j(rg,"ConstantSpacing",0),mg=new j(rg,"ConstantDistance",1),yg=new j(rg,"ConstantAngle",2),vg=new j(rg,"Packed",3),wg=new j(rg,"Clockwise",4),bg=new j(rg,"Counterclockwise",5),Sg=new j(rg,"BidirectionalLeft",6),xg=new j(rg,"BidirectionalRight",7),Pg=new j(rg,"Forwards",8),kg=new j(rg,"Reverse",9),Lg=new j(rg,"Ascending",10),Mg=new j(rg,"Descending",11),_g=new j(rg,"Optimized",12),Ng=new j(rg,"Pythagorean",13),Ag=new j(rg,"Circular",14);function Tg(){this.vm=-1/0,this.an=this.Ok=null}function Cg(t){Od.call(this,t)}function Dg(t){zd.call(this,t),this.I=this.Dj=NaN}function Eg(t,e){var n=t.network;if(null===n)return NaN;if(null===(n=n.layout))return NaN;if(n.arrangement===vg)if(n.nodeDiameterFormula===Ag)t.Dj=Math.max(t.width,t.height);else{if(n=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),0===n)return t.width;if(0===e)return t.height;t.Dj=Math.min(t.height/n,t.width/e)}else t.Dj=n.nodeDiameterFormula===Ag?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.Dj}function Fg(t){Id.call(this,t)}function Og(){Sd.call(this),this.Fh=null,this.Ao=0,this.Hd=new xe(100,100).freeze(),this.nn=!1,this.hf=!0,this.ed=!1,this.Ll=100,this.Wn=1,this.Xf=1e3,this.Yo=10,this.xp=Math,this.hl=.05,this.gl=50,this.el=150,this.fl=0,this.Nn=10,this.Mn=5}function Bg(t,e){if(!(10<e||t.network.vertexes.count<3)){for(t.Fh=t.network.vertexes.ma(),(t=t.Fh).sort(function(t,e){return null===t||null===e||t===e?0:e.Dd-t.Dd}),e=t.length-1;0<=e&&t[e].Dd<=1;)e--;return 1<t.length-e}}function Gg(t,e){for(var n=t.network,i=new qg(t),o=0;o<t.Fh.length;o++){var r=t.Fh[o];if(!(1<r.Dd))break;i.Bg(r);var a=new Ug;a.pu=r.Dd,a.qu=r.width,a.ou=r.height,a.Yw=r.focus.x,a.Zw=r.focus.y,null===r.Ke&&(r.Ke=new X),r.Ke.add(a),r.yw=r.Ke.count-1}for(r=n.edges.iterator;r.next();){var s=r.value,o=s.fromVertex,a=s.toVertex;o.network===i&&a.network===i?i.nm(s):o.network===i?(null===(s=o.mk)&&(s=new X,o.mk=s),s.add(a),o.Dd--,o.Sh+=a.Sh):a.network===i&&(null===(s=a.mk)&&(s=new X,a.mk=s),s.add(o),a.Dd--,a.Sh+=o.Sh)}for(o=i.edges.iterator;o.next();)(r=o.value).length*=Math.max(1,Ue.sqrt((r.fromVertex.Sh+r.toVertex.Sh)/(4*e+1)));for(e=i.vertexes.iterator;e.next();){var h=(o=e.value).mk;if(null!==h&&0<h.count&&!((a=o.Ke.L(o.Ke.count-1).pu-o.Dd)<=0)){for(var u=s=0,l=h.count-a;l<h.count;l++){for(var d=h.L(l),c=null,r=d.edges.iterator;r.next();){var g=r.value;if(g.wy(d)===o){c=g;break}}null!==c&&(u+=c.length,s+=d.width*d.height)}r=o.centerX,h=o.centerY,l=o.width,d=o.height,c=o.focus,(g=l*d)<1&&(g=1),a=((s=Ue.sqrt((s+g+u*u*4/(a*a))/g))-1)*l/2,s=(s-1)*d/2,o.bounds=new ne(r-c.x-a,h-c.y-s,l+2*a,d+2*s),o.focus=new ee(c.x+a,c.y+s)}}return t.network=i,n}function jg(t,e){for(var n=t.network.vertexes.iterator;n.next();){var i,o,r,a=n.value;a.network=e,null!==a.Ke&&(i=a.Ke.L(a.yw),a.Dd=i.pu,o=i.Yw,r=i.Zw,a.bounds=new ne(a.centerX-o,a.centerY-r,i.qu,i.ou),a.focus=new ee(o,r),a.yw--)}for(n=t.network.edges.iterator;n.next();)n.value.network=e;t.network=e}function zg(t,e){var n=e.mk;if(null!==n&&0!==n.count){var i=e.centerX,o=e.centerY,r=e.width,a=e.height;null!==e.Ke&&0<e.Ke.count&&(r=(a=e.Ke.L(0)).qu,a=a.ou),r=Ue.sqrt(r*r+a*a)/2;for(var s=!1,h=a=0,u=0,l=e.vertexes.iterator;l.next();){var d=l.value;d.Dd<=1?h++:(s=!0,u++,a+=Math.atan2(e.centerY-d.centerY,e.centerX-d.centerX))}if(0!==h)for(0<u&&(a/=u),u=e=0,e=s?2*Math.PI/(h+1):2*Math.PI/h,0==h%2&&(u=e/2),1<n.count&&n.sort(function(t,e){return null===t||null===e||t===e?0:e.width*e.height-t.width*t.height}),s=0==h%2?0:1,n=n.iterator;n.next();)if(!(1<(h=n.value).Dd||t.isFixed(h))){for(l=null,d=h.edges.iterator;d.next();){l=d.value;break}d=h.width;var c=h.height,d=Ue.sqrt(d*d+c*c)/2,l=r+l.length+d;d=a+(e*(s/2>>1)+u)*(0==s%2?1:-1),h.centerX=i+l*Math.cos(d),h.centerY=o+l*Math.sin(d),s++}}}function Rg(t,e,n,i,o,r,a){var s=9e19,h=-1,u=0;t:for(;u<e;u++){var l=t[u],d=l.x-n,c=l.y-i;if((d=d*d+c*c)<s){for(c=u-1;0<=c;c--)if(t[c].y>l.y&&t[c].x-l.x<o+a.width)continue t;for(c=u+1;c<e;c++)if(t[c].x>l.x&&t[c].y-l.y<r+a.height)continue t;h=u,s=d}}return h}function Ig(t,e){var n=(o=t.bounds).x;t=o.y;var i=o.width,o=o.height,r=(s=e.bounds).x;e=s.y;var a=s.width,s=s.height;return n+i<r?e+s<t?(o=n+i-r,t=t-e-s,Ue.sqrt(o*o+t*t)):t+o<e?(n=n+i-r,t=t+o-e,Ue.sqrt(n*n+t*t)):r-(n+i):r+a<n?e+s<t?(o=n-r-a,t=t-e-s,Ue.sqrt(o*o+t*t)):t+o<e?(n=n-r-a,t=t+o-e,Ue.sqrt(n*n+t*t)):n-(r+a):e+s<t?t-(e+s):t+o<e?e-(t+o):.1}function Vg(t,e){for(t.Fh=null,e=t.Ao+e;t.Ao<e&&(t.Ao++,function(t){null===t.Fh&&(t.Fh=t.network.vertexes.ma());var e=t.Fh;if(e.length<=0)return!1;var n=e[0];n.forceX=0,n.forceY=0;for(var i=n.centerX,o=i,r=n=n.centerY,a=1;a<e.length;a++){var s=e[a];s.forceX=0,s.forceY=0;var h=s.centerX;s=s.centerY,i=Math.min(i,h),o=Math.max(o,h),n=Math.min(n,s),r=Math.max(r,s)}(o=r-n<o-i)?e.sort(function(t,e){return null===t||null===e||t===e?0:t.centerX-e.centerX}):e.sort(function(t,e){return null===t||null===e||t===e?0:t.centerY-e.centerY}),n=t.Xf;var u=i=s=0;for(r=0;r<e.length;r++){a=e[r],i=a.bounds,s=a.focus,h=i.x+s.x;var l=i.y+s.y;i=a.charge*t.electricalFieldX(h,l),u=a.charge*t.electricalFieldY(h,l),i+=a.mass*t.gravitationalFieldX(h,l),u+=a.mass*t.gravitationalFieldY(h,l),a.forceX+=i,a.forceY+=u;for(var d=r+1;d<e.length;d++){var c=e[d];if(c!==a){i=c.bounds,s=c.focus,u=i.x+s.x;var g=i.y+s.y;if(n<h-u||n<u-h){if(o)break}else if(n<l-g||n<g-l){if(!o)break}else{var f=Ig(a,c);u=f<1?(null===(i=t.randomNumberGenerator)&&(t.randomNumberGenerator=i=new Kg),f=i.random(),s=i.random(),i=u<h?(1+(i=Math.abs(c.bounds.right-a.bounds.x)))*f:h<u?-(1+(i=Math.abs(c.bounds.x-a.bounds.right)))*f:(1+(i=Math.max(c.width,a.width)))*f-i/2,g<l?(1+(u=Math.abs(c.bounds.bottom-a.bounds.y)))*s:h<u?-(1+(u=Math.abs(c.bounds.y-a.bounds.bottom)))*s:(1+(u=Math.max(c.height,a.height)))*s-u/2):(s=-(a.charge*c.charge)/(f*f),i=(u-h)/f*s,(g-l)/f*s),a.forceX+=i,a.forceY+=u,c.forceX-=i,c.forceY-=u}}}}for(o=t.network.edges.iterator;o.next();)s=o.value,n=s.fromVertex,r=s.toVertex,a=n.bounds,h=n.focus,i=a.x+h.x,a=a.y+h.y,l=r.bounds,d=r.focus,h=l.x+d.x,l=l.y+d.y,d=Ig(n,r),u=d<1?(null===(d=t.randomNumberGenerator)&&(t.randomNumberGenerator=d=new Kg),s=d.random(),d=d.random(),i=(h<i?1:-1)*(1+(r.width>n.width?r:n).width)*s,(l<a?1:-1)*(1+(r.height>n.height?r:n).height)*d):(s=s.stiffness*(d-s.length),i=(h-i)/d*s,(l-a)/d*s),n.forceX+=i,n.forceY+=u,r.forceX-=i,r.forceY-=u;for(o=i=0;o<e.length;o++)n=e[o],t.isFixed(n)?t.moveFixedVertex(n):i=Math.max(i,t.moveVertex(n)||0);return i>t.epsilonDistance*t.epsilonDistance}(t)););t.Fh=null}function Ug(){this.Zw=this.Yw=this.ou=this.qu=this.pu=0}function qg(t){Od.call(this,t)}function Hg(t){zd.call(this,t),this.Ka=!1,this.cb=this.I=NaN,this.Sh=this.Dd=this.Ja=this.T=0,this.Ke=this.mk=null,this.yw=0}function Yg(t){Id.call(this,t),this.l=this.v=NaN}function Kg(){var t=0;void 0===t&&(t=42),this.seed=t,this.Wy=48271,this.Yy=2147483647,this.Q=44488.07041494893,this.Zy=3399,this.Xy=1/2147483647,this.random()}function Xg(){Sd.call(this),this.Zb=this.qe=25,this.J=0,this.cl=vf,this.Gl=Sf,this.vl=kf,this.Oj=4,this.Sk=Nf,this.ng=7,this.hf=!0,this.Io=4,this.Ba=this.Ii=this.ra=-1,this.oc=this.lh=0,this.Ia=this.td=this.ud=this.Sd=this.zb=null,this.nh=0,this.ap=this.Tj=null,this.Ec=0,this.bp=null,this.Sc=new ee,this.te=[],this.te.length=100}function Wg(t){var e=t.fromVertex.node||t.fromVertex.data;return t=t.toVertex.node||t.toVertex.data,null===e&&null===t?8:null===e||null===t?4:1}function $g(t){null===t.Tj&&(t.Tj=[]);for(var e=0,n=t.network.vertexes.iterator;n.next();){var i=n.value;t.Tj[e]=i.layer,e++,t.Tj[e]=i.column,e++,t.Tj[e]=i.index,e++}return t.Tj}function Jg(t,e){var n=0;for(t=t.network.vertexes.iterator;t.next();){var i=t.value;i.layer=e[n],n++,i.column=e[n],n++,i.index=e[n],n++}}function Zg(t,e,n){var i=mf(t,e),o=t.zb[e];(null===t.ap||t.ap.length<o*o)&&(t.ap=[]);for(var r=t.ap,a=0;a<o;a++){var s,h=0,u=i[a];if(null!==(w=u.near)&&w.layer===u.layer)if(a<(u=w.index))for(var l=a+1;l<u;l++){var d=i[l];d.near===w&&d.wf===w.wf||h++}else for(l=a-1;u<l;l--)(d=i[l]).near===w&&d.wf===w.wf||h++;if(0<=n)for(u=i[a].sourceEdgesArrayAccess,w=0;w<u.length;w++){var c=u[w];if(c.valid&&c.fromVertex.layer!==e)for(d=c.fromVertex.index,l=c.portToPos,c=c.portFromPos,s=w+1;s<u.length;s++){var g,f,p=u[s];p.valid&&p.fromVertex.layer!==e&&(g=p.fromVertex.index,f=p.portToPos,p=p.portFromPos,l<f&&(g<d||d===g&&p<c)&&h++,f<l&&(d<g||g===d&&c<p)&&h++)}}if(n<=0)for(u=i[a].destinationEdgesArrayAccess,w=0;w<u.length;w++)if((c=u[w]).valid&&c.toVertex.layer!==e)for(d=c.toVertex.index,l=c.portToPos,c=c.portFromPos,s=w+1;s<u.length;s++)(p=u[s]).valid&&p.toVertex.layer!==e&&(g=p.toVertex.index,f=p.portToPos,c<(p=p.portFromPos)&&(g<d||d===g&&f<l)&&h++,p<c&&(d<g||g===d&&l<f)&&h++);for(r[a*o+a]=h,u=a+1;u<o;u++){var m=0,y=0;if(0<=n){h=i[a].sourceEdgesArrayAccess;for(var v=i[u].sourceEdgesArrayAccess,w=0;w<h.length;w++)if((c=h[w]).valid&&c.fromVertex.layer!==e)for(d=c.fromVertex.index,c=c.portFromPos,s=0;s<v.length;s++)(p=v[s]).valid&&p.fromVertex.layer!==e&&(g=p.fromVertex.index,p=p.portFromPos,(d<g||d===g&&c<p)&&y++,(g<d||g===d&&p<c)&&m++)}if(n<=0)for(h=i[a].destinationEdgesArrayAccess,v=i[u].destinationEdgesArrayAccess,w=0;w<h.length;w++)if((c=h[w]).valid&&c.toVertex.layer!==e)for(d=c.toVertex.index,l=c.portToPos,s=0;s<v.length;s++)(p=v[s]).valid&&p.toVertex.layer!==e&&(g=p.toVertex.index,f=p.portToPos,(d<g||d===g&&l<f)&&y++,(g<d||g===d&&f<l)&&m++);r[a*o+u]=m,r[u*o+a]=y}}return yf(t,e,i),r}function Qg(t){for(var e=0,n=0;n<=t.ra;n++){for(var i=t,o=n,r=mf(i,o),a=i.zb[o],s=0,h=0;h<a;h++){var u=r[h].destinationEdgesArrayAccess;if(null!==u)for(var l=0;l<u.length;l++){var d,c,g=u[l];g.valid&&g.toVertex.layer!==o&&(d=g.fromVertex.column+g.portFromColOffset,c=g.toVertex.column+g.portToColOffset,s+=(Math.abs(d-c)+1)*Wg(g))}}yf(i,o,r),e+=s}return e}function tf(t,e,n){for(var i=mf(t,e),o=t.zb[e],r=[],a=0;a<o;a++){var s=i[a],h=null;n<=0&&(h=s.sourceEdgesArrayAccess);var u=null;0<=n&&(u=s.destinationEdgesArrayAccess);var l=0,d=0,c=s.near;if(null!==c&&c.layer===s.layer&&(l+=c.column-1,d++),null!==h)for(c=0;c<h.length;c++){var g=(s=h[c]).fromVertex;s.valid&&!s.rev&&g.layer!==e&&(l+=g.column,d++)}if(null!==u)for(h=0;h<u.length;h++)c=(s=u[h]).toVertex,s.valid&&!s.rev&&c.layer!==e&&(l+=c.column,d++);r[a]=0===d?-1:l/d}return yf(t,e,i),r}function ef(t,e,n){for(var i=mf(t,e),o=t.zb[e],r=[],a=0;a<o;a++){var s=i[a],h=null;n<=0&&(h=s.sourceEdgesArrayAccess);var u=null;0<=n&&(u=s.destinationEdgesArrayAccess);var l=0,d=[],c=s.near;if(null!==c&&c.layer===s.layer&&(d[l]=c.column-1,l++),s=void 0,null!==h)for(c=0;c<h.length;c++){var g=(s=h[c]).fromVertex;s.valid&&!s.rev&&g.layer!==e&&(d[l]=g.column+s.portFromColOffset,l++)}if(null!==u)for(h=0;h<u.length;h++)c=(s=u[h]).toVertex,s.valid&&!s.rev&&c.layer!==e&&(d[l]=c.column+s.portToColOffset,l++);0===l?r[a]=-1:(d.sort(function(t,e){return t-e}),u=l>>1,r[a]=0!=(1&l)?d[u]:d[u-1]+d[u]>>1)}return yf(t,e,i),r}function nf(t,e,n,i,o,r){if(e.component===i){if(e.component=n,o)for(var a=e.destinationEdges;a.next();){var s=a.value,h=s.toVertex,u=e.layer-h.layer;u===(s=t.linkMinLength(s))&&nf(t,h,n,i,o,r)}if(r)for(a=e.sourceEdges;a.next();)(u=(h=(s=a.value).fromVertex).layer-e.layer)===(s=t.linkMinLength(s))&&nf(t,h,n,i,o,r)}}function of(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,i=e.destinationEdges;i.next();)if(i.value.toVertex.valid){n=!1;break}if(n)return e}}return null}function rf(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,i=e.sourceEdges;i.next();)if(i.value.fromVertex.valid){n=!1;break}if(n)return e}}return null}function af(t,e){e.Cg=t.nh,t.nh++;for(var n=e.destinationEdges;n.next();){var i=n.value,o=i.toVertex;-1===o.Cg&&(i.forest=!0,af(t,o))}e.finish=t.nh,t.nh++}function sf(t){for(var e=t.network.vertexes.iterator;e.next();){var n=function t(e,n){var i=0;if(-1===n.layer){for(var o=n.destinationEdges;o.next();){var r=o.value,a=r.toVertex;r=e.linkMinLength(r),i=Math.max(i,t(e,a)+r)}n.layer=i}else i=n.layer;return i}(t,e.value);t.ra=Math.max(n,t.ra)}}function hf(t,e,n){return 90===t.J?n&&!e.rev||!n&&e.rev?270:90:180===t.J?n&&!e.rev||!n&&e.rev?0:180:270===t.J?n&&!e.rev||!n&&e.rev?90:270:n&&!e.rev||!n&&e.rev?180:0}function uf(t,e,n){var i=mf(t,e),o=t.zb[e],r=ef(t,e,n),a=tf(t,e,n);for(n=0;n<o;n++)-1===a[n]&&(a[n]=i[n].column),-1===r[n]&&(r[n]=i[n].column);for(var s,h=!0;h;)for(h=!1,n=0;n<o-1;n++)(r[n+1]<r[n]||r[n+1]===r[n]&&a[n+1]<a[n])&&(h=!0,s=r[n],r[n]=r[n+1],r[n+1]=s,s=a[n],a[n]=a[n+1],a[n+1]=s,s=i[n],i[n]=i[n+1],i[n+1]=s);for(n=r=0;n<o;n++)(s=i[n]).index=n,r+=t.nodeMinColumnSpace(s,!0),s.column=r,r+=1,r+=t.nodeMinColumnSpace(s,!1);yf(t,e,i)}function lf(t,e,n){var i=mf(t,e),o=t.zb[e];n=Zg(t,e,n);for(var r=[],a=0;a<o;a++)r[a]=-1;var s=[];for(a=0;a<o;a++)s[a]=-1;for(var h=!1,u=!0;u;)for(u=!1,a=0;a<o-1;a++){var l=n[i[a].index*o+i[a+1].index],d=n[i[a+1].index*o+i[a].index],c=0,g=0,f=i[a].column,p=i[a+1].column,m=t.nodeMinColumnSpace(i[a],!0),y=t.nodeMinColumnSpace(i[a],!1),v=t.nodeMinColumnSpace(i[a+1],!0),w=t.nodeMinColumnSpace(i[a+1],!1),m=f-m+v,y=p-y+w,b=i[a].sourceEdges.iterator;for(b.reset();b.next();)if(w=(v=b.value).fromVertex,v.valid&&w.layer===e){for(v=0;i[v]!==w;)v++;v<a&&(c+=2*(a-v),g+=2*(a+1-v)),v===a+1&&(c+=1),a+1<v&&(c+=4*(v-a),g+=4*(v-(a+1)))}for((b=i[a].destinationEdges.iterator).reset();b.next();)if(w=(v=b.value).toVertex,v.valid&&w.layer===e){for(v=0;i[v]!==w;)v++;v===a+1&&(g+=1)}for((b=i[a+1].sourceEdges.iterator).reset();b.next();)if(w=(v=b.value).fromVertex,v.valid&&w.layer===e){for(v=0;i[v]!==w;)v++;v<a&&(c+=2*(a+1-v),g+=2*(a-v)),v===a&&(g+=1),a+1<v&&(c+=4*(v-(a+1)),g+=4*(v-a))}for((b=i[a+1].destinationEdges.iterator).reset();b.next();)if(w=(v=b.value).toVertex,v.valid&&w.layer===e){for(v=0;i[v]!==w;)v++;v===a&&(c+=1)}v=w=0,b=r[i[a].index];var S=s[i[a].index],x=r[i[a+1].index],P=s[i[a+1].index];-1!==b&&(w+=Math.abs(b-f),v+=Math.abs(b-y)),-1!==S&&(w+=Math.abs(S-f),v+=Math.abs(S-y)),-1!==x&&(w+=Math.abs(x-p),v+=Math.abs(x-m)),-1!==P&&(w+=Math.abs(P-p),v+=Math.abs(P-m)),(g<c-.5||g===c&&d<l-.5||g===c&&d===l&&v<w-.5)&&(u=h=!0,i[a].column=y,i[a+1].column=m,l=i[a],i[a]=i[a+1],i[a+1]=l)}for(a=0;a<o;a++)i[a].index=a;return yf(t,e,i),h}function df(t,e,n){for(var i=!1;function(t,e,n){var i,o=mf(t,e),r=t.zb[e],a=tf(t,e,-1);if(0<n)for(i=0;i<r;i++)a[i]=-1;var s=tf(t,e,1);if(n<0)for(i=0;i<r;i++)s[i]=-1;for(var h=!1,u=!0;u;)for(u=!1,i=0;i<r;i++){var l=o[i].column,d=t.nodeMinColumnSpace(o[i],!0),c=t.nodeMinColumnSpace(o[i],!1),g=0;g=i-1<0||l-o[i-1].column-1>d+t.nodeMinColumnSpace(o[i-1],!1)?l-1:l,d=r<=i+1||o[i+1].column-l-1>c+t.nodeMinColumnSpace(o[i+1],!0)?l+1:l;var f=c=0,p=0;if(n<=0)for(var m=o[i].sourceEdges.iterator;m.next();){var y,v,w=m.value,b=w.fromVertex;w.valid&&b.layer!==e&&(y=Wg(w),v=w.portFromColOffset,w=w.portToColOffset,b=b.column,c+=(Math.abs(l+w-(b+v))+1)*y,f+=(Math.abs(g+w-(b+v))+1)*y,p+=(Math.abs(d+w-(b+v))+1)*y)}if(0<=n)for(m=o[i].destinationEdges.iterator;m.next();)w=m.value,b=w.toVertex,w.valid&&b.layer!==e&&(y=Wg(w),v=w.portFromColOffset,w=w.portToColOffset,b=b.column,c+=(Math.abs(l+v-(b+w))+1)*y,f+=(Math.abs(g+v-(b+w))+1)*y,p+=(Math.abs(d+v-(b+w))+1)*y);w=v=y=0,m=a[o[i].index],b=s[o[i].index],-1!==m&&(y+=Math.abs(m-l),v+=Math.abs(m-g),w+=Math.abs(m-d)),-1!==b&&(y+=Math.abs(b-l),v+=Math.abs(b-g),w+=Math.abs(b-d)),f<c||f===c&&v<y?(u=h=!0,o[i].column=g):(p<c||p===c&&w<y)&&(u=h=!0,o[i].column=d)}return yf(t,e,o),t.normalize(),h}(t,e,n);)i=!0;return i}function cf(t,e,n){var i=mf(t,e),o=t.zb[e],r=ef(t,e,n),a=[];for(n=0;n<o;n++)a[n]=r[n];for(r=!0;r;)for(r=!1,n=0;n<o;n++){var s=i[n].column,h=t.nodeMinColumnSpace(i[n],!0),u=t.nodeMinColumnSpace(i[n],!1),l=0;-1===a[n]?l=0===n&&n===o-1?s:0===n?i[n+1].column-s===u+t.nodeMinColumnSpace(i[n+1],!0)?s-1:s:n===o-1?s-i[n-1].column===h+t.nodeMinColumnSpace(i[n-1],!1)?s+1:s:((h=i[n-1].column+t.nodeMinColumnSpace(i[n-1],!1)+h+1)+(u=i[n+1].column-t.nodeMinColumnSpace(i[n+1],!0)-u-1))/2|0:0===n&&n===o-1?l=a[n]:0===n?(u=i[n+1].column-t.nodeMinColumnSpace(i[n+1],!0)-u-1,l=Math.min(a[n],u)):n===o-1?(h=i[n-1].column+t.nodeMinColumnSpace(i[n-1],!1)+h+1,l=Math.max(a[n],h)):(h=i[n-1].column+t.nodeMinColumnSpace(i[n-1],!1)+h+1,u=i[n+1].column-t.nodeMinColumnSpace(i[n+1],!0)-u-1,h<a[n]&&a[n]<u?l=a[n]:h>=a[n]?l=h:u<=a[n]&&(l=u)),l!==s&&(r=!0,i[n].column=l)}yf(t,e,i),t.normalize()}function gf(t,e){for(var n=0;n<=t.Ba;n++)for(;function(t,e){for(var n=!0,i=t.network.vertexes.iterator;i.next();){var o=i.value,r=t.nodeMinColumnSpace(o,!0),a=t.nodeMinColumnSpace(o,!1);if(o.column-r<=e&&o.column+a>=e){n=!1;break}}if(t=!1,n)for(i.reset();i.next();)(n=i.value).column>e&&(--n.column,t=!0);return t}(t,n););for(t.normalize(),n=0;n<t.Ba;n++)for(;function(t,e){for(var n=e+1,i=[],o=[],r=0;r<=t.ra;r++)i[r]=!1,o[r]=!1;for(var a=t.network.vertexes.iterator;a.next();){var s=(r=a.value).column-t.nodeMinColumnSpace(r,!0),h=r.column+t.nodeMinColumnSpace(r,!1);s<=e&&e<=h&&(i[r.layer]=!0),s<=n&&n<=h&&(o[r.layer]=!0)}for(n=!(s=!0),r=0;r<=t.ra;r++)s=s&&!(i[r]&&o[r]);if(s)for(a.reset();a.next();)(t=a.value).column>e&&(--t.column,n=!0);return n}(t,n););if(t.normalize(),0<e)for(n=0;n<=t.Ba;n++)for(var i=$g(t),o=Qg(t),r=o+1;o<r;){r=o,ff(t,n,1);var a=Qg(t);o<a?Jg(t,i):a<o&&(o=a,i=$g(t))}if(e<0)for(n=t.Ba;0<=n;n--)for(i=$g(t),r=(o=Qg(t))+1;o<r;)r=o,ff(t,n,-1),o<(a=Qg(t))?Jg(t,i):a<o&&(o=a,i=$g(t));t.normalize()}function ff(t,e,n){t.Ec=0;for(var i,o=t.network.vertexes.iterator;o.next();)o.value.component=-1;if(0<n)for(o.reset();o.next();){var r=o.value;r.column-t.nodeMinColumnSpace(r,!0)<=e&&(r.component=t.Ec)}if(n<0)for(o.reset();o.next();)(r=o.value).column+t.nodeMinColumnSpace(r,!1)>=e&&(r.component=t.Ec);for(t.Ec++,o.reset();o.next();)-1===(e=o.value).component&&(function t(e,n,i,o,r,a){if(n.component===o){if(n.component=i,r)for(var s=n.destinationEdges;s.next();)t(e,s.value.toVertex,i,o,r,a);if(a)for(n=n.sourceEdges;n.next();)t(e,n.value.fromVertex,i,o,r,a)}}(t,e,t.Ec,-1,!0,!0),t.Ec++);for(e=[],i=0;i<t.Ec*t.Ec;i++)e[i]=!1;for(r=[],i=0;i<(t.ra+1)*(t.Ba+1);i++)r[i]=-1;for(o.reset();o.next();)for(var a=(i=o.value).layer,s=Math.max(0,i.column-t.nodeMinColumnSpace(i,!0)),h=Math.min(t.Ba,i.column+t.nodeMinColumnSpace(i,!1));s<=h;s++)r[a*(t.Ba+1)+s]=i.component;for(i=0;i<=t.ra;i++){if(0<n)for(a=0;a<t.Ba;a++)-1!==r[i*(t.Ba+1)+a]&&-1!==r[i*(t.Ba+1)+a+1]&&r[i*(t.Ba+1)+a]!==r[i*(t.Ba+1)+a+1]&&(e[r[i*(t.Ba+1)+a]*t.Ec+r[i*(t.Ba+1)+a+1]]=!0);if(n<0)for(a=t.Ba;0<a;a--)-1!==r[i*(t.Ba+1)+a]&&-1!==r[i*(t.Ba+1)+a-1]&&r[i*(t.Ba+1)+a]!==r[i*(t.Ba+1)+a-1]&&(e[r[i*(t.Ba+1)+a]*t.Ec+r[i*(t.Ba+1)+a-1]]=!0)}for(r=[],i=0;i<t.Ec;i++)r[i]=!0;for((a=[]).push(0);0!==a.length;)if(h=a[a.length-1],a.pop(),r[h])for(r[h]=!1,i=0;i<t.Ec;i++)e[h*t.Ec+i]&&a.splice(0,0,i);if(0<n)for(o.reset();o.next();)r[(t=o.value).component]&&--t.column;if(n<0)for(o.reset();o.next();)r[(n=o.value).component]&&(n.column+=1)}function pf(t,e){return 270===t.J?e?_e:Te:90===t.J?e?Te:_e:180===t.J?e?Ne:Ae:e?Ae:Ne}function mf(t,e){var n=t.zb[e];if(n>=t.te.length){for(var i=[],o=0;o<t.te.length;o++)i[o]=t.te[o];t.te=i}for(void 0===t.te[n]||null===t.te[n]?i=[]:(i=t.te[n],t.te[n]=null),t=t.bp[e],e=0;e<t.length;e++)i[(n=t[e]).index]=n;return i}function yf(t,e,n){t.te[t.zb[e]]=n}rg.className="CircularLayout",rg.ConstantSpacing=pg,rg.ConstantDistance=mg,rg.ConstantAngle=yg,rg.Packed=vg,rg.Clockwise=wg,rg.Counterclockwise=bg,rg.BidirectionalLeft=Sg,rg.BidirectionalRight=xg,rg.Forwards=Pg,rg.Reverse=kg,rg.Ascending=Lg,rg.Descending=Mg,rg.Optimized=_g,rg.Pythagorean=Ng,rg.Circular=Ag,Tg.prototype.compare=function(t,e){if(0<t&&this.vm<0||Math.abs(t)<Math.abs(this.vm)&&!(t<0&&0<this.vm))for(this.vm=t,this.Ok=[],this.an=[],t=0;t<e.length;t++)this.Ok[t]=e[t].bounds.x,this.an[t]=e[t].bounds.y},Tg.prototype.commit=function(t){if(null!==this.Ok&&null!==this.an)for(var e=0;e<this.Ok.length;e++){var n=t.L(e);n.x=this.Ok[e],n.y=this.an[e]}},Tg.className="VertexArrangement",n(Cg,Od),Cg.prototype.createVertex=function(){return new Dg(this)},Cg.prototype.createEdge=function(){return new Fg(this)},Cg.className="CircularNetwork",n(Dg,zd),s.Object.defineProperties(Dg.prototype,{diameter:{get:function(){return this.Dj},set:function(t){this.Dj!==t&&(this.Dj=t)}},actualAngle:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}}}),Dg.className="CircularVertex",n(Fg,Id),Fg.className="CircularEdge",n(Og,Sd),Og.prototype.cloneProtected=function(t){Sd.prototype.cloneProtected.call(this,t),t.Hd.assign(this.Hd),t.nn=this.nn,t.hf=this.hf,t.ed=this.ed,t.Ll=this.Ll,t.Wn=this.Wn,t.Xf=this.Xf,t.Yo=this.Yo,t.xp=this.xp,t.hl=this.hl,t.gl=this.gl,t.el=this.el,t.fl=this.fl,t.Nn=this.Nn,t.Mn=this.Mn},Og.prototype.serializeLayoutProperties=function(t,e){Sd.prototype.serializeLayoutProperties.call(this,t,e),t.arrangementSpacing={width:this.arrangementSpacing.width,height:this.arrangementSpacing.height},t.arrangesToOrigin=this.arrangesToOrigin,t.setsPortSpots=this.setsPortSpots,t.comments=this.comments,t.maxIterations=this.maxIterations,t.epsilonDistance=this.epsilonDistance,t.infinityDistance=this.infinityDistance,t.moveLimit=this.moveLimit,t.defaultSpringStiffness=this.defaultSpringStiffness,t.defaultSpringLength=this.defaultSpringLength,t.defaultElectricalCharge=this.defaultElectricalCharge,t.defaultGravitationalMass=this.defaultGravitationalMass,t.defaultCommentSpringLength=this.defaultCommentSpringLength,t.defaultCommentElectricalCharge=this.defaultCommentElectricalCharge},Og.prototype.deserializeLayoutProperties=function(t,e,n,i){Sd.prototype.deserializeLayoutProperties.call(this,t,e,n,i),this.arrangementSpacing=new xe(t.arrangementSpacing.width,t.arrangementSpacing.height),this.arrangesToOrigin=t.arrangesToOrigin,this.setsPortSpots=t.setsPortSpots,this.comments=t.comments,this.maxIterations=t.maxIterations,this.epsilonDistance=t.epsilonDistance,this.infinityDistance=t.infinityDistance,this.moveLimit=t.moveLimit,this.defaultSpringStiffness=t.defaultSpringStiffness,this.defaultSpringLength=t.defaultSpringLength,this.defaultElectricalCharge=t.defaultElectricalCharge,this.defaultGravitationalMass=t.defaultGravitationalMass,this.defaultCommentSpringLength=t.defaultCommentSpringLength,this.defaultCommentElectricalCharge=t.defaultCommentElectricalCharge},Og.prototype.createNetwork=function(){return new qg(this)},Og.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),!this.Sw()){if(t=this.maxIterations,0<this.network.vertexes.count){this.network.zq();for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;n.charge=this.electricalCharge(n),n.mass=this.gravitationalMass(n)}for(e=this.network.edges.iterator;e.next();)(n=e.value).stiffness=this.springStiffness(n),n.length=this.springLength(n);if(this.Fv(),this.Ao=0,this.needsClusterLayout()){for(var i=(n=(e=this.network).Uy()).iterator;i.next();){this.network=i.value;for(var o=this.network.vertexes.iterator;o.next();){var r=o.value;r.Dd=r.vertexes.count,r.Sh=1,r.mk=null,r.Ke=null}!function t(e,n,i){if(Bg(e,n)){var o=e.Xf;e.Xf*=1+1/(n+1);var r=Gg(e,n),a=Math.max(0,Math.max(Math.min(e.network.vertexes.count,i*(n+1)/11),10));for(e.maxIterations+=a,t(e,n+1,i),Vg(e,a),jg(e,r),(n=r.vertexes.ma()).sort(function(t,e){return null===t||null===e||t===e?0:e.Dd-t.Dd}),i=0;i<n.length;i++)zg(e,n[i]);e.Xf=o}}(this,0,t)}this.network=e;for(var a=i=n.iterator,i=this.arrangementSpacing,s=a.count,h=!0,r=o=0,u=be(),l=0;l<s+e.vertexes.count+2;l++)u[l]=null;s=0,a.reset();for(var d=ne.alloc();a.next();)if(l=a.value,this.computeBounds(l,d),h)h=!1,o=d.x+d.width/2,r=d.y+d.height/2,u[0]=new ee(d.x+d.width+i.width,d.y),u[1]=new ee(d.x,d.y+d.height+i.height),s=2;else{var c=Rg(u,s,o,r,d.width,d.height,i),g=u[c],f=new ee(g.x+d.width+i.width,g.y),p=new ee(g.x,g.y+d.height+i.height);for(c+1<s&&u.splice(c+1,0,null),u[c]=f,u[c+1]=p,s++,c=g.x-d.x,g=g.y-d.y,l=l.vertexes.iterator;l.next();)(f=l.value).centerX+=c,f.centerY+=g}for(ne.free(d),l=e.vertexes.iterator;l.next();)c=(a=l.value).bounds,s<2?(o=c.x+c.width/2,r=c.y+c.height/2,u[0]=new ee(c.x+c.width+i.width,c.y),u[1]=new ee(c.x,c.y+c.height+i.height),s=2):(g=new ee((d=u[h=Rg(u,s,o,r,c.width,c.height,i)]).x+c.width+i.width,d.y),c=new ee(d.x,d.y+c.height+i.height),h+1<s&&u.splice(h+1,0,null),u[h]=g,u[h+1]=c,s++,a.centerX=d.x+a.width/2,a.centerY=d.y+a.height/2);for(Se(u),i=n.iterator;i.next();){for(o=(n=i.value).vertexes.iterator;o.next();)e.Bg(o.value);for(n=n.edges.iterator;n.next();)e.nm(n.value)}}Vg(this,t),this.updateParts()}this.Ll=t,this.network=null,this.isValidLayout=!0}},Og.prototype.needsClusterLayout=function(){if(this.network.vertexes.count<3)return!1;for(var t=0,e=0,n=this.network.vertexes.first().bounds,i=this.network.vertexes.iterator;i.next();){if(i.value.bounds.Lc(n)&&2<++t)return!0;if(10<e)break;e++}return!1},Og.prototype.computeBounds=function(t,e){var n=!0;for(t=t.vertexes.iterator;t.next();){var i=t.value;n?(n=!1,e.set(i.bounds)):e.Oc(i.bounds)}return e},Og.prototype.Fv=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},Og.prototype.addComments=function(t){var e=t.node;if(null!==e)for(e=e.Rv();e.next();){var n=e.value;if("Comment"===n.category&&n.isVisible()){var i=this.network.kj(n);null===i&&(i=this.network.jk(n)),i.charge=this.defaultCommentElectricalCharge,n=null;for(var o=i.destinationEdges;o.next();){var r=o.value;if(r.toVertex===t){n=r;break}}if(null===n)for(o=i.sourceEdges;o.next();)if((r=o.value).fromVertex===t){n=r;break}null===n&&(n=this.network.Ak(t,i,null)),n.length=this.defaultCommentSpringLength}}},Og.prototype.moveVertex=function(t){var e=t.forceX,n=t.forceY,i=this.moveLimit;return e<-i?e=-i:i<e&&(e=i),n<-i?n=-i:i<n&&(n=i),t.centerX+=e,t.centerY+=n,e*e+n*n},Og.prototype.moveFixedVertex=function(){},Og.prototype.commitLayout=function(){this.Cw(),this.commitNodes(),this.isRouting&&this.commitLinks()},Og.prototype.Cw=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;null!==e&&(e.fromSpot=we,e.toSpot=we)}},Og.prototype.commitNodes=function(){var t,e=0,n=0;this.arrangesToOrigin&&(t=ne.alloc(),this.computeBounds(this.network,t),e=(n=this.arrangementOrigin).x-t.x,n=n.y-t.y,ne.free(t)),t=ne.alloc();for(var i=this.network.vertexes.iterator;i.next();){var o=i.value;0===e&&0===n||(t.assign(o.bounds),t.x+=e,t.y+=n,o.bounds=t),o.commit()}ne.free(t)},Og.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Og.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.hl:t},Og.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.gl:t},Og.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.el:t},Og.prototype.electricalFieldX=function(){return 0},Og.prototype.electricalFieldY=function(){return 0},Og.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.fl:t},Og.prototype.gravitationalFieldX=function(){return 0},Og.prototype.gravitationalFieldY=function(){return 0},Og.prototype.isFixed=function(t){return t.isFixed},s.Object.defineProperties(Og.prototype,{currentIteration:{get:function(){return this.Ao}},arrangementSpacing:{get:function(){return this.Hd},set:function(t){this.Hd.w(t)||(this.Hd.assign(t),this.C())}},arrangesToOrigin:{get:function(){return this.nn},set:function(t){this.nn!==t&&(this.nn=t,this.C())}},setsPortSpots:{get:function(){return this.hf},set:function(t){this.hf!==t&&(this.hf=t,this.C())}},comments:{get:function(){return this.ed},set:function(t){this.ed!==t&&(this.ed=t,this.C())}},maxIterations:{get:function(){return this.Ll},set:function(t){this.Ll!==t&&0<=t&&(this.Ll=t,this.C())}},epsilonDistance:{get:function(){return this.Wn},set:function(t){this.Wn!==t&&0<t&&(this.Wn=t,this.C())}},infinityDistance:{get:function(){return this.Xf},set:function(t){this.Xf!==t&&1<t&&(this.Xf=t,this.C())}},moveLimit:{get:function(){return this.Yo},set:function(t){this.Yo!==t&&1<t&&(this.Yo=t,this.C())}},randomNumberGenerator:{get:function(){return this.xp},set:function(t){this.xp!==t&&(null!==t&&"function"!=typeof t.random&&O('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.xp=t)}},defaultSpringStiffness:{get:function(){return this.hl},set:function(t){this.hl!==t&&(this.hl=t,this.C())}},defaultSpringLength:{get:function(){return this.gl},set:function(t){this.gl!==t&&(this.gl=t,this.C())}},defaultElectricalCharge:{get:function(){return this.el},set:function(t){this.el!==t&&(this.el=t,this.C())}},defaultGravitationalMass:{get:function(){return this.fl},set:function(t){this.fl!==t&&(this.fl=t,this.C())}},defaultCommentSpringLength:{get:function(){return this.Nn},set:function(t){this.Nn!==t&&(this.Nn=t,this.C())}},defaultCommentElectricalCharge:{get:function(){return this.Mn},set:function(t){this.Mn!==t&&(this.Mn=t,this.C())}}}),Og.className="ForceDirectedLayout",Ug.className="ForceDirectedSubnet",n(qg,Od),qg.prototype.createVertex=function(){return new Hg(this)},qg.prototype.createEdge=function(){return new Yg(this)},qg.className="ForceDirectedNetwork",n(Hg,zd),Hg.prototype.serializeVertexProperties=function(t,e){zd.prototype.serializeVertexProperties.call(this,t,e),t.isFixed=this.isFixed,t.charge=this.charge,t.mass=this.mass},Hg.prototype.Aq=function(t,e,n,i){zd.prototype.Aq.call(this,t,e,n,i),this.isFixed=t.isFixed,this.charge=t.charge,this.mass=t.mass},s.Object.defineProperties(Hg.prototype,{isFixed:{get:function(){return this.Ka},set:function(t){this.Ka!==t&&(this.Ka=t)}},charge:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}},mass:{get:function(){return this.cb},set:function(t){this.cb!==t&&(this.cb=t)}},forceX:{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t)}},forceY:{get:function(){return this.Ja},set:function(t){this.Ja!==t&&(this.Ja=t)}}}),Hg.className="ForceDirectedVertex",n(Yg,Id),Yg.prototype.serializeEdgeProperties=function(t,e){Id.prototype.serializeEdgeProperties.call(this,t,e),t.stiffness=this.stiffness,t.length=this.length},Yg.prototype.deserializeEdgeProperties=function(t,e,n,i){Id.prototype.deserializeEdgeProperties.call(this,t,e,n,i),this.stiffness=t.stiffness,this.length=t.length},s.Object.defineProperties(Yg.prototype,{stiffness:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t)}},length:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t)}}}),Yg.className="ForceDirectedEdge",Kg.prototype.random=function(){var t=this.seed%this.Q*this.Wy-this.seed/this.Q*this.Zy;return this.seed=0<t?t:t+this.Yy,this.seed*this.Xy},Kg.className="RandomNumberGenerator",n(Xg,Sd),Xg.prototype.cloneProtected=function(t){Sd.prototype.cloneProtected.call(this,t),t.qe=this.qe,t.Zb=this.Zb,t.J=this.J,t.cl=this.cl,t.Gl=this.Gl,t.vl=this.vl,t.Oj=this.Oj,t.Sk=this.Sk,t.ng=this.ng,t.hf=this.hf,t.Io=this.Io},Xg.prototype.serializeLayoutProperties=function(t,e){Sd.prototype.serializeLayoutProperties.call(this,t,e),t.layerSpacing=this.layerSpacing,t.columnSpacing=this.columnSpacing,t.direction=this.direction,t.cycleRemoveOption=this.cycleRemoveOption.name,t.layeringOption=this.layeringOption.name,t.initializeOption=this.initializeOption.name,t.iterations=this.iterations,t.aggressiveOption=this.aggressiveOption.name,t.packOption=this.packOption,t.setsPortSpots=this.setsPortSpots,t.linkSpacing=this.linkSpacing,t.ra=this.ra,t.Ii=this.Ii,t.Ba=this.Ba,t.lh=this.lh,t.oc=this.oc,t.zb=this.zb,t.nh=this.nh,t.Ec=this.Ec,t.Sc={x:this.Sc.x,y:this.Sc.y}},Xg.prototype.deserializeLayoutProperties=function(t,e,n,i){Sd.prototype.deserializeLayoutProperties.call(this,t,e,n,i),this.layerSpacing=t.layerSpacing,this.columnSpacing=t.columnSpacing,this.direction=t.direction,this.cycleRemoveOption=z(Xg,t.cycleRemoveOption),this.layeringOption=z(Xg,t.layeringOption),this.initializeOption=z(Xg,t.initializeOption),this.iterations=t.iterations,this.aggressiveOption=z(Xg,t.aggressiveOption),this.packOption=t.packOption,this.setsPortSpots=t.setsPortSpots,this.linkSpacing=t.linkSpacing,this.ra=t.ra,this.Ii=t.Ii,this.Ba=t.Ba,this.lh=t.lh,this.oc=t.oc,this.zb=t.zb,this.nh=t.nh,this.Ec=t.Ec,this.Sc=new ee(this.Sc.x,this.Sc.y)},Xg.prototype.hb=function(t){t.classType===Xg?0===t.name.indexOf("Aggressive")?this.aggressiveOption=t:0===t.name.indexOf("Cycle")?this.cycleRemoveOption=t:0===t.name.indexOf("Init")?this.initializeOption=t:0===t.name.indexOf("Layer")?this.layeringOption=t:O("Unknown enum value: "+t):Sd.prototype.hb.call(this,t)},Xg.prototype.createNetwork=function(){return new Cf(this)},Xg.prototype.doLayout=function(t){for(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.Ii=-1,this.oc=this.lh=0,this.bp=this.ap=this.Tj=null,t=0;t<this.te.length;t++)this.te[t]=null;if(0<this.network.vertexes.count){if(this.network.zq(),this.Sw())return;for(this.cycleRemoveOption!==bf&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.ra=-1,this.assignLayers(),t.reset();t.next();)this.ra=Math.max(this.ra,t.value.layer);this.cycleRemoveOption===bf&&this.removeCycles();for(var e=[],n=(t=this.network).edges.iterator;n.next();){var i=n.value;i.valid=!1,e.push(i)}for(n=0;n<e.length;n++){var o=(i=e[n]).fromVertex,r=i.toVertex;if(!(i.valid||(null===o.node&&null===o.data||null===r.node&&null===r.data)&&o.layer===r.layer)){var a,s,h,u,l,d,c,g=0,f=0,p=0,m=0;if(null!==i.link){if(null===(f=i.link))continue;var y=o.node,g=r.node;if(null===y||null===g)continue;var v=f.fromNode;p=f.toNode;var w=f.fromPort;f=f.toPort,i.rev&&(m=v,x=w,v=p,w=f,p=m,f=x);var b=o.focus,m=r.focus,S=(i.rev?r:o).bounds,x=ee.alloc();y!==v?S.u()&&v.isVisible()?v.actualBounds.u()?(v.Cf(w,Wt,x),x.x+=v.actualBounds.x-S.x,x.y+=v.actualBounds.y-S.y):(v.Cf(w,Wt,x),x.u()||x.assign(b)):x.assign(b):S.u()?(v.Cf(w,Wt,x),x.u()||x.assign(b)):x.assign(b),v=(i.rev?o:r).bounds,y=ee.alloc(),g!==p?v.u()&&p.isVisible()?p.actualBounds.u()?(p.Cf(f,Wt,y),y.x+=p.actualBounds.x-v.x,y.y+=p.actualBounds.y-v.y):(p.Cf(f,Wt,y),y.u()||y.assign(m)):y.assign(m):v.u()?(p.Cf(f,Wt,y),y.u()||y.assign(m)):y.assign(m),m=90===this.J||270===this.J?(g=Math.round((x.x-b.x)/this.Zb),p=x.x,f=Math.round((y.x-m.x)/this.Zb),y.x):(g=Math.round((x.y-b.y)/this.Zb),p=x.y,f=Math.round((y.y-m.y)/this.Zb),y.y),ee.free(x),ee.free(y),i.portFromColOffset=g,i.portFromPos=p,i.portToColOffset=f,i.portToPos=m}else i.portFromColOffset=0,i.portFromPos=0,i.portToColOffset=0,i.portToPos=0;if(x=o.layer,y=r.layer,v=0,null!==(S=i.link)&&(a=S.fromPort,s=S.toPort,null!==a&&null!==s&&(h=S.fromNode,w=S.toNode,null!==h&&null!==w&&(u=pf(this,!0),l=pf(this,!1),d=this.setsPortSpots?u:S.computeSpot(!0,a),b=this.setsPortSpots?l:S.computeSpot(!1,s),c=S.isOrthogonal,d.Mc()&&d.Df(l)&&b.Mc()&&b.Df(u)?v=0:(u=S.getLinkPoint(h,a,d,!0,c,w,s,ee.alloc()),l=S.getLinkDirection(h,a,u,d,!0,c,w,s),ee.free(u),(!d.Vt()&&l===hf(this,i,!0)||this.setsPortSpots&&null!==h&&1===h.ports.count&&i.rev)&&(v+=1),d=S.getLinkPoint(w,s,b,!1,c,h,a,ee.alloc()),S=S.getLinkDirection(w,s,d,b,!1,c,h,a),ee.free(d),(!b.Vt()&&S===hf(this,i,!1)||this.setsPortSpots&&null!==w&&1===w.ports.count&&i.rev)&&(v+=2))))),v=1===(w=v)||3===w,(w=2===w||3===w)&&((b=t.createVertex()).node=null,b.wf=1,b.layer=x,b.near=o,t.Bg(b),(o=t.Ak(o,b,i.link)).valid=!1,o.rev=i.rev,o.portFromColOffset=g,o.portToColOffset=0,o.portFromPos=p,o.portToPos=0,o=b),S=1,v&&S--,S<x-y&&0<x){for(i.valid=!1,(b=t.createVertex()).node=null,b.wf=2,b.layer=x-1,t.Bg(b),(o=t.Ak(o,b,i.link)).valid=!0,o.rev=i.rev,o.portFromColOffset=w?0:g,o.portToColOffset=0,o.portFromPos=w?0:p,o.portToPos=0,o=b,x--;S<x-y&&0<x;)(b=t.createVertex()).node=null,b.wf=3,b.layer=x-1,t.Bg(b),(o=t.Ak(o,b,i.link)).valid=!0,o.rev=i.rev,o.portFromColOffset=0,o.portToColOffset=0,o.portFromPos=0,o.portToPos=0,o=b,x--;(o=t.Ak(b,r,i.link)).valid=!v,v&&(b.near=r),o.rev=i.rev,o.portFromColOffset=0,o.portToColOffset=f,o.portFromPos=0,o.portToPos=m}else i.valid=!0}}for(t=this.zb=[],e=0;e<=this.ra;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.Ii=-1,n=this.oc=this.lh=0;n<=this.ra;n++)t[n]>t[this.oc]&&(this.Ii=t[n]-1,this.oc=n),t[n]<t[this.lh]&&(this.lh=n);for(this.bp=[],n=0;n<t.length;n++)this.bp[n]=[];for(e.reset();e.next();)t=e.value,this.bp[t.layer][t.index]=t;for(this.Ba=-1,t=0;t<=this.ra;t++){for(e=mf(this,t),n=0,i=this.zb[t],r=0;r<i;r++)o=e[r],n+=this.nodeMinColumnSpace(o,!0),o.column=n,n+=1,n+=this.nodeMinColumnSpace(o,!1);this.Ba=Math.max(this.Ba,n-1),yf(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},Xg.prototype.linkMinLength=function(){return 1},Xg.prototype.nodeMinLayerSpace=function(t,e){return null===t.node&&null===t.data?0:90===this.J||270===this.J?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},Xg.prototype.nodeMinColumnSpace=function(t,e){if(null===t.node&&null===t.data)return 0;var n=e?t.Ik:t.Hk;return null!==n?n:90===(n=this.J)||270===n?e?t.Ik=t.focus.x/this.Zb+1|0:t.Hk=(t.bounds.width-t.focus.x)/this.Zb+1|0:e?t.Ik=t.focus.y/this.Zb+1|0:t.Hk=(t.bounds.height-t.focus.y)/this.Zb+1|0},Xg.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.ra;e++)for(var n=Zg(this,e,1),i=this.zb[e],o=0;o<i;o++)for(var r=o;r<i;r++)t+=n[o*i+r];return t},Xg.prototype.normalize=function(){var t=1/0;this.Ba=-1;for(var e=this.network.vertexes.iterator;e.next();){var n=e.value,t=Math.min(t,n.column-this.nodeMinColumnSpace(n,!0));this.Ba=Math.max(this.Ba,n.column+this.nodeMinColumnSpace(n,!1))}for(e.reset();e.next();)e.value.column-=t;this.Ba-=t},Xg.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.cl){default:case wf:var e=0,n=(t=this.network).vertexes.count-1,i=[];i.length=n+1;for(var o=t.vertexes.iterator;o.next();)o.value.valid=!0;for(;null!==function(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}(t);){for(o=of(t);null!==o;)i[n]=o,n--,o.valid=!1,o=of(t);for(o=rf(t);null!==o;)i[e]=o,e++,o.valid=!1,o=rf(t);o=null;for(var r=0,a=this.network.vertexes.iterator;a.next();){var s=a.value;if(s.valid){for(var h=0,u=s.destinationEdges;u.next();)u.value.toVertex.valid&&h++;u=0;for(var l=s.sourceEdges;l.next();)l.value.fromVertex.valid&&u++;(null===o||r<h-u)&&(o=s,r=h-u)}}null!==o&&(i[e]=o,e++,o.valid=!1)}for(e=0;e<t.vertexes.count;e++)i[e].index=e;for(i=t.edges.iterator;i.next();)(e=i.value).fromVertex.index>e.toVertex.index&&(t.Qm(e),e.rev=!0);break;case vf:for(i=this.network.vertexes.iterator;i.next();)(t=i.value).Cg=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.nh=0,i.reset();i.next();)0===(e=i.value).sourceEdges.count&&af(this,e);for(i.reset();i.next();)-1===(e=i.value).Cg&&af(this,e);for(t.reset();t.next();)(i=t.value).forest||(n=(e=i.fromVertex).finish,r=(o=i.toVertex).finish,o.Cg<e.Cg&&n<r&&(this.network.Qm(i),i.rev=!0));break;case bf:for(e=(t=this.network).vertexes.iterator,i=1/0;e.next();)i=Math.min(i,e.value.layer);if(i<1/0){if(i<0)for(e.reset();e.next();)e.value.layer-=i;for(i=[],e.reset();e.next();)void 0===(o=i[(n=e.value).layer])?i[n.layer]=[n]:o.push(n);for(n=e=0;n<i.length;n++)if((o=i[n])&&0!==o.length){if(0<n)for(r=0;r<o.length;r++)o[r].layer-=e}else e++;for(i=t.edges.iterator;i.next();)(e=i.value).fromVertex.layer<e.toVertex.layer&&(t.Qm(e),e.rev=!0)}}},Xg.prototype.assignLayers=function(){switch(this.Gl){case xf:sf(this);break;case Pf:for(var t,e=this.network.vertexes.iterator;e.next();)t=function t(e,n){var i=0;if(-1===n.layer){for(var o=n.sourceEdges;o.next();){var r=o.value,a=r.fromVertex;r=e.linkMinLength(r),i=Math.max(i,t(e,a)+r)}n.layer=i}else i=n.layer;return i}(this,e.value),this.ra=Math.max(t,this.ra);for(e.reset();e.next();)(t=e.value).layer=this.ra-t.layer;break;default:for(sf(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)0===(t=e.value).sourceEdges.count&&function t(e,n){if(!n.valid){n.valid=!0;for(var i=n.destinationEdges;i.next();)t(e,i.value.toVertex);for(i=e.network.vertexes.iterator;i.next();)i.value.component=-1;for(var o=n.sourceEdgesArrayAccess,r=o.length,a=0;a<r;a++){var s=o[a],h=s.fromVertex,u=s.toVertex;s=e.linkMinLength(s),h.layer-u.layer>s&&nf(e,h,0,-1,!0,!1)}for(nf(e,n,1,-1,!0,!0);0!==n.component;){for(o=1/(a=0),h=0,u=null,s=e.network.vertexes.iterator;s.next();){var l=s.value;if(1===l.component){var d=0,c=!1,g=l.sourceEdgesArrayAccess;r=g.length;for(var f=0;f<r;f++){var p=g[f],m=p.fromVertex;d+=1,1!==m.component&&(a+=1,m=m.layer-l.layer,p=e.linkMinLength(p),o=Math.min(o,m-p))}for(g=l.destinationEdgesArrayAccess,r=g.length,f=0;f<r;f++)p=g[f].toVertex,--d,1!==p.component?--a:c=!0;(null===u||d<h)&&!c&&(u=l,h=d)}}if(0<a){for(i.reset();i.next();)1===(r=i.value).component&&(r.layer+=o);n.component=0}else u.component=0}for(i=e.network.vertexes.iterator;i.next();)i.value.component=-1;for(nf(e,n,1,-1,!0,!1);0!==n.component;){for(r=1/(o=0),a=0,h=null,u=e.network.vertexes.iterator;u.next();)if(1===(s=u.value).component){for(l=0,d=!1,g=s.sourceEdgesArrayAccess,c=g.length,f=0;f<c;f++)p=g[f].fromVertex,l+=1,1!==p.component?o+=1:d=!0;for(g=s.destinationEdgesArrayAccess,c=g.length,f=0;f<c;f++)p=g[f],m=p.toVertex,--l,1!==m.component&&(--o,m=s.layer-m.layer,p=e.linkMinLength(p),r=Math.min(r,m-p));(null===h||a<l)&&!d&&(h=s,a=l)}if(o<0){for(i.reset();i.next();)1===(o=i.value).component&&(o.layer-=r);n.component=0}else h.component=0}}}(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.ra=-1,e.reset();e.next();){var n=e.value;n.layer-=t,this.ra=Math.max(this.ra,n.layer)}}},Xg.prototype.initializeIndices=function(){switch(this.vl){default:case Mf:for(var t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;e.index=this.zb[n],this.zb[n]++}break;case kf:for(t=this.network.vertexes.iterator,e=this.ra;0<=e;e--)for(t.reset();t.next();)(n=t.value).layer===e&&-1===n.index&&function t(e,n){var i=n.layer;n.index=e.zb[i];e.zb[i]++;n=n.destinationEdgesArrayAccess;for(i=!0;i;){i=!1;for(var o=0;o<n.length-1;o++){var r=n[o],a=n[o+1];r.portFromColOffset>a.portFromColOffset&&(i=!0,n[o]=a,n[o+1]=r)}}for(i=0;i<n.length;i++)(o=n[i]).valid&&(-1===(o=o.toVertex).index&&t(e,o))}(this,n);break;case Lf:for(t=this.network.vertexes.iterator,e=0;e<=this.ra;e++)for(t.reset();t.next();)(n=t.value).layer===e&&-1===n.index&&function t(e,n){var i=n.layer;n.index=e.zb[i];e.zb[i]++;n=n.sourceEdgesArrayAccess;for(var o=!0;o;)for(o=!1,i=0;i<n.length-1;i++){var r=n[i],a=n[i+1];r.portToColOffset>a.portToColOffset&&(o=!0,n[i]=a,n[i+1]=r)}for(i=0;i<n.length;i++)(o=n[i]).valid&&(-1===(o=o.fromVertex).index&&t(e,o))}(this,n)}},Xg.prototype.reduceCrossings=function(){for(var t,e,n,i,o=this.countCrossings(),r=$g(this),a=0;a<this.Oj;a++){for(t=0;t<=this.ra;t++)uf(this,t,1),lf(this,t,1);var s=this.countCrossings();for(s<o&&(o=s,r=$g(this)),t=this.ra;0<=t;t--)uf(this,t,-1),lf(this,t,-1);(s=this.countCrossings())<o&&(o=s,r=$g(this))}for(Jg(this,r),a=0;a<this.Oj;a++){for(t=0;t<=this.ra;t++)uf(this,t,0),lf(this,t,0);for((s=this.countCrossings())<o&&(o=s,r=$g(this)),t=this.ra;0<=t;t--)uf(this,t,0),lf(this,t,0);(s=this.countCrossings())<o&&(o=s,r=$g(this))}switch(Jg(this,r),this.Sk){case _f:break;case Af:for(i=o+1;(t=this.countCrossings())<i;)for(i=t,a=this.ra;0<=a;a--)for(n=0;n<=a;n++){for(e=!0;e;)for(e=!1,t=a;n<=t;t--)e=lf(this,t,-1)||e;for(o<=(s=this.countCrossings())?Jg(this,r):(o=s,r=$g(this)),e=!0;e;)for(e=!1,t=a;n<=t;t--)e=lf(this,t,1)||e;for(o<=(s=this.countCrossings())?Jg(this,r):(o=s,r=$g(this)),e=!0;e;)for(e=!1,t=n;t<=a;t++)e=lf(this,t,1)||e;for(o<=s?Jg(this,r):(o=s,r=$g(this)),e=!0;e;)for(e=!1,t=n;t<=a;t++)e=lf(this,t,-1)||e;for(o<=s?Jg(this,r):(o=s,r=$g(this)),e=!0;e;)for(e=!1,t=a;n<=t;t--)e=lf(this,t,0)||e;for(o<=s?Jg(this,r):(o=s,r=$g(this)),e=!0;e;)for(e=!1,t=n;t<=a;t++)e=lf(this,t,0)||e;o<=s?Jg(this,r):(o=s,r=$g(this))}break;default:for(a=this.ra,n=0,i=o+1;(t=this.countCrossings())<i;){for(i=t,e=!0;e;)for(e=!1,t=a;n<=t;t--)e=lf(this,t,-1)||e;for(o<=(s=this.countCrossings())?Jg(this,r):(o=s,r=$g(this)),e=!0;e;)for(e=!1,t=a;n<=t;t--)e=lf(this,t,1)||e;for(o<=(s=this.countCrossings())?Jg(this,r):(o=s,r=$g(this)),e=!0;e;)for(e=!1,t=n;t<=a;t++)e=lf(this,t,1)||e;for(o<=s?Jg(this,r):(o=s,r=$g(this)),e=!0;e;)for(e=!1,t=n;t<=a;t++)e=lf(this,t,-1)||e;for(o<=s?Jg(this,r):(o=s,r=$g(this)),e=!0;e;)for(e=!1,t=a;n<=t;t--)e=lf(this,t,0)||e;for(o<=s?Jg(this,r):(o=s,r=$g(this)),e=!0;e;)for(e=!1,t=n;t<=a;t++)e=lf(this,t,0)||e;o<=s?Jg(this,r):(o=s,r=$g(this))}}Jg(this,r)},Xg.prototype.straightenAndPack=function(){var t=0!=(1&this.ng),e=7===this.ng;if(1e3<this.network.edges.count&&!e&&(t=!1),t){var n=[];for(e=0;e<=this.ra;e++)n[e]=0;for(var i=this.network.vertexes.iterator;i.next();){var e=(r=i.value).layer,o=r.column,r=this.nodeMinColumnSpace(r,!1);n[e]=Math.max(n[e],o+r)}for(i.reset();i.next();)e=(r=i.value).layer,o=r.column,r.column=(8*(this.Ba-n[e])>>1)+8*o;this.Ba*=8}if(0!=(2&this.ng))for(n=!0;n;){for(n=!1,e=this.oc+1;e<=this.ra;e++)n=df(this,e,1)||n;for(e=this.oc-1;0<=e;e--)n=df(this,e,-1)||n;n=df(this,this.oc,0)||n}if(0!=(4&this.ng)){for(e=this.oc+1;e<=this.ra;e++)cf(this,e,1);for(e=this.oc-1;0<=e;e--)cf(this,e,-1);cf(this,this.oc,0)}if(t&&(gf(this,-1),gf(this,1)),0!=(2&this.ng))for(n=!0;n;){for(n=!1,n=df(this,this.oc,0)||n,e=this.oc+1;e<=this.ra;e++)n=df(this,e,0)||n;for(e=this.oc-1;0<=e;e--)n=df(this,e,0)||n}},Xg.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=pf(this,!0),e=pf(this,!1),n=this.network.edges.iterator;n.next();){var i=n.value.link;null!==i&&(i.fromSpot=t,i.toSpot=e)}this.commitNodes(),this.Hv(),this.isRouting&&this.commitLinks()},Xg.prototype.commitNodes=function(){this.Sd=[],this.ud=[],this.td=[],this.Ia=[];for(var t=0;t<=this.ra;t++)this.Sd[t]=0,this.ud[t]=0,this.td[t]=0,this.Ia[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;this.Sd[n]=Math.max(this.Sd[n],this.nodeMinLayerSpace(e,!0)),this.ud[n]=Math.max(this.ud[n],this.nodeMinLayerSpace(e,!1))}e=0,n=this.qe;for(var i=0;i<=this.ra;i++){var o=n;this.Sd[i]+this.ud[i]<=0&&(o=0),0<i&&(e+=o/2),90===this.J||0===this.J?(e+=this.ud[i],this.td[i]=e,e+=this.Sd[i]):(e+=this.Sd[i],this.td[i]=e,e+=this.ud[i]),i<this.ra&&(e+=o/2),this.Ia[i]=e}for(n=e,e=this.arrangementOrigin,i=0;i<=this.ra;i++)270===this.J?this.td[i]=e.y+this.td[i]:90===this.J?(this.td[i]=e.y+n-this.td[i],this.Ia[i]=n-this.Ia[i]):180===this.J?this.td[i]=e.x+this.td[i]:(this.td[i]=e.x+n-this.td[i],this.Ia[i]=n-this.Ia[i]);for(t.reset(),n=i=1/0;t.next();){var r,a=(o=t.value).layer,s=0|o.column;a=270===this.J||90===this.J?(r=e.x+this.Zb*s,this.td[a]):(r=this.td[a],e.y+this.Zb*s),o.centerX=r,o.centerY=a,i=Math.min(o.x,i),n=Math.min(o.y,n)}for(i=e.x-i,e=e.y-n,this.Sc=new ee(i,e),t.reset();t.next();)(n=t.value).x+=i,n.y+=e,n.commit()},Xg.prototype.Hv=function(){for(var t=0,e=this.qe,n=0;n<=this.ra;n++)t+=this.Sd[n],t+=this.ud[n];t+=this.ra*e,e=[],n=this.Zb*this.Ba;for(var i=this.maxLayer;0<=i;i--)270===this.J?0===i?e.push(new ne(0,0,n,Math.abs(this.Ia[0]))):e.push(new ne(0,this.Ia[i-1],n,Math.abs(this.Ia[i-1]-this.Ia[i]))):90===this.J?0===i?e.push(new ne(0,this.Ia[0],n,Math.abs(this.Ia[0]-t))):e.push(new ne(0,this.Ia[i],n,Math.abs(this.Ia[i-1]-this.Ia[i]))):180===this.J?0===i?e.push(new ne(0,0,Math.abs(this.Ia[0]),n)):e.push(new ne(this.Ia[i-1],0,Math.abs(this.Ia[i-1]-this.Ia[i]),n)):0===i?e.push(new ne(this.Ia[0],0,Math.abs(this.Ia[0]-t),n)):e.push(new ne(this.Ia[i],0,Math.abs(this.Ia[i-1]-this.Ia[i]),n));this.commitLayers(e,this.Sc)},Xg.prototype.commitLayers=function(){},Xg.prototype.commitLinks=function(){for(var t,e=this.network.edges.iterator;e.next();)null!==(t=e.value.link)&&(t.Th(),t.lk(),t.xf());for(e.reset();e.next();)null!==(t=e.value.link)&&t.wj();for(e.reset();e.next();)if(null!==(t=(h=e.value).link)){t.Th();var n=t,i=n.fromNode,o=n.toNode,r=n.fromPort,a=n.toPort;null===i||null!==(l=i.findVisibleNode())&&l!==i&&(r=(i=l).port),null!==o&&(null!==(l=o.findVisibleNode())&&l!==o&&(a=(o=l).port));var s,h,u=t.computeSpot(!0,r),l=t.computeSpot(!1,a),d=h.fromVertex,c=h.toVertex;if(h.valid)t.curve===Rl&&4===t.pointsCount&&(d.column===c.column?(h=t.getLinkPoint(i,r,u,!0,!1,o,a),r=t.getLinkPoint(o,a,l,!1,!1,i,r),h.u()||h.set(i.actualBounds.center),r.u()||r.set(o.actualBounds.center),t.lk(),t.vf(h.x,h.y),t.vf((2*h.x+r.x)/3,(2*h.y+r.y)/3),t.vf((h.x+2*r.x)/3,(h.y+2*r.y)/3),t.vf(r.x,r.y)):(s=p=!1,null!==r&&u===Ht&&(p=!0),null!==a&&l===Ht&&(s=!0),(p||s)&&(m=t.i(0).x,h=t.i(0).y,d=t.i(3).x,n=t.i(3).y,p&&(c=90===this.J||270===this.J?(p=m,(h+n)/2):(p=(m+d)/2,h),t.K(1,p,c),(u=t.getLinkPoint(i,r,u,!0,!1,o,a)).u()||u.set(i.actualBounds.center),t.K(0,u.x,u.y)),s&&(h=90===this.J||270===this.J?(u=d,(h+n)/2):(u=(m+d)/2,n),t.K(2,u,h),(i=t.getLinkPoint(o,a,l,!1,!1,i,r)).u()||i.set(o.actualBounds.center),t.K(3,i.x,i.y))))),t.xf();else if(d.layer===c.layer)t.xf();else{var g,f,p=s=!1,m=t.firstPickIndex+1;if(t.isOrthogonal?(p=!0,4<(g=t.pointsCount)&&t.points.removeRange(2,g-3)):t.curve===Rl?(s=!0,4<(g=t.pointsCount)&&t.points.removeRange(2,g-3),4===g&&(m=2)):(g=t.pointsCount,x=u===Ht,f=l===Ht,2<g&&x&&f?t.points.removeRange(1,g-2):3<g&&x&&!f?t.points.removeRange(1,g-3):3<g&&!x&&f?t.points.removeRange(2,g-2):4<g&&!x&&!f&&t.points.removeRange(2,g-3)),h.rev){for(;null!==c&&d!==c;){for(var y,v,w,b,S=g=null,x=c.sourceEdges.iterator;x.next()&&((f=x.value).link!==h.link||(g=f.fromVertex,S=f.toVertex,null!==g.node)););g!==d&&(x=t.i(m-1).x,f=t.i(m-1).y,y=g.centerX,v=g.centerY,p?180===this.J||0===this.J?m===t.firstPickIndex+1?(t.m(m++,x,f),t.m(m++,x,v)):(null!==S?S.centerY:f)!==v&&(S=this.Ia[g.layer-1]+this.Sc.x,t.m(m++,S,f),t.m(m++,S,v)):m===t.firstPickIndex+1?(t.m(m++,x,f),t.m(m++,y,f)):(null!==S?S.centerX:x)!==y&&(S=this.Ia[g.layer-1]+this.Sc.y,t.m(m++,x,S),t.m(m++,y,S)):m===t.firstPickIndex+1?(S=Math.max(10,this.Sd[c.layer]),w=Math.max(10,this.ud[c.layer]),s?180===this.J?y<=c.bounds.x?(c=c.bounds.x,t.m(m++,c-S,v),t.m(m++,c,v),t.m(m++,c+w,v)):(t.m(m++,y-S,v),t.m(m++,y,v),t.m(m++,y+w,v)):90===this.J?v>=c.bounds.bottom?(c=c.bounds.y+c.bounds.height,t.m(m++,y,c+w),t.m(m++,y,c),t.m(m++,y,c-S)):(t.m(m++,y,v+w),t.m(m++,y,v),t.m(m++,y,v-S)):270===this.J?v<=c.bounds.y?(c=c.bounds.y,t.m(m++,y,c-S),t.m(m++,y,c),t.m(m++,y,c+w)):(t.m(m++,y,v-S),t.m(m++,y,v),t.m(m++,y,v+w)):0===this.J&&(y>=c.bounds.right?(c=c.bounds.x+c.bounds.width,t.m(m++,c+w,v),t.m(m++,c,v),t.m(m++,c-S,v)):(t.m(m++,y+w,v),t.m(m++,y,v),t.m(m++,y-S,v))):(t.m(m++,x,f),b=0,180===this.J||0===this.J?((180===this.J?y>=c.bounds.right:y<=c.bounds.x)&&(b=(0===this.J?-S:w)/2),t.m(m++,x+b,v)):((270===this.J?v>=c.bounds.bottom:v<=c.bounds.y)&&(b=(90===this.J?-S:w)/2),t.m(m++,y,f+b)),t.m(m++,y,v))):(S=Math.max(10,this.Sd[g.layer]),w=Math.max(10,this.ud[g.layer]),180===this.J?(s&&t.m(m++,y-S,v),t.m(m++,y,v),s&&t.m(m++,y+w,v)):90===this.J?(s&&t.m(m++,y,v+w),t.m(m++,y,v),s&&t.m(m++,y,v-S)):270===this.J?(s&&t.m(m++,y,v-S),t.m(m++,y,v),s&&t.m(m++,y,v+w)):(s&&t.m(m++,y+w,v),t.m(m++,y,v),s&&t.m(m++,y-S,v)))),c=g}null!==a&&u===Ht&&!p||(x=t.i(m-1).x,f=t.i(m-1).y,y=t.i(m).x,v=t.i(m).y,p?(c=this.ud[d.layer],180===this.J||0===this.J?((p=f)>=d.bounds.y&&p<=d.bounds.bottom&&(180===this.J?y>=d.bounds.x:y<=d.bounds.right)&&(c=d.centerX+(180===this.J?-c:c),p=p<d.bounds.y+d.bounds.height/2?d.bounds.y-this.Zb/2:d.bounds.bottom+this.Zb/2,t.m(m++,c,f),t.m(m++,c,p)),t.m(m++,y,p)):((p=x)>=d.bounds.x&&p<=d.bounds.right&&(270===this.J?v>=d.bounds.y:v<=d.bounds.bottom)&&(c=d.centerY+(270===this.J?-c:c),p=p<d.bounds.x+d.bounds.width/2?d.bounds.x-this.Zb/2:d.bounds.right+this.Zb/2,t.m(m++,x,c),t.m(m++,p,c)),t.m(m++,p,v)),t.m(m++,y,v)):s?(S=Math.max(10,this.Sd[d.layer]),w=Math.max(10,this.ud[d.layer]),180===this.J&&y>=d.bounds.x?(c=d.bounds.x+d.bounds.width,t.K(m-2,c,f),t.K(m-1,c+w,f)):90===this.J&&v<=d.bounds.bottom?(c=d.bounds.y,t.K(m-2,x,c),t.K(m-1,x,c-S)):270===this.J&&v>=d.bounds.y?(c=d.bounds.y+d.bounds.height,t.K(m-2,x,c),t.K(m-1,x,c+w)):0===this.J&&y<=d.bounds.right&&(c=d.bounds.x,t.K(m-2,c,f),t.K(m-1,c-S,f))):(S=Math.max(10,this.Sd[d.layer]),w=Math.max(10,this.ud[d.layer]),p=0,180===this.J||0===this.J?((180===this.J?y<=d.bounds.x:y>=d.bounds.right)&&(p=(0===this.J?w:-S)/2),t.m(m++,y+p,f)):((270===this.J?v<=d.bounds.y:v>=d.bounds.bottom)&&(p=(90===this.J?w:-S)/2),t.m(m++,x,v+p)),t.m(m++,y,v)))}else{for(;null!==d&&d!==c;){for(S=g=null,d=d.destinationEdges.iterator;d.next()&&((x=d.value).link!==h.link||(g=x.toVertex,null!==(S=x.fromVertex).node&&(S=null),null!==g.node)););g!==c&&(x=t.i(m-1).x,f=t.i(m-1).y,y=g.centerX,v=g.centerY,p?180===this.J||0===this.J?(null!==S?S.centerY:f)!==v&&(S=this.Ia[g.layer]+this.Sc.x,m===t.firstPickIndex+1&&(S=0===this.J?Math.max(S,x):Math.min(S,x)),t.m(m++,S,f),t.m(m++,S,v)):(null!==S?S.centerX:x)!==y&&(S=this.Ia[g.layer]+this.Sc.y,m===t.firstPickIndex+1&&(S=90===this.J?Math.max(S,f):Math.min(S,f)),t.m(m++,x,S),t.m(m++,y,S)):(S=Math.max(10,this.Sd[g.layer]),w=Math.max(10,this.ud[g.layer]),180===this.J?(t.m(m++,y+w,v),s&&t.m(m++,y,v),t.m(m++,y-S,v)):90===this.J?(t.m(m++,y,v-S),s&&t.m(m++,y,v),t.m(m++,y,v+w)):270===this.J?(t.m(m++,y,v+w),s&&t.m(m++,y,v),t.m(m++,y,v-S)):(t.m(m++,y-S,v),s&&t.m(m++,y,v),t.m(m++,y+w,v)))),d=g}p&&(x=t.i(m-1).x,f=t.i(m-1).y,y=t.i(m).x,v=t.i(m).y,180===this.J||0===this.J?f!==v&&(S=0===this.J?Math.min(Math.max((y+x)/2,this.Ia[c.layer]+this.Sc.x),y):Math.max(Math.min((y+x)/2,this.Ia[c.layer]+this.Sc.x),y),t.m(m++,S,f),t.m(m++,S,v)):x!==y&&(S=90===this.J?Math.min(Math.max((v+f)/2,this.Ia[c.layer]+this.Sc.y),v):Math.max(Math.min((v+f)/2,this.Ia[c.layer]+this.Sc.y),v),t.m(m++,x,S),t.m(m++,y,S)))}null!==n&&s&&(null!==r&&(u===Ht&&(u=t.i(0),n=t.i(2),u.w(n)||t.K(1,(u.x+n.x)/2,(u.y+n.y)/2)),(u=t.getLinkPoint(i,r,Ht,!0,!1,o,a)).u()||u.set(i.actualBounds.center),t.K(0,u.x,u.y)),null!==a&&(l===Ht&&(l=t.i(t.pointsCount-1),u=t.i(t.pointsCount-3),l.w(u)||t.K(t.pointsCount-2,(l.x+u.x)/2,(l.y+u.y)/2)),(i=t.getLinkPoint(o,a,Ht,!1,!1,i,r)).u()||i.set(o.actualBounds.center),t.K(t.pointsCount-1,i.x,i.y))),t.xf(),h.commit()}}this.avoidOrthogonalOverlaps()},Xg.prototype.avoidOrthogonalOverlaps=function(){if(!(this.linkSpacing<=0)){for(var t=new X,e=this.network.edges.iterator;e.next();){var n=e.value.link;null!==n&&n.isOrthogonal&&!t.contains(n)&&t.add(n)}if(0<t.count)if(90===this.J||270===this.J){for(e=0,n=[],t=t.iterator;t.next();){var i=t.value;if(null!==i&&i.isOrthogonal)for(var o=2;o<i.pointsCount-3;o++){var r,a,s=i.i(o),h=i.i(o+1);this.A(s.y,h.y)&&!this.A(s.x,h.x)&&((l=new Tf).layer=Math.floor(s.y/2),d=i.i(0),r=i.i(i.pointsCount-1),l.first=d.x*d.x+d.y,l.Xb=r.x*r.x+r.y,l.ad=Math.min(s.x,h.x),l.uc=Math.max(s.x,h.x),(l.index=o)+2<(l.link=i).pointsCount&&(d=i.i(o-1),r=i.i(o+2),a=0,d.y<s.y?a=r.y<s.y?3:s.x<h.x?2:1:d.y>s.y&&(a=r.y>s.y?0:h.x<s.x?2:1),l.l=a),n.push(l))}}if(1<n.length)for(n.sort(this.Oy),t=0;t<n.length;){for(s=n[t].layer,i=t+1;i<n.length&&n[i].layer===s;)i++;if(1<i-t)for(s=t;s<i;){for(h=n[s].uc,o=t+1;o<i&&n[o].ad<h;)h=Math.max(h,n[o].uc),o++;if(1<(h=o-s)){for(this.tj(n,this.hu,s,s+h),a=1,l=n[s].Xb,d=s;d<o;d++)(r=n[d]).Xb!==l&&(a++,l=r.Xb);this.tj(n,this.Ny,s,s+h);for(var u=1,l=n[s].first,d=s;d<o;d++)(r=n[d]).first!==l&&(u++,l=r.first);for(d=!0,a<(r=u)?(d=!1,r=a,l=n[s].Xb,this.tj(n,this.hu,s,s+h)):l=n[s].first,a=0,u=s;u<o;u++){var c=n[u];(d?c.first:c.Xb)!==l&&(a++,l=d?c.first:c.Xb);var g=c.link,s=g.i(c.index),h=g.i(c.index+1),f=this.linkSpacing*(a-(r-1)/2);e++,g.Th(),g.K(c.index,s.x,s.y+f),g.K(c.index+1,h.x,h.y+f),g.xf()}}s=o}t=i}}else{for(e=0,n=[],t=t.iterator;t.next();)if(null!==(i=t.value)&&i.isOrthogonal)for(o=2;o<i.pointsCount-3;o++)s=i.i(o),h=i.i(o+1),this.A(s.x,h.x)&&!this.A(s.y,h.y)&&((l=new Tf).layer=Math.floor(s.x/2),d=i.i(0),r=i.i(i.pointsCount-1),l.first=d.x+d.y*d.y,l.Xb=r.x+r.y*r.y,l.ad=Math.min(s.y,h.y),l.uc=Math.max(s.y,h.y),(l.index=o)+2<(l.link=i).pointsCount&&(d=i.i(o-1),r=i.i(o+2),a=0,d.x<s.x?a=r.x<s.x?3:s.y<h.y?2:1:d.x>s.x&&(a=r.x>s.x?0:h.y<s.y?2:1),l.l=a),n.push(l));if(1<n.length)for(n.sort(this.Oy),t=0;t<n.length;){for(s=n[t].layer,i=t+1;i<n.length&&n[i].layer===s;)i++;if(1<i-t)for(s=t;s<i;){for(h=n[s].uc,o=t+1;o<i&&n[o].ad<h;)h=Math.max(h,n[o].uc),o++;if(1<(h=o-s)){for(this.tj(n,this.hu,s,s+h),a=1,l=n[s].Xb,d=s;d<o;d++)(r=n[d]).Xb!==l&&(a++,l=r.Xb);for(this.tj(n,this.Ny,s,s+h),u=1,l=n[s].first,d=s;d<o;d++)(r=n[d]).first!==l&&(u++,l=r.first);for(d=!0,a<(r=u)?(d=!1,r=a,l=n[s].Xb,this.tj(n,this.hu,s,s+h)):l=n[s].first,a=0,u=s;u<o;u++)c=n[u],(d?c.first:c.Xb)!==l&&(a++,l=d?c.first:c.Xb),s=(g=c.link).i(c.index),h=g.i(c.index+1),f=this.linkSpacing*(a-(r-1)/2),e++,g.Th(),g.K(c.index,s.x+f,s.y),g.K(c.index+1,h.x+f,h.y),g.xf()}s=o}t=i}}}},(Bp=Xg.prototype).Oy=function(t,e){return t instanceof Tf&&e instanceof Tf&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.ad<e.ad?-1:t.ad>e.ad?1:t.uc<e.uc?-1:t.uc>e.uc?1:0:0},Bp.Ny=function(t,e){return t instanceof Tf&&e instanceof Tf&&t!==e?t.first<e.first?-1:t.first>e.first||t.l<e.l?1:t.l>e.l||t.ad<e.ad?-1:t.ad>e.ad?1:t.uc<e.uc?-1:t.uc>e.uc?1:0:0},Bp.hu=function(t,e){return t instanceof Tf&&e instanceof Tf&&t!==e?t.Xb<e.Xb?-1:t.Xb>e.Xb||t.l<e.l?1:t.l>e.l||t.ad<e.ad?-1:t.ad>e.ad?1:t.uc<e.uc?-1:t.uc>e.uc?1:0:0},Bp.A=function(t,e){return-1<(t-=e)&&t<1},Bp.tj=function(t,e,n,i){var o=t.length,r=i-n;if(!(r<=1))if((n<0||o-1<=n)&&O("not in range 0 <= from < length: "+n),2==r)0<e(i=t[n],o=t[n+1])&&(t[n]=o,t[n+1]=i);else if(0===n)if(o<=i)t.sort(e);else for((n=t.slice(0,i)).sort(e),e=0;e<i;e++)t[e]=n[e];else if(o<=i)for((i=t.slice(n)).sort(e),e=n;e<o;e++)t[e]=i[e-n];else for((o=t.slice(n,i)).sort(e),e=n;e<i;e++)t[e]=o[e-n]},s.Object.defineProperties(Xg.prototype,{layerSpacing:{get:function(){return this.qe},set:function(t){this.qe!==t&&0<=t&&(this.qe=t,this.C())}},columnSpacing:{get:function(){return this.Zb},set:function(t){this.Zb!==t&&0<t&&(this.Zb=t,this.C())}},direction:{get:function(){return this.J},set:function(t){this.J!==t&&(0===t||90===t||180===t||270===t?(this.J=t,this.C()):O("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.cl},set:function(t){this.cl===t||t!==wf&&t!==vf&&t!==bf||(this.cl=t,this.C())}},layeringOption:{get:function(){return this.Gl},set:function(t){this.Gl===t||t!==Sf&&t!==xf&&t!==Pf||(this.Gl=t,this.C())}},initializeOption:{get:function(){return this.vl},set:function(t){this.vl===t||t!==kf&&t!==Lf&&t!==Mf||(this.vl=t,this.C())}},iterations:{get:function(){return this.Oj},set:function(t){this.Oj!==t&&0<=t&&(this.Oj=t,this.C())}},aggressiveOption:{get:function(){return this.Sk},set:function(t){this.Sk===t||t!==_f&&t!==Nf&&t!==Af||(this.Sk=t,this.C())}},packOption:{get:function(){return this.ng},set:function(t){this.ng!==t&&0<=t&&t<8&&(this.ng=t,this.C())}},setsPortSpots:{get:function(){return this.hf},set:function(t){this.hf!==t&&(this.hf=t,this.C())}},linkSpacing:{get:function(){return this.Io},set:function(t){this.Io!==t&&0<=t&&(this.Io=t,this.C())}},maxLayer:{get:function(){return this.ra}},maxIndex:{get:function(){return this.Ii}},maxColumn:{get:function(){return this.Ba}},minIndexLayer:{get:function(){return this.lh}},maxIndexLayer:{get:function(){return this.oc}}});var vf=new j(Xg,"CycleDepthFirst",0),wf=new j(Xg,"CycleGreedy",1),bf=new j(Xg,"CycleFromLayers",2),Sf=new j(Xg,"LayerOptimalLinkLength",0),xf=new j(Xg,"LayerLongestPathSink",1),Pf=new j(Xg,"LayerLongestPathSource",2),kf=new j(Xg,"InitDepthFirstOut",0),Lf=new j(Xg,"InitDepthFirstIn",1),Mf=new j(Xg,"InitNaive",2),_f=new j(Xg,"AggressiveNone",0),Nf=new j(Xg,"AggressiveLess",1),Af=new j(Xg,"AggressiveMore",2);function Tf(){this.index=this.uc=this.ad=this.Xb=this.first=this.layer=0,this.link=null,this.l=0}function Cf(t){Od.call(this,t)}function Df(t){zd.call(this,t),this.Pa=this.Rg=this.Ei=-1,this.I=NaN,this.T=null,this.valid=!1,this.finish=this.Cg=NaN,this.wf=0,this.Hk=this.Ik=null}function Ef(t){Id.call(this,t),this.l=this.Ka=this.cb=!1,this.Ja=this.I=NaN,this.T=this.v=0}function Ff(){Sd.call(this),this.Jb=new $,this.qp=ap,this.fd=sp,this.mq=Pp,this.vs=Tp,this.lx=[],this.ed=!0,this.Eb=_p,this.Hd=new xe(10,10).freeze();var t=new Ep(this);this.U=new Fp(t),this.V=new Fp(t),this.uv=[]}function Of(t,e){var n=999999,i=null;for(e=e.iterator;e.next();){var o=e.value;switch(t.fd){case sp:o.sourceEdges.count<n&&(n=o.sourceEdges.count,i=o);break;case hp:o.destinationEdges.count<n&&(n=o.destinationEdges.count,i=o);break;default:O("Unhandled path value "+t.fd.toString())}}return i}function Bf(t,e){if(null!==e){switch(t.fd){case sp:if(0<e.destinationEdges.count){for(var n=new X,i=e.destinationVertexes;i.next();){var o=i.value;Gf(t,e,o)&&n.add(o)}0<n.count&&(e.children=n.ma())}break;case hp:if(0<e.sourceEdges.count){for(n=new X,i=e.sourceVertexes;i.next();)Gf(t,e,o=i.value)&&n.add(o);0<n.count&&(e.children=n.ma())}break;default:O("Unhandled path value"+t.fd.toString())}for(i=(n=e.children).length,o=0;o<i;o++){var r=n[o];r.initialized=!0,r.level=e.level+1,r.parent=e,t.Jb.remove(r)}for(e=0;e<i;e++)Bf(t,n[e])}}function Gf(t,e,n){if(n.initialized){if(null===e)var i=!1;else{for(i=e.parent;null!==i&&i!==n;)i=i.parent;i=i===n}if(i||n.level>e.level)return;t.removeChild(n.parent,n)}return 1}function jf(t){return t===yp||t===vp||t===wp||t===bp}function zf(t){return t===yp||t===vp}function Rf(t){var e=t.parent;if(null!==e){var n=e.alignment;if(jf(n)){if(zf(n)){for(e=e.children,n=0;n<e.length&&t!==e[n];)n++;return 0==n%2}if(n===wp)return!0}}return!1}function If(t,e){if(0===e.childrenCount){var n=!1,i=0;null!==e.parent&&(i=e.parent.angle,n=jf(n=e.parent.alignment));var o=Rf(e);e.S.h(0,0),e.ua.h(e.width,e.height),null===e.parent||null===e.comments||(180!==i&&270!==i||n)&&!o?e.da.h(0,0):180===i&&!n||(90===i||270===i)&&o?e.da.h(e.width-2*e.focus.x,0):e.da.h(0,e.height-2*e.focus.y)}else{n=90===(i=ip(e))||270===i;for(var r=0,a=(o=e.children).length,s=0;s<a;s++)var h=o[s],r=Math.max(r,n?h.ua.width:h.ua.height);var u=e.alignment,l=u===pp,d=u===mp,s=jf(u),c=Math.max(0,e.breadthLimit),h=op(e),g=e.nodeSpacing,f=rp(e),p=l||d?0:f/2,m=e.rowSpacing,y=0;(l||d||e.Rm||e.Sm&&1===e.maxGenerationCount)&&(y=Math.max(0,e.rowIndent)),l=e.width;var v=e.height,w=0,b=0,S=0,x=0,P=0,k=0,L=0,M=0,_=0;if(s&&!zf(u)&&135<i&&o.reverse(),zf(u))if(1<a)for(var N=0;N<a;N++){var A=o[N],T=A.ua;0==N%2&&N!==a-1&&(_=Math.max(_,(n?T.width:T.height)+qf(A)-g))}else 1===a&&(_=n?o[0].ua.width:o[0].ua.height);if(s)switch(u){case yp:case vp:_=(b=(i<135?Vf:Uf)(e,o,_,w,b)).x,w=b.width,b=b.height;break;case wp:for(t=0;t<a;t++)p=(c=o[t]).ua,S=0===L?0:m,n?(c.S.h(r-p.width,P+S),w=Math.max(w,p.width),b=Math.max(b,P+S+p.height),P+=S+p.height):(c.S.h(x+S,r-p.height),w=Math.max(w,x+S+p.width),b=Math.max(b,p.height),x+=S+p.width),L++;break;case bp:for(r=0;r<a;r++)c=(t=o[r]).ua,p=0===L?0:m,n?(t.S.h(g/2+e.focus.x,P+p),w=Math.max(w,c.width),b=Math.max(b,P+p+c.height),P+=p+c.height):(t.S.h(x+p,g/2+e.focus.y),w=Math.max(w,x+p+c.width),b=Math.max(b,c.height),x+=p+c.width),L++}else for(N=0;N<a;N++){var C,T=(A=o[N]).ua;n?(0<c&&0<L&&x+g+T.width>c&&(x<r&&Wf(e,u,r-x,0,M,N-1),k++,M=N,S=b,x=L=0,P=135<i?-b-m:b+m),C=0===L?p:g,Jf(t,A,0,P),A.S.h(x+C,P),w=Math.max(w,x+C+T.width),b=Math.max(b,S+(0===k?0:m)+T.height),x+=C+T.width):(0<c&&0<L&&P+g+T.height>c&&(P<r&&Wf(e,u,0,r-P,M,N-1),k++,M=N,S=w,P=L=0,x=135<i?-w-m:w+m),C=0===L?p:g,Jf(t,A,x,0),A.S.h(x,P+C),b=Math.max(b,P+C+T.height),w=Math.max(w,S+(0===k?0:m)+T.width),P+=C+T.height),L++}switch(0<k&&(n?(b+=Math.max(0,h),x<w&&Wf(e,u,w-x,0,M,a-1),0<y&&(d||$f(e,y,0,0,a-1),w+=y)):(w+=Math.max(0,h),P<b&&Wf(e,u,0,b-P,M,a-1),0<y&&(d||$f(e,0,y,0,a-1),b+=y))),y=d=0,u){case gp:n?d+=w/2-e.focus.x-f/2:y+=b/2-e.focus.y-f/2;break;case fp:0<k?n?d+=w/2-e.focus.x-f/2:y+=b/2-e.focus.y-f/2:n?d+=(u=o[0].S.x+o[0].da.x)+(o[a-1].S.x+o[a-1].da.x+2*o[a-1].focus.x-u)/2-e.focus.x-f/2:y+=(u=o[0].S.y+o[0].da.y)+(o[a-1].S.y+o[a-1].da.y+2*o[a-1].focus.y-u)/2-e.focus.y-f/2;break;case pp:n?(d-=f,w+=f):(y-=f,b+=f);break;case mp:n?(d+=w-e.width+f,w+=f):(y+=b-e.height+f,b+=f);break;case yp:case vp:n?d+=1<a?_+g/2-e.focus.x:o[0].focus.x-e.focus.x+o[0].da.x:y+=1<a?_+g/2-e.focus.y:o[0].focus.y-e.focus.y+o[0].da.y;break;case wp:n?d+=w+g/2-e.focus.x:y+=b+g/2-e.focus.y;break;case bp:break;default:O("Unhandled alignment value "+u.toString())}for(f=0;f<a;f++)u=o[f],n?u.S.h(u.S.x+u.da.x-d,u.S.y+(135<i?(s?-b:-u.ua.height)+u.da.y-h:v+h+u.da.y)):u.S.h(u.S.x+(135<i?(s?-w:-u.ua.width)+u.da.x-h:l+h+u.da.x),u.S.y+u.da.y-y);n?(w=Yf(e,w,d),d<0&&(d=0),135<i&&(y+=b+h),b=Math.max(Math.max(b,v),b+v+h)):(135<i&&(d+=w+h),w=Math.max(Math.max(w,l),w+l+h),b=Kf(e,b,y),y<0&&(y=0)),e.da.h(d,y),e.ua.h(w,b)}}function Vf(t,e,n,i,o){var r=e.length;if(0===r)return new ne(n,0,i,o);if(1===r)return new ne(n,0,i=(t=e[0]).ua.width,o=t.ua.height);for(var a,s,h,u,l,d,c=t.nodeSpacing,g=t.rowSpacing,f=90===ip(t),p=0,m=0,y=0,v=0;v<r;v++)0!=v%2||1<r&&v===r-1||(s=(a=e[v]).ua,h=0===p?0:g,f?(u=qf(a)-c,a.S.h(n-(s.width+u),y+h),i=Math.max(i,s.width+u),o=Math.max(o,y+h+s.height),y+=h+s.height):(u=qf(a)-c,a.S.h(m+h,n-(s.height+u)),o=Math.max(o,s.height+u),i=Math.max(i,m+h+s.width),m+=h+s.width),p++);for(p=0,a=m,v=y,y=f?(m=n+c,0):(m=0,n+c),s=0;s<r;s++)0!=s%2&&(u=(h=e[s]).ua,l=0===p?0:g,f?(d=qf(h)-c,h.S.h(m+d,y+l),i=Math.max(i,m+u.width+d),o=Math.max(o,y+l+u.height),y+=l+u.height):(d=qf(h)-c,h.S.h(m+l,y+d),i=Math.max(i,m+l+u.width),o=Math.max(o,y+u.height+d),m+=l+u.width),p++);return 1<r&&1==r%2&&(r=(e=e[r-1]).ua,g=null===e.parent?0:e.parent.rowSpacing,f?(e.S.h(n+c/2-e.focus.x-e.da.x,o+g),f=n+c/2-e.focus.x-e.da.x,i=Math.max(i,f+r.width),f<0&&(i-=f),o=Math.max(o,Math.max(v,y)+g+r.height),e.S.x<0&&(n=Hf(t,e.S.x,!1,n,c))):(e.S.h(i+g,n+c/2-e.focus.y-e.da.y),i=Math.max(i,Math.max(a,m)+g+r.width),y=n+c/2-e.focus.y-e.da.y,o=Math.max(o,y+r.height),y<0&&(o-=y),e.S.y<0&&(n=Hf(t,e.S.y,!0,n,c)))),new ne(n,0,i,o)}function Uf(t,e,n,i,o){var r=e.length;if(0===r)return new ne(n,0,i,o);if(1===r)return new ne(n,0,i=(e=e[0]).ua.width,o=e.ua.height);for(var a,s,h,u,l,d,c=t.nodeSpacing,g=t.rowSpacing,f=270===ip(t),p=0,m=0,y=0,v=0;v<r;v++)0!=v%2||1<r&&v===r-1||(s=(a=e[v]).ua,h=0===p?0:g,f?(u=qf(a)-c,y-=h+s.height,a.S.h(n-(s.width+u),y),i=Math.max(i,s.width+u),o=Math.max(o,Math.abs(y))):(u=qf(a)-c,m-=h+s.width,a.S.h(m,n-(s.height+u)),o=Math.max(o,s.height+u),i=Math.max(i,Math.abs(m))),p++);for(p=0,a=m,v=y,y=f?(m=n+c,0):(m=0,n+c),s=0;s<r;s++)0!=s%2&&(u=(h=e[s]).ua,l=0===p?0:g,f?(d=qf(h)-c,y-=l+u.height,h.S.h(m+d,y),i=Math.max(i,m+u.width+d),o=Math.max(o,Math.abs(y))):(d=qf(h)-c,m-=l+u.width,h.S.h(m,y+d),o=Math.max(o,y+u.height+d),i=Math.max(i,Math.abs(m))),p++);for(1<r&&1==r%2&&(p=(g=e[r-1]).ua,s=null===g.parent?0:g.parent.rowSpacing,f?(g.S.h(n+c/2-g.focus.x-g.da.x,-o-p.height-s),m=n+c/2-g.focus.x-g.da.x,i=Math.max(i,m+p.width),m<0&&(i-=m),o=Math.max(o,Math.abs(Math.min(v,y))+s+p.height),g.S.x<0&&(n=Hf(t,g.S.x,!1,n,c))):(g.S.h(-i-p.width-s,n+c/2-g.focus.y-g.da.y),i=Math.max(i,Math.abs(Math.min(a,m))+s+p.width),y=n+c/2-g.focus.y-g.da.y,o=Math.max(o,y+p.height),y<0&&(o-=y),g.S.y<0&&(n=Hf(t,g.S.y,!0,n,c)))),t=0;t<r;t++)c=e[t],f?c.S.h(c.S.x,c.S.y+o):c.S.h(c.S.x+i,c.S.y);return new ne(n,0,i,o)}function qf(t){return null===t.parent?0:t.parent.nodeSpacing}function Hf(t,e,n,i,o){for(var r=(t=t.children).length,a=0;a<r;a++)n?t[a].S.h(t[a].S.x,t[a].S.y-e):t[a].S.h(t[a].S.x-e,t[a].S.y);return e=t[r-1],Math.max(i,n?e.da.y+e.focus.y-o/2:e.da.x+e.focus.x-o/2)}function Yf(t,e,n){switch(t.alignment){case fp:case gp:return n+t.width>e&&(e=n+t.width),n<0&&(e-=n),e;case pp:return t.width>e?t.width:e;case mp:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case yp:case vp:return Math.max(t.width,Math.max(e,n+t.width)-Math.min(0,n));case wp:return t.width-t.focus.x+t.nodeSpacing/2+e;case bp:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function Kf(t,e,n){switch(t.alignment){case fp:case gp:return n+t.height>e&&(e=n+t.height),n<0&&(e-=n),e;case pp:return t.height>e?t.height:e;case mp:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case yp:case vp:return Math.max(t.height,Math.max(e,n+t.height)-Math.min(0,n));case wp:return t.height-t.focus.y+t.nodeSpacing/2+e;case bp:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function Xf(t,e,n){switch(t){case gp:case fp:e/=2,n/=2;break;case pp:n=e=0;break;case mp:break;default:O("Unhandled alignment value "+t.toString())}return new ee(e,n)}function Wf(t,e,n,i,o,r){$f(t,(e=Xf(e,n,i)).x,e.y,o,r)}function $f(t,e,n,i,o){if(0!==e||0!==n)for(t=t.children;i<=o;i++){var r=t[i].S;r.x+=e,r.y+=n}}function Jf(t,e,n,i){var o=e.parent;switch(t.fd){case sp:for(t=e.sourceEdges;t.next();)(e=t.value).fromVertex===o&&e.relativePoint.h(n,i);break;case hp:for(t=e.destinationEdges;t.next();)(e=t.value).toVertex===o&&e.relativePoint.h(n,i);break;default:O("Unhandled path value "+t.fd.toString())}}function Zf(t,e,n){for(var i=0;i<t.length;i++){var o=t[i];o.x+=e,o.y+=n}}function Qf(t,e,n,i,o,r,a,s){var h=90===(p=ip(e))||270===p,u=e.nodeSpacing;e=i;var l=o;i=r;var d=a,c=n.Pq,g=n.cr;a=n.ua;var f=h?Math.max(d,a.height):Math.max(i,a.width);if(null!==c&&p===ip(n)||(c=tp(t,2),g=tp(t,2),h?(c[0].h(0,0),c[1].h(0,a.height),g[0].h(a.width,0),g[1].h(g[0].x,c[1].y)):(c[0].h(0,0),c[1].h(a.width,0),g[0].h(0,a.height),g[1].h(c[1].x,g[0].y))),h){if(d=9999999,!(null===l||l.length<2||null===c||c.length<2))for(o=n=0;n<l.length&&o<c.length;){r=l[n];var p=(y=c[o]).x,h=y.y;p+=i;var m=r;n+1<l.length&&(m=l[n+1]);var y=(v=y).x,v=v.y;o+1<c.length&&(y=(v=c[o+1]).x,v=v.y,y+=i);var w=d;r.y===h?w=p-r.x:r.y>h&&r.y<v?w=p+(r.y-h)/(v-h)*(y-p)-r.x:h>r.y&&h<m.y&&(w=p-(r.x+(h-r.y)/(m.y-r.y)*(m.x-r.x))),w<d&&(d=w),m.y<=r.y?n++:v<=h?o++:(m.y<=v&&n++,v<=m.y&&o++)}if(d=i-d,n=c,o=d+=u,null===e||e.length<2||null===n||n.length<2)i=null;else{for(u=tp(t,e.length+n.length),i=r=p=0;r<n.length&&n[r].y<e[0].y;)h=n[r++],u[i++].h(h.x+o,h.y);for(;p<e.length;)h=e[p++],u[i++].h(h.x,h.y);for(p=e[e.length-1].y;r<n.length&&n[r].y<=p;)r++;for(;r<n.length&&n[r].y>p;)h=n[r++],u[i++].h(h.x+o,h.y);for(n=tp(t,i),p=0;p<i;p++)n[p].assign(u[p]);ep(t,u),i=n}if(r=g,p=d,null===l||l.length<2||null===r||r.length<2)o=null;else{for(u=tp(t,l.length+r.length),o=h=n=0;n<l.length&&l[n].y<r[0].y;)m=l[n++],u[o++].h(m.x,m.y);for(;h<r.length;)m=r[h++],u[o++].h(m.x+p,m.y);for(r=r[r.length-1].y;n<l.length&&l[n].y<=r;)n++;for(;n<l.length&&l[n].y>r;)p=l[n++],u[o++].h(p.x,p.y);for(r=tp(t,o),n=0;n<o;n++)r[n].assign(u[n]);ep(t,u),o=r}return r=Math.max(0,d)+a.width,a=f,ep(t,e),ep(t,c),ep(t,l),ep(t,g),s[0]=i,s[1]=o,new ne(d,0,r,a)}if(i=9999999,!(null===l||l.length<2||null===c||c.length<2))for(o=n=0;n<l.length&&o<c.length;)r=l[n],p=(y=c[o]).x,h=y.y,h+=d,m=r,n+1<l.length&&(m=l[n+1]),y=(v=y).x,v=v.y,o+1<c.length&&(y=(v=c[o+1]).x,v=v.y,v+=d),w=i,r.x===p?w=h-r.y:r.x>p&&r.x<y?w=h+(r.x-p)/(y-p)*(v-h)-r.y:p>r.x&&p<m.x&&(w=h-(r.y+(p-r.x)/(m.x-r.x)*(m.y-r.y))),w<i&&(i=w),m.x<=r.x?n++:y<=p?o++:(m.x<=y&&n++,y<=m.x&&o++);if(d-=i,n=c,o=d+=u,null===e||e.length<2||null===n||n.length<2)i=null;else{for(u=tp(t,e.length+n.length),i=r=p=0;r<n.length&&n[r].x<e[0].x;)h=n[r++],u[i++].h(h.x,h.y+o);for(;p<e.length;)h=e[p++],u[i++].h(h.x,h.y);for(p=e[e.length-1].x;r<n.length&&n[r].x<=p;)r++;for(;r<n.length&&n[r].x>p;)h=n[r++],u[i++].h(h.x,h.y+o);for(n=tp(t,i),p=0;p<i;p++)n[p].assign(u[p]);ep(t,u),i=n}if(r=g,p=d,null===l||l.length<2||null===r||r.length<2)o=null;else{for(u=tp(t,l.length+r.length),o=h=n=0;n<l.length&&l[n].x<r[0].x;)m=l[n++],u[o++].h(m.x,m.y);for(;h<r.length;)m=r[h++],u[o++].h(m.x,m.y+p);for(r=r[r.length-1].x;n<l.length&&l[n].x<=r;)n++;for(;n<l.length&&l[n].x>r;)p=l[n++],u[o++].h(p.x,p.y);for(r=tp(t,o),n=0;n<o;n++)r[n].assign(u[n]);ep(t,u),o=r}return r=f,a=Math.max(0,d)+a.height,ep(t,e),ep(t,c),ep(t,l),ep(t,g),s[0]=i,s[1]=o,new ne(d,0,r,a)}function tp(t,e){if(void 0!==(t=t.uv[e])&&void 0!==(t=t.pop()))return t;t=[];for(var n=0;n<e;n++)t[n]=new ee;return t}function ep(t,e){var n=e.length,i=t.uv[n];void 0===i&&(i=[],t.uv[n]=i),i.push(e)}function np(t,e,n,i){if(null!==e){e.x=n,e.y=i;for(var o=(e=e.children).length,r=0;r<o;r++){var a=e[r];np(t,a,n+a.S.x,i+a.S.y)}}}function ip(t){return(t=t.angle)<=45?0:t<=135?90:t<=225?180:t<=315?270:0}function op(t){var e,n=90===(n=ip(t))||270===n,i=t.layerSpacing;return 0<t.layerSpacingParentOverlap&&(e=Math.min(1,t.layerSpacingParentOverlap),i-=n?t.height*e:t.width*e),i<(n?-t.height:-t.width)&&(i=n?-t.height:-t.width),i}function rp(t){var e,n=ip(t),i=t.nodeIndent;return 0<t.nodeIndentPastParent&&(e=Math.min(1,t.nodeIndentPastParent),i+=90===n||270===n?t.width*e:t.height*e),Math.max(0,i)}Xg.className="LayeredDigraphLayout",Xg.CycleDepthFirst=vf,Xg.CycleGreedy=wf,Xg.CycleFromLayers=bf,Xg.LayerOptimalLinkLength=Sf,Xg.LayerLongestPathSink=xf,Xg.LayerLongestPathSource=Pf,Xg.InitDepthFirstOut=kf,Xg.InitDepthFirstIn=Lf,Xg.InitNaive=Mf,Xg.AggressiveNone=_f,Xg.AggressiveLess=Nf,Xg.AggressiveMore=Af,Xg.PackNone=0,Xg.PackExpand=1,Xg.PackStraighten=2,Xg.PackMedian=4,Xg.PackAll=7,Tf.className="SegInfo",n(Cf,Od),Cf.prototype.createVertex=function(){return new Df(this)},Cf.prototype.createEdge=function(){return new Ef(this)},Cf.className="LayeredDigraphNetwork",n(Df,zd),Df.prototype.serializeVertexProperties=function(t,e){zd.prototype.serializeVertexProperties.call(this,t,e),t.layer=this.layer,t.column=this.column,t.index=this.index,t.component=this.component,t.near=this.near?Q(this.near):null,t.valid=this.valid,t.Cg=this.Cg,t.finish=this.finish,t.wf=this.wf,t.Ik=this.Ik,t.Hk=this.Hk},Df.prototype.Aq=function(t,e,n,i){zd.prototype.Aq.call(this,t,e,n,i),this.layer=t.layer,this.column=t.column,this.index=t.index,this.component=t.component,(e=e.get(t.near))&&(this.near=e),this.valid=t.valid,this.Cg=t.Cg,this.finish=t.finish,this.wf=t.wf,this.Ik=t.Ik,this.Hk=t.Hk},s.Object.defineProperties(Df.prototype,{layer:{get:function(){return this.Ei},set:function(t){this.Ei!==t&&(this.Ei=t)}},column:{get:function(){return this.Rg},set:function(t){this.Rg!==t&&(this.Rg=t)}},index:{get:function(){return this.Pa},set:function(t){this.Pa!==t&&(this.Pa=t)}},component:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}},near:{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t)}}}),Df.className="LayeredDigraphVertex",n(Ef,Id),Ef.prototype.serializeEdgeProperties=function(t,e){Id.prototype.serializeEdgeProperties.call(this,t,e),t.valid=this.valid,t.rev=this.rev,t.forest=this.forest,t.portFromPos=this.portFromPos,t.portToPos=this.portToPos,t.portFromColOffset=this.portFromColOffset,t.portToColOffset=this.portToColOffset},Ef.prototype.deserializeEdgeProperties=function(t,e,n,i){Id.prototype.deserializeEdgeProperties.call(this,t,e,n,i),this.valid=t.valid,this.rev=t.rev,this.forest=t.forest,this.portFromPos=t.portFromPos,this.portToPos=t.portToPos,this.portFromColOffset=t.portFromColOffset,this.portToColOffset=t.portToColOffset},s.Object.defineProperties(Ef.prototype,{valid:{get:function(){return this.cb},set:function(t){this.cb!==t&&(this.cb=t)}},rev:{get:function(){return this.Ka},set:function(t){this.Ka!==t&&(this.Ka=t)}},forest:{get:function(){return this.l},set:function(t){this.l!==t&&(this.l=t)}},portFromPos:{get:function(){return this.I},set:function(t){this.I!==t&&(this.I=t)}},portToPos:{get:function(){return this.Ja},set:function(t){this.Ja!==t&&(this.Ja=t)}},portFromColOffset:{get:function(){return this.v},set:function(t){this.v!==t&&(this.v=t)}},portToColOffset:{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t)}}}),Ef.className="LayeredDigraphEdge",n(Ff,Sd),Ff.prototype.cloneProtected=function(t){Sd.prototype.cloneProtected.call(this,t),t.qp=this.qp,t.mq=this.mq,t.vs=this.vs,t.ed=this.ed,t.Eb=this.Eb,t.Hd.assign(this.Hd),t.U.copyInheritedPropertiesFrom(this.U),t.V.copyInheritedPropertiesFrom(this.V)},Ff.prototype.hb=function(t){t.classType===Ff?0===t.name.indexOf("Alignment")?this.alignment=t:0===t.name.indexOf("Arrangement")?this.arrangement=t:0===t.name.indexOf("Compaction")?this.compaction=t:0===t.name.indexOf("Path")?this.path=t:0===t.name.indexOf("Sorting")?this.sorting=t:0===t.name.indexOf("Style")?this.treeStyle=t:O("Unknown enum value: "+t):Sd.prototype.hb.call(this,t)},Ff.prototype.createNetwork=function(){return new Ep(this)},Ff.prototype.makeNetwork=function(t){function e(t){if(t instanceof el)return!t.isLinkLabel&&"Comment"!==t.category;if(t instanceof wl){var e=t.fromNode;return null===e||e.isLinkLabel||"Comment"===e.category?!1:null!==(t=t.toNode)&&!t.isLinkLabel&&"Comment"!==t.category}return!1}var n=this.createNetwork();return t instanceof Mo?(n.Ag(t.nodes,!0,e),n.Ag(t.links,!0,e)):t instanceof pl?n.Ag(t.memberParts,!1,e):n.Ag(t.iterator,!1,e),n},Ff.prototype.doLayout=function(t){null===this.network&&(this.network=this.makeNetwork(t)),this.arrangement!==Ap&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(null===e&&t instanceof Mo&&(e=t),this.path===ap&&null!==e?this.fd=e.isTreePathToChildren?sp:hp:this.fd=this.path===ap?sp:this.path,0<this.network.vertexes.count){for(this.network.zq(),t=this.network.vertexes.iterator;t.next();)(e=t.value).initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Jb.count){for(t=new $,e=this.Jb.iterator;e.next();){var n=e.value;n instanceof el?null!==(n=this.network.kj(n))&&t.add(n):n instanceof Fp&&t.add(n)}this.Jb=t}for(0===this.Jb.count&&this.findRoots(),t=this.Jb.copy().iterator;t.next();)(e=t.value).initialized||(e.initialized=!0,Bf(this,e));for(e=this.network.vertexes,t=null;0<(t=function(t){var e=new $;for(t=t.iterator;t.next();){var n=t.value;n.initialized||e.add(n)}return e}(e)).count;)null!==(e=Of(this,t))&&this.Jb.add(e),e.initialized=!0,Bf(this,e),e=t;for(t=this.Jb.iterator;t.next();)(e=t.value)instanceof Fp&&function t(e,n){if(null!==n){e.initializeTreeVertexValues(n),n.alignment===vp&&e.sortTreeVertexChildren(n);for(var i=0,o=n.childrenCount,r=0,a=n.children,s=a.length,h=0;h<s;h++){var u=a[h];t(e,u),i+=u.descendantCount+1,o=Math.max(o,u.maxChildrenCount),r=Math.max(r,u.maxGenerationCount)}n.descendantCount=i,n.maxChildrenCount=o,n.maxGenerationCount=0<o?r+1:0}}(this,e);for(t=this.Jb.iterator;t.next();)(e=t.value)instanceof Fp&&function t(e,n){if(null!==n){e.assignTreeVertexValues(n);for(var i=(n=n.children).length,o=0;o<i;o++)t(e,n[o])}}(this,e);for(t=this.Jb.iterator;t.next();)(e=t.value)instanceof Fp&&function t(e,n){if(null!==n){n.alignment!==vp&&e.sortTreeVertexChildren(n);for(var i=(n=n.children).length,o=0;o<i;o++)t(e,n[o])}}(this,e);if(this.Fv(),this.layerStyle===Dp){for(t=[],e=this.network.vertexes.iterator;e.next();){var i=(n=e.value).parent;null===i&&(i=n),i=0===i.angle||180===i.angle;var o=t[n.level];void 0===o&&(o=0),t[n.level]=Math.max(o,i?n.width:n.height)}for(e=0;e<t.length;e++)void 0===t[e]&&(t[e]=0);for(this.lx=t,e=this.network.vertexes.iterator;e.next();)null===(i=(n=e.value).parent)&&(i=n),0===i.angle||180===i.angle?(180===i.angle&&(n.focusX+=t[n.level]-n.width),n.width=t[n.level]):(270===i.angle&&(n.focusY+=t[n.level]-n.height),n.height=t[n.level])}else if(this.layerStyle===Cp)for(t=this.network.vertexes.iterator;t.next();){for(n=0===(e=t.value).angle||180===e.angle,i=-1,o=0;o<e.children.length;o++)var r=e.children[o],i=Math.max(i,n?r.width:r.height);if(0<=i)for(o=0;o<e.children.length;o++)r=e.children[o],n?(180===e.angle&&(r.focusX+=i-r.width),r.width=i):(270===e.angle&&(r.focusY+=i-r.height),r.height=i)}for(t=this.Jb.iterator;t.next();)(e=t.value)instanceof Fp&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Jb=new $,this.isValidLayout=!0},Ff.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var n=e.value;switch(this.fd){case sp:0===n.sourceEdges.count&&this.Jb.add(n);break;case hp:0===n.destinationEdges.count&&this.Jb.add(n);break;default:O("Unhandled path value "+this.fd.toString())}}0!==this.Jb.count||null!==(t=Of(this,t))&&this.Jb.add(t)},Ff.prototype.removeChild=function(t,e){if(null!==t&&null!==e){for(var n=t.children,i=0,o=0;o<n.length;o++)n[o]===e&&i++;if(0<i){i=Array(n.length-i);for(var r=o=0;r<n.length;r++)n[r]!==e&&(i[o++]=n[r]);t.children=i}}},Ff.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(function(t,e){switch(t.mq){default:case Pp:return null!==e.parent?e.parent:t.U;case Mp:return null===e.parent?t.U:null===e.parent.parent?t.V:e.parent;case Lp:return null!==e.parent?null!==e.parent.parent?e.parent.parent:t.V:t.U;case kp:var n=!0;if(0===e.childrenCount)n=!1;else for(var i=e.children,o=i.length,r=0;r<o;r++)if(0<i[r].childrenCount){n=!1;break}return n&&null!==e.parent?t.V:null!==e.parent?e.parent:t.U}}(this,t)),null!==t.parent&&t.parent.alignment===vp){for(var e=t.angle,n=t.parent.children,i=0;i<n.length&&t!==n[i];)i++;0==i%2?i!==n.length-1&&(e=90===e||180!==e&&270===e?180:270):e=90===e||180!==e&&270===e?0:90,t.angle=e}t.initialized=!0},Ff.prototype.assignTreeVertexValues=function(){},Ff.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case up:break;case lp:t.children.reverse();break;case dp:t.children.sort(t.comparer);break;case cp:t.children.sort(t.comparer),t.children.reverse();break;default:O("Unhandled sorting value "+t.sorting.toString())}},Ff.prototype.Fv=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},Ff.prototype.addComments=function(t){var e=t.angle,n=t.parent,i=0,o=!1;null!==n&&(i=n.angle,o=jf(o=n.alignment)),e=90===e||270===e,i=90===i||270===i,n=0===t.childrenCount;var r=0,a=0,s=0,h=t.commentSpacing;if(null!==t.node)for(var u=t.node.Rv();u.next();){var l=u.value;"Comment"===l.category&&l.canLayout()&&(null===t.comments&&(t.comments=[]),t.comments.push(l),l.Ta(),l=l.measuredBounds,e&&!n||!o&&!i&&n||o&&i&&n?(r=Math.max(r,l.width),a+=l.height+Math.abs(s)):(r+=l.width+Math.abs(s),a=Math.max(a,l.height)),s=h)}null!==t.comments&&(e&&!n||!o&&!i&&n||o&&i&&n?(r+=Math.abs(t.commentMargin),a=Math.max(0,a-t.height)):(a+=Math.abs(t.commentMargin),r=Math.max(0,r-t.width)),o=ne.allocAt(0,0,t.bounds.width+r,t.bounds.height+a),t.bounds=o,ne.free(o))},Ff.prototype.layoutComments=function(t){if(null!==t.comments){var e=t.node.measuredBounds,n=t.parent,i=t.angle,o=0,r=!1;null!==n&&(o=n.angle,r=jf(r=n.alignment)),i=90===i||270===i,n=90===o||270===o;for(var a=0===t.childrenCount,s=Rf(t),h=0,u=t.comments,l=u.length,d=ee.alloc(),c=0;c<l;c++){var g=u[c],f=g.measuredBounds;if(i&&!a||!r&&!n&&a||r&&n&&a){if(135<o&&!r||n&&s)if(0<=t.commentMargin)for(d.h(t.bounds.x-t.commentMargin-f.width,t.bounds.y+h),g.move(d),g=g.Bd();g.next();){var p=g.value;p.fromSpot=Ne,p.toSpot=Ae}else for(d.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+h),g.move(d),g=g.Bd();g.next();)(p=g.value).fromSpot=Ae,p.toSpot=Ne;else if(0<=t.commentMargin)for(d.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+h),g.move(d),g=g.Bd();g.next();)(p=g.value).fromSpot=Ae,p.toSpot=Ne;else for(d.h(t.bounds.x+t.commentMargin-f.width,t.bounds.y+h),g.move(d),g=g.Bd();g.next();)(p=g.value).fromSpot=Ne,p.toSpot=Ae;h=0<=t.commentSpacing?h+(f.height+t.commentSpacing):h+(t.commentSpacing-f.height)}else{if(135<o&&!r||!n&&s)if(0<=t.commentMargin)for(d.h(t.bounds.x+h,t.bounds.y-t.commentMargin-f.height),g.move(d),g=g.Bd();g.next();)(p=g.value).fromSpot=_e,p.toSpot=Te;else for(d.h(t.bounds.x+h,t.bounds.y+2*t.focus.y-t.commentMargin),g.move(d),g=g.Bd();g.next();)(p=g.value).fromSpot=Te,p.toSpot=_e;else if(0<=t.commentMargin)for(d.h(t.bounds.x+h,t.bounds.y+2*t.focus.y+t.commentMargin),g.move(d),g=g.Bd();g.next();)(p=g.value).fromSpot=Te,p.toSpot=_e;else for(d.h(t.bounds.x+h,t.bounds.y+t.commentMargin-f.height),g.move(d),g=g.Bd();g.next();)(p=g.value).fromSpot=_e,p.toSpot=Te;h=0<=t.commentSpacing?h+(f.width+t.commentSpacing):h+(t.commentSpacing-f.width)}}if(ee.free(d),e=h-t.commentSpacing-(i?e.height:e.width),this.fd===sp)for(t=t.destinationEdges;t.next();)null===(o=t.value.link)||o.isAvoiding||(o.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)null===(o=t.value.link)||o.isAvoiding||(o.toEndSegmentLength=0<e?e:NaN)}},Ff.prototype.layoutTree=function(t){if(null!==t){for(var e=(o=t.children).length,n=0;n<e;n++)this.layoutTree(o[n]);switch(t.compaction){case Sp:If(this,t);break;case xp:if(t.alignment===vp)If(this,t);else if(0===t.childrenCount)e=!1,o=0,null!==(n=t.parent)&&(o=n.angle,e=jf(e=n.alignment)),n=Rf(t),t.S.h(0,0),t.ua.h(t.width,t.height),null===t.parent||null===t.comments||(180!==o&&270!==o||e)&&!n?t.da.h(0,0):180===o&&!e||(90===o||270===o)&&n?t.da.h(t.width-2*t.focus.x,0):t.da.h(0,t.height-2*t.focus.y),t.Pq=null,t.cr=null;else{for(var i=ip(t),o=90===i||270===i,r=0,a=t.children,s=a.length,e=0;e<s;e++)n=a[e],r=Math.max(r,o?n.ua.width:n.ua.height);var h=t.alignment,u=h===mp,l=jf(h),d=Math.max(0,t.breadthLimit);e=op(t);var c=t.nodeSpacing,g=rp(t),f=t.rowSpacing,p=0;(h===pp||u||t.Rm||t.Sm&&1===t.maxGenerationCount)&&(p=Math.max(0,t.rowIndent)),n=t.width;var m=t.height,y=0,v=0,w=0,b=null,S=null,x=0,P=0,k=0,L=0,M=0,_=0,N=0,A=0;if(l&&!zf(h)&&135<i&&a.reverse(),zf(h))if(1<s)for(var T=0;T<s;T++)0==T%2&&T!==s-1&&(A=Math.max(A,o?a[T].ua.width:a[T].ua.height));else 1===s&&(A=o?a[0].ua.width:a[0].ua.height);if(l){switch(h){case yp:A=(v=(i<135?Vf:Uf)(t,a,A,y,v)).x,y=v.width,v=v.height;break;case wp:for(b=0;b<s;b++)d=(S=a[b]).ua,w=0===_?0:f,o?(S.S.h(r-d.width,L+w),y=Math.max(y,d.width),v=Math.max(v,L+w+d.height),L+=w+d.height):(S.S.h(k+w,r-d.height),y=Math.max(y,k+w+d.width),v=Math.max(v,d.height),k+=w+d.width),_++;break;case bp:for(b=0;b<s;b++)r=(S=a[b]).ua,d=0===_?0:f,o?(S.S.h(c/2+t.focus.x,L+d),y=Math.max(y,r.width),v=Math.max(v,L+d+r.height),L+=d+r.height):(S.S.h(k+d,c/2+t.focus.y),y=Math.max(y,k+d+r.width),v=Math.max(v,r.height),k+=d+r.width),_++}b=tp(this,2),S=tp(this,2),o?(b[0].h(0,0),b[1].h(0,v),S[0].h(y,0)):(b[0].h(0,0),b[1].h(y,0),S[0].h(0,v)),S[1].h(y,v)}else for(T=0;T<s;T++){var C,D,E=a[T],F=E.ua;o?(0<d&&0<_&&k+c+F.width>d&&(k<r&&Wf(t,h,r-k,0,N,T-1),M++,N=T,w=v,k=_=0,L=135<i?-v-f:v+f),Jf(this,E,0,L),(D=0)===_?(b=E.Pq,S=E.cr,x=F.width,P=F.height,null!==b&&null!==S&&i===ip(E)||(b=tp(this,2),S=tp(this,2),b[0].h(0,0),b[1].h(0,P),S[0].h(x,0),S[1].h(x,P))):(D=(P=Qf(this,t,E,b,S,x,P,C=be())).x,b=C[0],S=C[1],x=P.width,P=P.height,Se(C),k<F.width&&D<0&&($f(t,-D,0,N,T-1),Zf(b,-D,0),Zf(S,-D,0),D=0)),E.S.h(D,L),y=Math.max(y,x),v=Math.max(v,w+(0===M?0:f)+F.height),k=x):(0<d&&0<_&&L+c+F.height>d&&(L<r&&Wf(t,h,0,r-L,N,T-1),M++,N=T,w=y,L=_=0,k=135<i?-y-f:y+f),Jf(this,E,k,0),(D=0)===_?(b=E.Pq,S=E.cr,x=F.width,P=F.height,null!==b&&null!==S&&i===ip(E)||(b=tp(this,2),S=tp(this,2),b[0].h(0,0),b[1].h(x,0),S[0].h(0,P),S[1].h(x,P))):(D=(P=Qf(this,t,E,b,S,x,P,C=be())).x,b=C[0],S=C[1],x=P.width,P=P.height,Se(C),L<F.height&&D<0&&($f(t,0,-D,N,T-1),Zf(b,0,-D),Zf(S,0,-D),D=0)),E.S.h(k,D),v=Math.max(v,P),y=Math.max(y,w+(0===M?0:f)+F.width),L=P),_++}switch(0<M&&(o?(v+=Math.max(0,e),k<y&&Wf(t,h,y-k,0,N,s-1),0<p&&(u||$f(t,p,0,0,s-1),y+=p)):(y+=Math.max(0,e),L<v&&Wf(t,h,0,v-L,N,s-1),0<p&&(u||$f(t,0,p,0,s-1),v+=p))),p=u=0,h){case gp:o?u+=y/2-t.focus.x-g/2:p+=v/2-t.focus.y-g/2;break;case fp:0<M?o?u+=y/2-t.focus.x-g/2:p+=v/2-t.focus.y-g/2:o?u+=(A=a[0].S.x+a[0].da.x)+(a[s-1].S.x+a[s-1].da.x+2*a[s-1].focus.x-A)/2-t.focus.x-g/2:p+=(A=a[0].S.y+a[0].da.y)+(a[s-1].S.y+a[s-1].da.y+2*a[s-1].focus.y-A)/2-t.focus.y-g/2;break;case pp:o?(u-=g,y+=g):(p-=g,v+=g);break;case mp:o?(u+=y-t.width+g,y+=g):(p+=v-t.height+g,v+=g);break;case yp:o?u+=1<s?A+c/2-t.focus.x:a[0].focus.x-t.focus.x+a[0].da.x:p+=1<s?A+c/2-t.focus.y:a[0].focus.y-t.focus.y+a[0].da.y;break;case wp:o?u+=y+c/2-t.focus.x:p+=v+c/2-t.focus.y;break;case bp:break;default:O("Unhandled alignment value "+h.toString())}for(g=0;g<s;g++)A=a[g],o?A.S.h(A.S.x+A.da.x-u,A.S.y+(135<i?(l?-v:-A.ua.height)+A.da.y-e:m+e+A.da.y)):A.S.h(A.S.x+(135<i?(l?-y:-A.ua.width)+A.da.x-e:n+e+A.da.x),A.S.y+A.da.y-p);if(s=a=0,l?o?(y=Yf(t,y,u),u<0&&(u=0),135<i&&(p+=v+e),v+=m+e,h===bp&&(a+=c/2+t.focus.x),s+=m+e):(135<i&&(u+=y+e),y+=n+e,v=Kf(t,v,p),p<0&&(p=0),h===bp&&(s+=c/2+t.focus.y),a+=n+e):o?(null===t.comments?y<n&&(a=(y=Xf(h,n-y,0)).x,s=y.y,y=n,u=0):y=Yf(t,y,u),u<0&&(a-=u,u=0),135<i&&(p+=v+e),v=Math.max(Math.max(v,m),v+m+e),s+=m+e):(135<i&&(u+=y+e),y=Math.max(Math.max(y,n),y+n+e),null===t.comments?v<m&&(a=(v=Xf(h,0,m-v)).x,s=v.y,v=m,p=0):v=Kf(t,v,p),p<0&&(s-=p,p=0),a+=n+e),0<M)i=tp(this,4),M=tp(this,4),o?(i[2].h(0,m+e),i[3].h(i[2].x,v),M[2].h(y,i[2].y),M[3].h(M[2].x,i[3].y)):(i[2].h(n+e,0),i[3].h(y,i[2].y),M[2].h(i[2].x,v),M[3].h(i[3].x,M[2].y));else{for(i=tp(this,b.length+2),M=tp(this,S.length+2),h=0;h<b.length;h++)l=b[h],i[h+2].h(l.x+a,l.y+s);for(h=0;h<S.length;h++)l=S[h],M[h+2].h(l.x+a,l.y+s)}o?(i[0].h(u,0),i[1].h(i[0].x,m),i[2].y<i[1].y&&(i[2].x>i[0].x?i[2].assign(i[1]):i[1].assign(i[2])),i[3].y<i[2].y&&(i[3].x>i[0].x?i[3].assign(i[2]):i[2].assign(i[3])),M[0].h(u+n,0),M[1].h(M[0].x,m),M[2].y<M[1].y&&(M[2].x<M[0].x?M[2].assign(M[1]):M[1].assign(M[2])),M[3].y<M[2].y&&(M[3].x<M[0].x?M[3].assign(M[2]):M[2].assign(M[3])),i[2].y-=e/2,M[2].y-=e/2):(i[0].h(0,p),i[1].h(n,i[0].y),i[2].x<i[1].x&&(i[2].y>i[0].y?i[2].assign(i[1]):i[1].assign(i[2])),i[3].x<i[2].x&&(i[3].y>i[0].y?i[3].assign(i[2]):i[2].assign(i[3])),M[0].h(0,p+m),M[1].h(n,M[0].y),M[2].x<M[1].x&&(M[2].y<M[0].y?M[2].assign(M[1]):M[1].assign(M[2])),M[3].x<M[2].x&&(M[3].y<M[0].y?M[3].assign(M[2]):M[2].assign(M[3])),i[2].x-=e/2,M[2].x-=e/2),ep(this,b),ep(this,S),t.Pq=i,t.cr=M,t.da.h(u,p),t.ua.h(y,v)}break;default:O("Unhandled compaction value "+t.compaction.toString())}}},Ff.prototype.arrangeTrees=function(){if(this.Eb===Ap)for(var t=this.Jb.iterator;t.next();){var e,n,i=t.value;i instanceof Fp&&(null!==(e=i.node)&&(e=(n=e.position).x,n=n.y,isFinite(e)||(e=0),isFinite(n)||(n=0),np(this,i,e,n)))}else{for(t=[],i=this.Jb.iterator;i.next();)(e=i.value)instanceof Fp&&t.push(e);switch(this.sorting){case up:break;case lp:t.reverse();break;case dp:t.sort(this.comparer);break;case cp:t.sort(this.comparer),t.reverse();break;default:O("Unhandled sorting value "+this.sorting.toString())}for(i=(e=this.arrangementOrigin).x,e=e.y,n=0;n<t.length;n++){var o=t[n];switch(np(this,o,i+o.da.x,e+o.da.y),this.Eb){case _p:e+=o.ua.height+this.Hd.height;break;case Np:i+=o.ua.width+this.Hd.width;break;default:O("Unhandled arrangement value "+this.Eb.toString())}}}},Ff.prototype.commitLayout=function(){this.Cw(),this.commitNodes(),this.Hv(),this.isRouting&&this.commitLinks()},Ff.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},Ff.prototype.Hv=function(){if(this.layerStyle===Dp){for(var t=this.lx,e=[],n=null,i=this.network.vertexes.iterator;i.next();){var o=i.value;null===n?n=o.bounds.copy():n.Oc(o.bounds);var r=void 0===(r=e[o.level])?op(o):Math.max(r,op(o));e[o.level]=r}for(i=0;i<e.length;i++)void 0===e[i]&&(e[i]=0);if(i=90===this.angle||270===this.angle?(n.Ic(this.nodeSpacing/2,this.layerSpacing),new ee(-this.nodeSpacing/2,-this.layerSpacing/2)):(n.Ic(this.layerSpacing,this.nodeSpacing/2),new ee(-this.layerSpacing/2,-this.nodeSpacing/2)),o=[],n=90===this.angle||270===this.angle?n.width:n.height,r=0,180===this.angle||270===this.angle)for(var a=0;a<t.length;a++)r+=t[a]+e[a];for(a=0;a<t.length;a++){var s=t[a]+e[a];270===this.angle?(r-=s,o.push(new ne(0,r,n,s))):90===this.angle?(o.push(new ne(0,r,n,s)),r+=s):180===this.angle?(r-=s,o.push(new ne(r,0,s,n))):(o.push(new ne(r,0,s,n)),r+=s)}this.commitLayers(o,i)}},Ff.prototype.commitLayers=function(){},Ff.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Ff.prototype.Cw=function(){for(var t=this.Jb.iterator;t.next();){var e=t.value;e instanceof Fp&&function t(e,n){if(null!==n){e.setPortSpots(n);for(var i=(n=n.children).length,o=0;o<i;o++)t(e,n[o])}}(this,e)}},Ff.prototype.setPortSpots=function(t){var e=t.alignment;if(jf(e)){var n=this.fd===sp,i=ip(t);switch(i){case 0:var o=Ae;break;case 90:o=Te;break;case 180:o=Ne;break;default:o=_e}var r=t.children,a=r.length;switch(e){case yp:case vp:for(e=0;e<a;e++){var s=r[e];if(null!==(s=(n?s.sourceEdges:s.destinationEdges).first())&&null!==(s=s.link)){var h=90===i||270===i?Ne:_e;if(1===a||e===a-1&&1==a%2)switch(i){case 0:h=Ne;break;case 90:h=_e;break;case 180:h=Ae;break;default:h=Te}else 0==e%2&&(h=90===i||270===i?Ae:Te);n?(t.setsPortSpot&&(s.fromSpot=o),t.setsChildPortSpot&&(s.toSpot=h)):(t.setsPortSpot&&(s.fromSpot=h),t.setsChildPortSpot&&(s.toSpot=o))}}break;case wp:for(i=90===i||270===i?Ae:Te,r=n?t.destinationEdges:t.sourceEdges;r.next();)null!==(a=r.value.link)&&(n?(t.setsPortSpot&&(a.fromSpot=o),t.setsChildPortSpot&&(a.toSpot=i)):(t.setsPortSpot&&(a.fromSpot=i),t.setsChildPortSpot&&(a.toSpot=o)));break;case bp:for(i=90===i||270===i?Ne:_e,r=n?t.destinationEdges:t.sourceEdges;r.next();)null!==(a=r.value.link)&&(n?(t.setsPortSpot&&(a.fromSpot=o),t.setsChildPortSpot&&(a.toSpot=i)):(t.setsPortSpot&&(a.fromSpot=i),t.setsChildPortSpot&&(a.toSpot=o)))}}else if(n=ip(t),this.fd===sp){for(o=t.destinationEdges;o.next();)if(null!==(i=o.value.link)){if(t.setsPortSpot)if(t.portSpot.Mb())switch(n){case 0:i.fromSpot=Ae;break;case 90:i.fromSpot=Te;break;case 180:i.fromSpot=Ne;break;default:i.fromSpot=_e}else i.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Mb())switch(n){case 0:i.toSpot=Ne;break;case 90:i.toSpot=_e;break;case 180:i.toSpot=Ae;break;default:i.toSpot=Te}else i.toSpot=t.childPortSpot}}else for(o=t.sourceEdges;o.next();)if(null!==(i=o.value.link)){if(t.setsPortSpot)if(t.portSpot.Mb())switch(n){case 0:i.toSpot=Ae;break;case 90:i.toSpot=Te;break;case 180:i.toSpot=Ne;break;default:i.toSpot=_e}else i.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Mb())switch(n){case 0:i.fromSpot=Ne;break;case 90:i.fromSpot=_e;break;case 180:i.fromSpot=Ae;break;default:i.fromSpot=Te}else i.fromSpot=t.childPortSpot}},s.Object.defineProperties(Ff.prototype,{roots:{get:function(){return this.Jb},set:function(t){this.Jb!==t&&(this.Jb=t,this.C())}},path:{get:function(){return this.qp},set:function(t){this.qp!==t&&(this.qp=t,this.C())}},treeStyle:{get:function(){return this.mq},set:function(t){this.Eb===t||t!==Pp&&t!==Lp&&t!==kp&&t!==Mp||(this.mq=t,this.C())}},layerStyle:{get:function(){return this.vs},set:function(t){this.Eb===t||t!==Tp&&t!==Cp&&t!==Dp||(this.vs=t,this.C())}},comments:{get:function(){return this.ed},set:function(t){this.ed!==t&&(this.ed=t,this.C())}},arrangement:{get:function(){return this.Eb},set:function(t){this.Eb===t||t!==_p&&t!==Np&&t!==Ap||(this.Eb=t,this.C())}},arrangementSpacing:{get:function(){return this.Hd},set:function(t){this.Hd.w(t)||(this.Hd.assign(t),this.C())}},rootDefaults:{get:function(){return this.U},set:function(t){this.U!==t&&(this.U=t,this.C())}},alternateDefaults:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t,this.C())}},sorting:{get:function(){return this.U.sorting},set:function(t){this.U.sorting===t||t!==up&&t!==lp&&t!==dp&&!cp||(this.U.sorting=t,this.C())}},comparer:{get:function(){return this.U.comparer},set:function(t){this.U.comparer!==t&&(this.U.comparer=t,this.C())}},angle:{get:function(){return this.U.angle},set:function(t){this.U.angle!==t&&(0===t||90===t||180===t||270===t?(this.U.angle=t,this.C()):O("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.U.alignment},set:function(t){this.U.alignment!==t&&(this.U.alignment=t,this.C())}},nodeIndent:{get:function(){return this.U.nodeIndent},set:function(t){this.U.nodeIndent!==t&&0<=t&&(this.U.nodeIndent=t,this.C())}},nodeIndentPastParent:{get:function(){return this.U.nodeIndentPastParent},set:function(t){this.U.nodeIndentPastParent!==t&&0<=t&&t<=1&&(this.U.nodeIndentPastParent=t,this.C())}},nodeSpacing:{get:function(){return this.U.nodeSpacing},set:function(t){this.U.nodeSpacing!==t&&(this.U.nodeSpacing=t,this.C())}},layerSpacing:{get:function(){return this.U.layerSpacing},set:function(t){this.U.layerSpacing!==t&&(this.U.layerSpacing=t,this.C())}},layerSpacingParentOverlap:{get:function(){return this.U.layerSpacingParentOverlap},set:function(t){this.U.layerSpacingParentOverlap!==t&&0<=t&&t<=1&&(this.U.layerSpacingParentOverlap=t,this.C())}},compaction:{get:function(){return this.U.compaction},set:function(t){this.U.compaction===t||t!==Sp&&t!==xp||(this.U.compaction=t,this.C())}},breadthLimit:{get:function(){return this.U.breadthLimit},set:function(t){this.U.breadthLimit!==t&&0<=t&&(this.U.breadthLimit=t,this.C())}},rowSpacing:{get:function(){return this.U.rowSpacing},set:function(t){this.U.rowSpacing!==t&&(this.U.rowSpacing=t,this.C())}},rowIndent:{get:function(){return this.U.rowIndent},set:function(t){this.U.rowIndent!==t&&0<=t&&(this.U.rowIndent=t,this.C())}},commentSpacing:{get:function(){return this.U.commentSpacing},set:function(t){this.U.commentSpacing!==t&&(this.U.commentSpacing=t,this.C())}},commentMargin:{get:function(){return this.U.commentMargin},set:function(t){this.U.commentMargin!==t&&(this.U.commentMargin=t,this.C())}},setsPortSpot:{get:function(){return this.U.setsPortSpot},set:function(t){this.U.setsPortSpot!==t&&(this.U.setsPortSpot=t,this.C())}},portSpot:{get:function(){return this.U.portSpot},set:function(t){this.U.portSpot.w(t)||(this.U.portSpot=t,this.C())}},setsChildPortSpot:{get:function(){return this.U.setsChildPortSpot},set:function(t){this.U.setsChildPortSpot!==t&&(this.U.setsChildPortSpot=t,this.C())}},childPortSpot:{get:function(){return this.U.childPortSpot},set:function(t){this.U.childPortSpot.w(t)||(this.U.childPortSpot=t,this.C())}},alternateSorting:{get:function(){return this.V.sorting},set:function(t){this.V.sorting===t||t!==up&&t!==lp&&t!==dp&&!cp||(this.V.sorting=t,this.C())}},alternateComparer:{get:function(){return this.V.comparer},set:function(t){this.V.comparer!==t&&(this.V.comparer=t,this.C())}},alternateAngle:{get:function(){return this.V.angle},set:function(t){this.V.angle===t||0!==t&&90!==t&&180!==t&&270!==t||(this.V.angle=t,this.C())}},alternateAlignment:{get:function(){return this.V.alignment},set:function(t){this.V.alignment!==t&&(this.V.alignment=t,this.C())}},alternateNodeIndent:{get:function(){return this.V.nodeIndent},set:function(t){this.V.nodeIndent!==t&&0<=t&&(this.V.nodeIndent=t,this.C())}},alternateNodeIndentPastParent:{get:function(){return this.V.nodeIndentPastParent},set:function(t){this.V.nodeIndentPastParent!==t&&0<=t&&t<=1&&(this.V.nodeIndentPastParent=t,this.C())}},alternateNodeSpacing:{get:function(){return this.V.nodeSpacing},set:function(t){this.V.nodeSpacing!==t&&(this.V.nodeSpacing=t,this.C())}},alternateLayerSpacing:{get:function(){return this.V.layerSpacing},set:function(t){this.V.layerSpacing!==t&&(this.V.layerSpacing=t,this.C())}},alternateLayerSpacingParentOverlap:{get:function(){return this.V.layerSpacingParentOverlap},set:function(t){this.V.layerSpacingParentOverlap!==t&&0<=t&&t<=1&&(this.V.layerSpacingParentOverlap=t,this.C())}},alternateCompaction:{get:function(){return this.V.compaction},set:function(t){this.V.compaction===t||t!==Sp&&t!==xp||(this.V.compaction=t,this.C())}},alternateBreadthLimit:{get:function(){return this.V.breadthLimit},set:function(t){this.V.breadthLimit!==t&&0<=t&&(this.V.breadthLimit=t,this.C())}},alternateRowSpacing:{get:function(){return this.V.rowSpacing},set:function(t){this.V.rowSpacing!==t&&(this.V.rowSpacing=t,this.C())}},alternateRowIndent:{get:function(){return this.V.rowIndent},set:function(t){this.V.rowIndent!==t&&0<=t&&(this.V.rowIndent=t,this.C())}},alternateCommentSpacing:{get:function(){return this.V.commentSpacing},set:function(t){this.V.commentSpacing!==t&&(this.V.commentSpacing=t,this.C())}},alternateCommentMargin:{get:function(){return this.V.commentMargin},set:function(t){this.V.commentMargin!==t&&(this.V.commentMargin=t,this.C())}},alternateSetsPortSpot:{get:function(){return this.V.setsPortSpot},set:function(t){this.V.setsPortSpot!==t&&(this.V.setsPortSpot=t,this.C())}},alternatePortSpot:{get:function(){return this.V.portSpot},set:function(t){this.V.portSpot.w(t)||(this.V.portSpot=t,this.C())}},alternateSetsChildPortSpot:{get:function(){return this.V.setsChildPortSpot},set:function(t){this.V.setsChildPortSpot!==t&&(this.V.setsChildPortSpot=t,this.C())}},alternateChildPortSpot:{get:function(){return this.V.childPortSpot},set:function(t){this.V.childPortSpot.w(t)||(this.V.childPortSpot=t,this.C())}}});var ap=new j(Ff,"PathDefault",-1),sp=new j(Ff,"PathDestination",0),hp=new j(Ff,"PathSource",1),up=new j(Ff,"SortingForwards",10),lp=new j(Ff,"SortingReverse",11),dp=new j(Ff,"SortingAscending",12),cp=new j(Ff,"SortingDescending",13),gp=new j(Ff,"AlignmentCenterSubtrees",20),fp=new j(Ff,"AlignmentCenterChildren",21),pp=new j(Ff,"AlignmentStart",22),mp=new j(Ff,"AlignmentEnd",23),yp=new j(Ff,"AlignmentBus",24),vp=new j(Ff,"AlignmentBusBranching",25),wp=new j(Ff,"AlignmentTopLeftBus",26),bp=new j(Ff,"AlignmentBottomRightBus",27),Sp=new j(Ff,"CompactionNone",30),xp=new j(Ff,"CompactionBlock",31),Pp=new j(Ff,"StyleLayered",40),kp=new j(Ff,"StyleLastParents",41),Lp=new j(Ff,"StyleAlternating",42),Mp=new j(Ff,"StyleRootOnly",43),_p=new j(Ff,"ArrangementVertical",50),Np=new j(Ff,"ArrangementHorizontal",51),Ap=new j(Ff,"ArrangementFixedRoots",52),Tp=new j(Ff,"LayerIndividual",60),Cp=new j(Ff,"LayerSiblings",61),Dp=new j(Ff,"LayerUniform",62);function Ep(t){Od.call(this,t)}function Fp(t){zd.call(this,t),this.Ja=!1,this.Bc=null,this.I=[],this.Pc=this.cb=this.T=this.Ka=0,this.ed=null,this.S=new ee(0,0),this.ua=new xe(0,0),this.da=new ee(0,0),this.Sm=this.Rm=this.SA=!1,this.cr=this.Pq=null,this.Yc=up,this.Tc=Rd,this.Yb=0,this.yb=fp,this.Fs=this.Es=0,this.Gs=20,this.qe=50,this.us=0,this.Gr=xp,this.yr=0,this.Ts=25,this.Fr=this.Ss=10,this.Er=20,this.ft=!0,this.Ps=we,this.et=!0,this.Br=we}function Op(t){Id.call(this,t),this.kv=new ee(0,0)}Ff.className="TreeLayout",Ff.PathDefault=ap,Ff.PathDestination=sp,Ff.PathSource=hp,Ff.SortingForwards=up,Ff.SortingReverse=lp,Ff.SortingAscending=dp,Ff.SortingDescending=cp,Ff.AlignmentCenterSubtrees=gp,Ff.AlignmentCenterChildren=fp,Ff.AlignmentStart=pp,Ff.AlignmentEnd=mp,Ff.AlignmentBus=yp,Ff.AlignmentBusBranching=vp,Ff.AlignmentTopLeftBus=wp,Ff.AlignmentBottomRightBus=bp,Ff.CompactionNone=Sp,Ff.CompactionBlock=xp,Ff.StyleLayered=Pp,Ff.StyleLastParents=kp,Ff.StyleAlternating=Lp,Ff.StyleRootOnly=Mp,Ff.ArrangementVertical=_p,Ff.ArrangementHorizontal=Np,Ff.ArrangementFixedRoots=Ap,Ff.LayerIndividual=Tp,Ff.LayerSiblings=Cp,Ff.LayerUniform=Dp,n(Ep,Od),Ep.prototype.createVertex=function(){return new Fp(this)},Ep.prototype.createEdge=function(){return new Op(this)},Ep.className="TreeNetwork",n(Fp,zd),Fp.prototype.copyInheritedPropertiesFrom=function(t){null!==t&&(this.Yc=t.sorting,this.Tc=t.comparer,this.Yb=t.angle,this.yb=t.alignment,this.Es=t.nodeIndent,this.Fs=t.nodeIndentPastParent,this.Gs=t.nodeSpacing,this.qe=t.layerSpacing,this.us=t.layerSpacingParentOverlap,this.Gr=t.compaction,this.yr=t.breadthLimit,this.Ts=t.rowSpacing,this.Ss=t.rowIndent,this.Fr=t.commentSpacing,this.Er=t.commentMargin,this.ft=t.setsPortSpot,this.Ps=t.portSpot,this.et=t.setsChildPortSpot,this.Br=t.childPortSpot)},s.Object.defineProperties(Fp.prototype,{initialized:{get:function(){return this.Ja},set:function(t){this.Ja!==t&&(this.Ja=t)}},parent:{get:function(){return this.Bc},set:function(t){this.Bc!==t&&(this.Bc=t)}},children:{get:function(){return this.I},set:function(t){if(this.I!==t){if(null!==t)for(var e=t.length,n=0;n<e;n++);this.I=t}}},level:{get:function(){return this.Ka},set:function(t){this.Ka!==t&&(this.Ka=t)}},descendantCount:{get:function(){return this.T},set:function(t){this.T!==t&&(this.T=t)}},maxChildrenCount:{get:function(){return this.cb},set:function(t){this.cb!==t&&(this.cb=t)}},maxGenerationCount:{get:function(){return this.Pc},set:function(t){this.Pc!==t&&(this.Pc=t)}},comments:{get:function(){return this.ed},set:function(t){if(this.ed!==t){if(null!==t)for(var e=t.length,n=0;n<e;n++);this.ed=t}}},sorting:{get:function(){return this.Yc},set:function(t){this.Yc!==t&&(this.Yc=t)}},comparer:{get:function(){return this.Tc},set:function(t){this.Tc!==t&&(this.Tc=t)}},angle:{get:function(){return this.Yb},set:function(t){this.Yb!==t&&(this.Yb=t)}},alignment:{get:function(){return this.yb},set:function(t){this.yb!==t&&(this.yb=t)}},nodeIndent:{get:function(){return this.Es},set:function(t){this.Es!==t&&(this.Es=t)}},nodeIndentPastParent:{get:function(){return this.Fs},set:function(t){this.Fs!==t&&(this.Fs=t)}},nodeSpacing:{get:function(){return this.Gs},set:function(t){this.Gs!==t&&(this.Gs=t)}},layerSpacing:{get:function(){return this.qe},set:function(t){this.qe!==t&&(this.qe=t)}},layerSpacingParentOverlap:{get:function(){return this.us},set:function(t){this.us!==t&&(this.us=t)}},compaction:{get:function(){return this.Gr},set:function(t){this.Gr!==t&&(this.Gr=t)}},breadthLimit:{get:function(){return this.yr},set:function(t){this.yr!==t&&(this.yr=t)}},rowSpacing:{get:function(){return this.Ts},set:function(t){this.Ts!==t&&(this.Ts=t)}},rowIndent:{get:function(){return this.Ss},set:function(t){this.Ss!==t&&(this.Ss=t)}},commentSpacing:{get:function(){return this.Fr},set:function(t){this.Fr!==t&&(this.Fr=t)}},commentMargin:{get:function(){return this.Er},set:function(t){this.Er!==t&&(this.Er=t)}},setsPortSpot:{get:function(){return this.ft},set:function(t){this.ft!==t&&(this.ft=t)}},portSpot:{get:function(){return this.Ps},set:function(t){this.Ps.w(t)||(this.Ps=t)}},setsChildPortSpot:{get:function(){return this.et},set:function(t){this.et!==t&&(this.et=t)}},childPortSpot:{get:function(){return this.Br},set:function(t){this.Br.w(t)||(this.Br=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.S},set:function(t){this.S.set(t)}},subtreeSize:{get:function(){return this.ua},set:function(t){this.ua.set(t)}},subtreeOffset:{get:function(){return this.da},set:function(t){this.da.set(t)}}}),Fp.className="TreeVertex",n(Op,Id),Op.prototype.commit=function(){var t=this.link;if(null!==t&&!t.isAvoiding){var e=this.network.layout,n=null,i=null;switch(e.fd){case sp:n=this.fromVertex,i=this.toVertex;break;case hp:n=this.toVertex,i=this.fromVertex;break;default:O("Unhandled path value "+e.fd.toString())}if(null!==n&&null!==i)if(0!==(e=this.kv).x||0!==e.y||n.SA){i=n.bounds;var o=ip(n),r=op(n),a=n.rowSpacing;t.wj();var s,h=t.curve===Rl,u=t.isOrthogonal;if(t.Th(),u||h){for(s=2;4<t.pointsCount;)t.sw(2);var l=t.i(1),d=t.i(2)}else{for(s=1;3<t.pointsCount;)t.sw(1);l=t.i(0),d=t.i(t.pointsCount-1)}var c=t.i(t.pointsCount-1);0===o?(n.alignment===mp?(o=i.bottom+e.y,0===e.y&&l.y>c.y+n.rowIndent&&(o=Math.min(o,Math.max(l.y,o-rp(n))))):n.alignment===pp?(o=i.top+e.y,0===e.y&&l.y<c.y-n.rowIndent&&(o=Math.max(o,Math.min(l.y,o+rp(n))))):o=n.Rm||n.Sm&&1===n.maxGenerationCount?i.top-n.da.y+e.y:i.y+i.height/2+e.y,h?(t.m(s,l.x,o),s++,t.m(s,i.right+r,o),s++,t.m(s,i.right+r+(e.x-a)/3,o),s++,t.m(s,i.right+r+2*(e.x-a)/3,o),s++,t.m(s,i.right+r+(e.x-a),o),s++,t.m(s,d.x,o)):(u&&(t.m(s,i.right+r/2,l.y),s++),t.m(s,i.right+r/2,o),s++,t.m(s,i.right+r+e.x-(u?a/2:a),o),s++,u&&t.m(s,t.i(s-1).x,d.y))):90===o?(n.alignment===mp?(o=i.right+e.x,0===e.x&&l.x>c.x+n.rowIndent&&(o=Math.min(o,Math.max(l.x,o-rp(n))))):n.alignment===pp?(o=i.left+e.x,0===e.x&&l.x<c.x-n.rowIndent&&(o=Math.max(o,Math.min(l.x,o+rp(n))))):o=n.Rm||n.Sm&&1===n.maxGenerationCount?i.left-n.da.x+e.x:i.x+i.width/2+e.x,h?(t.m(s,o,l.y),s++,t.m(s,o,i.bottom+r),s++,t.m(s,o,i.bottom+r+(e.y-a)/3),s++,t.m(s,o,i.bottom+r+2*(e.y-a)/3),s++,t.m(s,o,i.bottom+r+(e.y-a)),s++,t.m(s,o,d.y)):(u&&(t.m(s,l.x,i.bottom+r/2),s++),t.m(s,o,i.bottom+r/2),s++,t.m(s,o,i.bottom+r+e.y-(u?a/2:a)),s++,u&&t.m(s,d.x,t.i(s-1).y))):180===o?(n.alignment===mp?(o=i.bottom+e.y,0===e.y&&l.y>c.y+n.rowIndent&&(o=Math.min(o,Math.max(l.y,o-rp(n))))):n.alignment===pp?(o=i.top+e.y,0===e.y&&l.y<c.y-n.rowIndent&&(o=Math.max(o,Math.min(l.y,o+rp(n))))):o=n.Rm||n.Sm&&1===n.maxGenerationCount?i.top-n.da.y+e.y:i.y+i.height/2+e.y,h?(t.m(s,l.x,o),s++,t.m(s,i.left-r,o),s++,t.m(s,i.left-r+(e.x+a)/3,o),s++,t.m(s,i.left-r+2*(e.x+a)/3,o),s++,t.m(s,i.left-r+(e.x+a),o),s++,t.m(s,d.x,o)):(u&&(t.m(s,i.left-r/2,l.y),s++),t.m(s,i.left-r/2,o),s++,t.m(s,i.left-r+e.x+(u?a/2:a),o),s++,u&&t.m(s,t.i(s-1).x,d.y))):270===o?(n.alignment===mp?(o=i.right+e.x,0===e.x&&l.x>c.x+n.rowIndent&&(o=Math.min(o,Math.max(l.x,o-rp(n))))):n.alignment===pp?(o=i.left+e.x,0===e.x&&l.x<c.x-n.rowIndent&&(o=Math.max(o,Math.min(l.x,o+rp(n))))):o=n.Rm||n.Sm&&1===n.maxGenerationCount?i.left-n.da.x+e.x:i.x+i.width/2+e.x,h?(t.m(s,o,l.y),s++,t.m(s,o,i.top-r),s++,t.m(s,o,i.top-r+(e.y+a)/3),s++,t.m(s,o,i.top-r+2*(e.y+a)/3),s++,t.m(s,o,i.top-r+(e.y+a)),s++,t.m(s,o,d.y)):(u&&(t.m(s,l.x,i.top-r/2),s++),t.m(s,o,i.top-r/2),s++,t.m(s,o,i.top-r+e.y+(u?a/2:a)),s++,u&&t.m(s,d.x,t.i(s-1).y))):O("Invalid angle "+o),t.xf()}else t=this.link,(r=ip(n))!==ip(i)&&(a=op(n),h=n.bounds,n=i.bounds,0===r&&n.left-h.right<a+1||90===r&&n.top-h.bottom<a+1||180===r&&h.left-n.right<a+1||270===r&&h.top-n.bottom<a+1||(t.wj(),n=t.curve===Rl,e=t.isOrthogonal,i=jf(this.fromVertex.alignment),t.Th(),0===r?(r=h.right+a/2,n?4===t.pointsCount&&(n=t.i(3).y,t.K(1,r-20,t.i(1).y),t.m(2,r-20,n),t.m(3,r,n),t.m(4,r+20,n),t.K(5,t.i(5).x,n)):e?i?t.K(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.K(2,r,t.i(2).y),t.K(3,r,t.i(3).y)):4===t.pointsCount?t.m(2,r,t.i(2).y):3===t.pointsCount?t.K(1,r,t.i(2).y):2===t.pointsCount&&t.m(1,r,t.i(1).y)):90===r?(r=h.bottom+a/2,n?4===t.pointsCount&&(n=t.i(3).x,t.K(1,t.i(1).x,r-20),t.m(2,n,r-20),t.m(3,n,r),t.m(4,n,r+20),t.K(5,n,t.i(5).y)):e?i?t.K(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.K(2,t.i(2).x,r),t.K(3,t.i(3).x,r)):4===t.pointsCount?t.m(2,t.i(2).x,r):3===t.pointsCount?t.K(1,t.i(2).x,r):2===t.pointsCount&&t.m(1,t.i(1).x,r)):180===r?(r=h.left-a/2,n?4===t.pointsCount&&(n=t.i(3).y,t.K(1,r+20,t.i(1).y),t.m(2,r+20,n),t.m(3,r,n),t.m(4,r-20,n),t.K(5,t.i(5).x,n)):e?i?t.K(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.K(2,r,t.i(2).y),t.K(3,r,t.i(3).y)):4===t.pointsCount?t.m(2,r,t.i(2).y):3===t.pointsCount?t.K(1,r,t.i(2).y):2===t.pointsCount&&t.m(1,r,t.i(1).y)):270===r&&(r=h.top-a/2,n?4===t.pointsCount&&(n=t.i(3).x,t.K(1,t.i(1).x,r+20),t.m(2,n,r+20),t.m(3,n,r),t.m(4,n,r-20),t.K(5,n,t.i(5).y)):e?i?t.K(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.K(2,t.i(2).x,r),t.K(3,t.i(3).x,r)):4===t.pointsCount?t.m(2,t.i(2).x,r):3===t.pointsCount?t.K(1,t.i(2).x,r):2===t.pointsCount&&t.m(1,t.i(1).x,r)),t.xf()))}},s.Object.defineProperties(Op.prototype,{relativePoint:{get:function(){return this.kv},set:function(t){this.kv.set(t)}}}),Op.className="TreeEdge",_n.prototype.initializeStandardTools=function(){this.Xa("Action",new vi,this.mouseDownTools),this.Xa("Relinking",new si,this.mouseDownTools),this.Xa("LinkReshaping",new ui,this.mouseDownTools),this.Xa("Rotating",new mi,this.mouseDownTools),this.Xa("Resizing",new pi,this.mouseDownTools),this.Xa("Linking",new ii,this.mouseMoveTools),this.Xa("Dragging",new On,this.mouseMoveTools),this.Xa("DragSelecting",new bi,this.mouseMoveTools),this.Xa("Panning",new Si,this.mouseMoveTools),this.Xa("ContextMenu",new ki,this.mouseUpTools),this.Xa("TextEditing",new Di,this.mouseUpTools),this.Xa("ClickCreating",new wi,this.mouseUpTools),this.Xa("ClickSelecting",new yi,this.mouseUpTools)},Mh("Horizontal",new Ws),Mh("Spot",new Js),Mh("Table",new Qs),Mh("Viewbox",new nh),Mh("TableRow",new th),Mh("TableColumn",new eh),Mh("Graduated",new sh),Mh("Grid",new ih),Hr.add("GraphLinksModel",uc),Hr.add("TreeModel",gc),Md(Og,null),Md(Xg,null);var Cn=d.go,Bp={get licenseKey(){return Mo.licenseKey},set licenseKey(t){Mo.licenseKey=t},get version(){return Mo.version},Group:pl,EnumValue:j,List:X,Set:$,Map:at,Point:ee,Size:xe,Rect:ne,Margin:Vt,Spot:Be,Geometry:qe,PathFigure:an,PathSegment:sn,InputEvent:mn,DiagramEvent:yn,ChangedEvent:vn,Model:pc,GraphLinksModel:Kc,TreeModel:og,Binding:Uc,Transaction:Pn,UndoManager:kn,CommandHandler:Ma,Tool:Mn,DraggingTool:On,DraggingInfo:ya,DraggingOptions:wa,LinkingBaseTool:ei,LinkingTool:ii,RelinkingTool:si,LinkReshapingTool:ui,ResizingTool:pi,RotatingTool:mi,ClickSelectingTool:yi,ActionTool:vi,ClickCreatingTool:wi,HTMLInfo:xi,ContextMenuTool:ki,DragSelectingTool:bi,PanningTool:Si,TextEditingTool:Di,ToolManager:_n,Animation:uo,AnimationManager:Xi,AnimationTrigger:wo,Layer:Po,Diagram:Mo,Palette:ba,Overview:xa,Brush:vs,GraphObject:Na,Panel:hh,RowColumnDefinition:Th,Shape:Oh,TextBlock:Hh,TextBlockMetrics:yu,Picture:vu,Part:Ou,Adornment:tl,Node:el,Link:wl,Placeholder:vl,Layout:Sd,LayoutNetwork:Od,LayoutVertex:zd,LayoutEdge:Id,GridLayout:Vd,PanelLayout:Ks,CircularLayout:rg,CircularNetwork:Cg,CircularVertex:Dg,CircularEdge:Fg,ForceDirectedLayout:Og,ForceDirectedNetwork:qg,ForceDirectedVertex:Hg,ForceDirectedEdge:Yg,LayeredDigraphLayout:Xg,LayeredDigraphNetwork:Cf,LayeredDigraphVertex:Df,LayeredDigraphEdge:Ef,TreeLayout:Ff,TreeNetwork:Ep,TreeVertex:Fp,TreeEdge:Op};"object"===_typeof(Cn)&&Cn.version&&O("WARNING: a `go` object on the root object is already defined.  "+("Debug"in Cn?"debug ":"")+"version: "+Cn.version+", replaced with version: "+Bp.version),Mo.prototype.go=Bp,d.go=Bp,(void 0===d||void 0===d.module||"object"!==_typeof(d.module.exports))&&d.define&&"function"==typeof d.define&&d.define.amd&&d.define(Bp),"undefined"!=typeof module&&"object"===_typeof(module.exports)&&(module.exports=("undefined"!=typeof global?global:self).go)}(),go.Diagram.inherit(ParallelRouteLink,go.Link),ParallelRouteLink.prototype.computePoints=function(){var t=go.Link.prototype.computePoints.call(this);if(!this.isOrthogonal&&this.curve!==go.Link.Bezier&&this.hasCurviness()){var e=this.computeCurviness();if(0!==e){var n=this.pointsCount,i=0,o=n-1;4<=n&&(i++,o--);var r=this.getPoint(i),a=this.getPoint(o);if(!r||!a)return;var s=a.x-r.x,h=a.y-r.y,u=r.x+s/8,l=r.y+h/8,d=u,n=l;-.01<h&&h<.01?0<s?n-=e:n+=e:(c=-s/h,g=Math.sqrt(e*e/(c*c+1)),e<0&&(g=-g),n=c*((d=(h<0?-1:1)*g+u)-u)+l);var c,g,a=u=r.x+7*s/8,r=l=r.y+7*h/8;-.01<h&&h<.01?0<s?r-=e:r+=e:(c=-s/h,g=Math.sqrt(e*e/(c*c+1)),e<0&&(g=-g),r=c*((a=(h<0?-1:1)*g+u)-u)+l),this.insertPointAt(i+1,d,n),this.insertPointAt(o+1,a,r)}}return t},go.Diagram.inherit(RadialLayout,go.Layout),RadialLayout.prototype.cloneProtected=function(t){go.Layout.prototype.cloneProtected.call(this,t),t._layerThickness=this._layerThickness,t._maxLayers=this._maxLayers},Object.defineProperty(RadialLayout.prototype,"root",{get:function(){return this._root},set:function(t){this._root!==t&&(this._root=t,this.invalidateLayout())}}),Object.defineProperty(RadialLayout.prototype,"layerThickness",{get:function(){return this._layerThickness},set:function(t){this._layerThickness!==t&&(this._layerThickness=t,this.invalidateLayout())}}),Object.defineProperty(RadialLayout.prototype,"maxLayers",{get:function(){return this._maxLayers},set:function(t){this._maxLayers!==t&&(this._maxLayers=t,this.invalidateLayout())}}),RadialLayout.prototype.createNetwork=function(){var t=new go.LayoutNetwork(this);return t.createVertex=function(){return new RadialVertex(t)},t},RadialLayout.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),0!==this.network.vertexes.count){if(null===this.root)for(var e=this.network.vertexes.iterator;e.next();)if(null!==(n=e.value).node&&0===n.sourceEdges.count){this.root=n.node;break}if(null===this.root&&(this.root=this.network.vertexes.first().node),null!==this.root){t=this.network.findVertex(this.root);if(null!==t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.findDistances(t);for(var n,i=[],o=0,e=this.network.vertexes.iterator;e.next();){(n=e.value).laid=!1;var r,a=n.distance;a!==1/0&&(o<a&&(o=a),void 0===(r=i[a])&&(r=[],i[a]=r),r.push(n))}t.centerX=this.arrangementOrigin.x,t.centerY=this.arrangementOrigin.y,this.radlay1(t,1,0,360),this.updateParts(),this.network=null}}}},RadialLayout.prototype.radlay1=function(t,e,n,i){if(!(e>this.maxLayers)){var o=[];t.vertexes.each(function(t){t.laid||t.distance===e&&o.push(t)});var r=o.length;if(0!==r)for(var a=e*this.layerThickness,s=i/r,h=n-i/2+s/2,u=0;u<r;u++){var l=o[u],d=h+u*s;d<0?d+=360:360<d&&(d-=360);var c=new go.Point(a,0);c.rotate(d),l.centerX=c.x+this.arrangementOrigin.x,l.centerY=c.y+this.arrangementOrigin.y,l.laid=!0,l.angle=d,l.sweep=s,l.radius=a,this.radlay1(l,e+1,d,i/r)}}},RadialLayout.prototype.findDistances=function(t){this.diagram;this.network.vertexes.each(function(t){t.distance=1/0}),t.distance=0;var i=new go.Set;i.add(t);for(var o=new go.Set;0<i.count;){var r=function(t){for(var e=1/0,n=null,i=t.iterator;i.next();){var o=i.value,r=o.distance;r<e&&(e=r,n=o)}return n}(i),a=r.distance;i.remove(r),o.add(r),r.edges.each(function(t){var e,n=t.getOtherVertex(r);o.contains(n)||(e=n.distance,(t=a+1)<e&&(e==1/0&&i.add(n),n.distance=t))})}},RadialLayout.prototype.commitLayout=function(){go.Layout.prototype.commitLayout.call(this);for(var t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.node;null!==n&&(n.visible=e.distance<=this.maxLayers,this.rotateNode(n,e.angle,e.sweep,e.radius))}this.commitLayers()},RadialLayout.prototype.rotateNode=function(t,e,n,i){},RadialLayout.prototype.commitLayers=function(){},go.Diagram.inherit(RadialVertex,go.LayoutVertex);var startVertex,endVertex,graph_id,custom_node,custom_link,RcallBack=!1,filterNodes=[],filterLinks=[],entity_list=[],nodeArray=[],linkArray=[],original_nodes=[],original_links=[],lockings=[],Diagram_name="myDiagramDiv",DiagramOverview_name="myDiagramDivOverview",Diagram_List=new Map,AccessMode="",hideNodeList=new Set,hideLinkList=new Set,hideLinkRemarks=new Object,isHideScatteredNode=!1,messageProcessing={},groups=[],pastedNodes=[],pastedLinks=[],group_border=!0,sortLinks={},moneys=[1,1,1,1],entity_tags=[],schema=0,labelisShow=1,animation_time_out=null,color_curr="#ccc",curr_scrollPart=!1,workerUrl="http://192.168.100.118/web_dev/relation_graph",webgl_select_nodes=[],layout="sankey",rendering_type=1,webgl_graph_state="xz",model=1,entity_type=1,pattern="",graph_mode="basic",downloadImgName="",download_scale=1,is_contextmenu=!0,r_node_list=["复制","粘贴","删除","选中","隐藏","关系拓展","发至新图","添加标签","合并实体","属性"],r_link_list=["删除","隐藏","选中","属性"],r_blank_list=["粘贴","全选","全部显示"],r_node_list_select=["选中端点和链接","选中链接","全选","反选"],r_node_list_hide=["隐藏选中项","隐藏未选项"],r_node_list_expand=["快速一层","自定义"],r_link_list_hide=["隐藏选中项"],r_link_list_select=["选中端点和链接","选中端点"];function init_rightMenu_list(){"basic"!=graph_mode&&null!=graph_mode||(r_node_list.splice(r_node_list.indexOf("添加标签"),1),r_node_list.splice(r_node_list.indexOf("合并叶子节点"),1),r_node_list.splice(r_node_list.indexOf("属性"),1),r_link_list.splice(r_link_list.indexOf("属性"),1))}function strlen(t){for(var e=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);1<=i&&i<=126||65376<=i&&i<=65439?e++:e+=2}return e}function setText(t){return 10<strlen(t)?t.slice(0,8)+"...":t}function getDiagramData(){var e=[],n=[];return myDiagram.nodes.each(function(t){e.push({key:t.data.key,id:t.data.id,stroke:t.data.stroke||t.data.d_stroke,fill:t.data.fill||t.data.d_fill,icon:t.data.icon,text:t.data.text,text_color:t.data.text_color,color:t.data.color,type:t.data.type,type_text:t.data.type_text,type_key:t.data.type_key,width:t.data.width,height:t.data.height,isExpand:t.data.isExpand,isSelected:t.data.isSelected,visible:t.visible,isLocking:t.data.isLocking,category:t.data.category,group:t.data.group,tags:t.data.tags,fields:t.data.fields})}),myDiagram.links.each(function(t){n.push({category:t.data.category,isSelected:t.data.isSelected,from:t.data.from,to:t.data.to,text:t.data.text,stroke:t.data.stroke,width:t.data.width,type:t.data.type,type_key:t.data.type_key,type_text:t.data.type_text,size:t.data.size,color:t.data.color,direction:t.data.direction,time:t.data.time,id:t.data.id,fields:t.data.fields,visible:t.visible})}),{nodes:e,edges:n}}function FigureParameter(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=1/0),this._name=t,this._defaultValue=e,this._minimum=n,this._maximum=i}window.onload=function(){"0"!=new URL(document.location).searchParams.get("showFooter")&&($(".graph_pro").height(30),$(".graph_pro").css("border","1px solid  #C5CCE0"));var t=$(".graph_pro").height()+2,e=$("#"+Diagram_name).height();$("#"+Diagram_name).height(e-t),$("#timeMargin").height($("#timeMargin").height()-t)},$(".setHideScatterNode").click(function(){isHideScatteredNode=$(".isHideState").is(":checked"),$(".isHideState").prop("checked",!isHideScatteredNode),setScatterNodeVisible(isHideScatteredNode=$(".isHideState").is(":checked"))}),$(".isHideState").click(function(t){t.stopPropagation(),$(".setHideScatterNode").click()}),$(".hide_link").click(function(){var t={event_name:"隐藏边点击",model:model,entity_type:entity_type,layout:layout,graph_id:graph_id,hideLinkList:[],hideLinkListCount:graph_tool.edgesVisibleCount()};t.hideLinkList=getHideListofTransaction(),postmessageToParent(t)}),Object.defineProperty(FigureParameter.prototype,"name",{get:function(){return this._name},set:function(t){if("string"!=typeof t||""===t)throw new Error("Shape name must be a valid string.");this._name=t}}),Object.defineProperty(FigureParameter.prototype,"defaultValue",{get:function(){return this._defaultValue},set:function(t){if("number"!=typeof t||isNaN(t))throw new Error("The default value must be a real number, not: "+t);this._defaultValue=t}}),Object.defineProperty(FigureParameter.prototype,"minimum",{get:function(){return this._minimum},set:function(t){if("number"!=typeof t||isNaN(t))throw new Error("Minimum must be a real number, not: "+t);this._minimum=t}}),Object.defineProperty(FigureParameter.prototype,"maximum",{get:function(){return this._maximum},set:function(t){if("number"!=typeof t||isNaN(t))throw new Error("Maximum must be a real number, not: "+t);this._maximum=t}}),go.Shape._FigureParameters={},go.Shape.getFigureParameter=function(t,e){t=go.Shape._FigureParameters[t];return t?t[e]:null},go.Shape.setFigureParameter=function(t,e,n){if(!(n instanceof FigureParameter))throw new Error("Third argument to Shape.setFigureParameter is not FigureParameter: "+n);if(n.defaultValue<n.minimum||n.defaultValue>n.maximum)throw new Error("defaultValue must be between minimum and maximum, not: "+n.defaultValue);var i=go.Shape._FigureParameters[t];i||(i=[],go.Shape._FigureParameters[t]=i),i[e]=n};var _CachedPoints=[];function tempPointAt(t,e){var n=_CachedPoints.pop();return void 0===n?new go.Point(t,e):(n.x=t,n.y=e,n)}function tempPoint(){var t=_CachedPoints.pop();return void 0===t?new go.Point:t}function freePoint(t){_CachedPoints.push(t)}function getIntersection(t,e,n,i,o,r,a,s,h){var u,l,d,c,n=t-n,a=o-a;return c=0==n||0==a?0==n?(d=(r-s)/a)*(u=t)+(r-d*o):(l=(e-i)/n)*(u=o)+(c=e-l*t):(l=(e-i)/n)*(u=(r-(d=(r-s)/a)*o-(c=e-l*t))/(l-d))+c,h.x=u,h.y=c,h}function breakUpBezier(t,e,n,i,o,r,a,s,h,u,l,d,c,g){var f=1-h,p=t*f+n*h,t=e*f+i*h,e=n*f+o*h,n=i*f+r*h,i=o*f+a*h,o=r*f+s*h,a=p*f+e*h,r=t*f+n*h,s=e*f+i*h,e=n*f+o*h,n=a*f+s*h,h=r*f+e*h;u.x=p,u.y=t,l.x=a,l.y=r,d.x=n,d.y=h,c.x=s,c.y=e,g.x=i,g.y=o}var GeneratorEllipseSpot1=new go.Spot(.156,.156),GeneratorEllipseSpot2=new go.Spot(.844,.844),KAPPA=(Math.sqrt(2)-1)/3*4;go.Shape.setFigureParameter("RoundedRectangle",0,new FigureParameter("CornerRounding",5)),go.Shape.defineFigureGenerator("RoundedRectangle",function(t,e,n){var i=t?t.parameter1:NaN;(isNaN(i)||i<0)&&(i=5),i=Math.min(i,e/3);t=(i=Math.min(i,n/3))*KAPPA,i=(new go.Geometry).add(new go.PathFigure(i,0,!0).add(new go.PathSegment(go.PathSegment.Line,e-i,0)).add(new go.PathSegment(go.PathSegment.Bezier,e,i,e-t,0,e,t)).add(new go.PathSegment(go.PathSegment.Line,e,n-i)).add(new go.PathSegment(go.PathSegment.Bezier,e-i,n,e,n-t,e-t,n)).add(new go.PathSegment(go.PathSegment.Line,i,n)).add(new go.PathSegment(go.PathSegment.Bezier,0,n-i,t,n,0,n-t)).add(new go.PathSegment(go.PathSegment.Line,0,i)).add(new go.PathSegment(go.PathSegment.Bezier,i,0,0,t,t,0).close()));return 1<t&&(i.spot1=new go.Spot(0,0,t,t),i.spot2=new go.Spot(1,1,-t,-t)),i}),go.Shape.defineFigureGenerator("Border","RoundedRectangle"),go.Shape.defineFigureGenerator("TriangleRight",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,e,.5*n)).add(new go.PathSegment(go.PathSegment.Line,0,n).close())).setSpots(0,.25,.5,.75)}),go.Shape.defineFigureGenerator("TriangleDown",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,e,0)).add(new go.PathSegment(go.PathSegment.Line,.5*e,n).close())).setSpots(.25,0,.75,.5)}),go.Shape.defineFigureGenerator("TriangleLeft",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(e,n).add(new go.PathSegment(go.PathSegment.Line,0,.5*n)).add(new go.PathSegment(go.PathSegment.Line,e,0).close())).setSpots(.5,.25,1,.75)}),go.Shape.defineFigureGenerator("TriangleUp",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(e,n).add(new go.PathSegment(go.PathSegment.Line,0,n)).add(new go.PathSegment(go.PathSegment.Line,.5*e,0).close())).setSpots(.25,.5,.75,1)}),go.Shape.defineFigureGenerator("Triangle","TriangleUp"),go.Shape.defineFigureGenerator("Diamond",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(.5*e,0).add(new go.PathSegment(go.PathSegment.Line,0,.5*n)).add(new go.PathSegment(go.PathSegment.Line,.5*e,n)).add(new go.PathSegment(go.PathSegment.Line,e,.5*n).close())).setSpots(.25,.25,.75,.75)}),go.Shape.defineFigureGenerator("LineH",function(t,e,n){var i=new go.Geometry(go.Geometry.Line);return i.startX=0,i.startY=n/2,i.endX=e,i.endY=n/2,i}),go.Shape.defineFigureGenerator("LineV",function(t,e,n){var i=new go.Geometry(go.Geometry.Line);return i.startX=e/2,i.startY=0,i.endX=e/2,i.endY=n,i}),go.Shape.defineFigureGenerator("BarH","Rectangle"),go.Shape.defineFigureGenerator("BarV","Rectangle"),go.Shape.defineFigureGenerator("MinusLine","LineH"),go.Shape.defineFigureGenerator("PlusLine",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,n/2,!1).add(new go.PathSegment(go.PathSegment.Line,e,n/2)).add(new go.PathSegment(go.PathSegment.Move,e/2,0)).add(new go.PathSegment(go.PathSegment.Line,e/2,n)))}),go.Shape.defineFigureGenerator("XLine",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,n,!1).add(new go.PathSegment(go.PathSegment.Line,e,0)).add(new go.PathSegment(go.PathSegment.Move,0,0)).add(new go.PathSegment(go.PathSegment.Line,e,n)))}),go.Shape.defineFigureGenerator("AsteriskLine",function(t,e,n){var i=.2/Math.SQRT2;return(new go.Geometry).add(new go.PathFigure(i*e,(1-i)*n,!1).add(new go.PathSegment(go.PathSegment.Line,(1-i)*e,i*n)).add(new go.PathSegment(go.PathSegment.Move,i*e,i*n)).add(new go.PathSegment(go.PathSegment.Line,(1-i)*e,(1-i)*n)).add(new go.PathSegment(go.PathSegment.Move,0,n/2)).add(new go.PathSegment(go.PathSegment.Line,e,n/2)).add(new go.PathSegment(go.PathSegment.Move,e/2,0)).add(new go.PathSegment(go.PathSegment.Line,e/2,n)))}),go.Shape.defineFigureGenerator("CircleLine",function(t,e,n){var i=e/2,i=(new go.Geometry).add(new go.PathFigure(e,e/2,!1).add(new go.PathSegment(go.PathSegment.Arc,0,360,i,i,i,i).close()));return i.spot1=GeneratorEllipseSpot1,i.spot2=GeneratorEllipseSpot2,i.defaultStretch=go.GraphObject.Uniform,i}),go.Shape.defineFigureGenerator("Line1",function(t,e,n){var i=new go.Geometry(go.Geometry.Line);return i.startX=0,i.startY=0,i.endX=e,i.endY=n,i}),go.Shape.defineFigureGenerator("Line2",function(t,e,n){var i=new go.Geometry(go.Geometry.Line);return i.startX=e,i.startY=0,i.endX=0,i.endY=n,i}),go.Shape.defineFigureGenerator("Curve1",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Bezier,e,n,KAPPA*e,0,e,(1-KAPPA)*n)))}),go.Shape.defineFigureGenerator("Curve2",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Bezier,e,n,0,KAPPA*n,(1-KAPPA)*e,n)))}),go.Shape.defineFigureGenerator("Curve3",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(e,0,!1).add(new go.PathSegment(go.PathSegment.Bezier,0,n,e,KAPPA*n,KAPPA*e,n)))}),go.Shape.defineFigureGenerator("Curve4",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(e,0,!1).add(new go.PathSegment(go.PathSegment.Bezier,0,n,(1-KAPPA)*e,0,0,(1-KAPPA)*n)))}),go.Shape.defineFigureGenerator("TriangleDownLeft",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Line,e,n)).add(new go.PathSegment(go.PathSegment.Line,0,n).close())).setSpots(0,.5,.5,1)}),go.Shape.defineFigureGenerator("TriangleDownRight",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(e,0,!0).add(new go.PathSegment(go.PathSegment.Line,e,n)).add(new go.PathSegment(go.PathSegment.Line,0,n).close())).setSpots(.5,.5,1,1)}),go.Shape.defineFigureGenerator("TriangleUpLeft",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Line,e,0)).add(new go.PathSegment(go.PathSegment.Line,0,n).close())).setSpots(0,0,.5,.5)}),go.Shape.defineFigureGenerator("TriangleUpRight",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Line,e,0)).add(new go.PathSegment(go.PathSegment.Line,e,n).close())).setSpots(.5,0,1,.5)}),go.Shape.defineFigureGenerator("RightTriangle","TriangleDownLeft"),go.Shape.setFigureParameter("Parallelogram1",0,new FigureParameter("Indent",.1,-.99,.99)),go.Shape.defineFigureGenerator("Parallelogram1",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)?i=.1:i<-1?i=-1:1<i&&(i=1);t=Math.abs(i)*e;if(0===i)return(o=new go.Geometry(go.Geometry.Rectangle)).startX=0,o.startY=0,o.endX=e,o.endY=n,o;var o=new go.Geometry;return 0<i?o.add(new go.PathFigure(t,0).add(new go.PathSegment(go.PathSegment.Line,e,0)).add(new go.PathSegment(go.PathSegment.Line,e-t,n)).add(new go.PathSegment(go.PathSegment.Line,0,n).close())):o.add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,e-t,0)).add(new go.PathSegment(go.PathSegment.Line,e,n)).add(new go.PathSegment(go.PathSegment.Line,t,n).close())),t<e/2&&o.setSpots(t/e,0,(e-t)/e,1),o}),go.Shape.defineFigureGenerator("Parallelogram","Parallelogram1"),go.Shape.setFigureParameter("Parallelogram2",0,new FigureParameter("Indent",10,-1/0,1/0)),go.Shape.defineFigureGenerator("Parallelogram2",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)?i=10:i<-e?i=-e:e<i&&(i=e);t=Math.abs(i);if(0===i)return(o=new go.Geometry(go.Geometry.Rectangle)).startX=0,o.startY=0,o.endX=e,o.endY=n,o;var o=new go.Geometry;return 0<i?o.add(new go.PathFigure(t,0).add(new go.PathSegment(go.PathSegment.Line,e,0)).add(new go.PathSegment(go.PathSegment.Line,e-t,n)).add(new go.PathSegment(go.PathSegment.Line,0,n).close())):o.add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,e-t,0)).add(new go.PathSegment(go.PathSegment.Line,e,n)).add(new go.PathSegment(go.PathSegment.Line,t,n).close())),t<e/2&&o.setSpots(t/e,0,(e-t)/e,1),o}),go.Shape.setFigureParameter("Trapezoid1",0,new FigureParameter("Indent",.2,-.99,.99)),go.Shape.defineFigureGenerator("Trapezoid1",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)?i=.2:i<.5?i=-.5:.5<i&&(i=.5);t=Math.abs(i)*e;if(0===i)return(o=new go.Geometry(go.Geometry.Rectangle)).startX=0,o.startY=0,o.endX=e,o.endY=n,o;var o=new go.Geometry;return 0<i?o.add(new go.PathFigure(t,0).add(new go.PathSegment(go.PathSegment.Line,e-t,0)).add(new go.PathSegment(go.PathSegment.Line,e,n)).add(new go.PathSegment(go.PathSegment.Line,0,n).close())):o.add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,e,0)).add(new go.PathSegment(go.PathSegment.Line,e-t,n)).add(new go.PathSegment(go.PathSegment.Line,t,n).close())),t<e/2&&o.setSpots(t/e,0,(e-t)/e,1),o}),go.Shape.defineFigureGenerator("Trapezoid","Trapezoid1"),go.Shape.setFigureParameter("Trapezoid2",0,new FigureParameter("Indent",20,-1/0,1/0)),go.Shape.defineFigureGenerator("Trapezoid2",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)?i=20:i<-e?i=-e/2:e<i&&(i=e/2);t=Math.abs(i);if(0===i)return(o=new go.Geometry(go.Geometry.Rectangle)).startX=0,o.startY=0,o.endX=e,o.endY=n,o;var o=new go.Geometry;return 0<i?o.add(new go.PathFigure(t,0).add(new go.PathSegment(go.PathSegment.Line,e-t,0)).add(new go.PathSegment(go.PathSegment.Line,e,n)).add(new go.PathSegment(go.PathSegment.Line,0,n).close())):o.add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,e,0)).add(new go.PathSegment(go.PathSegment.Line,e-t,n)).add(new go.PathSegment(go.PathSegment.Line,t,n).close())),t<e/2&&o.setSpots(t/e,0,(e-t)/e,1),o}),go.Shape.setFigureParameter("ManualOperation",0,new FigureParameter("Indent",10,-1/0,1/0)),go.Shape.defineFigureGenerator("ManualOperation",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)?i=10:i<-e?i=-e/2:e<i&&(i=e/2);t=Math.abs(i);if(0===i)return(o=new go.Geometry(go.Geometry.Rectangle)).startX=0,o.startY=0,o.endX=e,o.endY=n,o;var o=new go.Geometry;return 0<i?o.add(new go.PathFigure(0,0).add(new go.PathSegment(go.PathSegment.Line,e,0)).add(new go.PathSegment(go.PathSegment.Line,e-t,n)).add(new go.PathSegment(go.PathSegment.Line,t,n).close())):o.add(new go.PathFigure(t,0).add(new go.PathSegment(go.PathSegment.Line,e-t,0)).add(new go.PathSegment(go.PathSegment.Line,e,n)).add(new go.PathSegment(go.PathSegment.Line,0,n).close())),t<e/2&&o.setSpots(t/e,0,(e-t)/e,1),o});var _CachedArrays=[];function tempArray(){var t=_CachedArrays.pop();return void 0===t?[]:t}function freeArray(t){t.length=0,_CachedArrays.push(t)}function createPolygon(t){for(var e,n=tempArray(),i=1.5*Math.PI,o=0;o<t;o++)e=2*Math.PI/t*o+i,n[o]=new go.Point(.5+.5*Math.cos(e),.5+.5*Math.sin(e));return n.push(n[0]),n}function createBurst(t){var e=createStar(t),n=tempArray();n[0]=e[0];for(var i=1,o=1;i<e.length;i+=2,o+=3)n[o]=e[i],n[o+1]=e[i],n[o+2]=e[i+1];return freeArray(e),n}function createStar(t){for(var e=createPolygon(t),n=tempArray(),i=Math.floor(e.length/2),o=e.length-1,r=t%2==0?2:1,a=0;a<o;a++){var s=e[a],h=e[a+1],u=e[(i+a-1)%o],l=e[(i+a+r)%o];n[2*a]=s,n[2*a+1]=getIntersection(s.x,s.y,u.x,u.y,h.x,h.y,l.x,l.y,new go.Point)}return n[n.length]=n[0],freeArray(e),n}function circular_node_template(){var t;return GO(go.Node,"Vertical",new go.Binding("visible"),new go.Binding("isSelected"),new go.Binding("isLayoutPositioned"),{zOrder:2,visible:!0,layerName:"Foreground",mouseEnter:function(t,e){var n;!e.isSelected&&graph_tool.nodesSelectCount()<1&&(n=[],myDiagram.model.setDataProperty(e.data,"Cstate",!0),500<myDiagram.nodes.count||500<myDiagram.links.count||(myDiagram.links.each(function(t){t.fromNode&&t.fromNode.key==e.data.key||t.toNode&&t.toNode.key==e.data.key?(null!=t.findObject("edge_standard")&&(t.findObject("edge_standard").stroke="#167cF3"),t.opacity=1,null!=t.fromNode&&-1==n.indexOf(t.fromNode.key)&&n.push(t.fromNode.key),null!=t.toNode&&-1==n.indexOf(t.toNode.key)&&n.push(t.toNode.key)):t.opacity=.1}),myDiagram.nodes.each(function(t){-(t.opacity=1)==n.indexOf(t.key)&&t.key!=e.key&&1!=t.data.isGroup&&(t.opacity=.1)})))},mouseLeave:function(t,e){e.isSelected||(myDiagram.model.setDataProperty(e.data,"Cstate",!1),500<myDiagram.nodes.count||500<myDiagram.links.count||(myDiagram.links.each(function(t){(t.fromNode&&t.fromNode.key==e.data.key||t.toNode&&t.toNode.key==e.data.key)&&null!=t.data.d_stroke&&null!=t.findObject("edge_standard")&&(t.findObject("edge_standard").stroke=t.data.d_stroke),t.opacity=1}),myDiagram.nodes.each(function(t){t.opacity=1})))},click:function(){},doubleClick:function(){send_newGraph("属性")}},new go.Binding("zOrder","isSelected",function(t,e){return t?3:2}).ofObject(""),new go.Binding("location","loc",function(t,e){return 1==e.data.isLocking?(e.isLayoutPositioned=!1,e.part.movable=!1,new go.Point(e.data.lock.x,e.data.lock.y)):new go.Point.parse(t)}).makeTwoWay(go.Point.stringify),{toolTip:tooltipTemplate},GO(go.Picture,{source:"./img/triangle.svg",margin:new go.Margin(-10,-50,2,0),opacity:0},new go.Binding("source","isExpand",function(t){return 1==t?"./img/triangle_in.svg":2==t?"./img/triangle_out.svg":3==V?"./img/triangle.svg":void 0}),new go.Binding("opacity","isExpand",function(t){return 0<t?1:0})),GO(go.Shape,"Ellipse",(_defineProperty(t={stroke:"#FFC106",fill:null,cursor:"pointer",strokeWidth:5,opacity:.1},"opacity",!1),_defineProperty(t,"strokeDashOffset",5),_defineProperty(t,"width",10),_defineProperty(t,"height",10),t),{toolTip:tooltipTemplate},new go.Binding("opacity","Cstate",function(t){return t&&.5}),new go.Binding("stroke","isSelected",function(t,e){return t?null:"#FFC106"}).ofObject(""),new go.Binding("width","width",function(t){return 1.2*t}),new go.Binding("height","height",function(t){return 1.2*t})),GO(go.Shape,"Ellipse",{name:"node_shape",margin:new go.Margin(-64,0,0,0),stroke:null,fill:"#006ADF",width:60,cursor:"pointer",height:60,portId:"",strokeWidth:5},new go.Binding("fill","d_fill",function(t){return""==t?"#006ADF":t}),new go.Binding("margin","width",function(t){return 120==t?new go.Margin(-1.13*t,0,0,0):new go.Margin(-1.18*t,0,0,0)}),new go.Binding("stroke","isSelected",function(t,e){return t?"#FFC106":null}).ofObject(""),new go.Binding("width"),new go.Binding("height")),GO(go.Picture,{name:"node_icon",cursor:"pointer",margin:new go.Margin(-40,0,0,0),opacity:1},new go.Binding("source","icon",geoFunc),new go.Binding("width","width",function(t){return.6*t}),new go.Binding("height","height",function(t){return.5*t}),new go.Binding("margin","height",function(t){return new go.Margin(.78*-t,0,0,0)})),GO(go.Panel,"Auto",{margin:12,name:"node_text"},new go.Binding("margin","width",function(t){return 12*t/60*1.2}),new go.Binding("opacity","text",function(t){return 0!=t.length}),GO(go.Shape,"RoundedRectangle",{fill:null,stroke:null,margin:new go.Margin(5,0,0,0)},new go.Binding("fill","isSelected",function(t){return t?"#F57500":null}).ofObject("")),GO(go.TextBlock,{font:"20px sans-serif",margin:6},new go.Binding("text","text",function(t){return t}),new go.Binding("stroke","color"),new go.Binding("stroke","isSelected",function(t,e){return t?"#fff":e.part.data.color||"#000"}).ofObject(""))),{selectionAdornmentTemplate:GO(go.Adornment,"Vertical",GO(go.Shape,"RoundedRectangle",{width:100,height:130,fill:null,stroke:null,strokeWidth:5,margin:new go.Margin(0,0,0,0)}),GO(go.Placeholder))},GO(go.Picture,{name:"lock_icon",cursor:"pointer",source:"./img/lock.svg",opacity:0},new go.Binding("margin","width",function(t){return new go.Margin(-110-(t-60)/20*25,-50-(t-60)/20*5,0,0)}),new go.Binding("opacity","isLocking")),GO(go.Panel,"Position",{width:100,height:100,margin:new go.Margin(-22,0,0,170)},GO(go.Shape,"RoundedRectangle",{name:"entity_label",fill:"red",cursor:"pointer",width:60,height:18,opacity:0,position:new go.Point(0,0)},{toolTip:tooltipTemplate_label1},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[0].style.width?1:0}),new go.Binding("fill","tags",function(t){return t[0].style.fill}),new go.Binding("stroke","tags",function(t){return t[0].style.stroke})),GO(go.TextBlock,{name:"entity_label_text1",text:"",cursor:"pointer",font:"9px sans-serif",stroke:"#fff",position:new go.Point(6,3)},{toolTip:tooltipTemplate_label1},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[0].style.width?1:0}),new go.Binding("text","tags",function(t){return 8<strlen(t[0].text)?t[0].text.slice(0,4)+"...":t[0].text}),new go.Binding("stroke","tags",function(t){return t[0].style.font_color})),GO(go.TextBlock,{name:"entity_label_text_x1",text:"X",font:"9px sans-serif",cursor:"pointer",opacity:0,stroke:"#fff",position:new go.Point(52,2)},{click:function(){delete_lable(1)}},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[0].style.width?1:0})),GO(go.Shape,"RoundedRectangle",{name:"entity_label2",fill:"red",cursor:"pointer",width:60,height:18,opacity:0,position:new go.Point(0,20)},{toolTip:tooltipTemplate_label2},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[1].style.width?1:0}),new go.Binding("fill","tags",function(t){return t[1].style.fill}),new go.Binding("stroke","tags",function(t){return t[1].style.stroke})),GO(go.TextBlock,{name:"entity_label_text2",text:"",cursor:"pointer",font:"9px sans-serif",opacity:0,stroke:"#333",position:new go.Point(6,22)},{toolTip:tooltipTemplate_label2},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[1].style.width?1:0}),new go.Binding("text","tags",function(t){return 8<strlen(t[1].text)?t[1].text.slice(0,4)+"...":t[1].text}),new go.Binding("stroke","tags",function(t){return t[1].style.font_color})),GO(go.TextBlock,{name:"entity_label_text_x2",text:"X",cursor:"pointer",font:"9px sans-serif",opacity:0,stroke:"#fff",position:new go.Point(52,22)},{click:function(){delete_lable(2)}},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[1].style.width?1:0})),GO(go.Shape,"RoundedRectangle",{name:"entity_label3",fill:"red",cursor:"pointer",width:60,height:18,opacity:0,position:new go.Point(0,40)},{toolTip:tooltipTemplate_label3},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[2].style.width?1:0}),new go.Binding("fill","tags",function(t){return t[2].style.fill}),new go.Binding("stroke","tags",function(t){return t[2].style.stroke})),GO(go.TextBlock,{name:"entity_label_text3",text:"",cursor:"pointer",font:"9px sans-serif",opacity:0,stroke:"#333",position:new go.Point(6,43)},{toolTip:tooltipTemplate_label3},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[2].style.width?1:0}),new go.Binding("text","tags",function(t){return 8<strlen(t[2].text)?t[2].text.slice(0,4)+"...":t[2].text}),new go.Binding("stroke","tags",function(t){return t[2].style.font_color})),GO(go.TextBlock,{name:"entity_label_text_x3",text:"X",cursor:"pointer",font:"9px sans-serif",opacity:0,stroke:"#fff",position:new go.Point(52,43)},{click:function(){delete_lable(3)}},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[2].style.width?1:0}))),{selectionAdorned:!1})}function circular_node_test(){return GO(go.Node,"Vertical",{zOrder:2},new go.Binding("location",function(t){return new go.Point.parse(t.x+" "+t.y)}),GO(go.Shape,"Ellipse",{stroke:"#FFC106",fill:null,cursor:"pointer",width:3,height:3}))}function fivePoints_node_template(){return GO(go.Node,"Vertical",new go.Binding("visible"),new go.Binding("isSelected"),new go.Binding("isLayoutPositioned"),{zOrder:2,visible:!0,layerName:"Foreground",mouseEnter:function(t,e){var n;e.isSelected||(n=[],myDiagram.model.setDataProperty(e.data,"Cstate",!0),500<myDiagram.nodes.count||500<myDiagram.links.count||(myDiagram.links.each(function(t){t.fromNode.key==e.data.key||t.toNode.key==e.data.key?(t.findObject("edge_standard").stroke="#167cF3",-(t.opacity=1)==n.indexOf(t.fromNode.key)&&n.push(t.fromNode.key),-1==n.indexOf(t.toNode.key)&&n.push(t.toNode.key)):t.opacity=.1}),myDiagram.nodes.each(function(t){-(t.opacity=1)==n.indexOf(t.key)&&t.key!=e.key&&(t.opacity=.1)})))},mouseLeave:function(t,e){e.isSelected||(myDiagram.model.setDataProperty(e.data,"Cstate",!1),500<myDiagram.nodes.count||500<myDiagram.links.count||(myDiagram.links.each(function(t){t.fromNode.key!=e.data.key&&t.toNode.key!=e.data.key||null!=t.data.d_stroke&&(t.findObject("edge_standard").stroke=t.data.d_stroke),t.opacity=1}),myDiagram.nodes.each(function(t){t.opacity=1})))},click:function(){},doubleClick:function(){send_newGraph("属性")}},new go.Binding("zOrder","isSelected",function(t,e){return t?3:2}).ofObject(""),new go.Binding("location","loc",function(t,e){return 1==e.data.isLocking?(e.isLayoutPositioned=!1,e.part.movable=!1,new go.Point(e.data.lock.x,e.data.lock.y)):new go.Point.parse(t)}).makeTwoWay(go.Point.stringify),{toolTip:tooltipTemplate},GO(go.Picture,{source:"./img/triangle.svg",cursor:"pointer",margin:new go.Margin(-10,-50,2,0),opacity:0},new go.Binding("source","isExpand",function(t){return 1==t?"./img/triangle_in.svg":2==t?"./img/triangle_out.svg":3==V?"./img/triangle.svg":void 0}),new go.Binding("opacity","isExpand",function(t){return 0<t?1:0})),GO(go.Shape,{figure:"fivePoints",stroke:"#FFC106",fill:null,width:76,cursor:"pointer",height:76,portId:"",strokeWidth:8,opacity:!1},{toolTip:tooltipTemplate},new go.Binding("opacity","Cstate",function(t){return t&&.5}),new go.Binding("stroke","isSelected",function(t,e){return t?null:"#FFC106"}).ofObject(""),new go.Binding("width","width",function(t){return 1.3*t}),new go.Binding("height","height",function(t){return 1.3*t})),GO(go.Shape,{figure:"fivePoints",name:"node_shape",margin:new go.Margin(-64,0,0,0),stroke:null,fill:"#006ADF",width:60,cursor:"pointer",height:60,portId:"",strokeWidth:5},new go.Binding("fill","d_fill",function(t){return""==t?"#006ADF":t}),new go.Binding("margin","width",function(t){return 100<=t?new go.Margin(1.2*-t,0,0,0):new go.Margin(1.25*-t,0,0,0)}),new go.Binding("stroke","isSelected",function(t,e){return t?"#FFC106":null}).ofObject(""),new go.Binding("width"),new go.Binding("height")),GO(go.Picture,{name:"node_icon",margin:new go.Margin(-40,0,0,0),opacity:1},new go.Binding("source","icon",geoFunc),new go.Binding("width","width",function(t){return.6*t}),new go.Binding("height","height",function(t){return.5*t}),new go.Binding("margin","height",function(t){return new go.Margin(.78*-t,0,0,0)})),GO(go.Panel,"Auto",{name:"node_text"},new go.Binding("margin","width",function(t){return new go.Margin(16*t/60*1.8,0,0,0)}),new go.Binding("opacity","text",function(t){return 0!=t.length}),GO(go.Shape,"RoundedRectangle",{fill:null,stroke:null,margin:new go.Margin(5,0,0,0)},new go.Binding("fill","isSelected",function(t){return t?"#FFC106":null}).ofObject("")),GO(go.TextBlock,{font:"20px sans-serif",margin:6},new go.Binding("text","text",function(t){return t}),new go.Binding("stroke","color"),new go.Binding("stroke","isSelected",function(t,e){return t?"#FFF":e.part.data.color||"#000"}).ofObject(""))),{selectionAdornmentTemplate:GO(go.Adornment,"Vertical",GO(go.Shape,"RoundedRectangle",{width:100,height:130,fill:null,stroke:null,strokeWidth:5,margin:new go.Margin(0,0,0,0)}),GO(go.Placeholder))},GO(go.Picture,{name:"lock_icon",cursor:"pointer",source:"./img/lock.svg",opacity:0},new go.Binding("margin","width",function(t){return new go.Margin(-120-(t-60)/20*25,-70-(t-60)/20*5,0,0)}),new go.Binding("opacity","isLocking")),GO(go.Shape,"RoundedRectangle",{name:"entity_label",margin:new go.Margin(-30,0,0,180),fill:"red",cursor:"pointer",width:60,height:18,opacity:0},{},{toolTip:tooltipTemplate_label1},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[0].style.width?1:0}),new go.Binding("margin","width",function(t){return 60==t||80==t||100==t||120==t?new go.Margin(-10,0,0,180):void 0}),new go.Binding("fill","tags",function(t){return t[0].style.fill}),new go.Binding("stroke","tags",function(t){return t[0].style.stroke})),GO(go.Shape,"RoundedRectangle",{name:"entity_label2",margin:new go.Margin(2,0,0,190),fill:"red",cursor:"pointer",width:60,height:18,opacity:0},{toolTip:tooltipTemplate_label2},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[1].style.width?1:0}),new go.Binding("fill","tags",function(t){return t[1].style.fill}),new go.Binding("stroke","tags",function(t){return t[1].style.stroke})),GO(go.Shape,"RoundedRectangle",{name:"entity_label3",margin:new go.Margin(2,0,0,180),fill:"red",cursor:"pointer",width:60,height:18,opacity:0},{toolTip:tooltipTemplate_label3},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[2].style.width?1:0}),new go.Binding("fill","tags",function(t){return t[2].style.fill}),new go.Binding("stroke","tags",function(t){return t[2].style.stroke})),GO(go.TextBlock,{name:"entity_label_text1",text:"",cursor:"pointer",font:"9px sans-serif",opacity:0,stroke:"#fff",margin:new go.Margin(-60,0,0,180)},{toolTip:tooltipTemplate_label1},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[0].style.width?1:0}),new go.Binding("text","tags",function(t){return 8<strlen(t[0].text)?t[0].text.slice(0,4)+"...":t[0].text}),new go.Binding("stroke","tags",function(t){return t[0].style.font_color})),GO(go.TextBlock,{name:"entity_label_text_x1",text:"X",cursor:"pointer",font:"9px sans-serif",opacity:0,stroke:"#fff",margin:new go.Margin(-18,0,0,225)},{click:function(){delete_lable(1)}},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[0].style.width?1:0})),GO(go.TextBlock,{name:"entity_label_text2",text:"",cursor:"pointer",opacity:0,stroke:"#333",font:"9px sans-serif",margin:new go.Margin(8,0,0,190)},{toolTip:tooltipTemplate_label2},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[1].style.width?1:0}),new go.Binding("text","tags",function(t){return 8<strlen(t[1].text)?t[1].text.slice(0,4)+"...":t[1].text}),new go.Binding("stroke","tags",function(t){return t[1].style.font_color})),GO(go.TextBlock,{name:"entity_label_text_x2",text:"X",font:"9px sans-serif",cursor:"pointer",opacity:0,stroke:"#fff",margin:new go.Margin(-17,0,0,230)},{click:function(){delete_lable(2)}},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[1].style.width?1:0})),GO(go.TextBlock,{name:"entity_label_text3",text:"",cursor:"pointer",font:"9px sans-serif",opacity:0,stroke:"#333",margin:new go.Margin(6,0,0,190)},{toolTip:tooltipTemplate_label3},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[2].style.width?1:0}),new go.Binding("text","tags",function(t){return 8<strlen(t[2].text)?t[2].text.slice(0,4)+"...":t[2].text}),new go.Binding("stroke","tags",function(t){return t[2].style.font_color})),GO(go.TextBlock,{name:"entity_label_text_x3",text:"X",font:"9px sans-serif",cursor:"pointer",opacity:0,stroke:"#fff",margin:new go.Margin(-17,0,0,230)},{click:function(){delete_lable(3)}},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[2].style.width?1:0})),{selectionAdorned:!1})}function mlm_circular_node_template(){return GO(go.Node,"Vertical",new go.Binding("visible"),new go.Binding("isSelected"),new go.Binding("isLayoutPositioned"),{layerName:"Foreground",doubleClick:function(){send_newGraph("属性")}},new go.Binding("visible","isHidden"),{toolTip:tooltipTemplate},GO(go.Panel,"vertical",{},GO(go.Panel,"Vertical",{margin:new go.Margin(16,0,0,0),portId:""},GO(go.Picture,{name:"icon_enetity",source:"./img/tree/open.svg",margin:new go.Margin(0,0,0,0),visible:!1},{click:function(t,e){var n=e.part.data;if(1==n.isExpanded_top){var i=e.part;return myDiagram.commandHandler.expandTree(i),void myDiagram.model.setDataProperty(n,"isExpanded_top",0)}var o=0;linkArray.map(function(t){t.to==n.key&&(o=1)}),1!=n.isExpand&&3!=n.isExpand||0!=o?(e=e.part,myDiagram.startTransaction("CollapseExpandTree"),myDiagram.commandHandler.collapseTree(e),myDiagram.model.setDataProperty(n,"isExpanded_top",1),myDiagram.commitTransaction("CollapseExpandTree")):postmessageToParent({event_name:"拓展节点",nodeArray:n,layout:layout,graph_id:graph_id,direction:1})}},new go.Binding("visible",function(e){var n=0;return linkArray.map(function(t){t.to==e.key&&(n=1)}),(1==e.isExpand||3==e.isExpand)&&0===n}),new go.Binding("source","",function(e){var n=0;return linkArray.map(function(t){t.to==e.key&&(n=1)}),0!==e.isExpanded_top&&(1===e.isExpanded_top||0==n)?"./img/tree/open.svg":"./img/tree/close.svg"})),GO(go.Shape,"Ellipse",{name:"node_shape",stroke:"#006ADF",fill:"#006ADF",width:60,cursor:"pointer",height:60,strokeWidth:5},{toolTip:tooltipTemplate},new go.Binding("fill","d_fill",function(t){return""==t?"#006ADF":t}),new go.Binding("stroke","d_stroke"),new go.Binding("width"),new go.Binding("height")),GO(go.Picture,{name:"node_icon",source:"./img/account.svg",margin:new go.Margin(-40,0,0,0),opacity:1},new go.Binding("source","icon",geoFunc),new go.Binding("width","width",function(t){return.6*t}),new go.Binding("height","height",function(t){return.5*t}),new go.Binding("margin","height",function(t){return new go.Margin(.78*-t,0,0,0)})),GO(go.Panel,"Auto",{margin:new go.Margin(16,0,0,0),portId:""},GO(go.Picture,{name:"icon_enetity",source:"./img/tree/open.svg",visible:!1},{click:function(t,e){var n=e.part.data;if(1==n.isExpanded_bottom){var i=e.part;return myDiagram.commandHandler.expandTree(i),void myDiagram.model.setDataProperty(n,"isExpanded_bottom",0)}var o=0;linkArray.map(function(t){t.from==n.key&&(o=1)}),2!=n.isExpand&&3!=n.isExpand||0!=o?(e=e.part,myDiagram.model.setDataProperty(n,"isExpanded_bottom",1),myDiagram.startTransaction("CollapseExpandTree"),myDiagram.commandHandler.collapseTree(e),myDiagram.commitTransaction("CollapseExpandTree")):postmessageToParent({event_name:"拓展节点",nodeArray:n,layout:layout,graph_id:graph_id,direction:2})}},new go.Binding("visible",function(t){return 2==t.isExpand||3==t.isExpand}),new go.Binding("source","",function(e){var n=0;return linkArray.map(function(t){t.from==e.key&&(n=1)}),0!==e.isExpanded_bottom&&(1===e.isExpanded_bottom||0==n)?"./img/tree/open.svg":"./img/tree/close.svg"}))),GO(go.Panel,"Auto",{name:"node_text"},new go.Binding("margin","width",function(t){}),GO(go.Shape,"Rectangle",{fill:null,stroke:null,margin:new go.Margin(5,0,0,0)},new go.Binding("fill","isSelected",function(t){return t?"#FFC106":null}).ofObject("")),GO(go.TextBlock,{margin:6,stroke:"#333"},new go.Binding("text","text",function(t){return t}),new go.Binding("stroke","isSelected",function(t){return t?"#fff":"#333"}).ofObject(""))))),{selectionAdornmentTemplate:GO(go.Adornment,"Auto",GO(go.Shape,"RoundedRectangle",{width:100,height:130,fill:null,stroke:null,strokeWidth:5,margin:new go.Margin(0,0,0,0)}),GO(go.Placeholder))})}function square_node_template(){return GO(go.Node,"Vertical",new go.Binding("visible"),new go.Binding("isSelected"),new go.Binding("isLayoutPositioned"),{visible:!0,cursor:"pointer",zOrder:2,locationObjectName:"SHAPE",locationSpot:go.Spot.MiddleLeft,layerName:"Foreground"},new go.Binding("zOrder","isSelected",function(t,e){return t?3:2}).ofObject(""),new go.Binding("location","loc",function(t,e){return 1==e.data.isLocking?(e.isLayoutPositioned=!1,e.part.movable=!1,new go.Point(e.data.lock.x,e.data.lock.y)):new go.Point.parse(t)}).makeTwoWay(go.Point.stringify),{mouseEnter:function(t,e){var n;!e.isSelected&&graph_tool.nodesSelectCount()<1&&(n=[],myDiagram.model.setDataProperty(e.data,"Cstate",!0),500<myDiagram.nodes.count||500<myDiagram.links.count||(myDiagram.links.each(function(t){t.fromNode&&t.fromNode.key==e.data.key||t.toNode&&t.toNode.key==e.data.key?(null!=t.findObject("edge_standard")&&(t.findObject("edge_standard").stroke=t.data.d_stroke),t.opacity=1,null!=t.fromNode&&-1==n.indexOf(t.fromNode.key)&&n.push(t.fromNode.key),null!=t.toNode&&-1==n.indexOf(t.toNode.key)&&n.push(t.toNode.key)):t.opacity=.1}),myDiagram.nodes.each(function(t){-(t.opacity=1)==n.indexOf(t.key)&&t.key!=e.key&&(t.opacity=.1)})))},mouseLeave:function(t,e){e.isSelected||(myDiagram.model.setDataProperty(e.data,"Cstate",!1),500<myDiagram.nodes.count||500<myDiagram.links.count||(myDiagram.links.each(function(t){(t.fromNode&&t.fromNode.key==e.data.key||t.toNode&&t.toNode.key==e.data.key)&&null!=t.findObject("edge_standard")&&null!=t.data.d_stroke&&(t.findObject("edge_standard").stroke=t.data.d_stroke),t.opacity=1}),myDiagram.nodes.each(function(t){t.opacity=1})))},doubleClick:function(){send_newGraph("属性")}},GO(go.Picture,{source:"./img/triangle.svg",margin:new go.Margin(0,0,2,0),opacity:0},new go.Binding("source","isExpand",function(t){return 1==t?"./img/triangle_in.svg":2==t?"./img/triangle_out.svg":3==t?"./img/triangle.svg":void 0}),new go.Binding("opacity","isExpand",function(t){return 0<t?1:0})),GO(go.Shape,{name:"SHAPEOUTSIDE",figure:"Rectangle",fill:null,stroke:"#FFC106",strokeWidth:5,portId:"",fromSpot:go.Spot.RightSide,toSpot:go.Spot.LeftSide,fromLinkable:!1,toLinkable:!1,width:40,opacity:0},new go.Binding("opacity","Cstate",function(t){return t&&.5}),new go.Binding("stroke","isSelected",function(t,e){return t?null:"#FFC106"}).ofObject("")),GO(go.Shape,{name:"SHAPE",figure:"Rectangle",stroke:null,strokeWidth:5,portId:"",fromSpot:go.Spot.RightSide,toSpot:go.Spot.LeftSide,fromLinkable:!1,toLinkable:!1,width:20,opacity:1},{toolTip:tooltipTemplate},new go.Binding("fill","d_fill"),new go.Binding("stroke","d_stroke")),GO(go.Panel,"Auto",GO(go.Shape,"RoundedRectangle",{fill:null,stroke:null,margin:3},new go.Binding("fill","isSelected",function(t){return t?"#FFC106":null}).ofObject(""),new go.Binding("opacity","text",function(t){return 0!=t.length})),GO(go.TextBlock,{font:"20px sans-serif",margin:3},new go.Binding("text","text"),new go.Binding("stroke","color"),new go.Binding("font","fontSize",function(t){return t+"px sans-serif"}),new go.Binding("stroke","isSelected",function(t,e){return t?"#FFF":e.part.data.color||"#000"}).ofObject(""))),GO(go.Panel,"Position",{width:100,height:100,margin:new go.Margin(-100,0,0,150)},GO(go.Shape,"RoundedRectangle",{name:"entity_label",fill:"red",cursor:"pointer",width:60,height:18,opacity:0,position:new go.Point(0,0)},{toolTip:tooltipTemplate_label1},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[0].style.width?1:0}),new go.Binding("fill","tags",function(t){return t[0].style.fill}),new go.Binding("stroke","tags",function(t){return t[0].style.stroke})),GO(go.TextBlock,{name:"entity_label_text1",text:"",cursor:"pointer",font:"9px sans-serif",stroke:"#fff",position:new go.Point(6,3)},{toolTip:tooltipTemplate_label1},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[0].style.width?1:0}),new go.Binding("text","tags",function(t){return 8<strlen(t[0].text)?t[0].text.slice(0,4)+"...":t[0].text}),new go.Binding("stroke","tags",function(t){return t[0].style.font_color})),GO(go.TextBlock,{name:"entity_label_text_x1",text:"X",font:"9px sans-serif",cursor:"pointer",opacity:0,stroke:"#fff",position:new go.Point(52,2)},{click:function(){delete_lable(1)}},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[0].style.width?1:0})),GO(go.Shape,"RoundedRectangle",{name:"entity_label2",fill:"red",cursor:"pointer",width:60,height:18,opacity:0,position:new go.Point(0,20)},{toolTip:tooltipTemplate_label2},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[1].style.width?1:0}),new go.Binding("fill","tags",function(t){return t[1].style.fill}),new go.Binding("stroke","tags",function(t){return t[1].style.stroke})),GO(go.TextBlock,{name:"entity_label_text2",text:"",cursor:"pointer",font:"9px sans-serif",opacity:0,stroke:"#333",position:new go.Point(6,22)},{toolTip:tooltipTemplate_label2},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[1].style.width?1:0}),new go.Binding("text","tags",function(t){return 8<strlen(t[1].text)?t[1].text.slice(0,4)+"...":t[1].text}),new go.Binding("stroke","tags",function(t){return t[1].style.font_color})),GO(go.TextBlock,{name:"entity_label_text_x2",text:"X",cursor:"pointer",font:"9px sans-serif",opacity:0,stroke:"#fff",position:new go.Point(52,22)},{click:function(){delete_lable(2)}},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[1].style.width?1:0})),GO(go.Shape,"RoundedRectangle",{name:"entity_label3",fill:"red",cursor:"pointer",width:60,height:18,opacity:0,position:new go.Point(0,40)},{toolTip:tooltipTemplate_label3},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[2].style.width?1:0}),new go.Binding("fill","tags",function(t){return t[2].style.fill}),new go.Binding("stroke","tags",function(t){return t[2].style.stroke})),GO(go.TextBlock,{name:"entity_label_text3",text:"",cursor:"pointer",font:"9px sans-serif",opacity:0,stroke:"#333",position:new go.Point(6,43)},{toolTip:tooltipTemplate_label3},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[2].style.width?1:0}),new go.Binding("text","tags",function(t){return 8<strlen(t[2].text)?t[2].text.slice(0,4)+"...":t[2].text}),new go.Binding("stroke","tags",function(t){return t[2].style.font_color})),GO(go.TextBlock,{name:"entity_label_text_x3",text:"X",cursor:"pointer",font:"9px sans-serif",opacity:0,stroke:"#fff",position:new go.Point(52,43)},{click:function(){delete_lable(3)}},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[2].style.width?1:0}))),GO(go.Picture,{name:"lock_icon",source:"./img/lock.svg",opacity:0},new go.Binding("opacity","isLocking")),{selectionAdornmentTemplate:GO(go.Adornment,"Auto",GO(go.Shape,"RoundedRectangle",{width:100,height:130,fill:null,stroke:null,strokeWidth:5,margin:new go.Margin(0,0,0,0)}),GO(go.Placeholder))})}function tree_square_node_template(){return GO(go.Node,"Auto",new go.Binding("visible"),new go.Binding("isSelected"),new go.Binding("isLayoutPositioned"),new go.Binding("location","loc",function(t,e){return 1==e.data.isLocking?(e.isLayoutPositioned=!1,e.part.movable=!1,new go.Point(e.data.lock.x,e.data.lock.y)):new go.Point.parse(t)}).makeTwoWay(go.Point.stringify),new go.Binding("zOrder","isSelected",function(t,e){return t?3:2}).ofObject(""),{layerName:"Foreground",zOrder:2,click:function(t,e){e.findObject("Shape_background").stroke="#fff",e.findObject("RoundedRectangle_background").strokeWidth=4,e.findObject("RoundedRectangle_background").stroke="#FFC106"},doubleClick:function(){send_newGraph("属性")},mouseEnter:function(t,e){!e.isSelected&&graph_tool.nodesSelectCount()<1&&("emphasize"==e.data.category?(e.findObject("Shape_background").stroke="#fff",e.findObject("Shape_background").fill=e.data.d_stroke,e.findObject("Shape_background").opacity=.05,e.findObject("RoundedRectangle_background").strokeWidth=4,e.findObject("RoundedRectangle_background").opacity=1):(e.findObject("Shape_background").stroke="#fff",e.findObject("Shape_background").fill=e.data.d_stroke,e.findObject("Shape_background").opacity=.05,e.findObject("RoundedRectangle_background").opacity=1,e.findObject("RoundedRectangle_background").width=233,e.findObject("RoundedRectangle_background").height=58,e.findObject("RoundedRectangle_background").stroke=e.data.d_stroke,e.findObject("RoundedRectangle_background").strokeWidth=1))},mouseLeave:function(t,e){e.isSelected||("emphasize"==e.data.category?(e.findObject("Shape_background").stroke=e.data.d_stroke,e.findObject("Shape_background").fill="#fff",e.findObject("Shape_background").opacity=1,e.findObject("RoundedRectangle_background").opacity=0):(e.findObject("Shape_background").stroke=e.data.d_stroke,e.findObject("Shape_background").fill="#fff",e.findObject("Shape_background").opacity=1,e.findObject("RoundedRectangle_background").opacity=0,e.findObject("RoundedRectangle_background").stroke="#FFC106",e.findObject("RoundedRectangle_background").strokeWidth=4,e.findObject("RoundedRectangle_background").width=238,e.findObject("RoundedRectangle_background").height=62))}},{toolTip:tooltipTemplate},GO(go.Picture,{source:"./img/ddqp.svg",margin:new go.Margin(0,20,2,0),opacity:0}),GO(go.Picture,{source:"./img/ddqp.svg",margin:new go.Margin(-41,0,2,0),opacity:0}),GO(go.Picture,{source:"./img/ddqp.svg",margin:new go.Margin(-41,-20,2,0),opacity:0}),GO(go.Shape,"RoundedRectangle",{name:"RoundedRectangle_background",stroke:"#FFC106",fill:null,width:238,cursor:"pointer",height:62,margin:new go.Margin(1,-30,1,1),strokeWidth:4},new go.Binding("opacity","isSelected",function(t){return t}).ofObject("")),GO(go.Shape,"RoundedRectangle",{name:"Shape_background",stroke:"#006ADF",fill:"#fff",width:233,cursor:"pointer",height:60,margin:new go.Margin(1,-30,1,1),strokeWidth:1},new go.Binding("stroke",function(t){return"emphasize"==t.category?"#EE0000":t.d_stroke})),GO(go.Shape,"RoundedRectangle",{name:"node_shape",stroke:null,fill:"#006ADF",width:56,cursor:"pointer",height:59,margin:new go.Margin(0,145,0,0)},new go.Binding("fill",function(t){return"emphasize"==t.category?"#EE0000":t.d_fill})),GO(go.Picture,{name:"icon_enetity",source:"./img/account.svg",margin:new go.Margin(0,145,0,0),opacity:1},new go.Binding("source","icon",geoFunc)),GO(go.TextBlock,{name:"icon_label",text:"1",cursor:"pointer",opacity:1,width:150,maxLines:1,stroke:"#EE0000",overflow:go.TextBlock.OverflowEllipsis,margin:new go.Margin(0,0,0,70)},new go.Binding("text","text"),new go.Binding("stroke","color")),GO(go.Picture,{name:"lock_icon",cursor:"pointer",source:"./img/lock.svg",opacity:0},new go.Binding("margin","width",function(t){return new go.Margin(-30,0,0,276)}),new go.Binding("opacity","isLocking")),GO(go.Panel,"Position",{width:120,height:100,margin:new go.Margin(40,240,0,0)},GO(go.Shape,"RoundedRectangle",{name:"entity_label",fill:"red",cursor:"pointer",width:60,height:18,opacity:0,position:new go.Point(15,0)},{toolTip:tooltipTemplate_label1},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[0].style.width?1:0}),new go.Binding("fill","tags",function(t){return t[0].style.fill}),new go.Binding("stroke","tags",function(t){return t[0].style.stroke})),GO(go.TextBlock,{name:"entity_label_text1",text:"",cursor:"pointer",font:"9px sans-serif",stroke:"#fff",position:new go.Point(21,3)},{toolTip:tooltipTemplate_label1},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[0].style.width?1:0}),new go.Binding("text","tags",function(t){return 8<strlen(t[0].text)?t[0].text.slice(0,4)+"...":t[0].text}),new go.Binding("stroke","tags",function(t){return t[0].style.font_color})),GO(go.TextBlock,{name:"entity_label_text_x1",text:"X",font:"9px sans-serif",cursor:"pointer",opacity:0,stroke:"#fff",position:new go.Point(67,2)},{click:function(){delete_lable(1)}},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[0].style.width?1:0})),GO(go.Shape,"RoundedRectangle",{name:"entity_label2",fill:"red",cursor:"pointer",width:60,height:18,opacity:0,position:new go.Point(15,20)},{toolTip:tooltipTemplate_label2},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[1].style.width?1:0}),new go.Binding("fill","tags",function(t){return t[1].style.fill}),new go.Binding("stroke","tags",function(t){return t[1].style.stroke})),GO(go.TextBlock,{name:"entity_label_text2",text:"",cursor:"pointer",font:"9px sans-serif",opacity:0,stroke:"#333",position:new go.Point(21,22)},{toolTip:tooltipTemplate_label2},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[1].style.width?1:0}),new go.Binding("text","tags",function(t){return 8<strlen(t[1].text)?t[1].text.slice(0,4)+"...":t[1].text}),new go.Binding("stroke","tags",function(t){return t[1].style.font_color})),GO(go.TextBlock,{name:"entity_label_text_x2",text:"X",cursor:"pointer",font:"9px sans-serif",opacity:0,stroke:"#fff",position:new go.Point(67,22)},{click:function(){delete_lable(2)}},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[1].style.width?1:0})),GO(go.Shape,"RoundedRectangle",{name:"entity_label3",fill:"red",cursor:"pointer",width:60,height:18,opacity:0,position:new go.Point(15,40)},{toolTip:tooltipTemplate_label3},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[2].style.width?1:0}),new go.Binding("fill","tags",function(t){return t[2].style.fill}),new go.Binding("stroke","tags",function(t){return t[2].style.stroke})),GO(go.TextBlock,{name:"entity_label_text3",text:"",cursor:"pointer",font:"9px sans-serif",opacity:0,stroke:"#333",position:new go.Point(21,43)},{toolTip:tooltipTemplate_label3},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[2].style.width?1:0}),new go.Binding("text","tags",function(t){return 8<strlen(t[2].text)?t[2].text.slice(0,4)+"...":t[2].text}),new go.Binding("stroke","tags",function(t){return t[2].style.font_color})),GO(go.TextBlock,{name:"entity_label_text_x3",text:"X",cursor:"pointer",font:"9px sans-serif",opacity:0,stroke:"#fff",position:new go.Point(67,43)},{click:function(){delete_lable(3)}},new go.Binding("opacity","tags",function(t){return 0!=labelisShow&&0<t[2].style.width?1:0}))),{selectionAdornmentTemplate:GO(go.Adornment,"Auto",GO(go.Shape,"RoundedRectangle",{width:100,height:130,fill:null,stroke:null,strokeWidth:5,margin:new go.Margin(0,0,0,0)}),GO(go.Placeholder))})}function group_node_coll_expand(){return GO(go.Group,"Vertical",new go.Binding("visible"),new go.Binding("isSelected"),new go.Binding("isLayoutPositioned"),{zOrder:3,layout:GO(go.TreeLayout,{isRealtime:!1,setsPortSpot:!1,setsChildPortSpot:!1})},{selectionObjectName:"BODY"},new go.Binding("isSubGraphExpanded",!1),GO(go.Panel,"Auto",{name:"BODY"},{click:function(t,e){e=e.part;e.isSubGraphExpanded?e.diagram.commandHandler.collapseSubGraph(e):e.diagram.commandHandler.expandSubGraph(e)}},GO(go.Shape,{fill:"#000",figure:"Ellipse",stroke:"red"},new go.Binding("fill","fill",function(t){return t||"#fff"})),GO(go.Panel,GO(go.Placeholder,{padding:15}),GO(go.Shape,"Ellipse",{width:50,height:50,fill:"#FFC106",stroke:"#FFF"},new go.Binding("visible","isSubGraphExpanded",function(t){return!t}).ofObject()),GO(go.Picture,{source:"./img/icon/group_.svg",margin:new go.Margin(10,0,0,10),opacity:1},new go.Binding("visible","isSubGraphExpanded",function(t){return!t}).ofObject()))),GO(go.TextBlock,new go.Binding("text","key")))}function group_node_basic(){return GO(go.Group,"Vertical",new go.Binding("visible"),new go.Binding("isSelected"),new go.Binding("isLayoutPositioned"),{selectionObjectName:"BODY"},new go.Binding("isSubGraphExpanded",!1),GO(go.Panel,"Auto",{name:"BODY"},{click:function(t,e){e=e.part;e.isSubGraphExpanded?e.diagram.commandHandler.collapseSubGraph(e):e.diagram.commandHandler.expandSubGraph(e)}},GO(go.Shape,{fill:"lavender",stroke:"red"},new go.Binding("figure","round",function(t){return t?"Ellipse":"Rectangle"})),GO(go.Panel,GO(go.Placeholder,{padding:15}),GO(go.Shape,"Ethernet",{width:50,height:50},new go.Binding("visible","isSubGraphExpanded",function(t){return!t}).ofObject()))),GO(go.TextBlock,new go.Binding("text","key")))}function bezier_link_template(){return GO(go.Link,go.Link.Bezier,new go.Binding("visible"),new go.Binding("isSelected"),new go.Binding("isLayoutPositioned"),{zOrder:1,cursor:"pointer",selectionAdornmentTemplate:linkSelectionAdornmentTemplate,fromEndSegmentLength:200,toEndSegmentLength:200,adjusting:go.Link.End},{doubleClick:function(){send_newGraph("属性")}},{toolTip:tooltipTemplate_link},new go.Binding("points").makeTwoWay(),GO(go.Shape,{opacity:1,isPanelMain:!0,stroke:"#BDBDBD",strokeWidth:1,fill:"#BDBDBD"},new go.Binding("fill","d_stroke"),new go.Binding("stroke","d_stroke"),new go.Binding("strokeWidth","width"),new go.Binding("pathPattern","patt",convertPathPatternToShape)),GO(go.Shape,{isPanelMain:!0,stroke:"white",strokeWidth:3,name:"PIPE",strokeDashArray:[10,10],opacity:0}),GO(go.Shape,{name:"link_arrow",toArrow:"standard",stroke:"#BDBDBD",fill:"#BDBDBD",visible:!1},new go.Binding("fill","d_stroke"),new go.Binding("stroke","d_stroke"),new go.Binding("strokeWidth","width"),new go.Binding("visible","direction",function(t){return 0!==t&&(1===t||2!==t&&(3===t||void 0))})),GO(go.Shape,{name:"link_arrow",fromArrow:"Backward",stroke:"#BDBDBD",fill:"#BDBDBD",visible:!1},new go.Binding("fill","d_stroke"),new go.Binding("stroke","d_stroke"),new go.Binding("strokeWidth","width"),new go.Binding("visible","direction",function(t){return 0!==t&&(1!==t&&(2===t||(3===t||void 0)))})),GO(go.Panel,"Auto",{name:"link_text"},GO(go.Shape,"RoundedRectangle",{fill:"#fff",stroke:null,margin:new go.Margin(0,0,0,0),opacity:.5}),GO(go.TextBlock,"",{segmentOffset:new go.Point(0,100),font:"20px sans-serif",margin:new go.Margin(1,2,1,2),stroke:"#fff"},new go.Binding("text","text",function(t){return t}),new go.Binding("margin","level",function(t){}),new go.Binding("stroke","isSelected",function(t){return t?"#fff":"#333"}).ofObject("")),GO(go.TextBlock,{text:"",margin:new go.Margin(15,0,0,0),visible:!1,stroke:"#fff"},new go.Binding("text","level",function(t){return"0"==t||"-1"==t?"":t}),new go.Binding("visible","level",function(t){return"0"!=t&&"-1"!=t&&null!=t}))))}function flow_link_template(){return GO(go.Link,new go.Binding("visible"),new go.Binding("isSelected"),new go.Binding("isLayoutPositioned"),{selectable:!0,cursor:"pointer",zOrder:1,selectionAdornmentTemplate:linkSelectionAdornmentTemplate},{doubleClick:function(){send_newGraph("属性")}},{toolTip:tooltipTemplate_link},GO(go.Shape,{name:"edge_standard",toArrow:"standard",stroke:"#BDBDBD",fill:"#BDBDBD",opacity:1},new go.Binding("stroke","d_stroke"),new go.Binding("strokeWidth","width"),new go.Binding("fill","d_stroke")),GO(go.Shape,{name:"link_arrow",toArrow:"standard",stroke:"#BDBDBD",fill:"#BDBDBD",visible:!0},new go.Binding("fill","d_stroke"),new go.Binding("strokeWidth","width"),new go.Binding("stroke","d_stroke"),new go.Binding("visible","direction",function(t){return 0!==t&&(1===t||2!==t&&(3===t||void 0))})),GO(go.Shape,{name:"link_arrow",fromArrow:"Backward",stroke:"#BDBDBD",fill:"#BDBDBD",visible:!1},new go.Binding("fill","d_stroke"),new go.Binding("strokeWidth","width"),new go.Binding("stroke","d_stroke"),new go.Binding("visible","direction",function(t){return 0!==t&&(1!==t&&(2===t||(3===t||void 0)))})),{},GO(go.Panel,"Auto",{name:"link_text"},GO(go.Shape,"RoundedRectangle",{fill:"#fff",stroke:null,margin:new go.Margin(5,0,0,0),opacity:.5}),GO(go.TextBlock,{font:"14px sans-serif"},new go.Binding("text","text",function(t){return t}),new go.Binding("stroke","isSelected",function(t){return t?"#fff":"#333"}).ofObject(""),new go.Binding("margin","level",function(t){return"0"==t||"-1"==t||null==t?new go.Margin(2,2,1,2):new go.Margin(-15,2,1,2)})),GO(go.TextBlock,{font:"14px sans-serif",text:""},new go.Binding("text","level",function(t){return"0"==t||"-1"==t?"":t}),new go.Binding("visible","level",function(t){return"0"==t||"-1"==t||null==t?0:1})),new go.Binding("visible","text",function(t){return""!==t})))}function dash_link_template(){return GO(go.Link,{cursor:"pointer",zOrder:1,selectionAdornmentTemplate:linkSelectionAdornmentTemplate},{doubleClick:function(){send_newGraph("属性")}},{toolTip:tooltipTemplate_link},GO(go.Shape,{name:"edge_standard",toArrow:"standard",strokeDashArray:[6,6,2,2],stroke:"#BDBDBD",fill:"#BDBDBD",opacity:1},new go.Binding("stroke","d_stroke"),new go.Binding("strokeWidth","width"),new go.Binding("fill","d_stroke")),GO(go.Shape,{name:"link_arrow",toArrow:"standard",stroke:"#BDBDBD",fill:"#BDBDBD",visible:!0},new go.Binding("fill","d_stroke"),new go.Binding("strokeWidth","width"),new go.Binding("stroke","d_stroke"),new go.Binding("visible","direction",function(t){return 0!==t&&(1===t||2!==t&&(3===t||void 0))})),GO(go.Shape,{name:"link_arrow",fromArrow:"Backward",stroke:"#BDBDBD",fill:"#BDBDBD",visible:!1},new go.Binding("fill","d_stroke"),new go.Binding("strokeWidth","width"),new go.Binding("stroke","d_stroke"),new go.Binding("visible","direction",function(t){return 0!==t&&(1!==t&&(2===t||(3===t||void 0)))})),{},GO(go.Panel,"Auto",{name:"link_text"},GO(go.Shape,"RoundedRectangle",{fill:"#fff",stroke:null,margin:new go.Margin(5,0,0,0),opacity:.5}),GO(go.TextBlock,{font:"14px sans-serif"},new go.Binding("text","text",function(t){return t}),new go.Binding("stroke","isSelected",function(t){return t?"#fff":"#333"}).ofObject(""),new go.Binding("margin","level",function(t){return"0"==t||"-1"==t||null==t?new go.Margin(2,2,1,2):new go.Margin(-15,2,1,2)})),GO(go.TextBlock,{font:"14px sans-serif",text:""},new go.Binding("text","level",function(t){return"0"==t||"-1"==t?"":t}),new go.Binding("visible","level",function(t){return"0"==t||"-1"==t||null==t?0:1})),new go.Binding("visible","text",function(t){return""!==t})))}function mlm_flow_link_template(){return GO(go.Link,go.Link.Orthogonal,new go.Binding("visible"),new go.Binding("isSelected"),new go.Binding("isLayoutPositioned"),{corner:5},{doubleClick:function(){send_newGraph("属性")}},{toolTip:tooltipTemplate_link},GO(go.Shape,{name:"edge_standard",segmentOffset:new go.Point(-64,0),toArrow:"standard",stroke:"#BDBDBD",strokeWidth:1,fill:"#BDBDBD",opacity:1},new go.Binding("stroke","d_stroke"),new go.Binding("fill","d_stroke")),GO(go.Shape,{isPanelMain:!0,stroke:null,strokeWidth:2,opacity:0},new go.Binding("stroke","isHighlighted",function(t){return t?"blue":null}).ofObject()),GO(go.Shape,{name:"edge_shape",opacity:1,isPanelMain:!0,stroke:"#BDBDBD",strokeWidth:1,fill:"#BDBDBD"},new go.Binding("stroke","d_stroke"),new go.Binding("strokeWidth","width"),new go.Binding("stroke","patt",function(t){return""===t?"":"transparent"}),new go.Binding("pathPattern","patt",convertPathPatternToShape)),GO(go.TextBlock,{name:"link_text",font:"10px helvetica, bold Arial, sans-serif",stroke:"#333",text:"",editable:!1,opacity:1,segmentIndex:3,segmentFraction:.3,margin:4},new go.Binding("text"),new go.Binding("font","font")))}function tree_flow_link_template(){return GO(go.Link,go.Link.Orthogonal,new go.Binding("visible"),new go.Binding("isSelected"),new go.Binding("isLayoutPositioned"),{zOrder:1,corner:5,adjusting:go.Link.End,selectionAdornmentTemplate:linkSelectionAdornmentTemplate},{doubleClick:function(){send_newGraph("属性")}},{toolTip:tooltipTemplate_link},GO(go.Shape,{name:"link_arrow",toArrow:"standard",stroke:"#BDBDBD",fill:"#BDBDBD",visible:!0},new go.Binding("fill","d_stroke"),new go.Binding("stroke","d_stroke"),new go.Binding("strokeWidth","width"),new go.Binding("visible","direction",function(t){return 0!==t&&(1===t||2!==t&&(3===t||void 0))})),GO(go.Shape,{name:"link_arrow",fromArrow:"Backward",stroke:"#BDBDBD",fill:"#BDBDBD",visible:!1},new go.Binding("fill","d_stroke"),new go.Binding("stroke","d_stroke"),new go.Binding("strokeWidth","width"),new go.Binding("visible","direction",function(t){return 0!==t&&(1!==t&&(2===t||(3===t||void 0)))})),GO(go.Shape,{isPanelMain:!0,stroke:null,strokeWidth:2,opacity:0},new go.Binding("stroke","isHighlighted",function(t){return t?"blue":null}).ofObject()),GO(go.Shape,{name:"edge_shape",opacity:1,isPanelMain:!0,stroke:"#BDBDBD",strokeWidth:1,fill:"#BDBDBD"},new go.Binding("fill","d_stroke"),new go.Binding("stroke","d_stroke"),new go.Binding("strokeWidth","width")),GO(go.TextBlock,{name:"link_text",textAlign:"center",font:"12px helvetica, bold Arial, sans-serif",stroke:"#333",text:"",editable:!1,opacity:1,segmentOrientation:go.Link.OrientUpleft},new go.Binding("text"),new go.Binding("font","font")))}go.Shape.defineFigureGenerator("Pentagon",function(t,e,n){var i=createPolygon(5),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<5;a++)r.add(new go.PathSegment(go.PathSegment.Line,i[a].x*e,i[a].y*n));return r.add(new go.PathSegment(go.PathSegment.Line,i[0].x*e,i[0].y*n).close()),freeArray(i),o.spot1=new go.Spot(.2,.22),o.spot2=new go.Spot(.8,.9),o}),go.Shape.defineFigureGenerator("Hexagon",function(t,e,n){var i=createPolygon(6),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<6;a++)r.add(new go.PathSegment(go.PathSegment.Line,i[a].x*e,i[a].y*n));return r.add(new go.PathSegment(go.PathSegment.Line,i[0].x*e,i[0].y*n).close()),freeArray(i),o.spot1=new go.Spot(.07,.25),o.spot2=new go.Spot(.93,.75),o}),go.Shape.defineFigureGenerator("Heptagon",function(t,e,n){var i=createPolygon(7),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<7;a++)r.add(new go.PathSegment(go.PathSegment.Line,i[a].x*e,i[a].y*n));return r.add(new go.PathSegment(go.PathSegment.Line,i[0].x*e,i[0].y*n).close()),freeArray(i),o.spot1=new go.Spot(.2,.15),o.spot2=new go.Spot(.8,.85),o}),go.Shape.defineFigureGenerator("Octagon",function(t,e,n){var i=createPolygon(8),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<8;a++)r.add(new go.PathSegment(go.PathSegment.Line,i[a].x*e,i[a].y*n));return r.add(new go.PathSegment(go.PathSegment.Line,i[0].x*e,i[0].y*n).close()),freeArray(i),o.spot1=new go.Spot(.15,.15),o.spot2=new go.Spot(.85,.85),o}),go.Shape.defineFigureGenerator("Nonagon",function(t,e,n){var i=createPolygon(9),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<9;a++)r.add(new go.PathSegment(go.PathSegment.Line,i[a].x*e,i[a].y*n));return r.add(new go.PathSegment(go.PathSegment.Line,i[0].x*e,i[0].y*n).close()),freeArray(i),o.spot1=new go.Spot(.17,.13),o.spot2=new go.Spot(.82,.82),o}),go.Shape.defineFigureGenerator("Decagon",function(t,e,n){var i=createPolygon(10),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<10;a++)r.add(new go.PathSegment(go.PathSegment.Line,i[a].x*e,i[a].y*n));return r.add(new go.PathSegment(go.PathSegment.Line,i[0].x*e,i[0].y*n).close()),freeArray(i),o.spot1=new go.Spot(.16,.16),o.spot2=new go.Spot(.84,.84),o}),go.Shape.defineFigureGenerator("Dodecagon",function(t,e,n){var i=createPolygon(12),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<12;a++)r.add(new go.PathSegment(go.PathSegment.Line,i[a].x*e,i[a].y*n));return r.add(new go.PathSegment(go.PathSegment.Line,i[0].x*e,i[0].y*n).close()),freeArray(i),o.spot1=new go.Spot(.16,.16),o.spot2=new go.Spot(.84,.84),o}),go.Shape.defineFigureGenerator("FivePointedStar",function(t,e,n){var i=createStar(5),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<10;a++)r.add(new go.PathSegment(go.PathSegment.Line,i[a].x*e,i[a].y*n));return r.add(new go.PathSegment(go.PathSegment.Line,i[0].x*e,i[0].y*n).close()),freeArray(i),o.spot1=new go.Spot(.266,.333),o.spot2=new go.Spot(.733,.733),o}),go.Shape.defineFigureGenerator("SixPointedStar",function(t,e,n){var i=createStar(6),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<12;a++)r.add(new go.PathSegment(go.PathSegment.Line,i[a].x*e,i[a].y*n));return r.add(new go.PathSegment(go.PathSegment.Line,i[0].x*e,i[0].y*n).close()),freeArray(i),o.spot1=new go.Spot(.17,.25),o.spot2=new go.Spot(.83,.75),o}),go.Shape.defineFigureGenerator("SevenPointedStar",function(t,e,n){var i=createStar(7),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<14;a++)r.add(new go.PathSegment(go.PathSegment.Line,i[a].x*e,i[a].y*n));return r.add(new go.PathSegment(go.PathSegment.Line,i[0].x*e,i[0].y*n).close()),freeArray(i),o.spot1=new go.Spot(.222,.277),o.spot2=new go.Spot(.777,.666),o}),go.Shape.defineFigureGenerator("EightPointedStar",function(t,e,n){var i=createStar(8),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<16;a++)r.add(new go.PathSegment(go.PathSegment.Line,i[a].x*e,i[a].y*n));return r.add(new go.PathSegment(go.PathSegment.Line,i[0].x*e,i[0].y*n).close()),freeArray(i),o.spot1=new go.Spot(.25,.25),o.spot2=new go.Spot(.75,.75),o}),go.Shape.defineFigureGenerator("NinePointedStar",function(t,e,n){var i=createStar(9),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<18;a++)r.add(new go.PathSegment(go.PathSegment.Line,i[a].x*e,i[a].y*n));return r.add(new go.PathSegment(go.PathSegment.Line,i[0].x*e,i[0].y*n).close()),freeArray(i),o.spot1=new go.Spot(.222,.277),o.spot2=new go.Spot(.777,.666),o}),go.Shape.defineFigureGenerator("TenPointedStar",function(t,e,n){var i=createStar(10),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<20;a++)r.add(new go.PathSegment(go.PathSegment.Line,i[a].x*e,i[a].y*n));return r.add(new go.PathSegment(go.PathSegment.Line,i[0].x*e,i[0].y*n).close()),freeArray(i),o.spot1=new go.Spot(.281,.261),o.spot2=new go.Spot(.723,.748),o}),go.Shape.defineFigureGenerator("FivePointedBurst",function(t,e,n){var i=createBurst(5),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<i.length;a+=3)r.add(new go.PathSegment(go.PathSegment.Bezier,i[a+2].x*e,i[a+2].y*n,i[a].x*e,i[a].y*n,i[a+1].x*e,i[a+1].y*n));return r.segments.last().close(),freeArray(i),o.spot1=new go.Spot(.222,.277),o.spot2=new go.Spot(.777,.777),o}),go.Shape.defineFigureGenerator("SixPointedBurst",function(t,e,n){var i=createBurst(6),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<i.length;a+=3)r.add(new go.PathSegment(go.PathSegment.Bezier,i[a+2].x*e,i[a+2].y*n,i[a].x*e,i[a].y*n,i[a+1].x*e,i[a+1].y*n));return r.segments.last().close(),freeArray(i),o.spot1=new go.Spot(.17,.222),o.spot2=new go.Spot(.833,.777),o}),go.Shape.defineFigureGenerator("SevenPointedBurst",function(t,e,n){var i=createBurst(7),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<i.length;a+=3)r.add(new go.PathSegment(go.PathSegment.Bezier,i[a+2].x*e,i[a+2].y*n,i[a].x*e,i[a].y*n,i[a+1].x*e,i[a+1].y*n));return r.segments.last().close(),freeArray(i),o.spot1=new go.Spot(.222,.222),o.spot2=new go.Spot(.777,.777),o}),go.Shape.defineFigureGenerator("EightPointedBurst",function(t,e,n){var i=createBurst(8),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<i.length;a+=3)r.add(new go.PathSegment(go.PathSegment.Bezier,i[a+2].x*e,i[a+2].y*n,i[a].x*e,i[a].y*n,i[a+1].x*e,i[a+1].y*n));return r.segments.last().close(),freeArray(i),o.spot1=new go.Spot(.222,.222),o.spot2=new go.Spot(.777,.777),o}),go.Shape.defineFigureGenerator("NinePointedBurst",function(t,e,n){var i=createBurst(9),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<i.length;a+=3)r.add(new go.PathSegment(go.PathSegment.Bezier,i[a+2].x*e,i[a+2].y*n,i[a].x*e,i[a].y*n,i[a+1].x*e,i[a+1].y*n));return r.segments.last().close(),freeArray(i),o.spot1=new go.Spot(.222,.222),o.spot2=new go.Spot(.777,.777),o}),go.Shape.defineFigureGenerator("TenPointedBurst",function(t,e,n){var i=createBurst(10),o=new go.Geometry,r=new go.PathFigure(i[0].x*e,i[0].y*n,!0);o.add(r);for(var a=1;a<i.length;a+=3)r.add(new go.PathSegment(go.PathSegment.Bezier,i[a+2].x*e,i[a+2].y*n,i[a].x*e,i[a].y*n,i[a+1].x*e,i[a+1].y*n));return r.segments.last().close(),freeArray(i),o.spot1=new go.Spot(.222,.222),o.spot2=new go.Spot(.777,.777),o}),go.Shape.setFigureParameter("FramedRectangle",0,new FigureParameter("ThicknessX",8)),go.Shape.setFigureParameter("FramedRectangle",1,new FigureParameter("ThicknessY",8)),go.Shape.defineFigureGenerator("FramedRectangle",function(t,e,n){var i=t?t.parameter1:NaN,o=t?t.parameter2:NaN;isNaN(i)&&(i=8),isNaN(o)&&(o=8);var r=new go.Geometry,t=new go.PathFigure(0,0,!0);return r.add(t),t.add(new go.PathSegment(go.PathSegment.Line,e,0)),t.add(new go.PathSegment(go.PathSegment.Line,e,n)),t.add(new go.PathSegment(go.PathSegment.Line,0,n).close()),i<e/2&&o<n/2&&(t.add(new go.PathSegment(go.PathSegment.Move,i,o)),t.add(new go.PathSegment(go.PathSegment.Line,i,n-o)),t.add(new go.PathSegment(go.PathSegment.Line,e-i,n-o)),t.add(new go.PathSegment(go.PathSegment.Line,e-i,o).close())),r.setSpots(0,0,1,1,i,o,-i,-o),r}),go.Shape.setFigureParameter("Ring",0,new FigureParameter("Thickness",8)),go.Shape.defineFigureGenerator("Ring",function(t,e,n){var i=t?t.parameter1:NaN;(isNaN(i)||i<0)&&(i=8);var o=e/2,r=new go.Geometry,t=new go.PathFigure(e,e/2,!0);r.add(t),t.add(new go.PathSegment(go.PathSegment.Arc,0,360,o,o,o,o).close());i=Math.max(o-i,0);return 0<i&&(t.add(new go.PathSegment(go.PathSegment.Move,e/2+i,e/2)),t.add(new go.PathSegment(go.PathSegment.Arc,0,-360,o,o,i,i).close())),r.spot1=GeneratorEllipseSpot1,r.spot2=GeneratorEllipseSpot2,r.defaultStretch=go.GraphObject.Uniform,r}),go.Shape.defineFigureGenerator("Cloud",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(.08034461*e,.1944299*n,!0).add(new go.PathSegment(go.PathSegment.Bezier,.2008615*e,.05349299*n,-.09239631*e,.07836421*n,.1406031*e,-.0542823*n)).add(new go.PathSegment(go.PathSegment.Bezier,.4338609*e,.074219*n,.2450511*e,-.00697547*n,.3776197*e,-.01112067*n)).add(new go.PathSegment(go.PathSegment.Bezier,.6558228*e,.07004196*n,.4539471*e,0,.6066018*e,-.02526587*n)).add(new go.PathSegment(go.PathSegment.Bezier,.8921095*e,.08370865*n,.6914277*e,-.01904177*n,.8921095*e,-.01220843*n)).add(new go.PathSegment(go.PathSegment.Bezier,.9147671*e,.3194596*n,1.036446*e,.04105738*n,1.020377*e,.3022052*n)).add(new go.PathSegment(go.PathSegment.Bezier,.9082935*e,.562044*n,1.04448*e,.360238*n,.992256*e,.5219009*n)).add(new go.PathSegment(go.PathSegment.Bezier,.9212406*e,.8217117*n,1.032337*e,.5771781*n,1.018411*e,.8120651*n)).add(new go.PathSegment(go.PathSegment.Bezier,.7592566*e,.9156953*n,1.028411*e,.9571472*n,.8556702*e,1.052487*n)).add(new go.PathSegment(go.PathSegment.Bezier,.5101666*e,.9310455*n,.7431877*e,1.009325*n,.5624123*e,1.021761*n)).add(new go.PathSegment(go.PathSegment.Bezier,.2609328*e,.9344623*n,.4820677*e,1.031761*n,.3030112*e,1.002796*n)).add(new go.PathSegment(go.PathSegment.Bezier,.08034461*e,.870098*n,.2329994*e,1.01518*n,.03213784*e,1.01518*n)).add(new go.PathSegment(go.PathSegment.Bezier,.06829292*e,.6545475*n,-.02812061*e,.9032597*n,-.01205169*e,.6835638*n)).add(new go.PathSegment(go.PathSegment.Bezier,.06427569*e,.4265613*n,-.01812061*e,.6089503*n,-.00606892*e,.4555777*n)).add(new go.PathSegment(go.PathSegment.Bezier,.08034461*e,.1944299*n,-.01606892*e,.3892545*n,-.01205169*e,.1944299*n))).setSpots(.1,.1,.9,.9)}),go.Shape.defineFigureGenerator("StopSign",function(t,e,n){var i=1/(Math.SQRT2+2);return(new go.Geometry).add(new go.PathFigure(i*e,0,!0).add(new go.PathSegment(go.PathSegment.Line,(1-i)*e,0)).add(new go.PathSegment(go.PathSegment.Line,e,i*n)).add(new go.PathSegment(go.PathSegment.Line,e,(1-i)*n)).add(new go.PathSegment(go.PathSegment.Line,(1-i)*e,n)).add(new go.PathSegment(go.PathSegment.Line,i*e,n)).add(new go.PathSegment(go.PathSegment.Line,0,(1-i)*n)).add(new go.PathSegment(go.PathSegment.Line,0,i*n).close())).setSpots(i/2,i/2,1-i/2,1-i/2)}),go.Shape.setFigureParameter("Pie",0,new FigureParameter("Start",0,-360,360)),go.Shape.setFigureParameter("Pie",1,new FigureParameter("Sweep",315,-360,360)),go.Shape.defineFigureGenerator("Pie",function(t,e,n){var i=t?t.parameter1:NaN,t=t?t.parameter2:NaN;isNaN(i)&&(i=0),isNaN(t)&&(t=315);i%=360;i<0&&(i+=360);t%=360,n=Math.min(e,n)/2;return(new go.Geometry).add(new go.PathFigure(n,n).add(new go.PathSegment(go.PathSegment.Arc,i,t,n,n,n,n).close()))}),go.Shape.defineFigureGenerator("PiePiece",function(t,e,n){var i=KAPPA/Math.SQRT2*.5,o=Math.SQRT2/2,r=1-Math.SQRT2/2;return(new go.Geometry).add(new go.PathFigure(e,n,!0).add(new go.PathSegment(go.PathSegment.Bezier,o*e,r*n,e,(1-i)*n,(o+i)*e,(r+i)*n)).add(new go.PathSegment(go.PathSegment.Line,0,n).close()))}),go.Shape.setFigureParameter("ThickCross",0,new FigureParameter("Thickness",30)),go.Shape.defineFigureGenerator("ThickCross",function(t,e,n){var i=t?t.parameter1:NaN;(isNaN(i)||i<0)&&(i=30);var o=Math.min(i,e)/2,t=e/2,i=n/2;return(new go.Geometry).add(new go.PathFigure(t-o,0,!0).add(new go.PathSegment(go.PathSegment.Line,t+o,0)).add(new go.PathSegment(go.PathSegment.Line,t+o,i-o)).add(new go.PathSegment(go.PathSegment.Line,e,i-o)).add(new go.PathSegment(go.PathSegment.Line,e,i+o)).add(new go.PathSegment(go.PathSegment.Line,t+o,i+o)).add(new go.PathSegment(go.PathSegment.Line,t+o,n)).add(new go.PathSegment(go.PathSegment.Line,t-o,n)).add(new go.PathSegment(go.PathSegment.Line,t-o,i+o)).add(new go.PathSegment(go.PathSegment.Line,0,i+o)).add(new go.PathSegment(go.PathSegment.Line,0,i-o)).add(new go.PathSegment(go.PathSegment.Line,t-o,i-o).close()))}),go.Shape.setFigureParameter("ThinCross",0,new FigureParameter("Thickness",10)),go.Shape.defineFigureGenerator("ThinCross",function(t,e,n){var i=t?t.parameter1:NaN;(isNaN(i)||i<0)&&(i=10);var o=Math.min(i,e)/2,t=e/2,i=n/2;return(new go.Geometry).add(new go.PathFigure(t-o,0,!0).add(new go.PathSegment(go.PathSegment.Line,t+o,0)).add(new go.PathSegment(go.PathSegment.Line,t+o,i-o)).add(new go.PathSegment(go.PathSegment.Line,e,i-o)).add(new go.PathSegment(go.PathSegment.Line,e,i+o)).add(new go.PathSegment(go.PathSegment.Line,t+o,i+o)).add(new go.PathSegment(go.PathSegment.Line,t+o,n)).add(new go.PathSegment(go.PathSegment.Line,t-o,n)).add(new go.PathSegment(go.PathSegment.Line,t-o,i+o)).add(new go.PathSegment(go.PathSegment.Line,0,i+o)).add(new go.PathSegment(go.PathSegment.Line,0,i-o)).add(new go.PathSegment(go.PathSegment.Line,t-o,i-o).close()))}),go.Shape.setFigureParameter("ThickX",0,new FigureParameter("Thickness",30)),go.Shape.defineFigureGenerator("ThickX",function(t,e,n){var i=t?t.parameter1:NaN;if((isNaN(i)||i<0)&&(i=30),0===e||0===n)return(s=new go.Geometry(go.Geometry.Rectangle)).startX=0,s.startY=0,s.endX=e,s.endY=n,s;var o=e/2,r=n/2,a=Math.atan2(n,e),t=i-Math.min(Math.cos(a)*i/2,o),a=i-Math.min(Math.sin(a)*i/2,r),s=new go.Geometry,i=new go.PathFigure(t,0,!0);return s.add(i),i.add(new go.PathSegment(go.PathSegment.Line,o,.2*n)),i.add(new go.PathSegment(go.PathSegment.Line,e-t,0)),i.add(new go.PathSegment(go.PathSegment.Line,e,a)),i.add(new go.PathSegment(go.PathSegment.Line,.8*e,r)),i.add(new go.PathSegment(go.PathSegment.Line,e,n-a)),i.add(new go.PathSegment(go.PathSegment.Line,e-t,n)),i.add(new go.PathSegment(go.PathSegment.Line,o,.8*n)),i.add(new go.PathSegment(go.PathSegment.Line,t,n)),i.add(new go.PathSegment(go.PathSegment.Line,0,n-a)),i.add(new go.PathSegment(go.PathSegment.Line,.2*e,r)),i.add(new go.PathSegment(go.PathSegment.Line,0,a).close()),s}),go.Shape.setFigureParameter("ThinX",0,new FigureParameter("Thickness",10)),go.Shape.defineFigureGenerator("ThinX",function(t,e,n){var i=t?t.parameter1:NaN;(isNaN(i)||i<0)&&(i=10);t=new go.Geometry,i=new go.PathFigure(.1*e,0,!0);return t.add(i),i.add(new go.PathSegment(go.PathSegment.Line,.5*e,.4*n)),i.add(new go.PathSegment(go.PathSegment.Line,.9*e,0)),i.add(new go.PathSegment(go.PathSegment.Line,e,.1*n)),i.add(new go.PathSegment(go.PathSegment.Line,.6*e,.5*n)),i.add(new go.PathSegment(go.PathSegment.Line,e,.9*n)),i.add(new go.PathSegment(go.PathSegment.Line,.9*e,n)),i.add(new go.PathSegment(go.PathSegment.Line,.5*e,.6*n)),i.add(new go.PathSegment(go.PathSegment.Line,.1*e,n)),i.add(new go.PathSegment(go.PathSegment.Line,0,.9*n)),i.add(new go.PathSegment(go.PathSegment.Line,.4*e,.5*n)),i.add(new go.PathSegment(go.PathSegment.Line,0,.1*n).close()),t}),go.Shape.setFigureParameter("SquareIBeam",0,new FigureParameter("BeamWidth",.2,.1,.9)),go.Shape.defineFigureGenerator("SquareIBeam",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.2);var o=new go.Geometry,t=new go.PathFigure(0,0,!0);return o.add(t),t.add(new go.PathSegment(go.PathSegment.Line,e,0)),t.add(new go.PathSegment(go.PathSegment.Line,e,i*n)),t.add(new go.PathSegment(go.PathSegment.Line,(.5+i/2)*e,i*n)),t.add(new go.PathSegment(go.PathSegment.Line,(.5+i/2)*e,(1-i)*n)),t.add(new go.PathSegment(go.PathSegment.Line,e,(1-i)*n)),t.add(new go.PathSegment(go.PathSegment.Line,e,n)),t.add(new go.PathSegment(go.PathSegment.Line,0,n)),t.add(new go.PathSegment(go.PathSegment.Line,0,(1-i)*n)),t.add(new go.PathSegment(go.PathSegment.Line,(.5-i/2)*e,(1-i)*n)),t.add(new go.PathSegment(go.PathSegment.Line,(.5-i/2)*e,i*n)),t.add(new go.PathSegment(go.PathSegment.Line,0,i*n).close()),o}),go.Shape.setFigureParameter("RoundedIBeam",0,new FigureParameter("Curviness",.5,.05,.65)),go.Shape.defineFigureGenerator("RoundedIBeam",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.5);var o=new go.Geometry,t=new go.PathFigure(0,0,!0);return o.add(t),t.add(new go.PathSegment(go.PathSegment.Line,e,0)),t.add(new go.PathSegment(go.PathSegment.Bezier,e,n,Math.abs(1-i)*e,.25*n,Math.abs(1-i)*e,.75*n)),t.add(new go.PathSegment(go.PathSegment.Line,0,n)),t.add(new go.PathSegment(go.PathSegment.Bezier,0,0,i*e,.75*n,i*e,.25*n).close()),o}),go.Shape.defineFigureGenerator("HalfEllipse",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Bezier,e,.5*n,KAPPA*e,0,e,(.5-KAPPA/2)*n)).add(new go.PathSegment(go.PathSegment.Bezier,0,n,e,(.5+KAPPA/2)*n,KAPPA*e,n).close())).setSpots(0,.156,.844,.844)}),go.Shape.defineFigureGenerator("Crescent",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Bezier,0,n,e,0,e,n)).add(new go.PathSegment(go.PathSegment.Bezier,0,0,.5*e,.75*n,.5*e,.25*n).close())).setSpots(.311,.266,.744,.744)}),go.Shape.defineFigureGenerator("Heart",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(.5*e,n,!0).add(new go.PathSegment(go.PathSegment.Bezier,0,.3*n,.1*e,.8*n,0,.5*n)).add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.3*n,0,0,.45*e,0)).add(new go.PathSegment(go.PathSegment.Bezier,e,.3*n,.55*e,0,e,0)).add(new go.PathSegment(go.PathSegment.Bezier,.5*e,n,e,.5*n,.9*e,.8*n).close())).setSpots(.14,.29,.86,.78)}),go.Shape.defineFigureGenerator("Spade",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(.5*e,0,!0).add(new go.PathSegment(go.PathSegment.Line,.51*e,.01*n)).add(new go.PathSegment(go.PathSegment.Bezier,e,.5*n,.6*e,.2*n,e,.25*n)).add(new go.PathSegment(go.PathSegment.Bezier,.55*e,.7*n,e,.8*n,.6*e,.8*n)).add(new go.PathSegment(go.PathSegment.Bezier,.75*e,n,.5*e,.75*n,.55*e,.95*n)).add(new go.PathSegment(go.PathSegment.Line,.25*e,n)).add(new go.PathSegment(go.PathSegment.Bezier,.45*e,.7*n,.45*e,.95*n,.5*e,.75*n)).add(new go.PathSegment(go.PathSegment.Bezier,0,.5*n,.4*e,.8*n,0,.8*n)).add(new go.PathSegment(go.PathSegment.Bezier,.49*e,.01*n,0,.25*n,.4*e,.2*n).close())).setSpots(.14,.26,.86,.78)}),go.Shape.defineFigureGenerator("Club",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.4*e,.6*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Bezier,.15*e,n,.5*e,.75*n,.45*e,.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,.85*e,n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.6*e,.6*n,.55*e,.95*n,.5*e,.75*n));var r=.2*KAPPA;return o.add(new go.PathSegment(go.PathSegment.Bezier,.8*e,.7*n,.6*e,(.5+r)*n,(.5-r+.3)*e,.7*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,+e,.5*n,(.5+r+.3)*e,.7*n,+e,(.5+r)*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.8*e,.3*n,+e,(.5-r)*n,(.5+r+.3)*e,.3*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.65*e,.36771243*n,(.5-r+.3)*e,.3*n,.65*e,(.5-r-.02)*n)),r=.2*KAPPA,o.add(new go.PathSegment(go.PathSegment.Bezier,.7*e,.2*n,(.5+r)*e,(.7-.3)*n,.7*e,(.5+r-.3)*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0*n,.7*e,(.5-r-.3)*n,(.5+r)*e,0*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.3*e,.2*n,(.5-r)*e,0*n,.3*e,(.5-r-.3)*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,(.5-r)*e,(.7-.3)*n,.3*e,(.5+r-.3)*n,(.5-r)*e,(.7-.3)*n)),r=.2*KAPPA,o.add(new go.PathSegment(go.PathSegment.Bezier,.2*e,.3*n,.35*e,(.5-r-.02)*n,(.5+r-.3)*e,.3*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,0*e,.5*n,(.5-r-.3)*e,.3*n,0*e,(.5-r)*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.2*e,.7*n,0*e,(.5+r)*n,(.5-r-.3)*e,.7*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.4*e,.6*n,(.5+r-.3)*e,.7*n,(.7-.3)*e,(.5+r)*n).close()),i.setSpots(.06,.33,.93,.68),i}),go.Shape.defineFigureGenerator("YinYang",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.5*e,0,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Arc,270,180,.5*e,.5*e,.5*e,.5*e)),o.add(new go.PathSegment(go.PathSegment.Arc,90,-180,.5*e,.75*e,.25*e,.25*e)),o.add(new go.PathSegment(go.PathSegment.Arc,90,180,.5*e,.25*e,.25*e,.25*e));return o.add(new go.PathSegment(go.PathSegment.Move,.6*e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Arc,0,-360,.5*e,.25*n,.1*e,.1*e).close()),o=new go.PathFigure(.5*e,0,!1),i.add(o),o.add(new go.PathSegment(go.PathSegment.Arc,270,-180,.5*e,.5*e,.5*e,.5*e)),o=new go.PathFigure(.6*e,.75*n,!0),i.add(o),o.add(new go.PathSegment(go.PathSegment.Arc,0,360,.5*e,.75*n,.1*e,.1*e).close()),i.defaultStretch=go.GraphObject.Uniform,i}),go.Shape.defineFigureGenerator("Peace",function(t,e,n){var i=.8535533905932737,o=.5*e,r=.5*n;return(new go.Geometry).add(new go.PathFigure(o,0,!1).add(new go.PathSegment(go.PathSegment.Arc,270,360,o,r,o,r)).add(new go.PathSegment(go.PathSegment.Line,o,n)).add(new go.PathSegment(go.PathSegment.Move,o,r)).add(new go.PathSegment(go.PathSegment.Line,(1-i)*e,i*n)).add(new go.PathSegment(go.PathSegment.Move,o,r)).add(new go.PathSegment(go.PathSegment.Line,i*e,i*n)))}),go.Shape.defineFigureGenerator("NotAllowed",function(t,e,n){var i=new go.Geometry,o=.5*KAPPA,r=new go.PathFigure(.5*e,0*n);i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,0*e,.5*n,(.5-o)*e,0*n,0*e,(.5-o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,+n,0*e,(.5+o)*n,(.5-o)*e,+n)),r.add(new go.PathSegment(go.PathSegment.Bezier,+e,.5*n,(.5+o)*e,+n,+e,(.5+o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0*n,+e,(.5-o)*n,(.5+o)*e,0*n)),o=.4*KAPPA;var a=tempPoint(),s=tempPoint(),h=tempPoint(),u=tempPoint();breakUpBezier(.5,.5-.4,.5+o,.5-.4,.9,.5-o,.9,.5,.42,a,s,h,u,u);var l=tempPoint(),d=tempPoint(),c=tempPoint();breakUpBezier(.5,.5-.4,.5+o,.5-.4,.9,.5-o,.9,.5,.58,u,u,c,l,d);var g=tempPoint(),f=tempPoint(),p=tempPoint();breakUpBezier(.5,.9,.5-o,.9,.5-.4,.5+o,.5-.4,.5,.42,g,f,p,u,u);var m=tempPoint(),y=tempPoint(),v=tempPoint();return breakUpBezier(.5,.9,.5-o,.9,.5-.4,.5+o,.5-.4,.5,.58,u,u,v,m,y),r.add(new go.PathSegment(go.PathSegment.Move,v.x*e,v.y*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,(.5-.4)*e,.5*n,m.x*e,m.y*n,y.x*e,y.y*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,(.5-.4)*n,(.5-.4)*e,(.5-o)*n,(.5-o)*e,(.5-.4)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,h.x*e,h.y*n,a.x*e,a.y*n,s.x*e,s.y*n)),r.add(new go.PathSegment(go.PathSegment.Line,v.x*e,v.y*n).close()),r.add(new go.PathSegment(go.PathSegment.Move,p.x*e,p.y*n)),r.add(new go.PathSegment(go.PathSegment.Line,c.x*e,c.y*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.9*e,.5*n,l.x*e,l.y*n,d.x*e,d.y*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.9*n,.9*e,(.5+o)*n,(.5+o)*e,.9*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,p.x*e,p.y*n,g.x*e,g.y*n,f.x*e,f.y*n).close()),freePoint(a),freePoint(s),freePoint(h),freePoint(u),freePoint(l),freePoint(d),freePoint(c),freePoint(g),freePoint(f),freePoint(p),freePoint(m),freePoint(y),freePoint(v),i.defaultStretch=go.GraphObject.Uniform,i}),go.Shape.defineFigureGenerator("Fragile",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Line,.25*e,0)).add(new go.PathSegment(go.PathSegment.Line,.2*e,.15*n)).add(new go.PathSegment(go.PathSegment.Line,.3*e,.25*n)).add(new go.PathSegment(go.PathSegment.Line,.29*e,.33*n)).add(new go.PathSegment(go.PathSegment.Line,.35*e,.25*n)).add(new go.PathSegment(go.PathSegment.Line,.3*e,.15*n)).add(new go.PathSegment(go.PathSegment.Line,.4*e,0)).add(new go.PathSegment(go.PathSegment.Line,e,0)).add(new go.PathSegment(go.PathSegment.Bezier,.55*e,.5*n,e,.25*n,.75*e,.5*n)).add(new go.PathSegment(go.PathSegment.Line,.55*e,.9*n)).add(new go.PathSegment(go.PathSegment.Line,.7*e,.9*n)).add(new go.PathSegment(go.PathSegment.Line,.7*e,n)).add(new go.PathSegment(go.PathSegment.Line,.3*e,n)).add(new go.PathSegment(go.PathSegment.Line,.3*e,.9*n)).add(new go.PathSegment(go.PathSegment.Line,.45*e,.9*n)).add(new go.PathSegment(go.PathSegment.Line,.45*e,.5*n)).add(new go.PathSegment(go.PathSegment.Bezier,0,0,.25*e,.5*n,0,.25*n).close()))}),go.Shape.setFigureParameter("HourGlass",0,new FigureParameter("Thickness",30)),go.Shape.defineFigureGenerator("HourGlass",function(t,e,n){var i=t?t.parameter1:NaN;(isNaN(i)||i<0)&&(i=30),e<i&&(i=e);t=(e-i)/2,i=t+i;return(new go.Geometry).add(new go.PathFigure(i,.5*n).add(new go.PathSegment(go.PathSegment.Line,e,n)).add(new go.PathSegment(go.PathSegment.Line,0,n)).add(new go.PathSegment(go.PathSegment.Line,t,.5*n)).add(new go.PathSegment(go.PathSegment.Line,0,0)).add(new go.PathSegment(go.PathSegment.Line,e,0).close()))}),go.Shape.defineFigureGenerator("Lightning",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,.55*n).add(new go.PathSegment(go.PathSegment.Line,.6*e,0)).add(new go.PathSegment(go.PathSegment.Line,.3*e,.45*n)).add(new go.PathSegment(go.PathSegment.Line,e,.45*n)).add(new go.PathSegment(go.PathSegment.Line,.4*e,n)).add(new go.PathSegment(go.PathSegment.Line,.7*e,.55*n).close()))}),go.Shape.defineFigureGenerator("GenderMale",function(t,e,n){var i=new go.Geometry,o=.4*KAPPA,r=tempPoint(),a=tempPoint(),s=tempPoint(),h=tempPoint(),u=new go.PathFigure((.5-.4)*e,.5*n,!1);i.add(u),u.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,(.5-.4)*n,(.5-.4)*e,(.5-o)*n,(.5-o)*e,(.5-.4)*n)),breakUpBezier(.5,.5-.4,.5+o,.5-.4,.9,.5-o,.9,.5,.44,s,h,a,r,r),u.add(new go.PathSegment(go.PathSegment.Bezier,a.x*e,a.y*n,s.x*e,s.y*n,h.x*e,h.y*n));var l=tempPointAt(a.x,a.y);breakUpBezier(.5,.5-.4,.5+o,.5-.4,.9,.5-o,.9,.5,.56,r,r,a,s,h);var d=tempPointAt(a.x,a.y);u.add(new go.PathSegment(go.PathSegment.Line,(.1*l.x+.855)*e,.1*l.y*n)),u.add(new go.PathSegment(go.PathSegment.Line,.85*e,.1*l.y*n)),u.add(new go.PathSegment(go.PathSegment.Line,.85*e,0)),u.add(new go.PathSegment(go.PathSegment.Line,e,0)),u.add(new go.PathSegment(go.PathSegment.Line,e,.15*n)),u.add(new go.PathSegment(go.PathSegment.Line,(.1*d.x+.9)*e,.15*n)),u.add(new go.PathSegment(go.PathSegment.Line,(.1*d.x+.9)*e,(.1*d.y+.05*.9)*n)),u.add(new go.PathSegment(go.PathSegment.Line,d.x*e,d.y*n)),u.add(new go.PathSegment(go.PathSegment.Bezier,.9*e,.5*n,s.x*e,s.y*n,h.x*e,h.y*n)),u.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.9*n,.9*e,(.5+o)*n,(.5+o)*e,.9*n)),u.add(new go.PathSegment(go.PathSegment.Bezier,(.5-.4)*e,.5*n,(.5-o)*e,.9*n,(.5-.4)*e,(.5+o)*n)),o=.35*KAPPA;u=new go.PathFigure(.5*e,(.5-.35)*n,!1);i.add(u),u.add(new go.PathSegment(go.PathSegment.Bezier,(.5-.35)*e,.5*n,(.5-o)*e,(.5-.35)*n,(.5-.35)*e,(.5-o)*n)),u.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.85*n,(.5-.35)*e,(.5+o)*n,(.5-o)*e,.85*n)),u.add(new go.PathSegment(go.PathSegment.Bezier,.85*e,.5*n,(.5+o)*e,.85*n,.85*e,(.5+o)*n)),u.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,(.5-.35)*n,.85*e,(.5-o)*n,(.5+o)*e,(.5-.35)*n));n=new go.PathFigure((.5-.35)*e,.5*n,!1);return i.add(n),freePoint(r),freePoint(a),freePoint(s),freePoint(h),freePoint(l),freePoint(d),i.spot1=new go.Spot(.202,.257),i.spot2=new go.Spot(.792,.739),i.defaultStretch=go.GraphObject.Uniform,i}),go.Shape.defineFigureGenerator("GenderFemale",function(t,e,n){var i,o=new go.Geometry,r=.375*KAPPA,a=new go.PathFigure(.525*e,.75*n,!1);o.add(a),a.add(new go.PathSegment(go.PathSegment.Bezier,.875*e,.375*n,(.5+r)*e,.75*n,.875*e,(.5+r-.125)*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0*n,.875*e,(.5-r-.125)*n,(.5+r)*e,0*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.125*e,.375*n,(.5-r)*e,0*n,.125*e,(.5-r-.125)*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.475*e,.75*n,.125*e,(.5+r-.125)*n,(.5-r)*e,.75*n)),a.add(new go.PathSegment(go.PathSegment.Line,.475*e,.85*n)),a.add(new go.PathSegment(go.PathSegment.Line,.425*e,.85*n)),a.add(new go.PathSegment(go.PathSegment.Line,.425*e,.9*n)),a.add(new go.PathSegment(go.PathSegment.Line,.475*e,.9*n)),a.add(new go.PathSegment(go.PathSegment.Line,.475*e,n)),a.add(new go.PathSegment(go.PathSegment.Line,.525*e,n)),a.add(new go.PathSegment(go.PathSegment.Line,.525*e,.9*n)),a.add(new go.PathSegment(go.PathSegment.Line,.575*e,.9*n)),a.add(new go.PathSegment(go.PathSegment.Line,.575*e,.85*n)),a.add(new go.PathSegment(go.PathSegment.Line,.525*e,.85*n).close()),i=-.125,r=.325*KAPPA;a=new go.PathFigure(.825*e,.375*n,!1);o.add(a),a.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.7*n,.825*e,(.5+r+i)*n,(.5+r)*e,.7*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.175*e,.375*n,(.5-r)*e,.7*n,.175*e,(.5+r+i)*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,(.175+i)*n,.175*e,(.5-r+i)*n,(.5-r)*e,(.175+i)*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.825*e,.375*n,(.5+r)*e,(.175+i)*n,.825*e,(.5-r+i)*n));a=new go.PathFigure(.525*e,.7*n,!1);return o.add(a),o.spot1=new go.Spot(.232,.136),o.spot2=new go.Spot(.682,.611),o.defaultStretch=go.GraphObject.Uniform,o}),go.Shape.defineFigureGenerator("LogicImplies",function(t,e,n){t=t?t.parameter1:NaN;return isNaN(t)&&(t=.2),(new go.Geometry).add(new go.PathFigure((1-t)*e,0,!1).add(new go.PathSegment(go.PathSegment.Line,e,.5*n)).add(new go.PathSegment(go.PathSegment.Line,(1-t)*e,n)).add(new go.PathSegment(go.PathSegment.Move,0,.5*n)).add(new go.PathSegment(go.PathSegment.Line,e,.5*n))).setSpots(0,0,.8,.5)}),go.Shape.defineFigureGenerator("LogicIff",function(t,e,n){t=t?t.parameter1:NaN;return isNaN(t)&&(t=.2),(new go.Geometry).add(new go.PathFigure((1-t)*e,0,!1).add(new go.PathSegment(go.PathSegment.Line,e,.5*n)).add(new go.PathSegment(go.PathSegment.Line,(1-t)*e,n)).add(new go.PathSegment(go.PathSegment.Move,0,.5*n)).add(new go.PathSegment(go.PathSegment.Line,e,.5*n)).add(new go.PathSegment(go.PathSegment.Move,t*e,0)).add(new go.PathSegment(go.PathSegment.Line,0,.5*n)).add(new go.PathSegment(go.PathSegment.Line,t*e,n))).setSpots(.2,0,.8,.5)}),go.Shape.defineFigureGenerator("LogicNot",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Line,e,0)).add(new go.PathSegment(go.PathSegment.Line,e,n)))}),go.Shape.defineFigureGenerator("LogicAnd",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,n,!1).add(new go.PathSegment(go.PathSegment.Line,.5*e,0)).add(new go.PathSegment(go.PathSegment.Line,e,n))).setSpots(.25,.5,.75,1)}),go.Shape.defineFigureGenerator("LogicOr",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Line,.5*e,n)).add(new go.PathSegment(go.PathSegment.Line,e,0))).setSpots(.219,0,.78,.409)}),go.Shape.defineFigureGenerator("LogicXor",function(t,e,n){n=(new go.Geometry).add(new go.PathFigure(.5*e,0,!1).add(new go.PathSegment(go.PathSegment.Line,.5*e,n)).add(new go.PathSegment(go.PathSegment.Move,0,.5*n)).add(new go.PathSegment(go.PathSegment.Line,e,.5*n)).add(new go.PathSegment(go.PathSegment.Arc,0,360,.5*e,.5*n,.5*e,.5*n)));return n.defaultStretch=go.GraphObject.Uniform,n}),go.Shape.defineFigureGenerator("LogicTruth",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Line,e,0)).add(new go.PathSegment(go.PathSegment.Move,.5*e,0)).add(new go.PathSegment(go.PathSegment.Line,.5*e,n)))}),go.Shape.defineFigureGenerator("LogicFalsity",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,n,!1).add(new go.PathSegment(go.PathSegment.Line,e,n)).add(new go.PathSegment(go.PathSegment.Move,.5*e,n)).add(new go.PathSegment(go.PathSegment.Line,.5*e,0)))}),go.Shape.defineFigureGenerator("LogicThereExists",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Line,e,0)).add(new go.PathSegment(go.PathSegment.Line,e,.5*n)).add(new go.PathSegment(go.PathSegment.Line,0,.5*n)).add(new go.PathSegment(go.PathSegment.Move,e,.5*n)).add(new go.PathSegment(go.PathSegment.Line,e,n)).add(new go.PathSegment(go.PathSegment.Line,0,n)))}),go.Shape.defineFigureGenerator("LogicForAll",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Line,.5*e,n)).add(new go.PathSegment(go.PathSegment.Line,e,0)).add(new go.PathSegment(go.PathSegment.Move,.25*e,.5*n)).add(new go.PathSegment(go.PathSegment.Line,.75*e,.5*n))).setSpots(.25,0,.75,.5)}),go.Shape.defineFigureGenerator("LogicIsDefinedAs",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,0,!1).add(new go.PathSegment(go.PathSegment.Line,e,0)).add(new go.PathSegment(go.PathSegment.Move,0,.5*n)).add(new go.PathSegment(go.PathSegment.Line,e,.5*n)).add(new go.PathSegment(go.PathSegment.Move,0,n)).add(new go.PathSegment(go.PathSegment.Line,e,n))).setSpots(.01,.01,.99,.49)}),go.Shape.defineFigureGenerator("LogicIntersect",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,n,!1).add(new go.PathSegment(go.PathSegment.Line,0,.5*n)).add(new go.PathSegment(go.PathSegment.Arc,180,180,.5*e,.5*n,.5*e,.5*n)).add(new go.PathSegment(go.PathSegment.Line,e,n))).setSpots(0,.5,1,1)}),go.Shape.defineFigureGenerator("LogicUnion",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(e,0,!1).add(new go.PathSegment(go.PathSegment.Line,e,.5*n)).add(new go.PathSegment(go.PathSegment.Arc,0,180,.5*e,.5*n,.5*e,.5*n)).add(new go.PathSegment(go.PathSegment.Line,0,0))).setSpots(0,0,1,.5)}),go.Shape.setFigureParameter("Arrow",0,new FigureParameter("ArrowheadWidth",.3,.01,.99)),go.Shape.setFigureParameter("Arrow",1,new FigureParameter("TailHeight",.3,.01,.99)),go.Shape.defineFigureGenerator("Arrow",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.3);var o=t?t.parameter2:NaN;isNaN(o)&&(o=.3);var r=(1-i)*e,a=(.5-o/2)*n,t=(.5+o/2)*n,i=new go.Geometry,o=new go.PathFigure(0,a,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,r,a)),o.add(new go.PathSegment(go.PathSegment.Line,r,0)),o.add(new go.PathSegment(go.PathSegment.Line,r,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,r,n)),o.add(new go.PathSegment(go.PathSegment.Line,r,t)),o.add(new go.PathSegment(go.PathSegment.Line,0,t).close()),i.spot1=new go.Spot(0,a/n);e=getIntersection(0,t/n,1,t/n,r/e,1,1,.5,tempPoint());return i.spot2=new go.Spot(e.x,e.y),freePoint(e),i}),go.Shape.setFigureParameter("Arrow2",0,new FigureParameter("ArrowheadWidth",30)),go.Shape.setFigureParameter("Arrow2",0,new FigureParameter("TailHeight",30)),go.Shape.defineFigureGenerator("Arrow2",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=30),e<i&&(i=e);var o=t?t.parameter2:NaN;isNaN(o)&&(o=30);var r=e-i,a=(n-(o=Math.min(o,n/2)))/2,t=a+o,i=new go.Geometry,o=new go.PathFigure(0,a,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,r,a)),o.add(new go.PathSegment(go.PathSegment.Line,r,0)),o.add(new go.PathSegment(go.PathSegment.Line,r,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,r,n)),o.add(new go.PathSegment(go.PathSegment.Line,r,t)),o.add(new go.PathSegment(go.PathSegment.Line,0,t).close()),i.spot1=new go.Spot(0,a/n);e=getIntersection(0,t/n,1,t/n,r/e,1,1,.5,tempPoint());return i.spot2=new go.Spot(e.x,e.y),freePoint(e),i}),go.Shape.defineFigureGenerator("Chevron",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.5*n).close()),i}),go.Shape.defineFigureGenerator("DoubleArrow",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.3*e,.214*n)),o.add(new go.PathSegment(go.PathSegment.Line,.3*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,+e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.3*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.3*e,.786*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,+n).close()),i}),go.Shape.setFigureParameter("DoubleEndArrow",0,new FigureParameter("ConnecterHeight",.3,.01,.99)),go.Shape.defineFigureGenerator("DoubleEndArrow",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.3);var o=(.5-i/2)*n,r=(.5+i/2)*n,t=new go.Geometry,i=new go.PathFigure(e,.5*n,!0);t.add(i),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,n)),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,r)),i.add(new go.PathSegment(go.PathSegment.Line,.3*e,r)),i.add(new go.PathSegment(go.PathSegment.Line,.3*e,n)),i.add(new go.PathSegment(go.PathSegment.Line,0,.5*n)),i.add(new go.PathSegment(go.PathSegment.Line,.3*e,0)),i.add(new go.PathSegment(go.PathSegment.Line,.3*e,o)),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,o)),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,0).close());o=getIntersection(0,.5,.3,0,0,o/n,.1,o/n,tempPoint());return t.spot1=new go.Spot(o.x,o.y),o=getIntersection(.7,1,1,.5,0,r/n,1,r/n,o),t.spot2=new go.Spot(o.x,o.y),freePoint(o),t}),go.Shape.setFigureParameter("DoubleEndArrow2",0,new FigureParameter("ConnecterHeight",40)),go.Shape.setFigureParameter("DoubleEndArrow2",1,new FigureParameter("ArrowHeight",100)),go.Shape.defineFigureGenerator("DoubleEndArrow2",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=40);var o=t?t.parameter2:NaN;isNaN(o)&&(o=100);var r=(n-i)/2,a=r+i,s=(n-o)/2,t=s+o;(n<i||n<o)&&(t=i<o?(a=(r=(n-(i=i*n/o))/2)+i,s=0,n):(s=r=0,a=n));o=new go.Geometry,i=new go.PathFigure(e,.5*n,!0);o.add(i),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,t)),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,a)),i.add(new go.PathSegment(go.PathSegment.Line,.3*e,a)),i.add(new go.PathSegment(go.PathSegment.Line,.3*e,t)),i.add(new go.PathSegment(go.PathSegment.Line,0,.5*n)),i.add(new go.PathSegment(go.PathSegment.Line,.3*e,s)),i.add(new go.PathSegment(go.PathSegment.Line,.3*e,r)),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,r)),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,s).close());r=getIntersection(0,.5,.3,s/n,0,r/n,1,r/n,tempPoint());return o.spot1=new go.Spot(r.x,r.y),r=getIntersection(.7,t/n,1,.5,0,a/n,1,a/n,r),o.spot2=new go.Spot(r.x,r.y),freePoint(r),o}),go.Shape.setFigureParameter("IBeamArrow",0,new FigureParameter("ConnectorHeight",.7,.51,.97)),go.Shape.defineFigureGenerator("IBeamArrow",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.3);var o=(.5-i/2)*n,r=(.5+i/2)*n,t=new go.Geometry,i=new go.PathFigure(e,.5*n,!0);t.add(i),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,n)),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,r)),i.add(new go.PathSegment(go.PathSegment.Line,.2*e,r)),i.add(new go.PathSegment(go.PathSegment.Line,.2*e,n)),i.add(new go.PathSegment(go.PathSegment.Line,0,n)),i.add(new go.PathSegment(go.PathSegment.Line,0,0)),i.add(new go.PathSegment(go.PathSegment.Line,.2*e,0)),i.add(new go.PathSegment(go.PathSegment.Line,.2*e,o)),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,o)),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,0).close()),t.spot1=new go.Spot(0,o/n);n=getIntersection(.7,1,1,.5,0,r/n,1,r/n,tempPoint());return t.spot2=new go.Spot(n.x,n.y),freePoint(n),t}),go.Shape.setFigureParameter("IBeamArrow2",0,new FigureParameter("ConnectorHeight",40)),go.Shape.setFigureParameter("IBeamArrow2",1,new FigureParameter("BeamArrowHeight",100)),go.Shape.defineFigureGenerator("IBeamArrow2",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=40);var o=t?t.parameter2:NaN;isNaN(o)&&(o=100);var r=(n-i)/2,a=r+i,s=(n-o)/2,t=s+o;(n<i||n<o)&&(t=i<o?(a=(r=(n-(i=i*n/o))/2)+i,s=0,n):(s=r=0,a=n));o=new go.Geometry,i=new go.PathFigure(e,.5*n,!0);o.add(i),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,t)),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,a)),i.add(new go.PathSegment(go.PathSegment.Line,.2*e,a)),i.add(new go.PathSegment(go.PathSegment.Line,.2*e,t)),i.add(new go.PathSegment(go.PathSegment.Line,0,t)),i.add(new go.PathSegment(go.PathSegment.Line,0,s)),i.add(new go.PathSegment(go.PathSegment.Line,.2*e,s)),i.add(new go.PathSegment(go.PathSegment.Line,.2*e,r)),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,r)),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,s).close()),o.spot1=new go.Spot(0,r/n);n=getIntersection(.7,t/n,1,.5,0,a/n,1,a/n,tempPoint());return o.spot2=new go.Spot(n.x,n.y),freePoint(n),o}),go.Shape.setFigureParameter("Pointer",0,new FigureParameter("BackPoint",.1,0,.2)),go.Shape.defineFigureGenerator("Pointer",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.1);var o=new go.Geometry,t=new go.PathFigure(e,.5*n,!0);o.add(t),t.add(new go.PathSegment(go.PathSegment.Line,0,n)),t.add(new go.PathSegment(go.PathSegment.Line,i*e,.5*n)),t.add(new go.PathSegment(go.PathSegment.Line,0,0).close()),o.spot1=new go.Spot(i,.35);i=getIntersection(.2,.65,1,.65,0,1,1,.5,tempPoint());return o.spot2=new go.Spot(i.x,i.y),freePoint(i),o}),go.Shape.setFigureParameter("RoundedPointer",0,new FigureParameter("RoundedEdge",.3,0,.5)),go.Shape.defineFigureGenerator("RoundedPointer",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.3);var o=new go.Geometry,t=new go.PathFigure(e,.5*n,!0);o.add(t),t.add(new go.PathSegment(go.PathSegment.Line,0,n)),t.add(new go.PathSegment(go.PathSegment.Bezier,0,0,i*e,.75*n,i*e,.25*n).close()),o.spot1=new go.Spot(i,.35);i=getIntersection(0,.65,1,.65,0,1,1,.5,tempPoint());return o.spot2=new go.Spot(i.x,i.y),freePoint(i),o}),go.Shape.setFigureParameter("SplitEndArrow",0,new FigureParameter("TailHeight",.4,.01,.99)),go.Shape.defineFigureGenerator("SplitEndArrow",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.4);var o=(.5-i/2)*n,r=(.5+i/2)*n,t=new go.Geometry,i=new go.PathFigure(e,.5*n,!0);t.add(i),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,n)),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,r)),i.add(new go.PathSegment(go.PathSegment.Line,0,r)),i.add(new go.PathSegment(go.PathSegment.Line,.2*e,.5*n)),i.add(new go.PathSegment(go.PathSegment.Line,0,o)),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,o)),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,0).close()),t.spot1=new go.Spot(.2,.3);n=getIntersection(.7,1,1,.5,0,r/n,1,r/n,tempPoint());return t.spot2=new go.Spot(n.x,n.y),freePoint(n),t}),go.Shape.setFigureParameter("SplitEndArrow2",0,new FigureParameter("TailThickness",50)),go.Shape.defineFigureGenerator("SplitEndArrow2",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=50);var o=(n-i)/2,r=o+i;n<i&&(o=0,r=n);t=new go.Geometry,i=new go.PathFigure(e,.5*n,!0);t.add(i),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,n)),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,r)),i.add(new go.PathSegment(go.PathSegment.Line,0,r)),i.add(new go.PathSegment(go.PathSegment.Line,.2*e,.5*n)),i.add(new go.PathSegment(go.PathSegment.Line,0,o)),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,o)),i.add(new go.PathSegment(go.PathSegment.Line,.7*e,0).close()),t.spot1=new go.Spot(.2,o/n);n=getIntersection(.7,1,1,.5,0,r/n,1,r/n,tempPoint());return t.spot2=new go.Spot(n.x,n.y),freePoint(n),t}),go.Shape.setFigureParameter("SquareArrow",0,new FigureParameter("ArrowPoint",.7,.2,.9)),go.Shape.defineFigureGenerator("SquareArrow",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.7);var o=new go.Geometry,t=new go.PathFigure(e,.5*n,!0);return o.add(t),t.add(new go.PathSegment(go.PathSegment.Line,i*e,n)),t.add(new go.PathSegment(go.PathSegment.Line,0,n)),t.add(new go.PathSegment(go.PathSegment.Line,0,0)),t.add(new go.PathSegment(go.PathSegment.Line,i*e,0).close()),o.spot1=go.Spot.TopLeft,o.spot2=new go.Spot(i,1),o}),go.Shape.defineFigureGenerator("Cone1",function(t,e,n){var i=new go.Geometry,o=.5*KAPPA,r=.1*KAPPA,a=new go.PathFigure(0,.9*n,!0);return i.add(a),a.add(new go.PathSegment(go.PathSegment.Line,.5*e,0)),a.add(new go.PathSegment(go.PathSegment.Line,e,.9*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,n,e,(.9+r)*n,(.5+o)*e,n)),a.add(new go.PathSegment(go.PathSegment.Bezier,0,.9*n,(.5-o)*e,n,0,(.9+r)*n).close()),i.spot1=new go.Spot(.25,.5),i.spot2=new go.Spot(.75,.97),i}),go.Shape.defineFigureGenerator("Cone2",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,.9*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Bezier,e,.9*n,(1-.85/.9)*e,n,.85/.9*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,0,.9*n).close());o=new go.PathFigure(0,.9*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Bezier,e,.9*n,(1-.85/.9)*e,.8*n,.85/.9*e,.8*n)),i.spot1=new go.Spot(.25,.5),i.spot2=new go.Spot(.75,.82),i}),go.Shape.defineFigureGenerator("Cube1",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.5*e,n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,.85*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.15*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,0,.15*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.85*n).close());o=new go.PathFigure(.5*e,n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.3*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.15*n)),o.add(new go.PathSegment(go.PathSegment.Move,.5*e,.3*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.15*n)),i.spot1=new go.Spot(0,.3),i.spot2=new go.Spot(.5,.85),i}),go.Shape.defineFigureGenerator("Cube2",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,.3*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Line,.7*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.7*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.3*e,0).close());o=new go.PathFigure(0,.3*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.7*e,.3*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Move,.7*e,.3*n)),o.add(new go.PathSegment(go.PathSegment.Line,.7*e,n)),i.spot1=new go.Spot(0,.3),i.spot2=new go.Spot(.7,1),i}),go.Shape.defineFigureGenerator("Cylinder1",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=5),i=Math.min(i,n/3);var o=new go.Geometry,r=.5*KAPPA,t=new go.PathFigure(0,i,!0);o.add(t),t.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0,0,KAPPA*i,(.5-r)*e,0)),t.add(new go.PathSegment(go.PathSegment.Bezier,+e,i,(.5+r)*e,0,+e,KAPPA*i)),t.add(new go.PathSegment(go.PathSegment.Line,e,n-i)),t.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,+n,+e,n-KAPPA*i,(.5+r)*e,+n)),t.add(new go.PathSegment(go.PathSegment.Bezier,0,n-i,(.5-r)*e,+n,0,n-KAPPA*i)),t.add(new go.PathSegment(go.PathSegment.Line,0,i));t=new go.PathFigure(e,i,!1);return o.add(t),t.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,2*i,+e,2*i-KAPPA*i,(.5+r)*e,2*i)),t.add(new go.PathSegment(go.PathSegment.Bezier,0,i,(.5-r)*e,2*i,0,2*i-KAPPA*i)),o.spot1=new go.Spot(0,0,0,2*i),o.spot2=new go.Spot(1,1),o}),go.Shape.defineFigureGenerator("Cylinder2",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=5),i=Math.min(i,n/3);var o=new go.Geometry,r=.5*KAPPA,t=new go.PathFigure(0,n-i,!0);o.add(t),t.add(new go.PathSegment(go.PathSegment.Line,0,i)),t.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0,0,KAPPA*i,(.5-r)*e,0)),t.add(new go.PathSegment(go.PathSegment.Bezier,e,i,(.5+r)*e,0,e,KAPPA*i)),t.add(new go.PathSegment(go.PathSegment.Line,e,n-i)),t.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,n,e,n-KAPPA*i,(.5+r)*e,n)),t.add(new go.PathSegment(go.PathSegment.Bezier,0,n-i,(.5-r)*e,n,0,n-KAPPA*i));t=new go.PathFigure(0,n-i,!1);return o.add(t),t.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,n-2*i,0,n-i-KAPPA*i,(.5-r)*e,n-2*i)),t.add(new go.PathSegment(go.PathSegment.Bezier,e,n-i,(.5+r)*e,n-2*i,e,n-i-KAPPA*i)),o.spot1=new go.Spot(0,0),o.spot2=new go.Spot(1,1,0,-2*i),o}),go.Shape.defineFigureGenerator("Cylinder3",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=5),i=Math.min(i,e/3);var o=new go.Geometry,r=.5*KAPPA,t=new go.PathFigure(i,0,!0);o.add(t),t.add(new go.PathSegment(go.PathSegment.Line,e-i,0)),t.add(new go.PathSegment(go.PathSegment.Bezier,e,.5*n,e-KAPPA*i,0,e,(.5-r)*n)),t.add(new go.PathSegment(go.PathSegment.Bezier,e-i,n,e,(.5+r)*n,e-KAPPA*i,n)),t.add(new go.PathSegment(go.PathSegment.Line,i,n)),t.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*n,KAPPA*i,n,0,(.5+r)*n)),t.add(new go.PathSegment(go.PathSegment.Bezier,i,0,0,(.5-r)*n,KAPPA*i,0));t=new go.PathFigure(i,0,!1);return o.add(t),t.add(new go.PathSegment(go.PathSegment.Bezier,2*i,.5*n,i+KAPPA*i,0,2*i,(.5-r)*n)),t.add(new go.PathSegment(go.PathSegment.Bezier,i,n,2*i,(.5+r)*n,i+KAPPA*i,n)),o.spot1=new go.Spot(0,0,2*i,0),o.spot2=new go.Spot(1,1),o}),go.Shape.defineFigureGenerator("Cylinder4",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=5),i=Math.min(i,e/3);var o=new go.Geometry,r=.5*KAPPA,t=new go.PathFigure(e-i,0,!0);o.add(t),t.add(new go.PathSegment(go.PathSegment.Bezier,e,.5*n,e-KAPPA*i,0,e,(.5-r)*n)),t.add(new go.PathSegment(go.PathSegment.Bezier,e-i,n,e,(.5+r)*n,e-KAPPA*i,n)),t.add(new go.PathSegment(go.PathSegment.Line,i,n)),t.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*n,KAPPA*i,n,0,(.5+r)*n)),t.add(new go.PathSegment(go.PathSegment.Bezier,i,0,0,(.5-r)*n,KAPPA*i,0)),t.add(new go.PathSegment(go.PathSegment.Line,e-i,0));t=new go.PathFigure(e-i,0,!1);return o.add(t),t.add(new go.PathSegment(go.PathSegment.Bezier,e-2*i,.5*n,e-i-KAPPA*i,0,e-2*i,(.5-r)*n)),t.add(new go.PathSegment(go.PathSegment.Bezier,e-i,n,e-2*i,(.5+r)*n,e-i-KAPPA*i,n)),o.spot1=new go.Spot(0,0),o.spot2=new go.Spot(1,1,-2*i,0),o}),go.Shape.defineFigureGenerator("Prism1",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.25*e,.25*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n).close());o=new go.PathFigure(.25*e,.25*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,n)),i.spot1=new go.Spot(.408,.172),i.spot2=new go.Spot(.833,.662),i}),go.Shape.defineFigureGenerator("Prism2",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,.25*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n).close());o=new go.PathFigure(0,n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.25*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Move,0,.25*n)),o.add(new go.PathSegment(go.PathSegment.Line,.25*e,.5*n)),i.spot1=new go.Spot(.25,.5),i.spot2=new go.Spot(.75,.75),i}),go.Shape.defineFigureGenerator("Pyramid1",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.5*e,0,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.75*n).close());o=new go.PathFigure(.5*e,0,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,n)),i.spot1=new go.Spot(.25,.367),i.spot2=new go.Spot(.75,.875),i}),go.Shape.defineFigureGenerator("Pyramid2",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.5*e,0,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,.85*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.85*n).close());o=new go.PathFigure(.5*e,0,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.7*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.85*n)),o.add(new go.PathSegment(go.PathSegment.Move,.5*e,.7*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.85*n)),i.spot1=new go.Spot(.25,.367),i.spot2=new go.Spot(.75,.875),i}),go.Shape.defineFigureGenerator("Actor",function(t,e,n){var i=new go.Geometry,o=.2*KAPPA,r=.1*KAPPA,a=new go.PathFigure(.5*e,.2*n,!0);i.add(a),a.add(new go.PathSegment(go.PathSegment.Bezier,.3*e,.1*n,(.5-o)*e,.2*n,.3*e,(.1+r)*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0*n,.3*e,(.1-r)*n,(.5-o)*e,0*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.7*e,.1*n,(.5+o)*e,0*n,.7*e,(.1-r)*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.2*n,.7*e,(.1+r)*n,(.5+o)*e,.2*n));r=.05*KAPPA,o=new go.PathFigure(.5*e,.2*n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.95*e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,+e,.25*n,(.95+r)*e,.2*n,+e,(.25-r)*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.85*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.85*e,.35*n)),r=.025*KAPPA,o.add(new go.PathSegment(go.PathSegment.Bezier,.825*e,(.35-.025)*n,.85*e,(.35-r)*n,(.825+r)*e,(.35-.025)*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,(.825-.025)*e,.35*n,(.825-r)*e,(.35-.025)*n,(.825-.025)*e,(.35-r)*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.55*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.55*e,.7*n)),r=.05*KAPPA,o.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,(.7-.05)*n,.55*e,(.7-r)*n,(.5+r)*e,(.7-.05)*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.45*e,.7*n,(.5-r)*e,(.7-.05)*n,.45*e,(.7-r)*n)),o.add(new go.PathSegment(go.PathSegment.Line,.45*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,.35*n)),r=.025*KAPPA,o.add(new go.PathSegment(go.PathSegment.Bezier,.175*e,(.35-.025)*n,(.175+.025)*e,(.35-r)*n,(.175+r)*e,(.35-.025)*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.15*e,.35*n,(.175-r)*e,(.35-.025)*n,.15*e,(.35-r)*n)),o.add(new go.PathSegment(go.PathSegment.Line,.15*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.25*n)),r=.05*KAPPA,o.add(new go.PathSegment(go.PathSegment.Bezier,.05*e,.2*n,0*e,(.25-r)*n,(.05-r)*e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.2*n)),i.spot1=new go.Spot(.2,.2),i.spot2=new go.Spot(.8,.65),i}),go.Shape.setFigureParameter("Card",0,new FigureParameter("CornerCutoutSize",.2,.1,.9)),go.Shape.defineFigureGenerator("Card",function(t,e,n){var i=t?t.parameter1:NaN;isNaN(i)&&(i=.2);var o=new go.Geometry,t=new go.PathFigure(e,0,!0);return o.add(t),t.add(new go.PathSegment(go.PathSegment.Line,e,n)),t.add(new go.PathSegment(go.PathSegment.Line,0,n)),t.add(new go.PathSegment(go.PathSegment.Line,0,i*n)),t.add(new go.PathSegment(go.PathSegment.Line,i*e,0).close()),o.spot1=new go.Spot(0,i),o.spot2=go.Spot.BottomRight,o}),go.Shape.defineFigureGenerator("Collate",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.5*e,.5*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.5*n));o=new go.PathFigure(.5*e,.5*n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.5*n)),i.spot1=new go.Spot(.25,0),i.spot2=new go.Spot(.75,.25),i}),go.Shape.defineFigureGenerator("CreateRequest",function(t,e,n){var i=new go.Geometry,o=t?t.parameter1:NaN;isNaN(o)&&(o=.1);t=new go.PathFigure(0,0,!0);i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,e,0)),t.add(new go.PathSegment(go.PathSegment.Line,e,n)),t.add(new go.PathSegment(go.PathSegment.Line,0,n).close());t=new go.PathFigure(0,o*n,!1);return i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,e,o*n)),t.add(new go.PathSegment(go.PathSegment.Move,0,(1-o)*n)),t.add(new go.PathSegment(go.PathSegment.Line,e,(1-o)*n)),i}),go.Shape.defineFigureGenerator("Database",function(t,e,n){var i=new go.Geometry,o=.5*KAPPA,r=.1*KAPPA,a=new go.PathFigure(e,.1*n,!0);i.add(a),a.add(new go.PathSegment(go.PathSegment.Line,e,.9*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,n,e,(.9+r)*n,(.5+o)*e,n)),a.add(new go.PathSegment(go.PathSegment.Bezier,0,.9*n,(.5-o)*e,n,0,(.9+r)*n)),a.add(new go.PathSegment(go.PathSegment.Line,0,.1*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0,0,(.1-r)*n,(.5-o)*e,0)),a.add(new go.PathSegment(go.PathSegment.Bezier,e,.1*n,(.5+o)*e,0,e,(.1-r)*n));a=new go.PathFigure(e,.1*n,!1);return i.add(a),a.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.2*n,e,(.1+r)*n,(.5+o)*e,.2*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,0,.1*n,(.5-o)*e,.2*n,0,(.1+r)*n)),a.add(new go.PathSegment(go.PathSegment.Move,e,.2*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.3*n,e,(.2+r)*n,(.5+o)*e,.3*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,0,.2*n,(.5-o)*e,.3*n,0,(.2+r)*n)),a.add(new go.PathSegment(go.PathSegment.Move,e,.3*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.4*n,e,(.3+r)*n,(.5+o)*e,.4*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,0,.3*n,(.5-o)*e,.4*n,0,(.3+r)*n)),i.spot1=new go.Spot(0,.4),i.spot2=new go.Spot(1,.9),i}),go.Shape.defineFigureGenerator("DataStorage",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,0)),o.add(new go.PathSegment(go.PathSegment.Bezier,.75*e,n,e,0,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Bezier,0,0,.25*e,.9*n,.25*e,.1*n).close()),i.spot1=new go.Spot(.226,0),i.spot2=new go.Spot(.81,1),i}),go.Shape.defineFigureGenerator("DiskStorage",function(t,e,n){var i=new go.Geometry,o=.5*KAPPA,r=.1*KAPPA,a=new go.PathFigure(e,.1*n,!0);i.add(a),a.add(new go.PathSegment(go.PathSegment.Line,e,.9*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,n,e,(.9+r)*n,(.5+o)*e,n)),a.add(new go.PathSegment(go.PathSegment.Bezier,0,.9*n,(.5-o)*e,n,0,(.9+r)*n)),a.add(new go.PathSegment(go.PathSegment.Line,0,.1*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0,0,(.1-r)*n,(.5-o)*e,0)),a.add(new go.PathSegment(go.PathSegment.Bezier,e,.1*n,(.5+o)*e,0,e,(.1-r)*n));a=new go.PathFigure(e,.1*n,!1);return i.add(a),a.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.2*n,e,(.1+r)*n,(.5+o)*e,.2*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,0,.1*n,(.5-o)*e,.2*n,0,(.1+r)*n)),a.add(new go.PathSegment(go.PathSegment.Move,e,.2*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.3*n,e,(.2+r)*n,(.5+o)*e,.3*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,0,.2*n,(.5-o)*e,.3*n,0,(.2+r)*n)),i.spot1=new go.Spot(0,.3),i.spot2=new go.Spot(1,.9),i}),go.Shape.defineFigureGenerator("Display",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.25*e,0,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,0)),o.add(new go.PathSegment(go.PathSegment.Bezier,.75*e,n,e,0,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.25*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.5*n).close()),i.spot1=new go.Spot(.25,0),i.spot2=new go.Spot(.75,1),i}),go.Shape.defineFigureGenerator("DividedEvent",function(t,e,n){var i=new go.Geometry,o=t?t.parameter1:NaN;isNaN(o)?o=.2:o<.15&&(o=.15);var r=.2*KAPPA,t=new go.PathFigure(0,.2*n,!0);i.add(t),t.add(new go.PathSegment(go.PathSegment.Bezier,.2*e,0,0,(.2-r)*n,(.2-r)*e,0)),t.add(new go.PathSegment(go.PathSegment.Line,.8*e,0)),t.add(new go.PathSegment(go.PathSegment.Bezier,e,.2*n,(.8+r)*e,0,e,(.2-r)*n)),t.add(new go.PathSegment(go.PathSegment.Line,e,.8*n)),t.add(new go.PathSegment(go.PathSegment.Bezier,.8*e,n,e,(.8+r)*n,(.8+r)*e,n)),t.add(new go.PathSegment(go.PathSegment.Line,.2*e,n)),t.add(new go.PathSegment(go.PathSegment.Bezier,0,.8*n,(.2-r)*e,n,0,(.8+r)*n)),t.add(new go.PathSegment(go.PathSegment.Line,0,.2*n));t=new go.PathFigure(0,o*n,!1);return i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,e,o*n)),i}),go.Shape.defineFigureGenerator("DividedProcess",function(t,e,n){var i=new go.Geometry,o=t?t.parameter1:NaN;(isNaN(o)||o<.1)&&(o=.1);t=new go.PathFigure(0,0,!0);i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,e,0)),t.add(new go.PathSegment(go.PathSegment.Line,e,n)),t.add(new go.PathSegment(go.PathSegment.Line,0,n).close());t=new go.PathFigure(0,o*n,!1);return i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,e,o*n)),i}),go.Shape.defineFigureGenerator("Document",function(t,e,n){var i=new go.Geometry;n/=.8;var o=new go.PathFigure(0,.7*n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.7*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,0,.7*n,.5*e,.4*n,.5*e,n).close()),i.spot1=go.Spot.TopLeft,i.spot2=new go.Spot(1,.6),i}),go.Shape.defineFigureGenerator("ExternalOrganization",function(t,e,n){var i=new go.Geometry,o=t?t.parameter1:NaN;(isNaN(o)||o<.2)&&(o=.2);t=new go.PathFigure(0,0,!0);i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,e,0)),t.add(new go.PathSegment(go.PathSegment.Line,e,n)),t.add(new go.PathSegment(go.PathSegment.Line,0,n).close());t=new go.PathFigure(o*e,0,!1);return i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,0,o*n)),t.add(new go.PathSegment(go.PathSegment.Move,e,o*n)),t.add(new go.PathSegment(go.PathSegment.Line,(1-o)*e,0)),t.add(new go.PathSegment(go.PathSegment.Move,0,(1-o)*n)),t.add(new go.PathSegment(go.PathSegment.Line,o*e,n)),t.add(new go.PathSegment(go.PathSegment.Move,(1-o)*e,n)),t.add(new go.PathSegment(go.PathSegment.Line,e,(1-o)*n)),i}),go.Shape.defineFigureGenerator("ExternalProcess",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.5*e,0,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.5*n).close());o=new go.PathFigure(.1*e,.4*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.1*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Move,.9*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Move,.6*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Move,.4*e,.9*n)),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,.9*n)),i.spot1=new go.Spot(.25,.25),i.spot2=new go.Spot(.75,.75),i}),go.Shape.defineFigureGenerator("File",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n).close());o=new go.PathFigure(.75*e,0,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.25*n)),i.spot1=new go.Spot(0,.25),i.spot2=go.Spot.BottomRight,i}),go.Shape.defineFigureGenerator("Interrupt",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(e,.5*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n));o=new go.PathFigure(e,.5*n,!1);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,n));n=new go.PathFigure(e,.5*n,!1);return i.add(n),n.add(new go.PathSegment(go.PathSegment.Line,e,0)),i.spot1=new go.Spot(0,.25),i.spot2=new go.Spot(.5,.75),i}),go.Shape.defineFigureGenerator("InternalStorage",function(t,e,n){var i=new go.Geometry,o=t?t.parameter1:NaN,r=t?t.parameter2:NaN;isNaN(o)&&(o=.1),isNaN(r)&&(r=.1);t=new go.PathFigure(0,0,!0);i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,e,0)),t.add(new go.PathSegment(go.PathSegment.Line,e,n)),t.add(new go.PathSegment(go.PathSegment.Line,0,n).close());t=new go.PathFigure(o*e,0,!1);return i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,o*e,n)),t.add(new go.PathSegment(go.PathSegment.Move,0,r*n)),t.add(new go.PathSegment(go.PathSegment.Line,e,r*n)),i}),go.Shape.defineFigureGenerator("Junction",function(t,e,n){var i=new go.Geometry,o=1/Math.SQRT2,r=(1-1/Math.SQRT2)/2,a=.5*KAPPA,s=new go.PathFigure(e,.5*n,!0);i.add(s),s.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,n,e,(.5+a)*n,(.5+a)*e,n)),s.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*n,(.5-a)*e,n,0,(.5+a)*n)),s.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0,0,(.5-a)*n,(.5-a)*e,0)),s.add(new go.PathSegment(go.PathSegment.Bezier,e,.5*n,(.5+a)*e,0,e,(.5-a)*n));a=new go.PathFigure((r+o)*e,(r+o)*n,!1);return i.add(a),a.add(new go.PathSegment(go.PathSegment.Line,r*e,r*n)),a.add(new go.PathSegment(go.PathSegment.Move,r*e,(r+o)*n)),a.add(new go.PathSegment(go.PathSegment.Line,(r+o)*e,r*n)),i}),go.Shape.defineFigureGenerator("LinedDocument",function(t,e,n){var i=new go.Geometry;n/=.8;var o=new go.PathFigure(0,.7*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.7*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,0,.7*n,.5*e,.4*n,.5*e,n).close());o=new go.PathFigure(.1*e,0,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.1*e,.75*n)),i.spot1=new go.Spot(.1,0),i.spot2=new go.Spot(1,.6),i}),go.Shape.defineFigureGenerator("LoopLimit",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,.25*n)),o.add(new go.PathSegment(go.PathSegment.Line,.25*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,n).close()),i.spot1=new go.Spot(0,.25),i.spot2=go.Spot.BottomRight,i}),go.Shape.defineFigureGenerator("MagneticTape",function(t,e,n){var i=new go.Geometry,o=.5*KAPPA,r=new go.PathFigure(.5*e,n,!0);return i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*n,(.5-o)*e,n,0,(.5+o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0,0,(.5-o)*n,(.5-o)*e,0)),r.add(new go.PathSegment(go.PathSegment.Bezier,e,.5*n,(.5+o)*e,0,e,(.5-o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.6*e,.9*n,e,(.5+o)*n,(.5+o)*e,.9*n)),r.add(new go.PathSegment(go.PathSegment.Line,e,.9*n)),r.add(new go.PathSegment(go.PathSegment.Line,e,n)),r.add(new go.PathSegment(go.PathSegment.Line,.5*e,n)),i.spot1=new go.Spot(.15,.15),i.spot2=new go.Spot(.85,.8),i}),go.Shape.defineFigureGenerator("ManualInput",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(e,0,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.25*n).close()),i.spot1=new go.Spot(0,.25),i.spot2=go.Spot.BottomRight,i}),go.Shape.defineFigureGenerator("MessageFromUser",function(t,e,n){var i=new go.Geometry,o=t?t.parameter1:NaN;isNaN(o)&&(o=.7);t=new go.PathFigure(0,0,!0);return i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,e,0)),t.add(new go.PathSegment(go.PathSegment.Line,o*e,.5*n)),t.add(new go.PathSegment(go.PathSegment.Line,e,n)),t.add(new go.PathSegment(go.PathSegment.Line,0,n).close()),i.spot1=go.Spot.TopLeft,i}),go.Shape.defineFigureGenerator("MicroformProcessing",function(t,e,n){var i=new go.Geometry,o=t?t.parameter1:NaN;isNaN(o)&&(o=.25);t=new go.PathFigure(0,0,!0);return i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,.5*e,o*n)),t.add(new go.PathSegment(go.PathSegment.Line,e,0)),t.add(new go.PathSegment(go.PathSegment.Line,e,n)),t.add(new go.PathSegment(go.PathSegment.Line,.5*e,(1-o)*n)),t.add(new go.PathSegment(go.PathSegment.Line,0,n).close()),i}),go.Shape.defineFigureGenerator("MicroformRecording",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.15*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.85*n)),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n).close()),i.spot1=new go.Spot(0,.25),i.spot2=new go.Spot(1,.75),i}),go.Shape.defineFigureGenerator("MultiDocument",function(t,e,n){var i=new go.Geometry;n/=.8;var o=new go.PathFigure(e,0,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.9*e,.44*n,.96*e,.47*n,.93*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.8*e,.54*n,.86*e,.57*n,.83*e,.55*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.7*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,0,.7*n,.4*e,.4*n,.4*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,.1*e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,.1*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,0).close());o=new go.PathFigure(.1*e,.2*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.54*n)),o.add(new go.PathSegment(go.PathSegment.Move,.2*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,.44*n)),i.spot1=new go.Spot(0,.25),i.spot2=new go.Spot(.8,.77),i}),go.Shape.defineFigureGenerator("MultiProcess",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.1*e,.1*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,.9*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.9*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,.1*e,.2*n).close());o=new go.PathFigure(.2*e,.1*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Move,.1*e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.9*n)),i.spot1=new go.Spot(0,.2),i.spot2=new go.Spot(.8,1),i}),go.Shape.defineFigureGenerator("OfflineStorage",function(t,e,n){var i=new go.Geometry,o=t?t.parameter1:NaN;isNaN(o)&&(o=.1);t=new go.PathFigure(0,0,!0);i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,e,0)),t.add(new go.PathSegment(go.PathSegment.Line,.5*e,n).close());t=new go.PathFigure(.5*o*e,o*n,!1);return i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,(1-.5*o)*e,o*n)),i}),go.Shape.defineFigureGenerator("OffPageConnector",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n).close()),i.spot1=go.Spot.TopLeft,i.spot2=new go.Spot(.75,1),i}),go.Shape.defineFigureGenerator("Or",function(t,e,n){var i=new go.Geometry,o=.5*KAPPA,r=new go.PathFigure(e,.5*n,!0);i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,n,e,(.5+o)*n,(.5+o)*e,n)),r.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*n,(.5-o)*e,n,0,(.5+o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0,0,(.5-o)*n,(.5-o)*e,0)),r.add(new go.PathSegment(go.PathSegment.Bezier,e,.5*n,(.5+o)*e,0,e,(.5-o)*n));o=new go.PathFigure(e,.5*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,.5*n)),o.add(new go.PathSegment(go.PathSegment.Move,.5*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,0)),i}),go.Shape.defineFigureGenerator("PaperTape",function(t,e,n){var i=new go.Geometry;n/=.8;var o=new go.PathFigure(0,.7*n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,.3*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,e,.3*n,.5*e,.6*n,.5*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.7*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,0,.7*n,.5*e,.4*n,.5*e,n).close()),i.spot1=new go.Spot(0,.49),i.spot2=new go.Spot(1,.75),i}),go.Shape.defineFigureGenerator("PrimitiveFromCall",function(t,e,n){var i=new go.Geometry,o=t?t.parameter1:NaN,t=t?t.parameter2:NaN;isNaN(o),isNaN(t)&&(t=.3);o=new go.PathFigure(0,0,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,(1-t)*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n).close()),i}),go.Shape.defineFigureGenerator("PrimitiveToCall",function(t,e,n){var i=new go.Geometry,o=t?t.parameter1:NaN,t=t?t.parameter2:NaN;isNaN(o),isNaN(t)&&(t=.3);o=new go.PathFigure(0,0,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,(1-t)*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,(1-t)*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n).close()),i}),go.Shape.defineFigureGenerator("Procedure",function(t,e,n){var i=new go.Geometry,o=t?t.parameter1:NaN;isNaN(o)&&(o=.1);t=new go.PathFigure(0,0,!0);i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,e,0)),t.add(new go.PathSegment(go.PathSegment.Line,e,n)),t.add(new go.PathSegment(go.PathSegment.Line,0,n).close());t=new go.PathFigure((1-o)*e,0,!1);return i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,(1-o)*e,n)),t.add(new go.PathSegment(go.PathSegment.Move,o*e,0)),t.add(new go.PathSegment(go.PathSegment.Line,o*e,n)),i}),go.Shape.defineFigureGenerator("Process",function(t,e,n){var i=new go.Geometry,o=t?t.parameter1:NaN;isNaN(o)&&(o=.1);t=new go.PathFigure(0,0,!0);i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,e,0)),t.add(new go.PathSegment(go.PathSegment.Line,e,n)),t.add(new go.PathSegment(go.PathSegment.Line,0,n).close());t=new go.PathFigure(o*e,0,!1);return i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,o*e,n)),i.spot2=go.Spot.BottomRight,i}),go.Shape.defineFigureGenerator("Sort",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.5*e,0,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.5*n).close());o=new go.PathFigure(0,.5*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),i.spot1=new go.Spot(.25,.25),i.spot2=new go.Spot(.75,.5),i}),go.Shape.defineFigureGenerator("Start",function(t,e,n){var i=new go.Geometry,o=t?t.parameter1:NaN;isNaN(o)&&(o=.25);t=new go.PathFigure(o*e,0,!0);i.add(t),t.add(new go.PathSegment(go.PathSegment.Arc,270,180,.75*e,.5*n,.25*e,.5*n)),t.add(new go.PathSegment(go.PathSegment.Arc,90,180,.25*e,.5*n,.25*e,.5*n));t=new go.PathFigure(o*e,0,!1);return i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,o*e,n)),t.add(new go.PathSegment(go.PathSegment.Move,(1-o)*e,0)),t.add(new go.PathSegment(go.PathSegment.Line,(1-o)*e,n)),i.spot1=new go.Spot(o,0),i.spot2=new go.Spot(1-o,1),i}),go.Shape.defineFigureGenerator("Terminator",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.25*e,0,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Arc,270,180,.75*e,.5*n,.25*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Arc,90,180,.25*e,.5*n,.25*e,.5*n)),i.spot1=new go.Spot(.23,0),i.spot2=new go.Spot(.77,1),i}),go.Shape.defineFigureGenerator("TransmittalTape",function(t,e,n){var i=new go.Geometry,o=t?t.parameter1:NaN;isNaN(o)&&(o=.1);t=new go.PathFigure(0,0,!0);return i.add(t),t.add(new go.PathSegment(go.PathSegment.Line,e,0)),t.add(new go.PathSegment(go.PathSegment.Line,e,n)),t.add(new go.PathSegment(go.PathSegment.Line,.75*e,(1-o)*n)),t.add(new go.PathSegment(go.PathSegment.Line,0,(1-o)*n).close()),i.spot1=go.Spot.TopLeft,i}),go.Shape.defineFigureGenerator("AndGate",function(t,e,n){var i=new go.Geometry,o=.5*KAPPA,r=new go.PathFigure(0,0,!0);return i.add(r),r.add(new go.PathSegment(go.PathSegment.Line,.5*e,0)),r.add(new go.PathSegment(go.PathSegment.Bezier,e,.5*n,(.5+o)*e,0,e,(.5-o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,n,e,(.5+o)*n,(.5+o)*e,n)),r.add(new go.PathSegment(go.PathSegment.Line,0,n).close()),i.spot1=go.Spot.TopLeft,i.spot2=new go.Spot(.55,1),i}),go.Shape.defineFigureGenerator("Buffer",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n).close()),i.spot1=new go.Spot(0,.25),i.spot2=new go.Spot(.5,.75),i}),go.Shape.defineFigureGenerator("Clock",function(t,e,n){var i=new go.Geometry,o=.5*KAPPA,r=new go.PathFigure(e,.5*n,!0);i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,n,e,(.5+o)*n,(.5+o)*e,n)),r.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*n,(.5-o)*e,n,0,(.5+o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0,0,(.5-o)*n,(.5-o)*e,0)),r.add(new go.PathSegment(go.PathSegment.Bezier,e,.5*n,(.5+o)*e,0,e,(.5-o)*n));o=new go.PathFigure(e,.5*n,!1);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n));o=new go.PathFigure(.8*e,.75*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,.75*n)),i}),go.Shape.defineFigureGenerator("Ground",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.5*e,0,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Move,.2*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Move,.3*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,.7*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Move,.4*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,n)),i}),go.Shape.defineFigureGenerator("Inverter",function(t,e,n){var i=new go.Geometry,o=.1*KAPPA,r=new go.PathFigure(.8*e,.5*n,!0);i.add(r),r.add(new go.PathSegment(go.PathSegment.Line,0,n)),r.add(new go.PathSegment(go.PathSegment.Line,0,0)),r.add(new go.PathSegment(go.PathSegment.Line,.8*e,.5*n));r=new go.PathFigure(+e,.5*n,!0);return i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.9*e,.6*n,+e,(.5+o)*n,(.9+o)*e,.6*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.8*e,.5*n,(.9-o)*e,.6*n,.8*e,(.5+o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.9*e,.4*n,.8*e,(.5-o)*n,(.9-o)*e,.4*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,+e,.5*n,(.9+o)*e,.4*n,+e,(.5-o)*n)),i.spot1=new go.Spot(0,.25),i.spot2=new go.Spot(.4,.75),i}),go.Shape.defineFigureGenerator("NandGate",function(t,e,n){var i=new go.Geometry,o=.5*KAPPA,r=.4*KAPPA,a=.1*KAPPA,s=new go.PathFigure(.8*e,.5*n,!0);i.add(s),s.add(new go.PathSegment(go.PathSegment.Bezier,.4*e,n,.8*e,(.5+r)*n,(.4+o)*e,n)),s.add(new go.PathSegment(go.PathSegment.Line,0,n)),s.add(new go.PathSegment(go.PathSegment.Line,0,0)),s.add(new go.PathSegment(go.PathSegment.Line,.4*e,0)),s.add(new go.PathSegment(go.PathSegment.Bezier,.8*e,.5*n,(.4+o)*e,0,.8*e,(.5-r)*n));r=new go.PathFigure(+e,.5*n,!0);return i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.9*e,.6*n,+e,(.5+a)*n,(.9+a)*e,.6*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.8*e,.5*n,(.9-a)*e,.6*n,.8*e,(.5+a)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.9*e,.4*n,.8*e,(.5-a)*n,(.9-a)*e,.4*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,+e,.5*n,(.9+a)*e,.4*n,+e,(.5-a)*n)),i.spot1=new go.Spot(0,.05),i.spot2=new go.Spot(.55,.95),i}),go.Shape.defineFigureGenerator("NorGate",function(t,e,n){var i=new go.Geometry,o=.5*KAPPA,r=new go.PathFigure(.8*e,.5*n,!0);i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,0,n,.7*e,(.5+o)*n,(0+o)*e,+n)),r.add(new go.PathSegment(go.PathSegment.Bezier,0,0,.25*e,.75*n,.25*e,.25*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.8*e,.5*n,(0+o)*e,0*n,.7*e,(.5-o)*n)),o=.1*KAPPA;r=new go.PathFigure(.8*e,.5*n,!0);return i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.9*e,.4*n,.8*e,(.5-o)*n,(.9-o)*e,.4*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,+e,.5*n,(.9+o)*e,.4*n,+e,(.5-o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.9*e,.6*n,+e,(.5+o)*n,(.9+o)*e,.6*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.8*e,.5*n,(.9-o)*e,.6*n,.8*e,(.5+o)*n)),i.spot1=new go.Spot(.2,.25),i.spot2=new go.Spot(.6,.75),i}),go.Shape.defineFigureGenerator("OrGate",function(t,e,n){var i=new go.Geometry,o=.5*KAPPA,r=new go.PathFigure(0,0,!0);return i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,e,.5*n,(0+o+o)*e,0*n,.8*e,(.5-o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,0,n,.8*e,(.5+o)*n,(0+o+o)*e,+n)),r.add(new go.PathSegment(go.PathSegment.Bezier,0,0,.25*e,.75*n,.25*e,.25*n).close()),i.spot1=new go.Spot(.2,.25),i.spot2=new go.Spot(.75,.75),i}),go.Shape.defineFigureGenerator("XnorGate",function(t,e,n){var i=new go.Geometry,o=.5*KAPPA,r=new go.PathFigure(.1*e,0,!1);i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.1*e,n,.35*e,.25*n,.35*e,.75*n));r=new go.PathFigure(.8*e,.5*n,!0);i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.2*e,n,.7*e,(.5+o)*n,(.2+o)*e,+n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.2*e,0,.45*e,.75*n,.45*e,.25*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.8*e,.5*n,(.2+o)*e,0*n,.7*e,(.5-o)*n)),o=.1*KAPPA;r=new go.PathFigure(.8*e,.5*n,!0);return i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.9*e,.4*n,.8*e,(.5-o)*n,(.9-o)*e,.4*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,+e,.5*n,(.9+o)*e,.4*n,+e,(.5-o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.9*e,.6*n,+e,(.5+o)*n,(.9+o)*e,.6*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.8*e,.5*n,(.9-o)*e,.6*n,.8*e,(.5+o)*n)),i.spot1=new go.Spot(.4,.25),i.spot2=new go.Spot(.65,.75),i}),go.Shape.defineFigureGenerator("XorGate",function(t,e,n){var i=new go.Geometry,o=.5*KAPPA,r=new go.PathFigure(.1*e,0,!1);i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.1*e,n,.35*e,.25*n,.35*e,.75*n));r=new go.PathFigure(.2*e,0,!0);return i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,e,.5*n,(.2+o)*e,0*n,.9*e,(.5-o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.2*e,n,.9*e,(.5+o)*n,(.2+o)*e,+n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.2*e,0,.45*e,.75*n,.45*e,.25*n).close()),i.spot1=new go.Spot(.4,.25),i.spot2=new go.Spot(.8,.75),i}),go.Shape.defineFigureGenerator("Capacitor",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Move,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),i}),go.Shape.defineFigureGenerator("Resistor",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,.5*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.1*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.3*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.7*e,.5*n)),i}),go.Shape.defineFigureGenerator("Inductor",function(t,e,n){var i=new go.Geometry,o=.1*KAPPA,r=new go.PathFigure((.1-.5*o)*e,n,!1);return i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.2*e,0,(.1-o)*e,n,0*e,0)),r.add(new go.PathSegment(go.PathSegment.Bezier,.3*e,n,.4*e,0,(.3+o)*e,n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.4*e,0,(.3-o)*e,n,(.3-.1)*e,0)),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,n,.6*e,0,(.5+o)*e,n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.6*e,0,(.5-o)*e,n,.4*e,0)),r.add(new go.PathSegment(go.PathSegment.Bezier,.7*e,n,(.7+.1)*e,0,(.7+o)*e,n)),r.add(new go.PathSegment(go.PathSegment.Bezier,(.7+.1)*e,0,(.7-o)*e,n,.6*e,0)),r.add(new go.PathSegment(go.PathSegment.Bezier,(.9+.5*o)*e,n,+e,0,(.9+o)*e,n)),i}),go.Shape.defineFigureGenerator("ACvoltageSource",function(t,e,n){var i=new go.Geometry,o=.5*KAPPA,r=new go.PathFigure(0*e,.5*n,!1);return i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0*n,0*e,(.5-o)*n,(.5-o)*e,0*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,+e,.5*n,(.5+o)*e,0*n,+e,(.5-o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,+n,+e,(.5+o)*n,(.5+o)*e,+n)),r.add(new go.PathSegment(go.PathSegment.Bezier,0*e,.5*n,(.5-o)*e,+n,0*e,(.5+o)*n)),r.add(new go.PathSegment(go.PathSegment.Move,.1*e,.5*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.9*e,.5*n,.5*e,0*n,.5*e,+n)),i}),go.Shape.defineFigureGenerator("DCvoltageSource",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,.75*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,.25*n)),o.add(new go.PathSegment(go.PathSegment.Move,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),i}),go.Shape.defineFigureGenerator("Diode",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(e,0,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),i.spot1=new go.Spot(0,.25),i.spot2=new go.Spot(.5,.75),i}),go.Shape.defineFigureGenerator("Wifi",function(t,e,n){var i=new go.Geometry,o=.8*KAPPA,r=(e-(e*=.38))/2,a=(n-(n*=.6))/2,s=new go.PathFigure(0*e+r,1.3*n+a,!0);i.add(s),s.add(new go.PathSegment(go.PathSegment.Bezier,-.8*e+r,.5*n+a,(0-o)*e+r,1.3*n+a,-.8*e+r,(.5+o)*n+a)),s.add(new go.PathSegment(go.PathSegment.Bezier,0*e+r,(.5-.8)*n+a,-.8*e+r,(.5-o)*n+a,(0-o)*e+r,(.5-.8)*n+a)),s.add(new go.PathSegment(go.PathSegment.Bezier,(.5*o-.8)*e+r,.5*n+a,0*e+r,(.5-.8)*n+a,(.5*o-.8)*e+r,(.5-o)*n+a)),s.add(new go.PathSegment(go.PathSegment.Bezier,0*e+r,1.3*n+a,(.5*o-.8)*e+r,(.5+o)*n+a,0*e+r,1.3*n+a).close()),o=.4*KAPPA;s=new go.PathFigure(.2*e+r,.9*n+a,!0);i.add(s),s.add(new go.PathSegment(go.PathSegment.Bezier,-.2*e+r,.5*n+a,(.2-o)*e+r,.9*n+a,-.2*e+r,(.5+o)*n+a)),s.add(new go.PathSegment(go.PathSegment.Bezier,.2*e+r,(.5-.4)*n+a,-.2*e+r,(.5-o)*n+a,(.2-o)*e+r,(.5-.4)*n+a)),s.add(new go.PathSegment(go.PathSegment.Bezier,(.5*o-.2)*e+r,.5*n+a,.2*e+r,(.5-.4)*n+a,(.5*o-.2)*e+r,(.5-o)*n+a)),s.add(new go.PathSegment(go.PathSegment.Bezier,.2*e+r,.9*n+a,(.5*o-.2)*e+r,(.5+o)*n+a,.2*e+r,.9*n+a).close()),o=.2*KAPPA;s=new go.PathFigure(.3*e+r,.5*n+a,!0);i.add(s),s.add(new go.PathSegment(go.PathSegment.Bezier,.5*e+r,.3*n+a,.3*e+r,(.5-o)*n+a,(.5-o)*e+r,.3*n+a)),s.add(new go.PathSegment(go.PathSegment.Bezier,.7*e+r,.5*n+a,(.5+o)*e+r,.3*n+a,.7*e+r,(.5-o)*n+a)),s.add(new go.PathSegment(go.PathSegment.Bezier,.5*e+r,.7*n+a,.7*e+r,(.5+o)*n+a,(.5+o)*e+r,.7*n+a)),s.add(new go.PathSegment(go.PathSegment.Bezier,.3*e+r,.5*n+a,(.5-o)*e+r,.7*n+a,.3*e+r,(.5+o)*n+a)),o=.4*KAPPA;s=new go.PathFigure(.8*e+r,(.5-.4)*n+a,!0);i.add(s),s.add(new go.PathSegment(go.PathSegment.Bezier,(.8+.4)*e+r,.5*n+a,(.8+o)*e+r,(.5-.4)*n+a,(.8+.4)*e+r,(.5-o)*n+a)),s.add(new go.PathSegment(go.PathSegment.Bezier,.8*e+r,.9*n+a,(.8+.4)*e+r,(.5+o)*n+a,(.8+o)*e+r,.9*n+a)),s.add(new go.PathSegment(go.PathSegment.Bezier,(.8+.4-.5*o)*e+r,.5*n+a,.8*e+r,.9*n+a,(.8+.4-.5*o)*e+r,(.5+o)*n+a)),s.add(new go.PathSegment(go.PathSegment.Bezier,.8*e+r,(.5-.4)*n+a,(.8+.4-.5*o)*e+r,(.5-o)*n+a,.8*e+r,(.5-.4)*n+a).close()),o=.8*KAPPA;s=new go.PathFigure(+e+r,(.5-.8)*n+a,!0);return i.add(s),s.add(new go.PathSegment(go.PathSegment.Bezier,1.8*e+r,.5*n+a,(1+o)*e+r,(.5-.8)*n+a,1.8*e+r,(.5-o)*n+a)),s.add(new go.PathSegment(go.PathSegment.Bezier,+e+r,1.3*n+a,1.8*e+r,(.5+o)*n+a,(1+o)*e+r,1.3*n+a)),s.add(new go.PathSegment(go.PathSegment.Bezier,(1.8-.5*o)*e+r,.5*n+a,+e+r,1.3*n+a,(1.8-.5*o)*e+r,(.5+o)*n+a)),s.add(new go.PathSegment(go.PathSegment.Bezier,+e+r,(.5-.8)*n+a,(1.8-.5*o)*e+r,(.5-o)*n+a,+e+r,(.5-.8)*n+a).close()),i}),go.Shape.defineFigureGenerator("Email",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,0).close());o=new go.PathFigure(0,0,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Move,0,n)),o.add(new go.PathSegment(go.PathSegment.Line,.45*e,.54*n)),o.add(new go.PathSegment(go.PathSegment.Move,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.55*e,.54*n)),i}),go.Shape.defineFigureGenerator("Ethernet",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.35*e,0,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.65*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.65*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Line,.35*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Line,.35*e,0).close());o=new go.PathFigure(.1*e,n,!0,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.1*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.1*e,n).close());o=new go.PathFigure(.6*e,n,!0,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,n).close());o=new go.PathFigure(0,.5*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Move,.5*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Move,.75*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Move,.25*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.25*e,.6*n)),i}),go.Shape.defineFigureGenerator("Power",function(t,e,n){var i=new go.Geometry,o=.4*KAPPA,r=tempPoint(),a=tempPoint(),s=tempPoint(),h=tempPoint();breakUpBezier(.5,.5-.4,.5+o,.5-.4,.9,.5-o,.9,.5,.5,r,r,a,s,h);var u=tempPointAt(a.x,a.y),l=new go.PathFigure(a.x*e,a.y*n,!0);i.add(l),l.add(new go.PathSegment(go.PathSegment.Bezier,.9*e,.5*n,s.x*e,s.y*n,h.x*e,h.y*n)),l.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.9*n,.9*e,(.5+o)*n,(.5+o)*e,.9*n)),l.add(new go.PathSegment(go.PathSegment.Bezier,(.5-.4)*e,.5*n,(.5-o)*e,.9*n,(.5-.4)*e,(.5+o)*n)),breakUpBezier(.5-.4,.5,.5-.4,.5-o,.5-o,.5-.4,.5,.5-.4,.5,s,h,a,r,r),l.add(new go.PathSegment(go.PathSegment.Bezier,a.x*e,a.y*n,s.x*e,s.y*n,h.x*e,h.y*n)),breakUpBezier(.2,.5,.2,.5-(o=.3*KAPPA),.5-o,.2,.5,.2,.5,s,h,a,r,r),l.add(new go.PathSegment(go.PathSegment.Line,a.x*e,a.y*n)),l.add(new go.PathSegment(go.PathSegment.Bezier,.2*e,.5*n,h.x*e,h.y*n,s.x*e,s.y*n)),l.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.8*n,.2*e,(.5+o)*n,(.5-o)*e,.8*n)),l.add(new go.PathSegment(go.PathSegment.Bezier,.8*e,.5*n,(.5+o)*e,.8*n,.8*e,(.5+o)*n)),breakUpBezier(.5,.2,.5+o,.2,.8,.5-o,.8,.5,.5,r,r,a,s,h),l.add(new go.PathSegment(go.PathSegment.Bezier,a.x*e,a.y*n,h.x*e,h.y*n,s.x*e,s.y*n).close());l=new go.PathFigure(.45*e,0,!0);return i.add(l),l.add(new go.PathSegment(go.PathSegment.Line,.45*e,.5*n)),l.add(new go.PathSegment(go.PathSegment.Line,.55*e,.5*n)),l.add(new go.PathSegment(go.PathSegment.Line,.55*e,0).close()),freePoint(r),freePoint(a),freePoint(s),freePoint(h),freePoint(u),i.spot1=new go.Spot(.25,.45),i.spot2=new go.Spot(.75,.8),i}),go.Shape.defineFigureGenerator("Fallout",function(t,i,o){var e=new go.Geometry,n=new go.PathFigure(0,o/2,!0);function r(t,e,n){t.add(new go.PathSegment(go.PathSegment.Move,(.3+e)*i,(.8+n)*o)),t.add(new go.PathSegment(go.PathSegment.Line,(.5+e)*i,(.5+n)*o)),t.add(new go.PathSegment(go.PathSegment.Line,(.1+e)*i,(.5+n)*o)),t.add(new go.PathSegment(go.PathSegment.Line,(.3+e)*i,(.8+n)*o).close())}return e.add(n),n.add(new go.PathSegment(go.PathSegment.Arc,180,360,i/2,o/2,i/2,o/2)),r(n,0,0),r(n,.4,0),r(n,.2,-.3),e}),go.Shape.defineFigureGenerator("IrritationHazard",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.2*e,0,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.3*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,.7*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.7*n)),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,.3*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.2*n).close()),i.spot1=new go.Spot(.3,.3),i.spot2=new go.Spot(.7,.7),i}),go.Shape.defineFigureGenerator("ElectricalHazard",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.37*e,0,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.11*n)),o.add(new go.PathSegment(go.PathSegment.Line,.77*e,.04*n)),o.add(new go.PathSegment(go.PathSegment.Line,.33*e,.49*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.37*n)),o.add(new go.PathSegment(go.PathSegment.Line,.63*e,.86*n)),o.add(new go.PathSegment(go.PathSegment.Line,.77*e,.91*n)),o.add(new go.PathSegment(go.PathSegment.Line,.34*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.34*e,.78*n)),o.add(new go.PathSegment(go.PathSegment.Line,.44*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,.65*e,.56*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.68*n).close()),i}),go.Shape.defineFigureGenerator("FireHazard",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.1*e,n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Bezier,.29*e,0,-.25*e,.63*n,.45*e,.44*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.51*e,.42*n,.48*e,.17*n,.54*e,.35*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.59*e,.18*n,.59*e,.29*n,.58*e,.28*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.75*e,.6*n,.8*e,.34*n,.88*e,.43*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.88*e,.31*n,.87*e,.48*n,.88*e,.43*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.9*e,n,1.17*e,.76*n,.82*e,.8*n).close()),i.spot1=new go.Spot(.07,.445),i.spot2=new go.Spot(.884,.958),i}),go.Shape.defineFigureGenerator("BpmnActivityLoop",function(t,e,n){var i=new go.Geometry,o=.5*KAPPA,r=.4*Math.SQRT2/2+.5,a=.5-.5*Math.SQRT2/2,a=new go.PathFigure(r*e,(1-a)*n,!1);return i.add(a),a.add(new go.PathSegment(go.PathSegment.Bezier,+e,.5*n,+e,.7*n,+e,.5*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0*n,+e,(.5-o)*n,(.5+o)*e,0*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,0*e,.5*n,(.5-o)*e,0*n,0*e,(.5-o)*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.35*e,.9*n,0*e,(.5+o)*n,(.5-o)*e,.9*n)),a.add(new go.PathSegment(go.PathSegment.Move,.25*e,.8*n)),a.add(new go.PathSegment(go.PathSegment.Line,.35*e,.9*n)),a.add(new go.PathSegment(go.PathSegment.Line,.2*e,.95*n)),i}),go.Shape.defineFigureGenerator("BpmnActivityParallel",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Move,.5*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,n)),o.add(new go.PathSegment(go.PathSegment.Move,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),i}),go.Shape.defineFigureGenerator("BpmnActivitySequential",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Move,0,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Move,0,n)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),i}),go.Shape.defineFigureGenerator("BpmnActivityAdHoc",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!1);i.add(o);o=new go.PathFigure(e,n,!1);i.add(o);o=new go.PathFigure(0,.5*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.5*n,.2*e,.35*n,.3*e,.35*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,e,.5*n,.7*e,.65*n,.8*e,.65*n)),i}),go.Shape.defineFigureGenerator("BpmnActivityCompensation",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,.5*n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,n).close()),i}),go.Shape.defineFigureGenerator("BpmnTaskMessage",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,.2*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.8*n).close());o=new go.PathFigure(0,.2*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.2*n)),i}),go.Shape.defineFigureGenerator("BpmnTaskScript",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.7*e,n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.3*e,n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.3*e,0,.6*e,.5*n,0,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.7*e,0)),o.add(new go.PathSegment(go.PathSegment.Bezier,.7*e,n,.4*e,.5*n,e,.5*n).close());o=new go.PathFigure(.45*e,.73*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.7*e,.73*n)),o.add(new go.PathSegment(go.PathSegment.Move,.38*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.63*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Move,.31*e,.27*n)),o.add(new go.PathSegment(go.PathSegment.Line,.56*e,.27*n)),i}),go.Shape.defineFigureGenerator("BpmnTaskUser",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!1);i.add(o);var r=new go.PathFigure(.335*e,(1-.555)*n,!0);i.add(r),r.add(new go.PathSegment(go.PathSegment.Line,.335*e,.595*n)),r.add(new go.PathSegment(go.PathSegment.Line,.665*e,.595*n)),r.add(new go.PathSegment(go.PathSegment.Line,.665*e,(1-.555)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,e,.68*n,.88*e,.46*n,.98*e,.54*n)),r.add(new go.PathSegment(go.PathSegment.Line,e,n)),r.add(new go.PathSegment(go.PathSegment.Line,0,n)),r.add(new go.PathSegment(go.PathSegment.Line,0,.68*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.335*e,(1-.555)*n,.02*e,.54*n,.12*e,.46*n)),r.add(new go.PathSegment(go.PathSegment.Line,.365*e,.405*n));var a=.5-.285,s=Math.PI/4,h=4*(1-Math.cos(s))/(3*Math.sin(s)),u=.5-.285,o=.5-.285,s=h*u,h=h*o;r.add(new go.PathSegment(go.PathSegment.Bezier,.285*e,a*n,(.5-(s+u)/2)*e,(a+(o+h)/2)*n,.285*e,(a+h)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0*n,.285*e,(a-h)*n,(.5-s)*e,0*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,(.5+u)*e,a*n,(.5+s)*e,0*n,(.5+u)*e,(a-h)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.635*e,.405*n,(.5+u)*e,(a+h)*n,(.5+(s+u)/2)*e,(a+(o+h)/2)*n)),r.add(new go.PathSegment(go.PathSegment.Line,.635*e,.405*n)),r.add(new go.PathSegment(go.PathSegment.Line,.665*e,(1-.555)*n)),r.add(new go.PathSegment(go.PathSegment.Line,.665*e,.595*n)),r.add(new go.PathSegment(go.PathSegment.Line,.335*e,.595*n));r=new go.PathFigure(.2*e,n,!1);i.add(r),r.add(new go.PathSegment(go.PathSegment.Line,.2*e,.8*n));r=new go.PathFigure(.8*e,n,!1);return i.add(r),r.add(new go.PathSegment(go.PathSegment.Line,.8*e,.8*n)),i}),go.Shape.defineFigureGenerator("BpmnEventConditional",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.1*e,0,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.1*e,n).close());o=new go.PathFigure(.2*e,.2*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Move,.2*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Move,.2*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Move,.2*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.8*n)),i}),go.Shape.defineFigureGenerator("BpmnEventError",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.33*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.66*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.66*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.33*e,.5*n).close()),i}),go.Shape.defineFigureGenerator("BpmnEventEscalation",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!1);i.add(o);o=new go.PathFigure(e,n,!1);i.add(o);o=new go.PathFigure(.1*e,n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.5*n).close()),i}),go.Shape.defineFigureGenerator("Caution",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.05*e,n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Bezier,.1*e,.8*n,0,n,0,n)),o.add(new go.PathSegment(go.PathSegment.Line,.45*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.55*e,.1*n,.5*e,0,.5*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.95*e,.9*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.9*e,n,e,n,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.05*e,n));return o.add(new go.PathSegment(go.PathSegment.Move,.45*e,.875*n)),o.add(new go.PathSegment(go.PathSegment.Arc,180,-360,.5*e,.875*n,.05*e,.05*n)),o.add(new go.PathSegment(go.PathSegment.Move,.5*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.325*n,.575*e,.725*n,.625*e,.375*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.75*n,.375*e,.375*n,.425*e,.725*n)),i}),go.Shape.defineFigureGenerator("Recycle",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.45*e,.95*n,!1);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,.95*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.185*e,.85*n,.17*e,.95*n,.15*e,.9*n)),o.add(new go.PathSegment(go.PathSegment.Line,.235*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.3*e,.625*n)),o.add(new go.PathSegment(go.PathSegment.Line,.35*e,.65*n)),o.add(new go.PathSegment(go.PathSegment.Line,.275*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.05*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.1*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.05*e,.575*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.1875*e,.95*n,0,.675*n,0,.7*n)),o.add(new go.PathSegment(go.PathSegment.Move,.45*e,.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,.45*e,.775*n)),o.add(new go.PathSegment(go.PathSegment.Line,.22*e,.775*n));o=new go.PathFigure(.475*e,.2*n,!1);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Line,.225*e,.3*n)),o.add(new go.PathSegment(go.PathSegment.Line,.275*e,.175*n)),o.add(new go.PathSegment(go.PathSegment.Line,.325*e,.05*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.4*e,.05*n,.35*e,0,.375*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.575*e,.375*n)),o.add(new go.PathSegment(go.PathSegment.Line,.525*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,.475*n)),o.add(new go.PathSegment(go.PathSegment.Line,.85*e,.315*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.32*n)),o.add(new go.PathSegment(go.PathSegment.Line,.65*e,.05*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.575*e,0,.65*e,.05*n,.625*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.38*e,.0105*n));o=new go.PathFigure(.675*e,.575*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.875*e,.525*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.775*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.85*e,.95*n,e,.8*n,e,.85*n)),o.add(new go.PathSegment(go.PathSegment.Line,.65*e,.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,.65*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.55*e,.85*n)),o.add(new go.PathSegment(go.PathSegment.Line,.65*e,.725*n)),o.add(new go.PathSegment(go.PathSegment.Line,.65*e,.775*n)),o.add(new go.PathSegment(go.PathSegment.Line,.7*e,.775*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.775*n)),o.add(new go.PathSegment(go.PathSegment.Move,.675*e,.575*n)),o.add(new go.PathSegment(go.PathSegment.Line,.775*e,.775*n)),i}),go.Shape.defineFigureGenerator("BpmnEventTimer",function(t,e,n){var i=new go.Geometry,o=.5*KAPPA,r=new go.PathFigure(e,.5*n,!0);i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,n,e,(.5+o)*n,(.5+o)*e,n)),r.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*n,(.5-o)*e,n,0,(.5+o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0,0,(.5-o)*n,(.5-o)*e,0)),r.add(new go.PathSegment(go.PathSegment.Bezier,e,.5*n,(.5+o)*e,0,e,(.5-o)*n));o=new go.PathFigure(.5*e,0,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.15*n)),o.add(new go.PathSegment(go.PathSegment.Move,.5*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.85*n)),o.add(new go.PathSegment(go.PathSegment.Move,0,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.15*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Move,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.85*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Move,.5*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.58*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Move,.5*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.78*e,.54*n)),i}),go.Shape.defineFigureGenerator("Package",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,.15*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,.15*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n).close());o=new go.PathFigure(0,.15*n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,0)),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.65*e,.15*n).close()),i.spot1=new go.Spot(0,.1),i.spot2=new go.Spot(1,1),i}),go.Shape.defineFigureGenerator("Class",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,0).close());o=new go.PathFigure(0,.2*n,!1);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,.2*n).close());o=new go.PathFigure(0,.5*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n).close()),i}),go.Shape.defineFigureGenerator("Component",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(e,n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.15*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.15*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,e,n).close());o=new go.PathFigure(0,.2*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.45*e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,.45*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.4*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.2*n).close());o=new go.PathFigure(0,.6*n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.45*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.45*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.6*n).close()),i}),go.Shape.defineFigureGenerator("Boat Shipment",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.15*e,.6*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.15*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.15*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.85*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.85*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.15*e,.6*n));o=new go.PathFigure(.15*e,.6*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.85*e,.6*n)),i}),go.Shape.defineFigureGenerator("Customer/Supplier",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(e,n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.66*e,.33*n)),o.add(new go.PathSegment(go.PathSegment.Line,.66*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.33*e,.33*n)),o.add(new go.PathSegment(go.PathSegment.Line,.33*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,0,.33*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Line,e,n).close()),i}),go.Shape.defineFigureGenerator("Workcell",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.65*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.65*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Line,.35*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Line,.35*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n).close()),i}),go.Shape.defineFigureGenerator("Supermarket",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.33*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.33*n)),o.add(new go.PathSegment(go.PathSegment.Move,e,.33*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.66*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.66*n)),o.add(new go.PathSegment(go.PathSegment.Move,e,.66*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),i}),go.Shape.defineFigureGenerator("TruckShipment",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,0).close());var r=new go.PathFigure(e,.8*n,!0);i.add(r),r.add(new go.PathSegment(go.PathSegment.Line,e,.4*n)),r.add(new go.PathSegment(go.PathSegment.Line,.6*e,.4*n)),r.add(new go.PathSegment(go.PathSegment.Line,.6*e,.8*n)),r.add(new go.PathSegment(go.PathSegment.Line,e,.8*n).close());o=.1*KAPPA,r=new go.PathFigure(.1*e,.9*n,!0);i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.2*e,.8*n,.1*e,(.9-o)*n,(.2-o)*e,.8*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,(.2+.1)*e,.9*n,(.2+o)*e,.8*n,(.2+.1)*e,(.9-o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.2*e,+n,(.2+.1)*e,(.9+o)*n,(.2+o)*e,+n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.1*e,.9*n,(.2-o)*e,+n,.1*e,(.9+o)*n).close()),o=.1*KAPPA;r=new go.PathFigure((.8-.1)*e,.9*n,!0);return i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.8*e,.8*n,(.8-.1)*e,(.9-o)*n,(.8-o)*e,.8*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.9*e,.9*n,(.8+o)*e,.8*n,.9*e,(.9-o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.8*e,+n,.9*e,(.9+o)*n,(.8+o)*e,+n)),r.add(new go.PathSegment(go.PathSegment.Bezier,(.8-.1)*e,.9*n,(.8-o)*e,+n,(.8-.1)*e,(.9+o)*n).close()),i}),go.Shape.defineFigureGenerator("KanbanPost",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.2*e,0,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,0)),o.add(new go.PathSegment(go.PathSegment.Move,.5*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,n)),o.add(new go.PathSegment(go.PathSegment.Move,.5*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,n)),i}),go.Shape.defineFigureGenerator("Forklift",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,0,0));var r=new go.PathFigure(0,.5*n,!0);i.add(r),r.add(new go.PathSegment(go.PathSegment.Line,0,.8*n)),r.add(new go.PathSegment(go.PathSegment.Line,.5*e,.8*n)),r.add(new go.PathSegment(go.PathSegment.Line,.5*e,.5*n)),r.add(new go.PathSegment(go.PathSegment.Line,0,.5*n));o=new go.PathFigure(.5*e,.8*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,.55*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,.55*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.8*n));r=new go.PathFigure(.5*e,.7*n,!1);i.add(r),r.add(new go.PathSegment(go.PathSegment.Line,e,.7*n));o=.1*KAPPA,r=new go.PathFigure(0*e,.9*n,!0);i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.1*e,.8*n,0*e,(.9-o)*n,(.1-o)*e,.8*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.2*e,.9*n,(.1+o)*e,.8*n,.2*e,(.9-o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.1*e,+n,.2*e,(.9+o)*n,(.1+o)*e,+n)),r.add(new go.PathSegment(go.PathSegment.Bezier,0*e,.9*n,(.1-o)*e,+n,0*e,(.9+o)*n)),o=.1*KAPPA;r=new go.PathFigure((.4-.1)*e,.9*n,!0);return i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.4*e,.8*n,(.4-.1)*e,(.9-o)*n,(.4-o)*e,.8*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.9*n,(.4+o)*e,.8*n,.5*e,(.9-o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.4*e,+n,.5*e,(.9+o)*n,(.4+o)*e,+n)),r.add(new go.PathSegment(go.PathSegment.Bezier,(.4-.1)*e,.9*n,(.4-o)*e,+n,(.4-.1)*e,(.9+o)*n)),i}),go.Shape.defineFigureGenerator("RailShipment",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.1*e,.4*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.45*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Line,.45*e,.9*n)),o.add(new go.PathSegment(go.PathSegment.Line,.1*e,.9*n)),o.add(new go.PathSegment(go.PathSegment.Line,.1*e,.4*n).close());var r=new go.PathFigure(.45*e,.7*n,!1);i.add(r),r.add(new go.PathSegment(go.PathSegment.Line,.55*e,.7*n));var a=new go.PathFigure(.55*e,.4*n,!0);i.add(a),a.add(new go.PathSegment(go.PathSegment.Line,.9*e,.4*n)),a.add(new go.PathSegment(go.PathSegment.Line,.9*e,.9*n)),a.add(new go.PathSegment(go.PathSegment.Line,.55*e,.9*n)),a.add(new go.PathSegment(go.PathSegment.Line,.55*e,.4*n).close());o=.05*KAPPA,r=.175,a=new go.PathFigure((.175-.05)*e,.95*n,!0);i.add(a),a.add(new go.PathSegment(go.PathSegment.Bezier,.175*e,(.95-.05)*n,(.175-.05)*e,(.95-o)*n,(.175-o)*e,(.95-.05)*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,(.175+.05)*e,.95*n,(.175+o)*e,(.95-.05)*n,(.175+.05)*e,(.95-o)*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.175*e,+n,(.175+.05)*e,(.95+o)*n,(.175+o)*e,+n)),a.add(new go.PathSegment(go.PathSegment.Bezier,(.175-.05)*e,.95*n,(.175-o)*e,+n,(.175-.05)*e,(.95+o)*n));o=.05*KAPPA,r=.375,a=new go.PathFigure(.325*e,.95*n,!0);i.add(a),a.add(new go.PathSegment(go.PathSegment.Bezier,.375*e,(.95-.05)*n,.325*e,(.95-o)*n,(.375-o)*e,(.95-.05)*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.425*e,.95*n,(.375+o)*e,(.95-.05)*n,.425*e,(.95-o)*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.375*e,+n,.425*e,(.95+o)*n,(.375+o)*e,+n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.325*e,.95*n,(.375-o)*e,+n,.325*e,(.95+o)*n));o=.05*KAPPA,r=.625,a=new go.PathFigure(.575*e,.95*n,!0);i.add(a),a.add(new go.PathSegment(go.PathSegment.Bezier,.625*e,(.95-.05)*n,.575*e,(.95-o)*n,(.625-o)*e,(.95-.05)*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.675*e,.95*n,(.625+o)*e,(.95-.05)*n,.675*e,(.95-o)*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.625*e,+n,.675*e,(.95+o)*n,(.625+o)*e,+n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.575*e,.95*n,(.625-o)*e,+n,.575*e,(.95+o)*n));o=.05*KAPPA,r=.825,a=new go.PathFigure((r-.05)*e,.95*n,!0);i.add(a),a.add(new go.PathSegment(go.PathSegment.Bezier,r*e,(.95-.05)*n,(r-.05)*e,(.95-o)*n,(r-o)*e,(.95-.05)*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.875*e,.95*n,(r+o)*e,(.95-.05)*n,.875*e,(.95-o)*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,r*e,+n,.875*e,(.95+o)*n,(r+o)*e,+n)),a.add(new go.PathSegment(go.PathSegment.Bezier,(r-.05)*e,.95*n,(r-o)*e,+n,(r-.05)*e,(.95+o)*n).close());o=new go.PathFigure(0,n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,n).close()),i}),go.Shape.defineFigureGenerator("Warehouse",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,0).close());var r=new go.PathFigure(0,.2*n,!1);i.add(r),r.add(new go.PathSegment(go.PathSegment.Line,e,.2*n).close());var a=new go.PathFigure(.15*e,n,!0);i.add(a),a.add(new go.PathSegment(go.PathSegment.Line,.15*e,.5*n)),a.add(new go.PathSegment(go.PathSegment.Line,.4*e,.5*n)),a.add(new go.PathSegment(go.PathSegment.Line,.4*e,n)),a.add(new go.PathSegment(go.PathSegment.Line,.15*e,n).close());o=.05*KAPPA,r=.775,a=new go.PathFigure(.3*e,r*n,!0);return i.add(a),a.add(new go.PathSegment(go.PathSegment.Bezier,.35*e,.725*n,.3*e,(r-o)*n,(.35-o)*e,.725*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,(.35+.05)*e,r*n,(.35+o)*e,.725*n,(.35+.05)*e,(r-o)*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.35*e,(.05+r)*n,(.35+.05)*e,(r+o)*n,(.35+o)*e,(.05+r)*n)),a.add(new go.PathSegment(go.PathSegment.Bezier,.3*e,r*n,(.35-o)*e,(.05+r)*n,.3*e,(r+o)*n).close()),i}),go.Shape.defineFigureGenerator("ControlCenter",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,.1*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,.1*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Move,.1*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,.8*n).close()),i}),go.Shape.defineFigureGenerator("Bluetooth",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,.75*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.25*n)),i}),go.Shape.defineFigureGenerator("Bookmark",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,0,0)),o.add(new go.PathSegment(go.PathSegment.Move,.2*e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Move,.2*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.4*n)),i}),go.Shape.defineFigureGenerator("Bookmark",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),o.add(new go.PathSegment(go.PathSegment.Line,0,0)),o.add(new go.PathSegment(go.PathSegment.Move,.2*e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Move,.2*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.4*n)),i}),go.Shape.defineFigureGenerator("Globe",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.5*e,0,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,n)),o.add(new go.PathSegment(go.PathSegment.Move,0,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Move,.5*e,0)),o.add(new go.PathSegment(go.PathSegment.Bezier,e,.5*n,.75*e,0,e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,n,e,.75*n,.75*e,n)),o.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*n,.25*e,n,0,.75*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0,0,.25*n,.25*e,0)),o.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,n,.15*e,.25*n,.15*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0,.85*e,.75*n,.85*e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Move,.1675*e,.15*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.8325*e,.15*n,.35*e,.3*n,.65*e,.3*n)),o.add(new go.PathSegment(go.PathSegment.Move,.1675*e,.85*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.8325*e,.85*n,.35*e,.7*n,.65*e,.7*n)),i}),go.Shape.defineFigureGenerator("Wave",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,.25*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Bezier,.3*e,.25*n,.1*e,0,.2*e,0)),o.add(new go.PathSegment(go.PathSegment.Bezier,.7*e,.25*n,.425*e,.5*n,.575*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,e,.25*n,.8*e,0,.9*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Move,0,.25*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.75*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.3*e,.75*n,.1*e,.5*n,.2*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.7*e,.75*n,.425*e,n,.575*e,n)),o.add(new go.PathSegment(go.PathSegment.Bezier,e,.75*n,.8*e,.5*n,.9*e,.5*n)),i}),go.Shape.defineFigureGenerator("Operator",function(t,e,n){var i=new go.Geometry,o=.3*KAPPA,r=new go.PathFigure(.2*e,.7*n,!0);i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,(.7-.3)*n,.2*e,(.7-o)*n,(.5-o)*e,(.7-.3)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.8*e,.7*n,(.5+o)*e,(.7-.3)*n,.8*e,(.7-o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,+n,.8*e,(.7+o)*n,(.5+o)*e,+n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.2*e,.7*n,(.5-o)*e,+n,.2*e,(.7+o)*n));o=new go.PathFigure(0,.7*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Bezier,e,.7*n,0,0,e,0)),i}),go.Shape.defineFigureGenerator("TripleFanBlades",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.5*e,0,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.65*n,.65*e,.3*n,.65*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0,.35*e,.5*n,.35*e,.3*n)),o.add(new go.PathSegment(go.PathSegment.Move,.5*e,.65*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,0,n,.3*e,.6*n,.1*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.65*n,.2*e,n,.35*e,.95*n)),o.add(new go.PathSegment(go.PathSegment.Move,.5*e,.65*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,e,n,.7*e,.6*n,.9*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.65*n,.8*e,n,.65*e,.95*n)),i}),go.Shape.defineFigureGenerator("CentrifugalPump",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(e,0,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,0)),o.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*n,0,.075*n,0,.5*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.4*e,n,0,n,.4*e,n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.8*e,.4*n,.8*e,n,.85*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,0)),i}),go.Shape.defineFigureGenerator("Battery",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Move,.4*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,.1*n));o=new go.PathFigure(0,.6*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Move,0,.4*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.4*n)),i}),go.Shape.defineFigureGenerator("Delete",function(t,e,n){var i=new go.Geometry,o=.5*KAPPA,r=new go.PathFigure(0*e,.5*n,!0);i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0*n,0*e,(.5-o)*n,(.5-o)*e,0*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,+e,.5*n,(.5+o)*e,0*n,+e,(.5-o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,+n,+e,(.5+o)*n,(.5+o)*e,+n)),r.add(new go.PathSegment(go.PathSegment.Bezier,0*e,.5*n,(.5-o)*e,+n,0*e,(.5+o)*n));o=new go.PathFigure(.15*e,.5*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.85*e,.5*n)),i}),go.Shape.defineFigureGenerator("Flag",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,.1*n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Move,0,.1*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.1*n,.15*e,0,.35*e,0)),o.add(new go.PathSegment(go.PathSegment.Bezier,e,.1*n,.65*e,.2*n,.85*e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.5*n,.85*e,.6*n,.65*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,0,.5*n,.35*e,.4*n,.15*e,.4*n).close()),i}),go.Shape.defineFigureGenerator("Help",function(t,e,n){var i=new go.Geometry,o=.5*KAPPA,r=new go.PathFigure(0*e,.5*n,!1);i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0*n,0*e,(.5-o)*n,(.5-o)*e,0*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,+e,.5*n,(.5+o)*e,0*n,+e,(.5-o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,+n,+e,(.5+o)*n,(.5+o)*e,+n)),r.add(new go.PathSegment(go.PathSegment.Bezier,0*e,.5*n,(.5-o)*e,+n,0*e,(.5+o)*n).close()),o=.05*KAPPA;r=new go.PathFigure(.45*e,.8*n,!1);return i.add(r),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.75*n,.45*e,(.8-o)*n,(.5-o)*e,.75*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.55*e,.8*n,(.5+o)*e,.75*n,.55*e,(.8-o)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,(.8+.05)*n,.55*e,(.8+o)*n,(.5+o)*e,(.8+.05)*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.45*e,.8*n,(.5-o)*e,(.8+.05)*n,.45*e,(.8+o)*n).close()),r.add(new go.PathSegment(go.PathSegment.Move,.5*e,.7*n)),r.add(new go.PathSegment(go.PathSegment.Line,.5*e,.5*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.5*e,.2*n,.75*e,.475*n,.75*e,.225*n)),r.add(new go.PathSegment(go.PathSegment.Bezier,.3*e,.35*n,.4*e,.2*n,.3*e,.25*n)),i}),go.Shape.defineFigureGenerator("Location",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(.5*e,n,!0).add(new go.PathSegment(go.PathSegment.Line,.75*e,.5*n)).add(new go.PathSegment(go.PathSegment.Bezier,.5*e,0,.975*e,.025*n,.5*e,0)).add(new go.PathSegment(go.PathSegment.Bezier,.25*e,.5*n,.5*e,0,.025*e,.025*n).close()).add(new go.PathSegment(go.PathSegment.Move,.5*e,.2*n)).add(new go.PathSegment(go.PathSegment.Arc,270,360,.5*e,.3*n,.1*e,.1*n).close()))}),go.Shape.defineFigureGenerator("Lock",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,.5*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.5*n));o=new go.PathFigure(.2*e,.5*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Move,.2*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,.3*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.8*e,.3*n,.25*e,0,.75*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.3*n)),i}),go.Shape.defineFigureGenerator("Unlocked",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,.5*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,n)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.5*n));o=new go.PathFigure(.2*e,.5*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Move,.2*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,.3*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.8*e,.3*n,.25*e,0,.75*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.35*n)),i}),go.Shape.defineFigureGenerator("Gear",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(.9375*e,.56246875*n,!0).add(new go.PathSegment(go.PathSegment.Line,.9375*e,.4375*n)).add(new go.PathSegment(go.PathSegment.Line,.80621875*e,.4375*n)).add(new go.PathSegment(go.PathSegment.Bezier,.763*e,.3316875*n,.79840625*e,.39915625*n,.7834375*e,.3635*n)).add(new go.PathSegment(go.PathSegment.Line,.8566875*e,.23796875*n)).add(new go.PathSegment(go.PathSegment.Line,.76825*e,.14959375*n)).add(new go.PathSegment(go.PathSegment.Line,.67596875*e,.24184375*n)).add(new go.PathSegment(go.PathSegment.Bezier,.5625*e,.19378125*n,.64228125*e,.2188125*n,.603875*e,.2021875*n)).add(new go.PathSegment(go.PathSegment.Line,.5625*e,.0625*n)).add(new go.PathSegment(go.PathSegment.Line,.4375*e,.0625*n)).add(new go.PathSegment(go.PathSegment.Line,.4375*e,.19378125*n)).add(new go.PathSegment(go.PathSegment.Bezier,.32775*e,.239375*n,.39759375*e,.20190625*n,.36053125*e,.2176875*n)).add(new go.PathSegment(go.PathSegment.Line,.2379375*e,.14959375*n)).add(new go.PathSegment(go.PathSegment.Line,.14953125*e,.2379375*n)).add(new go.PathSegment(go.PathSegment.Line,.23934375*e,.3278125*n)).add(new go.PathSegment(go.PathSegment.Bezier,.19378125*e,.4375*n,.21765625*e,.36059375*n,.201875*e,.397625*n)).add(new go.PathSegment(go.PathSegment.Line,.0625*e,.4375*n)).add(new go.PathSegment(go.PathSegment.Line,.0625*e,.5625*n)).add(new go.PathSegment(go.PathSegment.Line,.1938125*e,.5625*n)).add(new go.PathSegment(go.PathSegment.Bezier,.241875*e,.67596875*n,.20221875*e,.603875*n,.21884375*e,.64228125*n)).add(new go.PathSegment(go.PathSegment.Line,.1495625*e,.76825*n)).add(new go.PathSegment(go.PathSegment.Line,.238*e,.8566875*n)).add(new go.PathSegment(go.PathSegment.Line,.3316875*e,.76296875*n)).add(new go.PathSegment(go.PathSegment.Bezier,.43753125*e,.80621875*n,.36353125*e,.78340625*n,.3991875*e,.79840625*n)).add(new go.PathSegment(go.PathSegment.Line,.43753125*e,.9375*n)).add(new go.PathSegment(go.PathSegment.Line,.5625*e,.9375*n)).add(new go.PathSegment(go.PathSegment.Line,.5625*e,.80621875*n)).add(new go.PathSegment(go.PathSegment.Bezier,.67225*e,.760625*n,.602375*e,.79809375*n,.63946875*e,.78234375*n)).add(new go.PathSegment(go.PathSegment.Line,.76828125*e,.8566875*n)).add(new go.PathSegment(go.PathSegment.Line,.85671875*e,.76825*n)).add(new go.PathSegment(go.PathSegment.Line,.76065625*e,.67221875*n)).add(new go.PathSegment(go.PathSegment.Bezier,.80621875*e,.56246875*n,.78234375*e,.63940625*n,.798125*e,.602375*n)).add(new go.PathSegment(go.PathSegment.Line,.9375*e,.56246875*n).close()).add(new go.PathSegment(go.PathSegment.Move,.5*e,.6*n)).add(new go.PathSegment(go.PathSegment.Arc,90,360,.5*e,.5*n,.1*e,.1*n).close()))}),go.Shape.defineFigureGenerator("Hand",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,.5*n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Bezier,.1*e,.3*n,0,.375*n,.05*e,.325*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.45*e,.075*n,.3*e,.225*n,.4*e,.175*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.525*e,.075*n,.46*e,.05*n,.525*e,.05*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.3*e,.4*n,.525*e,.275*n,.475*e,.325*n)),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.9*e,.55*n,e,.4*n,e,.55*n)),o.add(new go.PathSegment(go.PathSegment.Line,.425*e,.55*n)),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,.55*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.6*e,.7*n,.675*e,.55*n,.675*e,.7*n)),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,.7*n)),o.add(new go.PathSegment(go.PathSegment.Line,.575*e,.7*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.575*e,.85*n,.65*e,.7*n,.65*e,.85*n)),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,.85*n)),o.add(new go.PathSegment(go.PathSegment.Line,.525*e,.85*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.535*e,n,.61*e,.85*n,.61*e,n)),o.add(new go.PathSegment(go.PathSegment.Bezier,0,.9*n,.435*e,n,0,n).close()),i}),go.Shape.defineFigureGenerator("Map",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,.2*n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.25*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,n)),o.add(new go.PathSegment(go.PathSegment.Line,.25*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,n).close()),o.add(new go.PathSegment(go.PathSegment.Move,.25*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.25*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Move,.5*e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,n)),o.add(new go.PathSegment(go.PathSegment.Move,.75*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,.8*n)),i}),go.Shape.defineFigureGenerator("Eject",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.7*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.7*n).close());o=new go.PathFigure(0,.6*n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,0).close()),i}),go.Shape.defineFigureGenerator("Pencil",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Line,.2*e,.1*n)).add(new go.PathSegment(go.PathSegment.Line,e,.9*n)).add(new go.PathSegment(go.PathSegment.Line,.9*e,n)).add(new go.PathSegment(go.PathSegment.Line,.1*e,.2*n).close()))}),go.Shape.defineFigureGenerator("Building",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(+e,+n,!1);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,+n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.85*n)),o.add(new go.PathSegment(go.PathSegment.Line,.046*e,.85*n)),o.add(new go.PathSegment(go.PathSegment.Line,.046*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.3*n)),o.add(new go.PathSegment(go.PathSegment.Line,.046*e,.3*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,0*n)),o.add(new go.PathSegment(go.PathSegment.Line,.954*e,.3*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.3*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.954*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.954*e,.85*n)),o.add(new go.PathSegment(go.PathSegment.Line,e,.85*n).close());o=new go.PathFigure(.126*e,.85*n,!1);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.126*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.322*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.322*e,.85*n).close());o=new go.PathFigure(.402*e,.85*n,!1);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.402*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.598*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.598*e,.85*n).close());o=new go.PathFigure(.678*e,.85*n,!1);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.678*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.874*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.874*e,.85*n).close());o=new go.PathFigure(.5*e,.1*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.196*e,.3*n)),o.add(new go.PathSegment(go.PathSegment.Line,.804*e,.3*n).close()),i}),go.Shape.defineFigureGenerator("Staircase",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,+n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,+e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,+e,.15*n)),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,.15*n)),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,.35*n)),o.add(new go.PathSegment(go.PathSegment.Line,.55*e,.35*n)),o.add(new go.PathSegment(go.PathSegment.Line,.55*e,.55*n)),o.add(new go.PathSegment(go.PathSegment.Line,.35*e,.55*n)),o.add(new go.PathSegment(go.PathSegment.Line,.35*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.15*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.15*e,.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.95*n).close()),i}),go.Shape.defineFigureGenerator("5Bars",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,+n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.184*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.184*e,n*(1-.184)).close());o=new go.PathFigure(.204*e,n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.204*e,n*(1-.184))),o.add(new go.PathSegment(go.PathSegment.Line,.388*e,.632*n)),o.add(new go.PathSegment(go.PathSegment.Line,.388*e,+n).close());o=new go.PathFigure(.408*e,n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.408*e,.632*n)),o.add(new go.PathSegment(go.PathSegment.Line,.592*e,n*(1-.552))),o.add(new go.PathSegment(go.PathSegment.Line,.592*e,+n).close());o=new go.PathFigure(.612*e,n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.612*e,n*(1-.552))),o.add(new go.PathSegment(go.PathSegment.Line,.796*e,.264*n)),o.add(new go.PathSegment(go.PathSegment.Line,.796*e,+n).close());o=new go.PathFigure(.816*e,n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.816*e,.264*n)),o.add(new go.PathSegment(go.PathSegment.Line,+e,n*(1-.184*5))),o.add(new go.PathSegment(go.PathSegment.Line,+e,+n).close()),i}),go.Shape.defineFigureGenerator("PC",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,0,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.3*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.3*e,0).close());o=new go.PathFigure(.055*e,.07*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.245*e,.07*n)),o.add(new go.PathSegment(go.PathSegment.Line,.245*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,.055*e,.1*n).close());o=new go.PathFigure(.055*e,.13*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.245*e,.13*n)),o.add(new go.PathSegment(go.PathSegment.Line,.245*e,.16*n)),o.add(new go.PathSegment(go.PathSegment.Line,.055*e,.16*n).close());o=new go.PathFigure(.055*e,.18*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.245*e,.18*n)),o.add(new go.PathSegment(go.PathSegment.Line,.245*e,.21*n)),o.add(new go.PathSegment(go.PathSegment.Line,.055*e,.21*n).close());o=new go.PathFigure(+e,0,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,0)),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,.65*n)),o.add(new go.PathSegment(go.PathSegment.Line,+e,.65*n).close()),i}),go.Shape.defineFigureGenerator("Plane",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.55*e,n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,.7*n)),o.add(new go.PathSegment(go.PathSegment.Line,.1*e,.475*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.35*e,.525*n,0,.4*n,.225*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,.475*n)),o.add(new go.PathSegment(go.PathSegment.Line,.15*e,.35*n)),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,.325*n)),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,.325*n)),o.add(new go.PathSegment(go.PathSegment.Line,.85*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Bezier,.9*e,.2*n,.975*e,0,e,.08*n)),o.add(new go.PathSegment(go.PathSegment.Line,.7*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,.55*e,n).close()),i}),go.Shape.defineFigureGenerator("Key",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(+e,.5*n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.4*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.35*n)),o.add(new go.PathSegment(go.PathSegment.Line,.45*e,.35*n)),o.add(new go.PathSegment(go.PathSegment.Line,.3*e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,.15*e,.2*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.35*n)),o.add(new go.PathSegment(go.PathSegment.Line,0,.65*n)),o.add(new go.PathSegment(go.PathSegment.Line,.15*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,.3*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,.45*e,.65*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.65*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.65*e,.55*n)),o.add(new go.PathSegment(go.PathSegment.Line,.7*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,.55*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.6*n)),o.add(new go.PathSegment(go.PathSegment.Line,.85*e,.575*n)),o.add(new go.PathSegment(go.PathSegment.Line,.9*e,.6*n).close()),o.add(new go.PathSegment(go.PathSegment.Move,.17*e,.425*n)),o.add(new go.PathSegment(go.PathSegment.Arc,270,360,.17*e,.5*n,.075*e,.075*n).close()),i}),go.Shape.defineFigureGenerator("FilmTape",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0,0,!1);i.add(o),o.add(new go.PathSegment(go.PathSegment.Arc,270,180,0*e,.3*e,.055*e)),o.add(new go.PathSegment(go.PathSegment.Line,0,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.08*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.08*e,.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,.136*e,.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,.136*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.192*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.192*e,.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,.248*e,.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,.248*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.304*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.304*e,.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(.08+.28),.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(.08+.28),+n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(.08+.336),+n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(.08+.336),.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(.08+.392),.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(.08+.392),+n)),o.add(new go.PathSegment(go.PathSegment.Line,.528*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.528*e,.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,.584*e,.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,.584*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.64*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.64*e,.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,.696*e,.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,.696*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.752*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.752*e,.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(.08+.728),.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(.08+.728),+n)),o.add(new go.PathSegment(go.PathSegment.Line,.864*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.864*e,.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(.08+.84),.95*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(.08+.84),+n)),o.add(new go.PathSegment(go.PathSegment.Line,+e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,+e,+n));o=new go.PathFigure(0,0,!1);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,+e,0*n)),o.add(new go.PathSegment(go.PathSegment.Arc,270,-180,+e,.3*e,.055*e)),o.add(new go.PathSegment(go.PathSegment.Line,+e,+n));o=new go.PathFigure(.11*e,.1*n,!1);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.35133333*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,.35133333*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,.11*e,.8*n).close());o=new go.PathFigure(.37933333*e,.1*n,!1);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.62066666*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,.62066666*e,.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,.37933333*e,.8*n).close());o=new go.PathFigure(e*(.59266666+.056),.1*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,e*(.83399999+.056),.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(.83399999+.056),.8*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(.59266666+.056),.8*n).close()),i}),go.Shape.defineFigureGenerator("FloppyDisk",function(t,e,n){var i=new go.Geometry,o=8*KAPPA,r=new go.PathFigure(8,0,!1);i.add(r),r.add(new go.PathSegment(go.PathSegment.Line,.86*e,0)),r.add(new go.PathSegment(go.PathSegment.Line,+e,.14*n)),r.add(new go.PathSegment(go.PathSegment.Line,e,n-8)),r.add(new go.PathSegment(go.PathSegment.Bezier,e-8,n,e,n-o,e-o,n)),r.add(new go.PathSegment(go.PathSegment.Line,8,n)),r.add(new go.PathSegment(go.PathSegment.Bezier,0,n-8,o,n,0,n-o)),r.add(new go.PathSegment(go.PathSegment.Line,0,8)),r.add(new go.PathSegment(go.PathSegment.Bezier,8,0,0,o,o,0).close());o=new go.PathFigure(.83*e,0,!1);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.83*e,.3*n)),o.add(new go.PathSegment(go.PathSegment.Line,.17*e,.3*n)),o.add(new go.PathSegment(go.PathSegment.Line,.17*e,0*n).close());o=new go.PathFigure(.83*e,+n,!1);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.83*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.17*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.17*e,+n).close());o=new go.PathFigure(.78*e,.05*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.66*e,.05*n)),o.add(new go.PathSegment(go.PathSegment.Line,.66*e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Line,.78*e,.25*n).close()),i}),go.Shape.defineFigureGenerator("SpeechBubble",function(t,e,n){var i=t?t.parameter1:NaN;(isNaN(i)||i<0)&&(i=15),i=Math.min(i,e/3);var o=(i=Math.min(i,n/3))*KAPPA,r=.8*n,a=new go.Geometry,t=new go.PathFigure(i,0,!0);return a.add(t),t.add(new go.PathSegment(go.PathSegment.Line,e-i,0)),t.add(new go.PathSegment(go.PathSegment.Bezier,e,i,e-o,0,e,o)),t.add(new go.PathSegment(go.PathSegment.Line,e,r-i)),t.add(new go.PathSegment(go.PathSegment.Bezier,e-i,r,e,r-o,e-o,r)),t.add(new go.PathSegment(go.PathSegment.Line,.7*e,r)),t.add(new go.PathSegment(go.PathSegment.Line,.7*e,n)),t.add(new go.PathSegment(go.PathSegment.Line,.55*e,r)),t.add(new go.PathSegment(go.PathSegment.Line,i,r)),t.add(new go.PathSegment(go.PathSegment.Bezier,0,r-i,o,r,0,r-o)),t.add(new go.PathSegment(go.PathSegment.Line,0,i)),t.add(new go.PathSegment(go.PathSegment.Bezier,i,0,0,o,o,0).close()),1<o?(a.spot1=new go.Spot(0,0,o,o),a.spot2=new go.Spot(1,.8,-o,-o)):(a.spot1=go.Spot.TopLeft,a.spot2=new go.Spot(1,.8)),a}),go.Shape.defineFigureGenerator("Repeat",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0*e,.45*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.25*e,0*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.3*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.3*e,.9*n)),o.add(new go.PathSegment(go.PathSegment.Line,.6*e,.9*n)),o.add(new go.PathSegment(go.PathSegment.Line,.65*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.2*e,.45*n).close());o=new go.PathFigure(+e,.55*n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.55*n)),o.add(new go.PathSegment(go.PathSegment.Line,.7*e,.55*n)),o.add(new go.PathSegment(go.PathSegment.Line,.7*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,.4*e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,.35*e,0*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,0*n)),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,.55*n).close()),i}),go.Shape.defineFigureGenerator("Windows",function(t,e,n){return(new go.Geometry).add(new go.PathFigure(0,0,!0).add(new go.PathSegment(go.PathSegment.Line,e,0)).add(new go.PathSegment(go.PathSegment.Line,e,n)).add(new go.PathSegment(go.PathSegment.Line,0,n).close()).add(new go.PathSegment(go.PathSegment.Move,.4*e,.4*n)).add(new go.PathSegment(go.PathSegment.Line,.4*e,.8*n)).add(new go.PathSegment(go.PathSegment.Line,.9*e,.8*n)).add(new go.PathSegment(go.PathSegment.Line,.9*e,.4*n).close()).add(new go.PathSegment(go.PathSegment.Move,.2*e,.1*n)).add(new go.PathSegment(go.PathSegment.Line,.2*e,.6*n)).add(new go.PathSegment(go.PathSegment.Line,.7*e,.6*n)).add(new go.PathSegment(go.PathSegment.Line,.7*e,.1*n).close()).add(new go.PathSegment(go.PathSegment.Move,.1*e,.6*n)).add(new go.PathSegment(go.PathSegment.Line,.1*e,.9*n)).add(new go.PathSegment(go.PathSegment.Line,.5*e,.9*n)).add(new go.PathSegment(go.PathSegment.Line,.5*e,.6*n).close()))}),go.Shape.defineFigureGenerator("Terminal",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0*e,.1*n,!1);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,+e,.1*n)),o.add(new go.PathSegment(go.PathSegment.Line,+e,.9*n)),o.add(new go.PathSegment(go.PathSegment.Line,0*e,.9*n).close());o=new go.PathFigure(.1*e,.2*n,!0);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.1*e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Line,.22*e,.285*n)),o.add(new go.PathSegment(go.PathSegment.Line,.1*e,.32*n)),o.add(new go.PathSegment(go.PathSegment.Line,.1*e,.37*n)),o.add(new go.PathSegment(go.PathSegment.Line,.275*e,.32*n)),o.add(new go.PathSegment(go.PathSegment.Line,.275*e,.25*n).close());o=new go.PathFigure(.28*e,.37*n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.45*e,.37*n)),o.add(new go.PathSegment(go.PathSegment.Line,.45*e,.41*n)),o.add(new go.PathSegment(go.PathSegment.Line,.28*e,.41*n).close()),i}),go.Shape.defineFigureGenerator("Beaker",function(t,e,n){var i=new go.Geometry,o=15*KAPPA,r=new go.PathFigure(.62*e,.475*n,!0);return i.add(r),r.add(new go.PathSegment(go.PathSegment.Line,e,n-15)),r.add(new go.PathSegment(go.PathSegment.Bezier,e-15,n,e,n-o,e-o,n)),r.add(new go.PathSegment(go.PathSegment.Line,15,n)),r.add(new go.PathSegment(go.PathSegment.Bezier,0,n-15,o,n,0,n-o)),r.add(new go.PathSegment(go.PathSegment.Line,.38*e,.475*n)),r.add(new go.PathSegment(go.PathSegment.Line,.38*e,.03*n)),r.add(new go.PathSegment(go.PathSegment.Line,.36*e,0*n)),r.add(new go.PathSegment(go.PathSegment.Line,.64*e,0*n)),r.add(new go.PathSegment(go.PathSegment.Line,.62*e,.03*n).close()),1<o?(i.spot1=new go.Spot(0,0,o,o),i.spot2=new go.Spot(1,1,-o,-o)):(i.spot1=go.Spot.TopLeft,i.spot2=go.Spot.BottomRight),i}),go.Shape.defineFigureGenerator("Download",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0*e,+n,!0);i.add(o);var r=.1/.3;o.add(new go.PathSegment(go.PathSegment.Line,+e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,+e,n*(1-r))),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,0*n)),o.add(new go.PathSegment(go.PathSegment.Line,.66*e,0*n)),o.add(new go.PathSegment(go.PathSegment.Line,.66*e,.055*n)),o.add(new go.PathSegment(go.PathSegment.Line,.755*e,.055*n)),o.add(new go.PathSegment(go.PathSegment.Line,.93*e,n*(1-r))),o.add(new go.PathSegment(go.PathSegment.Line,.64*e,n*(1-r))),o.add(new go.PathSegment(go.PathSegment.Line,.61*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.39*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.36*e,n*(1-r))),o.add(new go.PathSegment(go.PathSegment.Line,.07*e,n*(1-r))),o.add(new go.PathSegment(go.PathSegment.Line,.245*e,.055*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(1-.66),.055*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(1-.66),0*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(1-.8),0*n)),o.add(new go.PathSegment(go.PathSegment.Line,0*e,n*(1-r)).close());r=new go.PathFigure(.4*e,0*n,!0);return i.add(r),r.add(new go.PathSegment(go.PathSegment.Line,.4*e,.44*n)),r.add(new go.PathSegment(go.PathSegment.Line,.26*e,.44*n)),r.add(new go.PathSegment(go.PathSegment.Line,.5*e,.66*n)),r.add(new go.PathSegment(go.PathSegment.Line,.74*e,.44*n)),r.add(new go.PathSegment(go.PathSegment.Line,.6*e,.44*n)),r.add(new go.PathSegment(go.PathSegment.Line,.6*e,0*n).close()),i}),go.Shape.defineFigureGenerator("Bin",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0*e,+n,!0);i.add(o);var r=.1/.3;return o.add(new go.PathSegment(go.PathSegment.Line,+e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,+e,n*(1-r))),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,0*n)),o.add(new go.PathSegment(go.PathSegment.Line,.66*e,0*n)),o.add(new go.PathSegment(go.PathSegment.Line,.66*e,.055*n)),o.add(new go.PathSegment(go.PathSegment.Line,.755*e,.055*n)),o.add(new go.PathSegment(go.PathSegment.Line,.93*e,n*(1-r))),o.add(new go.PathSegment(go.PathSegment.Line,.64*e,n*(1-r))),o.add(new go.PathSegment(go.PathSegment.Line,.61*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.39*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.36*e,n*(1-r))),o.add(new go.PathSegment(go.PathSegment.Line,.07*e,n*(1-r))),o.add(new go.PathSegment(go.PathSegment.Line,.245*e,.055*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(1-.66),.055*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(1-.66),0*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(1-.8),0*n)),o.add(new go.PathSegment(go.PathSegment.Line,0*e,n*(1-r)).close()),i}),go.Shape.defineFigureGenerator("Upload",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(0*e,+n,!0);i.add(o);var r=.1/.3;o.add(new go.PathSegment(go.PathSegment.Line,+e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,+e,n*(1-r))),o.add(new go.PathSegment(go.PathSegment.Line,.8*e,0*n)),o.add(new go.PathSegment(go.PathSegment.Line,.66*e,0*n)),o.add(new go.PathSegment(go.PathSegment.Line,.66*e,.055*n)),o.add(new go.PathSegment(go.PathSegment.Line,.755*e,.055*n)),o.add(new go.PathSegment(go.PathSegment.Line,.93*e,n*(1-r))),o.add(new go.PathSegment(go.PathSegment.Line,.64*e,n*(1-r))),o.add(new go.PathSegment(go.PathSegment.Line,.61*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.39*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.36*e,n*(1-r))),o.add(new go.PathSegment(go.PathSegment.Line,.07*e,n*(1-r))),o.add(new go.PathSegment(go.PathSegment.Line,.245*e,.055*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(1-.66),.055*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(1-.66),0*n)),o.add(new go.PathSegment(go.PathSegment.Line,e*(1-.8),0*n)),o.add(new go.PathSegment(go.PathSegment.Line,0*e,n*(1-r)).close());r=new go.PathFigure(.5*e,0*n,!0);return i.add(r),r.add(new go.PathSegment(go.PathSegment.Line,.26*e,.25*n)),r.add(new go.PathSegment(go.PathSegment.Line,.4*e,.25*n)),r.add(new go.PathSegment(go.PathSegment.Line,.4*e,.63*n)),r.add(new go.PathSegment(go.PathSegment.Line,.6*e,.63*n)),r.add(new go.PathSegment(go.PathSegment.Line,.6*e,.25*n)),r.add(new go.PathSegment(go.PathSegment.Line,.74*e,.25*n).close()),i}),go.Shape.defineFigureGenerator("EmptyDrink",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.15*e,0*n,!1);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.85*e,0*n)),o.add(new go.PathSegment(go.PathSegment.Line,.7*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.3*e,+n).close()),i}),go.Shape.defineFigureGenerator("Drink",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.15*e,0*n,!1);i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.85*e,0*n)),o.add(new go.PathSegment(go.PathSegment.Line,.7*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.3*e,+n).close());o=new go.PathFigure(.235*e,.28*n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.765*e,.28*n)),o.add(new go.PathSegment(go.PathSegment.Line,.655*e,.97*n)),o.add(new go.PathSegment(go.PathSegment.Line,.345*e,.97*n).close()),i}),go.Shape.defineFigureGenerator("4Arrows",function(t,e,n){var i=new go.Geometry,o=new go.PathFigure(.5*e,0*n,!0);return i.add(o),o.add(new go.PathSegment(go.PathSegment.Line,.65*e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Line,.55*e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Line,.55*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,.35*n)),o.add(new go.PathSegment(go.PathSegment.Line,+e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,.65*n)),o.add(new go.PathSegment(go.PathSegment.Line,.75*e,.55*n)),o.add(new go.PathSegment(go.PathSegment.Line,.55*e,.55*n)),o.add(new go.PathSegment(go.PathSegment.Line,.55*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.65*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.5*e,+n)),o.add(new go.PathSegment(go.PathSegment.Line,.35*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.45*e,.75*n)),o.add(new go.PathSegment(go.PathSegment.Line,.45*e,.55*n)),o.add(new go.PathSegment(go.PathSegment.Line,.25*e,.55*n)),o.add(new go.PathSegment(go.PathSegment.Line,.25*e,.65*n)),o.add(new go.PathSegment(go.PathSegment.Line,0*e,.5*n)),o.add(new go.PathSegment(go.PathSegment.Line,.25*e,.35*n)),o.add(new go.PathSegment(go.PathSegment.Line,.25*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.45*e,.45*n)),o.add(new go.PathSegment(go.PathSegment.Line,.45*e,.25*n)),o.add(new go.PathSegment(go.PathSegment.Line,.35*e,.25*n).close()),i}),go.Shape.defineFigureGenerator("Connector","Ellipse"),go.Shape.defineFigureGenerator("Alternative","TriangleUp"),go.Shape.defineFigureGenerator("Merge","TriangleUp"),go.Shape.defineFigureGenerator("Decision","Diamond"),go.Shape.defineFigureGenerator("DataTransmissions","Hexagon"),go.Shape.defineFigureGenerator("Gate","Crescent"),go.Shape.defineFigureGenerator("Delay","HalfEllipse"),go.Shape.defineFigureGenerator("Input","Parallelogram1"),go.Shape.defineFigureGenerator("ManualLoop","ManualOperation"),go.Shape.defineFigureGenerator("ISOProcess","Chevron"),go.Shape.defineFigureGenerator("MessageToUser","SquareArrow"),go.Shape.defineFigureGenerator("MagneticData","Cylinder1"),go.Shape.defineFigureGenerator("DirectData","Cylinder4"),go.Shape.defineFigureGenerator("StoredData","DataStorage"),go.Shape.defineFigureGenerator("SequentialData","MagneticTape"),go.Shape.defineFigureGenerator("Subroutine","Procedure"),go.Shape.defineFigureGenerator("fivePoints",function(t,e,n){var i=60,o=30,r=i/2;null!==t&&(i=t.width,o=t.width/2,r=i/2);t=new go.Geometry;return t.add(new go.PathFigure(Math.cos(.1*Math.PI)*i+r,-Math.sin(.1*Math.PI)*i+r).add(new go.PathSegment(go.PathSegment.Line,Math.cos(.1*Math.PI)*i+r,-Math.sin(.1*Math.PI)*i+r)).add(new go.PathSegment(go.PathSegment.Line,Math.cos(.3*Math.PI)*o+r,-Math.sin(.3*Math.PI)*o+r)).add(new go.PathSegment(go.PathSegment.Line,Math.cos(.5*Math.PI)*i+r,-Math.sin(.5*Math.PI)*i+r)).add(new go.PathSegment(go.PathSegment.Line,Math.cos(.7*Math.PI)*o+r,-Math.sin(.7*Math.PI)*o+r)).add(new go.PathSegment(go.PathSegment.Line,Math.cos(.9*Math.PI)*i+r,-Math.sin(.9*Math.PI)*i+r)).add(new go.PathSegment(go.PathSegment.Line,Math.cos(1.1*Math.PI)*o+r,-Math.sin(1.1*Math.PI)*o+r)).add(new go.PathSegment(go.PathSegment.Line,Math.cos(1.3*Math.PI)*i+r,-Math.sin(1.3*Math.PI)*i+r)).add(new go.PathSegment(go.PathSegment.Line,Math.cos(1.5*Math.PI)*o+r,-Math.sin(1.5*Math.PI)*o+r)).add(new go.PathSegment(go.PathSegment.Line,Math.cos(1.7*Math.PI)*i+r,-Math.sin(1.7*Math.PI)*i+r)).add(new go.PathSegment(go.PathSegment.Line,Math.cos(1.9*Math.PI)*o+r,-Math.sin(1.9*Math.PI)*o+r)).add(new go.PathSegment(go.PathSegment.Line,Math.cos(2.1*Math.PI)*i+r,-Math.sin(2.1*Math.PI)*i+r)).add(new go.PathSegment(go.PathSegment.Line,Math.cos(2.3*Math.PI)*o+r,-Math.sin(2.3*Math.PI)*o+r))),t});var GO=go.GraphObject.make,def_color="#ccc";function convertPathPatternToShape(t){return t?PathPatterns.get(t):null}function convertPathPatternToColor(t){t=convertPathPatternToShape(t);return null!==t?t.stroke:"transparent"}var PathPatterns=new go.Map;function definePathPattern(t,e,n,i,o){if("string"!=typeof t||"string"!=typeof e)throw new Error("invalid name or geometry string argument: "+t+" "+e);void 0===n&&(n="black"),void 0===i&&(i=1),void 0===o&&(o="square"),PathPatterns.set(t,GO(go.Shape,{geometryString:e,fill:"transparent",stroke:n,strokeWidth:i,strokeCap:o}))}function froce_layout(){myDiagram.div=null,myDiagram=GO(go.Diagram,Diagram_name,{initialAutoScale:go.Diagram.Uniform,"undoManager.isEnabled":!0,"animationManager.isEnabled":!1,layout:GO(SmarterForceDirectedLayout,{defaultSpringLength:100})}),initOverview(),myDiagram.nodeTemplateMap.add("",circular_node_template()),myDiagram.nodeTemplateMap.add("emphasize",fivePoints_node_template()),myDiagram.linkTemplate=flow_link_template(),myDiagram.linkTemplateMap.add("",flow_link_template()),myDiagram.linkTemplateMap.add("dash",dash_link_template()),myDiagram.groupTemplate=group_node_coll_expand()}function f_layout(){rendering_type="worker",linkArray.forEach(function(t){t.source=t.from,t.target=t.to}),myDiagram.div=null,myDiagram=GO(go.Diagram,Diagram_name,{initialAutoScale:go.Diagram.Uniform,"undoManager.isEnabled":!0,"animationManager.isEnabled":!1}),initOverview(),myDiagram.nodeTemplate=circular_node_template(),myDiagram.groupTemplate=group_node_coll_expand(),myDiagram.nodeTemplateMap.add("emphasize",fivePoints_node_template()),myDiagram.linkTemplate=flow_link_template(),myDiagram.linkTemplateMap.add("",flow_link_template()),myDiagram.linkTemplateMap.add("dash",dash_link_template()),myDiagram.toolManager.dragSelectingTool.box=GO(go.Part,{layerName:"Tool",selectable:!1},GO(go.Shape,{name:"SHAPE",fill:"#167CF3",stroke:"#167CF3",strokeWidth:2,opacity:.07})),myDiagram.toolManager.dragSelectingTool.delay=200,myDiagram.addDiagramListener("ChangedSelection",function(t){myDiagram.links.each(function(t){0==t.isSelected&&myDiagram.model.setDataProperty(t.data,"level","-1")}),myDiagram.nodes.each(function(t){0==t.isSelected&&null!=t.findObject("Shape_background")&&(t.findObject("Shape_background").stroke=t.data.d_stroke,t.findObject("Shape_background").fill="#fff",t.findObject("Shape_background").opacity=1)})}),myDiagram.scrollMode=go.Diagram.InfiniteScroll,myDiagram.toolManager.dragSelectingTool.selectInRect=function(t){var e=this.diagram;if(null!==e){var n=e.lastInput;e.raiseDiagramEvent("ChangingSelection");var i=e.findObjectsIn(t,function(t){var e=t.part,n=e.selectionObject;return t===n||t.isContainedBy(n)||e instanceof go.Link?e:null},function(t){return t.canSelect()},this.isPartialInclusion);if(n.meta||n.control)if(n.shift)for(var o=i.iterator;o.next();){var r=o.value;r.isSelected&&(r.isSelected=!1)}else for(o=i.iterator;o.next();){var a=o.value;a.isSelected=!a.isSelected}else if(n.shift)for(o=i.iterator;o.next();){var s=o.value;s.isSelected||(s.isSelected=!0)}else{for(var h=new go.List,u=e.selection.iterator;u.next();){var l=u.value;i.contains(l)||h.add(l)}for(var d=h.iterator;d.next();)d.value.isSelected=!1;for(o=i.iterator;o.next();){var c=o.value;c.isSelected||(c.isSelected=!0)}}e.raiseDiagramEvent("ChangedSelection")}};var t=new Worker("./js/graph/worker.js");t.postMessage({nodes:nodeArray,links:linkArray}),t.onmessage=function(t){switch(t.data.type){case"tick":return;case"end":myDiagram.model.nodeDataArray=t.data.nodes,myDiagram.model.linkDataArray=t.data.links,messagefuntion.changeGraphProperty(graph_tool.getcurrentNodes(),graph_tool.getcurrentEdges(),graph_tool.getNodesCount(),graph_tool.nodesSelectCount(),graph_tool.nodesVisibleCount(),graph_tool.getEdgesCount(),graph_tool.edgesSelectCount(),graph_tool.edgesVisibleCount()),setTimeout(function(){myDiagram.commandHandler.zoomToFit(),$(".loading").hide(),$(".loading_box").hide()})}}}function FastForceLayout(){rendering_type=2,linkArray.forEach(function(t){t.source=t.from,t.target=t.to}),myDiagram.div=null,initOverview();var t=new Worker("./js/graph/worker.js");t.postMessage({nodes:nodeArray,links:linkArray}),t.onmessage=function(t){switch(t.data.type){case"tick":return;case"end":$(".myDiagramDiv").css("z-index",0),document.getElementById("myDiagramDiv").style.zIndex=-1,document.getElementById("myPaletteDiv").style.zIndex=-1,document.getElementById("myGraph").style.zIndex=10,initGraph(t.data.nodes,t.data.links,layout),messagefuntion.changeGraphProperty(t.data.nodes,t.data.links,t.data.nodes.length,selectedNodes.size,hideNodes.size,t.data.links.length,selectedEdges.size,hideEdges.size),debounce(modelChange,1e3,0)(getDiagramData_GL().nodes,getDiagramData_GL().edges),setTimeout(function(){$(".loading").hide(),$(".loading_box").hide()},0)}}}function cirular_layout(){myDiagram.div=null,myDiagram=GO(go.Diagram,Diagram_name,{initialAutoScale:go.Diagram.Uniform,"undoManager.isEnabled":!0,layout:GO(go.CircularLayout)}),initOverview(),myDiagram.nodeTemplateMap.add("",circular_node_template()),myDiagram.nodeTemplateMap.add("square",GO(go.Node,"Auto",GO(go.Shape,"RoundedRectangle",{width:120,height:64,fill:"#fff",stroke:"#D55500",strokeWidth:2},new go.Binding("fill"),new go.Binding("stroke")),GO(go.TextBlock,{name:"icon_label",opacity:1,margin:8,maxSize:new go.Size(200,NaN),wrap:go.TextBlock.WrapFit,stroke:"#D55500",editable:!0},new go.Binding("text").makeTwoWay()),new go.Binding("stroke"))),myDiagram.linkTemplate=flow_link_template()}function SankeyLayout(){go.LayeredDigraphLayout.call(this)}definePathPattern("Dash","M0 0 M3 0 L6 0","#A01CBB"),go.Diagram.inherit(SankeyLayout,go.LayeredDigraphLayout),SankeyLayout.prototype.makeNetwork=function(t){var o=go.LayeredDigraphLayout.prototype.makeNetwork.call(this,t);return this.diagram.nodes.each(function(t){var e=t.findObject("SHAPE"),n=t.findObject("SHAPEOUTSIDE");e&&(e.height=60),e&&(e.margin=new go.Margin(-73.2,0,0,0)),n&&(n.height=78);var i=t.findObject("TEXT"),e=t.findObject("LTEXT"),n="bold "+Math.max(12,Math.round(7.5))+"pt Segoe UI, sans-serif";i&&(i.font=n),e&&(e.font=n);n=o.findVertex(t);null!==n&&(t.ensureBounds(),t=t.actualBounds,n.width=t.width,n.height=t.height,n.focusY=n.height/2)}),o},SankeyLayout.prototype.nodeMinColumnSpace=function(t,e){if(null!==t.node)return go.LayeredDigraphLayout.prototype.nodeMinColumnSpace.call(this,t,e);if(1<=t.edgesCount){for(var n=1,i=t.edges;i.next();){var o=i.value;if(null!=o.link){o=o.link.computeThickness();n<o&&(n=o);break}}return Math.max(2,Math.ceil(n/this.columnSpacing))}return 2},SankeyLayout.prototype.nodeMinLayerSpace=function(t,e){return null===t.node?100:go.LayeredDigraphLayout.prototype.nodeMinLayerSpace.call(this,t,e)},SankeyLayout.prototype.assignLayers=function(){go.LayeredDigraphLayout.prototype.assignLayers.call(this);for(var t=this.maxLayer,e=this.network.vertexes.iterator;e.next();){var n=e.value;n.node;0==n.destinationVertexes.count&&(n.layer=0),0==n.sourceVertexes.count&&(n.layer=t)}},SankeyLayout.prototype.commitLayout=function(){go.LayeredDigraphLayout.prototype.commitLayout.call(this);for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;e&&e.curve===go.Link.Bezier&&e.invalidateRoute()}};var animation=new go.Animation;function sankey_layout(t){6!=t?(myDiagram.div=null,myDiagram=GO(go.Diagram,Diagram_name,{initialAutoScale:go.Diagram.Uniform,"animationManager.isEnabled":!1,"undoManager.isEnabled":!0,ModelChanged:function(){},layout:GO(SankeyLayout,{setsPortSpots:!1,direction:0,layeringOption:go.LayeredDigraphLayout.LayerOptimalLinkLength,packOption:go.LayeredDigraphLayout.PackStraighten||go.LayeredDigraphLayout.PackMedian,layerSpacing:300,columnSpacing:20})}),initOverview(),myDiagram.nodeTemplateMap.add("",square_node_template()),myDiagram.nodeTemplateMap.add("square",GO(go.Node,"Auto",GO(go.Shape,"RoundedRectangle",{width:120,height:64,fill:"#fff",stroke:"#D55500",strokeWidth:2},new go.Binding("d_fill"),new go.Binding("d_stroke")),GO(go.TextBlock,{name:"icon_label",opacity:1,margin:8,maxSize:new go.Size(200,NaN),wrap:go.TextBlock.WrapFit,stroke:"#D55500",editable:!0},new go.Binding("text").makeTwoWay()),new go.Binding("stroke","d_stroke"))),myDiagram.linkTemplate=bezier_link_template()):myDiagram.layout=GO(SankeyLayout,{setsPortSpots:!1,direction:0,layeringOption:go.LayeredDigraphLayout.LayerOptimalLinkLength,packOption:go.LayeredDigraphLayout.PackStraighten||go.LayeredDigraphLayout.PackMedian,layerSpacing:300,columnSpacing:20})}function SavedLayeredDigraphLayout(){go.LayeredDigraphLayout.call(this)}function getAutoHeightForNode(t){for(var e=0,n=t.findLinksInto();n.next();)e+=20*n.value.computeThickness();for(var i=0,n=t.findLinksOutOf();n.next();)i+=20*n.value.computeThickness();t=Math.max(e,i);return t<10&&(t=10),t}function fast_sankey_(){myDiagram.div=null,myDiagram=GO(go.Diagram,Diagram_name,{initialAutoScale:go.Diagram.Uniform,"animationManager.isEnabled":!1,ModelChanged:function(){},layout:GO(SavedLayeredDigraphLayout,{setsPortSpots:!1,direction:0,layeringOption:go.LayeredDigraphLayout.layerOptimalLinkLength,initializeOption:go.LayeredDigraphLayout.InitDepthFirstOut,packOption:go.LayeredDigraphLayout.PackStraighten||go.LayeredDigraphLayout.PackExpand,layerSpacing:1e3,columnSpacing:1})}),initOverview(),myDiagram.nodeTemplateMap.add("",square_node_template());GO(go.Adornment,"Link",GO(go.Shape,{isPanelMain:!0,fill:null,stroke:"blue",strokeWidth:3}));myDiagram.linkTemplateMap.add("",bezier_link_template()),myDiagram.linkTemplateMap.add("c",flow_link_template())}function tree_layout(){myDiagram.div=null,myDiagram=GO(go.Diagram,Diagram_name,{initialAutoScale:go.Diagram.Uniform,"undoManager.isEnabled":!0,"animationManager.isEnabled":!1,layout:GO(go.TreeLayout,{isOngoing:!1,angle:90,layerSpacing:100,nodeSpacing:300})}),initOverview(),myDiagram.nodeTemplateMap.add("",tree_square_node_template()),myDiagram.linkTemplate=tree_flow_link_template()}function tree_cir_layout(){myDiagram.div=null,myDiagram=GO(go.Diagram,Diagram_name,{initialAutoScale:go.Diagram.Uniform,"undoManager.isEnabled":!0,"animationManager.isEnabled":!1,layout:GO(go.TreeLayout,{isOngoing:!1,angle:90,layerSpacing:300,nodeSpacing:1})}),initOverview(),myDiagram.nodeTemplate=circular_node_template(),myDiagram.linkTemplate=flow_link_template()}function SmarterForceDirectedLayout(){go.ForceDirectedLayout.call(this),this.radial=new RadialLayout,this.radial.layerThickness=200}function structure_layout(){myDiagram.div=null,myDiagram=GO(go.Diagram,Diagram_name,{initialAutoScale:go.Diagram.Uniform,"undoManager.isEnabled":!0,layout:GO(SmarterForceDirectedLayout,{defaultSpringLength:50})}),initOverview(),myDiagram.nodeTemplateMap.add("",circular_node_template()),myDiagram.nodeTemplateMap.add("square",GO(go.Node,"Auto",GO(go.Shape,"RoundedRectangle",{width:120,height:64,fill:"#fff",stroke:"#D55500",strokeWidth:2},new go.Binding("fill"),new go.Binding("stroke")),GO(go.TextBlock,{name:"icon_label",opacity:1,margin:8,maxSize:new go.Size(200,NaN),wrap:go.TextBlock.WrapFit,stroke:"#D55500",editable:!0},new go.Binding("text").makeTwoWay()),new go.Binding("stroke"))),myDiagram.linkTemplate=flow_link_template()}function getPoint_cir(t,e,n,i){for(var o=[],r=Math.PI/180*Math.round(360/i),a=0;a<i;a++){var s=e+t*Math.sin(r*a),h=n+t*Math.cos(r*a);o.unshift({x:s,y:h})}return o}function blobToDataURL(t,e){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.readAsDataURL(t)}animation.easing=go.Animation.EaseLinear,go.Diagram.inherit(SavedLayeredDigraphLayout,go.LayeredDigraphLayout),SavedLayeredDigraphLayout.prototype.makeNetwork=function(t){var i=go.LayeredDigraphLayout.prototype.makeNetwork.call(this,t);return this.diagram.nodes.each(function(t){var e=getAutoHeightForNode(t),n=t.findObject("SHAPE");n&&(n.height=e);e=i.findVertex(t);null!==e&&(t.ensureBounds(),t=t.actualBounds,e.width=t.width,e.height=t.height,e.focusY=e.height/2)}),i},SavedLayeredDigraphLayout.prototype.assignLayers=function(){if(this.layerInfo)for(var t,e=this.network.vertexes.iterator;e.next();)!(i=(n=e.value).node)||"number"==typeof(t=this.layerInfo[i.data.key])&&(n.layer=t);else{go.LayeredDigraphLayout.prototype.assignLayers.call(this);for(var n,i,o={},e=this.network.vertexes.iterator;e.next();)(i=(n=e.value).node)&&(o[i.data.key]=n.layer);this.layerInfo=o}},go.Diagram.inherit(SmarterForceDirectedLayout,go.ForceDirectedLayout),SmarterForceDirectedLayout.prototype.needsClusterLayout=function(){return go.ForceDirectedLayout.prototype.needsClusterLayout.call(this)&&(this.radial.network=this.network,this.radial.doLayout(this.diagram)),!1};var myDiagram,myOverview,graph_tool={copySelectData:0,disableAllDraw:function(){var t=myDiagram.toolManager.findTool("DragCreating");null!==t&&(t.isEnabled=!1),null!==(t=myDiagram.toolManager.findTool("FreehandDrawing"))&&(t.isEnabled=!1)},onMouseLeaveNode:function(t,e){var n;null!=e&&(_gasInstance.isShowNodeText||(null!=(n=e.findObject("GRAPHPICTURENODEKEY"))&&(n.visible=!1),null!=(n=e.findObject("GRAPHPICTURENODENAME"))&&(n.visible=!1)))},setVisibleNodeCanLayout:function(){myDiagram.nodes.each(function(t){t.visible?t.data.isLayoutPositioned=!0:t.data.isLayoutPositioned=!1})},setNodeCanLayout:function(e){myDiagram.nodes.each(function(t){t.data.locking||(t.part.isLayoutPositioned=e)})},graphtoJson:function(){return{layout:layout,nodeDataArray:myDiagram.model.nodeDataArray,linkDataArray:myDiagram.model.linkDataArray}},getNodesCount:function(){return myDiagram.nodes.count},getEdgesCount:function(){return myDiagram.links.count},nodesVisibleCount:function(){var e=0;return myDiagram.nodes.each(function(t){t.visible||e++}),e},edgesVisibleCount:function(){var e=0;return myDiagram.links.each(function(t){t.visible||e++}),e},nodesSelectCount:function(){var e=0;return myDiagram.nodes.each(function(t){t.isSelected&&e++}),e},edgesSelectCount:function(){var e=0;return myDiagram.links.each(function(t){t.visible&&t.isSelected&&e++}),e},edges:function(){var e=[];return myDiagram.links.each(function(t){e.push(t.data)}),e},findNodeForKey:function(t){return myDiagram.findNodeForKey(t)},getcurrentNode:function(){for(var t=[],e=myDiagram.nodes;e.next();){var n=e.value;n.isSelected&&(t=n.data)}return t},getcurrentNodes:function(){for(var t=[],e=myDiagram.nodes;e.next();){var n=e.value;n.isSelected&&t.push(n.data)}return t},getcurrentNodes_Part:function(){for(var t=[],e=myDiagram.nodes;e.next();){var n=e.value;n.isSelected&&t.push(n)}return t},getcurrentEdge:function(){for(var t=[],e=myDiagram.links;e.next();){var n=e.value;n.isSelected&&(t=n.data)}return t},getcurrentEdges:function(){for(var t=[],e=myDiagram.links;e.next();){var n=e.value;n.isSelected&&t.push(n.data)}return t},groupSelection:function(){myDiagram.commandHandler.groupSelection()},unGroupSelection:function(){myDiagram.commandHandler.ungroupSelection()},deleteSelection:function(){myDiagram.commandHandler.deleteSelection()},undo:function(){myDiagram.commandHandler.undo()},redo:function(){myDiagram.commandHandler.redo()},copySelection:function(){pastedNodes=[],pastedLinks=[],myDiagram.nodes.each(function(t){var e;t.isSelected&&((e=t.data).key=t.data.key+"_copy",pastedNodes.push(e))}),sessionStorage.setItem("COPY_MODEL_DATA",JSON.stringify(pastedNodes))},pasteSelection:function(){JSON.parse(sessionStorage.getItem("COPY_MODEL_DATA")).map(function(t){delete t.__gohashid;var e=t;e.loc=+t.loc.split(" ")[0]+t.width+" "+(+t.loc.split(" ")[1]+t.width),myDiagram.model.addNodeData(e)})},decreaseZoom:function(){var t;if(myDiagram.scale<0)return!1;myDiagram.scale=myDiagram.scale-.1,myDiagram.scale<.01&&(myDiagram.scale=.01),"timing"==layout&&(t={type:2,scale:myDiagram.scale-.1},document.getElementById("timeEvents_iframe").contentWindow.postMessage(t,"*")),"timeMargin"==layout&&(t={type:2,scale:myDiagram.scale-.1},document.getElementById("timeMargin_iframe").contentWindow.postMessage(t,"*")),sets_sale_num(myDiagram.scale)},increaseZoom:function(){var t;if(4<myDiagram.scale)return!1;myDiagram.scale=myDiagram.scale+.1,"timing"==layout&&(t={type:2,scale:myDiagram.scale+.1},document.getElementById("timeEvents_iframe").contentWindow.postMessage(t,"*")),"timeMargin"==layout&&(t={type:2,scale:myDiagram.scale+.1},document.getElementById("timeMargin_iframe").contentWindow.postMessage(t,"*")),sets_sale_num(myDiagram.scale)},setZomm:function(t){myDiagram.scale=t},selectAll:function(){myDiagram.nodes.each(function(t){t.isSelected=!0}),myDiagram.links.each(function(t){t.isSelected=!0})},reverseSelected:function(){myDiagram.nodes.each(function(t){t.isSelected=!t.isSelected}),myDiagram.links.each(function(t){t.isSelected=!t.isSelected})},findCommonPath:function(){var e,r=new go.List(go.Node),a=new go.List(go.List),t=myDiagram.selection.first();myDiagram.selection.each(function(t){e=t}),r.add(t);(function n(i,o){i.findNodesOutOf().each(function(t){var e;t!==i&&(t===o?((e=r.copy()).add(o),a.add(e)):r.contains(t)||(r.add(t),n(t,o),r.removeAt(r.count-1)))})})(t,e);a.each(function(t){for(var e=0;e<t.length-1;e++){var n=t.elt(e),i=t.elt(e+1);n.findLinksTo(i).each(function(t){t.isHighlighted=!0})}})},makeSvg:function(){var t=myDiagram.makeSvg({scale:1}),t=(new XMLSerializer).serializeToString(t),t=new Blob([t],{type:"image/svg+xml"});this.myCallback(t)},myCallback:function(t){var e=window.URL.createObjectURL(t),n="mySVGFile.svg",i=document.createElement("a");i.style="display: none",i.href=e,i.download=n,void 0===window.navigator.msSaveBlob?(document.body.appendChild(i),requestAnimationFrame(function(){i.click(),window.URL.revokeObjectURL(e),document.body.removeChild(i)})):window.navigator.msSaveBlob(t,n)},myCallback_img:function(t){var e=window.URL.createObjectURL(t),n=(downloadImgName||new Date)+".png",i=document.createElement("a");i.style="display: none",i.href=e,i.download=n,void 0===window.navigator.msSaveBlob?(document.body.appendChild(i),requestAnimationFrame(function(){i.click(),window.URL.revokeObjectURL(e),document.body.removeChild(i)})):window.navigator.msSaveBlob(t,n)},uploadImg:function(){},makeBlob_toParent:function(){var t;"timing"!=layout?"timeMargin"!=layout?myDiagram.makeImageData({background:"#fff",returnType:"blob",showTemporary:!0,callback:this.toParent_callBack}):(t={type:5},document.getElementById("timeMargin_iframe").contentWindow.postMessage(t,"*")):(t={type:5},document.getElementById("timeEvents_iframe").contentWindow.postMessage(t,"*"))},toParent_callBack:function(t){blobToDataURL(t,function(t){var e={g_pic:t,g_json:graph_tool.graphtoJson(),original_nodes:original_nodes,original_links:original_links,graph_id:graph_id,hideNodeList:Array.from(hideNodeList),hideLinkList:Array.from(hideLinkList),hideLinkRemarks:hideLinkRemarks},n=myDiagram.model.nodeDataArray.map(function(t){var e={};return 1==t.isGroup?e={isGroup:t.isGroup,key:t.key,text:t.text}:(e={key:t.key,id:t.id,text:t.text,type:t.type,type_key:t.type_key,type_text:t.type_text,tags:t.tags,fill:t.fill,icon:t.icon,size:t.size,color:t.color,text_color:t.text_color,width:t.width,height:t.height,stroke:t.d_stroke,category:t.category,is_hidden:t.is_hidden,isExpand:t.isExpand,time:t.time,isLocking:t.isLocking,fields:t.fields},"1"==t.is_group&&(e.is_group=t.is_group,e.list=t.list)),e}),t=myDiagram.model.linkDataArray.map(function(t){var e={},e={from:t.from,to:t.to,text:t.text,id:t.id,numeric:t.numeric,time:t.time,type_key:t.type_key,type_text:t.type_text,type:t.type,money:t.money,size:t.size,color:t.color,width:t.width,category:t.category,direction:t.direction,stroke:t.d_stroke,patt:t.patt,font_size:t.font_size,font_color:t.font_color,stroke_width:t.stroke_width,fields:t.fields};return"1"==t.merge_type&&(e.merge_type=t.merge_type,e.list=t.list),e});e.g_json=JSON.stringify({nodeDataArray:n,linkDataArray:t}),window.parent.postMessage(e,"*")})},makeBlob:function(){var t=myDiagram.documentBounds;16384<t.width||16384<t.height?this.makeSvg():myDiagram.makeImageData({background:"#fff",returnType:"blob",showTemporary:!0,maxSize:new go.Size(1/0,1/0),callback:this.myCallback_img})}};function DragZoomingTool(){go.Tool.call(this),this.name="DragZooming";var t=new go.Part;t.layerName="Tool",t.selectable=!1;var e=new go.Shape;e.name="SHAPE",e.figure="Rectangle",e.fill="#167CF3",e.stroke="#167CF3",e.opacity=.07,e.position=new go.Point(0,0),t.add(e),this._box=t,this._delay=100,this._zoomedDiagram=null}function geoFunc(t){return img_url_cors+"img/icon/"+t+".svg"}function ChangedSelection_fuc(){startVertex={},endVertex={},startVertex=graph_tool.getcurrentNodes()[0],graph_tool.getcurrentNodes().map(function(t){t.key!=startVertex.key&&(endVertex=t)}),messagefuntion.changeSelection(graph_tool.getcurrentNodes(),graph_tool.getcurrentEdges(),startVertex,endVertex),messagefuntion.changeGraphProperty(graph_tool.getcurrentNodes(),graph_tool.getcurrentEdges(),graph_tool.getNodesCount(),graph_tool.nodesSelectCount(),graph_tool.nodesVisibleCount(),graph_tool.getEdgesCount(),graph_tool.edgesSelectCount(),graph_tool.edgesVisibleCount())}function initOverview(){""!=DiagramOverview_name&&(myOverview&&(myOverview.div=null),myOverview=GO(go.Overview,DiagramOverview_name,{observed:myDiagram}))}go.Diagram.inherit(DragZoomingTool,go.Tool),DragZoomingTool.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t)return!1;var e=t.lastInput;if(!e.left)return!1;if(t.currentTool!==this){if(!this.isBeyondDragSize())return!1;if(e.timestamp-t.firstInput.timestamp<this.delay)return!1}return!0},DragZoomingTool.prototype.doActivate=function(){var t=this.diagram;null!==t&&(this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove())},DragZoomingTool.prototype.doDeactivate=function(){var t=this.diagram;null!==t&&(t.remove(this.box),t.skipsUndoManager=!1,t.isMouseCaptured=!1,this.isActive=!1)},DragZoomingTool.prototype.doMouseMove=function(){var t,e;null!==this.diagram&&this.isActive&&null!==this.box&&(t=this.computeBoxBounds(),null===(e=this.box.findObject("SHAPE"))&&(e=this.box.findMainElement()),e.desiredSize=t.size,this.box.position=t.position)},DragZoomingTool.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",this.zoomToRect(this.computeBoxBounds())}finally{t.currentCursor=""}}this.stopTool()},DragZoomingTool.prototype.computeBoxBounds=function(){var t=this.diagram;if(null===t)return new go.Rect(0,0,0,0);var e=t.firstInput.documentPoint,n=t.lastInput.documentPoint,i=n.x-e.x,o=n.y-e.y,t=this.zoomedDiagram;if(null===t&&(t=this.diagram),null===t)return new go.Rect(e,n);t=t.viewportBounds;if(0===t.height||0==o)return new go.Rect(e,n);var r,t=t.width/t.height,o=Math.abs(i/o)<t?(r=e.x+i,e.y+Math.ceil(Math.abs(i)/t)*(o<0?-1:1)):(r=e.x+Math.ceil(Math.abs(o)*t)*(i<0?-1:1),e.y+o);return new go.Rect(e,new go.Point(r,o))},DragZoomingTool.prototype.zoomToRect=function(t){var e;t.width<.1||(null===(e=this.zoomedDiagram)&&(e=this.diagram),null!==e&&(this.diagram.lastInput.shift?(e.scale=Math.max(e.scale*t.width/e.viewportBounds.width,e.minScale),e.centerRect(t)):(e.scale=Math.min(e.viewportBounds.width*e.scale/t.width,e.maxScale),e.position=new go.Point(t.x,t.y))))},Object.defineProperty(DragZoomingTool.prototype,"box",{get:function(){return this._box},set:function(t){this._box=t}}),Object.defineProperty(DragZoomingTool.prototype,"delay",{get:function(){return this._delay},set:function(t){this._delay=t}}),Object.defineProperty(DragZoomingTool.prototype,"zoomedDiagram",{get:function(){return this._zoomedDiagram},set:function(t){this._zoomedDiagram=t}});var linkSelectionAdornmentTemplate=GO(go.Adornment,"Link",GO(go.Shape,{isPanelMain:!0,fill:null,stroke:"#167cF3",strokeWidth:0},new go.Binding("strokeWidth","width",function(t,e){return"0"==e.part.data.level?t+4:t+2}),new go.Binding("stroke","level",function(t){return"0"==t?"red":"#167cF3"})),GO(go.Shape,{name:"link_arrow",toArrow:"standard",stroke:"#167cF3",scale:1.4},new go.Binding("strokeWidth","width",function(t,e){return"0"==e.part.data.level?t+4:t+2}),new go.Binding("visible","direction",function(t){return 0!==t&&(1===t||2!==t&&(3===t||void 0))}),new go.Binding("stroke","level",function(t){return"0"==t?"red":"#167cF3"})),GO(go.Shape,{name:"link_arrow",fromArrow:"Backward",stroke:"#167cF3",fill:"#167cF3",visible:!1},new go.Binding("strokeWidth","width",function(t,e){return"0"==e.part.data.level?t+4:t+2}),new go.Binding("visible","direction",function(t){return 0!==t&&(1!==t&&(2===t||(3===t||void 0)))}),new go.Binding("stroke","level",function(t){return"0"==t?"red":"#167cF3"})),GO(go.Panel,"Auto",{},GO(go.Shape,"RoundedRectangle",{fill:"#F57500",stroke:null,margin:new go.Margin(5,0,0,0)}),GO(go.TextBlock,{font:"20px sans-serif",margin:new go.Margin(1,2,1,2),stroke:"#fff"},new go.Binding("text","text",function(t){return t}),new go.Binding("margin","level",function(t){return"0"==t||"-1"==t||null==t?new go.Margin(2,2,1,2):new go.Margin(-12,2,1,2)})),GO(go.TextBlock,{text:"",font:"20px sans-serif",margin:new go.Margin(20,0,0,0),visible:!1},new go.Binding("text","level",function(t){return"0"==t||"-1"==t?"":t}),new go.Binding("visible","level",function(t){return"0"!=t&&"-1"!=t&&null!=t})),new go.Binding("visible","text",function(t){return""!==t}))),tooltipTemplate=GO("ToolTip",{"Border.fill":"#fff","Border.stroke":"lightgray"},GO(go.TextBlock,{stroke:"#167CF3",text:"",font:"16px sans-serif",wrap:go.TextBlock.WrapFit,alignment:go.Spot.Center,margin:new go.Margin(10,15,10,15)},new go.Binding("text")));function init_tooltipTemplate_label(e){return GO("ToolTip",{"Border.fill":"#fff","Border.stroke":"lightgray"},GO(go.TextBlock,{stroke:"#167CF3",text:"",font:"16px sans-serif",wrap:go.TextBlock.WrapFit,desiredSize:new go.Size(200,NaN),alignment:go.Spot.Center,margin:new go.Margin(10,15,10,15)},new go.Binding("text","tags",function(t){return t[e].text})))}var tooltipTemplate_label1=init_tooltipTemplate_label(0),tooltipTemplate_label2=init_tooltipTemplate_label(1),tooltipTemplate_label3=init_tooltipTemplate_label(2),tooltipTemplate_link=GO("ToolTip",{"Border.fill":"#fff","Border.stroke":"lightgray"},GO(go.TextBlock,{stroke:"#167CF3",text:"",font:"16px sans-serif",wrap:go.TextBlock.WrapFit,desiredSize:new go.Size(200,NaN),alignment:go.Spot.Center,margin:new go.Margin(10,15,10,15)},new go.Binding("text","label")));function setLayout(e,t){$(".loading").show(),$(".loading_box").show(),$("#container").css("z-index",-10),$("#"+Diagram_name).css("z-index",10),$("#"+Diagram_name).show(),$("#timeEvents").css("z-index",-10),$("#timeMargin").css("z-index",-10),$(".eye_c").show(),$("#myWebglGraph").hide(),setTimeout(function(){var t;rendering_type=1,document.getElementById("myDiagramDiv").style.zIndex=10,document.getElementById("myGraph").style.zIndex=0,"FastForceLayout"==e?(rendering_type=2,graph.clear(),FastForceLayout(),myDiagram.model.nodeDataArray=nodeArray,myDiagram.model.linkDataArray=linkArray):"mlm_layout"==e?mlm_layout():"tree_cir_layout"==e?tree_cir_layout():"skr_layout"==e?skr_layout():"p_c_layout"==e?p_c_layout():"Equity_layout"==e?Equity_layout():"ForceDirectedLayout"==e?f_layout():"sankey"==e?(300<=nodeArray.length||300<=linkArray.length?fast_sankey_:sankey_layout)():"treeLayout"==e?tree_layout():"cirular"==e?cirular_layout():"structure"==e?structure_layout():"timing"==e?($("#timeEvents").css("z-index",10),$("#timeMargin").css("z-index",-10),$("#"+Diagram_name).css("z-index",-10),$(".loading").hide(),$(".loading_box").hide(),t={type:1,nodes:nodeArray,links:linkArray},document.getElementById("timeEvents_iframe").contentWindow.postMessage(t,"*")):"timeMargin"==e&&($("#timeMargin").css("z-index",10),$("#timeEvents").css("z-index",-10),$("#"+Diagram_name).css("z-index",-10),$(".loading").hide(),$(".loading_box").hide(),t={type:1,nodes:nodeArray,links:linkArray},document.getElementById("timeMargin_iframe").contentWindow.postMessage(t,"*")),1==rendering_type&&(myDiagram.model.nodeDataArray=nodeArray,myDiagram.model.linkDataArray=linkArray),myDiagram.addDiagramListener("BackgroundSingleClicked",function(t){myDiagram.nodes.each(function(t){myDiagram.model.setDataProperty(t.data,"isSelected",!1),t.isSelected=!1})}),myDiagram.addDiagramListener("DocumentBoundsChanged",function(t){}),myDiagram.addDiagramListener("InitialLayoutCompleted",function(t){"ForceDirectedLayout"!=layout&&"FastForceLayout"!=layout&&($(".loading").hide(),$(".loading_box").hide()),messagefuntion.changeGraphProperty(graph_tool.getcurrentNodes(),graph_tool.getcurrentEdges(),graph_tool.getNodesCount(),graph_tool.nodesSelectCount(),graph_tool.nodesVisibleCount(),graph_tool.getEdgesCount(),graph_tool.edgesSelectCount(),graph_tool.edgesVisibleCount()),send_newGraph("布局加载完成")}),myDiagram.addDiagramListener("SelectionDeleting",function(){myDiagram.nodes.each(function(t){t.part.isLayoutPositioned=!1})}),myDiagram.addDiagramListener("SelectionDeleted",function(){myDiagram.nodes.each(function(t){t.part.isLayoutPositioned=!0})}),myDiagram.addDiagramListener("SelectionDeleted",function(){myDiagram.nodes.each(function(t){t.part.isLayoutPositioned=!0})}),myDiagram.addModelChangedListener(function(t){t=t.modelChange;"nodeDataArray"!=t&&"linkDataArray"!=t||debounce(modelChange,1e3,0)()}),myDiagram.addDiagramListener("ChangedSelection",function(t){myDiagram.links.each(function(t){0==t.isSelected&&myDiagram.model.setDataProperty(t.data,"level","-1")}),myDiagram.nodes.each(function(t){0==t.isSelected&&null!=t.findObject("Shape_background")&&(t.findObject("Shape_background").stroke=t.data.d_stroke,t.findObject("Shape_background").fill="#fff",t.findObject("Shape_background").opacity=1)}),ChangedSelection_fuc()}),myDiagram.scrollMode=go.Diagram.InfiniteScroll,myDiagram.toolManager.dragSelectingTool.box=GO(go.Part,{layerName:"Tool",selectable:!1},GO(go.Shape,{name:"SHAPE",fill:"#167CF3",stroke:"#167CF3",strokeWidth:2,opacity:.07})),myDiagram.toolManager.dragSelectingTool.delay=200,myDiagram.toolManager.mouseWheelBehavior=go.ToolManager.WheelZoom,myDiagram.toolManager.doActivate=function(){myDiagram.toolManager.mouseWheelBehavior=go.ToolManager.WheelZoom,go.ToolManager.prototype.doActivate.call(this)},myDiagram.commandHandler.doKeyDown=function(){"Q"===myDiagram.lastInput.key&&myDiagram.toolManager.mouseMoveTools.insertAt(2,new DragZoomingTool),go.CommandHandler.prototype.doKeyDown.call(this)},myDiagram.commandHandler.doKeyUp=function(){myDiagram.toolManager.mouseMoveTools.insertAt(2,myDiagram.toolManager.dragSelectingTool),go.CommandHandler.prototype.doKeyDown.call(this)},myDiagram.addDiagramListener("ViewportBoundsChanged",function(t){$(".item-inner").hide(),myDiagram.scale<=4?sets_sale_num(myDiagram.scale):myDiagram.scale=4;var n=myDiagram.scale;myDiagram.nodes.each(function(t){1==t.data.isHighlighted&&(t.scale=myDiagram.scale<1?1/myDiagram.scale:1);var e=t.findObject("node_icon"),t=t.findObject("node_text");null!==e&&(e.opacity=n<.6?0:1),null!==t&&(t.opacity=n<.6?0:1)}),myDiagram.links.each(function(t){t.findObject("edge_label"),t.findObject("link_text");t=t.findObject("link_arrow");null!==t&&(t.opacity=n<.5?0:1)})})})}function setLabel_state(u){myDiagram.nodes.each(function(t){var e=t.findObject("entity_label"),n=t.findObject("entity_label2"),i=t.findObject("entity_label3"),o=t.findObject("entity_label_text1"),r=t.findObject("entity_label_text2"),a=t.findObject("entity_label_text3"),s=t.findObject("entity_label_text_x1"),h=t.findObject("entity_label_text_x2"),t=t.findObject("entity_label_text_x3");null!==e&&(e.visible=u,""==o.text&&(e.visible=0)),null!==n&&(n.visible=u,""==r.text&&(n.visible=0)),null!==i&&(i.visible=u,""==a.text&&(i.visible=0)),null!==o&&(o.visible=u,""==o.text&&(o.visible=0)),null!==r&&(r.visible=u,""==r.text&&(r.visible=0)),null!==a&&(a.visible=u,""==a.text&&(a.visible=0)),null!==s&&(s.visible=u,""==o.text&&(s.visible=0)),null!==h&&(h.visible=u,""==r.text&&(h.visible=0)),null!==t&&(t.visible=u,""==a.text&&(t.visible=0))})}var debounceTimer=null;function debounce(r,a,s){return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=this,o=s&&!debounceTimer;clearTimeout(debounceTimer),debounceTimer=setTimeout(function(){debounceTimer=null,s||r.apply(i,e)},a),o&&r.apply(i,e)}}function modelChange(t,e){postmessageToParent({event_name:"图数据发生改变",event:"modelChange",model:model,entity_type:entity_type,nodeArray_:t||getDiagramData().nodes,linkArray_:e||getDiagramData().edges,layout:layout,graph_id:graph_id})}function findDistances(t){for(var e=t.diagram,n=new go.Map,i=e.nodes;i.next();){var o=i.value;n.set(o,1/0)}n.set(t,0);var r=new go.Set;r.add(t);for(var a=new go.Set;0<r.count;){var s=leastNode(r,n),h=n.get(s);r.delete(s),a.add(s);for(var u=s.findLinksOutOf();u.next();){var l,d,c=u.value.getOtherNode(s);a.has(c)||(d=h+1)<(l=n.get(c))&&(l===1/0&&r.add(c),n.set(c,d))}}return n}function nodeSelectionChanged(t){0===myDiagram.selection.count&&myDiagram.links.each(function(t){t.isHighlighted=!1})}function findShortestPath(t,e){distances=findDistances(t);var n=new go.List;for(n.add(e);null!==e;){var i=leastNode(e.findNodesInto(),distances);null!==i&&(distances.get(i)<distances.get(e)?n.add(i):i=null),e=i}return n.reverse(),n}function leastNode(t,e){for(var n=1/0,i=null,o=t.iterator;o.next();){var r=o.value,a=e.get(r);a<n&&(n=a,i=r)}return i}function highlightPath(t){myDiagram.clearHighlighteds();for(var e=0;e<t.count-1;e++){var n=t.get(e),i=t.get(e+1);n.findLinksTo(i).each(function(t){t.isHighlighted=!0})}}var deepClone=function t(e){var n=Array.isArray(e),i="[object Object]"===Object.prototype.toString.call(e);if(n){for(var o=[],r=0;r<e.length;r++)o[r]=t(e[r]);return o}if(i){var a,s={};for(a in e)s[a]=t(e[a]);return s}return e};function numberFormat(t,e,n,i,o){t=(t+"").replace(/[^0-9+-Ee.]/g,""),o=o||"ceil";for(var r,a,s,t=isFinite(+t)?+t:0,e=isFinite(+e)?Math.abs(e):0,h=void 0===i?",":i,n=void 0===n?".":n,u="",u=(e?(r=t,a=e,s=Math.pow(10,a),""+parseFloat(Math[o](parseFloat((r*s).toFixed(2*a))).toFixed(2*a))/s):""+Math.round(t)).split("."),l=/(-?\d+)(\d{3})/;l.test(u[0]);)u[0]=u[0].replace(l,"$1"+h+"$2");return(u[1]||"").length<e&&(u[1]=u[1]||"",u[1]+=new Array(e-u[1].length+1).join("0")),u.join(n)}function financial(t){return Number.parseFloat(t/100).toFixed(2)+"%"}function merge_link_method(i){linkArray=JSON.parse(myDiagram.model.toJson()).linkDataArray;var e=[];myDiagram.model.linkDataArray.deepClone().map(function(t){t.type==i.data.filed.type&&e.push(t)});var o={};e.forEach(function(t){1==i.data.methods&&(-1===Object.keys(o).indexOf(t.from+"_"+t.to)&&-1===Object.keys(o).indexOf(t.to+"_"+t.from)&&(o[t.from+"_"+t.to]=[]),(-1!==Object.keys(o).indexOf(t.from+"_"+t.to)?o[t.from+"_"+t.to]:o[t.to+"_"+t.from]).push(t)),2==i.data.methods&&(-1===Object.keys(o).indexOf(t.from+"_"+t.to)&&(o[t.from+"_"+t.to]=[]),-1!==Object.keys(o).indexOf(t.from+"_"+t.to)&&o[t.from+"_"+t.to].push(t))});for(var t in o)!function(t){var e=0,n=void 0;i.data.filed.property&&(o[t].map(function(t){t.fields.map(function(t){t.name==i.data.filed.property.type&&(e+=+t.value)})}),2==i.data.filed.property.rule&&(n=numberFormat(e,2,".",",")),3==i.data.filed.property.rule&&(n=financial(e))),n={from:o[t][0].from,to:o[t][0].to,text:o[t][0].type_text+(0==i.data.computed[1]?"":"("+o[t].length+"次)")+(0<e?n:""),list:o[t],merge_type:1,type:o[t][0].type,fill:o[t][0].d_fill,d_fill:o[t][0].d_fill,stroke:o[t][0].d_stroke,d_stroke:o[t][0].d_stroke,direction:2==i.data.methods?o[t][0].direction:0},o[t].map(function(n){linkArray.map(function(t,e){t.from==n.from&&t.to==n.to&&linkArray.splice(e,1)})}),linkArray.push(n)}(t);myDiagram.model.linkDataArray=linkArray,nodeArray=JSON.parse(myDiagram.model.toJson()).nodeDataArray,linkArray=JSON.parse(myDiagram.model.toJson()).linkDataArray,setLayout(layout)}function cancel_mergeLink(e){myDiagram.model.linkDataArray.map(function(t){t.list&&-1!==e.fileds.indexOf(t.type)&&t.list.map(function(t){linkArray.push(t)})}),linkArray=linkArray.filter(function(t){return 1==t.merge_type&&-1==e.fileds.indexOf(t.type)||1!=t.merge_type?t:void 0}),setLayout(layout)}function search_entity(e){var n;myDiagram.nodes.each(function(t){t.data.text==e&&((n=t).isSelected=!0)}),myDiagram.scale=1,myDiagram.commandHandler.scrollToPart(n)}function merge_child_link(){var e=[],t=myDiagram.model.linkDataArray.deepClone(),n=graph_tool.getcurrentNodes();t.map(function(t){t.from!=n[0].key&&t.to!=n[0].key||e.push(t)});var a={};e.forEach(function(t){-1===Object.keys(a).indexOf(t.from+"_"+t.type)&&(a[t.from+"_"+t.type]=[]),a[t.from+"_"+t.type].push(t)});for(var i in a){var s;(function(e){if(0<a[e].length){if(s=!1,a[e].map(function(t){t.id!==a[e][0].id&&(s=!0)}),!s)return;var t,n={from:a[e][0].from,to:a[e][0].to,fill:a[e][0].fill,stroke:a[e][0].stroke,d_stroke:a[e][0].d_stroke,text:a[e][0].type_text||a[e][0].text+"("+a[e].length+"次)",_list:a[e],merge_type:2},o=[],r="",i="";a[e].map(function(i){linkArray.map(function(t,e){t.from==i.from&&t.to==i.to&&linkArray.splice(e,1)}),myDiagram.model.nodeDataArray.map(function(e){var n;e.key==i.to&&(r=""==r?e.key:r+"_"+e.key,n=!0,o.forEach(function(t){t.id==e.id&&(n=!1)}),n&&o.push(e))})}),1<o.length&&((t={key:r,is_group:"1",_list:o,stroke:o[0].d_stroke,fill:o[0].d_fill,d_stroke:o[0].d_stroke,d_fill:o[0].d_fill,default_stroke:o[0].default_stroke,default_fill:o[0].default_fill,text:i,text_color:"#333333",width:60,height:60,merge_type:2}).text="合并("+o.length+")"+o[0].text+"等",n.to=r,o.map(function(n,t){r=""==r?n.key:r+"_"+n.key,i="合并实体",nodeArray.map(function(t,e){t.key==n.key&&nodeArray.splice(e,1)})}),nodeArray.push(t)),linkArray.push(n)}})(i)}}function cacel_merge_child_link(){myDiagram.model.linkDataArray.map(function(n){n._list&&(n._list.map(function(t){linkArray.push(t)}),linkArray.map(function(t,e){t.from==n.from&&t.to==n.to&&2==t.merge_type&&linkArray.splice(e,1)}))}),myDiagram.model.nodeDataArray.map(function(n){n._list&&(n._list.map(function(t){nodeArray.push(t)}),nodeArray.map(function(t,e){t.key==n.key&&2==t.merge_type&&nodeArray.splice(e,1)}))}),myDiagram.model.nodeDataArray=nodeArray,myDiagram.model.linkDataArray=linkArray,setLayout(layout)}function get_graph_links_type(){var e=[],n=[];return myDiagram.model.linkDataArray.map(function(t){t={type:t.type,type_key:t.type_key,type_text:t.type_text};e.push(JSON.stringify(t))}),Array.from(new Set(e)).map(function(t){n.push(JSON.parse(t))}),n}function get_graph_mergeLink_type(){var e=[],n=[];return myDiagram.model.linkDataArray.map(function(t){t.list&&0<t.list.length&&(t={type:t.list[0].type,type_key:t.list[0].type_key,type_text:t.list[0].type_text},e.push(JSON.stringify(t)))}),Array.from(new Set(e)).map(function(t){n.push(JSON.parse(t))}),n}function merge_vertex(t){graph_tool.setNodeCanLayout(!1);var i=graph_tool.getcurrentNodes(),o=t||1,r="",a=0,s=!0,h="",u={},l="",d=[];i.map(function(e,t){var n;0==t&&(h=e.type),"1"==e.is_group?(s=!1,a+=e.list.length):(s&&e.type!=h&&(s=!1),a+=1),t<=4?(n=e.text,"1"==e.is_group&&(n=e.text.slice(e.text.indexOf(":")+1,e.text.length)),t==i.length-1?r+=n:r+=n+"\n\n"):r+="...",d.push(e.key),l=""==l?e.key:l+"_"+e.key,myDiagram.nodes.each(function(t){t.data.key==e.key&&myDiagram.model.removeNodeData(t.data),i[o-1].key==t.data.key&&(u=t.part.location.x+" "+t.part.location.y)})});var n={key:l,is_group:"1",list:i,loc:u,icon:"group_",type:"combine_",type_text:"合并节点",stroke:s?i[0].stroke:"#C68B41",fill:s?i[0].fill:"#C68B41",d_stroke:s?i[0].d_stroke:"#C68B41",color:s?i[0].d_stroke:"#C68B41",d_fill:s?i[0].d_fill:"#C68B41",default_stroke:s?i[0].default_stroke:"#C68B41",default_fill:s?i[0].default_fill:"#C68B41",geo:i[0].geo,visible:i[0].visible,text_color:i[0].text_color,text:"合并("+a+"):\n"+r,font_size:i[0].font_size,font_color:i[0].font_color,width:i[0].width,height:i[0].height,isHighlighted:i[0].isHighlighted,tag_visible:!0,tag_source:"merge",isLocking:i[0].isLocking};myDiagram.model.addNodeData(n),myDiagram.nodes.each(function(t){t.part.data.key==l&&(t.part.isSelected=!0)});for(var c=[],g=0;g<myDiagram.model.linkDataArray.length;g++)!function(){var t,e=myDiagram.model.linkDataArray[g];-1!==d.indexOf(e.from)&&(t={from:n.key,to:e.to,c_from:e.from,text:e.text,stroke:e.stroke,fill:e.fill,d_stroke:e.d_stroke,width:e.width,id:"",type:"combine_",type_text:"合并边"},c.push(t),myDiagram.links.each(function(t){t.data.from==e.from&&t.data.to==e.to&&(t.visible=!1)})),-1!==d.indexOf(e.to)&&(t={from:e.from,to:n.key,c_to:e.to,text:e.text,stroke:e.stroke,fill:e.fill,d_stroke:e.d_stroke,width:e.width,id:"",type:"combine_",type_text:"合并边"},c.push(t),myDiagram.links.each(function(t){t.data.from==e.from&&t.data.to==e.to&&(t.visible=!1)}))}();c.map(function(e){myDiagram.model.linkDataArray.map(function(t){t.id,e.id}),myDiagram.model.addLinkData(e)})}function cacel_merge_node(){graph_tool.getcurrentNodes().map(function(e){var n;1==e.is_group&&(n=[],e.list.map(function(t){myDiagram.model.addNodeData(t)}),myDiagram.model.removeNodeData(e),myDiagram.model.linkDataArray.map(function(t){t.from!=e.key&&t.to!=e.key||n.push(t)}),n.map(function(e){e.c_from&&myDiagram.links.each(function(t){t.data.from==e.c_from&&t.data.to==e.to&&null!=myDiagram.model.findNodeDataForKey(e.to)&&(t.visible=!0)}),e.c_to&&myDiagram.links.each(function(t){t.data.from==e.from&&t.data.to==e.c_to&&null!=myDiagram.model.findNodeDataForKey(e.from)&&(t.visible=!0)}),myDiagram.model.linkDataArray.map(function(t){e.from==t.from&&e.to==t.to&&myDiagram.model.removeLinkData(t)})}))})}function select_Both_ends(){graph_tool.getcurrentEdges().map(function(e){myDiagram.nodes.each(function(t){t.data.key!=e.from&&t.data.key!=e.to||(t.isSelected=!0)})}),ChangedSelection_fuc()}function select_Both_ends_links(){var t=graph_tool.getcurrentEdges(),e=graph_tool.getcurrentNodes(),n=[];t.map(function(e){myDiagram.nodes.each(function(t){t.data.key!=e.from&&t.data.key!=e.to||(t.isSelected=!0)}),myDiagram.links.each(function(t){t.data.from==e.from&&t.data.to==e.to&&(t.isSelected=!0)})}),e.map(function(e){myDiagram.nodes.each(function(t){t.data.key==e.key&&(t.isSelected=!0)}),myDiagram.links.each(function(t){t.data.from!=e.key&&t.data.to!=e.key||(t.isSelected=!0,n.push(t.data.from),n.push(t.data.to))})}),n.map(function(e){myDiagram.nodes.each(function(t){t.data.key==e&&(t.isSelected=!0)})}),ChangedSelection_fuc()}function select_links(){graph_tool.getcurrentNodes().map(function(e){myDiagram.links.each(function(t){t.data.from!=e.key&&t.data.to!=e.key||(t.isSelected=!0)})}),ChangedSelection_fuc()}function change_selectordrag(t){myDiagram.allowSelect=t}function setEntity2hide(){var t;myDiagram.nodes.each(function(t){t.part.isLayoutPositioned=!1}),setScatterNodeVisible(),myDiagram.links.each(function(t){var e;t.isSelected||(t.visible=!1,e=t.part.data.id,hideLinkList.add(e),"transaction"==t.part.data.type&&(t={state:"隐藏",date:(new Date).getTime(),reason:""},hideLinkRemarks[e]=t))}),myDiagram.nodes.each(function(t){t.isSelected||(t.visible=!1,t=t.part.data.key,hideNodeList.add(t))}),0<hideLinkList.size&&((t={event_name:"隐藏实体完成",model:model,entity_type:entity_type,layout:layout,graph_id:graph_id,hideLinkList:[],hideLinkListCount:graph_tool.edgesVisibleCount()}).hideLinkList=getHideListofTransaction(),postmessageToParent(t)),messagefuntion.changeGraphProperty(graph_tool.getcurrentNodes(),graph_tool.getcurrentEdges(),graph_tool.getNodesCount(),graph_tool.nodesSelectCount(),graph_tool.nodesVisibleCount(),graph_tool.getEdgesCount(),graph_tool.edgesSelectCount(),graph_tool.edgesVisibleCount())}function setEntity2hidebyType(e,n){myDiagram.nodes.each(function(t){t.part.data.type==e&&(t.visible=n,hideNodeList.add(key))})}function setSelectEntity2hide(){var t;myDiagram.nodes.each(function(t){t.part.isLayoutPositioned=!1}),myDiagram.nodes.each(function(t){t.isSelected&&(t.visible=!1,t=t.part.data.key,hideNodeList.add(t))}),myDiagram.links.each(function(t){var e;t.isSelected&&(t.visible=!1,e=t.part.data.id,hideLinkList.add(e),"transaction"==t.part.data.type&&(t={state:"隐藏",date:(new Date).getTime(),reason:""},hideLinkRemarks[e]=t))}),0<hideLinkList.size&&((t={event_name:"隐藏实体完成",model:model,entity_type:entity_type,layout:layout,graph_id:graph_id,hideLinkList:[]}).hideLinkList=getHideListofTransaction(),postmessageToParent(t)),messagefuntion.changeGraphProperty(graph_tool.getcurrentNodes(),graph_tool.getcurrentEdges(),graph_tool.getNodesCount(),graph_tool.nodesSelectCount(),graph_tool.nodesVisibleCount(),graph_tool.getEdgesCount(),graph_tool.edgesSelectCount(),graph_tool.edgesVisibleCount())}function setScatterNodeVisible(e){myDiagram.nodes.each(function(t){var n=t.part.data.key,i=0;myDiagram.links.each(function(t){var e=t.part.data;e.from!=n&&e.to!=n||1==t.visible&&i++}),0==i&&(t.visible=e,"sankey"==layout&&(t.location=new go.Point(myDiagram.documentBounds.x,myDiagram.documentBounds.y)),e?hideNodeList.delete(n):hideNodeList.add(n))}),.5<Math.random()?setTimeout(function(){myDiagram.scale=myDiagram.scale+1e-4}):setTimeout(function(){myDiagram.scale=myDiagram.scale-1e-4})}function show_allEntity(){if(2==rendering_type)return hideNodes.clear(),void hideEdges.clear();myDiagram.nodes.each(function(t){hideNodeList.has(t.part.data.key)&&(t.visible=!0,t.isLayoutPositioned=!0,t.part.data.visible=!0)}),myDiagram.links.each(function(t){hideLinkList.has(t.part.data.id)&&(t.visible=!0,hideLinkList.delete(t.part.data.id),hideLinkRemarks[t.part.data.id]=void 0)}),$(".isHideState").prop("checked",!1),messagefuntion.changeGraphProperty(graph_tool.getcurrentNodes(),graph_tool.getcurrentEdges(),graph_tool.getNodesCount(),graph_tool.nodesSelectCount(),graph_tool.nodesVisibleCount(),graph_tool.getEdgesCount(),graph_tool.edgesSelectCount(),graph_tool.edgesVisibleCount())}function getHideListofTransaction(){var e=[];return myDiagram.links.each(function(t){t=t.part.data;hideLinkList.has(t.id)&&"transaction"==t.type&&(graph_tool.findNodeForKey(t.from),t={id:t.id,from_node_text:graph_tool.findNodeForKey(t.from).part.data.text,to_node_text:graph_tool.findNodeForKey(t.to).part.data.text,link_text:t.text,state:hideLinkRemarks[t.id].state,date:hideLinkRemarks[t.id].date,reason:hideLinkRemarks[t.id].reason},e.push(t))}),e}function setEdgeVisible2show(e){myDiagram.links.each(function(t){t=t.part.data;-1!=e.indexOf(t.id)&&(hideLinkList.delete(t.id),hideNodeList.delete(t.from),hideNodeList.delete(t.to))}),applyHideList2Diagram(),messagefuntion.changeGraphProperty(graph_tool.getcurrentNodes(),graph_tool.getcurrentEdges(),graph_tool.getNodesCount(),graph_tool.nodesSelectCount(),graph_tool.nodesVisibleCount(),graph_tool.getEdgesCount(),graph_tool.edgesSelectCount(),graph_tool.edgesVisibleCount())}function setReasonAboutHide(t){t.map(function(t){hideLinkRemarks[t.id].reason=t.reason})}function getHideEntityList(){var e=[];return myDiagram.links.each(function(t){t=t.part.data;hideLinkList.has(t.id)&&(t={from_id:myDiagram.findNodeForKey(t.from).part.data.id,id:t.id},e.push(t))}),{hideLinkList:e}}function applyHideList2Diagram(){myDiagram.nodes.each(function(t){var e=t.part.data;hideNodeList.has(e.key)?t.visible=!1:t.visible=!0}),myDiagram.links.each(function(t){var e=t.part.data;hideLinkList.has(e.id)?t.visible=!1:t.visible=!0}),messagefuntion.changeGraphProperty(graph_tool.getcurrentNodes(),graph_tool.getcurrentEdges(),graph_tool.getNodesCount(),graph_tool.nodesSelectCount(),graph_tool.nodesVisibleCount(),graph_tool.getEdgesCount(),graph_tool.edgesSelectCount(),graph_tool.edgesVisibleCount())}function get_node_rows(){var a=[];return myDiagram.nodes.each(function(n){var t={type:"",id:"",text:"",link_out:"",link_in:"",link_total:"",link_num_total:""},e=n.data,i=0,o=0,r=0;t.type=e.type_text,t.id=e.id,t.text=e.text,myDiagram.links.each(function(t){var e=t.data;e.from==n.key&&(i++,r++),e.to==n.key&&(o++,r++),t.numeric&&t.numeric.map(function(t){t.value})}),t.link_out=i,t.link_in=o,t.link_total=r,t.data=e,a.push(t)}),a}function get_link_rows(){var r=[];return myDiagram.links.each(function(t){var e={type:"",text:"",from_text:"",to_text:"",link_num:"",total_num:""},n=t.data,i=-1,o=0;e.type=n.type_text,e.text=n.text,e.from_text=graph_tool.findNodeForKey(n.from).data.text,e.to_text=graph_tool.findNodeForKey(n.to).data.text,myDiagram.links.each(function(t){t=t.data;t.type==n.type&&(i++,0<t.numeric.length&&(o+=t.numeric[0].value))}),e.total_num=o,e.link_num=i,e.data=n,r.push(e)}),r}function get_link_Dimension_count(){var e=[],t=[];myDiagram.links.each(function(t){t=t.data;void 0!==t.type_text&&e.push(t.type_text)}),e=get_array_ele_count(e);for(var n=0;n<e.length;n++)t.push(e[n].value);return t=get_array_ele_count(t),{types:e,counts:t}}function get_node_Dimension_count(){var t=[],h=[],u=[],l=[],d=[],c=[],g=[],f=[];return myDiagram.nodes.map(function(e){void 0!==e.data.type_text&&t.push(e.data.type_text),h.push(e.data.text);e.data;var n=0,i=0,o=0,r=0,a=0,s=0;myDiagram.links.each(function(t){t=t.data;t.from==e.key&&(n++,o++,r=0<t.numeric.length?r+t.numeric[0].value:r,s=0<t.numeric.length?s+t.numeric[0].value:s),t.to==e.key&&(i++,o++,a=0<t.numeric.length?a+t.numeric[0].value:a,s=0<t.numeric.length?s+t.numeric[0].value:s)}),u.push(o),l.push(n),d.push(i),g.push(r),f.push(a),c.push(s)}),{types:get_array_ele_count(t),texts:get_array_ele_count(h),link_total:get_array_ele_count(u),link_out:get_array_ele_count(l),link_in:get_array_ele_count(d),link_num_total:get_array_ele_count(c),link_num_out:get_array_ele_count(g),link_num_in:get_array_ele_count(f)}}function get_array_ele_count(t){var e,n=[],i=t.reduce(function(t,e){return t[e]=t[e]?++t[e]:1,t},{});for(e in i){var o={name:e,value:i[e]};n.push(o)}return n}function node_expandorcollapse(){var e,n=graph_tool.getcurrentNode();myDiagram.nodes.each(function(t){t.data.key==n.key&&(e=t)}),e.isTreeExpanded?myDiagram.commandHandler.collapseTree(e):myDiagram.commandHandler.expandTree(e)}function set_datatoTiming_layout(){var a=[],s=[],h=[];linkArray.map(function(e){var t,n,i,o,r;0<e.time&&(t={name:e.from+e.time,id_:e.from,value:[e.time,e.from+e.time],text:(nodeArray.map(function(t){t.key==e.from&&(r=t.text)}),r)},n={name:e.to+e.time,id_:e.to,value:[e.time,e.to+e.time],text:(nodeArray.map(function(t){t.key==e.to&&(o=t.text)}),o)},i={source:e.from+e.time,target:e.to+e.time,text:e.text,label:{show:!0,formatter:function(t){return t.data.text}}},a.push(t),a.push(n),s.push(i),h.push(e.time))});var e=[],n=[];return a.map(function(t){e.push({value:t.name,text:t.text})}),function(t,e){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];if(1==arguments.length)return _toConsumableArray(new Set(arr));var r=new Map,a=e;return t.filter(function(t){return!r.has(t[a])&&r.set(t[a],t)})}(a,"id_").map(function(t){n.push({value:t.name,text:t.text})}),e=Array.from(new Set(e)),{nodes:a,links:s,yData:e,yData1:n,timings:h}}function start_layout_animation(){var t=10;animation_time_out=setInterval(function(){myDiagram.startTransaction("changed Layout"),myDiagram.layout.defaultElectricalCharge=t,myDiagram.commitTransaction("changed Layout"),500<t?t-=20:10<=t&&t<500&&(t+=20)},100)}function stop_layout_animation(){clearInterval(animation_time_out)}function _commonRelationship(){2==rendering_type&&myDiagram.nodes.each(function(t){hideNodes.has(t.data.key+"")&&(t.visible=!0),selectedNodes.has(t.data.key+"")?t.isSelected=!0:t.isSelected=!1});var o=myDiagram.selection.toArray(),r=[];myDiagram.nodes.each(function(e){var i,t=o.some(function(t){return t.data.key==e.data.key}),n=0;t||(i=[],e.findLinksConnected().each(function(t){for(var e=0;e<o.length;e++){var n=o[e];t.data.from==n.data.key&&i.push(t.data.from),t.data.to==n.data.key&&i.push(t.data.to)}}),o.map(function(t){-1!=i.indexOf(t.data.key)&&n++}),o.length==n&&(e.isSelected=!0,r.push(e)))});var t={data:r.length,event_name:"_commonRelationship"};2==rendering_type&&(r.map(function(t){selectedNodes.add(t.data.key+"")}),renderer.refresh()),postmessageToParent(t)}function _findAllPath(e,n,t){var i,o;2==rendering_type&&myDiagram.nodes.each(function(t){hideNodes.has(t.data.key+"")&&(t.visible=!0),selectedNodes.has(t.data.key+"")?t.isSelected=!0:t.isSelected=!1}),myDiagram.nodes.each(function(t){t.data.key==e&&(i=t),t.data.key==n&&(o=t)});var r,a,s,h,u=(r=i,a=o,s=new go.List,h=new go.List,s.add(r),function n(i,o){i.findNodesOutOf().each(function(t){var e;t!==i&&(t===o?((e=s.copy()).add(o),h.add(e)):s.has(t)||(s.add(t),n(t,o),s.removeAt(s.count-1)))})}(r,a),h),l=[];u.each(function(t,e){for(var n={length:t.length,items:[]},i=0;i<t.length;i++)n.items.push(t.get(i).data);l.push(n)});u={paths:l.reverse(),data:l.length,event_name:"_findAllPath"};postmessageToParent(u),selectPath(u.paths[0])}function selectPath(e,n){if(e)if(2!=rendering_type)for(i=0;i<e.items.length;i++)i<e.items.length-1&&myDiagram.links.each(function(t){e.items[i].key==t.data.from&&e.items[i+1].key==t.data.to&&(t.isSelected=!0),0==n&&e.items[i].key==t.data.to&&e.items[i+1].key==t.data.from&&(t.isSelected=!0)}),myDiagram.nodes.each(function(t){e.items[i].key==t.data.key&&(t.isSelected=!0)});else{for(var i=0;i<e.items.length;i++)i<e.items.length-1&&graph.edges().forEach(function(t){e.items[i].key==graph.source(t)&&e.items[i+1].key==graph.target(t)&&selectedEdges.add(t)}),graph.nodes().forEach(function(t){e.items[i].key==t&&selectedNodes.add(t)});renderer.refresh()}}function _findShortPath(e,n,t){var i,o;2==rendering_type&&myDiagram.nodes.each(function(t){hideNodes.has(t.data.key+"")&&(t.visible=!0),selectedNodes.has(t.data.key+"")?t.isSelected=!0:t.isSelected=!1}),myDiagram.nodes.each(function(t){t.data.key==e&&(i=t),t.data.key==n&&(o=t)});var r,a,s,h,u,l,d,c=(r=i,a=o,s=new go.List,h=new go.List,s.add(r),function n(i,o){i.findNodesOutOf().each(function(t){var e;t!==i&&(t===o?((e=s.copy()).add(o),h.add(e)):s.has(t)||(s.add(t),n(t,o),s.removeAt(s.count-1)))}),0==t&&i.findNodesInto().each(function(t){var e;t!==i&&(t===o?((e=s.copy()).add(o),h.add(e)):s.has(t)||(s.add(t),n(t,o),s.removeAt(s.count-1)))})}(r,a),h),g=[];c.each(function(t){for(var e={length:t.length,nodes:[],path:t},n=0;n<t.length;n++)e.nodes.push(t.get(n).data);g.push(e)}),0!=g.length?(u=g[0].length,l=[],g.map(function(t){t.length<u&&(u=t.length)}),c.each(function(t){t.length==u&&l.push(t)}),d=[],l.map(function(t){var e=t._dataArray.map(function(t){return t.data}),e={length:t.length,items:e};d.push(e)}),selectPath(d[0],t),postmessageToParent({shortPaths:d,data:d.length,event_name:"_findShortPath"})):postmessageToParent({data:0,event_name:"_findShortPath"})}Object.prototype.deepClone=function(){return deepClone(this)},Object.defineProperty(Object.prototype,"deepClone",{enumerable:!1});var menu_x,menu_y,messagefuntion={changeSelection:function(t,e,n,i){postmessageToParent({event:"changeSelection",event_name:"实体选中内容发生变化",model:model,entity_type:entity_type,layout:layout,graph_id:graph_id,nodeArray:t,linkArray:e,startVertex:n,endVertex:i})},changeGraphProperty:function(){postmessageToParent({event_name:"图属性参数",model:model,entity_type:entity_type,layout:layout,graph_id:graph_id,nodesCount:graph_tool.getNodesCount(),nodesSelectCount:graph_tool.nodesSelectCount(),nodesVisibleCount:graph_tool.nodesVisibleCount(),edgesCount:graph_tool.getEdgesCount(),edgesSelectCount:graph_tool.edgesSelectCount(),edgesVisibleCount:graph_tool.edgesVisibleCount()})}};function handleLinkData(t){var n=[],i={};t.map(function(t){i[""+t.from+t.to+t.type]?i[""+t.from+t.to+t.type].push(t):i[""+t.from+t.to+t.type]=[t]}),Object.keys(i).map(function(t){var e=i[t][0];e.mergeLinks=i[t],n.push(e)})}function postmessageToParent(t){window.parent.postMessage(t,"*")}messageProcessing.initGraph=function(t){is_contextmenu=t.is_contextmenu,pattern=t.pattern,0==t.header_state&&$(".graph_pro").hide(),myDiagram=GO(go.Diagram,Diagram_name),entity_type=t.entity_type,graph_id=t.graph_id,model=t.model,t.nodeArray.forEach(function(t){var e=t.visible;t.d_stroke=t.stroke,t.d_fill=t.fill,t.default_stroke=t.d_stroke,t.default_fill=t.d_fill,t.visible=void 0===e||e,-1==groups.indexOf(t.group)&&null!=t.group&&""!=t.group&&groups.push(t.group),null==t.group&&delete t.group}),graph_mode=t.graph_mode,t.linkArray.forEach(function(t){var e=t.visible;t.source=t.from,t.target=t.to,t.d_stroke=t.stroke,t.visible=void 0===e||e,"basic"!==graph_mode&&(t.dir=1)}),init_rightMenu_list(),nodeArray=t.nodeArray,linkArray=t.linkArray,original_nodes=t.original_nodes,original_links=t.original_links,layout=t.layout,entity_list=t.entity_list,entity_tags=t.entity_tags,moneys=t.moneys,schema=t.schema||0,hideNodeList=new Set(t.hideNodeList),hideLinkList=new Set(t.hideLinkList),hideLinkRemarks=null==t.hideLinkRemarks?{}:t.hideLinkRemarks,setLayout(layout,t.type)},messageProcessing.triggerGraphEvent=function(n){var i,e,t,o;if(1==n.order&&(2!=rendering_type?(nodeArray=myDiagram.model.nodeDataArray,linkArray=myDiagram.model.linkDataArray,myDiagram.nodes.each(function(e,t){nodeArray.forEach(function(t){t.key==e.data.key&&(t.isSelected=e.part.isSelected,t.visible=e.visible,t.isLayoutPositioned=e.visible)})}),myDiagram.links.each(function(e,t){linkArray.forEach(function(t){t.id==e.data.id&&(t.isSelected=e.part.isSelected,t.visible=e.visible,t.isLayoutPositioned=e.visible)})})):(i=[],e=[],graph.forEachNode(function(t,e){e={attributes:e};e.key=t,i.push(toCanvasData(e,0))}),graph.forEachEdge(function(t){t={attributes:graph.getEdgeAttributes(t)};e.push(toCanvasData(0,t))}),nodeArray=i,linkArray=e),layout=n.layout,nodeArray.forEach(function(t){delete t.loc}),$(".loading").show(),$(".loading_box").show(),setLayout(n.layout)),2==n.order){if(2==rendering_type)return void FastV.search_entity(n.search_text);search_entity(n.search_text)}if(3==n.order){if(2==rendering_type)return void FastV.undo();graph_tool.undo()}if(4==n.order){if(2==rendering_type)return void FastV.redo();graph_tool.redo()}if(5==n.order&&setLabel_state(n.labelisShow),6==n.order&&(entity_type=n.entity_type,graph_id=n.graph_id,model=n.model),7==n.order&&merge_link_method(n),8==n.order&&cancel_mergeLink(n),9==n.order){if(2==rendering_type)return void FastV.merge_vertex();merge_vertex()}if(10==n.order){if(2==rendering_type)return void FastV.cacel_merge_node();cacel_merge_node()}if(11==n.order){if(2===rendering_type)return void webgl_selectAll();graph_tool.selectAll()}if(12==n.order){if(2===rendering_type)return void webgl_reverseSelected();graph_tool.reverseSelected()}if(13==n.order){if(2==rendering_type)return void FastV.setSelectEntity2hide();setSelectEntity2hide()}if(14==n.order){if(2==rendering_type)return void FastV.show_allEntity();show_allEntity()}if(15==n.order){if(2==rendering_type)return void FastV.setLockNodeState(1);graph_tool.getcurrentNodes_Part().map(function(t){myDiagram.model.setDataProperty(t.data,"isLocking",!0),myDiagram.model.setDataProperty(t.data,"lock",{x:t.part.location.x,y:t.part.location.y})})}if(16==n.order){if(2==rendering_type)return void FastV.setLockNodeState(0);graph_tool.getcurrentNodes_Part().map(function(t){myDiagram.model.setDataProperty(t.data,"isLocking",!1),myDiagram.model.setDataProperty(t.data,"lock",{}),t.part.movable=!0})}if(17==n.order&&myDiagram.commandHandler.resetZoom(),18==n.order){if(2==rendering_type)return void FastV.zoomToFit();myDiagram.commandHandler.zoomToFit()}if(19==n.order&&(2==rendering_type&&webgl_scrollToPart(),myDiagram.scale=2,myDiagram.commandHandler.scrollToPart(graph_tool.getcurrentNode()[0])),20==n.order&&("start"==n.start_or_stop&&start_layout_animation(),"stop"==n.start_or_stop&&stop_layout_animation()),22==n.order){if(2==rendering_type)return void FastV.change_selectordrag(!1);change_selectordrag(!(webgl_graph_state="tz"))}if(23==n.order){if(2==rendering_type)return void FastV.change_selectordrag(!0);webgl_graph_state="xz",change_selectordrag(!0)}if(24==n.order&&(2==rendering_type&&FastV.select_Both_ends(),select_Both_ends()),25==n.order&&(2==rendering_type&&FastV.select_links(),select_links()),26==n.order&&(2==rendering_type&&FastV.select_Both_ends_links(),select_Both_ends_links()),27==n.order&&setEntity2hide(),28==n.order&&myDiagram.model.nodeDataArray.map(function(t){var e=t.isExpand+"_x";myDiagram.model.setDataProperty(t,"isExpand",e)}),29==n.order&&myDiagram.model.nodeDataArray.map(function(t){var e=+t.isExpand.split("_")[0];myDiagram.model.setDataProperty(t,"isExpand",e)}),30==n.order&&_commonRelationship(),31==n.order&&_findAllPath(n.begin,n.end),32==n.order&&_findShortPath(n.begin,n.end,n.direction),33==n.order&&(myDiagram.nodes.each(function(t){t.isSelected=!1,myDiagram.updateAllRelationshipsFromData()}),myDiagram.links.each(function(t){t.isSelected=!1}),n.nodeArray&&n.nodeArray.map(function(e){myDiagram.nodes.each(function(t){t.data.id==e.id&&(t.isSelected=!0,myDiagram.updateAllRelationshipsFromData())})}),n.linkArray&&n.linkArray.map(function(e){myDiagram.links.each(function(t){t.data.id==e.id&&(t.isSelected=!0,myDiagram.model.setDataProperty(t.data,"level",e.level))})}),myDiagram.zoomToFit()),34==n.order){if(2==rendering_type)return void FastV.setNodeHighlighted(!0);n.nodeArray.map(function(e){myDiagram.nodes.each(function(t){t.data.key==e.key&&(myDiagram.model.setDataProperty(t.data,"category","emphasize"),myDiagram.model.setDataProperty(t.data,"isHighlighted",1),t.findObject("node_shape").stroke="#CD593F",t.data.isHighlighted=1)})})}if(35==n.order){if(2==rendering_type)return void FastV.setNodeHighlighted(!1);n.nodeArray.map(function(e){myDiagram.nodes.each(function(t){t.data.key==e.key&&(myDiagram.model.setDataProperty(t.data,"category",""),myDiagram.model.setDataProperty(t.data,"isHighlighted",0),t.data.isHighlighted=0,t.findObject("node_shape").stroke=t.data.d_stroke)})})}if(36==n.order&&($("#"+Diagram_name).height("100%"),t=$("#"+Diagram_name).height(),o=$(".graph_pro").height()+2,$("#"+Diagram_name).height(t-o),myDiagram.requestUpdate(),myDiagram.zoomToFit()),37==n.order&&setEdgeVisible2show(n.show_edges),38==n.order&&setReasonAboutHide(n.reasons),39==n.order){if(2==rendering_type)return void FastV.increaseZoom();graph_tool.increaseZoom()}if(40==n.order){if(2==rendering_type)return void FastV.decreaseZoom();graph_tool.decreaseZoom()}if(41==n.order){if(2==rendering_type)return hideNodes.clear(),hideEdges.clear(),graph.forEachNode(function(t){graph.updateNodeAttribute(t,"visible",function(t){return!0})}),graph.forEachEdge(function(t){graph.updateEdgeAttribute(t,"visible",function(t){return!0})}),0<n.nodeTypeList.length&&graph.forEachNode(function(t){-1==n.nodeTypeList.indexOf(graph.getNodeAttributes(t).type_)&&(hideNodes.add(t),graph.updateNodeAttribute(t,"visible",function(t){return!1}))}),0<n.linkTypeList.length&&graph.forEachEdge(function(t){-1==n.linkTypeList.indexOf(graph.getEdgeAttributes(t).type_)&&(hideEdges.add(t),graph.updateEdgeAttribute(t,"visible",function(t){return!1}))}),n.outInDegree.map(function(n){graph.forEachNode(function(t){var e;0==n.type?e=graph.degree(t):1==n.type?e=graph.outDegree(t):2==n.type&&(e=graph.inDegree(t)),1==n.compareMode&&e<n.degrees&&(hideNodes.add(t),graph.updateNodeAttribute(t,"visible",function(t){return!1})),2==n.compareMode&&(e>n.degrees||e<n.degrees)&&(hideNodes.add(t),graph.updateNodeAttribute(t,"visible",function(t){return!1})),3==n.compareMode&&e>n.degrees&&(hideNodes.add(t),graph.updateNodeAttribute(t,"visible",function(t){return!1}))})}),n.senior.map(function(i){"node"==i.entity?graph.forEachNode(function(t){graph.getNodeAttribute(t,"type_");var e=null,n=graph.getNodeAttribute(t,"fields").filter(function(t){return t.name==i.field});0<n.length&&(e=n[0].value,"date"!=n[0].type&&"datetime"!=n[0].type&&"timestamp"!=n[0].type||(e=new Date(n[0].value).getTime(13)),"number"!=n[0].type&&"decimal"!=n[0].type&&"numeric"!=n[0].type&&"int"!=n[0].type||(e=+e),1==i.compareMode?e!=i.value[0]&&(hideNodes.add(t),graph.updateNodeAttribute(t,"visible",function(t){return!1})):2==i.compareMode?e==i.value[0]&&(hideNodes.add(t),graph.updateNodeAttribute(t,"visible",function(t){return!1})):3==i.compareMode?(e<i.value[0]||e>i.value[1])&&(hideNodes.add(t),graph.updateNodeAttribute(t,"visible",function(t){return!1})):4==i.compareMode?e<=i.value[0]&&(hideNodes.add(t),graph.updateNodeAttribute(t,"visible",function(t){return!1})):5==i.compareMode?e<i.value[0]&&(hideNodes.add(t),graph.updateNodeAttribute(t,"visible",function(t){return!1})):6==i.compareMode?e>=i.value[0]&&(hideNodes.add(t),graph.updateNodeAttribute(t,"visible",function(t){return!1})):7==i.compareMode?e>i.value[0]&&(hideNodes.add(t),graph.updateNodeAttribute(t,"visible",function(t){return!1})):8==i.compareMode?-1==e.indexOf(i.value[0])&&(hideNodes.add(t),graph.updateNodeAttribute(t,"visible",function(t){return!1})):9==i.compareMode?-1!=e.indexOf(i.value[0])&&(hideNodes.add(t),graph.updateNodeAttribute(t,"visible",function(t){return!1})):10==i.compareMode?""==e&&(hideNodes.add(t),graph.updateNodeAttribute(t,"visible",function(t){return!1})):11==i.compareMode&&""!=e&&(hideNodes.add(t),graph.updateNodeAttribute(t,"visible",function(t){return!1})))}):"link"==i.entity&&graph.edges().forEach(function(t){graph.getEdgeAttribute(t,"type_");var e=null,n=graph.getEdgeAttribute(t,"fields").filter(function(t){return t.name==i.field});0<n.length&&(e=n[0].value,"date"!=n[0].type&&"datetime"!=n[0].type&&"timestamp"!=n[0].type||(e=new Date(n[0].value).getTime(13)),"number"!=n[0].type&&"decimal"!=n[0].type&&"numeric"!=n[0].type&&"int"!=n[0].type||(e=+e),1==i.compareMode?e!=i.value[0]&&(hideEdges.add(t),graph.updateEdgeAttribute(t,"visible",function(t){return!1})):2==i.compareMode?e==i.value[0]&&(hideEdges.add(t),graph.updateEdgeAttribute(t,"visible",function(t){return!1})):3==i.compareMode?(e<i.value[0]||e>i.value[1])&&(hideEdges.add(t),graph.updateEdgeAttribute(t,"visible",function(t){return!1})):4==i.compareMode?e<=i.value[0]&&(hideEdges.add(t),graph.updateEdgeAttribute(t,"visible",function(t){return!1})):5==i.compareMode?e<i.value[0]&&(hideEdges.add(t),graph.updateEdgeAttribute(t,"visible",function(t){return!1})):6==i.compareMode?e>=i.value[0]&&(hideEdges.add(t),graph.updateEdgeAttribute(t,"visible",function(t){return!1})):7==i.compareMode?e>i.value[0]&&(hideEdges.add(t),graph.updateEdgeAttribute(t,"visible",function(t){return!1})):8==i.compareMode?-1==e.indexOf(i.value[0])&&(hideEdges.add(t),graph.updateEdgeAttribute(t,"visible",function(t){return!1})):9==i.compareMode?-1!=e.indexOf(i.value[0])&&(hideEdges.add(t),graph.updateEdgeAttribute(t,"visible",function(t){return!1})):10==i.compareMode?""==e&&(hideEdges.add(t),graph.updateEdgeAttribute(t,"visible",function(t){return!1})):11==i.compareMode&&""!=e&&(hideEdges.add(t),graph.updateEdgeAttribute(t,"visible",function(t){return!1})))})}),void renderer.refresh();var r=[];hideNodeList.clear(),hideLinkList.clear(),myDiagram.nodes.each(function(t){t.visible=!0,r.push(t.data.key)}),myDiagram.links.each(function(t){-1!=r.indexOf(t.data.from)&&-1!=r.indexOf(t.data.to)&&(t.visible=!0)}),0<n.nodeTypeList.length&&myDiagram.nodes.each(function(t){var e=t.data.type;-1==n.nodeTypeList.indexOf(e)&&(t.visible=!1,t=t.part.data.key,hideNodeList.add(t))}),0<n.linkTypeList.length&&myDiagram.links.each(function(t){var e=t.data.type;-1==n.linkTypeList.indexOf(e)&&(t.visible=!1,t=t.part.data.id,hideLinkList.add(t))}),n.outInDegree.map(function(n){myDiagram.nodes.each(function(t){var e;0==n.type?e=t.findLinksInto().count+t.findLinksOutOf().count:1==n.type?e=t.findLinksOutOf().count:2==n.type&&(e=t.findLinksInto().count),1==n.compareMode&&e<n.degrees&&(t.visible=!1),2==n.compareMode&&(e>n.degrees||e<n.degrees)&&(t.visible=!1),3==n.compareMode&&e>n.degrees&&(t.visible=!1),0==t.visible&&(t=t.part.data.key,hideNodeList.add(t))})}),n.senior.map(function(i){"node"==i.entity?myDiagram.nodes.each(function(t){t.data.type;var e=null,n=t.data.fields.filter(function(t){return t.name==i.field});0<n.length&&(e=n[0].value,"date"!=n[0].type&&"datetime"!=n[0].type&&"timestamp"!=n[0].type||(e=new Date(n[0].value).getTime(13)),"number"!=n[0].type&&"decimal"!=n[0].type&&"numeric"!=n[0].type&&"int"!=n[0].type||(e=+e),1==i.compareMode?e!=i.value[0]&&(t.visible=!1):2==i.compareMode?e==i.value[0]&&(t.visible=!1):3==i.compareMode?(e<i.value[0]||e>i.value[1])&&(t.visible=!1):4==i.compareMode?e<=i.value[0]&&(t.visible=!1):5==i.compareMode?e<i.value[0]&&(t.visible=!1):6==i.compareMode?e>=i.value[0]&&(t.visible=!1):7==i.compareMode?e>i.value[0]&&(t.visible=!1):8==i.compareMode?-1==e.indexOf(i.value[0])&&(t.visible=!1):9==i.compareMode?-1!=e.indexOf(i.value[0])&&(t.visible=!1):10==i.compareMode?""==e&&(t.visible=!1):11==i.compareMode&&""!=e&&(t.visible=!1),0==t.visible&&(t=t.part.data.key,hideNodeList.add(t)))}):"link"==i.entity&&myDiagram.links.each(function(t){t.data.type;var e=null,n=t.data.fields.filter(function(t){return t.name==i.field});0<n.length&&(e=n[0].value,"date"!=n[0].type&&"datetime"!=n[0].type&&"timestamp"!=n[0].type||(e=new Date(n[0].value).getTime(13)),"number"!=n[0].type&&"decimal"!=n[0].type&&"numeric"!=n[0].type&&"int"!=n[0].type||(e=+e),1==i.compareMode?e!=i.value[0]&&(t.visible=!1):2==i.compareMode?e==i.value[0]&&(t.visible=!1):3==i.compareMode?(e<i.value[0]||e>i.value[1])&&(t.visible=!1):4==i.compareMode?e<=i.value[0]&&(t.visible=!1):5==i.compareMode?e<i.value[0]&&(t.visible=!1):6==i.compareMode?e>=i.value[0]&&(t.visible=!1):7==i.compareMode?e>i.value[0]&&(t.visible=!1):8==i.compareMode?-1==e.indexOf(i.value[0])&&(t.visible=!1):9==i.compareMode?-1!=e.indexOf(i.value[0])&&(t.visible=!1):10==i.compareMode?""==e&&(t.visible=!1):11==i.compareMode&&""!=e&&(t.visible=!1),0==t.visible&&(t=t.part.data.id,hideLinkList.add(t)))})})}if(42==n.order&&(isFrameSelectionTimer=0),43==n.order&&(isFrameSelectionTimer=1e3),44==n.order){if(2==rendering_type)return void FastV.setDiscreteNode(n.isVisible);setScatterNodeVisible(n.isVisible)}if(45==n.order){if(2==rendering_type){var a=n.data;return graph.edges().forEach(function(i){var t=graph.getEdgeAttribute(i,"type_"),e=graph.getEdgeAttribute(i,"fields"),o=null,n=e.filter(function(t){return e.name==a.field}),o=n[0].value;"number"!=n[0].type&&"decimal"!=n[0].type&&"numeric"!=n[0].type&&"int"!=n[0].type||(o=+o),1==a.styleMode?t==a.type&&(graph.updateEdgeAttribute(i,"color",function(t){return a.styleRules[0].color}),graph.updateEdgeAttribute(i,"size",function(t){return a.styleRules[0].width})):2==a.styleMode&&t==a.type&&a.styleRules.map(function(e){var t=null===e.min?-1/0:e.min,n=null===e.max?1/0:e.max;t<o&&o<n&&(graph.updateEdgeAttribute(i,"color",function(t){return e.color}),graph.updateEdgeAttribute(i,"size",function(t){return e.width})),e.isVisible||hideEdges.add(i)})}),void renderer.refresh()}var s=n.data;myDiagram.links.each(function(i){var o,t=i.data.type,e=i.data.fields,e=e.filter(function(t){return t.name==s.field});1==s.styleMode&&t==s.type&&(myDiagram.model.setDataProperty(i.data,"d_stroke",s.styleRules[0].color),myDiagram.model.setDataProperty(i.data,"stroke",s.styleRules[0].color),myDiagram.model.setDataProperty(i.data,"width",s.styleRules[0].width)),0<e.length&&(o=e[0].value,2==s.styleMode&&t==s.type&&s.styleRules.map(function(t){var e=null===t.min?-1/0:t.min,n=null===t.max?1/0:t.max;e<o&&o<n&&(myDiagram.model.setDataProperty(i.data,"d_stroke",t.color),myDiagram.model.setDataProperty(i.data,"stroke",t.color),myDiagram.model.setDataProperty(i.data,"width",t.width),i.visible=t.isVisible)}))})}46==n.order&&selectPath(n.data),47==n.order&&2==rendering_type&&(group_border=n.group_border,renderer.refresh()),48==n.order&&(2!=rendering_type?setEntity2hidebyType(n.entity_type,n.isShow):FastV.setEntity2hidebyType(n.entity_type,n.isShow))},window.addEventListener("message",function(t){var n,i,e,o,r,a,s=JSON.parse(JSON.stringify(t.data));if("timingEvents"==s.source&&"布局加载完成"==s.event_name&&window.parent.postMessage({source:"timingEvents",event_name:"布局加载完成"},"*"),1==s.type&&messageProcessing.initGraph(s),2==s.type){if(s.nodeArray&&s.nodeArray.forEach(function(t){t.d_stroke=t.stroke,t.d_fill=t.fill,t.default_stroke=t.d_stroke,t.default_fill=t.d_fill}),s.linkArray.forEach(function(t){t.d_stroke=t.stroke,"basic"!==graph_mode&&(t.dir=1)}),2==rendering_type)return void FastV.addGraphData(s.nodeArray,s.linkArray,s.animation);myDiagram.nodes.each(function(t){t.isSelected=!1}),myDiagram.links.each(function(t){t.isSelected=!1});var h=graph_tool.getcurrentNode(),u=s;myDiagram.startTransaction("CollapseExpandTree");var l=s.nodeArray,t=s.linkArray.reverse();myDiagram.links.each(function(t){0==t.isSelected&&null!=t.data.level&&myDiagram.model.setDataProperty(t.data,"level","-1")}),l.map(function(e){var n,i=0;myDiagram.nodes.each(function(t){t.part.data.key==e.key&&(i++,n=t)}),0==i?myDiagram.model.addNodeData(e):(myDiagram.model.setDataProperty(n,"isExpand",e.isExpand),myDiagram.model.setDataProperty(n,"isSelected",e.isSelected))}),t.map(function(e){var n,i=0;myDiagram.model.linkDataArray.map(function(t){t.id==e.id&&(i++,n=t)}),0==i?myDiagram.model.addLinkData(e):(myDiagram.model.setDataProperty(n,"level",e.level),myDiagram.model.setDataProperty(n,"isSelected",e.isSelected)),"sankey"==u.layout&&1==u.animation&&(animation=null,(animation=new go.Animation).easing=go.Animation.EaseLinear,myDiagram.links.each(function(t){t.data.id==e.id&&t.data.money==e.money&&(t.findObject("PIPE").opacity=1,animation.add(t.findObject("PIPE"),"strokeDashOffset",20,0))}),animation.runCount=1/0,animation.start(),setTimeout(function(){myDiagram.links.each(function(t){t.fromNode.key==e.from&&t.toNode.key==e.to&&(t.findObject("PIPE").opacity=0)}),animation.stop()},1e4))}),l=myDiagram.model.nodeDataArray,t=myDiagram.model.linkDataArray,sortLinks={},t.map(function(t){sortLinks[t.from+t.to]?sortLinks[t.from+t.to].push(t):(t.index=0,sortLinks[t.from+t.to]=[t])});var d=[];Object.keys(sortLinks).map(function(t){var e=sortLinks[t].sort(function(t,e){return t.time-e.time});(sortLinks[t]=e).map(function(t,e){t.index=e,d.push(t)})}),myDiagram.model.linkDataArray=d,myDiagram.nodes.each(function(t){t.part.data.key===h.key&&(t.part.isSelected=!0)}),"sankey"===layout&&myDiagram.links.each(function(t){var e=Math.round(sortLinks[t.data.from+t.data.to].length/2),n=sortLinks[t.data.from+t.data.to].length,e=2==n?t.data.index+1==e?.5-.6/n*(e-t.data.index):.5+.6/n*(t.data.index-e+1):t.data.index+1>e?.5-.9/n*(e-t.data.index-1):t.data.index+1==e?.5:.5+.9/n*(t.data.index-e+1);t.fromSpot=new go.Spot(1,e,0,0),t.toSpot=new go.Spot(0,e,0,0)}),myDiagram.commitTransaction("CollapseExpandTree"),myDiagram.zoomToFit()}if(3==s.type&&messageProcessing.triggerGraphEvent(s),4==s.type){if(1==s.get_type){if("timing"==layout){var c={type:4,downloadImgName:s.downloadImgName};return void document.getElementById("timeEvents_iframe").contentWindow.postMessage(c,"*")}if("timeMargin"==layout){var c={type:4,downloadImgName:s.downloadImgName};return void document.getElementById("timeMargin_iframe").contentWindow.postMessage(c,"*")}downloadImgName=s.downloadImgName,2==rendering_type&&FastV.saveAsPNG(renderer,["edges","nodes","edgeLabels","labels"],"download"),graph_tool.makeBlob()}if(3==s.get_type){if(2==rendering_type)return void FastV.saveAsPNG(renderer,["edges","nodes","edgeLabels","labels"]);graph_tool.makeBlob_toParent()}if(4==s.get_type){if(2==rendering_type){var g=[],f=[];return selectedNodes.forEach(function(t){var e={attributes:graph.getNodeAttributes(t)};e.key=t,g.push(toCanvasData(e,0))}),selectedEdges.forEach(function(t){t={attributes:graph.getEdgeAttributes(t)};f.push(toCanvasData(0,t))}),void postmessageToParent({event:"ChangedSelection",event_name:"获取选中节点集合",vertexs:g,startVertex:g[0],endVertex:g[1],nodeArray:g,linkArray:f})}postmessageToParent(w={vertexs:b=graph_tool.getcurrentNodes(),startVertex:startVertex,endVertex:endVertex,g_json:graph_tool.graphtoJson(),entity_list:entity_list,msg:"获取选中节点集合"})}if(5==s.get_type){if(2==rendering_type){var p=[],m=[];return selectedNodes.forEach(function(t){var e={attributes:graph.getNodeAttributes(t)};e.key=t,p.push(toCanvasData(e,0))}),selectedEdges.forEach(function(t){t={attributes:graph.getEdgeAttributes(t)};m.push(toCanvasData(0,t))}),void postmessageToParent({event:"ChangedSelection",event_name:"获取选中边集合",vertexs:p,edges:m,nodeArray:p,linkArray:m})}postmessageToParent(w={edges:graph_tool.getcurrentEdges(),msg:"获取选中边集合"})}if(6==s.get_type){if(2==rendering_type){var y=[],v=[];return selectedNodes.forEach(function(t){var e={attributes:graph.getNodeAttributes(t)};e.key=t,y.push(toCanvasData(e,0))}),selectedEdges.forEach(function(t){t={attributes:graph.getEdgeAttributes(t)};v.push(toCanvasData(0,t))}),void postmessageToParent({event:"ChangedSelection",event_name:"获取选中节点和边集合",vertexs:y,edges:v,nodeArray:y,linkArray:v})}var w,b=graph_tool.getcurrentNodes(),S=graph_tool.getcurrentEdges().map(function(t){return{from:t.from,to:t.to,text:t.text,id:t.id,numeric:t.numeric,time:t.time,type_key:t.type_key,type_text:t.type_text,type:t.type,money:t.money,size:t.size,color:t.color,width:t.width,category:t.category,direction:t.direction,stroke:t.d_stroke,dir:t.dir,d_stroke:t.d_stroke,d_fill:t.d_stroke,tags:t.tags,fields:t.fields}});S.map(function(e){var t=b.some(function(t){t.key,e.from}),n=b.some(function(t){t.key,e.to});t||b.push(graph_tool.findNodeForKey(e.from).data),n||b.push(graph_tool.findNodeForKey(e.to).data)}),b=Array.from(new Set(b)),"mlm_layout"==layout&&S.map(function(e,t){var n=b.some(function(t){if(t.key==e.from)return!0}),i=b.some(function(t){if(t.key==e.to)return!0});n&&i||S.splice(t,1)}),postmessageToParent(w={nodeArray:b,linkArray:S,vertexs:b,edges:S,g_json:graph_tool.graphtoJson(),event_name:"获取选中节点和边集合"})}7==s.get_type&&postmessageToParent(w={g_json:graph_tool.graphtoJson(),vertexs:graph_tool.getcurrentNodes(),original_nodes:original_nodes,original_links:original_links}),8==s.get_type&&postmessageToParent(w={msg:"获取边所有类型和属性",data:get_graph_links_type()}),9==s.get_type&&postmessageToParent(w={msg:"获取当前合并的边类型",data:get_graph_mergeLink_type()}),10==s.get_type&&postmessageToParent(w={msg:"获取维度信息",node_rows:get_node_rows(),link_rows:get_link_rows(),link_Dimension_count:get_link_Dimension_count(),node_Dimension_count:get_node_Dimension_count()}),10==s.get_type&&((a={event_name:"获取隐藏边列表",model:model,entity_type:entity_type,layout:layout,graph_id:graph_id,hideLinkList:[]}).hideLinkList=getHideListofTransaction(),postmessageToParent(a)),11==s.get_type&&(u=getHideEntityList(),postmessageToParent({event_name:"获取隐藏点和边集合",model:model,entity_type:entity_type,layout:layout,graph_id:graph_id,hideList:u})),$(".item-inner").hide()}if(5==s.type&&(s.nodeArray.forEach(function(t){t.d_stroke=t.stroke,t.d_fill=t.fill,t.default_stroke=t.d_stroke,t.default_fill=t.d_fill}),n=s.nodeArray,i=s.linkArray,n.map(function(e,t){var n=0;myDiagram.model.nodeDataArray.map(function(t){t.key==e.key&&n++}),e.key!==graph_tool.getcurrentNodes().key&&0==n&&myDiagram.model.addNodeData(e)}),i.map(function(e){var n=0;myDiagram.model.linkDataArray.map(function(t){t.from==e.from&&t.to==e.to&&n++}),0==n&&myDiagram.model.addLinkData(e)}),nodeArray=myDiagram.model.nodeDataArray,linkArray=myDiagram.model.linkDataArray,"ForceDirectedLayout"==layout&&setLayout("ForceDirectedLayout")),6==s.type&&(n=s.nodeArray,i=s.linkArray,myDiagram.model.nodeDataArray.map(function(e){n.map(function(t){e.key==t.key&&(myDiagram.model.setDataProperty(e,"fill","#EE0000"),myDiagram.model.setDataProperty(e,"stroke","#EE0000"),myDiagram.model.setDataProperty(e,"highlight_fill","#EE0000"),myDiagram.model.setDataProperty(e,"highlight_stroke","#EE0000"))})}),myDiagram.model.linkDataArray.map(function(e){i.map(function(t){e.e_ids==t.e_ids&&(myDiagram.model.setDataProperty(e,"fill","#EE0000"),myDiagram.model.setDataProperty(e,"stroke","#EE0000"),myDiagram.model.setDataProperty(e,"highlight_fill","#EE0000"),myDiagram.model.setDataProperty(e,"highlight_stroke","#EE0000"))})})),7==s.type&&(e=s.newData,myDiagram.model.nodeDataArray.map(function(t){t.key==e.key&&myDiagram.model.setDataProperty(t,"tags",e.tags)})),8==s.type)return myDiagram.startTransaction("CollapseExpandTree"),nodeArray=s.nodeArray,linkArray=s.linkArray,nodeArray.map(function(e){var n=0;myDiagram.model.nodeDataArray.map(function(t){t.key==e.key&&n++}),e.key!==graph_tool.getcurrentNode().key&&0==n&&(e.parent=graph_tool.getcurrentNode().key,myDiagram.model.addNodeData(e))}),linkArray.map(function(e){var n=0;myDiagram.model.linkDataArray.map(function(t){t.from==e.from&&t.to==e.to&&t.e_ids==e.e_ids&&n++}),0==n&&myDiagram.model.addLinkData(e)}),myDiagram.commitTransaction("CollapseExpandTree"),nodeArray=myDiagram.model.nodeDataArray,void(linkArray=myDiagram.model.linkDataArray);9==s.type&&(0==original_nodes.length&&0==original_links.length&&(myDiagram.model.nodeDataArray.map(function(t){original_nodes.push(t)}),myDiagram.model.linkDataArray.map(function(t){original_links.push(t)})),1==s.state&&(0<s.nodeArray.length&&(o=[],nodeArray.map(function(t,e){s.nodeArray[0].type!==t.type&&o.push(t)}),nodeArray=o.concat(s.nodeArray)),nodeArray.forEach(function(t){t.d_stroke=t.stroke,t.d_fill=t.fill,t.default_stroke=t.d_stroke,t.default_fill=t.d_fill})),2==s.state&&(o=[],0<s.linkArray.length&&(linkArray.map(function(t,e){s.linkArray[0].type!==t.type&&o.push(t)}),(linkArray=o.concat(s.linkArray)).forEach(function(t){t.d_stroke=t.stroke,t.d_fill=t.fill,t.default_stroke=t.d_stroke,t.default_fill=t.d_fill}))),setLayout(layout)),10==s.type&&(0<original_nodes.length||0<original_links.length)&&(nodeArray=original_nodes,linkArray=original_links,original_nodes=[],original_links=[],setLayout(layout)),11==s.type&&(s.node&&(myDiagram.model.addNodeData(s.node),myDiagram.nodes.each(function(t){t.data.key==s.node&&myDiagram.commandHandler.scrollToPart(t.data)})),s.link&&myDiagram.model.addLinkData(s.link),myDiagram.layoutDiagram(!0)),12==s.type&&(r=0,s.nodes&&s.nodes.map(function(e){myDiagram.nodes.each(function(t){t.data.id==e.id&&(r++,t.isSelected=!0)})}),postmessageToParent({num:r,events_name:"模型高亮节点"}),myDiagram.commandHandler.scrollToPart(graph_tool.getcurrentNode()[0])),13==s.type&&(1<=s.nodeArray.length&&s.nodeArray.map(function(n){myDiagram.model.nodeDataArray.map(function(t){n.id==t.id&&(myDiagram.model.setDataProperty(t,"d_stroke",n.stroke),myDiagram.model.setDataProperty(t,"default_stroke",n.stroke),myDiagram.model.setDataProperty(t,"d_fill",n.fill),myDiagram.model.setDataProperty(t,"default_fill",n.fill),myDiagram.model.setDataProperty(t,"width",n.width),myDiagram.model.setDataProperty(t,"height",n.height),myDiagram.model.setDataProperty(t,"icon",n.icon),myDiagram.model.setDataProperty(t,"color",n.color))}),2==rendering_type&&graph.forEachNode(function(t,e){e.id_==n.id&&(graph.updateNodeAttribute(t,"icon",function(t){return n.icon?"./img/icon/"+n.icon+".svg":""}),graph.updateNodeAttribute(t,"node_icon",function(t){return n.icon}),graph.updateNodeAttribute(t,"color",function(t){return n.fill}),graph.updateNodeAttribute(t,"size",function(t){return n.width?n.width/20:3}))})}),1<=s.linkArray.length&&s.linkArray.map(function(n){myDiagram.model.linkDataArray.map(function(t){n.id==t.id&&(myDiagram.model.setDataProperty(t,"d_stroke",n.stroke),myDiagram.model.setDataProperty(t,"default_stroke",n.stroke),myDiagram.model.setDataProperty(t,"patt",n.patt),myDiagram.model.setDataProperty(t,"width",n.width))}),2==rendering_type&&graph.forEachEdge(function(t,e){e.id_==n.id&&(graph.updateEdgeAttribute(t,"color",function(t){return n.stroke}),graph.updateEdgeAttribute(t,"size",function(t){return n.width?n.width/2:1}))})}),2==rendering_type&&renderer.refresh()),"timingEvents"==s.source&&(1==s.events_id&&(myDiagram.scale=s.scale),2==s.events_id&&(c=graph_tool.graphtoJson(),w={g_pic:s.g_pic,g_json:c,original_nodes:original_nodes,original_links:original_links},a=myDiagram.model.nodeDataArray.map(function(t){var e={};return 1==t.isGroup?e={isGroup:t.isGroup,key:t.key,text:t.text}:(e={key:t.key,id:t.id,text:t.text,type:t.type,type_key:t.type_key,type_text:t.type_text,tags:t.tags,fill:t.fill,icon:t.icon,size:t.size,color:t.color,width:t.width,height:t.height,stroke:t.d_stroke,category:t.category,is_hidden:t.is_hidden,isExpand:t.isExpand},t.group&&(e.group=t.group)),e}),c=myDiagram.model.linkDataArray.map(function(t){return{from:t.from,to:t.to,text:t.text,id:t.id,numeric:t.numeric,time:t.time,type_key:t.type_key,type_text:t.type_text,type:t.type,money:t.money,size:t.size,color:t.color,width:t.width,category:t.category,direction:t.direction,stroke:t.d_stroke}}),w.g_json=JSON.stringify({nodeDataArray:a,linkDataArray:c}),window.parent.postMessage(w,"*")))});var max=$(".slide_content").width()-5,tag=!1,ox=0,left=0,bgleft=0;function setRightMenu_data(t){var e,n=[],i=graph_tool.nodesSelectCount(),o=graph_tool.edgesSelectCount();0<i&&0==o&&(n=r_node_list.map(function(t){return t}),i<2&&(e=n.indexOf("合并实体"),n.splice(e,1)),"1"==t.is_group&&2==t.merge_type?n=r_node_list.map(function(t){return t}):"1"==t.is_group&&(e=(n=r_node_list.map(function(t){return t})).indexOf("合并实体"),n.splice(e,1,"还原实体")),graph_tool.getcurrentNodes().some(function(t){return"account"==t.type||"person"==t.type||"company"==t.type})&&n.push("添加至待调单")),0<o&&0==i&&(n=r_link_list.map(function(t){return t}),e=graph_tool.getcurrentEdge().type,r=graph_tool.getcurrentEdge().id,"transaction"==e&&-1==r.indexOf("_")&&(n=r_link_list.map(function(t){return t})).splice(n.length-1,0,"追踪单笔链路"),n.push("发至新图")),0==i&&0==o&&(n=r_blank_list.map(function(t){return t}));var r=graph_tool.getcurrentNodes().every(function(t){return"account"==t.type});return 1<=i&&r&&n.push("查看交易明细"),0<i&&0<o&&(n=r_node_list.filter(function(t){if("发至新图"==t)return t})),n}function set_R_menu(t){var e="";t&&(t.map(function(t){e+="<li onclick='R_menu_li_click(\""+t+"\")' onmouseenter='R_menu_li_in(\""+t+"\")'>"+("选中"==t||"隐藏"==t||"关系拓展"==t?t+"<span  class='r_menu_icon' ></span>":t)+"</li>"}),$(".R_menu").empty(),$(".R_menu").append(e))}function set_R_menu_(t){var e="";t.map(function(t){e+="<li onclick='R_menu_li_click(\""+t+"\")' >"+t+"</li>"}),$(".R_menu_").empty(),$(".R_menu_").append(e)}function R_menu_li_in(t){var e=document.getElementById("menu_"),n=graph_tool.getcurrentNodes()[0],i=graph_tool.getcurrentEdges()[0];$(t.target).find("img").attr("src","../src/img/arrow_r_hover.svg"),"选中"==t&&n?(e.style.left=menu_x+134+"px",e.style.top=menu_y+114+"px",set_R_menu_(r_node_list_select),$(".R_menu_").show()):"隐藏"==t&&n?(e.style.left=menu_x+134+"px",e.style.top=menu_y+154+"px",set_R_menu_(r_node_list_hide),$(".R_menu_").show()):"关系拓展"==t?(e.style.left=menu_x+134+"px",e.style.top=menu_y+192+"px",set_R_menu_(r_node_list_expand),$(".R_menu_").show()):"选中"==t&&i?(e.style.left=menu_x+134+"px",e.style.top=menu_y+76+"px",set_R_menu_(r_link_list_select),$(".R_menu_").show()):"隐藏"==t&&i?(e.style.left=menu_x+134+"px",e.style.top=menu_y+37+"px",set_R_menu_(r_link_list_hide),$(".R_menu_").show()):$(".R_menu_").hide()}function R_menu_li_click(t){switch(t){case"复制":graph_tool.copySelection();break;case"删除":graph_tool.deleteSelection();break;case"全选":graph_tool.selectAll(),ChangedSelection_fuc();break;case"粘贴":graph_tool.pasteSelection();break;case"反选":graph_tool.reverseSelected();break;case"属性":send_newGraph("属性");break;case"隐藏":hideVertex();break;case"全部显示":show_allEntity();break;case"列出明细":send_newGraph("列出明细");break;case"发至新图":send_newGraph("发至新图");break;case"追来源去向":send_newGraph("追来源去向");break;case"添加标签":send_newGraph("添加标签");break;case"创建分组":send_newGraph("创建分组");break;case"断点接续":send_newGraph("断点接续");break;case"列出明细":send_newGraph("列出明细");break;case"追踪单笔链路":send_newGraph("追踪单笔链路");break;case"合并叶子节点":merge_child_link();break;case"展开叶子节点":cacel_merge_child_link();break;case"选中端点":select_Both_ends();break;case"选中端点和链接":select_Both_ends_links();break;case"选中链接":select_links();break;case"合并实体":merge_vertex();break;case"还原实体":cacel_merge_node();break;case"链接合并":merge_link_method();break;case"关系拓展":send_newGraph("关系拓展");break;case"隐藏未选项":setEntity2hide();break;case"隐藏选中项":setSelectEntity2hide();break;case"快速一层":send_newGraph("快速一层拓展");break;case"自定义":send_newGraph("自定义拓展");break;case"创建新项目":send_newGraph("创建新项目");break;case"查看交易明细":send_newGraph("查看交易明细");break;case"添加至待调单":send_newGraph("添加至待调单")}}function send_newGraph(t,e,n){var i={event_name:t,model:model,entity_type:entity_type,nodeArray:graph_tool.getcurrentNodes(),linkArray:graph_tool.getcurrentEdges(),layout:layout,graph_id:graph_id};2==rendering_type&&(i.nodeArray=e,i.linkArray=n),"断点接续"==t&&(i.from_link=get_eids()),"追踪单笔链路"==t&&(t=getHideEntityList(),i.hideLinkList=t.hideLinkList),postmessageToParent(i)}function delete_lable(t){postmessageToParent({currnode:graph_tool.getcurrentNode(),label:graph_tool.getcurrentNode().tags[t-1],event_name:"删除实体标签",index:t,graph_id:graph_id})}function get_eids(){if(0<graph_tool.getcurrentNodes().length){var e=[],n=graph_tool.getcurrentNodes()[0];return myDiagram.model.linkDataArray.map(function(t){t.to==n.key&&e.push(t)}),e}}function setView(){var t=document.documentElement.clientWidth;1380<t&&$(".Lcss").css("margin-left","5%"),1600<t&&$(".Lcss").css("margin-left","7%")}function sets_sale_num(t){$(".slide_box").css("left",parseInt(100*t)/400*130),$(".scale_num").html(parseInt(100*t)+"%")}$(".slide_box").mousedown(function(t){ox=t.pageX-left,tag=!0}),$(document).mouseup(function(){}),$(".slide_content").mousemove(function(t){if(tag){var e;if(left=t.pageX-ox,left<=0?left=0:max<left&&(left=max),$(".slide_box").css("left",left),parseInt(left/max*400)<1)return($(".scale_num").html("1%"),2==rendering_type)?void webgl_setZoom(left/max*4):(graph_tool.setZomm(.01),"timing"==layout&&(e={type:2,scale:.01},document.getElementById("timeEvents_iframe").contentWindow.postMessage(e,"*")),void("timeMargin"==layout&&(e={type:2,scale:.01},document.getElementById("timeMargin_iframe").contentWindow.postMessage(e,"*"))));2!=rendering_type?(graph_tool.setZomm(left/max*4),"timing"==layout&&(e={type:2,scale:left/max*4},document.getElementById("timeEvents_iframe").contentWindow.postMessage(e,"*")),"timeMargin"==layout&&(e={type:2,scale:left/max*4},document.getElementById("timeMargin_iframe").contentWindow.postMessage(e,"*"))):webgl_setZoom(left/max*4)}}),$(".slide_content").click(function(t){if(!tag){var e;if(bgleft=$(".slide_content").offset().left,left=t.pageX-bgleft,left<=0?left=0:max<left&&(left=max),$(".slide_box").css("left",left),parseInt(left/max*400)<1)return($(".scale_num").html("1%"),2==rendering_type)?void webgl_setZoom(left/max*4):(graph_tool.setZomm(.01),"timing"==layout&&(e={type:2,scale:.01},document.getElementById("timeEvents_iframe").contentWindow.postMessage(e,"*")),void("timeMargin"==layout&&(e={type:2,scale:.01},document.getElementById("timeMargin_iframe").contentWindow.postMessage(e,"*"))));$(".scale_num").html(parseInt(left/max*400)+"%"),2!=rendering_type?("timing"==layout&&(e={type:2,scale:left/max*4},document.getElementById("timeEvents_iframe").contentWindow.postMessage(e,"*")),"timeMargin"==layout&&(e={type:2,scale:left/max*4},document.getElementById("timeMargin_iframe").contentWindow.postMessage(e,"*")),graph_tool.setZomm(left/max*4)):webgl_setZoom(left/max*4)}}),$(".eye_c").click(function(){var t;"img/eye_h.png"==$(".eye_c").attr("src")?$(".eye_c").attr("src","img/eye_l.png"):$(".eye_c").attr("src","img/eye_h.png"),"timing"!=layout?"timeMargin"!=layout?"1px"==$("#"+DiagramOverview_name).css("right")?$("#"+DiagramOverview_name).css("right","-300px"):$("#"+DiagramOverview_name).css("right","1px"):(t={type:3},document.getElementById("timeMargin_iframe").contentWindow.postMessage(t,"*")):(t={type:3},document.getElementById("timeEvents_iframe").contentWindow.postMessage(t,"*"))}),window.oncontextmenu=function(t){var e,n;t.preventDefault(),0!=is_contextmenu?2!=rendering_type&&(e=graph_tool.getcurrentNodes()[0],n=document.getElementById("menu"),set_R_menu(setRightMenu_data(e)),n.style.display="block",e=480<t.clientY?480:t.clientY,n=1600<t.clientX?1600:t.clientX,menu.style.left=n+"px",menu.style.top=e+"px",menu_x=n,menu_y=e):postmessageToParent({event_name:"鼠标右键点击",model:model,layout:layout,graph_id:graph_id,x:t.clientX,y:t.clientY})},window.onclick=function(t){t.stopPropagation(),document.getElementById("menu").style.display="none",document.getElementById("menu_").style.display="none"},setView(),$(".zoom_s").click(function(){2!=rendering_type?graph_tool.decreaseZoom():webgl_decreaseZoom()}),$(".zoom_f").click(function(){2!=rendering_type?graph_tool.increaseZoom():webgl_increaseZoom()});