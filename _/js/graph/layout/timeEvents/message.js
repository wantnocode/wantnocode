"use strict";function blobToDataURL(e,a){var o=new FileReader;o.onload=function(e){a(e.target.result)},o.readAsDataURL(e)}var downloadName="filename";function Callback_img(e){var a=window.URL.createObjectURL(e),o=document.createElement("a");o.style="display: none",o.href=a,o.download=downloadName,void 0===window.navigator.msSaveBlob?(document.body.appendChild(o),requestAnimationFrame(function(){o.click(),window.URL.revokeObjectURL(a),document.body.removeChild(o)})):window.navigator.msSaveBlob(e,downloadName)}function Callback_img_toParent(e){blobToDataURL(e,function(e){e={source:"timingEvents",events_name:"imgData",events_id:2,g_pic:e};window.parent.postMessage(e,"*")})}window.addEventListener("message",function(e){e=e.data;1==e.type&&loadDataToGraph(e.nodes,e.links),2==e.type&&(myDiagram.scale=e.scale/4),3==e.type&&("1px"==document.getElementById(DiagramOverview_name).style.right?document.getElementById(DiagramOverview_name).style.right="-300px":document.getElementById(DiagramOverview_name).style.right="1px"),4==e.type&&(downloadName=e.downloadImgName,myDiagram.commandHandler.zoomToFit(),myDiagram.makeImageData({returnType:"blob",showGrid:!0,showTemporary:!0,callback:Callback_img,maxSize:new go.Size(myDiagram.documentBounds.width,myDiagram.documentBounds.height)})),5==e.type&&(myDiagram.commandHandler.zoomToFit(),myDiagram.makeImageData({returnType:"blob",showGrid:!0,showTemporary:!0,callback:Callback_img_toParent,maxSize:new go.Size(myDiagram.documentBounds.width,myDiagram.documentBounds.height)}))});