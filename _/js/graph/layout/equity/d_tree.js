"use strict";function DoubleTreeLayout(){go.Layout.call(this),this._vertical=!0,this._directionFunction=function(t){return!0},this._bottomRightOptions=null,this._topLeftOptions=null}go.Diagram.inherit(DoubleTreeLayout,go.Layout),Object.defineProperty(DoubleTreeLayout.prototype,"vertical",{get:function(){return this._vertical},set:function(t){if("boolean"!=typeof t)throw new Error("new value for DoubleTreeLayout.vertical must be a boolean value.");this._vertical!==t&&(this._vertical=t,this.invalidateLayout())}}),Object.defineProperty(DoubleTreeLayout.prototype,"directionFunction",{get:function(){return this._directionFunction},set:function(t){if("function"!=typeof t)throw new Error("new value for DoubleTreeLayout.directionFunction must be a function taking a node data object and returning a boolean.");this._directionFunction!==t&&(this._directionFunction=t,this.invalidateLayout())}}),Object.defineProperty(DoubleTreeLayout.prototype,"bottomRightOptions",{get:function(){return this._bottomRightOptions},set:function(t){this._bottomRightOptions!==t&&(this._bottomRightOptions=t,this.invalidateLayout())}}),Object.defineProperty(DoubleTreeLayout.prototype,"topLeftOptions",{get:function(){return this._topLeftOptions},set:function(t){this._topLeftOptions!==t&&(this._topLeftOptions=t,this.invalidateLayout())}}),DoubleTreeLayout.prototype.cloneProtected=function(t){go.Layout.prototype.cloneProtected.call(this,t),t._vertical=this._vertical,t._directionFunction=this._directionFunction,t._bottomRightOptions=this._bottomRightOptions,t._topLeftOptions=this._topLeftOptions},DoubleTreeLayout.prototype.doLayout=function(t){var o,e,i,n;0!==(t=this.collectParts(t)).count&&(null!==(o=this.diagram)&&o.startTransaction("Double Tree Layout"),e=new go.Set,i=new go.Set,this.separatePartsForLayout(t,e,i),(n=this.createTreeLayout(!1)).angle=this.vertical?270:180,n.arrangement=go.TreeLayout.ArrangementFixedRoots,(t=this.createTreeLayout(!0)).angle=this.vertical?90:0,t.arrangement=go.TreeLayout.ArrangementFixedRoots,n.doLayout(e),t.doLayout(i),null!==o&&o.commitTransaction("Double Tree Layout"))},DoubleTreeLayout.prototype.createTreeLayout=function(t){var o=new go.TreeLayout,e=this.topLeftOptions;if(t&&(e=this.bottomRightOptions),e)for(var i in e)o[i]=e[i];return o},DoubleTreeLayout.prototype.separatePartsForLayout=function(t,e,i){var n,r=null,o=new go.Set;if(t.each(function(t){t instanceof go.Node&&null===t.findTreeParentNode()&&o.add(t)}),0===o.count){for(var a=t.iterator;a.next();)if(a.value instanceof go.Node){r=a.value;break}}else 1===o.count?r=o.first():((r=new go.Node).location=new go.Point(0,0),n=!this.diagram||this.diagram.isTreePathToChildren,o.each(function(t){var o=new go.Link;n?(o.fromNode=r,o.toNode=t):(o.fromNode=t,o.toNode=r)}));e.add(r),i.add(r);var u=this;r.findTreeChildrenNodes().each(function(t){var o=u.isPositiveDirection(t)?i:e;o.addAll(t.findTreeParts()),o.add(t.findTreeParentLink())})},DoubleTreeLayout.prototype.isPositiveDirection=function(t){var o=this.directionFunction;if(!o)throw new Error("No DoubleTreeLayout.directionFunction supplied on the layout");return o(t)};