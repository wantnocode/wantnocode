"use strict";function Equity_layout(){myDiagram.div=null,myDiagram=GO(go.Diagram,Diagram_name,{initialAutoScale:go.Diagram.Uniform,"undoManager.isEnabled":!0,layout:GO(DoubleTreeLayout,{directionFunction:function(e){return e.data&&"top"!==e.data.dir}})}),initOverview(),myDiagram.nodeTemplateMap.add("",GO(go.Node,"Vertical",{layerName:"Foreground",zOrder:2,doubleClick:function(){send_newGraph("属性")}},new go.Binding("visible"),new go.Binding("location","loc",function(e,n){return 1==n.data.isLocking?(n.isLayoutPositioned=!1,n.part.movable=!1,new go.Point(n.data.lock.x,n.data.lock.y)):new go.Point.parse(e)}).makeTwoWay(go.Point.stringify),{toolTip:tooltipTemplate},GO(go.Panel,"Auto",GO(go.Picture,{name:"icon_enetity",source:"./img/tree/b_frame.svg",margin:new go.Margin(0,0,0,0),width:104,height:38,visible:!1},new go.Binding("visible","tags",function(e){return""!==e[0].text})),GO(go.TextBlock,{text:"",margin:new go.Margin(-8,0,0,0),stroke:"#fff"},new go.Binding("text","tags",function(e){return e[0].text}))),GO(go.Panel,"vertical",{portId:""},GO(go.Panel,"Vertical",GO(go.Picture,{name:"icon_enetity",source:"./img/tree/open.svg",margin:new go.Margin(0,0,0,0),visible:!1},{click:function(e,n){var o=n.part.data;if(1==o.isExpand){if(1==o.isExpanded){var i=n.part;return myDiagram.commandHandler.expandTree(i),void myDiagram.model.setDataProperty(o,"isExpand",0)}i={event_name:"拓展节点",nodeArray:o,layout:layout,graph_id:graph_id};postmessageToParent(i)}else{n=n.part;myDiagram.model.setDataProperty(o,"isExpand",1),myDiagram.startTransaction("CollapseExpandTree"),myDiagram.commandHandler.collapseTree(n),myDiagram.model.setDataProperty(o,"isExpanded",1),myDiagram.commitTransaction("CollapseExpandTree"),myDiagram.nodes.each(function(e){console.log(e)})}}},new go.Binding("visible",function(e){return 0!=e.isExpand&&"top"==e.dir}),new go.Binding("source","isExpand",function(e){return 1==e?"./img/tree/open.svg":"./img/tree/close.svg"})),GO(go.Shape,"RoundedRectangle",{name:"node_shape",stroke:"#fff",fill:"#fff",width:233,cursor:"pointer",height:60,margin:new go.Margin(0,0,0,0),strokeWidth:1},new go.Binding("stroke","d_stroke"),new go.Binding("strokeWidth","stroke_width")),GO(go.Shape,"RoundedRectangle",{name:"node_shape",stroke:null,fill:"#000",width:60,cursor:"pointer",height:60,margin:new go.Margin(-61,175,0,0)},new go.Binding("fill","d_fill")),GO(go.Picture,{name:"icon_enetity",source:"./img/account.svg",margin:new go.Margin(-41,175,0,0),opacity:1},new go.Binding("source","icon",geoFunc)),GO(go.TextBlock,{name:"icon_label",text:"1",cursor:"pointer",opacity:1,stroke:"#333",width:150,maxLines:1,overflow:go.TextBlock.OverflowEllipsis,margin:new go.Margin(-20,0,0,80)},new go.Binding("text","text")),GO(go.Picture,{name:"icon_enetity",source:"./img/tree/open.svg",margin:new go.Margin(0,0,0,0),visible:!1},{click:function(e,n){var o=n.part.data;if(1==o.isExpand){if(1==o.isExpanded){var i=n.part;return myDiagram.commandHandler.expandTree(i),void myDiagram.model.setDataProperty(o,"isExpand",0)}i={event_name:"拓展节点",nodeArray:o,layout:layout,graph_id:graph_id};postmessageToParent(i)}else{n=n.part;myDiagram.model.setDataProperty(o,"isExpand",1),myDiagram.model.setDataProperty(o,"isExpanded",1),myDiagram.startTransaction("CollapseExpandTree"),myDiagram.commandHandler.collapseTree(n),myDiagram.commitTransaction("CollapseExpandTree")}}},new go.Binding("visible",function(e){return 0!=e.isExpand&&"bottom"==e.dir}),new go.Binding("source","isTreeExpanded",function(e){return 1==e?"./img/tree/open.svg":"./img/tree/close.svg"})))),{selectionAdornmentTemplate:GO(go.Adornment,"Auto",GO(go.Shape,"RoundedRectangle",{width:100,height:130,fill:null,stroke:null,strokeWidth:5,margin:new go.Margin(0,0,0,0)}),GO(go.Placeholder))})),myDiagram.nodeTemplateMap.add("skr_company",GO(go.Node,"Auto",{layerName:"Foreground",doubleClick:function(){send_newGraph("属性")}},GO(go.Panel,"Auto",GO(go.Shape,"RoundedRectangle",{name:"node_shape",stroke:null,fill:"red",width:233,cursor:"pointer",height:40,margin:new go.Margin(0,0,0,0),strokeWidth:1},new go.Binding("fill","d_fill"),new go.Binding("stroke","d_stroke"),new go.Binding("strokeWidth","stroke_width")),GO(go.TextBlock,{name:"icon_label",text:"1",cursor:"pointer",opacity:1,stroke:"#fff",width:200,maxLines:1,overflow:go.TextBlock.OverflowEllipsis,margin:new go.Margin(0,0,0,15)},new go.Binding("text","text"))),{toolTip:tooltipTemplate},{selectionAdornmentTemplate:GO(go.Adornment,"Auto",GO(go.Shape,"RoundedRectangle",{width:100,height:130,fill:null,stroke:null,strokeWidth:5,margin:new go.Margin(0,0,0,0)}),GO(go.Placeholder))})),myDiagram.linkTemplate=GO(go.Link,go.Link.Orthogonal,{corner:5,relinkableFrom:!0,relinkableTo:!0,adjusting:go.Link.End},{doubleClick:function(){send_newGraph("属性")}},{toolTip:tooltipTemplate_link},GO(go.Shape,{name:"edge_standard",toArrow:"standard",stroke:"#BDBDBD",fill:"#BDBDBD",opacity:1},new go.Binding("toArrow","dir",function(e){return console.log(e),"top"==e?"Backward":"standard"}),new go.Binding("stroke","stroke"),new go.Binding("fill","stroke")),GO(go.Shape,{isPanelMain:!0,stroke:null,strokeWidth:2,opacity:0},new go.Binding("stroke","isHighlighted",function(e){return e?"blue":null}).ofObject()),GO(go.Shape,{name:"edge_shape",opacity:1,isPanelMain:!0,stroke:"#BDBDBD",strokeWidth:1,fill:"#BDBDBD"},new go.Binding("stroke","stroke"),new go.Binding("strokeWidth","width"),new go.Binding("stroke","patt",function(e){return""===e?"":"transparent"}),new go.Binding("pathPattern","patt",convertPathPatternToShape)),GO(go.TextBlock,{name:"edge_label",textAlign:"center",font:"10px helvetica, bold Arial, sans-serif",stroke:"#333",text:"",editable:!1,opacity:1,segmentOffset:new go.Point(10,NaN),segmentOrientation:go.Link.OrientUpleft,margin:4},new go.Binding("text"),new go.Binding("font","font")))}