"use strict";var GO=go.GraphObject.make,def_color="#ccc";function convertPathPatternToShape(e){return e?PathPatterns.get(e):null}function convertPathPatternToColor(e){e=convertPathPatternToShape(e);return null!==e?e.stroke:"transparent"}var PathPatterns=new go.Map;function definePathPattern(e,n,t,o,i){if("string"!=typeof e||"string"!=typeof n)throw new Error("invalid name or geometry string argument: "+e+" "+n);void 0===t&&(t="black"),void 0===o&&(o=1),void 0===i&&(i="square"),PathPatterns.set(e,GO(go.Shape,{geometryString:n,fill:"transparent",stroke:t,strokeWidth:o,strokeCap:i}))}function froce_layout(){myDiagram.div=null,myDiagram=GO(go.Diagram,Diagram_name,{initialAutoScale:go.Diagram.Uniform,"undoManager.isEnabled":!0,"animationManager.isEnabled":!1,"commandHandler.archetypeGroupData":{text:"Group",isGroup:!0,color:"blue"},layout:GO(go.ForceDirectedLayout,{defaultSpringLength:50})}),initOverview(),myDiagram.nodeTemplateMap.add("",GO(go.Node,"Vertical",new go.Binding("visible"),new go.Binding("location","loc",function(e,n){return 1==n.data.isLocking?(n.isLayoutPositioned=!1,n.part.movable=!1,new go.Point(n.data.lock.x,n.data.lock.y)):new go.Point.parse(e)}).makeTwoWay(go.Point.stringify),{visible:!0,zOrder:2,layerName:"Foreground",click:function(){},doubleClick:function(){send_newGraph("属性")}},new go.Binding("visible"),new go.Binding("location","loc",go.Point.parse).makeTwoWay(go.Point.stringify),GO(go.Shape,"Ellipse",{name:"node_shape",stroke:"#006ADF",fill:"#006ADF",width:60,cursor:"pointer",height:60,portId:"",strokeWidth:5},{toolTip:tooltipTemplate},new go.Binding("fill","d_fill",function(e){return""==e?"#006ADF":e}),new go.Binding("stroke","d_stroke"),new go.Binding("width"),new go.Binding("height")),GO(go.Picture,{name:"icon_enetity",source:"./img/account.svg",margin:new go.Margin(-40,0,0,0),opacity:1},new go.Binding("source","icon",geoFunc),new go.Binding("width","width",function(e){return.6*e}),new go.Binding("height","height",function(e){return.5*e}),new go.Binding("margin","height",function(e){return new go.Margin(.78*-e,0,0,0)})),GO(go.Panel,"Auto",{margin:12},new go.Binding("margin","width",function(e){return 12*e/60*1.2}),new go.Binding("opacity","text",function(e){return console.log(e.length),0!=e.length}),GO(go.Shape,"Rectangle",{fill:null,stroke:null,margin:new go.Margin(5,0,0,0)},new go.Binding("fill","isSelected",function(e){return e?"#FFC106":null}).ofObject("")),GO(go.TextBlock,{margin:6},new go.Binding("text","text",function(e){return e}),new go.Binding("stroke","isSelected",function(e){return e?"#fff":"#333"}).ofObject(""))),{selectionAdornmentTemplate:GO(go.Adornment,"Vertical",GO(go.Shape,"RoundedRectangle",{width:100,height:130,fill:null,stroke:null,strokeWidth:5,margin:new go.Margin(0,0,0,0)}),GO(go.Placeholder))},{selectionAdorned:!1})),myDiagram.groupTemplate=GO(go.Group,"Vertical",{selectionObjectName:"PANEL",ungroupable:!0},GO(go.TextBlock,{font:"bold 30px sans-serif",isMultiline:!1,editable:!0},new go.Binding("text","text").makeTwoWay(),new go.Binding("stroke","color")),GO(go.Panel,"Auto",{name:"PANEL"},GO(go.Shape,"Rectangle",{fill:null,stroke:"#ccc",strokeWidth:3,portId:"",cursor:"pointer"}),GO(go.Placeholder,{margin:10,background:"transparent"}))),myDiagram.nodeTemplateMap.add("square",GO(go.Node,"Auto",GO(go.Shape,"RoundedRectangle",{width:120,height:64,fill:"#fff",stroke:"#D55500",strokeWidth:2},new go.Binding("fill"),new go.Binding("stroke")),GO(go.TextBlock,{name:"icon_label",opacity:1,margin:8,maxSize:new go.Size(200,NaN),wrap:go.TextBlock.WrapFit,stroke:"#D55500",editable:!0},new go.Binding("text").makeTwoWay()),new go.Binding("stroke"))),myDiagram.linkTemplate=GO(go.Link,{cursor:"pointer",zOrder:1,selectionAdornmentTemplate:linkSelectionAdornmentTemplate},{doubleClick:function(){send_newGraph("属性")}},{toolTip:tooltipTemplate_link},GO(go.Shape,{name:"edge_standard",toArrow:"standard",stroke:"#BDBDBD",fill:"#BDBDBD",opacity:1},new go.Binding("strokeWidth","money",function(e){return 1e6<e?4:1e5<e?3:1e5<e?2:1}),new go.Binding("stroke","money",function(e){return 1e6<e?"red":1e5<e?"orange":1e5<e?"green":"#ccc"})),GO(go.Shape,{name:"edge_shape",opacity:1,isPanelMain:!0,stroke:"#BDBDBD",strokeWidth:1,fill:"#BDBDBD"},new go.Binding("strokeWidth","money",function(e){return 1e6<e?4:1e5<e?3:1e5<e?2:1}),new go.Binding("stroke","money",function(e){return 1e6<e?"red":1e5<e?"orange":1e5<e?"green":"#ccc"}),new go.Binding("stroke","patt",function(e){return""===e?"":"transparent"}),new go.Binding("pathPattern","patt",convertPathPatternToShape)),{},GO(go.TextBlock,{name:"edge_label",text:"",textAlign:"center",font:"12px helvetica, bold Arial, sans-serif",stroke:"#333",editable:!1,opacity:1,segmentOffset:new go.Point(10,NaN),segmentOrientation:go.Link.OrientUpleft,margin:4},new go.Binding("text")))}definePathPattern("Dash","M0 0 M3 0 L6 0","#A01CBB");